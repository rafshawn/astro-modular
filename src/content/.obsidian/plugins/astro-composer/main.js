/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => AstroComposerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian12 = require("obsidian");

// src/types.ts
var KNOWN_ARRAY_KEYS = ["tags", "aliases", "cssclasses"];
var CONSTANTS = {
  DEBOUNCE_MS: 500,
  STAT_MTIME_THRESHOLD: 1e3,
  EDITOR_STABILIZE_DELAY: 100,
  FILE_EXPLORER_REVEAL_DELAY: 200
};

// src/settings.ts
var DEFAULT_SETTINGS = {
  defaultTemplate: '---\ntitle: "{{title}}"\ndate: {{date}}\ntags: []\n---\n',
  autoInsertProperties: true,
  dateFormat: "YYYY-MM-DD",
  enableCopyHeadingLink: true,
  copyHeadingLinkFormat: "obsidian",
  addTrailingSlashToLinks: false,
  enableOpenTerminalCommand: false,
  terminalProjectRootPath: "",
  terminalApplicationName: "",
  enableTerminalDebugLogging: false,
  enableTerminalRibbonIcon: false,
  enableOpenConfigFileCommand: false,
  configFilePath: "",
  enableConfigRibbonIcon: false,
  contentTypes: [],
  migrationCompleted: false,
  helpButtonReplacement: {
    enabled: false,
    commandId: "edit-astro-config",
    iconId: "wrench"
  },
  showMdxFilesInExplorer: false
};

// src/commands/index.ts
var import_obsidian5 = require("obsidian");

// src/utils/file-operations.ts
var import_obsidian = require("obsidian");

// src/utils/path-matching.ts
function matchesFolderPattern(filePath, folderPattern) {
  if (!folderPattern || folderPattern.trim() === "") {
    return !filePath.includes("/") || filePath.split("/").length === 1;
  }
  if (!folderPattern.includes("*")) {
    return filePath === folderPattern || filePath.startsWith(folderPattern + "/");
  }
  const escapedPattern = folderPattern.replace(/[.+?^${}()|[\]\\]/g, "\\$&").replace(/\*/g, "[^/]+");
  const regexPattern = `^${escapedPattern}(?:/|$)`;
  const regex = new RegExp(regexPattern);
  return regex.test(filePath);
}
function getPatternDepth(folderPattern) {
  if (!folderPattern || folderPattern.trim() === "") return 0;
  return folderPattern.split("/").length;
}
function sortByPatternSpecificity(types) {
  return [...types].sort((a, b) => {
    const depthA = getPatternDepth(a.folder);
    const depthB = getPatternDepth(b.folder);
    return depthB - depthA;
  });
}

// src/utils/file-operations.ts
var FileOperations = class {
  constructor(app, settings, plugin) {
    this.app = app;
    this.settings = settings;
    this.plugin = plugin;
  }
  // Get fresh settings from plugin if available, otherwise use stored settings
  getSettings() {
    var _a;
    if ((_a = this.plugin) == null ? void 0 : _a.settings) {
      return this.plugin.settings;
    }
    return this.settings;
  }
  toKebabCase(str) {
    return str.toLowerCase().replace(/[<>:"/\\|?*]/g, "").replace(/['"]/g, "").replace(/[^\w\s-]/g, "").trim().replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "");
  }
  generateFilename(title, enableUnderscorePrefix = false) {
    const kebabTitle = this.toKebabCase(title);
    const safeKebabTitle = kebabTitle || "untitled";
    const prefix = enableUnderscorePrefix ? "_" : "";
    return `${prefix}${safeKebabTitle}`;
  }
  determineType(file) {
    const filePath = file.path;
    const settings = this.getSettings();
    const contentTypes = settings.contentTypes || [];
    const sortedTypes = sortByPatternSpecificity(contentTypes);
    for (const contentType of sortedTypes) {
      if (!contentType.enabled) continue;
      if (!contentType.folder || contentType.folder.trim() === "") {
        if (!filePath.includes("/") || filePath.split("/").length === 1) {
          return contentType.id;
        }
      } else if (matchesFolderPattern(filePath, contentType.folder)) {
        if (contentType.ignoreSubfolders) {
          const pathSegments = filePath.split("/");
          const pathDepth = pathSegments.length;
          const patternSegments = contentType.folder.split("/");
          const expectedDepth = patternSegments.length;
          if (contentType.creationMode === "folder") {
            const folderDepth = pathDepth - 1;
            if (folderDepth === expectedDepth || folderDepth === expectedDepth + 1) {
              return contentType.id;
            }
          } else {
            if (pathDepth === expectedDepth) {
              return contentType.id;
            }
          }
        } else {
          return contentType.id;
        }
      }
    }
    return "note";
  }
  getContentType(typeId) {
    const settings = this.getSettings();
    const contentTypes = settings.contentTypes || [];
    return contentTypes.find((ct) => ct.id === typeId) || null;
  }
  getTitleKey(type) {
    if (type === "note") return "title";
    const contentType = this.getContentType(type);
    if (!contentType) return "title";
    const template = contentType.template;
    const lines = template.split("\n");
    let inProperties = false;
    for (const line of lines) {
      const trimmed = line.trim();
      if (trimmed === "---") {
        inProperties = !inProperties;
        continue;
      }
      if (inProperties) {
        const match = trimmed.match(/^(\w+):\s*(.+)$/);
        if (match) {
          const key = match[1];
          const value = match[2];
          if (value.includes("{{title}}")) {
            return key;
          }
        }
      }
    }
    return "title";
  }
  async createFile(options) {
    var _a;
    const { file, title, type } = options;
    if (!title) {
      new import_obsidian.Notice(`Title is required to create a ${type}.`);
      return null;
    }
    const contentType = this.getContentType(type);
    if (!contentType && type !== "note") {
      new import_obsidian.Notice(`Content type ${type} not found.`);
      return null;
    }
    const kebabTitle = this.toKebabCase(title);
    const enableUnderscorePrefix = (contentType == null ? void 0 : contentType.enableUnderscorePrefix) || false;
    const prefix = enableUnderscorePrefix ? "_" : "";
    let targetFolder = "";
    if (type === "note") {
      targetFolder = "";
    } else if (contentType) {
      const originalDir = ((_a = file.parent) == null ? void 0 : _a.path) || "";
      if (originalDir === "" || originalDir === "/") {
        targetFolder = contentType.folder || "";
      } else {
        targetFolder = originalDir;
      }
    }
    if (targetFolder) {
      const folder = this.app.vault.getAbstractFileByPath(targetFolder);
      if (!(folder instanceof import_obsidian.TFolder)) {
        await this.app.vault.createFolder(targetFolder);
      }
    }
    const creationMode = (contentType == null ? void 0 : contentType.creationMode) || "file";
    if (creationMode === "folder") {
      return this.createFolderStructure(file, kebabTitle, prefix, targetFolder, type, contentType);
    } else {
      return this.createFileStructure(file, kebabTitle, prefix, targetFolder, contentType);
    }
  }
  async createFolderStructure(file, kebabTitle, prefix, targetFolder, type, contentType) {
    var _a;
    const folderName = `${prefix}${kebabTitle}`;
    let folderPath;
    if (targetFolder) {
      folderPath = `${targetFolder}/${folderName}`;
    } else {
      const currentDir = file.parent ? file.parent.path : "";
      if (currentDir && currentDir !== "/") {
        folderPath = `${currentDir}/${folderName}`;
      } else {
        folderPath = folderName;
      }
    }
    try {
      const folder = this.app.vault.getAbstractFileByPath(folderPath);
      if (!(folder instanceof import_obsidian.TFolder)) {
        await this.app.vault.createFolder(folderPath);
      }
    } catch (e) {
    }
    const indexFileName = (contentType == null ? void 0 : contentType.indexFileName) || "index";
    const extension = (contentType == null ? void 0 : contentType.useMdxExtension) ? ".mdx" : ".md";
    const fileName = `${indexFileName}${extension}`;
    const newPath = `${folderPath}/${fileName}`;
    const existingFile = this.app.vault.getAbstractFileByPath(newPath);
    if (existingFile instanceof import_obsidian.TFile) {
      new import_obsidian.Notice(`File already exists at ${newPath}.`);
      return null;
    }
    if (this.plugin && "pluginCreatedFiles" in this.plugin) {
      const pluginWithFiles = this.plugin;
      (_a = pluginWithFiles.pluginCreatedFiles) == null ? void 0 : _a.add(newPath);
    }
    try {
      await this.app.fileManager.renameFile(file, newPath);
      const newFile = this.app.vault.getAbstractFileByPath(newPath);
      if (!(newFile instanceof import_obsidian.TFile)) {
        return null;
      }
      setTimeout(() => {
        const fileExplorer = this.app.workspace.getLeavesOfType("file-explorer")[0];
        if (fileExplorer && fileExplorer.view) {
          const view = fileExplorer.view;
          if (view && typeof view === "object" && "tree" in view) {
            const fileTree = view.tree;
            if (fileTree && newFile instanceof import_obsidian.TFile && typeof fileTree.revealFile === "function") {
              fileTree.revealFile(newFile);
            }
          }
        }
      }, 200);
      const leaf = this.app.workspace.getLeaf(false);
      await leaf.openFile(newFile);
      const positionCursor = () => {
        var _a2;
        const view = leaf.view;
        if (view && "editor" in view) {
          const editor = view.editor;
          if (editor) {
            const content = editor.getValue();
            if (content) {
              const lines = content.split("\n");
              const lastLine = lines.length - 1;
              const lastLineLength = ((_a2 = lines[lastLine]) == null ? void 0 : _a2.length) || 0;
              editor.setCursor({ line: lastLine, ch: lastLineLength });
              editor.focus();
              return true;
            }
          }
        }
        return false;
      };
      setTimeout(() => {
        if (!positionCursor()) {
          setTimeout(() => {
            positionCursor();
          }, 200);
        }
      }, 100);
      return newFile;
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : String(error);
      new import_obsidian.Notice(`Failed to create folder structure: ${errorMessage}.`);
      return null;
    }
  }
  async createFileStructure(file, kebabTitle, prefix, targetFolder, contentType) {
    var _a;
    const extension = (contentType == null ? void 0 : contentType.useMdxExtension) ? ".mdx" : ".md";
    const newName = `${prefix}${kebabTitle}${extension}`;
    let newPath;
    if (targetFolder) {
      newPath = `${targetFolder}/${newName}`;
    } else {
      const currentDir = file.parent ? file.parent.path : "";
      if (currentDir && currentDir !== "/") {
        newPath = `${currentDir}/${newName}`;
      } else {
        newPath = newName;
      }
    }
    const existingFile = this.app.vault.getAbstractFileByPath(newPath);
    if (existingFile instanceof import_obsidian.TFile && existingFile !== file) {
      new import_obsidian.Notice(`File with name "${newName}" already exists.`);
      return null;
    }
    if (this.plugin && "pluginCreatedFiles" in this.plugin) {
      const pluginWithFiles = this.plugin;
      (_a = pluginWithFiles.pluginCreatedFiles) == null ? void 0 : _a.add(newPath);
    }
    try {
      await this.app.fileManager.renameFile(file, newPath);
      const newFile = this.app.vault.getAbstractFileByPath(newPath);
      if (!(newFile instanceof import_obsidian.TFile)) {
        new import_obsidian.Notice("Failed to locate renamed file.");
        return null;
      }
      const leaf = this.app.workspace.getLeaf(false);
      await leaf.openFile(newFile);
      const positionCursor = () => {
        var _a2;
        const view = leaf.view;
        if (view && "editor" in view) {
          const editor = view.editor;
          if (editor) {
            const content = editor.getValue();
            if (content) {
              const lines = content.split("\n");
              const lastLine = lines.length - 1;
              const lastLineLength = ((_a2 = lines[lastLine]) == null ? void 0 : _a2.length) || 0;
              editor.setCursor({ line: lastLine, ch: lastLineLength });
              editor.focus();
              return true;
            }
          }
        }
        return false;
      };
      setTimeout(() => {
        if (!positionCursor()) {
          setTimeout(() => {
            positionCursor();
          }, 200);
        }
      }, 100);
      return newFile;
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : String(error);
      new import_obsidian.Notice(`Failed to rename file: ${errorMessage}.`);
      return null;
    }
  }
  async renameFile(options) {
    const { file, title, type } = options;
    if (!title) {
      new import_obsidian.Notice(`Title is required to rename the content.`);
      return null;
    }
    const contentType = this.getContentType(type);
    if (!contentType && type !== "note") {
      new import_obsidian.Notice(`Content type ${type} not found.`);
      return null;
    }
    const kebabTitle = this.toKebabCase(title);
    const prefix = "";
    const creationMode = (contentType == null ? void 0 : contentType.creationMode) || "file";
    if (creationMode === "folder") {
      return this.renameFolderStructure(file, kebabTitle, prefix, type, contentType);
    } else {
      return this.renameFileStructure(file, kebabTitle, prefix, contentType);
    }
  }
  async renameFolderStructure(file, kebabTitle, prefix, type, contentType) {
    const indexFileName = (contentType == null ? void 0 : contentType.indexFileName) || "index";
    const isIndex = file.basename === indexFileName;
    if (isIndex) {
      if (!file.parent) {
        new import_obsidian.Notice("Cannot rename: file has no parent folder.");
        return null;
      }
      prefix = file.parent.name.startsWith("_") ? "_" : "";
      const newFolderName = `${prefix}${kebabTitle}`;
      const parentFolder = file.parent.parent;
      if (!parentFolder) {
        new import_obsidian.Notice("Cannot rename: parent folder has no parent.");
        return null;
      }
      let newFolderPath;
      if (parentFolder.path === "" || parentFolder.path === "/") {
        newFolderPath = newFolderName;
      } else {
        newFolderPath = `${parentFolder.path}/${newFolderName}`;
      }
      const existingFolder = this.app.vault.getAbstractFileByPath(newFolderPath);
      if (existingFolder instanceof import_obsidian.TFolder) {
        new import_obsidian.Notice(`Folder already exists at ${newFolderPath}.`);
        return null;
      }
      try {
        await this.app.fileManager.renameFile(file.parent, newFolderPath);
      } catch (error) {
        const errorMessage = error instanceof Error ? error.message : String(error);
        new import_obsidian.Notice(`Failed to rename folder: ${errorMessage}.`);
        return null;
      }
      const newFilePath = `${newFolderPath}/${file.name}`;
      const newFile = this.app.vault.getAbstractFileByPath(newFilePath);
      if (!(newFile instanceof import_obsidian.TFile)) {
        new import_obsidian.Notice("Failed to locate renamed file.");
        return null;
      }
      return newFile;
    } else {
      if (!file.parent) {
        new import_obsidian.Notice("Cannot rename: file has no parent folder.");
        return null;
      }
      prefix = file.basename.startsWith("_") ? "_" : "";
      const extension = file.extension;
      const newName = `${prefix}${kebabTitle}.${extension}`;
      const newPath = `${file.parent.path}/${newName}`;
      const existingFile = this.app.vault.getAbstractFileByPath(newPath);
      if (existingFile instanceof import_obsidian.TFile && existingFile !== file) {
        new import_obsidian.Notice(`File already exists at ${newPath}.`);
        return null;
      }
      await this.app.fileManager.renameFile(file, newPath);
      const newFile = this.app.vault.getAbstractFileByPath(newPath);
      if (!(newFile instanceof import_obsidian.TFile)) {
        new import_obsidian.Notice("Failed to locate renamed file.");
        return null;
      }
      return newFile;
    }
  }
  async renameFileStructure(file, kebabTitle, prefix, contentType) {
    var _a, _b;
    if (!file.parent) {
      new import_obsidian.Notice("Cannot rename: file has no parent folder.");
      return null;
    }
    const indexFileName = (contentType == null ? void 0 : contentType.indexFileName) || "";
    const isIndex = indexFileName && indexFileName.trim() !== "" && file.basename === indexFileName;
    if (isIndex) {
      prefix = file.parent.name.startsWith("_") ? "_" : "";
      const newFolderName = `${prefix}${kebabTitle}`;
      const parentFolder = file.parent.parent;
      if (!parentFolder) {
        new import_obsidian.Notice("Cannot rename: parent folder has no parent.");
        return null;
      }
      let newFolderPath;
      if (parentFolder.path === "" || parentFolder.path === "/") {
        newFolderPath = newFolderName;
      } else {
        newFolderPath = `${parentFolder.path}/${newFolderName}`;
      }
      const existingFolder = this.app.vault.getAbstractFileByPath(newFolderPath);
      if (existingFolder instanceof import_obsidian.TFolder) {
        new import_obsidian.Notice(`Folder already exists at ${newFolderPath}.`);
        return null;
      }
      const newFilePath = `${newFolderPath}/${file.name}`;
      if (this.plugin && "pluginCreatedFiles" in this.plugin) {
        const pluginWithFiles = this.plugin;
        (_a = pluginWithFiles.pluginCreatedFiles) == null ? void 0 : _a.add(newFilePath);
      }
      try {
        await this.app.fileManager.renameFile(file.parent, newFolderPath);
      } catch (error) {
        console.error("FileOperations: Folder rename failed:", error);
        const errorMessage = error instanceof Error ? error.message : String(error);
        new import_obsidian.Notice(`Failed to rename folder: ${errorMessage}.`);
        return null;
      }
      const newFile2 = this.app.vault.getAbstractFileByPath(newFilePath);
      if (!(newFile2 instanceof import_obsidian.TFile)) {
        new import_obsidian.Notice("Failed to locate renamed file.");
        return null;
      }
      return newFile2;
    }
    prefix = file.basename.startsWith("_") ? "_" : "";
    const extension = file.extension;
    const newName = `${prefix}${kebabTitle}.${extension}`;
    let newPath;
    if (file.parent.path === "" || file.parent.path === "/") {
      newPath = newName;
    } else {
      newPath = `${file.parent.path}/${newName}`;
    }
    const existingFile = this.app.vault.getAbstractFileByPath(newPath);
    if (existingFile instanceof import_obsidian.TFile && existingFile !== file) {
      new import_obsidian.Notice(`File already exists at ${newPath}.`);
      return null;
    }
    if (this.plugin && "pluginCreatedFiles" in this.plugin) {
      const pluginWithFiles = this.plugin;
      (_b = pluginWithFiles.pluginCreatedFiles) == null ? void 0 : _b.add(newPath);
    }
    try {
      await this.app.fileManager.renameFile(file, newPath);
    } catch (error) {
      console.error("FileOperations: File rename failed:", error);
      const errorMessage = error instanceof Error ? error.message : String(error);
      new import_obsidian.Notice(`Failed to rename file: ${errorMessage}.`);
      return null;
    }
    const newFile = this.app.vault.getAbstractFileByPath(newPath);
    if (!(newFile instanceof import_obsidian.TFile)) {
      new import_obsidian.Notice("Failed to locate renamed file.");
      return null;
    }
    return newFile;
  }
};

// src/utils/template-parsing.ts
var import_obsidian2 = require("obsidian");
var TemplateParser = class {
  constructor(app, settings) {
    this.app = app;
    this.settings = settings;
  }
  /**
   * Convert a string to kebab-case for slug generation
   */
  toKebabCase(str) {
    return str.toLowerCase().replace(/[^a-z0-9\s-]/g, "").trim().replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "");
  }
  parseFrontmatter(content) {
    let propertiesEnd = 0;
    let propertiesText = "";
    const existingProperties = {};
    if (content.startsWith("---")) {
      propertiesEnd = content.indexOf("\n---", 3);
      if (propertiesEnd === -1) {
        propertiesEnd = content.length;
      } else {
        propertiesEnd += 4;
      }
      propertiesText = content.slice(4, propertiesEnd - 4).trim();
      try {
        let currentKey = null;
        const arrayKeys = /* @__PURE__ */ new Set();
        propertiesText.split("\n").forEach((line) => {
          const trimmedLine = line.trim();
          const match = trimmedLine.match(/^([a-zA-Z_][a-zA-Z0-9_-]*):\s*(.*)$/);
          if (match) {
            const [, key, value] = match;
            currentKey = key;
            const trimmedValue = value ? value.trim() : "";
            const bracketArrayMatch = trimmedValue.match(/^\[(.*)\]$/);
            if (bracketArrayMatch) {
              const arrayContent = bracketArrayMatch[1].trim();
              existingProperties[key] = [];
              arrayKeys.add(key);
              if (arrayContent) {
                const items = [];
                let currentItem = "";
                let inQuotes = false;
                let quoteChar = "";
                for (let i = 0; i < arrayContent.length; i++) {
                  const char = arrayContent[i];
                  if (!inQuotes && (char === '"' || char === "'")) {
                    inQuotes = true;
                    quoteChar = char;
                  } else if (inQuotes && char === quoteChar) {
                    if (i > 0 && arrayContent[i - 1] === "\\") {
                      currentItem += char;
                    } else {
                      inQuotes = false;
                      quoteChar = "";
                    }
                  } else if (!inQuotes && char === ",") {
                    const trimmedItem = currentItem.trim();
                    if (trimmedItem) {
                      const unquoted = trimmedItem.replace(/^["']|["']$/g, "");
                      items.push(unquoted);
                    }
                    currentItem = "";
                  } else {
                    currentItem += char;
                  }
                }
                if (currentItem.trim()) {
                  const trimmedItem = currentItem.trim();
                  const unquoted = trimmedItem.replace(/^["']|["']$/g, "");
                  items.push(unquoted);
                }
                existingProperties[key] = items;
              }
            } else {
              const isKnownArrayKey = KNOWN_ARRAY_KEYS.includes(key);
              const isEmptyArray = !trimmedValue || trimmedValue === "";
              const isArrayProperty = isKnownArrayKey || isEmptyArray;
              if (isArrayProperty) {
                existingProperties[key] = [];
                arrayKeys.add(key);
              } else {
                const unquotedValue = trimmedValue.replace(/^["']|["']$/g, "");
                existingProperties[key] = [unquotedValue];
              }
            }
          } else if (currentKey && trimmedLine.startsWith("- ")) {
            const isArrayProperty = arrayKeys.has(currentKey);
            if (isArrayProperty) {
              const item = trimmedLine.replace(/^-\s*/, "");
              if (item) existingProperties[currentKey].push(item);
            }
          } else if (trimmedLine && !trimmedLine.startsWith("- ") && !trimmedLine.startsWith("#")) {
            const keyMatch = trimmedLine.match(/^([^:]+):\s*(.*)$/);
            if (keyMatch) {
              const [, key, value] = keyMatch;
              if (!existingProperties[key]) {
                existingProperties[key] = [value ? value.trim() : ""];
              }
            }
          }
        });
        KNOWN_ARRAY_KEYS.forEach((key) => {
          if (propertiesText.includes(key + ":") && !existingProperties[key]) {
            existingProperties[key] = [];
          }
        });
      } catch (e) {
        new import_obsidian2.Notice("Falling back to template due to parsing error.");
      }
    }
    const bodyContent = content.slice(propertiesEnd);
    return {
      properties: existingProperties,
      propertiesText,
      propertiesEnd,
      bodyContent
    };
  }
  parseTemplate(templateString, title) {
    const templateLines = templateString.split("\n");
    const templateProps = [];
    const templateValues = {};
    let inProperties = false;
    for (let i = 0; i < templateLines.length; i++) {
      const line = templateLines[i].trim();
      if (line === "---") {
        inProperties = !inProperties;
        if (!inProperties) {
          break;
        }
        continue;
      }
      if (inProperties) {
        const match = line.match(/^(\w+):\s*(.*)$/);
        if (match) {
          const [, key, value] = match;
          templateProps.push(key);
          const isKnownArrayKey = KNOWN_ARRAY_KEYS.includes(key);
          const isEmptyArray = !value || value.trim() === "" || value.trim() === "[]";
          const isArrayProperty = isKnownArrayKey || isEmptyArray;
          if (isArrayProperty) {
            if (value && value.startsWith("[")) {
              const items = value.replace(/[[\]]/g, "").split(",").map((t) => t.trim()).filter((t) => t);
              templateValues[key] = items;
            } else {
              templateValues[key] = [];
              for (let j = i + 1; j < templateLines.length; j++) {
                const nextLine = templateLines[j].trim();
                if (nextLine.startsWith("- ")) {
                  const item = nextLine.replace(/^-\s*/, "").trim();
                  if (item) {
                    const arrayValue = templateValues[key];
                    if (Array.isArray(arrayValue)) {
                      arrayValue.push(item);
                    }
                  }
                } else if (nextLine === "---" || nextLine && !nextLine.startsWith("- ") && nextLine.includes(":")) {
                  break;
                }
              }
            }
          } else {
            const slug = this.toKebabCase(title);
            const stringValue = (value || "").replace(/\{\{title\}\}/g, title).replace(/\{\{date\}\}/g, window.moment(/* @__PURE__ */ new Date()).format(this.settings.dateFormat)).replace(/\{\{slug\}\}/g, slug);
            templateValues[key] = stringValue;
          }
        }
      }
    }
    return { templateProps, templateValues };
  }
  buildFrontmatterContent(finalProps, arrayKeys) {
    let newContent = "---\n";
    for (const key in finalProps) {
      const isArrayProperty = KNOWN_ARRAY_KEYS.includes(key) || arrayKeys && arrayKeys.has(key);
      if (isArrayProperty) {
        newContent += `${key}:
`;
        if (finalProps[key].length > 0) {
          finalProps[key].forEach((item) => {
            newContent += `  - ${item}
`;
          });
        }
      } else {
        newContent += `${key}: ${finalProps[key][0] || ""}
`;
      }
    }
    newContent += "---";
    return newContent;
  }
  async updateTitleInFrontmatter(file, newTitle, type) {
    const titleKey = this.getTitleKey(type);
    const hasTitleInTemplate = this.templateHasTitle(type);
    if (!hasTitleInTemplate) {
      return;
    }
    const content = await this.app.vault.read(file);
    let propertiesEnd = 0;
    let propertiesText = "";
    let hasFrontmatter = false;
    if (content.startsWith("---")) {
      hasFrontmatter = true;
      propertiesEnd = content.indexOf("\n---", 3);
      if (propertiesEnd === -1) {
        propertiesEnd = content.length;
      } else {
        propertiesEnd += 4;
      }
      propertiesText = content.slice(4, propertiesEnd - 4).trim();
    }
    const propOrder = [];
    const existing = {};
    let currentKey = null;
    let titleKeyPosition = -1;
    const arrayKeys = /* @__PURE__ */ new Set();
    propertiesText.split("\n").forEach((line, index) => {
      const trimmedLine = line.trim();
      const match = trimmedLine.match(/^([a-zA-Z_][a-zA-Z0-9_-]*):\s*(.*)$/);
      if (match) {
        const [, key, value] = match;
        propOrder.push(key);
        currentKey = key;
        if (key === titleKey) {
          titleKeyPosition = index;
        }
        const isKnownArrayKey = KNOWN_ARRAY_KEYS.includes(key);
        const isEmptyArray = !value || value.trim() === "" || value.trim() === "[]";
        const isArrayProperty = isKnownArrayKey || isEmptyArray;
        if (isArrayProperty) {
          existing[key] = [];
          arrayKeys.add(key);
        } else {
          existing[key] = value ? value.trim() : "";
        }
      } else if (currentKey && arrayKeys.has(currentKey) && trimmedLine.startsWith("- ")) {
        const item = trimmedLine.replace(/^-\s*/, "");
        if (item) existing[currentKey].push(item);
      } else if (trimmedLine && !trimmedLine.startsWith("- ") && !trimmedLine.startsWith("#")) {
        const keyMatch = trimmedLine.match(/^([^:]+):\s*(.*)$/);
        if (keyMatch) {
          const [, key, value] = keyMatch;
          if (!propOrder.includes(key)) {
            propOrder.push(key);
            existing[key] = value ? value.trim() : "";
          }
        }
      }
    });
    let titleVal;
    if (newTitle.includes('"') || newTitle.includes("'") || newTitle.includes("\n") || newTitle.includes("\\")) {
      titleVal = `'${newTitle.replace(/'/g, "''")}'`;
    } else if (newTitle.includes(" ") || newTitle.includes(":") || newTitle.includes("#") || newTitle.includes("@")) {
      titleVal = `"${newTitle.replace(/"/g, '\\"')}"`;
    } else {
      titleVal = newTitle;
    }
    existing[titleKey] = titleVal;
    if ("slug" in existing) {
      const newSlug = this.toKebabCase(newTitle);
      existing["slug"] = newSlug;
    }
    if (titleKeyPosition === -1) {
      propOrder.push(titleKey);
    }
    if (!hasFrontmatter) {
      return;
    }
    let newContent = "---\n";
    for (const key of propOrder) {
      const val = existing[key];
      if (Array.isArray(val)) {
        newContent += `${key}:
`;
        if (val.length > 0) {
          val.forEach((item) => {
            newContent += `  - ${item}
`;
          });
        }
      } else {
        newContent += `${key}: ${val || ""}
`;
      }
    }
    newContent += "---\n";
    const bodyContent = content.slice(propertiesEnd);
    newContent += bodyContent;
    await this.app.vault.modify(file, newContent);
  }
  getTitleKey(type) {
    if (type === "note") return "title";
    const contentTypes = this.settings.contentTypes || [];
    const contentType = contentTypes.find((ct) => ct.id === type);
    if (!contentType) return "title";
    const template = contentType.template;
    const lines = template.split("\n");
    let inProperties = false;
    for (const line of lines) {
      const trimmed = line.trim();
      if (trimmed === "---") {
        inProperties = !inProperties;
        continue;
      }
      if (inProperties) {
        const match = trimmed.match(/^(\w+):\s*(.+)$/);
        if (match) {
          const key = match[1];
          const value = match[2];
          if (value.includes("{{title}}")) {
            return key;
          }
        }
      }
    }
    return "title";
  }
  // Check if the template for this content type has {{title}}
  templateHasTitle(type) {
    if (type === "note") return true;
    const contentTypes = this.settings.contentTypes || [];
    const contentType = contentTypes.find((ct) => ct.id === type);
    if (!contentType) return true;
    const template = contentType.template;
    return template.includes("{{title}}");
  }
};

// src/utils/link-conversion.ts
var import_obsidian3 = require("obsidian");
var LinkConverter = class {
  constructor(settings, plugin) {
    this.settings = settings;
    this.plugin = plugin;
  }
  // Get fresh settings from plugin if available, otherwise use stored settings
  getSettings() {
    var _a;
    if ((_a = this.plugin) == null ? void 0 : _a.settings) {
      return this.plugin.settings;
    }
    return this.settings;
  }
  toKebabCase(str) {
    return str.toLowerCase().replace(/[^a-z0-9\s-]/g, "").trim().replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "");
  }
  getAstroUrlFromInternalLink(link) {
    const hashIndex = link.indexOf("#");
    let path = hashIndex >= 0 ? link.slice(0, hashIndex) : link;
    const anchor = hashIndex >= 0 ? link.slice(hashIndex) : "";
    path = decodeURIComponent(path);
    path = path.replace(/\.(md|mdx)$/, "");
    const fileExtension = link.endsWith(".mdx") ? ".mdx" : ".md";
    const contentTypeInfo = this.getContentTypeForPath(path + fileExtension);
    let basePath = contentTypeInfo.basePath || "";
    let contentFolder = contentTypeInfo.contentFolder || "";
    let indexFileName = contentTypeInfo.indexFileName || "";
    if (contentFolder) {
      path = path.slice(contentFolder.length + 1);
    }
    let addTrailingSlash = false;
    const parts = path.split("/");
    const lastPart = parts[parts.length - 1];
    if (indexFileName && indexFileName.trim() !== "" && lastPart === indexFileName) {
      parts.pop();
      path = parts.join("/");
      addTrailingSlash = true;
    } else if ((!indexFileName || indexFileName.trim() === "") && lastPart === "index") {
      parts.pop();
      path = parts.join("/");
      addTrailingSlash = true;
    }
    const slugParts = path.split("/").map((part) => this.toKebabCase(part));
    const slug = slugParts.join("/");
    if (basePath) {
      if (!basePath.startsWith("/")) {
        basePath = "/" + basePath;
      }
      if (!basePath.endsWith("/")) {
        basePath += "/";
      }
    } else {
      basePath = "/";
    }
    const settings = this.getSettings();
    const shouldAddTrailingSlash = (settings.addTrailingSlashToLinks || addTrailingSlash) && !anchor;
    return `${basePath}${slug}${shouldAddTrailingSlash ? "/" : ""}${anchor}`;
  }
  getAstroUrlFromInternalLinkWithContext(link, currentFilePath, currentFileContentType) {
    const hashIndex = link.indexOf("#");
    let path = hashIndex >= 0 ? link.slice(0, hashIndex) : link;
    const anchor = hashIndex >= 0 ? link.slice(hashIndex) : "";
    path = decodeURIComponent(path);
    path = path.replace(/\.(md|mdx)$/, "");
    let basePath = "";
    let contentFolder = "";
    let indexFileName = "";
    const fileExtension = link.endsWith(".mdx") ? ".mdx" : ".md";
    const targetContentType = this.getContentTypeForPath(path + fileExtension);
    if (!targetContentType.basePath && currentFileContentType.basePath) {
      basePath = currentFileContentType.basePath;
      indexFileName = currentFileContentType.indexFileName;
      contentFolder = currentFileContentType.contentFolder;
    } else {
      basePath = targetContentType.basePath;
      indexFileName = targetContentType.indexFileName;
      contentFolder = targetContentType.contentFolder;
    }
    if (contentFolder) {
      path = path.slice(contentFolder.length + 1);
    }
    let addTrailingSlash = false;
    const parts = path.split("/");
    const lastPart = parts[parts.length - 1];
    if (indexFileName && indexFileName.trim() !== "" && lastPart === indexFileName) {
      parts.pop();
      path = parts.join("/");
      addTrailingSlash = true;
    } else if ((!indexFileName || indexFileName.trim() === "") && lastPart === "index") {
      parts.pop();
      path = parts.join("/");
      addTrailingSlash = true;
    }
    const slugParts = path.split("/").map((part) => this.toKebabCase(part));
    const slug = slugParts.join("/");
    if (basePath) {
      if (!basePath.startsWith("/")) {
        basePath = "/" + basePath;
      }
      if (!basePath.endsWith("/")) {
        basePath += "/";
      }
    } else {
      basePath = "/";
    }
    const settings = this.getSettings();
    const shouldAddTrailingSlash = (settings.addTrailingSlashToLinks || addTrailingSlash) && !anchor;
    return `${basePath}${slug}${shouldAddTrailingSlash ? "/" : ""}${anchor}`;
  }
  isInConfiguredContentDirectory(filePath) {
    const settings = this.getSettings();
    const contentTypes = settings.contentTypes || [];
    const sortedTypes = sortByPatternSpecificity(contentTypes);
    for (const contentType of sortedTypes) {
      if (!contentType.enabled) continue;
      if (!contentType.folder || contentType.folder.trim() === "") {
        if (!filePath.includes("/") || filePath.split("/").length === 1) {
          return true;
        }
      } else if (matchesFolderPattern(filePath, contentType.folder)) {
        if (contentType.ignoreSubfolders) {
          const pathSegments = filePath.split("/");
          const pathDepth = pathSegments.length;
          const patternSegments = contentType.folder.split("/");
          const expectedDepth = patternSegments.length;
          if (contentType.creationMode === "folder") {
            const folderDepth = pathDepth - 1;
            if (folderDepth === expectedDepth || folderDepth === expectedDepth + 1) {
              return true;
            }
          } else {
            if (pathDepth === expectedDepth) {
              return true;
            }
          }
        } else {
          return true;
        }
      }
    }
    return false;
  }
  getContentTypeForPath(filePath) {
    const settings = this.getSettings();
    const contentTypes = settings.contentTypes || [];
    const sortedTypes = sortByPatternSpecificity(contentTypes);
    for (const contentType of sortedTypes) {
      if (!contentType.enabled) continue;
      if (!contentType.folder || contentType.folder.trim() === "") {
        if (!filePath.includes("/") || filePath.split("/").length === 1) {
          return {
            basePath: contentType.linkBasePath || "",
            creationMode: contentType.creationMode,
            indexFileName: contentType.indexFileName || "",
            contentFolder: ""
          };
        }
      } else if (matchesFolderPattern(filePath, contentType.folder)) {
        if (contentType.ignoreSubfolders) {
          const pathSegments = filePath.split("/");
          const pathDepth = pathSegments.length;
          const patternSegments = contentType.folder.split("/");
          const expectedDepth = patternSegments.length;
          if (contentType.creationMode === "folder") {
            const folderDepth = pathDepth - 1;
            if (folderDepth === expectedDepth || folderDepth === expectedDepth + 1) {
              return {
                basePath: contentType.linkBasePath || "",
                creationMode: contentType.creationMode,
                indexFileName: contentType.indexFileName || "",
                contentFolder: contentType.folder
              };
            }
          } else {
            if (pathDepth === expectedDepth) {
              return {
                basePath: contentType.linkBasePath || "",
                creationMode: contentType.creationMode,
                indexFileName: contentType.indexFileName || "",
                contentFolder: contentType.folder
              };
            }
          }
        } else {
          return {
            basePath: contentType.linkBasePath || "",
            creationMode: contentType.creationMode,
            indexFileName: contentType.indexFileName || "",
            contentFolder: contentType.folder
          };
        }
      }
    }
    return {
      basePath: "",
      creationMode: "file",
      indexFileName: "",
      contentFolder: ""
    };
  }
  convertWikilinksForAstro(editor, file) {
    var _a, _b;
    if (!(file instanceof import_obsidian3.TFile)) {
      new import_obsidian3.Notice("No active file.");
      return;
    }
    const cursor = editor.getCursor();
    const originalLine = cursor.line;
    const originalCh = cursor.ch;
    const originalContent = editor.getValue();
    const originalLineCount = originalContent.split("\n").length;
    const originalLineLength = ((_a = originalContent.split("\n")[originalLine]) == null ? void 0 : _a.length) || 0;
    const content = editor.getValue();
    let newContent = content;
    let convertedCount = 0;
    let skippedCount = 0;
    const skippedLinks = [];
    const currentFileContentType = this.getContentTypeForPath(file.path);
    const imageExtensions = /\.(png|jpg|jpeg|gif|svg)$/i;
    const canConvertLink = (linkText) => {
      if (imageExtensions.test(linkText)) {
        return false;
      }
      if (linkText.match(/^https?:\/\//)) {
        return false;
      }
      if (!linkText.includes(".md") && !linkText.includes(".mdx") && !linkText.match(/^[a-zA-Z0-9_-]+(\/[a-zA-Z0-9_-]+)*$/)) {
        return false;
      }
      let targetPath;
      if (linkText.endsWith(".md") || linkText.endsWith(".mdx")) {
        targetPath = linkText;
      } else {
        targetPath = linkText + ".md";
      }
      const isInConfiguredDirectory = this.isInConfiguredContentDirectory(targetPath);
      const isSimpleFilename = !targetPath.includes("/");
      const hasCurrentContentType = currentFileContentType.basePath !== "" || currentFileContentType.creationMode !== "file" || currentFileContentType.indexFileName !== "";
      return isInConfiguredDirectory || isSimpleFilename && hasCurrentContentType;
    };
    newContent = newContent.replace(
      /\[\[([^\]|]+)(\|([^\]]+))?\]\]/g,
      (match, linkText, _pipe, displayText) => {
        if (imageExtensions.test(linkText)) {
          skippedCount++;
          skippedLinks.push(linkText);
          return match;
        }
        if (!canConvertLink(linkText)) {
          skippedCount++;
          skippedLinks.push(linkText);
          return match;
        }
        const display = displayText || linkText.replace(/\.(md|mdx)$/, "");
        const url = this.getAstroUrlFromInternalLinkWithContext(linkText, file.path, currentFileContentType);
        convertedCount++;
        return `[${display}](${url})`;
      }
    );
    newContent = newContent.replace(
      /\[([^\]]+)\]\(([^)]+\.(md|mdx)[^)]*)\)/g,
      (match, displayText, link) => {
        if (link.match(/^https?:\/\//) || imageExtensions.test(link)) {
          skippedCount++;
          skippedLinks.push(link);
          return match;
        }
        if (!canConvertLink(link)) {
          skippedCount++;
          skippedLinks.push(link);
          return match;
        }
        const url = this.getAstroUrlFromInternalLinkWithContext(link, file.path, currentFileContentType);
        convertedCount++;
        return `[${displayText}](${url})`;
      }
    );
    newContent = newContent.replace(
      /!\[(.*?)\]\(([^)]+)\)/g,
      (match) => {
        skippedCount++;
        return match;
      }
    );
    newContent = newContent.replace(/\{\{([^}]+)\}\}/g, (match, fileName) => {
      if (imageExtensions.test(fileName)) {
        skippedCount++;
        skippedLinks.push(fileName);
        return match;
      }
      if (!canConvertLink(fileName)) {
        skippedCount++;
        skippedLinks.push(fileName);
        return match;
      }
      const url = this.getAstroUrlFromInternalLinkWithContext(fileName, file.path, currentFileContentType);
      convertedCount++;
      return `[Embedded: ${fileName}](${url})`;
    });
    editor.setValue(newContent);
    const newLineCount = newContent.split("\n").length;
    const newLineLength = ((_b = newContent.split("\n")[originalLine]) == null ? void 0 : _b.length) || 0;
    let newLine = originalLine;
    let newCh = originalCh;
    if (newLineCount !== originalLineCount) {
      if (newLine >= newLineCount) {
        newLine = Math.max(0, newLineCount - 1);
      }
    }
    if (newLineLength !== originalLineLength) {
      if (newCh > newLineLength) {
        newCh = Math.max(0, newLineLength);
      }
    }
    editor.setCursor({ line: newLine, ch: newCh });
    if (convertedCount > 0 && skippedCount === 0) {
      new import_obsidian3.Notice(`Converted ${convertedCount} internal link${convertedCount > 1 ? "s" : ""} for Astro.`);
    } else if (convertedCount > 0 && skippedCount > 0) {
      new import_obsidian3.Notice(`Converted ${convertedCount} link${convertedCount > 1 ? "s" : ""} for Astro. Skipped ${skippedCount} link${skippedCount > 1 ? "s" : ""} outside configured content directories.`);
    } else if (skippedCount > 0) {
      new import_obsidian3.Notice(`No links converted. All ${skippedCount} link${skippedCount > 1 ? "s" : ""} are outside configured content directories or are images/external links.`);
    } else {
      new import_obsidian3.Notice("No internal links found to convert.");
    }
  }
};

// src/ui/title-modal.ts
var import_obsidian4 = require("obsidian");
var TitleModal = class extends import_obsidian4.Modal {
  constructor(app, file, plugin, type, isRename = false, isNewNote = false) {
    super(app);
    this.file = file;
    this.plugin = plugin;
    this.type = type;
    this.isRename = isRename;
    this.isNewNote = isNewNote;
    const settings = plugin.settings;
    this.fileOps = new FileOperations(app, settings, plugin);
    this.templateParser = new TemplateParser(app, settings);
  }
  async getCurrentTitleAsync() {
    if (!this.file) {
      return "";
    }
    try {
      const content = await this.app.vault.read(this.file);
      const titleKey = this.fileOps.getTitleKey(this.type);
      const { properties } = this.templateParser.parseFrontmatter(content);
      if (titleKey in properties) {
        const titleValue = properties[titleKey];
        if (Array.isArray(titleValue) && titleValue.length > 0) {
          return String(titleValue[0]);
        }
        if (titleValue !== null && titleValue !== void 0) {
          return String(titleValue);
        }
      }
    } catch (error) {
      console.error("Error reading file for title:", error);
    }
    return this.getFallbackTitle();
  }
  getCurrentTitle() {
    if (!this.file) {
      return "";
    }
    const titleKey = this.fileOps.getTitleKey(this.type);
    const cache = this.app.metadataCache.getFileCache(this.file);
    if ((cache == null ? void 0 : cache.frontmatter) && titleKey in cache.frontmatter) {
      const titleValue = cache.frontmatter[titleKey];
      if (typeof titleValue === "string") {
        return titleValue;
      }
      if (Array.isArray(titleValue) && titleValue.length > 0) {
        const firstValue = titleValue[0];
        if (typeof firstValue === "string") {
          return firstValue;
        }
        if (firstValue != null) {
          if (typeof firstValue === "number" || typeof firstValue === "boolean") {
            return String(firstValue);
          }
          if (typeof firstValue === "string") {
            return firstValue;
          }
        }
      }
      if (titleValue == null) {
        return "";
      }
      if (typeof titleValue === "number" || typeof titleValue === "boolean") {
        return String(titleValue);
      }
      if (typeof titleValue === "string") {
        return titleValue;
      }
      return "";
    }
    return this.getFallbackTitle();
  }
  getFallbackTitle() {
    if (!this.file) {
      return "";
    }
    let basename = this.file.basename;
    if (this.file.parent && this.type !== "note") {
      const contentType = this.fileOps.getContentType(this.type);
      const indexFileName = (contentType == null ? void 0 : contentType.indexFileName) || "";
      if (indexFileName.trim() !== "" && basename === indexFileName) {
        basename = this.file.parent.name;
      }
    }
    if (basename.startsWith("_")) {
      basename = basename.slice(1);
    }
    return basename.replace(/-/g, " ").split(" ").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
  }
  /**
   * Extracts a suggested title from the file basename for newly created files.
   * This is used when a file is created from a link (e.g., [[sEfsleif]]).
   * Preserves the original text as much as possible.
   */
  getSuggestedTitleFromBasename() {
    if (!this.file) {
      return "";
    }
    let basename = this.file.basename;
    if (this.file.parent && this.type !== "note") {
      const contentType = this.fileOps.getContentType(this.type);
      const indexFileName = (contentType == null ? void 0 : contentType.indexFileName) || "";
      if (indexFileName.trim() !== "" && basename === indexFileName) {
        basename = this.file.parent.name;
      }
    }
    if (basename.startsWith("_")) {
      basename = basename.slice(1);
    }
    return basename;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const isMobile = window.innerWidth <= 768 || import_obsidian4.Platform.isMobile;
    if (isMobile) {
      this.modalEl.addClass("astro-composer-mobile-modal");
    }
    if (this.isRename) {
      const typeName = this.getTypeDisplayName();
      if (this.type === "note") {
        contentEl.createEl("h2", { text: "Rename content" });
        contentEl.createEl("p", { text: "Enter a title for this content:" });
      } else {
        contentEl.createEl("h2", { text: `Rename ${typeName} content` });
        contentEl.createEl("p", { text: `Enter new title for your ${typeName} content:` });
      }
      this.titleInput = contentEl.createEl("input", {
        type: "text",
        placeholder: "New Title",
        cls: "astro-composer-title-input"
      });
      void this.getCurrentTitleAsync().then((title) => {
        this.titleInput.value = title;
      });
    } else if (this.isNewNote) {
      const typeName = this.getTypeDisplayName();
      if (this.type === "note") {
        contentEl.createEl("h2", { text: "New content" });
        contentEl.createEl("p", { text: "Enter a title for this content:" });
      } else {
        contentEl.createEl("h2", { text: `Create new ${typeName} content` });
        contentEl.createEl("p", { text: `Enter a title for your new ${typeName} content:` });
      }
      this.titleInput = contentEl.createEl("input", {
        type: "text",
        placeholder: "New Title",
        cls: "astro-composer-title-input"
      });
    } else {
      const typeName = this.getTypeDisplayName();
      if (this.type === "note") {
        contentEl.createEl("h2", { text: "New content" });
        contentEl.createEl("p", { text: "Enter a title for this content:" });
      } else {
        contentEl.createEl("h2", { text: `Create new ${typeName} content` });
        contentEl.createEl("p", { text: `Enter a title for your new ${typeName} content:` });
      }
      this.titleInput = contentEl.createEl("input", {
        type: "text",
        placeholder: "New Title",
        cls: "astro-composer-title-input"
      });
      if (this.file) {
        const suggestedTitle = this.getSuggestedTitleFromBasename();
        if (suggestedTitle) {
          this.titleInput.value = suggestedTitle;
        }
      }
    }
    this.titleInput.focus();
    if (this.isNewNote) {
      setTimeout(() => {
        this.titleInput.setSelectionRange(0, 0);
      }, 0);
    }
    const buttonContainer = contentEl.createDiv({ cls: "astro-composer-button-container" });
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel", cls: "astro-composer-cancel-button" });
    cancelButton.onclick = () => this.close();
    const submitButton = buttonContainer.createEl("button", { text: this.isRename ? "Rename" : "Create", cls: ["astro-composer-create-button", "mod-cta"] });
    submitButton.onclick = () => this.submit();
    this.titleInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") void this.submit();
    });
  }
  async submit() {
    const title = this.titleInput.value.trim();
    if (!title) {
      new import_obsidian4.Notice("Please enter a title.");
      return;
    }
    try {
      let newFile = null;
      if (this.isRename) {
        newFile = await this.fileOps.renameFile({ file: this.file, title, type: this.type });
        if (newFile) {
          await this.templateParser.updateTitleInFrontmatter(newFile, title, this.type);
        } else {
          this.close();
          return;
        }
      } else if (this.isNewNote) {
        if (this.file) {
          newFile = await this.fileOps.createFile({ file: this.file, title, type: this.type });
          const shouldInsertProperties = this.plugin.settings.autoInsertProperties;
          if (newFile && shouldInsertProperties) {
            await this.addPropertiesToFile(newFile, title, this.type);
            this.positionCursorAtEnd(newFile);
          }
        }
      } else if (this.file) {
        newFile = await this.fileOps.createFile({ file: this.file, title, type: this.type });
        const shouldInsertProperties = this.plugin.settings.autoInsertProperties;
        if (newFile && shouldInsertProperties) {
          await this.addPropertiesToFile(newFile, title, this.type);
          this.positionCursorAtEnd(newFile);
        }
      } else {
        newFile = await this.createNewFile(title);
      }
      if (!newFile) {
        new import_obsidian4.Notice(`Failed to ${this.isRename ? "rename" : "create"} ${this.type}.`);
        this.close();
        return;
      }
    } catch (error) {
      console.error("TitleModal: Error during process:", error);
      const errorMessage = error instanceof Error ? error.message : String(error);
      new import_obsidian4.Notice(`Error ${this.isRename ? "renaming" : "creating"} ${this.type}: ${errorMessage}.`);
      this.close();
      return;
    }
    this.close();
  }
  getTypeDisplayName() {
    if (this.type === "note") {
      return "Content";
    }
    const contentType = this.fileOps.getContentType(this.type);
    return contentType ? contentType.name : "Content";
  }
  async createNewFile(title) {
    var _a, _b, _c;
    let targetFolder;
    const originalDir = ((_b = (_a = this.file) == null ? void 0 : _a.parent) == null ? void 0 : _b.path) || "";
    if (this.type !== "note") {
      const contentType2 = this.fileOps.getContentType(this.type);
      if (originalDir === "" || originalDir === "/") {
        targetFolder = (contentType2 == null ? void 0 : contentType2.folder) || "";
      } else {
        targetFolder = originalDir;
      }
    } else {
      targetFolder = originalDir;
    }
    const filename = this.fileOps.generateFilename(title);
    const contentType = this.fileOps.getContentType(this.type);
    const extension = (contentType == null ? void 0 : contentType.useMdxExtension) ? ".mdx" : ".md";
    const filePath = targetFolder ? `${targetFolder}/${filename}${extension}` : `${filename}${extension}`;
    if (this.plugin && "pluginCreatedFiles" in this.plugin) {
      (_c = this.plugin.pluginCreatedFiles) == null ? void 0 : _c.add(filePath);
    }
    let initialContent = "";
    if (this.plugin.settings.autoInsertProperties) {
      initialContent = this.generateInitialContent(title);
    }
    try {
      const newFile = await this.app.vault.create(filePath, initialContent);
      const leaf = this.app.workspace.getLeaf();
      await leaf.openFile(newFile);
      const positionCursor = () => {
        var _a2;
        const view = leaf.view;
        if (view instanceof import_obsidian4.MarkdownView && view.editor) {
          const editor = view.editor;
          const content = editor.getValue();
          if (content) {
            const lines = content.split("\n");
            const lastLine = lines.length - 1;
            const lastLineLength = ((_a2 = lines[lastLine]) == null ? void 0 : _a2.length) || 0;
            editor.setCursor({ line: lastLine, ch: lastLineLength });
            editor.focus();
            return true;
          }
        }
        return false;
      };
      setTimeout(() => {
        if (!positionCursor()) {
          setTimeout(() => {
            positionCursor();
          }, 200);
        }
      }, 100);
      return newFile;
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : String(error);
      throw new Error(`Failed to create file: ${errorMessage}`);
    }
  }
  generateInitialContent(title) {
    const now = /* @__PURE__ */ new Date();
    const dateString = window.moment(now).format(this.plugin.settings.dateFormat);
    const slug = this.fileOps.toKebabCase(title);
    let template;
    if (this.type === "note") {
      const escapedTitle = this.escapeYamlString(title);
      template = `---
title: ${escapedTitle}
date: ${dateString}
---
`;
    } else {
      const contentType = this.fileOps.getContentType(this.type);
      if (!contentType) {
        const escapedTitle = this.escapeYamlString(title);
        template = `---
title: ${escapedTitle}
date: ${dateString}
---
`;
      } else {
        template = contentType.template;
      }
    }
    template = template.replace(/\{\{title\}\}/g, title);
    template = template.replace(/\{\{date\}\}/g, dateString);
    template = template.replace(/\{\{slug\}\}/g, slug);
    return template;
  }
  async addPropertiesToFile(file, title, type) {
    const now = /* @__PURE__ */ new Date();
    const dateString = window.moment(now).format(this.plugin.settings.dateFormat);
    const slug = this.fileOps.toKebabCase(title);
    let template;
    if (type === "note") {
      const escapedTitle = this.escapeYamlString(title);
      template = `---
title: ${escapedTitle}
date: ${dateString}
---
`;
    } else {
      const contentType = this.fileOps.getContentType(type);
      if (!contentType) {
        const escapedTitle = this.escapeYamlString(title);
        template = `---
title: ${escapedTitle}
date: ${dateString}
---
`;
      } else {
        template = contentType.template;
      }
    }
    template = template.replace(/\{\{title\}\}/g, title);
    template = template.replace(/\{\{date\}\}/g, dateString);
    template = template.replace(/\{\{slug\}\}/g, slug);
    await this.app.vault.modify(file, template);
  }
  positionCursorAtEnd(file) {
    const positionCursor = () => {
      var _a;
      const view = this.app.workspace.getActiveViewOfType(import_obsidian4.MarkdownView);
      if (view && view.file === file && view.editor) {
        const editor = view.editor;
        const content = editor.getValue();
        if (content) {
          const lines = content.split("\n");
          const lastLine = lines.length - 1;
          const lastLineLength = ((_a = lines[lastLine]) == null ? void 0 : _a.length) || 0;
          editor.setCursor({ line: lastLine, ch: lastLineLength });
          editor.focus();
          return true;
        }
      }
      return false;
    };
    setTimeout(() => {
      if (!positionCursor()) {
        setTimeout(() => {
          positionCursor();
        }, 200);
      }
    }, 100);
  }
  escapeYamlString(str) {
    if (str.includes('"') || str.includes("'") || str.includes("\n") || str.includes("\\")) {
      return `'${str.replace(/'/g, "''")}'`;
    } else if (str.includes(" ") || str.includes(":") || str.includes("#") || str.includes("@")) {
      return `"${str.replace(/"/g, '\\"')}"`;
    } else {
      return str;
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/commands/index.ts
function registerCommands(plugin, settings) {
  const isMobile = import_obsidian5.Platform.isMobile;
  if (isMobile) {
    let hasMatchingContentType2 = function(file, settings2) {
      const type = fileOps.determineType(file);
      if (type === "note") {
        return false;
      }
      const contentType = fileOps.getContentType(type);
      return contentType !== null && contentType.enabled;
    };
    var hasMatchingContentType = hasMatchingContentType2;
    const pluginInterface2 = plugin;
    const fileOps = new FileOperations(plugin.app, settings, pluginInterface2);
    const linkConverter = new LinkConverter(settings, pluginInterface2);
    plugin.addCommand({
      id: "standardize-properties",
      name: "Standardize properties",
      icon: "file-check",
      editorCallback: (editor, ctx) => {
        const file = ctx instanceof import_obsidian5.MarkdownView ? ctx.file : ctx.file;
        if (file instanceof import_obsidian5.TFile) {
          const currentSettings = pluginInterface2.settings || settings;
          void standardizeProperties(plugin.app, currentSettings, file, pluginInterface2, editor);
        }
      }
    });
    plugin.addCommand({
      id: "convert-wikilinks-astro",
      name: "Convert internal links for astro",
      icon: "link-2",
      editorCallback: (editor, ctx) => {
        const file = ctx instanceof import_obsidian5.MarkdownView ? ctx.file : ctx.file;
        if (file instanceof import_obsidian5.TFile) {
          linkConverter.convertWikilinksForAstro(editor, file);
        }
      }
    });
    plugin.addCommand({
      id: "rename-content",
      name: "Rename current content",
      icon: "pencil",
      editorCallback: (editor, ctx) => {
        const file = ctx instanceof import_obsidian5.MarkdownView ? ctx.file : ctx.file;
        if (file instanceof import_obsidian5.TFile) {
          if (!hasMatchingContentType2(file, settings)) {
            new import_obsidian5.Notice("Cannot rename: this file is not part of a configured content type folder.");
            return;
          }
          const type = fileOps.determineType(file);
          const cache = plugin.app.metadataCache.getFileCache(file);
          const titleKey = fileOps.getTitleKey(type);
          if (!(cache == null ? void 0 : cache.frontmatter) || !(titleKey in cache.frontmatter)) {
            new import_obsidian5.Notice(`Cannot rename: No ${titleKey} found in properties`);
            return;
          }
          new TitleModal(plugin.app, file, plugin, type, true).open();
        }
      }
    });
    return;
  }
  const pluginInterface = plugin;
  function hasMatchingContentType(file, settings2) {
    const currentSettings = (plugin == null ? void 0 : plugin.settings) || settings2;
    const tempFileOps = new FileOperations(plugin.app, currentSettings, plugin);
    const type = tempFileOps.determineType(file);
    if (type === "note") {
      return false;
    }
    const contentType = tempFileOps.getContentType(type);
    return contentType !== null && contentType.enabled;
  }
  plugin.addCommand({
    id: "standardize-properties",
    name: "Standardize properties",
    icon: "file-check",
    editorCallback: (editor, ctx) => {
      const file = ctx instanceof import_obsidian5.MarkdownView ? ctx.file : ctx.file;
      if (file instanceof import_obsidian5.TFile) {
        void standardizeProperties(plugin.app, settings, file, plugin, editor);
      }
    }
  });
  plugin.addCommand({
    id: "convert-wikilinks-astro",
    name: "Convert internal links for astro",
    icon: "link-2",
    editorCallback: (editor, ctx) => {
      const file = ctx instanceof import_obsidian5.MarkdownView ? ctx.file : ctx.file;
      if (file instanceof import_obsidian5.TFile) {
        const currentSettings = pluginInterface.settings || settings;
        const currentLinkConverter = new LinkConverter(currentSettings, pluginInterface);
        currentLinkConverter.convertWikilinksForAstro(editor, file);
      }
    }
  });
  plugin.addCommand({
    id: "rename-content",
    name: "Rename current content",
    icon: "pencil",
    editorCallback: (editor, ctx) => {
      const file = ctx instanceof import_obsidian5.MarkdownView ? ctx.file : ctx.file;
      if (file instanceof import_obsidian5.TFile) {
        const currentSettings = pluginInterface.settings || settings;
        const currentFileOps = new FileOperations(plugin.app, currentSettings, pluginInterface);
        if (!hasMatchingContentType(file, currentSettings)) {
          new import_obsidian5.Notice("Cannot rename: this file is not part of a configured content type folder.");
          return;
        }
        const type = currentFileOps.determineType(file);
        new TitleModal(plugin.app, file, pluginInterface, type, true).open();
      }
    }
  });
  if (!isMobile) {
    plugin.addCommand({
      id: "open-project-terminal",
      name: "Open project terminal",
      icon: "terminal-square",
      callback: () => {
        const currentSettings = plugin.settings;
        if (!currentSettings.enableOpenTerminalCommand) {
          new import_obsidian5.Notice("Open terminal command is disabled. Enable it in settings to use this command.");
          return;
        }
        openTerminalInProjectRoot(plugin.app, currentSettings);
      }
    });
  }
  if (!isMobile) {
    plugin.addCommand({
      id: "edit-astro-config",
      name: "Edit astro config",
      icon: "wrench",
      callback: async () => {
        const currentSettings = plugin.settings;
        if (!currentSettings.enableOpenConfigFileCommand) {
          new import_obsidian5.Notice("Edit config file command is disabled. Enable it in settings to use this command.");
          return;
        }
        await openConfigFile(plugin.app, currentSettings);
      }
    });
  }
}
async function standardizeProperties(app, settings, file, plugin, editor) {
  var _a;
  const currentSettings = (plugin == null ? void 0 : plugin.settings) || settings;
  const templateParser = new TemplateParser(app, currentSettings);
  const fileOps = new FileOperations(app, currentSettings, plugin);
  let cursorPosition = null;
  let originalContent = "";
  if (editor) {
    const cursor = editor.getCursor();
    cursorPosition = { line: cursor.line, ch: cursor.ch };
    originalContent = editor.getValue();
  }
  const type = fileOps.determineType(file);
  if (type === "note") {
    new import_obsidian5.Notice("No properties template specified for this content. This file doesn't match any configured content type folders.");
    return;
  }
  let templateString;
  if (type === "note") {
    new import_obsidian5.Notice("No properties template specified for this content. This file doesn't match any configured content type folders.");
    return;
  }
  const contentType = fileOps.getContentType(type);
  if (!contentType) {
    new import_obsidian5.Notice("Content type not found.");
    return;
  }
  templateString = contentType.template;
  await new Promise((resolve) => setTimeout(resolve, 100));
  const content = await app.vault.read(file);
  const title = file.basename.replace(/^_/, "");
  const parsed = templateParser.parseFrontmatter(content);
  const { templateProps, templateValues } = templateParser.parseTemplate(templateString, title);
  const finalProps = { ...parsed.properties };
  const arrayKeys = /* @__PURE__ */ new Set();
  const slug = fileOps.toKebabCase(title);
  for (const key of templateProps) {
    if (!(key in parsed.properties)) {
      const templateValue = templateValues[key];
      if (Array.isArray(templateValue)) {
        finalProps[key] = templateValue;
        arrayKeys.add(key);
      } else {
        finalProps[key] = [templateValue || ""];
      }
    } else {
      const templateValue = templateValues[key];
      const isArrayValue = Array.isArray(templateValue);
      if (isArrayValue) {
        const existingItems = parsed.properties[key] || [];
        const newItems = templateValue.filter((item) => !existingItems.includes(item));
        finalProps[key] = [...existingItems, ...newItems];
        arrayKeys.add(key);
      } else {
        if (key === "slug") {
          const existingSlug = parsed.properties[key][0] || "";
          if (!existingSlug || existingSlug.trim() === "") {
            finalProps[key] = [slug];
          }
        }
      }
    }
  }
  if ("slug" in parsed.properties && templateString.includes("{{slug}}")) {
    const existingSlug = parsed.properties["slug"][0] || "";
    if (!existingSlug || existingSlug.trim() === "") {
      finalProps["slug"] = [slug];
    }
  }
  for (const key in parsed.properties) {
    if (parsed.properties[key].length > 1) {
      arrayKeys.add(key);
    }
  }
  const newContent = templateParser.buildFrontmatterContent(finalProps, arrayKeys) + parsed.bodyContent;
  await app.vault.modify(file, newContent);
  if (editor && cursorPosition) {
    await new Promise((resolve) => setTimeout(resolve, 50));
    const activeView = app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
    if (activeView && activeView.file === file && activeView.editor) {
      const activeEditor = activeView.editor;
      const newLineCount = newContent.split("\n").length;
      const originalLineCount = originalContent.split("\n").length;
      let newLine = cursorPosition.line;
      let newCh = cursorPosition.ch;
      if (newLineCount !== originalLineCount) {
        if (newLine >= newLineCount) {
          newLine = Math.max(0, newLineCount - 1);
        }
      }
      const newLineLength = ((_a = newContent.split("\n")[newLine]) == null ? void 0 : _a.length) || 0;
      if (newCh > newLineLength) {
        newCh = Math.max(0, newLineLength);
      }
      activeEditor.setCursor({ line: newLine, ch: newCh });
    }
  }
  new import_obsidian5.Notice("Properties standardized using template.");
}
function renameContentByPath(app, filePath, settings, plugin) {
  const file = app.vault.getAbstractFileByPath(filePath);
  if (!(file instanceof import_obsidian5.TFile)) {
    new import_obsidian5.Notice(`File not found: ${filePath}`);
    return;
  }
  const fileOps = new FileOperations(app, settings, plugin);
  function hasMatchingContentType(file2, settings2) {
    const type2 = fileOps.determineType(file2);
    if (type2 === "note") {
      return false;
    }
    const contentType = fileOps.getContentType(type2);
    return contentType !== null && contentType.enabled;
  }
  if (!hasMatchingContentType(file, settings)) {
    new import_obsidian5.Notice("Cannot rename: this file is not part of a configured content type folder.");
    return;
  }
  const type = fileOps.determineType(file);
  new TitleModal(app, file, plugin, type, true).open();
}
function registerContentTypeCommands(plugin, settings) {
  const pluginInterface = plugin;
  const contentTypes = settings.contentTypes || [];
  for (const contentType of contentTypes) {
    if (!contentType.enabled) {
      continue;
    }
    const commandId = `create-content-type-${contentType.id}`;
    const commandName = `Create new content type: ${contentType.name}`;
    plugin.addCommand({
      id: commandId,
      name: commandName,
      callback: async () => {
        var _a;
        let targetFolder = contentType.folder || "";
        if (targetFolder && targetFolder.trim() !== "") {
          const folder = plugin.app.vault.getAbstractFileByPath(targetFolder);
          if (!(folder instanceof import_obsidian5.TFolder)) {
            try {
              await plugin.app.vault.createFolder(targetFolder);
            } catch (error) {
              const errorMessage = error instanceof Error ? error.message : String(error);
              new import_obsidian5.Notice(`Failed to create folder: ${errorMessage}`);
              return;
            }
          }
        }
        const tempFileName = "Untitled.md";
        const filePath = targetFolder ? `${targetFolder}/${tempFileName}` : tempFileName;
        const existingFile = plugin.app.vault.getAbstractFileByPath(filePath);
        if (existingFile instanceof import_obsidian5.TFile) {
          new TitleModal(plugin.app, existingFile, pluginInterface, contentType.id, false, true).open();
          return;
        }
        if (pluginInterface && "pluginCreatedFiles" in pluginInterface) {
          const pluginWithFiles = pluginInterface;
          if (!pluginWithFiles.pluginCreatedFiles) {
            pluginWithFiles.pluginCreatedFiles = /* @__PURE__ */ new Set();
          }
          pluginWithFiles.pluginCreatedFiles.add(filePath);
        }
        try {
          const tempFile = await plugin.app.vault.create(filePath, "");
          new TitleModal(plugin.app, tempFile, pluginInterface, contentType.id, false, true).open();
        } catch (error) {
          const errorMessage = error instanceof Error ? error.message : String(error);
          new import_obsidian5.Notice(`Failed to create file: ${errorMessage}`);
          if (pluginInterface && "pluginCreatedFiles" in pluginInterface) {
            const pluginWithFiles = pluginInterface;
            (_a = pluginWithFiles.pluginCreatedFiles) == null ? void 0 : _a.delete(filePath);
          }
        }
      }
    });
  }
}
var terminalLogger = {
  enabled: false,
  setEnabled(value) {
    this.enabled = value;
  },
  log(...args) {
    if (this.enabled) {
      console.debug("[astro-composer:terminal]", ...args);
    }
  }
};
function getDefaultTerminalApp() {
  if (!import_obsidian5.Platform.isDesktopApp) {
    return "";
  }
  if (import_obsidian5.Platform.isMacOS) {
    return "Terminal";
  }
  if (import_obsidian5.Platform.isWin) {
    try {
      const os = require("os");
      const release = os.release();
      const majorVersion = parseInt(release.split(".")[0]);
      const buildNumber = parseInt(release.split(".")[2]);
      if (majorVersion > 10 || majorVersion === 10 && buildNumber >= 22e3) {
        return "wt.exe";
      }
    } catch (e) {
    }
    return "cmd.exe";
  }
  if (import_obsidian5.Platform.isLinux) {
    return "gnome-terminal";
  }
  return "";
}
function sanitizeTerminalApp(value) {
  return value.trim();
}
function escapeDoubleQuotes(value) {
  return value.replace(/"/g, '\\"');
}
function openTerminalInProjectRoot(app, settings) {
  terminalLogger.setEnabled(settings.enableTerminalDebugLogging);
  try {
    const { exec } = require("child_process");
    const path = require("path");
    const fs = require("fs");
    const adapter = app.vault.adapter;
    const vaultPath = adapter.basePath || adapter.path;
    const vaultPathString = typeof vaultPath === "string" ? vaultPath : String(vaultPath);
    let projectPath;
    if (settings.terminalProjectRootPath && settings.terminalProjectRootPath.trim()) {
      projectPath = path.resolve(vaultPathString, settings.terminalProjectRootPath);
    } else {
      projectPath = vaultPathString;
    }
    if (!fs.existsSync(projectPath)) {
      new import_obsidian5.Notice(`Project root directory not found at: ${projectPath}`);
      return;
    }
    const configuredApp = sanitizeTerminalApp(settings.terminalApplicationName || "");
    const terminalApp = configuredApp || getDefaultTerminalApp();
    if (!configuredApp && !terminalApp) {
      new import_obsidian5.Notice("Terminal application name is empty. Please configure it in settings.");
      return;
    }
    const platform = process.platform;
    terminalLogger.log("Opening terminal", { platform, terminalApp, projectPath });
    if (platform === "win32") {
      const escapedPath = projectPath.replace(/"/g, '"');
      const lowerApp = terminalApp.toLowerCase();
      if (lowerApp === "wt.exe" || lowerApp === "wt" || lowerApp === "windows terminal") {
        exec("where wt", (error) => {
          if (!error) {
            const command = `start "" wt.exe -d "${escapedPath}"`;
            terminalLogger.log("Windows launch (wt)", { command, projectPath });
            exec(command, (execError) => {
              if (execError) {
                terminalLogger.log("Windows Terminal failed, falling back to cmd", { error: execError.message });
                const fallbackCommand = `start "" cmd.exe /K "cd /d "${escapedPath}""`;
                exec(fallbackCommand, (cmdError) => {
                  if (cmdError) {
                    new import_obsidian5.Notice(`Error opening terminal: ${cmdError.message || "Unknown error"}`);
                  }
                });
              }
            });
          } else {
            terminalLogger.log("Windows Terminal not found, using cmd", {});
            const fallbackCommand = `start "" cmd.exe /K "cd /d "${escapedPath}""`;
            exec(fallbackCommand, (cmdError) => {
              if (cmdError) {
                new import_obsidian5.Notice(`Error opening terminal: ${cmdError.message || "Unknown error"}`);
              }
            });
          }
        });
      } else if (lowerApp === "powershell" || lowerApp === "powershell.exe") {
        const escapedPathForPS = projectPath.replace(/'/g, "''");
        const command = `start "" powershell -NoExit -Command "Set-Location '${escapedPathForPS}';"`;
        terminalLogger.log("Windows launch (powershell)", { command, projectPath });
        exec(command, (error) => {
          if (error) {
            new import_obsidian5.Notice(`Error opening terminal: ${error.message || "Unknown error"}`);
          }
        });
      } else if (lowerApp === "cmd.exe" || lowerApp === "cmd") {
        const command = `start "" cmd.exe /K "cd /d "${escapedPath}""`;
        terminalLogger.log("Windows launch (cmd)", { command, projectPath });
        exec(command, (error) => {
          if (error) {
            new import_obsidian5.Notice(`Error opening terminal: ${error.message || "Unknown error"}`);
          }
        });
      } else {
        const command = `start "" "${terminalApp}"`;
        terminalLogger.log("Windows launch (generic)", { command, terminalApp, projectPath });
        exec(command, (error) => {
          if (error) {
            terminalLogger.log("Generic terminal failed, falling back to cmd", { error: error.message });
            const fallbackCommand = `start "" cmd.exe /K "cd /d "${escapedPath}""`;
            exec(fallbackCommand, (cmdError) => {
              if (cmdError) {
                new import_obsidian5.Notice(`Error opening terminal: ${cmdError.message || "Unknown error"}`);
              }
            });
          }
        });
      }
    } else if (platform === "darwin") {
      const escapedApp = escapeDoubleQuotes(terminalApp);
      const escapedPath = escapeDoubleQuotes(projectPath);
      const command = `open -na "${escapedApp}" "${escapedPath}"`;
      terminalLogger.log("macOS launch", { command, terminalApp, projectPath });
      exec(command, (error) => {
        if (error) {
          new import_obsidian5.Notice(`Error opening terminal: ${error.message || "Unknown error"}`);
        }
      });
    } else {
      const terminals = terminalApp ? [terminalApp] : ["gnome-terminal", "konsole", "xterm"];
      const projectPathEscaped = projectPath.replace(/"/g, '\\"');
      const tryTerminal = (index) => {
        if (index >= terminals.length) {
          new import_obsidian5.Notice("No supported terminal found. Please install a terminal application or configure one in settings.");
          return;
        }
        const currentTerminal = terminals[index];
        const terminalName = currentTerminal.split(" ")[0];
        exec(`which ${terminalName}`, (error) => {
          if (!error) {
            let command;
            if (currentTerminal.includes("gnome-terminal")) {
              command = `gnome-terminal --working-directory="${projectPathEscaped}"`;
            } else if (currentTerminal.includes("konsole")) {
              command = `konsole --workdir "${projectPathEscaped}"`;
            } else {
              command = `${currentTerminal} -e "cd \\"${projectPathEscaped}\\" && bash"`;
            }
            terminalLogger.log("Linux launch", { command, terminal: currentTerminal, projectPath });
            exec(command, (execError) => {
              if (execError && index < terminals.length - 1) {
                terminalLogger.log("Terminal launch failed, trying next", { terminal: currentTerminal, error: execError.message });
                tryTerminal(index + 1);
              } else if (execError) {
                new import_obsidian5.Notice(`Error opening terminal: ${execError.message || "Unknown error"}`);
              }
            });
          } else {
            terminalLogger.log("Terminal not found, trying next", { terminal: currentTerminal });
            tryTerminal(index + 1);
          }
        });
      };
      tryTerminal(0);
    }
  } catch (error) {
    terminalLogger.log("Unexpected error", { error });
    new import_obsidian5.Notice(`Error opening terminal: ${error instanceof Error ? error.message : String(error)}`);
  }
}
async function openConfigFile(app, settings) {
  try {
    const fs = require("fs");
    const path = require("path");
    const { shell } = require("electron");
    const adapter = app.vault.adapter;
    const vaultPath = adapter.basePath || adapter.path;
    const vaultPathString = typeof vaultPath === "string" ? vaultPath : String(vaultPath);
    if (!settings.configFilePath || !settings.configFilePath.trim()) {
      new import_obsidian5.Notice("Please specify a config file path in settings.");
      return;
    }
    const configPath = path.resolve(vaultPathString, settings.configFilePath);
    if (!fs.existsSync(configPath)) {
      new import_obsidian5.Notice(`Config file not found at: ${configPath}`);
      return;
    }
    await shell.openPath(configPath);
  } catch (error) {
    new import_obsidian5.Notice(`Error opening config file: ${error instanceof Error ? error.message : String(error)}`);
  }
}

// src/ui/settings-tab.ts
var import_obsidian10 = require("obsidian");

// src/ui/components/CommandPickerModal.ts
var import_obsidian6 = require("obsidian");
var CommandPickerModal = class extends import_obsidian6.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    const commandRegistry = this.app.commands;
    const commandMap = /* @__PURE__ */ new Map();
    if (commandRegistry && typeof commandRegistry.listCommands === "function") {
      try {
        const commands = commandRegistry.listCommands();
        for (const command of commands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      } catch (e) {
        console.warn("[Astro Composer] Error getting commands via listCommands():", e);
      }
    }
    try {
      const registry = commandRegistry == null ? void 0 : commandRegistry.commands;
      if (registry && typeof registry === "object") {
        const allCommands = Object.values(registry);
        for (const command of allCommands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      }
    } catch (e) {
      console.warn("[Astro Composer] Error getting commands via registry:", e);
    }
    try {
      const internalRegistry = commandRegistry == null ? void 0 : commandRegistry.commandRegistry;
      if (internalRegistry && typeof internalRegistry === "object") {
        const allCommands = Object.values(internalRegistry);
        for (const command of allCommands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      }
    } catch (e) {
      console.warn("[Astro Composer] Error getting commands via internal registry:", e);
    }
    const commandOptions = Array.from(commandMap.values());
    commandOptions.sort((a, b) => a.name.localeCompare(b.name));
    return commandOptions;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
  // Override to show command name only
  renderSuggestion(match, el) {
    const item = match.item;
    el.createDiv({ cls: "suggestion-title", text: item.name });
  }
};

// src/ui/components/IconPickerModal.ts
var import_obsidian7 = require("obsidian");
var getIconList = () => {
  if (import_obsidian7.requireApiVersion && (0, import_obsidian7.requireApiVersion)("1.7.3") && import_obsidian7.getIconIds) {
    try {
      return (0, import_obsidian7.getIconIds)();
    } catch (e) {
      console.warn("[Astro Composer] Error getting icon IDs from Obsidian:", e);
    }
  }
  return [
    "settings-2",
    "settings",
    "help-circle",
    "info",
    "star",
    "heart",
    "bookmark",
    "home",
    "search",
    "bell",
    "mail",
    "user",
    "users",
    "folder",
    "file",
    "file-text",
    "image",
    "video",
    "music",
    "calendar",
    "clock",
    "edit",
    "pencil",
    "trash",
    "copy",
    "cut",
    "paste",
    "download",
    "upload",
    "save",
    "share",
    "link",
    "external-link",
    "lock",
    "unlock",
    "eye",
    "eye-off",
    "key",
    "shield",
    "check",
    "x",
    "plus",
    "minus",
    "arrow-left",
    "arrow-right",
    "arrow-up",
    "arrow-down",
    "chevron-left",
    "chevron-right",
    "chevron-up",
    "chevron-down",
    "menu",
    "more-horizontal",
    "more-vertical",
    "grid",
    "list",
    "layout",
    "columns",
    "rows",
    "maximize",
    "minimize",
    "zoom-in",
    "zoom-out",
    "refresh-cw",
    "play",
    "pause",
    "stop",
    "sun",
    "moon",
    "cloud",
    "zap",
    "wand-2",
    "wand",
    "wand-sparkles",
    "palette",
    "brush",
    "sliders",
    "power",
    "wifi",
    "bluetooth",
    "monitor",
    "laptop",
    "smartphone",
    "camera",
    "mic",
    "headphones",
    "code",
    "terminal",
    "terminal-square",
    "github",
    "gitlab",
    "git-branch",
    "git-commit",
    "database",
    "server",
    "cloud-download",
    "cloud-upload",
    "tag",
    "tags",
    "flag",
    "pin",
    "map-pin",
    "compass",
    "globe",
    "rocket",
    "car",
    "bike",
    "robot",
    "apple",
    "windows",
    "linux",
    "chrome",
    "firefox",
    "safari",
    "credit-card",
    "wallet",
    "coins",
    "book",
    "book-open",
    "award",
    "trophy",
    "badge",
    "wrench",
    "tool",
    "package",
    "box",
    "archive",
    "send",
    "reply",
    "forward",
    "mail-open",
    "tag-plus",
    "tag-minus",
    "flag-off",
    "pin-off",
    "map-pin-off",
    "navigation",
    "map",
    "earth",
    "plane",
    "ship",
    "anchor",
    "helicopter",
    "drone",
    "android",
    "keyhole",
    "keys",
    "fingerprint",
    "scan",
    "qr-code",
    "barcode",
    "receipt",
    "piggy-bank",
    "banknote"
  ];
};
var LUCIDE_ICONS = getIconList().map((id) => ({
  id,
  name: id.replace(/^lucide-/, "").replace(/-/g, " ").replace(/(^\w{1})|(\s+\w{1})/g, (letter) => letter.toUpperCase())
})).sort((a, b) => a.name.localeCompare(b.name));
var IconPickerModal = class extends import_obsidian7.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    return LUCIDE_ICONS;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
  // Override to show icon preview
  renderSuggestion(match, el) {
    const item = match.item;
    el.addClass("mod-complex");
    const content = el.createDiv({ cls: "suggestion-content" });
    content.createDiv({ cls: "suggestion-title", text: item.name });
    const aux = el.createDiv({ cls: "suggestion-aux" });
    (0, import_obsidian7.setIcon)(aux.createSpan({ cls: "suggestion-flair" }), item.id);
  }
};

// src/ui/components/ConfirmModal.ts
var import_obsidian8 = require("obsidian");
var ConfirmModal = class extends import_obsidian8.Modal {
  constructor(app, message, confirmText = "Confirm", cancelText = "Cancel") {
    super(app);
    this.message = message;
    this.confirmText = confirmText;
    this.cancelText = cancelText;
    this.result = false;
    this.resolvePromise = null;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("astro-composer-confirm-modal");
    contentEl.createEl("p", { text: this.message });
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const cancelButton = buttonContainer.createEl("button", {
      text: this.cancelText
    });
    cancelButton.onclick = () => {
      this.result = false;
      this.close();
    };
    const confirmButton = buttonContainer.createEl("button", {
      text: this.confirmText,
      cls: "mod-cta mod-warning"
    });
    confirmButton.onclick = () => {
      this.result = true;
      this.close();
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.resolvePromise) {
      this.resolvePromise(this.result);
    }
  }
  async waitForResult() {
    return new Promise((resolve) => {
      this.resolvePromise = resolve;
      this.open();
    });
  }
};

// src/utils/settings-compat.ts
var import_obsidian9 = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian9.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian9.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/ui/settings-tab.ts
var AstroComposerSettingTab = class extends import_obsidian10.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.autoRenameContainer = null;
    this.postsFolderContainer = null;
    this.onlyAutomateContainer = null;
    this.creationModeContainer = null;
    this.indexFileContainer = null;
    this.excludedDirsContainer = null;
    this.underscorePrefixContainer = null;
    this.autoInsertContainer = null;
    this.pagesFieldsContainer = null;
    this.pagesIndexFileContainer = null;
    this.pagesOnlyAutomateContainer = null;
    this.terminalCommandContainer = null;
    this.configCommandContainer = null;
    this.customContentTypesContainer = null;
    this.terminalRibbonToggle = null;
    this.configRibbonToggle = null;
    this.terminalRibbonToggleComponent = null;
    this.configRibbonToggleComponent = null;
    this.plugin = plugin;
  }
  /**
   * Refresh just the content types section
   * More efficient than refreshing the entire settings tab
   */
  refreshContentTypes() {
    if (this.customContentTypesContainer) {
      this.renderCustomContentTypes();
    }
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const settings = this.plugin.settings;
    this.renderSettingsTab(containerEl, settings);
  }
  renderSettingsTab(containerEl, settings) {
    var _a;
    const generalGroup = createSettingsGroup(containerEl, void 0, "astro-composer");
    generalGroup.addSetting((setting) => {
      setting.setName("Date format").setDesc("Format for the date in properties (e.g., yyyy-mm-dd, MMMM D, yyyy, yyyy-mm-dd HH:mm)").addText(
        (text) => text.setPlaceholder("YYYY-MM-DD").setValue(settings.dateFormat).onChange(async (value) => {
          settings.dateFormat = value || "YYYY-MM-DD";
          await this.plugin.saveSettings();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Enable copy heading links").setDesc("Add right-click context menu option to copy heading links in various formats.").addToggle(
        (toggle) => toggle.setValue(settings.enableCopyHeadingLink).onChange(async (value) => {
          settings.enableCopyHeadingLink = value;
          await this.plugin.saveSettings();
          this.updateCopyHeadingFields();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Default heading link format").setDesc("Choose the default format for copied heading links. Obsidian format respects your Obsidian settings for wikilink vs markdown preference. Astro link uses your link base path from above and converts the heading into kebab-case format as an anchor link").addDropdown(
        (dropdown) => dropdown.addOption("obsidian", "Obsidian link").addOption("astro", "Astro link").setValue(settings.copyHeadingLinkFormat).onChange(async (value) => {
          settings.copyHeadingLinkFormat = value;
          await this.plugin.saveSettings();
        })
      );
      setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableCopyHeadingLink);
      setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableCopyHeadingLink);
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Add trailing slash to links").setDesc("Add trailing slashes to all converted internal links (e.g., /about/ instead of /about).").addToggle(
        (toggle) => toggle.setValue(settings.addTrailingSlashToLinks).onChange(async (value) => {
          settings.addTrailingSlashToLinks = value;
          await this.plugin.saveSettings();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Show MDX files in file explorer").setDesc("Make .mdx files visible in Obsidian's file explorer. Requires reload to take effect.").addToggle(
        (toggle) => toggle.setValue(settings.showMdxFilesInExplorer).onChange(async (value) => {
          settings.showMdxFilesInExplorer = value;
          await this.plugin.saveSettings();
        })
      );
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Auto-insert properties").setDesc("Automatically insert the properties template when creating new files for any content type.").addToggle(
        (toggle) => toggle.setValue(settings.autoInsertProperties).onChange(async (value) => {
          settings.autoInsertProperties = value;
          await this.plugin.saveSettings();
        })
      );
    });
    const contentTypesGroup = createSettingsGroup(containerEl, "Content types", "astro-composer");
    contentTypesGroup.addSetting((setting) => {
      setting.settingEl.addClass("astro-composer-setting-hidden-elements");
      setting.settingEl.addClass("astro-composer-setting-container-full-width");
      this.customContentTypesContainer = setting.settingEl.createDiv({
        cls: "custom-content-types-container astro-composer-custom-types-container-visible"
      });
    });
    if (this.customContentTypesContainer) {
      this.renderCustomContentTypes();
    }
    if (!import_obsidian10.Platform.isMobile) {
      const developerGroup = createSettingsGroup(containerEl, "Developer commands", "astro-composer");
      developerGroup.addSetting((setting) => {
        setting.setName("Enable open terminal command").setDesc("Enable command to open terminal in project root directory.").addToggle(
          (toggle) => toggle.setValue(settings.enableOpenTerminalCommand).onChange(async (value) => {
            settings.enableOpenTerminalCommand = value;
            await this.plugin.saveSettings();
            this.updateTerminalCommandFields();
            if (this.plugin.registerRibbonIcons) {
              this.plugin.registerRibbonIcons();
            }
          })
        );
      });
      this.terminalCommandContainer = containerEl.createDiv({ cls: "terminal-command-fields" });
      this.terminalCommandContainer.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenTerminalCommand);
      this.terminalCommandContainer.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenTerminalCommand);
      developerGroup.addSetting((setting) => {
        const descFragment = document.createDocumentFragment();
        descFragment.createEl("div", { text: "Path relative to the Obsidian vault root folder. Use ../.. for two levels up. Leave blank to use the vault folder" });
        descFragment.createEl("div", { text: "This is where the terminal will open. Absolute paths work also." });
        setting.setName("Project root directory path").setDesc(descFragment).addText(
          (text) => text.setPlaceholder("../..").setValue(settings.terminalProjectRootPath).onChange(async (value) => {
            settings.terminalProjectRootPath = value;
            await this.plugin.saveSettings();
          })
        );
        setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenTerminalCommand);
        setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenTerminalCommand);
      });
      developerGroup.addSetting((setting) => {
        const descFragment = document.createDocumentFragment();
        descFragment.createEl("div", { text: "Leave blank to use platform defaults. On macOS, the default is Terminal. On Windows, it's Windows Terminal (Win 11) or cmd.exe (Win 10). On Linux, it's gnome-terminal, konsole, or xterm" });
        descFragment.createEl("div", { text: "Examples include Terminal, iTerm, PowerShell, and Alacritty" });
        setting.setName("Terminal application name").setDesc(descFragment).addText(
          (text) => text.setPlaceholder("Terminal").setValue(settings.terminalApplicationName).onChange(async (value) => {
            settings.terminalApplicationName = value;
            await this.plugin.saveSettings();
          })
        );
        setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenTerminalCommand);
        setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenTerminalCommand);
      });
      developerGroup.addSetting((setting) => {
        setting.setName("Enable debug logging").setDesc("Log terminal launch commands and platform decisions to the developer console for troubleshooting.").addToggle(
          (toggle) => toggle.setValue(settings.enableTerminalDebugLogging).onChange(async (value) => {
            settings.enableTerminalDebugLogging = value;
            await this.plugin.saveSettings();
          })
        );
        setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenTerminalCommand);
        setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenTerminalCommand);
      });
      developerGroup.addSetting((setting) => {
        setting.setName("Show open terminal ribbon icon").setDesc("Add a ribbon icon to launch the terminal command.").addToggle((toggle) => {
          this.terminalRibbonToggleComponent = toggle;
          toggle.setValue(settings.enableTerminalRibbonIcon).setDisabled(!settings.enableOpenTerminalCommand).onChange(async (value) => {
            this.plugin.settings.enableTerminalRibbonIcon = value;
            settings.enableTerminalRibbonIcon = value;
            await this.plugin.saveSettings();
            setTimeout(() => {
              if (this.plugin.registerRibbonIcons) {
                this.plugin.registerRibbonIcons();
              }
            }, 50);
          });
        });
        setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenTerminalCommand);
        setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenTerminalCommand);
        this.terminalRibbonToggle = setting;
      });
      developerGroup.addSetting((setting) => {
        setting.setName("Enable edit config file command").setDesc("Enable command to open astro config file in default editor.").addToggle(
          (toggle) => toggle.setValue(settings.enableOpenConfigFileCommand).onChange(async (value) => {
            settings.enableOpenConfigFileCommand = value;
            await this.plugin.saveSettings();
            this.updateConfigCommandFields();
            if (this.plugin.registerRibbonIcons) {
              this.plugin.registerRibbonIcons();
            }
          })
        );
      });
      this.configCommandContainer = containerEl.createDiv({ cls: "config-command-fields" });
      this.configCommandContainer.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenConfigFileCommand);
      this.configCommandContainer.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenConfigFileCommand);
      developerGroup.addSetting((setting) => {
        const descFragment = document.createDocumentFragment();
        descFragment.createEl("div", { text: "Path to the config file relative to the vault root. Use ../config.ts or ../../astro.config.mjs." });
        descFragment.createEl("div", { text: "Absolute paths work also." });
        setting.setName("Config file path").setDesc(descFragment).addText(
          (text) => text.setPlaceholder("../config.ts").setValue(settings.configFilePath).onChange(async (value) => {
            settings.configFilePath = value;
            await this.plugin.saveSettings();
          })
        );
        setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenConfigFileCommand);
        setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenConfigFileCommand);
      });
      developerGroup.addSetting((setting) => {
        setting.setName("Show open config ribbon icon").setDesc("Add a ribbon icon to launch the config file command.").addToggle((toggle) => {
          this.configRibbonToggleComponent = toggle;
          toggle.setValue(settings.enableConfigRibbonIcon).setDisabled(!settings.enableOpenConfigFileCommand).onChange(async (value) => {
            this.plugin.settings.enableConfigRibbonIcon = value;
            settings.enableConfigRibbonIcon = value;
            await this.plugin.saveSettings();
            setTimeout(() => {
              if (this.plugin.registerRibbonIcons) {
                this.plugin.registerRibbonIcons();
              }
            }, 50);
          });
        });
        setting.settingEl.classList.toggle("astro-composer-setting-container-visible", settings.enableOpenConfigFileCommand);
        setting.settingEl.classList.toggle("astro-composer-setting-container-hidden", !settings.enableOpenConfigFileCommand);
        this.configRibbonToggle = setting;
      });
      developerGroup.addSetting((setting) => {
        setting.setName("Swap out help button for custom action").setDesc("Replace the help button in the vault profile area with a custom action.").addToggle((toggle) => {
          var _a2, _b;
          return toggle.setValue((_b = (_a2 = settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) != null ? _b : false).onChange(async (value) => {
            if (!settings.helpButtonReplacement) {
              settings.helpButtonReplacement = {
                enabled: false,
                commandId: "edit-astro-config",
                iconId: "wrench"
              };
            }
            settings.helpButtonReplacement.enabled = value;
            await this.plugin.saveSettings();
            if (this.plugin.updateHelpButton) {
              await this.plugin.updateHelpButton();
            }
            this.display();
          });
        });
      });
      if ((_a = settings.helpButtonReplacement) == null ? void 0 : _a.enabled) {
        const commandName = this.getCommandName(settings.helpButtonReplacement.commandId);
        developerGroup.addSetting((setting) => {
          setting.setName("Command").setDesc("Select the command to execute when the button is clicked.").addButton((button) => button.setButtonText(commandName || "Select command").onClick(() => {
            const modal = new CommandPickerModal(this.app, (commandId) => {
              void (async () => {
                if (!settings.helpButtonReplacement) {
                  settings.helpButtonReplacement = {
                    enabled: true,
                    commandId: "edit-astro-config",
                    iconId: "wrench"
                  };
                }
                settings.helpButtonReplacement.commandId = commandId;
                await this.plugin.saveSettings();
                if (this.plugin.updateHelpButton) {
                  await this.plugin.updateHelpButton();
                }
                this.display();
              })();
            });
            modal.open();
          }));
        });
        const iconName = this.getIconName(settings.helpButtonReplacement.iconId);
        developerGroup.addSetting((setting) => {
          setting.setName("Icon").setDesc("Select the icon to display on the button.").addButton((button) => button.setButtonText(iconName || "Select icon...").onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              void (async () => {
                if (!settings.helpButtonReplacement) {
                  settings.helpButtonReplacement = {
                    enabled: true,
                    commandId: "edit-astro-config",
                    iconId: "wrench"
                  };
                }
                settings.helpButtonReplacement.iconId = iconId;
                await this.plugin.saveSettings();
                if (this.plugin.updateHelpButton) {
                  await this.plugin.updateHelpButton();
                }
                this.display();
              })();
            });
            modal.open();
          }));
        });
      }
    }
    this.updateCopyHeadingFields();
    if (!import_obsidian10.Platform.isMobile) {
      this.updateTerminalCommandFields();
      this.updateConfigCommandFields();
    }
  }
  updateCopyHeadingFields() {
    const settings = this.plugin.settings;
    const isVisible = settings.enableCopyHeadingLink;
    const containerEl = this.containerEl;
    const allSettings = containerEl.querySelectorAll(".setting-item");
    allSettings.forEach((settingEl) => {
      var _a;
      const nameEl = settingEl.querySelector(".setting-item-name");
      if (nameEl && ((_a = nameEl.textContent) == null ? void 0 : _a.trim()) === "Default heading link format") {
        settingEl.classList.toggle("astro-composer-setting-container-visible", isVisible);
        settingEl.classList.toggle("astro-composer-setting-container-hidden", !isVisible);
      }
    });
  }
  updateTerminalCommandFields() {
    const settings = this.plugin.settings;
    const isVisible = settings.enableOpenTerminalCommand;
    if (this.terminalCommandContainer) {
      this.terminalCommandContainer.classList.toggle("astro-composer-setting-container-visible", isVisible);
      this.terminalCommandContainer.classList.toggle("astro-composer-setting-container-hidden", !isVisible);
    }
    const containerEl = this.containerEl;
    const allSettings = containerEl.querySelectorAll(".setting-item");
    allSettings.forEach((settingEl) => {
      var _a;
      const nameEl = settingEl.querySelector(".setting-item-name");
      if (nameEl) {
        const name = (_a = nameEl.textContent) == null ? void 0 : _a.trim();
        if (name === "Project root directory path" || name === "Show open terminal ribbon icon") {
          settingEl.classList.toggle("astro-composer-setting-container-visible", isVisible);
          settingEl.classList.toggle("astro-composer-setting-container-hidden", !isVisible);
        }
      }
    });
    if (this.terminalRibbonToggleComponent) {
      this.terminalRibbonToggleComponent.setDisabled(!this.plugin.settings.enableOpenTerminalCommand);
    }
  }
  updateConfigCommandFields() {
    const settings = this.plugin.settings;
    const isVisible = settings.enableOpenConfigFileCommand;
    if (this.configCommandContainer) {
      this.configCommandContainer.classList.toggle("astro-composer-setting-container-visible", isVisible);
      this.configCommandContainer.classList.toggle("astro-composer-setting-container-hidden", !isVisible);
    }
    const containerEl = this.containerEl;
    const allSettings = containerEl.querySelectorAll(".setting-item");
    allSettings.forEach((settingEl) => {
      var _a;
      const nameEl = settingEl.querySelector(".setting-item-name");
      if (nameEl) {
        const name = (_a = nameEl.textContent) == null ? void 0 : _a.trim();
        if (name === "Config file path" || name === "Show open config ribbon icon") {
          settingEl.classList.toggle("astro-composer-setting-container-visible", isVisible);
          settingEl.classList.toggle("astro-composer-setting-container-hidden", !isVisible);
        }
      }
    });
    if (this.configRibbonToggleComponent) {
      this.configRibbonToggleComponent.setDisabled(!this.plugin.settings.enableOpenConfigFileCommand);
    }
  }
  checkForFolderConflicts() {
    const settings = this.plugin.settings;
    const blankFolders = [];
    const folderConflicts = {};
    const contentTypes = settings.contentTypes || [];
    for (const contentType of contentTypes) {
      if (contentType.enabled) {
        if (!contentType.folder || contentType.folder.trim() === "") {
          blankFolders.push(contentType.name || "Content");
        } else {
          if (!folderConflicts[contentType.folder]) {
            folderConflicts[contentType.folder] = [];
          }
          folderConflicts[contentType.folder].push(contentType.name || "Content");
        }
      }
    }
  }
  addCustomContentType() {
    const settings = this.plugin.settings;
    const contentTypes = settings.contentTypes || [];
    const newType = {
      id: `content-${Date.now()}`,
      name: `Content ${contentTypes.length + 1}`,
      folder: "",
      linkBasePath: "",
      template: '---\ntitle: "{{title}}"\ndate: {{date}}\n---\n',
      enabled: true,
      creationMode: "file",
      indexFileName: "",
      ignoreSubfolders: false,
      enableUnderscorePrefix: false,
      useMdxExtension: false
    };
    contentTypes.push(newType);
    settings.contentTypes = contentTypes;
    void this.plugin.saveSettings();
    this.renderCustomContentTypes();
    this.plugin.registerCreateEvent();
    registerContentTypeCommands(this.plugin, settings);
  }
  renderCustomContentTypes() {
    if (!this.customContentTypesContainer) return;
    this.customContentTypesContainer.empty();
    const settings = this.plugin.settings;
    const contentTypes = settings.contentTypes || [];
    contentTypes.forEach((customType, index) => {
      var _a, _b;
      if (!this.customContentTypesContainer) return;
      const typeContainer = this.customContentTypesContainer.createDiv({
        cls: "custom-content-type-item",
        attr: { "data-type-id": customType.id }
      });
      const header = typeContainer.createDiv({ cls: "custom-content-type-header" });
      header.classList.add("astro-composer-custom-type-header");
      const collapseButton = header.createEl("button", {
        cls: "astro-composer-collapse-button",
        attr: { "aria-label": "Collapse/expand" }
      });
      const isCollapsed = (_a = customType.collapsed) != null ? _a : false;
      (0, import_obsidian10.setIcon)(collapseButton, "chevron-down");
      if (isCollapsed) {
        collapseButton.classList.add("is-collapsed");
      }
      collapseButton.addEventListener("click", () => {
        void this.toggleContentTypeCollapse(customType.id);
        const updatedType = this.plugin.settings.contentTypes.find((ct) => ct.id === customType.id);
        if (updatedType) {
          if (updatedType.collapsed) {
            collapseButton.classList.add("is-collapsed");
          } else {
            collapseButton.classList.remove("is-collapsed");
          }
        }
      });
      const headerName = header.createDiv({ cls: "astro-composer-header-name" });
      headerName.createEl("div", { text: customType.name || `Content ${index + 1}`, cls: "setting-item-name" });
      const reorderContainer = header.createDiv({ cls: "astro-composer-reorder-buttons" });
      const upButton = reorderContainer.createEl("button", {
        cls: "astro-composer-reorder-button",
        attr: { "aria-label": "Move up" }
      });
      (0, import_obsidian10.setIcon)(upButton, "chevron-up");
      upButton.disabled = index === 0;
      upButton.addEventListener("click", () => {
        void this.moveContentTypeUp(customType.id);
      });
      const downButton = reorderContainer.createEl("button", {
        cls: "astro-composer-reorder-button",
        attr: { "aria-label": "Move down" }
      });
      (0, import_obsidian10.setIcon)(downButton, "chevron-down");
      downButton.disabled = index === contentTypes.length - 1;
      downButton.addEventListener("click", () => {
        void this.moveContentTypeDown(customType.id);
      });
      const toggleContainer = header.createDiv({ cls: "checkbox-container" });
      if (customType.enabled) {
        toggleContainer.classList.add("is-enabled");
      }
      const toggle = toggleContainer.createEl("input", { type: "checkbox", cls: "checkbox-input" });
      toggle.checked = customType.enabled;
      toggleContainer.addEventListener("click", (e) => {
        void (async () => {
          e.preventDefault();
          const newValue = !customType.enabled;
          customType.enabled = newValue;
          toggle.checked = newValue;
          await this.plugin.saveSettings();
          this.plugin.registerCreateEvent();
          if (newValue) {
            toggleContainer.classList.add("is-enabled");
          } else {
            toggleContainer.classList.remove("is-enabled");
          }
          this.updateCustomContentTypeVisibility(customType.id, newValue);
          registerContentTypeCommands(this.plugin, this.plugin.settings);
        })();
      });
      toggle.addEventListener("change", (e) => {
        void (async () => {
          const value = e.target.checked;
          customType.enabled = value;
          await this.plugin.saveSettings();
          this.plugin.registerCreateEvent();
          if (value) {
            toggleContainer.classList.add("is-enabled");
          } else {
            toggleContainer.classList.remove("is-enabled");
          }
          this.updateCustomContentTypeVisibility(customType.id, value);
          registerContentTypeCommands(this.plugin, this.plugin.settings);
        })();
      });
      const settingsContainer = typeContainer.createDiv({
        cls: "custom-content-type-settings",
        attr: { "data-type-id": customType.id }
      });
      const initiallyCollapsed = (_b = customType.collapsed) != null ? _b : false;
      const initiallyVisible = customType.enabled && !initiallyCollapsed;
      if (initiallyVisible) {
        settingsContainer.classList.add("astro-composer-setting-container-visible");
      } else {
        settingsContainer.classList.add("astro-composer-setting-container-hidden");
      }
      const nameContainer = settingsContainer.createDiv();
      new import_obsidian10.Setting(nameContainer).setName("Content type name").setDesc("Display name for this content type (e.g., 'projects', 'notes', 'tutorials')").addText((text) => {
        text.setPlaceholder("Enter content type name").setValue(customType.name).onChange(async (value) => {
          customType.name = value;
          await this.plugin.saveSettings();
          registerContentTypeCommands(this.plugin, this.plugin.settings);
        });
      });
      const folderContainer = settingsContainer.createDiv();
      const folderSetting = new import_obsidian10.Setting(folderContainer).setName("Folder location").setDesc("Folder path where this content type will be created. Leave blank to use the vault folder. Supports wildcards like directory/* or directory/*/* to match specific folder depths.").addText((text) => {
        text.setPlaceholder("Enter folder path (e.g., 'docs', 'docs/*', 'docs/*/*') or leave blank for vault root").setValue(customType.folder).onChange(async (value) => {
          customType.folder = value;
          await this.plugin.saveSettings();
          this.plugin.registerCreateEvent();
          this.updateCustomContentTypeIgnoreSubfoldersField(customType.id);
          const allContentTypes = this.plugin.settings.contentTypes || [];
          for (const ct of allContentTypes) {
            this.updateFolderConflictWarning(ct.id, null);
          }
        });
      });
      folderContainer.createDiv({ cls: "astro-composer-conflict-warning hidden", attr: { "data-type-id": customType.id } });
      this.updateFolderConflictWarning(customType.id, folderSetting);
      const ignoreSubfoldersContainer = settingsContainer.createDiv({ cls: "custom-ignore-subfolders-field" });
      ignoreSubfoldersContainer.setAttribute("data-type-id", customType.id);
      ignoreSubfoldersContainer.classList.toggle("astro-composer-setting-container-visible", !!customType.folder);
      ignoreSubfoldersContainer.classList.toggle("astro-composer-setting-container-hidden", !customType.folder);
      new import_obsidian10.Setting(ignoreSubfoldersContainer).setName("Ignore subfolders").setDesc("When enabled, automation will only trigger for new .md files within this content type's folder and one level down (for folder-based content). Files in deeper subfolders will be ignored.").addToggle(
        (toggle2) => toggle2.setValue(customType.ignoreSubfolders || false).onChange(async (value) => {
          customType.ignoreSubfolders = value;
          await this.plugin.saveSettings();
        })
      );
      const underscorePrefixContainer = settingsContainer.createDiv();
      new import_obsidian10.Setting(underscorePrefixContainer).setName("Use underscore prefix for drafts").setDesc("Add an underscore prefix (_content-title) to new notes by default when enabled. This hides them from astro, which can be helpful for drafts").addToggle(
        (toggle2) => toggle2.setValue(customType.enableUnderscorePrefix || false).onChange(async (value) => {
          customType.enableUnderscorePrefix = value;
          await this.plugin.saveSettings();
        })
      );
      const linkContainer = settingsContainer.createDiv();
      new import_obsidian10.Setting(linkContainer).setName("Link base path").setDesc("Base path for converted links (e.g., '/projects/', '/notes/tutorials/', leave blank for root /).").addText((text) => {
        text.setPlaceholder("Enter link base path").setValue(customType.linkBasePath || "").onChange(async (value) => {
          customType.linkBasePath = value;
          await this.plugin.saveSettings();
        });
      });
      const creationModeContainer = settingsContainer.createDiv();
      new import_obsidian10.Setting(creationModeContainer).setName("Creation mode").setDesc("How to create new entries: file-based or folder-based with an index file.").addDropdown(
        (dropdown) => dropdown.addOption("file", "File-based (content-title.md)").addOption("folder", "Folder-based (content-title/index.md)").setValue(customType.creationMode).onChange(async (value) => {
          customType.creationMode = value;
          await this.plugin.saveSettings();
          this.updateCustomContentTypeIndexFileField(customType.id);
        })
      );
      const useMdxContainer = settingsContainer.createDiv();
      new import_obsidian10.Setting(useMdxContainer).setName("Use MDX instead of MD").setDesc("Create files with .mdx extension instead of .md extension.").addToggle(
        (toggle2) => toggle2.setValue(customType.useMdxExtension || false).onChange(async (value) => {
          customType.useMdxExtension = value;
          await this.plugin.saveSettings();
        })
      );
      const indexFileContainer = settingsContainer.createDiv({ cls: "custom-index-file-field" });
      indexFileContainer.classList.toggle("astro-composer-setting-container-visible", customType.creationMode === "folder");
      indexFileContainer.classList.toggle("astro-composer-setting-container-hidden", customType.creationMode !== "folder");
      new import_obsidian10.Setting(indexFileContainer).setName("Index file name").setDesc("Name for index files in folder-based content (without .md extension). Defaults to 'index' if left blank.").addText(
        (text) => text.setPlaceholder("Index").setValue(customType.indexFileName).onChange(async (value) => {
          customType.indexFileName = value;
          await this.plugin.saveSettings();
        })
      );
      const templateContainer = settingsContainer.createDiv();
      new import_obsidian10.Setting(templateContainer).setName("Properties template").addTextArea((text) => {
        text.setPlaceholder('---\ntitle: "{{title}}"\ndate: {{date}}\n---\n').setValue(customType.template).onChange(async (value) => {
          customType.template = value;
          await this.plugin.saveSettings();
        });
        text.inputEl.classList.add("astro-composer-template-textarea");
        return text;
      }).then((setting) => {
        setting.descEl.empty();
        const descDiv = setting.descEl.createEl("div");
        descDiv.createEl("div", { text: "Template for new files of this content type." });
        descDiv.createEl("div", { text: "Variables include {{title}}, {{date}}, and {{slug}}." });
        descDiv.createEl("div", { text: "Do not wrap {{date}} in quotes as it represents a datetime value, not a string." });
      });
      const removeContainer = settingsContainer.createDiv();
      const removeSetting = new import_obsidian10.Setting(removeContainer).setName("").addButton((button) => {
        button.setButtonText("Remove").setWarning().onClick(async () => {
          const contentType = this.plugin.settings.contentTypes.find((ct) => ct.id === customType.id);
          const typeName = (contentType == null ? void 0 : contentType.name) || "content type";
          const modal = new ConfirmModal(
            this.app,
            `Are you sure you want to remove "${typeName}"? This action cannot be undone.`,
            "Remove",
            "Cancel"
          );
          const confirmed = await modal.waitForResult();
          if (confirmed) {
            await this.removeCustomContentType(customType.id);
          }
        });
      });
      removeSetting.settingEl.classList.add("astro-composer-remove-setting");
      this.updateCustomContentTypeVisibility(customType.id, customType.enabled);
    });
    contentTypes.forEach((customType) => {
      this.updateFolderConflictWarning(customType.id, null);
    });
    const addButtonContainer = this.customContentTypesContainer.createDiv({ cls: "astro-composer-add-button-container" });
    const addButton = addButtonContainer.createEl("button", {
      cls: "mod-cta",
      text: "Add content type"
    });
    addButton.addEventListener("click", () => {
      this.addCustomContentType();
    });
  }
  updateCustomContentTypeVisibility(typeId, enabled) {
    var _a, _b;
    const settingsContainer = (_a = this.customContentTypesContainer) == null ? void 0 : _a.querySelector(`[data-type-id="${typeId}"].custom-content-type-settings`);
    if (settingsContainer) {
      const contentTypes = this.plugin.settings.contentTypes || [];
      const contentType = contentTypes.find((ct) => ct.id === typeId);
      const isCollapsed = (_b = contentType == null ? void 0 : contentType.collapsed) != null ? _b : false;
      const shouldBeVisible = enabled && !isCollapsed;
      settingsContainer.classList.toggle("astro-composer-setting-container-visible", shouldBeVisible);
      settingsContainer.classList.toggle("astro-composer-setting-container-hidden", !shouldBeVisible);
    }
  }
  updateCustomContentTypeIndexFileField(typeId) {
    var _a;
    const contentTypes = this.plugin.settings.contentTypes || [];
    const customType = contentTypes.find((type) => type.id === typeId);
    if (!customType) return;
    const indexFileContainer = (_a = this.customContentTypesContainer) == null ? void 0 : _a.querySelector(`[data-type-id="${typeId}"] .custom-index-file-field`);
    if (indexFileContainer) {
      indexFileContainer.classList.toggle("astro-composer-setting-container-visible", customType.creationMode === "folder");
      indexFileContainer.classList.toggle("astro-composer-setting-container-hidden", customType.creationMode !== "folder");
    }
  }
  updateCustomContentTypeIgnoreSubfoldersField(typeId) {
    var _a;
    const contentTypes = this.plugin.settings.contentTypes || [];
    const customType = contentTypes.find((type) => type.id === typeId);
    if (!customType) return;
    const ignoreSubfoldersContainer = (_a = this.customContentTypesContainer) == null ? void 0 : _a.querySelector(`[data-type-id="${typeId}"].custom-ignore-subfolders-field`);
    if (ignoreSubfoldersContainer) {
      ignoreSubfoldersContainer.classList.toggle("astro-composer-setting-container-visible", !!customType.folder && customType.folder.trim() !== "");
      ignoreSubfoldersContainer.classList.toggle("astro-composer-setting-container-hidden", !customType.folder || customType.folder.trim() === "");
    }
  }
  updateFolderConflictWarning(typeId, setting) {
    var _a;
    const contentTypes = this.plugin.settings.contentTypes || [];
    const currentType = contentTypes.find((type) => type.id === typeId);
    if (!currentType) return;
    const conflictWarningEl = (_a = this.customContentTypesContainer) == null ? void 0 : _a.querySelector(`[data-type-id="${typeId}"].astro-composer-conflict-warning`);
    if (!conflictWarningEl) return;
    const currentFolder = (currentType.folder || "").trim();
    const conflictingTypes = [];
    for (const otherType of contentTypes) {
      if (otherType.id === typeId || !otherType.enabled) continue;
      const otherFolder = (otherType.folder || "").trim();
      if (currentFolder === "" && otherFolder === "") {
        conflictingTypes.push(otherType.name || "Unnamed");
      } else if (currentFolder === otherFolder && currentFolder !== "") {
        conflictingTypes.push(otherType.name || "Unnamed");
      }
    }
    if (conflictingTypes.length > 0) {
      conflictWarningEl.removeClass("hidden");
      conflictWarningEl.textContent = `Conflict: ${conflictingTypes.join(", ")} also use${conflictingTypes.length === 1 ? "s" : ""} this folder. More specific patterns will take priority.`;
    } else {
      conflictWarningEl.addClass("hidden");
    }
  }
  async moveContentTypeUp(typeId) {
    const settings = this.plugin.settings;
    const contentTypes = settings.contentTypes || [];
    const currentIndex = contentTypes.findIndex((ct) => ct.id === typeId);
    if (currentIndex <= 0) return;
    [contentTypes[currentIndex], contentTypes[currentIndex - 1]] = [contentTypes[currentIndex - 1], contentTypes[currentIndex]];
    settings.contentTypes = contentTypes;
    await this.plugin.saveSettings();
    this.renderCustomContentTypes();
  }
  async moveContentTypeDown(typeId) {
    const settings = this.plugin.settings;
    const contentTypes = settings.contentTypes || [];
    const currentIndex = contentTypes.findIndex((ct) => ct.id === typeId);
    if (currentIndex < 0 || currentIndex >= contentTypes.length - 1) return;
    [contentTypes[currentIndex], contentTypes[currentIndex + 1]] = [contentTypes[currentIndex + 1], contentTypes[currentIndex]];
    settings.contentTypes = contentTypes;
    await this.plugin.saveSettings();
    this.renderCustomContentTypes();
  }
  async toggleContentTypeCollapse(typeId) {
    const settings = this.plugin.settings;
    const contentTypes = settings.contentTypes || [];
    const contentType = contentTypes.find((ct) => ct.id === typeId);
    if (!contentType) return;
    contentType.collapsed = !contentType.collapsed;
    await this.plugin.saveSettings();
    this.updateCustomContentTypeVisibility(typeId, contentType.enabled);
  }
  async removeCustomContentType(typeId) {
    const settings = this.plugin.settings;
    const contentTypes = settings.contentTypes || [];
    settings.contentTypes = contentTypes.filter((ct) => ct.id !== typeId);
    await this.plugin.saveSettings();
    this.renderCustomContentTypes();
    this.plugin.registerCreateEvent();
    registerContentTypeCommands(this.plugin, settings);
  }
  getCommandName(commandId) {
    if (!commandId) return "";
    try {
      const commandRegistry = this.app.commands;
      if (commandRegistry && typeof commandRegistry.listCommands === "function") {
        try {
          const allCommands = commandRegistry.listCommands();
          const command = allCommands.find((cmd) => cmd.id === commandId);
          if (command == null ? void 0 : command.name) {
            return command.name;
          }
        } catch (e) {
          console.warn("[Astro Composer] Error getting command name via listCommands():", e);
        }
      }
      try {
        const registry = commandRegistry == null ? void 0 : commandRegistry.commands;
        if (registry && typeof registry === "object") {
          const command = registry[commandId];
          if (command == null ? void 0 : command.name) {
            return command.name;
          }
        }
      } catch (e) {
        console.warn("[Astro Composer] Error getting command name via registry:", e);
      }
    } catch (e) {
      console.warn("[Astro Composer] Error getting command name:", e);
    }
    return "";
  }
  getIconName(iconId) {
    if (!iconId) return "";
    return iconId.replace(/^lucide-/, "").split("-").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
  }
};

// src/ui/components/MigrationModal.ts
var import_obsidian11 = require("obsidian");
var MigrationModal = class extends import_obsidian11.Modal {
  constructor(app, conflicts) {
    super(app);
    this.result = null;
    this.resolvePromise = null;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("astro-composer-migration-modal");
    contentEl.createEl("h2", { text: "Migration conflict detected" });
    contentEl.createEl("p", {
      text: "You have existing content types with names that conflict with posts or pages. How would you like to proceed?"
    });
    const conflictList = contentEl.createEl("ul");
    conflictList.createEl("li", { text: "Skip migration: keep your existing posts/pages settings (they will be ignored)" });
    conflictList.createEl("li", { text: "Migrate with renamed types: create 'posts (migrated)' and 'pages (migrated)' content types" });
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const skipButton = buttonContainer.createEl("button", {
      text: "Skip migration",
      cls: "mod-cta"
    });
    skipButton.onclick = () => {
      this.result = { action: "skip" };
      this.close();
    };
    const migrateButton = buttonContainer.createEl("button", {
      text: "Migrate with renamed types",
      cls: "mod-cta"
    });
    migrateButton.onclick = () => {
      this.result = { action: "migrate" };
      this.close();
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.resolvePromise && this.result) {
      this.resolvePromise(this.result);
    }
  }
  async waitForResult() {
    return new Promise((resolve) => {
      this.resolvePromise = resolve;
      this.open();
    });
  }
};

// src/utils/heading-link-generator.ts
var HeadingLinkGenerator = class {
  constructor(settings) {
    this.settings = settings;
  }
  /**
   * Converts text to kebab-case slug for URLs
   */
  toKebabCase(str) {
    return str.toLowerCase().replace(/[^a-z0-9\s-]/g, "").trim().replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "");
  }
  /**
   * Gets the Astro-compatible URL from an internal link (copied from LinkConverter)
   */
  getAstroUrlFromInternalLink(link) {
    const hashIndex = link.indexOf("#");
    let path = hashIndex >= 0 ? link.slice(0, hashIndex) : link;
    const anchor = hashIndex >= 0 ? link.slice(hashIndex) : "";
    path = path.replace(/\.md$/, "");
    let basePath = "";
    let contentFolder = "";
    let creationMode = "file";
    let indexFileName = "";
    const contentTypes = this.settings.contentTypes || [];
    const sortedTypes = sortByPatternSpecificity(contentTypes);
    for (const contentType of sortedTypes) {
      if (!contentType.enabled) continue;
      let matches = false;
      if (!contentType.folder || contentType.folder.trim() === "") {
        if (!path.includes("/") || path.split("/").length === 1) {
          matches = true;
        }
      } else if (matchesFolderPattern(path, contentType.folder)) {
        matches = true;
      }
      if (matches) {
        contentFolder = contentType.folder || "";
        basePath = contentType.linkBasePath || "";
        creationMode = contentType.creationMode;
        indexFileName = contentType.indexFileName || "";
        break;
      }
    }
    if (contentFolder) {
      path = path.slice(contentFolder.length + 1);
    }
    let addTrailingSlash = false;
    if (indexFileName && indexFileName.trim() !== "") {
      const parts = path.split("/");
      if (parts[parts.length - 1] === indexFileName) {
        parts.pop();
        path = parts.join("/");
        addTrailingSlash = true;
      }
    } else if (creationMode === "folder") {
      const defaultIndexName = "index";
      const parts = path.split("/");
      if (parts[parts.length - 1] === defaultIndexName) {
        parts.pop();
        path = parts.join("/");
        addTrailingSlash = true;
      }
    }
    const slugParts = path.split("/").map((part) => this.toKebabCase(part));
    const slug = slugParts.join("/");
    if (basePath) {
      if (!basePath.startsWith("/")) basePath = "/" + basePath;
      if (!basePath.endsWith("/")) basePath += "/";
    }
    const shouldAddTrailingSlash = (this.settings.addTrailingSlashToLinks || addTrailingSlash) && !anchor;
    return `${basePath}${slug}${shouldAddTrailingSlash ? "/" : ""}${anchor}`;
  }
  /**
   * Generates a standard Obsidian link to a heading, respecting user's link format preference
   */
  generateObsidianLink(app, file, heading) {
    const headingText = heading.heading;
    const testLink = app.fileManager.generateMarkdownLink(file, "", "");
    if (testLink.startsWith("[[")) {
      const fileName = file.basename;
      return `[[${fileName}#${headingText}|${headingText}]]`;
    } else {
      const baseLink = app.fileManager.generateMarkdownLink(file, "", "");
      if (baseLink.startsWith("[[")) {
        const fileName = file.basename;
        return `[[${fileName}#${headingText}|${headingText}]]`;
      } else {
        const match = baseLink.match(/\[([^\]]+)\]\(([^)]+)\)/);
        if (match) {
          const [, , path] = match;
          return `[${headingText}](${path}#${encodeURIComponent(headingText)})`;
        } else {
          const encodedFilename = encodeURIComponent(file.name);
          return `[${headingText}](${encodedFilename}#${encodeURIComponent(headingText)})`;
        }
      }
    }
  }
  /**
   * Generates a standard Obsidian wikilink to a heading
   */
  generateObsidianWikilink(file, heading) {
    const headingText = heading.heading;
    const fileName = file.basename;
    return `[[${fileName}#${headingText}|${headingText}]]`;
  }
  /**
   * Generates an Astro-compatible markdown link to a heading
   */
  generateAstroLink(file, heading) {
    const headingText = heading.heading;
    const anchor = this.toKebabCase(headingText);
    const internalLink = `${file.path}#${anchor}`;
    const astroUrl = this.getAstroUrlFromInternalLink(internalLink);
    return `[${headingText}](${astroUrl})`;
  }
  /**
   * Generates an Astro-compatible wikilink to a heading
   */
  generateAstroWikilink(file, heading) {
    const headingText = heading.heading;
    const anchor = this.toKebabCase(headingText);
    const internalLink = `${file.path}#${anchor}`;
    const astroUrl = this.getAstroUrlFromInternalLink(internalLink);
    return `[[${headingText}|${astroUrl}]]`;
  }
  /**
   * Extracts the URL from a markdown link or wikilink
   */
  extractUrl(link) {
    const markdownMatch = link.match(/\[([^\]]+)\]\(([^)]+)\)/);
    if (markdownMatch) {
      return markdownMatch[2];
    }
    const wikilinkMatch = link.match(/\[\[([^\]]+)\]\]/);
    if (wikilinkMatch) {
      const content = wikilinkMatch[1];
      const pathPart = content.split("|")[0];
      return pathPart;
    }
    return link;
  }
  /**
   * Generates the appropriate link format based on settings
   */
  generateLink(app, file, heading) {
    if (this.settings.copyHeadingLinkFormat === "astro") {
      return this.generateAstroLink(file, heading);
    } else {
      return this.generateObsidianLink(app, file, heading);
    }
  }
  /**
   * Finds the heading at a specific line in a file
   */
  findHeadingAtLine(app, file, line) {
    const cache = app.metadataCache.getFileCache(file);
    if (!cache || !cache.headings) {
      return null;
    }
    for (let i = cache.headings.length - 1; i >= 0; i--) {
      const heading = cache.headings[i];
      if (heading.position.start.line <= line) {
        return heading;
      }
    }
    return null;
  }
};

// src/main.ts
var AstroComposerPlugin = class extends import_obsidian12.Plugin {
  constructor() {
    super(...arguments);
    this.pluginCreatedFiles = /* @__PURE__ */ new Set();
    this.terminalRibbonIcon = null;
    this.configRibbonIcon = null;
  }
  /**
   * Migrate old posts/pages settings to unified content types
   */
  async migrateSettingsIfNeeded() {
    if (this.settings.migrationCompleted) {
      return;
    }
    const hasPostsSettings = this.settings.automatePostCreation !== void 0 && this.settings.automatePostCreation;
    const hasPagesSettings = this.settings.enablePages !== void 0 && this.settings.enablePages;
    if (!hasPostsSettings && !hasPagesSettings) {
      this.settings.migrationCompleted = true;
      await this.saveSettings();
      return;
    }
    const legacyContentTypes = this.settings.customContentTypes;
    const existingContentTypes = this.settings.contentTypes || legacyContentTypes || [];
    const conflicts = [];
    if (existingContentTypes.some((ct) => ct.name === "Posts")) {
      conflicts.push("Posts");
    }
    if (existingContentTypes.some((ct) => ct.name === "Pages")) {
      conflicts.push("Pages");
    }
    let shouldMigrate = true;
    if (conflicts.length > 0) {
      await new Promise((resolve) => {
        setTimeout(() => {
          void (async () => {
            try {
              const modal = new MigrationModal(this.app, conflicts);
              const timeoutPromise = new Promise((timeoutResolve) => {
                setTimeout(() => {
                  timeoutResolve({ action: "skip" });
                }, 3e4);
              });
              const result = await Promise.race([
                modal.waitForResult(),
                timeoutPromise
              ]);
              if (result.action === "skip") {
                shouldMigrate = false;
                new import_obsidian12.Notice("Migration skipped. Old posts/pages settings will be ignored.");
              }
            } catch (error) {
              console.warn("Migration modal error:", error);
              shouldMigrate = false;
              new import_obsidian12.Notice("Migration skipped due to error. You can migrate manually in settings.");
            }
            resolve();
          })();
        }, 500);
      });
    }
    if (!shouldMigrate) {
      this.settings.migrationCompleted = true;
      await this.saveSettings();
      return;
    }
    const migratedTypes = [];
    if (hasPostsSettings && !conflicts.includes("Posts")) {
      const postsType = {
        id: `posts-${Date.now()}`,
        name: "Posts",
        folder: this.settings.postsFolder || "",
        linkBasePath: this.settings.postsLinkBasePath || "",
        template: this.settings.defaultTemplate || '---\ntitle: "{{title}}"\ndate: {{date}}\ntags: []\n---\n',
        enabled: this.settings.automatePostCreation || false,
        creationMode: this.settings.creationMode || "file",
        indexFileName: this.settings.indexFileName || "",
        ignoreSubfolders: this.settings.onlyAutomateInPostsFolder || false,
        enableUnderscorePrefix: this.settings.enableUnderscorePrefix || false,
        useMdxExtension: false
      };
      migratedTypes.push(postsType);
    }
    if (hasPagesSettings && !conflicts.includes("Pages")) {
      const pagesType = {
        id: `pages-${Date.now()}`,
        name: "Pages",
        folder: this.settings.pagesFolder || "",
        linkBasePath: this.settings.pagesLinkBasePath || "",
        template: this.settings.pageTemplate || '---\ntitle: "{{title}}"\ndescription: ""\n---\n',
        enabled: this.settings.enablePages || false,
        creationMode: this.settings.pagesCreationMode || "file",
        indexFileName: this.settings.pagesIndexFileName || "",
        ignoreSubfolders: this.settings.onlyAutomateInPagesFolder || false,
        enableUnderscorePrefix: false,
        // Pages didn't have this option before
        useMdxExtension: false
      };
      migratedTypes.push(pagesType);
    }
    const existingFromNew = this.settings.contentTypes && Array.isArray(this.settings.contentTypes) ? this.settings.contentTypes : [];
    const legacySettings = this.settings;
    const existingFromLegacy = legacySettings.customContentTypes && Array.isArray(legacySettings.customContentTypes) ? legacySettings.customContentTypes : [];
    let existingTypes = [];
    if (existingFromNew.length > 0) {
      existingTypes = existingFromNew;
    } else if (existingFromLegacy.length > 0) {
      existingTypes = existingFromLegacy;
    }
    let finalTypes = [...existingTypes];
    if (migratedTypes.length > 0) {
      const existingNames = new Set(existingTypes.map((ct) => ct.name));
      const newMigratedTypes = migratedTypes.filter((mt) => !existingNames.has(mt.name));
      if (newMigratedTypes.length > 0) {
        finalTypes = [...existingTypes, ...newMigratedTypes];
      }
    }
    this.settings.contentTypes = finalTypes;
    const legacyFields = [
      "customContentTypes",
      // Old name for contentTypes - must be removed
      "enableUnderscorePrefix",
      "postsFolder",
      "postsLinkBasePath",
      "automatePostCreation",
      "creationMode",
      "indexFileName",
      "excludedDirectories",
      "onlyAutomateInPostsFolder",
      "enablePages",
      "pagesFolder",
      "pagesLinkBasePath",
      "pagesCreationMode",
      "pagesIndexFileName",
      "pageTemplate",
      "onlyAutomateInPagesFolder"
    ];
    const settingsRecord = this.settings;
    for (const field of legacyFields) {
      if (settingsRecord[field] !== void 0) {
        delete settingsRecord[field];
      }
    }
    this.settings.migrationCompleted = true;
    await this.saveSettings();
    await this.loadSettings();
    if (migratedTypes.length > 0) {
      new import_obsidian12.Notice(`Migration completed: ${migratedTypes.length} content type(s) migrated.`);
      setTimeout(() => {
        if (this.settingsTab) {
          try {
            if (this.settingsTab.customContentTypesContainer || this.settingsTab.containerEl) {
              this.settingsTab.display();
            }
          } catch (e) {
            console.warn("Could not refresh settings tab after migration:", e);
          }
        }
      }, 300);
    }
  }
  async onload() {
    await this.loadSettings();
    this.fileOps = new FileOperations(this.app, this.settings, this);
    this.templateParser = new TemplateParser(this.app, this.settings);
    this.headingLinkGenerator = new HeadingLinkGenerator(this.settings);
    if (this.settings.showMdxFilesInExplorer) {
      this.registerExtensions(["mdx"], "markdown");
    }
    this.app.workspace.onLayoutReady(() => {
      this.registerCreateEvent();
      if (!import_obsidian12.Platform.isMobile) {
        void this.updateHelpButton();
      }
      void this.migrateSettingsIfNeeded();
    });
    registerCommands(this, this.settings);
    registerContentTypeCommands(this, this.settings);
    this.settingsTab = new AstroComposerSettingTab(this.app, this);
    this.addSettingTab(this.settingsTab);
    this.registerContextMenu();
    this.registerRibbonIcons();
    this.setupRibbonContextMenuHandling();
  }
  registerCreateEvent() {
    if (this.createEventRef) {
      this.app.vault.offref(this.createEventRef);
      this.createEventRef = void 0;
    }
    const lastProcessedFiles = /* @__PURE__ */ new Map();
    this.createEvent = (file) => {
      void (async () => {
        const now = Date.now();
        if (file instanceof import_obsidian12.TFile && (file.extension === "md" || file.extension === "mdx")) {
          const filePath = file.path;
          if (this.pluginCreatedFiles.has(filePath)) {
            return;
          }
          const lastProcessed = lastProcessedFiles.get(filePath) || 0;
          if (lastProcessed > 0 && now - lastProcessed < CONSTANTS.DEBOUNCE_MS) {
            return;
          }
          if (lastProcessed > 0 && now - lastProcessed > 2e3) {
            lastProcessedFiles.delete(filePath);
          }
          await this.loadSettings();
          const contentTypes = this.settings.contentTypes || [];
          const hasEnabledContentTypes = contentTypes.some((ct) => ct.enabled);
          if (!hasEnabledContentTypes) {
            return;
          }
          const sortedContentTypes = sortByPatternSpecificity(contentTypes);
          let matchedContentTypeId = null;
          const matchingTypes = [];
          for (const contentType of sortedContentTypes) {
            if (!contentType.enabled) continue;
            let matches = false;
            if (!contentType.folder || contentType.folder.trim() === "") {
              if (!filePath.includes("/") || filePath.split("/").length === 1) {
                matches = true;
              }
            } else if (matchesFolderPattern(filePath, contentType.folder)) {
              if (contentType.ignoreSubfolders) {
                const pathSegments = filePath.split("/");
                const pathDepth = pathSegments.length;
                const patternSegments = contentType.folder.split("/");
                const expectedDepth = patternSegments.length;
                if (contentType.creationMode === "folder") {
                  const folderDepth = pathDepth - 1;
                  if (folderDepth === expectedDepth || folderDepth === expectedDepth + 1) {
                    matches = true;
                  }
                } else {
                  if (pathDepth === expectedDepth) {
                    matches = true;
                  }
                }
              } else {
                matches = true;
              }
            }
            if (matches) {
              matchingTypes.push(contentType);
              if (!matchedContentTypeId) {
                matchedContentTypeId = contentType.id;
              }
            }
          }
          if (matchingTypes.length > 1) {
            const typeNames = matchingTypes.map((ct) => ct.name || "Unnamed").join(", ");
            new import_obsidian12.Notice(`Multiple content types (${typeNames}) match this file. Using most specific: ${matchingTypes[0].name || "Unnamed"}`);
          }
          if (!matchedContentTypeId) {
            return;
          }
          const stat = await this.app.vault.adapter.stat(file.path);
          const isNewNote = (stat == null ? void 0 : stat.mtime) && now - stat.mtime < CONSTANTS.STAT_MTIME_THRESHOLD;
          if (!isNewNote) {
            return;
          }
          await new Promise((resolve) => setTimeout(resolve, 50));
          let content;
          try {
            content = await this.app.vault.read(file);
          } catch (error) {
            console.error("Error reading file for create detection:", error);
            return;
          }
          if (content.trim().length > 0) {
            if (content.startsWith("---")) {
              const frontmatterEnd = content.indexOf("\n---", 3);
              if (frontmatterEnd !== -1) {
                const frontmatterText = content.slice(4, frontmatterEnd).trim();
                const lines = frontmatterText.split("\n").filter((line) => line.trim().length > 0);
                if (lines.length > 1 || lines.length === 1 && !lines[0].startsWith("title:")) {
                  return;
                }
              }
            }
            const contentWithoutFrontmatter = content.startsWith("---") ? content.slice(content.indexOf("\n---", 3) + 4).trim() : content.trim();
            if (contentWithoutFrontmatter.length > 0) {
              return;
            }
          }
          this.pluginCreatedFiles.add(file.path);
          setTimeout(() => {
            this.pluginCreatedFiles.delete(file.path);
          }, 2e3);
          lastProcessedFiles.set(file.path, now);
          setTimeout(() => {
            lastProcessedFiles.delete(file.path);
          }, CONSTANTS.DEBOUNCE_MS + 100);
          if (lastProcessedFiles.size > 100) {
            const cutoff = now - CONSTANTS.DEBOUNCE_MS * 2;
            for (const [path, time] of lastProcessedFiles.entries()) {
              if (time < cutoff) {
                lastProcessedFiles.delete(path);
              }
            }
          }
          new TitleModal(this.app, file, this, matchedContentTypeId, false, true).open();
        }
      })();
    };
    const createEventRef = this.app.vault.on("create", (file) => {
      if (file instanceof import_obsidian12.TFile) {
        this.createEvent(file);
      }
    });
    this.registerEvent(createEventRef);
    this.createEventRef = createEventRef;
  }
  async loadSettings() {
    const loadedData = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
    if (!this.settings.contentTypes || !Array.isArray(this.settings.contentTypes)) {
      this.settings.contentTypes = [];
    }
    if (!this.settings.migrationCompleted) {
      const legacySettings = this.settings;
      const hasLegacyTypes = legacySettings.customContentTypes && Array.isArray(legacySettings.customContentTypes) && legacySettings.customContentTypes.length > 0;
      const hasNewTypes = this.settings.contentTypes && Array.isArray(this.settings.contentTypes) && this.settings.contentTypes.length > 0;
      if (hasLegacyTypes && !hasNewTypes) {
        this.settings.contentTypes = legacySettings.customContentTypes || [];
      }
    } else {
      const legacyFields = [
        "customContentTypes",
        // Old name for contentTypes - MUST be removed to prevent restoring deleted types
        "enableUnderscorePrefix",
        "postsFolder",
        "postsLinkBasePath",
        "automatePostCreation",
        "creationMode",
        "indexFileName",
        "excludedDirectories",
        "onlyAutomateInPostsFolder",
        "enablePages",
        "pagesFolder",
        "pagesLinkBasePath",
        "pagesCreationMode",
        "pagesIndexFileName",
        "pageTemplate",
        "onlyAutomateInPagesFolder"
      ];
      const settingsRecord = this.settings;
      for (const field of legacyFields) {
        if (settingsRecord[field] !== void 0) {
          delete settingsRecord[field];
        }
      }
      await this.saveSettings();
    }
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  registerContextMenu() {
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor, view) => {
        if (!this.settings.enableCopyHeadingLink) {
          return;
        }
        const cursor = editor.getCursor();
        const file = view.file;
        if (!(file instanceof import_obsidian12.TFile)) {
          return;
        }
        const heading = this.headingLinkGenerator.findHeadingAtLine(this.app, file, cursor.line);
        if (heading) {
          const fullLink = this.headingLinkGenerator.generateLink(this.app, file, heading);
          const urlOnly = this.headingLinkGenerator.extractUrl(fullLink);
          menu.addItem((item) => {
            item.setTitle("Copy heading link").setIcon("link-2").onClick(async () => {
              await navigator.clipboard.writeText(urlOnly);
              new import_obsidian12.Notice("Heading link copied to clipboard");
            });
          });
          menu.addItem((item) => {
            item.setTitle("Copy heading link with text").setIcon("heading").onClick(async () => {
              await navigator.clipboard.writeText(fullLink);
              new import_obsidian12.Notice("Heading link with text copied to clipboard");
            });
          });
        }
      })
    );
  }
  /**
   * Rename a file by path (for programmatic use, e.g., from other plugins)
   * This allows the rename modal to appear without opening the file first
   */
  renameContentByPath(filePath) {
    renameContentByPath(this.app, filePath, this.settings, this);
  }
  registerRibbonIcons() {
    if (import_obsidian12.Platform.isMobile) {
      if (this.terminalRibbonIcon) {
        try {
          if (this.terminalRibbonIcon.parentNode) {
            this.terminalRibbonIcon.remove();
          }
        } catch (e) {
        }
        this.terminalRibbonIcon = null;
      }
      if (this.configRibbonIcon) {
        try {
          if (this.configRibbonIcon.parentNode) {
            this.configRibbonIcon.remove();
          }
        } catch (e) {
        }
        this.configRibbonIcon = null;
      }
      try {
        const terminalIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Open project terminal"]');
        terminalIcons.forEach((icon) => icon.remove());
        const configIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Edit astro config"]');
        configIcons.forEach((icon) => icon.remove());
      } catch (e) {
      }
      return;
    }
    const terminalRibbonEnabled = this.settings.enableTerminalRibbonIcon === true;
    const terminalCommandEnabled = this.settings.enableOpenTerminalCommand === true;
    const terminalShouldExist = terminalRibbonEnabled && terminalCommandEnabled;
    const configRibbonEnabled = this.settings.enableConfigRibbonIcon === true;
    const configCommandEnabled = this.settings.enableOpenConfigFileCommand === true;
    const configShouldExist = configRibbonEnabled && configCommandEnabled;
    if (this.terminalRibbonIcon) {
      try {
        if (this.terminalRibbonIcon.parentNode) {
          this.terminalRibbonIcon.remove();
        }
      } catch (e) {
      }
      this.terminalRibbonIcon = null;
    }
    if (this.configRibbonIcon) {
      try {
        if (this.configRibbonIcon.parentNode) {
          this.configRibbonIcon.remove();
        }
      } catch (e) {
      }
      this.configRibbonIcon = null;
    }
    try {
      const terminalIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Open project terminal"]');
      terminalIcons.forEach((icon) => icon.remove());
      const configIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Edit astro config"]');
      configIcons.forEach((icon) => icon.remove());
    } catch (e) {
    }
    if (terminalShouldExist) {
      const existingTerminal = document.querySelector('.side-dock-ribbon-action[aria-label="Open project terminal"]');
      if (!existingTerminal) {
        this.terminalRibbonIcon = this.addRibbonIcon("terminal-square", "Open project terminal", () => {
          if (!this.settings.enableOpenTerminalCommand) {
            new import_obsidian12.Notice("Open terminal command is disabled. Enable it in settings to use this command.");
            return;
          }
          openTerminalInProjectRoot(this.app, this.settings);
        });
        if (this.terminalRibbonIcon) {
          this.terminalRibbonIcon.setAttribute("data-astro-composer-terminal-ribbon", "true");
        }
      } else {
        this.terminalRibbonIcon = existingTerminal;
      }
      if (!configShouldExist) {
        const configIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Edit astro config"]');
        if (configIcons.length > 0) {
          configIcons.forEach((icon) => icon.remove());
          this.configRibbonIcon = null;
        }
      }
    } else {
      this.terminalRibbonIcon = null;
    }
    if (configShouldExist) {
      const existingConfig = document.querySelector('.side-dock-ribbon-action[aria-label="Edit astro config"]');
      if (!existingConfig) {
        this.configRibbonIcon = this.addRibbonIcon("wrench", "Edit astro config", async () => {
          if (!this.settings.enableOpenConfigFileCommand) {
            new import_obsidian12.Notice("Edit config file command is disabled. Enable it in settings to use this command.");
            return;
          }
          await openConfigFile(this.app, this.settings);
        });
        if (this.configRibbonIcon) {
          this.configRibbonIcon.setAttribute("data-astro-composer-config-ribbon", "true");
        }
      } else {
        this.configRibbonIcon = existingConfig;
      }
      if (!terminalShouldExist) {
        const terminalIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Open project terminal"]');
        if (terminalIcons.length > 0) {
          terminalIcons.forEach((icon) => icon.remove());
          this.terminalRibbonIcon = null;
        }
      }
    } else {
      this.configRibbonIcon = null;
    }
    this.updateRibbonContextMenuCSS();
    this.setupRibbonContextMenuObserver();
    setTimeout(() => {
      if (!terminalShouldExist) {
        const terminalIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Open project terminal"]');
        terminalIcons.forEach((icon) => icon.remove());
        this.terminalRibbonIcon = null;
      }
      if (!configShouldExist) {
        const configIcons = document.querySelectorAll('.side-dock-ribbon-action[aria-label="Edit astro config"]');
        configIcons.forEach((icon) => icon.remove());
        this.configRibbonIcon = null;
      }
    }, 100);
  }
  onunload() {
    if (this.terminalRibbonIcon) {
      this.terminalRibbonIcon.remove();
      this.terminalRibbonIcon = null;
    }
    if (this.configRibbonIcon) {
      this.configRibbonIcon.remove();
      this.configRibbonIcon = null;
    }
    if (this.ribbonContextMenuObserver) {
      this.ribbonContextMenuObserver.disconnect();
      this.ribbonContextMenuObserver = void 0;
    }
    document.body.removeClass("astro-composer-hide-terminal-icon");
    document.body.removeClass("astro-composer-hide-config-icon");
    if (this.helpButtonObserver) {
      this.helpButtonObserver.disconnect();
      this.helpButtonObserver = void 0;
    }
    if (this.customHelpButton) {
      this.customHelpButton.remove();
      this.customHelpButton = void 0;
    }
    this.helpButtonElement = void 0;
  }
  // Ribbon context menu handling - based on Astro Modular Settings approach
  setupRibbonContextMenuHandling() {
    this.updateRibbonContextMenuCSS();
    this.setupRibbonContextMenuObserver();
  }
  updateRibbonContextMenuCSS() {
    const terminalShouldBeHidden = !this.settings.enableTerminalRibbonIcon || !this.settings.enableOpenTerminalCommand;
    const configShouldBeHidden = !this.settings.enableConfigRibbonIcon || !this.settings.enableOpenConfigFileCommand;
    if (terminalShouldBeHidden) {
      document.body.addClass("astro-composer-hide-terminal-icon");
    } else {
      document.body.removeClass("astro-composer-hide-terminal-icon");
    }
    if (configShouldBeHidden) {
      document.body.addClass("astro-composer-hide-config-icon");
    } else {
      document.body.removeClass("astro-composer-hide-config-icon");
    }
  }
  setupRibbonContextMenuObserver() {
    if (this.ribbonContextMenuObserver) {
      this.ribbonContextMenuObserver.disconnect();
    }
    const terminalShouldBeHidden = !this.settings.enableTerminalRibbonIcon || !this.settings.enableOpenTerminalCommand;
    const configShouldBeHidden = !this.settings.enableConfigRibbonIcon || !this.settings.enableOpenConfigFileCommand;
    if (!terminalShouldBeHidden && !configShouldBeHidden) {
      return;
    }
    this.ribbonContextMenuObserver = new MutationObserver((mutations) => {
      for (const mutation of mutations) {
        if (mutation.addedNodes.length > 0) {
          for (const node of Array.from(mutation.addedNodes)) {
            if (node instanceof HTMLElement) {
              if (node.classList.contains("menu") || node.querySelector(".menu")) {
                this.removeRibbonIconsFromContextMenu(node);
              }
            }
          }
        }
      }
    });
    this.ribbonContextMenuObserver.observe(document.body, {
      childList: true,
      subtree: true
    });
  }
  updateHelpButtonCSS() {
    var _a;
    if ((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled) {
      document.body.addClass("astro-composer-hide-help-button");
    } else {
      document.body.removeClass("astro-composer-hide-help-button");
    }
  }
  async updateHelpButton() {
    var _a, _b, _c;
    if (import_obsidian12.Platform.isMobile) {
      this.restoreHelpButton();
      return;
    }
    if (this.helpButtonObserver) {
      this.helpButtonObserver.disconnect();
    }
    await this.loadSettings();
    this.updateHelpButtonCSS();
    if (!((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled)) {
      this.restoreHelpButton();
      this.setupHelpButtonObserver();
      return;
    }
    const vaultActions = document.querySelector(".workspace-drawer-vault-actions");
    if (!vaultActions) {
      this.setupHelpButtonObserver();
      setTimeout(() => {
        var _a2;
        if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
          void this.updateHelpButton();
        }
      }, 500);
      return;
    }
    const clickableIcons = Array.from(vaultActions.querySelectorAll(".clickable-icon"));
    let helpButton = null;
    for (const icon of clickableIcons) {
      const svg = icon.querySelector("svg.help");
      if (svg) {
        helpButton = icon;
        break;
      }
    }
    if (!helpButton) {
      this.setupHelpButtonObserver();
      setTimeout(() => {
        var _a2;
        if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
          void this.updateHelpButton();
        }
      }, 500);
      return;
    }
    this.helpButtonElement = helpButton;
    if (this.customHelpButton && this.customHelpButton.parentElement && document.body.contains(this.customHelpButton) && this.customHelpButton.hasAttribute("data-astro-composer-help-replacement")) {
      this.customHelpButton.remove();
    }
    this.customHelpButton = void 0;
    const customButton = helpButton.cloneNode(true);
    customButton.addClass("astro-composer-help-replacement");
    customButton.removeAttribute("aria-label");
    customButton.setAttribute("data-astro-composer-help-replacement", "true");
    customButton.classList.add("astro-composer-help-replacement");
    customButton.onclick = null;
    const iconContainer = ((_b = customButton.querySelector("svg")) == null ? void 0 : _b.parentElement) || customButton;
    try {
      if (iconContainer instanceof HTMLElement) {
        (0, import_obsidian12.setIcon)(iconContainer, this.settings.helpButtonReplacement.iconId);
      }
    } catch (error) {
      console.warn("[Astro Composer] Error setting icon:", error);
    }
    customButton.addEventListener("click", (evt) => {
      var _a2;
      evt.preventDefault();
      evt.stopPropagation();
      const commandId = (_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.commandId;
      if (commandId) {
        void (async () => {
          var _a3;
          try {
            const appWithCommands = this.app;
            if ((_a3 = appWithCommands.commands) == null ? void 0 : _a3.executeCommandById) {
              await appWithCommands.commands.executeCommandById(commandId);
            }
          } catch (error) {
            console.warn("[Astro Composer] Error executing command:", error);
            new import_obsidian12.Notice(`Failed to execute command: ${commandId}`);
          }
        })();
      }
    }, true);
    (_c = helpButton.parentElement) == null ? void 0 : _c.insertBefore(customButton, helpButton);
    this.customHelpButton = customButton;
    setTimeout(() => {
      var _a2;
      if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
        this.setupHelpButtonObserver();
      }
    }, 1e3);
  }
  setupHelpButtonObserver() {
    var _a;
    if (this.helpButtonObserver) {
      this.helpButtonObserver.disconnect();
    }
    if (!((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled)) {
      return;
    }
    let updateTimeout = null;
    this.helpButtonObserver = new MutationObserver(() => {
      if (updateTimeout) {
        clearTimeout(updateTimeout);
      }
      updateTimeout = window.setTimeout(() => {
        const vaultActions2 = document.querySelector(".workspace-drawer-vault-actions");
        if (!vaultActions2) return;
        const customButtonExists = this.customHelpButton && this.customHelpButton.parentElement && document.body.contains(this.customHelpButton) && this.customHelpButton.hasAttribute("data-astro-composer-help-replacement");
        if (!customButtonExists) {
          if (this.customHelpButton && (!document.body.contains(this.customHelpButton) || !this.customHelpButton.hasAttribute("data-astro-composer-help-replacement"))) {
            this.customHelpButton = void 0;
          }
          void this.updateHelpButton();
        }
      }, 100);
    });
    const vaultActions = document.querySelector(".workspace-drawer-vault-actions");
    if (vaultActions) {
      this.helpButtonObserver.observe(vaultActions, {
        childList: true,
        subtree: true
        // Watch subtree to catch when buttons are recreated
      });
    }
    const vaultProfile = document.querySelector(".workspace-sidedock-vault-profile");
    if (vaultProfile) {
      this.helpButtonObserver.observe(vaultProfile, {
        childList: true,
        subtree: true
        // Watch subtree to catch when vault actions are added
      });
    }
    if (!vaultActions && !vaultProfile) {
      const workspace = document.querySelector(".workspace-split");
      if (workspace) {
        this.helpButtonObserver.observe(workspace, {
          childList: true,
          subtree: true
        });
      } else {
        this.helpButtonObserver.observe(document.body, {
          childList: true,
          subtree: true
        });
      }
    }
  }
  restoreHelpButton() {
    document.body.removeClass("astro-composer-hide-help-button");
    if (this.customHelpButton) {
      this.customHelpButton.remove();
      this.customHelpButton = void 0;
    }
    this.helpButtonElement = void 0;
  }
  removeRibbonIconsFromContextMenu(menuElement) {
    var _a, _b;
    const terminalShouldBeHidden = !this.settings.enableTerminalRibbonIcon || !this.settings.enableOpenTerminalCommand;
    const configShouldBeHidden = !this.settings.enableConfigRibbonIcon || !this.settings.enableOpenConfigFileCommand;
    const menuItems = menuElement.querySelectorAll(".menu-item");
    for (const item of Array.from(menuItems)) {
      const svg = item.querySelector("svg");
      if (svg) {
        const iconName = svg.getAttribute("data-lucide") || svg.getAttribute("xmlns:lucide") || (svg.classList.contains("lucide-terminal-square") ? "terminal-square" : null) || (svg.classList.contains("lucide-wrench") ? "wrench" : null);
        if (terminalShouldBeHidden && iconName === "terminal-square") {
          const itemText = ((_a = item.textContent) == null ? void 0 : _a.toLowerCase()) || "";
          if (itemText.includes("terminal") || itemText.includes("project terminal")) {
            item.remove();
          }
        }
        if (configShouldBeHidden && iconName === "wrench") {
          const itemText = ((_b = item.textContent) == null ? void 0 : _b.toLowerCase()) || "";
          if (itemText.includes("config") || itemText.includes("astro config")) {
            item.remove();
          }
        }
      }
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvY29tbWFuZHMvaW5kZXgudHMiLCAic3JjL3V0aWxzL2ZpbGUtb3BlcmF0aW9ucy50cyIsICJzcmMvdXRpbHMvcGF0aC1tYXRjaGluZy50cyIsICJzcmMvdXRpbHMvdGVtcGxhdGUtcGFyc2luZy50cyIsICJzcmMvdXRpbHMvbGluay1jb252ZXJzaW9uLnRzIiwgInNyYy91aS90aXRsZS1tb2RhbC50cyIsICJzcmMvdWkvc2V0dGluZ3MtdGFiLnRzIiwgInNyYy91aS9jb21wb25lbnRzL0NvbW1hbmRQaWNrZXJNb2RhbC50cyIsICJzcmMvdWkvY29tcG9uZW50cy9JY29uUGlja2VyTW9kYWwudHMiLCAic3JjL3VpL2NvbXBvbmVudHMvQ29uZmlybU1vZGFsLnRzIiwgInNyYy91dGlscy9zZXR0aW5ncy1jb21wYXQudHMiLCAic3JjL3VpL2NvbXBvbmVudHMvTWlncmF0aW9uTW9kYWwudHMiLCAic3JjL3V0aWxzL2hlYWRpbmctbGluay1nZW5lcmF0b3IudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7XHJcblx0UGx1Z2luLFxyXG5cdFRGaWxlLFxyXG5cdE5vdGljZSxcclxuXHRzZXRJY29uLFxyXG5cdFBsYXRmb3JtLFxyXG5cdEV2ZW50UmVmLFxyXG59IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuaW1wb3J0IHsgQXN0cm9Db21wb3NlclNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTLCBDT05TVEFOVFMgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlLCBDb250ZW50VHlwZSB9IGZyb20gXCIuL3R5cGVzXCI7XHJcbmltcG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMsIHJlZ2lzdGVyQ29udGVudFR5cGVDb21tYW5kcywgcmVuYW1lQ29udGVudEJ5UGF0aCBhcyByZW5hbWVDb250ZW50QnlQYXRoRnVuY3Rpb24sIG9wZW5UZXJtaW5hbEluUHJvamVjdFJvb3QsIG9wZW5Db25maWdGaWxlIH0gZnJvbSBcIi4vY29tbWFuZHNcIjtcclxuaW1wb3J0IHsgQXN0cm9Db21wb3NlclNldHRpbmdUYWIgfSBmcm9tIFwiLi91aS9zZXR0aW5ncy10YWJcIjtcclxuaW1wb3J0IHsgVGl0bGVNb2RhbCB9IGZyb20gXCIuL3VpL3RpdGxlLW1vZGFsXCI7XHJcbmltcG9ydCB7IE1pZ3JhdGlvbk1vZGFsLCBNaWdyYXRpb25Db25mbGljdFJlc3VsdCB9IGZyb20gXCIuL3VpL2NvbXBvbmVudHMvTWlncmF0aW9uTW9kYWxcIjtcclxuaW1wb3J0IHsgRmlsZU9wZXJhdGlvbnMgfSBmcm9tIFwiLi91dGlscy9maWxlLW9wZXJhdGlvbnNcIjtcclxuaW1wb3J0IHsgVGVtcGxhdGVQYXJzZXIgfSBmcm9tIFwiLi91dGlscy90ZW1wbGF0ZS1wYXJzaW5nXCI7XHJcbmltcG9ydCB7IEhlYWRpbmdMaW5rR2VuZXJhdG9yIH0gZnJvbSBcIi4vdXRpbHMvaGVhZGluZy1saW5rLWdlbmVyYXRvclwiO1xyXG5pbXBvcnQgeyBtYXRjaGVzRm9sZGVyUGF0dGVybiwgc29ydEJ5UGF0dGVyblNwZWNpZmljaXR5IH0gZnJvbSBcIi4vdXRpbHMvcGF0aC1tYXRjaGluZ1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXN0cm9Db21wb3NlclBsdWdpbiBleHRlbmRzIFBsdWdpbiBpbXBsZW1lbnRzIEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2Uge1xyXG5cdHNldHRpbmdzITogQXN0cm9Db21wb3NlclNldHRpbmdzO1xyXG5cdHByaXZhdGUgY3JlYXRlRXZlbnQhOiAoZmlsZTogVEZpbGUpID0+IHZvaWQ7XHJcblx0cHJpdmF0ZSBjcmVhdGVFdmVudFJlZj86IEV2ZW50UmVmO1xyXG5cdHByaXZhdGUgZmlsZU9wcyE6IEZpbGVPcGVyYXRpb25zO1xyXG5cdHByaXZhdGUgdGVtcGxhdGVQYXJzZXIhOiBUZW1wbGF0ZVBhcnNlcjtcclxuXHRwcml2YXRlIGhlYWRpbmdMaW5rR2VuZXJhdG9yITogSGVhZGluZ0xpbmtHZW5lcmF0b3I7XHJcblx0cHJpdmF0ZSBwbHVnaW5DcmVhdGVkRmlsZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xyXG5cdHByaXZhdGUgdGVybWluYWxSaWJib25JY29uOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgY29uZmlnUmliYm9uSWNvbjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIHJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXI/OiBNdXRhdGlvbk9ic2VydmVyO1xyXG5cdHByaXZhdGUgaGVscEJ1dHRvbk9ic2VydmVyPzogTXV0YXRpb25PYnNlcnZlcjtcclxuXHRwcml2YXRlIGhlbHBCdXR0b25FbGVtZW50PzogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBjdXN0b21IZWxwQnV0dG9uPzogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBzZXR0aW5nc1RhYj86IEFzdHJvQ29tcG9zZXJTZXR0aW5nVGFiO1xyXG5cclxuXHQvKipcclxuXHQgKiBNaWdyYXRlIG9sZCBwb3N0cy9wYWdlcyBzZXR0aW5ncyB0byB1bmlmaWVkIGNvbnRlbnQgdHlwZXNcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIG1pZ3JhdGVTZXR0aW5nc0lmTmVlZGVkKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgbWlncmF0aW9uIGlzIGFscmVhZHkgY29tcGxldGVkXHJcblx0XHQvLyBJZiB0cnVlLCByZXR1cm4gaW1tZWRpYXRlbHkgLSBubyByZWxvYWQvcmVmcmVzaCBuZWVkZWQsIHRoaXMgb25seSBydW5zIG9uY2UgcGVyIHVzZXJcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm1pZ3JhdGlvbkNvbXBsZXRlZCkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlcmUgYXJlIG9sZCBzZXR0aW5ncyB0byBtaWdyYXRlXHJcblx0XHRjb25zdCBoYXNQb3N0c1NldHRpbmdzID0gdGhpcy5zZXR0aW5ncy5hdXRvbWF0ZVBvc3RDcmVhdGlvbiAhPT0gdW5kZWZpbmVkICYmIHRoaXMuc2V0dGluZ3MuYXV0b21hdGVQb3N0Q3JlYXRpb247XHJcblx0XHRjb25zdCBoYXNQYWdlc1NldHRpbmdzID0gdGhpcy5zZXR0aW5ncy5lbmFibGVQYWdlcyAhPT0gdW5kZWZpbmVkICYmIHRoaXMuc2V0dGluZ3MuZW5hYmxlUGFnZXM7XHJcblxyXG5cdFx0aWYgKCFoYXNQb3N0c1NldHRpbmdzICYmICFoYXNQYWdlc1NldHRpbmdzKSB7XHJcblx0XHRcdC8vIE5vIG9sZCBzZXR0aW5ncyB0byBtaWdyYXRlLCBtYXJrIGFzIGNvbXBsZXRlZFxyXG5cdFx0XHR0aGlzLnNldHRpbmdzLm1pZ3JhdGlvbkNvbXBsZXRlZCA9IHRydWU7XHJcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBmb3IgbmFtaW5nIGNvbmZsaWN0c1xyXG5cdFx0Ly8gSGFuZGxlIGJvdGggbmV3IGNvbnRlbnRUeXBlcyBhbmQgbGVnYWN5IGN1c3RvbUNvbnRlbnRUeXBlc1xyXG5cdFx0Y29uc3QgbGVnYWN5Q29udGVudFR5cGVzID0gKHRoaXMuc2V0dGluZ3MgYXMgdW5rbm93biBhcyB7IGN1c3RvbUNvbnRlbnRUeXBlcz86IENvbnRlbnRUeXBlW10gfSkuY3VzdG9tQ29udGVudFR5cGVzO1xyXG5cdFx0Y29uc3QgZXhpc3RpbmdDb250ZW50VHlwZXMgPSB0aGlzLnNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBsZWdhY3lDb250ZW50VHlwZXMgfHwgW107XHJcblx0XHRjb25zdCBjb25mbGljdHM6IHN0cmluZ1tdID0gW107XHJcblx0XHRpZiAoZXhpc3RpbmdDb250ZW50VHlwZXMuc29tZSgoY3Q6IENvbnRlbnRUeXBlKSA9PiBjdC5uYW1lID09PSBcIlBvc3RzXCIpKSB7XHJcblx0XHRcdGNvbmZsaWN0cy5wdXNoKFwiUG9zdHNcIik7XHJcblx0XHR9XHJcblx0XHRpZiAoZXhpc3RpbmdDb250ZW50VHlwZXMuc29tZSgoY3Q6IENvbnRlbnRUeXBlKSA9PiBjdC5uYW1lID09PSBcIlBhZ2VzXCIpKSB7XHJcblx0XHRcdGNvbmZsaWN0cy5wdXNoKFwiUGFnZXNcIik7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHNob3VsZE1pZ3JhdGUgPSB0cnVlO1xyXG5cclxuXHRcdC8vIElmIGNvbmZsaWN0cyBleGlzdCwgcHJvbXB0IHVzZXIgKGJ1dCBkb24ndCBibG9jayAtIHVzZSBzZXRUaW1lb3V0IHRvIHNob3cgbW9kYWwgYWZ0ZXIgVUkgaXMgcmVhZHkpXHJcblx0XHRpZiAoY29uZmxpY3RzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Ly8gU2hvdyBtb2RhbCBhc3luY2hyb25vdXNseSB0byBhdm9pZCBibG9ja2luZyBwbHVnaW4gbG9hZFxyXG5cdFx0XHRhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IE1pZ3JhdGlvbk1vZGFsKHRoaXMuYXBwLCBjb25mbGljdHMpO1xyXG5cdFx0XHRcdFx0XHRcdC8vIEFkZCB0aW1lb3V0IGZhbGxiYWNrIC0gaWYgdXNlciBkb2Vzbid0IHJlc3BvbmQgaW4gMzAgc2Vjb25kcywgZGVmYXVsdCB0byBza2lwXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgdGltZW91dFByb21pc2UgPSBuZXcgUHJvbWlzZTxNaWdyYXRpb25Db25mbGljdFJlc3VsdD4oKHRpbWVvdXRSZXNvbHZlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGltZW91dFJlc29sdmUoeyBhY3Rpb246IFwic2tpcFwiIH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSwgMzAwMDApOyAvLyAzMCBzZWNvbmQgdGltZW91dFxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb21pc2UucmFjZShbXHJcblx0XHRcdFx0XHRcdFx0XHRtb2RhbC53YWl0Rm9yUmVzdWx0KCksXHJcblx0XHRcdFx0XHRcdFx0XHR0aW1lb3V0UHJvbWlzZVxyXG5cdFx0XHRcdFx0XHRcdF0pO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChyZXN1bHQuYWN0aW9uID09PSBcInNraXBcIikge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2hvdWxkTWlncmF0ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIk1pZ3JhdGlvbiBza2lwcGVkLiBPbGQgcG9zdHMvcGFnZXMgc2V0dGluZ3Mgd2lsbCBiZSBpZ25vcmVkLlwiKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gSWYgbW9kYWwgZmFpbHMgZm9yIGFueSByZWFzb24sIGRlZmF1bHQgdG8gc2tpcCB0byBwcmV2ZW50IGJsb2NraW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKFwiTWlncmF0aW9uIG1vZGFsIGVycm9yOlwiLCBlcnJvcik7XHJcblx0XHRcdFx0XHRcdFx0c2hvdWxkTWlncmF0ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJNaWdyYXRpb24gc2tpcHBlZCBkdWUgdG8gZXJyb3IuIFlvdSBjYW4gbWlncmF0ZSBtYW51YWxseSBpbiBzZXR0aW5ncy5cIik7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cmVzb2x2ZSgpO1xyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHR9LCA1MDApOyAvLyBTbWFsbCBkZWxheSB0byBlbnN1cmUgVUkgaXMgcmVhZHlcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCFzaG91bGRNaWdyYXRlKSB7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MubWlncmF0aW9uQ29tcGxldGVkID0gdHJ1ZTtcclxuXHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFBlcmZvcm0gbWlncmF0aW9uXHJcblx0XHRjb25zdCBtaWdyYXRlZFR5cGVzOiBDb250ZW50VHlwZVtdID0gW107XHJcblxyXG5cdFx0Ly8gTWlncmF0ZSBQb3N0cyAtIHNraXAgaWYgaXQgYWxyZWFkeSBleGlzdHMgKGRvbid0IG92ZXJ3cml0ZSB1c2VyJ3MgZXhpc3RpbmcgY29uZmlnKVxyXG5cdFx0aWYgKGhhc1Bvc3RzU2V0dGluZ3MgJiYgIWNvbmZsaWN0cy5pbmNsdWRlcyhcIlBvc3RzXCIpKSB7XHJcblx0XHRcdGNvbnN0IHBvc3RzVHlwZTogQ29udGVudFR5cGUgPSB7XHJcblx0XHRcdFx0aWQ6IGBwb3N0cy0ke0RhdGUubm93KCl9YCxcclxuXHRcdFx0XHRuYW1lOiBcIlBvc3RzXCIsXHJcblx0XHRcdFx0Zm9sZGVyOiB0aGlzLnNldHRpbmdzLnBvc3RzRm9sZGVyIHx8IFwiXCIsXHJcblx0XHRcdFx0bGlua0Jhc2VQYXRoOiB0aGlzLnNldHRpbmdzLnBvc3RzTGlua0Jhc2VQYXRoIHx8IFwiXCIsXHJcblx0XHRcdFx0dGVtcGxhdGU6IHRoaXMuc2V0dGluZ3MuZGVmYXVsdFRlbXBsYXRlIHx8ICctLS1cXG50aXRsZTogXCJ7e3RpdGxlfX1cIlxcbmRhdGU6IHt7ZGF0ZX19XFxudGFnczogW11cXG4tLS1cXG4nLFxyXG5cdFx0XHRcdGVuYWJsZWQ6IHRoaXMuc2V0dGluZ3MuYXV0b21hdGVQb3N0Q3JlYXRpb24gfHwgZmFsc2UsXHJcblx0XHRcdFx0Y3JlYXRpb25Nb2RlOiB0aGlzLnNldHRpbmdzLmNyZWF0aW9uTW9kZSB8fCBcImZpbGVcIixcclxuXHRcdFx0XHRpbmRleEZpbGVOYW1lOiB0aGlzLnNldHRpbmdzLmluZGV4RmlsZU5hbWUgfHwgXCJcIixcclxuXHRcdFx0XHRpZ25vcmVTdWJmb2xkZXJzOiB0aGlzLnNldHRpbmdzLm9ubHlBdXRvbWF0ZUluUG9zdHNGb2xkZXIgfHwgZmFsc2UsXHJcblx0XHRcdFx0ZW5hYmxlVW5kZXJzY29yZVByZWZpeDogdGhpcy5zZXR0aW5ncy5lbmFibGVVbmRlcnNjb3JlUHJlZml4IHx8IGZhbHNlLFxyXG5cdFx0XHRcdHVzZU1keEV4dGVuc2lvbjogZmFsc2UsXHJcblx0XHRcdH07XHJcblx0XHRcdG1pZ3JhdGVkVHlwZXMucHVzaChwb3N0c1R5cGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE1pZ3JhdGUgUGFnZXMgLSBza2lwIGlmIGl0IGFscmVhZHkgZXhpc3RzIChkb24ndCBvdmVyd3JpdGUgdXNlcidzIGV4aXN0aW5nIGNvbmZpZylcclxuXHRcdGlmIChoYXNQYWdlc1NldHRpbmdzICYmICFjb25mbGljdHMuaW5jbHVkZXMoXCJQYWdlc1wiKSkge1xyXG5cdFx0XHRjb25zdCBwYWdlc1R5cGU6IENvbnRlbnRUeXBlID0ge1xyXG5cdFx0XHRcdGlkOiBgcGFnZXMtJHtEYXRlLm5vdygpfWAsXHJcblx0XHRcdFx0bmFtZTogXCJQYWdlc1wiLFxyXG5cdFx0XHRcdGZvbGRlcjogdGhpcy5zZXR0aW5ncy5wYWdlc0ZvbGRlciB8fCBcIlwiLFxyXG5cdFx0XHRcdGxpbmtCYXNlUGF0aDogdGhpcy5zZXR0aW5ncy5wYWdlc0xpbmtCYXNlUGF0aCB8fCBcIlwiLFxyXG5cdFx0XHRcdHRlbXBsYXRlOiB0aGlzLnNldHRpbmdzLnBhZ2VUZW1wbGF0ZSB8fCAnLS0tXFxudGl0bGU6IFwie3t0aXRsZX19XCJcXG5kZXNjcmlwdGlvbjogXCJcIlxcbi0tLVxcbicsXHJcblx0XHRcdFx0ZW5hYmxlZDogdGhpcy5zZXR0aW5ncy5lbmFibGVQYWdlcyB8fCBmYWxzZSxcclxuXHRcdFx0XHRjcmVhdGlvbk1vZGU6IHRoaXMuc2V0dGluZ3MucGFnZXNDcmVhdGlvbk1vZGUgfHwgXCJmaWxlXCIsXHJcblx0XHRcdFx0aW5kZXhGaWxlTmFtZTogdGhpcy5zZXR0aW5ncy5wYWdlc0luZGV4RmlsZU5hbWUgfHwgXCJcIixcclxuXHRcdFx0XHRpZ25vcmVTdWJmb2xkZXJzOiB0aGlzLnNldHRpbmdzLm9ubHlBdXRvbWF0ZUluUGFnZXNGb2xkZXIgfHwgZmFsc2UsXHJcblx0XHRcdFx0ZW5hYmxlVW5kZXJzY29yZVByZWZpeDogZmFsc2UsIC8vIFBhZ2VzIGRpZG4ndCBoYXZlIHRoaXMgb3B0aW9uIGJlZm9yZVxyXG5cdFx0XHRcdHVzZU1keEV4dGVuc2lvbjogZmFsc2UsXHJcblx0XHRcdH07XHJcblx0XHRcdG1pZ3JhdGVkVHlwZXMucHVzaChwYWdlc1R5cGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFkZCBtaWdyYXRlZCB0eXBlcyB0byBjb250ZW50IHR5cGVzIGFycmF5XHJcblx0XHQvLyBDUklUSUNBTDogUHJlc2VydmUgQUxMIGV4aXN0aW5nIGNvbnRlbnQgdHlwZXMsIGRvbid0IG92ZXJ3cml0ZSB0aGVtXHJcblx0XHQvLyBHZXQgZXhpc3RpbmcgdHlwZXMgZnJvbSBib3RoIHBvc3NpYmxlIHNvdXJjZXNcclxuXHRcdGNvbnN0IGV4aXN0aW5nRnJvbU5ldyA9IHRoaXMuc2V0dGluZ3MuY29udGVudFR5cGVzICYmIEFycmF5LmlzQXJyYXkodGhpcy5zZXR0aW5ncy5jb250ZW50VHlwZXMpIFxyXG5cdFx0XHQ/IHRoaXMuc2V0dGluZ3MuY29udGVudFR5cGVzIFxyXG5cdFx0XHQ6IFtdO1xyXG5cdFx0Y29uc3QgbGVnYWN5U2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzIGFzIHVua25vd24gYXMgeyBjdXN0b21Db250ZW50VHlwZXM/OiBDb250ZW50VHlwZVtdIH07XHJcblx0XHRjb25zdCBleGlzdGluZ0Zyb21MZWdhY3kgPSBsZWdhY3lTZXR0aW5ncy5jdXN0b21Db250ZW50VHlwZXMgJiYgQXJyYXkuaXNBcnJheShsZWdhY3lTZXR0aW5ncy5jdXN0b21Db250ZW50VHlwZXMpXHJcblx0XHRcdD8gbGVnYWN5U2V0dGluZ3MuY3VzdG9tQ29udGVudFR5cGVzXHJcblx0XHRcdDogW107XHJcblx0XHRcclxuXHRcdC8vIE1lcmdlIGV4aXN0aW5nIHR5cGVzLCBwcmlvcml0aXppbmcgbmV3IGZvcm1hdCBidXQgaW5jbHVkaW5nIGxlZ2FjeSBpZiBuZXcgaXMgZW1wdHlcclxuXHRcdC8vIElmIGJvdGggZXhpc3QsIHVzZSBuZXcgZm9ybWF0IChpdCdzIG1vcmUgcmVjZW50KVxyXG5cdFx0bGV0IGV4aXN0aW5nVHlwZXM6IENvbnRlbnRUeXBlW10gPSBbXTtcclxuXHRcdGlmIChleGlzdGluZ0Zyb21OZXcubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRleGlzdGluZ1R5cGVzID0gZXhpc3RpbmdGcm9tTmV3O1xyXG5cdFx0fSBlbHNlIGlmIChleGlzdGluZ0Zyb21MZWdhY3kubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRleGlzdGluZ1R5cGVzID0gZXhpc3RpbmdGcm9tTGVnYWN5O1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBPbmx5IGFkZCBtaWdyYXRlZCB0eXBlcyBpZiB3ZSBoYXZlIGFueVxyXG5cdFx0Ly8gQ1JJVElDQUw6IENoZWNrIGlmIG1pZ3JhdGVkIHR5cGVzIGFscmVhZHkgZXhpc3QgYnkgbmFtZSBiZWZvcmUgYWRkaW5nIHRoZW1cclxuXHRcdC8vIFRoaXMgcHJldmVudHMgcmUtYWRkaW5nIGNvbnRlbnQgdHlwZXMgdGhhdCB3ZXJlIGRlbGV0ZWQgYnkgdGhlIHVzZXJcclxuXHRcdGxldCBmaW5hbFR5cGVzOiBDb250ZW50VHlwZVtdID0gWy4uLmV4aXN0aW5nVHlwZXNdO1xyXG5cdFx0aWYgKG1pZ3JhdGVkVHlwZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyBGaWx0ZXIgb3V0IGFueSBtaWdyYXRlZCB0eXBlcyB0aGF0IGFscmVhZHkgZXhpc3QgYnkgbmFtZVxyXG5cdFx0XHRjb25zdCBleGlzdGluZ05hbWVzID0gbmV3IFNldChleGlzdGluZ1R5cGVzLm1hcChjdCA9PiBjdC5uYW1lKSk7XHJcblx0XHRcdGNvbnN0IG5ld01pZ3JhdGVkVHlwZXMgPSBtaWdyYXRlZFR5cGVzLmZpbHRlcihtdCA9PiAhZXhpc3RpbmdOYW1lcy5oYXMobXQubmFtZSkpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gT25seSBhZGQgbWlncmF0ZWQgdHlwZXMgdGhhdCBkb24ndCBhbHJlYWR5IGV4aXN0XHJcblx0XHRcdGlmIChuZXdNaWdyYXRlZFR5cGVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRmaW5hbFR5cGVzID0gWy4uLmV4aXN0aW5nVHlwZXMsIC4uLm5ld01pZ3JhdGVkVHlwZXNdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFNldCB0aGUgZmluYWwgY29udGVudCB0eXBlcyBhcnJheVxyXG5cdFx0dGhpcy5zZXR0aW5ncy5jb250ZW50VHlwZXMgPSBmaW5hbFR5cGVzO1xyXG5cdFx0XHJcblx0XHQvLyBDUklUSUNBTDogQ2xlYW4gdXAgYWxsIG9sZCBsZWdhY3kgZmllbGRzIGFmdGVyIG1pZ3JhdGlvbiB0byBwcmV2ZW50IHRoZW0gZnJvbSBjYXVzaW5nIGlzc3Vlc1xyXG5cdFx0Ly8gVGhlc2UgZmllbGRzIGFyZSBubyBsb25nZXIgbmVlZGVkIGFuZCBjb3VsZCBjYXVzZSBjb250ZW50IHR5cGVzIHRvIGJlIHJlY3JlYXRlZFxyXG5cdFx0Y29uc3QgbGVnYWN5RmllbGRzID0gW1xyXG5cdFx0XHQnY3VzdG9tQ29udGVudFR5cGVzJywgLy8gT2xkIG5hbWUgZm9yIGNvbnRlbnRUeXBlcyAtIG11c3QgYmUgcmVtb3ZlZFxyXG5cdFx0XHQnZW5hYmxlVW5kZXJzY29yZVByZWZpeCcsXHJcblx0XHRcdCdwb3N0c0ZvbGRlcicsXHJcblx0XHRcdCdwb3N0c0xpbmtCYXNlUGF0aCcsXHJcblx0XHRcdCdhdXRvbWF0ZVBvc3RDcmVhdGlvbicsXHJcblx0XHRcdCdjcmVhdGlvbk1vZGUnLFxyXG5cdFx0XHQnaW5kZXhGaWxlTmFtZScsXHJcblx0XHRcdCdleGNsdWRlZERpcmVjdG9yaWVzJyxcclxuXHRcdFx0J29ubHlBdXRvbWF0ZUluUG9zdHNGb2xkZXInLFxyXG5cdFx0XHQnZW5hYmxlUGFnZXMnLFxyXG5cdFx0XHQncGFnZXNGb2xkZXInLFxyXG5cdFx0XHQncGFnZXNMaW5rQmFzZVBhdGgnLFxyXG5cdFx0XHQncGFnZXNDcmVhdGlvbk1vZGUnLFxyXG5cdFx0XHQncGFnZXNJbmRleEZpbGVOYW1lJyxcclxuXHRcdFx0J3BhZ2VUZW1wbGF0ZScsXHJcblx0XHRcdCdvbmx5QXV0b21hdGVJblBhZ2VzRm9sZGVyJyxcclxuXHRcdF07XHJcblx0XHRjb25zdCBzZXR0aW5nc1JlY29yZCA9IHRoaXMuc2V0dGluZ3MgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcclxuXHRcdGZvciAoY29uc3QgZmllbGQgb2YgbGVnYWN5RmllbGRzKSB7XHJcblx0XHRcdGlmIChzZXR0aW5nc1JlY29yZFtmaWVsZF0gIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdGRlbGV0ZSBzZXR0aW5nc1JlY29yZFtmaWVsZF07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBNYXJrIG1pZ3JhdGlvbiBhcyBjb21wbGV0ZWRcclxuXHRcdHRoaXMuc2V0dGluZ3MubWlncmF0aW9uQ29tcGxldGVkID0gdHJ1ZTtcclxuXHRcdC8vIFNhdmUgc2V0dGluZ3MgdG8gZW5zdXJlIGFsbCBsZWdhY3kgZmllbGRzIGFyZSBwZXJtYW5lbnRseSByZW1vdmVkIGZyb20gZGlza1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0Ly8gTk9URTogVGhlIHJlbG9hZCBhbmQgcmVmcmVzaCBiZWxvdyBPTkxZIGhhcHBlbiB3aGVuIG1pZ3JhdGlvbiBhY3R1YWxseSBydW5zXHJcblx0XHQvLyBJZiBtaWdyYXRpb25Db21wbGV0ZWQgd2FzIGFscmVhZHkgdHJ1ZSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGVhcmx5IChsaW5lIDQzKVxyXG5cdFx0Ly8gU28gdGhpcyBjb2RlIHBhdGggb25seSBleGVjdXRlcyBvbmNlIHBlciB1c2VyIGR1cmluZyB0aGVpciBmaXJzdCBtaWdyYXRpb25cclxuXHRcdFxyXG5cdFx0Ly8gUmVsb2FkIHNldHRpbmdzIHRvIGVuc3VyZSBldmVyeXRoaW5nIGlzIGluIHN5bmNcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cdFx0aWYgKG1pZ3JhdGVkVHlwZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRuZXcgTm90aWNlKGBNaWdyYXRpb24gY29tcGxldGVkOiAke21pZ3JhdGVkVHlwZXMubGVuZ3RofSBjb250ZW50IHR5cGUocykgbWlncmF0ZWQuYCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBSZWZyZXNoIHNldHRpbmdzIHRhYiBpZiBpdCBleGlzdHMgLSBvbmx5IHJ1bnMgd2hlbiBtaWdyYXRpb24gYWN0dWFsbHkgaGFwcGVuZWRcclxuXHRcdFx0Ly8gVXNlIGEgZGVsYXkgdG8gZW5zdXJlIGV2ZXJ5dGhpbmcgaXMgc3luY2VkIGFuZCBVSSBpcyByZWFkeVxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5nc1RhYikge1xyXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHRyeSB0byByZWZyZXNoIHRoZSBzZXR0aW5ncyB0YWIgaWYgaXQgZXhpc3RzXHJcblx0XHRcdFx0XHQvLyBJZiBpdCdzIGN1cnJlbnRseSBkaXNwbGF5ZWQsIHRoaXMgd2lsbCB1cGRhdGUgaXQgaW1tZWRpYXRlbHlcclxuXHRcdFx0XHRcdC8vIElmIGl0J3Mgbm90IGRpc3BsYXllZCB5ZXQsIHRoaXMgaXMgc2FmZSBhbmQgd29uJ3QgY2F1c2UgaXNzdWVzXHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBzZXR0aW5ncyB0YWIgY29udGFpbmVyIGV4aXN0cyAobWVhbnMgaXQncyBiZWVuIGRpc3BsYXllZCBhdCBsZWFzdCBvbmNlKVxyXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5nc1RhYi5jdXN0b21Db250ZW50VHlwZXNDb250YWluZXIgfHwgdGhpcy5zZXR0aW5nc1RhYi5jb250YWluZXJFbCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFNldHRpbmdzIHRhYiBoYXMgYmVlbiBkaXNwbGF5ZWQgLSByZWZyZXNoIGl0IHRvIHNob3cgbWlncmF0ZWQgdHlwZXNcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHQvLyBJZiBjb250YWluZXIgZG9lc24ndCBleGlzdCwgc2V0dGluZ3MgdGFiIGhhc24ndCBiZWVuIG9wZW5lZCB5ZXRcclxuXHRcdFx0XHRcdFx0Ly8gSXQgd2lsbCBzaG93IG1pZ3JhdGVkIHR5cGVzIHdoZW4gdXNlciBvcGVucyBpdCAoZGlzcGxheSgpIHJlYWRzIGZyZXNoIHNldHRpbmdzKVxyXG5cdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRcdFx0XHQvLyBJZiByZWZyZXNoIGZhaWxzLCB0aGF0J3Mgb2theSAtIHNldHRpbmdzIHdpbGwgc2hvdyB3aGVuIHVzZXIgb3BlbnMgdGhlbVxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgcmVmcmVzaCBzZXR0aW5ncyB0YWIgYWZ0ZXIgbWlncmF0aW9uOlwiLCBlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIDMwMCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdC8vIEluaXRpYWxpemUgdXRpbGl0aWVzIGZpcnN0IChkb24ndCBibG9jayBvbiBtaWdyYXRpb24pXHJcblx0XHR0aGlzLmZpbGVPcHMgPSBuZXcgRmlsZU9wZXJhdGlvbnModGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MsIHRoaXMgYXMgdW5rbm93biBhcyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlICYgeyBwbHVnaW5DcmVhdGVkRmlsZXM/OiBTZXQ8c3RyaW5nPiB9KTtcclxuXHRcdHRoaXMudGVtcGxhdGVQYXJzZXIgPSBuZXcgVGVtcGxhdGVQYXJzZXIodGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0dGhpcy5oZWFkaW5nTGlua0dlbmVyYXRvciA9IG5ldyBIZWFkaW5nTGlua0dlbmVyYXRvcih0aGlzLnNldHRpbmdzKTtcclxuXHJcblx0XHQvLyBSZWdpc3RlciBNRFggZmlsZSB2aXNpYmlsaXR5IGlmIGVuYWJsZWRcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnNob3dNZHhGaWxlc0luRXhwbG9yZXIpIHtcclxuXHRcdFx0dGhpcy5yZWdpc3RlckV4dGVuc2lvbnMoW1wibWR4XCJdLCBcIm1hcmtkb3duXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFdhaXQgZm9yIHRoZSB2YXVsdCB0byBiZSBmdWxseSBsb2FkZWQgYmVmb3JlIHJlZ2lzdGVyaW5nIHRoZSBjcmVhdGUgZXZlbnRcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcclxuXHRcdFx0dGhpcy5yZWdpc3RlckNyZWF0ZUV2ZW50KCk7XHJcblx0XHRcdC8vIEluaXRpYWxpemUgaGVscCBidXR0b24gcmVwbGFjZW1lbnQgKGRlc2t0b3Agb25seSlcclxuXHRcdFx0aWYgKCFQbGF0Zm9ybS5pc01vYmlsZSkge1xyXG5cdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVIZWxwQnV0dG9uKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFJ1biBtaWdyYXRpb24gYWZ0ZXIgcGx1Z2luIGlzIGZ1bGx5IGxvYWRlZCAobm9uLWJsb2NraW5nKVxyXG5cdFx0XHQvLyBUaGlzIHByZXZlbnRzIHRoZSBtb2RhbCBmcm9tIGJsb2NraW5nIHBsdWdpbiBpbml0aWFsaXphdGlvblxyXG5cdFx0XHR2b2lkIHRoaXMubWlncmF0ZVNldHRpbmdzSWZOZWVkZWQoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFJlZ2lzdGVyIGNvbW1hbmRzXHJcblx0XHRyZWdpc3RlckNvbW1hbmRzKHRoaXMsIHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0XHJcblx0XHQvLyBSZWdpc3RlciBjb250ZW50IHR5cGUgY29tbWFuZHNcclxuXHRcdHJlZ2lzdGVyQ29udGVudFR5cGVDb21tYW5kcyh0aGlzLCB0aGlzLnNldHRpbmdzKTtcclxuXHJcblx0XHQvLyBBZGQgc2V0dGluZ3MgdGFiIGFuZCBzdG9yZSByZWZlcmVuY2UgZm9yIHJlZnJlc2ggYWZ0ZXIgbWlncmF0aW9uXHJcblx0XHR0aGlzLnNldHRpbmdzVGFiID0gbmV3IEFzdHJvQ29tcG9zZXJTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKTtcclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYih0aGlzLnNldHRpbmdzVGFiKTtcclxuXHJcblx0XHQvLyBSZWdpc3RlciBjb250ZXh0IG1lbnUgZm9yIGNvcHkgaGVhZGluZyBsaW5rc1xyXG5cdFx0dGhpcy5yZWdpc3RlckNvbnRleHRNZW51KCk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgcmliYm9uIGljb25zIGlmIGVuYWJsZWRcclxuXHRcdHRoaXMucmVnaXN0ZXJSaWJib25JY29ucygpO1xyXG5cdFx0XHJcblx0XHQvLyBTZXR1cCByaWJib24gY29udGV4dCBtZW51IGhhbmRsaW5nXHJcblx0XHR0aGlzLnNldHVwUmliYm9uQ29udGV4dE1lbnVIYW5kbGluZygpO1xyXG5cdH1cclxuXHJcblxyXG5cdHB1YmxpYyByZWdpc3RlckNyZWF0ZUV2ZW50KCkge1xyXG5cdFx0aWYgKHRoaXMuY3JlYXRlRXZlbnRSZWYpIHtcclxuXHRcdFx0dGhpcy5hcHAudmF1bHQub2ZmcmVmKHRoaXMuY3JlYXRlRXZlbnRSZWYpO1xyXG5cdFx0XHR0aGlzLmNyZWF0ZUV2ZW50UmVmID0gdW5kZWZpbmVkO1xyXG5cdFx0fVxyXG5cdFx0Ly8gQWx3YXlzIHJlZ2lzdGVyIHRoZSBldmVudCBsaXN0ZW5lciwgYnV0IGNoZWNrIGVuYWJsZWQgY29udGVudCB0eXBlcyBkeW5hbWljYWxseVxyXG5cdFx0Ly8gVGhpcyBlbnN1cmVzIGF1dG9tYXRpb24gd29ya3MgZXZlbiBpZiBjb250ZW50IHR5cGVzIGFyZSBlbmFibGVkIGFmdGVyIHBsdWdpbiBsb2FkXHJcblx0XHRcclxuXHRcdC8vIERlYm91bmNlIHRvIHByZXZlbnQgbXVsdGlwbGUgbW9kYWxzIGZyb20gcmFwaWQgZmlsZSBjcmVhdGlvbnNcclxuXHRcdC8vIFVzZSBhIE1hcCB0byB0cmFjayBwZXItZmlsZSBkZWJvdW5jaW5nIGluc3RlYWQgb2YgZ2xvYmFsIGRlYm91bmNpbmdcclxuXHRcdGNvbnN0IGxhc3RQcm9jZXNzZWRGaWxlcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcblxyXG5cdFx0dGhpcy5jcmVhdGVFdmVudCA9IChmaWxlOiBURmlsZSkgPT4ge1xyXG5cdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcblxyXG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIChmaWxlLmV4dGVuc2lvbiA9PT0gXCJtZFwiIHx8IGZpbGUuZXh0ZW5zaW9uID09PSBcIm1keFwiKSkge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gZmlsZS5wYXRoO1xyXG5cclxuXHRcdFx0XHQvLyBTa2lwIGlmIHRoaXMgZmlsZSB3YXMgY3JlYXRlZCBieSB0aGUgcGx1Z2luIGl0c2VsZlxyXG5cdFx0XHRcdC8vIERvbid0IGRlbGV0ZSBpbW1lZGlhdGVseSAtIGtlZXAgaXQgZm9yIGEgYml0IHRvIGhhbmRsZSByYXBpZCBldmVudHNcclxuXHRcdFx0XHRpZiAodGhpcy5wbHVnaW5DcmVhdGVkRmlsZXMuaGFzKGZpbGVQYXRoKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gUGVyLWZpbGUgZGVib3VuY2UgY2hlY2sgLSBidXQgb25seSBjaGVjaywgZG9uJ3QgbWFyayB5ZXRcclxuXHRcdFx0XHQvLyBXZSdsbCBtYXJrIGl0IGFzIHByb2Nlc3NlZCBvbmx5IEFGVEVSIHdlIHN1Y2Nlc3NmdWxseSBzaG93IHRoZSBtb2RhbFxyXG5cdFx0XHRcdC8vIEhvd2V2ZXIsIGlmIHRoZSBmaWxlIHdhcyBwcm9jZXNzZWQgbW9yZSB0aGFuIDIgc2Vjb25kcyBhZ28sIGNsZWFyIGl0IHRvIGFsbG93IG5ldyBwcm9jZXNzaW5nXHJcblx0XHRcdFx0Y29uc3QgbGFzdFByb2Nlc3NlZCA9IGxhc3RQcm9jZXNzZWRGaWxlcy5nZXQoZmlsZVBhdGgpIHx8IDA7XHJcblx0XHRcdFx0aWYgKGxhc3RQcm9jZXNzZWQgPiAwICYmIG5vdyAtIGxhc3RQcm9jZXNzZWQgPCBDT05TVEFOVFMuREVCT1VOQ0VfTVMpIHtcclxuXHRcdFx0XHRcdHJldHVybjsgLy8gU2tpcCBpZiB0aGlzIHNwZWNpZmljIGZpbGUgd2FzIGp1c3QgcHJvY2Vzc2VkXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIENsZWFuIHVwIG9sZCBlbnRyaWVzIChvbGRlciB0aGFuIDIgc2Vjb25kcylcclxuXHRcdFx0XHRpZiAobGFzdFByb2Nlc3NlZCA+IDAgJiYgbm93IC0gbGFzdFByb2Nlc3NlZCA+IDIwMDApIHtcclxuXHRcdFx0XHRcdGxhc3RQcm9jZXNzZWRGaWxlcy5kZWxldGUoZmlsZVBhdGgpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gQ1JJVElDQUw6IFJlbG9hZCBzZXR0aW5ncyBmcm9tIGRpc2sgdG8gZW5zdXJlIHdlIGhhdmUgdGhlIGxhdGVzdCBkYXRhXHJcblx0XHRcdFx0Ly8gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBvdGhlciBwbHVnaW5zIG1pZ2h0IGhhdmUgbW9kaWZpZWQgZGF0YS5qc29uXHJcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcblx0XHRcdFx0Ly8gQ1JJVElDQUw6IENoZWNrIGlmIGFueSBjb250ZW50IHR5cGVzIGFyZSBlbmFibGVkIEFGVEVSIHJlbG9hZGluZyBzZXR0aW5nc1xyXG5cdFx0XHRcdC8vIFRoaXMgZW5zdXJlcyBhdXRvbWF0aW9uIHdvcmtzIHdoZW4gY29udGVudCB0eXBlcyBhcmUgZW5hYmxlZCBieSBhbm90aGVyIHBsdWdpblxyXG5cdFx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHRoaXMuc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xyXG5cdFx0XHRcdGNvbnN0IGhhc0VuYWJsZWRDb250ZW50VHlwZXMgPSBjb250ZW50VHlwZXMuc29tZShjdCA9PiBjdC5lbmFibGVkKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBJZiBubyBjb250ZW50IHR5cGVzIGFyZSBlbmFibGVkLCBza2lwIHByb2Nlc3NpbmdcclxuXHRcdFx0XHRpZiAoIWhhc0VuYWJsZWRDb250ZW50VHlwZXMpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEZpbmQgbWF0Y2hpbmcgY29udGVudCB0eXBlIHVzaW5nIHBhdHRlcm4gc3BlY2lmaWNpdHkgKG1vc3Qgc3BlY2lmaWMgd2lucylcclxuXHRcdFx0XHRcdC8vIFNvcnQgYnkgcGF0dGVybiBzcGVjaWZpY2l0eSBzbyBtb3JlIHNwZWNpZmljIHBhdHRlcm5zIGFyZSBjaGVja2VkIGZpcnN0XHJcblx0XHRcdFx0XHRjb25zdCBzb3J0ZWRDb250ZW50VHlwZXMgPSBzb3J0QnlQYXR0ZXJuU3BlY2lmaWNpdHkoY29udGVudFR5cGVzKTtcclxuXHRcdFx0XHRcdGxldCBtYXRjaGVkQ29udGVudFR5cGVJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdFx0XHRjb25zdCBtYXRjaGluZ1R5cGVzOiBDb250ZW50VHlwZVtdID0gW107IC8vIFRyYWNrIGFsbCBtYXRjaGluZyB0eXBlcyBmb3IgY29uZmxpY3QgZGV0ZWN0aW9uXHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGZvciAoY29uc3QgY29udGVudFR5cGUgb2Ygc29ydGVkQ29udGVudFR5cGVzKSB7XHJcblx0XHRcdFx0XHRcdGlmICghY29udGVudFR5cGUuZW5hYmxlZCkgY29udGludWU7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRsZXQgbWF0Y2hlcyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGJsYW5rIGZvbGRlciAocm9vdCkgLSBtYXRjaGVzIGZpbGVzIGluIHZhdWx0IHJvb3Qgb25seVxyXG5cdFx0XHRcdFx0XHRpZiAoIWNvbnRlbnRUeXBlLmZvbGRlciB8fCBjb250ZW50VHlwZS5mb2xkZXIudHJpbSgpID09PSBcIlwiKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFmaWxlUGF0aC5pbmNsdWRlcyhcIi9cIikgfHwgZmlsZVBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aCA9PT0gMSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0bWF0Y2hlcyA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG1hdGNoZXNGb2xkZXJQYXR0ZXJuKGZpbGVQYXRoLCBjb250ZW50VHlwZS5mb2xkZXIpKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgaWdub3JlIHN1YmZvbGRlcnMgaXMgZW5hYmxlZFxyXG5cdFx0XHRcdFx0XHRcdGlmIChjb250ZW50VHlwZS5pZ25vcmVTdWJmb2xkZXJzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYXRoU2VnbWVudHMgPSBmaWxlUGF0aC5zcGxpdChcIi9cIik7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYXRoRGVwdGggPSBwYXRoU2VnbWVudHMubGVuZ3RoO1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGF0dGVyblNlZ21lbnRzID0gY29udGVudFR5cGUuZm9sZGVyLnNwbGl0KFwiL1wiKTtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGV4cGVjdGVkRGVwdGggPSBwYXR0ZXJuU2VnbWVudHMubGVuZ3RoO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoY29udGVudFR5cGUuY3JlYXRpb25Nb2RlID09PSBcImZvbGRlclwiKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEZvciBmb2xkZXItYmFzZWQgY3JlYXRpb24sIGZpbGVzIGFyZSBvbmUgbGV2ZWwgZGVlcGVyIChlLmcuLCB0ZXN0L215LWZpbGUvaW5kZXgubWQpXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFNvIHdlIG5lZWQgdG8gYWxsb3cgb25lIGV4dHJhIGxldmVsIGJleW9uZCB0aGUgcGF0dGVybiBkZXB0aFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBmb2xkZXJEZXB0aCA9IHBhdGhEZXB0aCAtIDE7IC8vIFN1YnRyYWN0IDEgZm9yIHRoZSBpbmRleC5tZCBmaWxlXHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChmb2xkZXJEZXB0aCA9PT0gZXhwZWN0ZWREZXB0aCB8fCBmb2xkZXJEZXB0aCA9PT0gZXhwZWN0ZWREZXB0aCArIDEpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRtYXRjaGVzID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gRm9yIGZpbGUtYmFzZWQgY3JlYXRpb24sIGZpbGVzIGFyZSBhdCB0aGUgc2FtZSBkZXB0aCBhcyB0aGUgcGF0dGVyblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAocGF0aERlcHRoID09PSBleHBlY3RlZERlcHRoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0bWF0Y2hlcyA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0bWF0Y2hlcyA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAobWF0Y2hlcykge1xyXG5cdFx0XHRcdFx0XHRcdG1hdGNoaW5nVHlwZXMucHVzaChjb250ZW50VHlwZSk7XHJcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBmaXJzdCBtYXRjaGluZyB0eXBlIChtb3N0IHNwZWNpZmljIGR1ZSB0byBzb3J0aW5nKVxyXG5cdFx0XHRcdFx0XHRcdGlmICghbWF0Y2hlZENvbnRlbnRUeXBlSWQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdG1hdGNoZWRDb250ZW50VHlwZUlkID0gY29udGVudFR5cGUuaWQ7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFNob3cgY29uZmxpY3Qgd2FybmluZyBpZiBtdWx0aXBsZSBjb250ZW50IHR5cGVzIG1hdGNoXHJcblx0XHRcdFx0XHRpZiAobWF0Y2hpbmdUeXBlcy5sZW5ndGggPiAxKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHR5cGVOYW1lcyA9IG1hdGNoaW5nVHlwZXMubWFwKGN0ID0+IGN0Lm5hbWUgfHwgXCJVbm5hbWVkXCIpLmpvaW4oXCIsIFwiKTtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgTXVsdGlwbGUgY29udGVudCB0eXBlcyAoJHt0eXBlTmFtZXN9KSBtYXRjaCB0aGlzIGZpbGUuIFVzaW5nIG1vc3Qgc3BlY2lmaWM6ICR7bWF0Y2hpbmdUeXBlc1swXS5uYW1lIHx8IFwiVW5uYW1lZFwifWApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIElmIG5vIGNvbnRlbnQgdHlwZSBtYXRjaGVzLCBza2lwIGVudGlyZWx5XHJcblx0XHRcdFx0XHRpZiAoIW1hdGNoZWRDb250ZW50VHlwZUlkKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBDaGVjayBpZiBmaWxlIGlzIG5ld2x5IGNyZWF0ZWQgYnkgdXNlciAocmVjZW50IGNyZWF0aW9uIHRpbWUpXHJcblx0XHRcdFx0XHRjb25zdCBzdGF0ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5zdGF0KGZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHRjb25zdCBpc05ld05vdGUgPSBzdGF0Py5tdGltZSAmJiAobm93IC0gc3RhdC5tdGltZSA8IENPTlNUQU5UUy5TVEFUX01USU1FX1RIUkVTSE9MRCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gU2tpcCBpZiBub3QgYSB1c2VyLWluaXRpYXRlZCBuZXcgbm90ZVxyXG5cdFx0XHRcdFx0aWYgKCFpc05ld05vdGUpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIFdhaXQgYSBtb21lbnQgZm9yIHRoZSBmaWxlIHRvIGJlIGZ1bGx5IHdyaXR0ZW5cclxuXHRcdFx0XHRcdC8vIFRoaXMgaGVscHMgYXZvaWQgcmFjZSBjb25kaXRpb25zIHdoZXJlIHdlIHJlYWQgYmVmb3JlIE9ic2lkaWFuIGZpbmlzaGVzIHdyaXRpbmdcclxuXHRcdFx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MCkpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBSZWFkIGZpbGUgY29udGVudCBkaXJlY3RseSBmb3IgbW9yZSByZWxpYWJsZSBkZXRlY3Rpb25cclxuXHRcdFx0XHRcdC8vIChtZXRhZGF0YSBjYWNoZSBtaWdodCBub3QgYmUgcmVhZHkgeWV0LCBlc3BlY2lhbGx5IGZvciBNRFggZmlsZXMpXHJcblx0XHRcdFx0XHRsZXQgY29udGVudDogc3RyaW5nO1xyXG5cdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0Y29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcblx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgcmVhZGluZyBmaWxlIGZvciBjcmVhdGUgZGV0ZWN0aW9uOlwiLCBlcnJvcik7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gU2tpcCBpZiBmaWxlIGFscmVhZHkgaGFzIHN1YnN0YW50aWFsIGNvbnRlbnQgb3IgZnJvbnRtYXR0ZXJcclxuXHRcdFx0XHRcdGlmIChjb250ZW50LnRyaW0oKS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIGl0IGhhcyBmcm9udG1hdHRlciBjcmVhdGVkIGJ5IGFub3RoZXIgcGx1Z2luXHJcblx0XHRcdFx0XHRcdGlmIChjb250ZW50LnN0YXJ0c1dpdGgoJy0tLScpKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJFbmQgPSBjb250ZW50LmluZGV4T2YoJ1xcbi0tLScsIDMpO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChmcm9udG1hdHRlckVuZCAhPT0gLTEpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyVGV4dCA9IGNvbnRlbnQuc2xpY2UoNCwgZnJvbnRtYXR0ZXJFbmQpLnRyaW0oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXJUZXh0LnNwbGl0KCdcXG4nKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKS5sZW5ndGggPiAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIElmIGl0IGhhcyBtb3JlIHRoYW4ganVzdCBhIHRpdGxlIGxpbmUsIHNraXBcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChsaW5lcy5sZW5ndGggPiAxIHx8IChsaW5lcy5sZW5ndGggPT09IDEgJiYgIWxpbmVzWzBdLnN0YXJ0c1dpdGgoJ3RpdGxlOicpKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC8vIElmIGl0IGhhcyBib2R5IGNvbnRlbnQgKGFmdGVyIGZyb250bWF0dGVyKSwgc2tpcFxyXG5cdFx0XHRcdFx0XHRjb25zdCBjb250ZW50V2l0aG91dEZyb250bWF0dGVyID0gY29udGVudC5zdGFydHNXaXRoKCctLS0nKSBcclxuXHRcdFx0XHRcdFx0XHQ/IGNvbnRlbnQuc2xpY2UoY29udGVudC5pbmRleE9mKCdcXG4tLS0nLCAzKSArIDQpLnRyaW0oKVxyXG5cdFx0XHRcdFx0XHRcdDogY29udGVudC50cmltKCk7XHJcblx0XHRcdFx0XHRcdGlmIChjb250ZW50V2l0aG91dEZyb250bWF0dGVyLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBNYXJrIHRoZSBvcmlnaW5hbCBmaWxlIGFzIGhhbmRsZWQgSU1NRURJQVRFTFkgdG8gcHJldmVudCBpdCBmcm9tIHRyaWdnZXJpbmcgdGhlIGNyZWF0ZSBldmVudCBhZ2FpblxyXG5cdFx0XHRcdFx0Ly8gVGhpcyBtdXN0IGhhcHBlbiBiZWZvcmUgd2Ugc2hvdyB0aGUgbW9kYWwsIGFzIHRoZSBtb2RhbCB3aWxsIHJlbmFtZSB0aGUgZmlsZVxyXG5cdFx0XHRcdFx0Ly8gS2VlcCBpdCBpbiB0aGUgc2V0IGZvciBhIHdoaWxlIHRvIGhhbmRsZSBhbnkgZGVsYXllZCBldmVudHNcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luQ3JlYXRlZEZpbGVzLmFkZChmaWxlLnBhdGgpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBDbGVhbiB1cCBhZnRlciBhIGRlbGF5IHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzXHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW5DcmVhdGVkRmlsZXMuZGVsZXRlKGZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHR9LCAyMDAwKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gTWFyayBhcyBwcm9jZXNzZWQgaW4gZGVib3VuY2UgbWFwIE9OTFkgYWZ0ZXIgd2UndmUgY29uZmlybWVkIHdlJ2xsIHNob3cgdGhlIG1vZGFsXHJcblx0XHRcdFx0XHQvLyBUaGlzIHByZXZlbnRzIG1hcmtpbmcgZmlsZXMgdGhhdCB3ZSBza2lwIGR1ZSB0byBlYXJseSByZXR1cm5zXHJcblx0XHRcdFx0XHQvLyBVc2UgYSBzaG9ydGVyIGRlYm91bmNlIHRpbWUgZm9yIENUUkwrTiAodXNlci1pbml0aWF0ZWQpIHZzIGF1dG9tYXRpYyBjcmVhdGlvblxyXG5cdFx0XHRcdFx0bGFzdFByb2Nlc3NlZEZpbGVzLnNldChmaWxlLnBhdGgsIG5vdyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIENsZWFyIHRoZSBkZWJvdW5jZSBlbnRyeSBhZnRlciBwcm9jZXNzaW5nIGNvbXBsZXRlcyAod2hlbiBtb2RhbCBjbG9zZXMpXHJcblx0XHRcdFx0XHQvLyBUaGlzIGFsbG93cyB0aGUgbmV4dCBDVFJMK04gdG8gd29yayBpbW1lZGlhdGVseVxyXG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGxhc3RQcm9jZXNzZWRGaWxlcy5kZWxldGUoZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRcdH0sIENPTlNUQU5UUy5ERUJPVU5DRV9NUyArIDEwMCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIENsZWFuIHVwIG9sZCBlbnRyaWVzIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtcclxuXHRcdFx0XHRcdGlmIChsYXN0UHJvY2Vzc2VkRmlsZXMuc2l6ZSA+IDEwMCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjdXRvZmYgPSBub3cgLSBDT05TVEFOVFMuREVCT1VOQ0VfTVMgKiAyO1xyXG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFtwYXRoLCB0aW1lXSBvZiBsYXN0UHJvY2Vzc2VkRmlsZXMuZW50cmllcygpKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKHRpbWUgPCBjdXRvZmYpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGxhc3RQcm9jZXNzZWRGaWxlcy5kZWxldGUocGF0aCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFNob3cgdGhlIG1vZGFsIHdpdGggdGhlIG1hdGNoZWQgY29udGVudCB0eXBlXHJcblx0XHRcdFx0XHRuZXcgVGl0bGVNb2RhbCh0aGlzLmFwcCwgZmlsZSwgdGhpcywgbWF0Y2hlZENvbnRlbnRUeXBlSWQsIGZhbHNlLCB0cnVlKS5vcGVuKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pKCk7XHJcblx0XHRcdH07XHJcblx0XHRcclxuXHRcdC8vIEFsd2F5cyByZWdpc3RlciB0aGUgZXZlbnQgbGlzdGVuZXIgLSBpdCB3aWxsIGNoZWNrIGVuYWJsZWQgY29udGVudCB0eXBlcyBkeW5hbWljYWxseVxyXG5cdFx0Ly8gVXNlIHZhdWx0LmNyZWF0ZSBldmVudCB0byBkZXRlY3QgbmV3IGZpbGUgY3JlYXRpb25cclxuXHRcdGNvbnN0IGNyZWF0ZUV2ZW50UmVmID0gdGhpcy5hcHAudmF1bHQub24oXCJjcmVhdGVcIiwgKGZpbGUpID0+IHtcclxuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdC8vIEFsd2F5cyBjYWxsIGNyZWF0ZUV2ZW50IC0gaXQgd2lsbCBjaGVjayBmb3IgZW5hYmxlZCBjb250ZW50IHR5cGVzIGFmdGVyIHJlbG9hZGluZyBzZXR0aW5nc1xyXG5cdFx0XHRcdHRoaXMuY3JlYXRlRXZlbnQoZmlsZSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KGNyZWF0ZUV2ZW50UmVmKTtcclxuXHRcdHRoaXMuY3JlYXRlRXZlbnRSZWYgPSBjcmVhdGVFdmVudFJlZjtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdGNvbnN0IGxvYWRlZERhdGEgPSAoYXdhaXQgdGhpcy5sb2FkRGF0YSgpKSBhcyB1bmtub3duO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGxvYWRlZERhdGEgYXMgUGFydGlhbDxBc3Ryb0NvbXBvc2VyU2V0dGluZ3M+IHwgbnVsbCB8IHVuZGVmaW5lZCk7XHJcblx0XHRcclxuXHRcdC8vIEVuc3VyZSBjb250ZW50VHlwZXMgaXMgYWx3YXlzIGFuIGFycmF5IChuZXZlciB1bmRlZmluZWQgb3IgbnVsbClcclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgIUFycmF5LmlzQXJyYXkodGhpcy5zZXR0aW5ncy5jb250ZW50VHlwZXMpKSB7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuY29udGVudFR5cGVzID0gW107XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIENSSVRJQ0FMOiBPbmx5IG1pZ3JhdGUgbGVnYWN5IGN1c3RvbUNvbnRlbnRUeXBlcyB0byBjb250ZW50VHlwZXMgaWYgbWlncmF0aW9uIGhhc24ndCBjb21wbGV0ZWQgeWV0XHJcblx0XHQvLyBBZnRlciBtaWdyYXRpb24sIGFsbCBsZWdhY3kgZmllbGRzIHNob3VsZCBiZSBkZWxldGVkIGFuZCB3ZSBzaG91bGQgbmV2ZXIgcmVzdG9yZSB0aGVtXHJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MubWlncmF0aW9uQ29tcGxldGVkKSB7XHJcblx0XHRcdC8vIE1pZ3JhdGUgbGVnYWN5IGN1c3RvbUNvbnRlbnRUeXBlcyB0byBjb250ZW50VHlwZXMgaWYgbmVlZGVkIChiZWZvcmUgbWlncmF0aW9uIHJ1bnMpXHJcblx0XHRcdC8vIENoZWNrIGlmIGNvbnRlbnRUeXBlcyBpcyBlbXB0eS91bmRlZmluZWQgYW5kIGN1c3RvbUNvbnRlbnRUeXBlcyBleGlzdHNcclxuXHRcdFx0Y29uc3QgbGVnYWN5U2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzIGFzIHVua25vd24gYXMgeyBjdXN0b21Db250ZW50VHlwZXM/OiBDb250ZW50VHlwZVtdIH07XHJcblx0XHRcdGNvbnN0IGhhc0xlZ2FjeVR5cGVzID0gbGVnYWN5U2V0dGluZ3MuY3VzdG9tQ29udGVudFR5cGVzICYmIEFycmF5LmlzQXJyYXkobGVnYWN5U2V0dGluZ3MuY3VzdG9tQ29udGVudFR5cGVzKSAmJiBsZWdhY3lTZXR0aW5ncy5jdXN0b21Db250ZW50VHlwZXMubGVuZ3RoID4gMDtcclxuXHRcdFx0Y29uc3QgaGFzTmV3VHlwZXMgPSB0aGlzLnNldHRpbmdzLmNvbnRlbnRUeXBlcyAmJiBBcnJheS5pc0FycmF5KHRoaXMuc2V0dGluZ3MuY29udGVudFR5cGVzKSAmJiB0aGlzLnNldHRpbmdzLmNvbnRlbnRUeXBlcy5sZW5ndGggPiAwO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGhhc0xlZ2FjeVR5cGVzICYmICFoYXNOZXdUeXBlcykge1xyXG5cdFx0XHRcdC8vIFByZXNlcnZlIGV4aXN0aW5nIGN1c3RvbSBjb250ZW50IHR5cGVzXHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jb250ZW50VHlwZXMgPSBsZWdhY3lTZXR0aW5ncy5jdXN0b21Db250ZW50VHlwZXMgfHwgW107XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIEFmdGVyIG1pZ3JhdGlvbiwgY2xlYW4gdXAgQUxMIGxlZ2FjeSBmaWVsZHMgaWYgdGhleSBzdGlsbCBleGlzdFxyXG5cdFx0XHQvLyBUaGlzIGlzIGEgb25lLXRpbWUgY2xlYW51cCB0byByZW1vdmUgYW55IGxpbmdlcmluZyBsZWdhY3kgZGF0YSBmcm9tIGRpc2tcclxuXHRcdFx0Ly8gQ1JJVElDQUw6IEFsd2F5cyBkZWxldGUgY3VzdG9tQ29udGVudFR5cGVzIGFmdGVyIG1pZ3JhdGlvbiB0byBwcmV2ZW50IGRlbGV0ZWQgY29udGVudCB0eXBlcyBmcm9tIGJlaW5nIHJlc3RvcmVkXHJcblx0XHRcdGNvbnN0IGxlZ2FjeUZpZWxkcyA9IFtcclxuXHRcdFx0XHQnY3VzdG9tQ29udGVudFR5cGVzJywgLy8gT2xkIG5hbWUgZm9yIGNvbnRlbnRUeXBlcyAtIE1VU1QgYmUgcmVtb3ZlZCB0byBwcmV2ZW50IHJlc3RvcmluZyBkZWxldGVkIHR5cGVzXHJcblx0XHRcdFx0J2VuYWJsZVVuZGVyc2NvcmVQcmVmaXgnLFxyXG5cdFx0XHRcdCdwb3N0c0ZvbGRlcicsXHJcblx0XHRcdFx0J3Bvc3RzTGlua0Jhc2VQYXRoJyxcclxuXHRcdFx0XHQnYXV0b21hdGVQb3N0Q3JlYXRpb24nLFxyXG5cdFx0XHRcdCdjcmVhdGlvbk1vZGUnLFxyXG5cdFx0XHRcdCdpbmRleEZpbGVOYW1lJyxcclxuXHRcdFx0XHQnZXhjbHVkZWREaXJlY3RvcmllcycsXHJcblx0XHRcdFx0J29ubHlBdXRvbWF0ZUluUG9zdHNGb2xkZXInLFxyXG5cdFx0XHRcdCdlbmFibGVQYWdlcycsXHJcblx0XHRcdFx0J3BhZ2VzRm9sZGVyJyxcclxuXHRcdFx0XHQncGFnZXNMaW5rQmFzZVBhdGgnLFxyXG5cdFx0XHRcdCdwYWdlc0NyZWF0aW9uTW9kZScsXHJcblx0XHRcdFx0J3BhZ2VzSW5kZXhGaWxlTmFtZScsXHJcblx0XHRcdFx0J3BhZ2VUZW1wbGF0ZScsXHJcblx0XHRcdFx0J29ubHlBdXRvbWF0ZUluUGFnZXNGb2xkZXInLFxyXG5cdFx0XHRdO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3Qgc2V0dGluZ3NSZWNvcmQgPSB0aGlzLnNldHRpbmdzIGFzIHVua25vd24gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XHJcblx0XHRcdGZvciAoY29uc3QgZmllbGQgb2YgbGVnYWN5RmllbGRzKSB7XHJcblx0XHRcdFx0aWYgKHNldHRpbmdzUmVjb3JkW2ZpZWxkXSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRkZWxldGUgc2V0dGluZ3NSZWNvcmRbZmllbGRdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gU2F2ZSBpbW1lZGlhdGVseSB0byByZW1vdmUgYW55IGxlZ2FjeSBmaWVsZHMgZnJvbSBkaXNrXHJcblx0XHRcdC8vIFRoaXMgZW5zdXJlcyBkZWxldGVkIGNvbnRlbnQgdHlwZXMgZG9uJ3QgY29tZSBiYWNrIGZyb20gbGVnYWN5IGZpZWxkc1xyXG5cdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVnaXN0ZXJDb250ZXh0TWVudSgpIHtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItbWVudScsIChtZW51LCBlZGl0b3IsIHZpZXcpID0+IHtcclxuXHRcdFx0XHQvLyBPbmx5IHNob3cgbWVudSBpZiB0aGUgZmVhdHVyZSBpcyBlbmFibGVkXHJcblx0XHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZUNvcHlIZWFkaW5nTGluaykge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB2aWV3LmZpbGU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gRmluZCB0aGUgaGVhZGluZyBhdCB0aGUgY3VycmVudCBjdXJzb3IgcG9zaXRpb25cclxuXHRcdFx0XHRjb25zdCBoZWFkaW5nID0gdGhpcy5oZWFkaW5nTGlua0dlbmVyYXRvci5maW5kSGVhZGluZ0F0TGluZSh0aGlzLmFwcCwgZmlsZSwgY3Vyc29yLmxpbmUpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChoZWFkaW5nKSB7XHJcblx0XHRcdFx0XHRjb25zdCBmdWxsTGluayA9IHRoaXMuaGVhZGluZ0xpbmtHZW5lcmF0b3IuZ2VuZXJhdGVMaW5rKHRoaXMuYXBwLCBmaWxlLCBoZWFkaW5nKTtcclxuXHRcdFx0XHRcdGNvbnN0IHVybE9ubHkgPSB0aGlzLmhlYWRpbmdMaW5rR2VuZXJhdG9yLmV4dHJhY3RVcmwoZnVsbExpbmspO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBPcHRpb24gMTogQ29weSBVUkwgb25seSAoZm9yIENUUkwrSyB3b3JrZmxvdylcclxuXHRcdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHRcdFx0LnNldFRpdGxlKCdDb3B5IGhlYWRpbmcgbGluaycpXHJcblx0XHRcdFx0XHRcdFx0LnNldEljb24oJ2xpbmstMicpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodXJsT25seSk7XHJcblx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdIZWFkaW5nIGxpbmsgY29waWVkIHRvIGNsaXBib2FyZCcpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIE9wdGlvbiAyOiBDb3B5IGZ1bGwgbGluayB3aXRoIHRleHQgKGZvciBzdGFuZGFsb25lIHBhc3RpbmcpXHJcblx0XHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRUaXRsZSgnQ29weSBoZWFkaW5nIGxpbmsgd2l0aCB0ZXh0JylcclxuXHRcdFx0XHRcdFx0XHQuc2V0SWNvbignaGVhZGluZycpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZnVsbExpbmspO1xyXG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnSGVhZGluZyBsaW5rIHdpdGggdGV4dCBjb3BpZWQgdG8gY2xpcGJvYXJkJyk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVuYW1lIGEgZmlsZSBieSBwYXRoIChmb3IgcHJvZ3JhbW1hdGljIHVzZSwgZS5nLiwgZnJvbSBvdGhlciBwbHVnaW5zKVxyXG5cdCAqIFRoaXMgYWxsb3dzIHRoZSByZW5hbWUgbW9kYWwgdG8gYXBwZWFyIHdpdGhvdXQgb3BlbmluZyB0aGUgZmlsZSBmaXJzdFxyXG5cdCAqL1xyXG5cdHJlbmFtZUNvbnRlbnRCeVBhdGgoZmlsZVBhdGg6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0cmVuYW1lQ29udGVudEJ5UGF0aEZ1bmN0aW9uKHRoaXMuYXBwLCBmaWxlUGF0aCwgdGhpcy5zZXR0aW5ncywgdGhpcyk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgcmVnaXN0ZXJSaWJib25JY29ucygpIHtcclxuXHRcdC8vIFRlcm1pbmFsIGFuZCBjb25maWcgZmVhdHVyZXMgYXJlIGRlc2t0b3Atb25seSAobm90IGF2YWlsYWJsZSBvbiBtb2JpbGUpXHJcblx0XHRpZiAoUGxhdGZvcm0uaXNNb2JpbGUpIHtcclxuXHRcdFx0Ly8gUmVtb3ZlIGFueSBleGlzdGluZyBpY29ucyBvbiBtb2JpbGVcclxuXHRcdFx0aWYgKHRoaXMudGVybWluYWxSaWJib25JY29uKSB7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnRlcm1pbmFsUmliYm9uSWNvbi5wYXJlbnROb2RlKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMudGVybWluYWxSaWJib25JY29uLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0Ly8gU2lsZW50bHkgaGFuZGxlIGVycm9yc1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLnRlcm1pbmFsUmliYm9uSWNvbiA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMuY29uZmlnUmliYm9uSWNvbikge1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5jb25maWdSaWJib25JY29uLnBhcmVudE5vZGUpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5jb25maWdSaWJib25JY29uLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0Ly8gU2lsZW50bHkgaGFuZGxlIGVycm9yc1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLmNvbmZpZ1JpYmJvbkljb24gPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIFJlbW92ZSBmcm9tIERPTVxyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IHRlcm1pbmFsSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1kb2NrLXJpYmJvbi1hY3Rpb25bYXJpYS1sYWJlbD1cIk9wZW4gcHJvamVjdCB0ZXJtaW5hbFwiXScpO1xyXG5cdFx0XHRcdHRlcm1pbmFsSWNvbnMuZm9yRWFjaCgoaWNvbjogRWxlbWVudCkgPT4gaWNvbi5yZW1vdmUoKSk7XHJcblx0XHRcdFx0Y29uc3QgY29uZmlnSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1kb2NrLXJpYmJvbi1hY3Rpb25bYXJpYS1sYWJlbD1cIkVkaXQgYXN0cm8gY29uZmlnXCJdJyk7XHJcblx0XHRcdFx0Y29uZmlnSWNvbnMuZm9yRWFjaCgoaWNvbjogRWxlbWVudCkgPT4gaWNvbi5yZW1vdmUoKSk7XHJcblx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdC8vIFNpbGVudGx5IGhhbmRsZSBlcnJvcnNcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm47IC8vIERvbid0IHJlZ2lzdGVyIGljb25zIG9uIG1vYmlsZVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENhbGN1bGF0ZSB3aGF0IHNob3VsZCBleGlzdCBGSVJTVCAoYmVmb3JlIERPTSBzZWFyY2gpXHJcblx0XHRjb25zdCB0ZXJtaW5hbFJpYmJvbkVuYWJsZWQgPSB0aGlzLnNldHRpbmdzLmVuYWJsZVRlcm1pbmFsUmliYm9uSWNvbiA9PT0gdHJ1ZTtcclxuXHRcdGNvbnN0IHRlcm1pbmFsQ29tbWFuZEVuYWJsZWQgPSB0aGlzLnNldHRpbmdzLmVuYWJsZU9wZW5UZXJtaW5hbENvbW1hbmQgPT09IHRydWU7XHJcblx0XHRjb25zdCB0ZXJtaW5hbFNob3VsZEV4aXN0ID0gdGVybWluYWxSaWJib25FbmFibGVkICYmIHRlcm1pbmFsQ29tbWFuZEVuYWJsZWQ7XHJcblxyXG5cdFx0Y29uc3QgY29uZmlnUmliYm9uRW5hYmxlZCA9IHRoaXMuc2V0dGluZ3MuZW5hYmxlQ29uZmlnUmliYm9uSWNvbiA9PT0gdHJ1ZTtcclxuXHRcdGNvbnN0IGNvbmZpZ0NvbW1hbmRFbmFibGVkID0gdGhpcy5zZXR0aW5ncy5lbmFibGVPcGVuQ29uZmlnRmlsZUNvbW1hbmQgPT09IHRydWU7XHJcblx0XHRjb25zdCBjb25maWdTaG91bGRFeGlzdCA9IGNvbmZpZ1JpYmJvbkVuYWJsZWQgJiYgY29uZmlnQ29tbWFuZEVuYWJsZWQ7XHJcblxyXG5cdFx0Ly8gQUxXQVlTIHJlbW92ZSBhbGwgaWNvbnMgZmlyc3QsIHJlZ2FyZGxlc3Mgb2Ygc3RhdGUgLSB0aGlzIGVuc3VyZXMgY2xlYW4gc2xhdGVcclxuXHRcdC8vIFJlbW92ZSBmcm9tIG91ciByZWZlcmVuY2VzIGZpcnN0XHJcblx0XHRpZiAodGhpcy50ZXJtaW5hbFJpYmJvbkljb24pIHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRpZiAodGhpcy50ZXJtaW5hbFJpYmJvbkljb24ucGFyZW50Tm9kZSkge1xyXG5cdFx0XHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvbkljb24ucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBTaWxlbnRseSBoYW5kbGUgZXJyb3JzXHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvbkljb24gPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAodGhpcy5jb25maWdSaWJib25JY29uKSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0aWYgKHRoaXMuY29uZmlnUmliYm9uSWNvbi5wYXJlbnROb2RlKSB7XHJcblx0XHRcdFx0XHR0aGlzLmNvbmZpZ1JpYmJvbkljb24ucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBTaWxlbnRseSBoYW5kbGUgZXJyb3JzXHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5jb25maWdSaWJib25JY29uID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gU2VhcmNoIERPTSBhbmQgcmVtb3ZlIEFMTCBpbnN0YW5jZXMgb2Ygb3VyIGljb25zIChieSBhcmlhLWxhYmVsKVxyXG5cdFx0Ly8gVGhpcyBjYXRjaGVzIGFueSBpY29ucyB0aGF0IG1pZ2h0IGV4aXN0IGJ1dCBhcmVuJ3QgdHJhY2tlZFxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gQUxXQVlTIHJlbW92ZSBBTEwgdGVybWluYWwgaWNvbnMsIHJlZ2FyZGxlc3Mgb2Ygc2V0dGluZ3NcclxuXHRcdFx0Y29uc3QgdGVybWluYWxJY29ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlLWRvY2stcmliYm9uLWFjdGlvblthcmlhLWxhYmVsPVwiT3BlbiBwcm9qZWN0IHRlcm1pbmFsXCJdJyk7XHJcblx0XHRcdHRlcm1pbmFsSWNvbnMuZm9yRWFjaCgoaWNvbjogRWxlbWVudCkgPT4gaWNvbi5yZW1vdmUoKSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBTFdBWVMgcmVtb3ZlIEFMTCBjb25maWcgaWNvbnMsIHJlZ2FyZGxlc3Mgb2Ygc2V0dGluZ3NcclxuXHRcdFx0Y29uc3QgY29uZmlnSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1kb2NrLXJpYmJvbi1hY3Rpb25bYXJpYS1sYWJlbD1cIkVkaXQgYXN0cm8gY29uZmlnXCJdJyk7XHJcblx0XHRcdGNvbmZpZ0ljb25zLmZvckVhY2goKGljb246IEVsZW1lbnQpID0+IGljb24ucmVtb3ZlKCkpO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdC8vIFNpbGVudGx5IGhhbmRsZSBlcnJvcnNcclxuXHRcdH1cclxuXHJcblx0XHQvLyBOb3cgYWRkIG9ubHkgdGhlIGljb25zIHRoYXQgc2hvdWxkIGV4aXN0XHJcblx0XHRpZiAodGVybWluYWxTaG91bGRFeGlzdCkge1xyXG5cdFx0XHQvLyBPbmx5IGFkZCBpZiBpY29uIGRvZXNuJ3QgZXhpc3QgaW4gRE9NXHJcblx0XHRcdGNvbnN0IGV4aXN0aW5nVGVybWluYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZS1kb2NrLXJpYmJvbi1hY3Rpb25bYXJpYS1sYWJlbD1cIk9wZW4gcHJvamVjdCB0ZXJtaW5hbFwiXScpO1xyXG5cdFx0XHRpZiAoIWV4aXN0aW5nVGVybWluYWwpIHtcclxuXHRcdFx0XHR0aGlzLnRlcm1pbmFsUmliYm9uSWNvbiA9IHRoaXMuYWRkUmliYm9uSWNvbigndGVybWluYWwtc3F1YXJlJywgJ09wZW4gcHJvamVjdCB0ZXJtaW5hbCcsICgpID0+IHtcclxuXHRcdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kKSB7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJPcGVuIHRlcm1pbmFsIGNvbW1hbmQgaXMgZGlzYWJsZWQuIEVuYWJsZSBpdCBpbiBzZXR0aW5ncyB0byB1c2UgdGhpcyBjb21tYW5kLlwiKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0b3BlblRlcm1pbmFsSW5Qcm9qZWN0Um9vdCh0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Ly8gQWRkIGRhdGEgYXR0cmlidXRlIHRvIGlkZW50aWZ5IG91ciBpY29uXHJcblx0XHRcdFx0aWYgKHRoaXMudGVybWluYWxSaWJib25JY29uKSB7XHJcblx0XHRcdFx0XHR0aGlzLnRlcm1pbmFsUmliYm9uSWNvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtYXN0cm8tY29tcG9zZXItdGVybWluYWwtcmliYm9uJywgJ3RydWUnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvbkljb24gPSBleGlzdGluZ1Rlcm1pbmFsIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBJbW1lZGlhdGVseSBjaGVjayBhbmQgcmVtb3ZlIGNvbmZpZyBpY29uIGlmIGl0IHdhcyByZS1hZGRlZFxyXG5cdFx0XHRpZiAoIWNvbmZpZ1Nob3VsZEV4aXN0KSB7XHJcblx0XHRcdFx0Y29uc3QgY29uZmlnSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1kb2NrLXJpYmJvbi1hY3Rpb25bYXJpYS1sYWJlbD1cIkVkaXQgYXN0cm8gY29uZmlnXCJdJyk7XHJcblx0XHRcdFx0aWYgKGNvbmZpZ0ljb25zLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdGNvbmZpZ0ljb25zLmZvckVhY2goKGljb246IEVsZW1lbnQpID0+IGljb24ucmVtb3ZlKCkpO1xyXG5cdFx0XHRcdFx0dGhpcy5jb25maWdSaWJib25JY29uID0gbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMudGVybWluYWxSaWJib25JY29uID0gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoY29uZmlnU2hvdWxkRXhpc3QpIHtcclxuXHRcdFx0Ly8gT25seSBhZGQgaWYgaWNvbiBkb2Vzbid0IGV4aXN0IGluIERPTVxyXG5cdFx0XHRjb25zdCBleGlzdGluZ0NvbmZpZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlLWRvY2stcmliYm9uLWFjdGlvblthcmlhLWxhYmVsPVwiRWRpdCBhc3RybyBjb25maWdcIl0nKTtcclxuXHRcdFx0aWYgKCFleGlzdGluZ0NvbmZpZykge1xyXG5cdFx0XHRcdHRoaXMuY29uZmlnUmliYm9uSWNvbiA9IHRoaXMuYWRkUmliYm9uSWNvbignd3JlbmNoJywgJ0VkaXQgYXN0cm8gY29uZmlnJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZU9wZW5Db25maWdGaWxlQ29tbWFuZCkge1xyXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiRWRpdCBjb25maWcgZmlsZSBjb21tYW5kIGlzIGRpc2FibGVkLiBFbmFibGUgaXQgaW4gc2V0dGluZ3MgdG8gdXNlIHRoaXMgY29tbWFuZC5cIik7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGF3YWl0IG9wZW5Db25maWdGaWxlKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHQvLyBBZGQgZGF0YSBhdHRyaWJ1dGUgdG8gaWRlbnRpZnkgb3VyIGljb25cclxuXHRcdFx0XHRpZiAodGhpcy5jb25maWdSaWJib25JY29uKSB7XHJcblx0XHRcdFx0XHR0aGlzLmNvbmZpZ1JpYmJvbkljb24uc2V0QXR0cmlidXRlKCdkYXRhLWFzdHJvLWNvbXBvc2VyLWNvbmZpZy1yaWJib24nLCAndHJ1ZScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmNvbmZpZ1JpYmJvbkljb24gPSBleGlzdGluZ0NvbmZpZyBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSW1tZWRpYXRlbHkgY2hlY2sgYW5kIHJlbW92ZSB0ZXJtaW5hbCBpY29uIGlmIGl0IHdhcyByZS1hZGRlZFxyXG5cdFx0XHRpZiAoIXRlcm1pbmFsU2hvdWxkRXhpc3QpIHtcclxuXHRcdFx0XHRjb25zdCB0ZXJtaW5hbEljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpZGUtZG9jay1yaWJib24tYWN0aW9uW2FyaWEtbGFiZWw9XCJPcGVuIHByb2plY3QgdGVybWluYWxcIl0nKTtcclxuXHRcdFx0XHRpZiAodGVybWluYWxJY29ucy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHR0ZXJtaW5hbEljb25zLmZvckVhY2goKGljb246IEVsZW1lbnQpID0+IGljb24ucmVtb3ZlKCkpO1xyXG5cdFx0XHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvbkljb24gPSBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5jb25maWdSaWJib25JY29uID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gVXBkYXRlIGNvbnRleHQgbWVudSBoYW5kbGluZyBhZnRlciBpY29ucyBhcmUgcmVnaXN0ZXJlZFxyXG5cdFx0dGhpcy51cGRhdGVSaWJib25Db250ZXh0TWVudUNTUygpO1xyXG5cdFx0dGhpcy5zZXR1cFJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXIoKTtcclxuXHRcdFxyXG5cdFx0Ly8gRmluYWwgY2xlYW51cCBwYXNzIC0gZW5zdXJlIG5vIHVud2FudGVkIGljb25zIGV4aXN0IGluIERPTVxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGlmICghdGVybWluYWxTaG91bGRFeGlzdCkge1xyXG5cdFx0XHRcdGNvbnN0IHRlcm1pbmFsSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1kb2NrLXJpYmJvbi1hY3Rpb25bYXJpYS1sYWJlbD1cIk9wZW4gcHJvamVjdCB0ZXJtaW5hbFwiXScpO1xyXG5cdFx0XHRcdHRlcm1pbmFsSWNvbnMuZm9yRWFjaCgoaWNvbjogRWxlbWVudCkgPT4gaWNvbi5yZW1vdmUoKSk7XHJcblx0XHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvbkljb24gPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghY29uZmlnU2hvdWxkRXhpc3QpIHtcclxuXHRcdFx0XHRjb25zdCBjb25maWdJY29ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlLWRvY2stcmliYm9uLWFjdGlvblthcmlhLWxhYmVsPVwiRWRpdCBhc3RybyBjb25maWdcIl0nKTtcclxuXHRcdFx0XHRjb25maWdJY29ucy5mb3JFYWNoKChpY29uOiBFbGVtZW50KSA9PiBpY29uLnJlbW92ZSgpKTtcclxuXHRcdFx0XHR0aGlzLmNvbmZpZ1JpYmJvbkljb24gPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9LCAxMDApO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHQvLyBDbGVhbiB1cCByaWJib24gaWNvbnNcclxuXHRcdGlmICh0aGlzLnRlcm1pbmFsUmliYm9uSWNvbikge1xyXG5cdFx0XHR0aGlzLnRlcm1pbmFsUmliYm9uSWNvbi5yZW1vdmUoKTtcclxuXHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvbkljb24gPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuY29uZmlnUmliYm9uSWNvbikge1xyXG5cdFx0XHR0aGlzLmNvbmZpZ1JpYmJvbkljb24ucmVtb3ZlKCk7XHJcblx0XHRcdHRoaXMuY29uZmlnUmliYm9uSWNvbiA9IG51bGw7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIENsZWFudXAgcmliYm9uIGNvbnRleHQgbWVudSBoYW5kbGluZ1xyXG5cdFx0aWYgKHRoaXMucmliYm9uQ29udGV4dE1lbnVPYnNlcnZlcikge1xyXG5cdFx0XHR0aGlzLnJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0XHR0aGlzLnJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXIgPSB1bmRlZmluZWQ7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFJlbW92ZSBDU1MgY2xhc3Nlc1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcygnYXN0cm8tY29tcG9zZXItaGlkZS10ZXJtaW5hbC1pY29uJyk7XHJcblx0XHRkb2N1bWVudC5ib2R5LnJlbW92ZUNsYXNzKCdhc3Ryby1jb21wb3Nlci1oaWRlLWNvbmZpZy1pY29uJyk7XHJcblxyXG5cdFx0Ly8gQ2xlYW51cCBoZWxwIGJ1dHRvbiByZXBsYWNlbWVudFxyXG5cdFx0aWYgKHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyKSB7XHJcblx0XHRcdHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdFx0dGhpcy5oZWxwQnV0dG9uT2JzZXJ2ZXIgPSB1bmRlZmluZWQ7XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdGlmICh0aGlzLmN1c3RvbUhlbHBCdXR0b24pIHtcclxuXHRcdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uLnJlbW92ZSgpO1xyXG5cdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24gPSB1bmRlZmluZWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5oZWxwQnV0dG9uRWxlbWVudCA9IHVuZGVmaW5lZDtcclxuXHR9XHJcblxyXG5cdC8vIFJpYmJvbiBjb250ZXh0IG1lbnUgaGFuZGxpbmcgLSBiYXNlZCBvbiBBc3RybyBNb2R1bGFyIFNldHRpbmdzIGFwcHJvYWNoXHJcblx0cHJpdmF0ZSBzZXR1cFJpYmJvbkNvbnRleHRNZW51SGFuZGxpbmcoKSB7XHJcblx0XHR0aGlzLnVwZGF0ZVJpYmJvbkNvbnRleHRNZW51Q1NTKCk7XHJcblx0XHR0aGlzLnNldHVwUmliYm9uQ29udGV4dE1lbnVPYnNlcnZlcigpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB1cGRhdGVSaWJib25Db250ZXh0TWVudUNTUygpIHtcclxuXHRcdC8vIENoZWNrIGlmIGVpdGhlciBpY29uIHNob3VsZCBiZSBoaWRkZW5cclxuXHRcdGNvbnN0IHRlcm1pbmFsU2hvdWxkQmVIaWRkZW4gPSAhdGhpcy5zZXR0aW5ncy5lbmFibGVUZXJtaW5hbFJpYmJvbkljb24gfHwgIXRoaXMuc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZDtcclxuXHRcdGNvbnN0IGNvbmZpZ1Nob3VsZEJlSGlkZGVuID0gIXRoaXMuc2V0dGluZ3MuZW5hYmxlQ29uZmlnUmliYm9uSWNvbiB8fCAhdGhpcy5zZXR0aW5ncy5lbmFibGVPcGVuQ29uZmlnRmlsZUNvbW1hbmQ7XHJcblxyXG5cdFx0Ly8gVXNlIENTUyBjbGFzc2VzIG9uIGRvY3VtZW50IGJvZHkgdG8gY29udHJvbCB2aXNpYmlsaXR5XHJcblx0XHRpZiAodGVybWluYWxTaG91bGRCZUhpZGRlbikge1xyXG5cdFx0XHRkb2N1bWVudC5ib2R5LmFkZENsYXNzKCdhc3Ryby1jb21wb3Nlci1oaWRlLXRlcm1pbmFsLWljb24nKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoJ2FzdHJvLWNvbXBvc2VyLWhpZGUtdGVybWluYWwtaWNvbicpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoY29uZmlnU2hvdWxkQmVIaWRkZW4pIHtcclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5hZGRDbGFzcygnYXN0cm8tY29tcG9zZXItaGlkZS1jb25maWctaWNvbicpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcygnYXN0cm8tY29tcG9zZXItaGlkZS1jb25maWctaWNvbicpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzZXR1cFJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXIoKSB7XHJcblx0XHQvLyBEaXNjb25uZWN0IGV4aXN0aW5nIG9ic2VydmVyIGlmIGFueVxyXG5cdFx0aWYgKHRoaXMucmliYm9uQ29udGV4dE1lbnVPYnNlcnZlcikge1xyXG5cdFx0XHR0aGlzLnJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gaGlkZSBhbnkgaWNvbnNcclxuXHRcdGNvbnN0IHRlcm1pbmFsU2hvdWxkQmVIaWRkZW4gPSAhdGhpcy5zZXR0aW5ncy5lbmFibGVUZXJtaW5hbFJpYmJvbkljb24gfHwgIXRoaXMuc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZDtcclxuXHRcdGNvbnN0IGNvbmZpZ1Nob3VsZEJlSGlkZGVuID0gIXRoaXMuc2V0dGluZ3MuZW5hYmxlQ29uZmlnUmliYm9uSWNvbiB8fCAhdGhpcy5zZXR0aW5ncy5lbmFibGVPcGVuQ29uZmlnRmlsZUNvbW1hbmQ7XHJcblxyXG5cdFx0Ly8gT25seSBzZXQgdXAgb2JzZXJ2ZXIgaWYgYW55IGljb24gc2hvdWxkIGJlIGhpZGRlblxyXG5cdFx0aWYgKCF0ZXJtaW5hbFNob3VsZEJlSGlkZGVuICYmICFjb25maWdTaG91bGRCZUhpZGRlbikge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gV2F0Y2ggZm9yIGNvbnRleHQgbWVudSBjcmVhdGlvbiBhbmQgcmVtb3ZlIG91ciBpdGVtc1xyXG5cdFx0dGhpcy5yaWJib25Db250ZXh0TWVudU9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xyXG5cdFx0XHRmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykge1xyXG5cdFx0XHRcdGlmIChtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdC8vIENoZWNrIGlmIGEgbWVudSB3YXMgYWRkZWRcclxuXHRcdFx0XHRcdGZvciAoY29uc3Qgbm9kZSBvZiBBcnJheS5mcm9tKG11dGF0aW9uLmFkZGVkTm9kZXMpKSB7XHJcblx0XHRcdFx0XHRcdGlmIChub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBpdCdzIGEgbWVudVxyXG5cdFx0XHRcdFx0XHRcdGlmIChub2RlLmNsYXNzTGlzdC5jb250YWlucygnbWVudScpIHx8IG5vZGUucXVlcnlTZWxlY3RvcignLm1lbnUnKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW1vdmVSaWJib25JY29uc0Zyb21Db250ZXh0TWVudShub2RlKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIE9ic2VydmUgdGhlIGRvY3VtZW50IGJvZHkgZm9yIG1lbnUgYWRkaXRpb25zXHJcblx0XHR0aGlzLnJpYmJvbkNvbnRleHRNZW51T2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XHJcblx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcclxuXHRcdFx0c3VidHJlZTogdHJ1ZSxcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB1cGRhdGVIZWxwQnV0dG9uQ1NTKCkge1xyXG5cdFx0Ly8gVXNlIENTUyBjbGFzcyBvbiBkb2N1bWVudCBib2R5IHRvIGNvbnRyb2wgdmlzaWJpbGl0eVxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XHJcblx0XHRcdGRvY3VtZW50LmJvZHkuYWRkQ2xhc3MoJ2FzdHJvLWNvbXBvc2VyLWhpZGUtaGVscC1idXR0b24nKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoJ2FzdHJvLWNvbXBvc2VyLWhpZGUtaGVscC1idXR0b24nKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBhc3luYyB1cGRhdGVIZWxwQnV0dG9uKCkge1xyXG5cdFx0Ly8gSGVscCBidXR0b24gcmVwbGFjZW1lbnQgaXMgZGVza3RvcC1vbmx5IChub3QgYXZhaWxhYmxlIG9uIG1vYmlsZSlcclxuXHRcdGlmIChQbGF0Zm9ybS5pc01vYmlsZSkge1xyXG5cdFx0XHQvLyBDbGVhbiB1cCBhbnkgZXhpc3RpbmcgaGVscCBidXR0b24gcmVwbGFjZW1lbnQgb24gbW9iaWxlXHJcblx0XHRcdHRoaXMucmVzdG9yZUhlbHBCdXR0b24oKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFRlbXBvcmFyaWx5IGRpc2Nvbm5lY3Qgb2JzZXJ2ZXIgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xyXG5cdFx0aWYgKHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyKSB7XHJcblx0XHRcdHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBFbnN1cmUgd2UgaGF2ZSB0aGUgbGF0ZXN0IHNldHRpbmdzXHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdC8vIFVwZGF0ZSBDU1MgZmlyc3QgKHRoaXMgd2lsbCBoaWRlIHRoZSBoZWxwIGJ1dHRvbiBnbG9iYWxseSlcclxuXHRcdHRoaXMudXBkYXRlSGVscEJ1dHRvbkNTUygpO1xyXG5cclxuXHRcdC8vIENoZWNrIGlmIHJlcGxhY2VtZW50IGlzIGVuYWJsZWRcclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcclxuXHRcdFx0dGhpcy5yZXN0b3JlSGVscEJ1dHRvbigpO1xyXG5cdFx0XHQvLyBTdGlsbCBzZXQgdXAgb2JzZXJ2ZXIgaW4gY2FzZSB1c2VyIGVuYWJsZXMgaXQgbGF0ZXJcclxuXHRcdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25PYnNlcnZlcigpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRmluZCB0aGUgaGVscCBidXR0b25cclxuXHRcdGNvbnN0IHZhdWx0QWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2UtZHJhd2VyLXZhdWx0LWFjdGlvbnMnKTtcclxuXHRcdGlmICghdmF1bHRBY3Rpb25zKSB7XHJcblx0XHRcdC8vIFZhdWx0IGFjdGlvbnMgbm90IGZvdW5kIHlldCAtIHNldCB1cCBvYnNlcnZlciB0byBjYXRjaCBpdCB3aGVuIGl0IGFwcGVhcnNcclxuXHRcdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25PYnNlcnZlcigpO1xyXG5cdFx0XHQvLyBBbHNvIHJldHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXlcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XHJcblx0XHRcdFx0XHR2b2lkIHRoaXMudXBkYXRlSGVscEJ1dHRvbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgNTAwKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZpbmQgdGhlIGhlbHAgYnV0dG9uIC0gaXQncyB0aGUgZmlyc3QgY2xpY2thYmxlLWljb24gdGhhdCBjb250YWlucyBhbiBTVkcgd2l0aCBjbGFzcyBcImhlbHBcIlxyXG5cdFx0Y29uc3QgY2xpY2thYmxlSWNvbnMgPSBBcnJheS5mcm9tKHZhdWx0QWN0aW9ucy5xdWVyeVNlbGVjdG9yQWxsKCcuY2xpY2thYmxlLWljb24nKSk7XHJcblx0XHRsZXQgaGVscEJ1dHRvbjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRcdFxyXG5cdFx0Zm9yIChjb25zdCBpY29uIG9mIGNsaWNrYWJsZUljb25zKSB7XHJcblx0XHRcdGNvbnN0IHN2ZyA9IGljb24ucXVlcnlTZWxlY3Rvcignc3ZnLmhlbHAnKTtcclxuXHRcdFx0aWYgKHN2Zykge1xyXG5cdFx0XHRcdGhlbHBCdXR0b24gPSBpY29uIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICghaGVscEJ1dHRvbikge1xyXG5cdFx0XHQvLyBIZWxwIGJ1dHRvbiBub3QgZm91bmQgeWV0IC0gc2V0IHVwIG9ic2VydmVyIHRvIGNhdGNoIGl0IHdoZW4gaXQgYXBwZWFyc1xyXG5cdFx0XHR0aGlzLnNldHVwSGVscEJ1dHRvbk9ic2VydmVyKCk7XHJcblx0XHRcdC8vIEFsc28gcmV0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheVxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcclxuXHRcdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVIZWxwQnV0dG9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCA1MDApO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU3RvcmUgcmVmZXJlbmNlIHRvIHRoZSBidXR0b25cclxuXHRcdHRoaXMuaGVscEJ1dHRvbkVsZW1lbnQgPSBoZWxwQnV0dG9uO1xyXG5cclxuXHRcdC8vIFJlbW92ZSBleGlzdGluZyBjdXN0b20gYnV0dG9uIGlmIGl0IGV4aXN0cyAoYWx3YXlzIHJlY3JlYXRlIHRvIHVwZGF0ZSBpY29uL2NvbW1hbmQpXHJcblx0XHQvLyBDaGVjayBpZiBpdCdzIGFjdHVhbGx5IGluIHRoZSBET00gYW5kIGhhcyBvdXIgaWRlbnRpZmllciBiZWZvcmUgdHJ5aW5nIHRvIHJlbW92ZSBpdFxyXG5cdFx0aWYgKHRoaXMuY3VzdG9tSGVscEJ1dHRvbiAmJiBcclxuXHRcdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uLnBhcmVudEVsZW1lbnQgJiYgXHJcblx0XHRcdGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5jdXN0b21IZWxwQnV0dG9uKSAmJlxyXG5cdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24uaGFzQXR0cmlidXRlKCdkYXRhLWFzdHJvLWNvbXBvc2VyLWhlbHAtcmVwbGFjZW1lbnQnKSkge1xyXG5cdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24ucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24gPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGEgbmV3IGN1c3RvbSBidXR0b25cclxuXHRcdGNvbnN0IGN1c3RvbUJ1dHRvbiA9IGhlbHBCdXR0b24uY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0Y3VzdG9tQnV0dG9uLmFkZENsYXNzKFwiYXN0cm8tY29tcG9zZXItaGVscC1yZXBsYWNlbWVudFwiKTtcclxuXHRcdGN1c3RvbUJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTsgLy8gUmVtb3ZlIGFueSBleGlzdGluZyBhcmlhLWxhYmVsXHJcblx0XHRcclxuXHRcdC8vIEFkZCB1bmlxdWUgaWRlbnRpZmllciB0byBhdm9pZCBjb25mbGljdHMgd2l0aCBvdGhlciBwbHVnaW5zXHJcblx0XHRjdXN0b21CdXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLWFzdHJvLWNvbXBvc2VyLWhlbHAtcmVwbGFjZW1lbnQnLCAndHJ1ZScpO1xyXG5cdFx0Y3VzdG9tQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FzdHJvLWNvbXBvc2VyLWhlbHAtcmVwbGFjZW1lbnQnKTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2xlYXIgYW55IGV4aXN0aW5nIGNsaWNrIGhhbmRsZXJzXHJcblx0XHRjdXN0b21CdXR0b24ub25jbGljayA9IG51bGw7XHJcblx0XHRcclxuXHRcdC8vIFJlcGxhY2UgdGhlIGljb24gdXNpbmcgT2JzaWRpYW4ncyBzZXRJY29uIGZ1bmN0aW9uXHJcblx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gY3VzdG9tQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpPy5wYXJlbnRFbGVtZW50IHx8IGN1c3RvbUJ1dHRvbjtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGlmIChpY29uQ29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuXHRcdFx0XHRzZXRJY29uKGljb25Db250YWluZXIsIHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Lmljb25JZCk7XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUud2FybignW0FzdHJvIENvbXBvc2VyXSBFcnJvciBzZXR0aW5nIGljb246JywgZXJyb3IpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFkZCBvdXIgY3VzdG9tIGNsaWNrIGhhbmRsZXJcclxuXHRcdGN1c3RvbUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5jb21tYW5kSWQ7XHJcblx0XHRcdGlmIChjb21tYW5kSWQpIHtcclxuXHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBhcHBXaXRoQ29tbWFuZHMgPSB0aGlzLmFwcCBhcyB1bmtub3duIGFzIHsgY29tbWFuZHM/OiB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0gfTtcclxuXHRcdFx0XHRcdFx0aWYgKGFwcFdpdGhDb21tYW5kcy5jb21tYW5kcz8uZXhlY3V0ZUNvbW1hbmRCeUlkKSB7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgYXBwV2l0aENvbW1hbmRzLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChjb21tYW5kSWQpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ1tBc3RybyBDb21wb3Nlcl0gRXJyb3IgZXhlY3V0aW5nIGNvbW1hbmQ6JywgZXJyb3IpO1xyXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBGYWlsZWQgdG8gZXhlY3V0ZSBjb21tYW5kOiAke2NvbW1hbmRJZH1gKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCB0cnVlKTsgLy8gVXNlIGNhcHR1cmUgcGhhc2UgdG8gZW5zdXJlIHdlIGhhbmRsZSBpdCBmaXJzdFxyXG5cclxuXHRcdC8vIEluc2VydCB0aGUgY3VzdG9tIGJ1dHRvbiBpbiB0aGUgc2FtZSBwb3NpdGlvbiBhcyB0aGUgaGVscCBidXR0b24gKGJlZm9yZSBpdClcclxuXHRcdC8vIFRoaXMgZW5zdXJlcyBpdCB0YWtlcyB0aGUgaGVscCBidXR0b24ncyBwb3NpdGlvbiB3aXRob3V0IGFmZmVjdGluZyBvdGhlciBidXR0b25zXHJcblx0XHRoZWxwQnV0dG9uLnBhcmVudEVsZW1lbnQ/Lmluc2VydEJlZm9yZShjdXN0b21CdXR0b24sIGhlbHBCdXR0b24pO1xyXG5cdFx0XHJcblx0XHQvLyBTdG9yZSByZWZlcmVuY2UgdG8gY3VzdG9tIGJ1dHRvblxyXG5cdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uID0gY3VzdG9tQnV0dG9uO1xyXG5cclxuXHRcdC8vIFNldCB1cCBvYnNlcnZlciBhZnRlciBhIGRlbGF5IHRvIHdhdGNoIGZvciBjaGFuZ2VzXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XHJcblx0XHRcdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25PYnNlcnZlcigpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCAxMDAwKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2V0dXBIZWxwQnV0dG9uT2JzZXJ2ZXIoKSB7XHJcblx0XHQvLyBEaXNjb25uZWN0IGV4aXN0aW5nIG9ic2VydmVyIGlmIGFueVxyXG5cdFx0aWYgKHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyKSB7XHJcblx0XHRcdHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBPbmx5IHNldCB1cCBvYnNlcnZlciBpZiByZXBsYWNlbWVudCBpcyBlbmFibGVkXHJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBXYXRjaCBmb3IgY2hhbmdlcyB0byB0aGUgdmF1bHQgcHJvZmlsZSBhcmVhIG9ubHkgKG1vcmUgdGFyZ2V0ZWQpXHJcblx0XHRsZXQgdXBkYXRlVGltZW91dDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcblx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcclxuXHRcdFx0Ly8gRGVib3VuY2UgdXBkYXRlcyB0byBwcmV2ZW50IGluZmluaXRlIGxvb3BzXHJcblx0XHRcdGlmICh1cGRhdGVUaW1lb3V0KSB7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHVwZGF0ZVRpbWVvdXQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHVwZGF0ZVRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgaGVscCBidXR0b24gd2FzIHJlY3JlYXRlZCAoQ1NTIHdpbGwgaGlkZSBpdCwgYnV0IHdlIG5lZWQgdG8gaW5qZWN0IG91ciBjdXN0b20gYnV0dG9uKVxyXG5cdFx0XHRcdGNvbnN0IHZhdWx0QWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2UtZHJhd2VyLXZhdWx0LWFjdGlvbnMnKTtcclxuXHRcdFx0XHRpZiAoIXZhdWx0QWN0aW9ucykgcmV0dXJuO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHQvLyBDaGVjayBpZiB3ZSBoYXZlIGEgY3VzdG9tIGJ1dHRvbiBBTkQgaXQncyBzdGlsbCBpbiB0aGUgRE9NXHJcblx0XHRcdC8vIFRoZSByZWZlcmVuY2UgbWlnaHQgZXhpc3QgYnV0IHRoZSBidXR0b24gY291bGQgaGF2ZSBiZWVuIHJlbW92ZWRcclxuXHRcdFx0Ly8gQWxzbyB2ZXJpZnkgaXQgaGFzIG91ciB1bmlxdWUgaWRlbnRpZmllciB0byBhdm9pZCBjb25mbGljdHMgd2l0aCBvdGhlciBwbHVnaW5zXHJcblx0XHRcdGNvbnN0IGN1c3RvbUJ1dHRvbkV4aXN0cyA9IHRoaXMuY3VzdG9tSGVscEJ1dHRvbiAmJiBcclxuXHRcdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24ucGFyZW50RWxlbWVudCAmJiBcclxuXHRcdFx0XHRkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuY3VzdG9tSGVscEJ1dHRvbikgJiZcclxuXHRcdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24uaGFzQXR0cmlidXRlKCdkYXRhLWFzdHJvLWNvbXBvc2VyLWhlbHAtcmVwbGFjZW1lbnQnKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICghY3VzdG9tQnV0dG9uRXhpc3RzKSB7XHJcblx0XHRcdFx0Ly8gQ2xlYXIgc3RhbGUgcmVmZXJlbmNlIGlmIGJ1dHRvbiB3YXMgcmVtb3ZlZCBvciBkb2Vzbid0IGhhdmUgb3VyIGlkZW50aWZpZXJcclxuXHRcdFx0XHRpZiAodGhpcy5jdXN0b21IZWxwQnV0dG9uICYmICghZG9jdW1lbnQuYm9keS5jb250YWlucyh0aGlzLmN1c3RvbUhlbHBCdXR0b24pIHx8IFxyXG5cdFx0XHRcdFx0IXRoaXMuY3VzdG9tSGVscEJ1dHRvbi5oYXNBdHRyaWJ1dGUoJ2RhdGEtYXN0cm8tY29tcG9zZXItaGVscC1yZXBsYWNlbWVudCcpKSkge1xyXG5cdFx0XHRcdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR2b2lkIHRoaXMudXBkYXRlSGVscEJ1dHRvbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdH0sIDEwMCk7IC8vIFNob3J0ZXIgZGVib3VuY2UgZm9yIGJldHRlciByZXNwb25zaXZlbmVzc1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gT2JzZXJ2ZSB0aGUgdmF1bHQgYWN0aW9ucyBhcmVhIG1vcmUgc3BlY2lmaWNhbGx5XHJcblx0XHRjb25zdCB2YXVsdEFjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLWRyYXdlci12YXVsdC1hY3Rpb25zJyk7XHJcblx0XHRpZiAodmF1bHRBY3Rpb25zKSB7XHJcblx0XHRcdHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyLm9ic2VydmUodmF1bHRBY3Rpb25zLCB7XHJcblx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxyXG5cdFx0XHRcdHN1YnRyZWU6IHRydWUsIC8vIFdhdGNoIHN1YnRyZWUgdG8gY2F0Y2ggd2hlbiBidXR0b25zIGFyZSByZWNyZWF0ZWRcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEFsc28gb2JzZXJ2ZSB0aGUgcGFyZW50IHZhdWx0IHByb2ZpbGUgYXJlYVxyXG5cdFx0Y29uc3QgdmF1bHRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zaWRlZG9jay12YXVsdC1wcm9maWxlJyk7XHJcblx0XHRpZiAodmF1bHRQcm9maWxlKSB7XHJcblx0XHRcdHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyLm9ic2VydmUodmF1bHRQcm9maWxlLCB7XHJcblx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxyXG5cdFx0XHRcdHN1YnRyZWU6IHRydWUsIC8vIFdhdGNoIHN1YnRyZWUgdG8gY2F0Y2ggd2hlbiB2YXVsdCBhY3Rpb25zIGFyZSBhZGRlZFxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGYWxsYmFjazogb2JzZXJ2ZSB0aGUgd29ya3NwYWNlIGNvbnRhaW5lciBpZiBzcGVjaWZpYyBlbGVtZW50cyBkb24ndCBleGlzdCB5ZXRcclxuXHRcdC8vIFRoaXMgZW5zdXJlcyB3ZSBjYXRjaCB0aGUgYnV0dG9uIHdoZW4gaXQgZmlyc3QgYXBwZWFyc1xyXG5cdFx0aWYgKCF2YXVsdEFjdGlvbnMgJiYgIXZhdWx0UHJvZmlsZSkge1xyXG5cdFx0XHRjb25zdCB3b3Jrc3BhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXNwbGl0Jyk7XHJcblx0XHRcdGlmICh3b3Jrc3BhY2UpIHtcclxuXHRcdFx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlci5vYnNlcnZlKHdvcmtzcGFjZSwge1xyXG5cdFx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxyXG5cdFx0XHRcdFx0c3VidHJlZTogdHJ1ZSxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBMYXN0IHJlc29ydDogb2JzZXJ2ZSBkb2N1bWVudCBib2R5IChidXQgd2l0aCBtb3JlIHNwZWNpZmljIGNoZWNrcylcclxuXHRcdFx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcclxuXHRcdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcclxuXHRcdFx0XHRcdHN1YnRyZWU6IHRydWUsXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVzdG9yZUhlbHBCdXR0b24oKSB7XHJcblx0XHQvLyBSZW1vdmUgQ1NTIGNsYXNzIHRoYXQgaGlkZXMgaGVscCBidXR0b25cclxuXHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoJ2FzdHJvLWNvbXBvc2VyLWhpZGUtaGVscC1idXR0b24nKTtcclxuXHJcblx0XHQvLyBSZW1vdmUgdGhlIGN1c3RvbSBidXR0b25cclxuXHRcdGlmICh0aGlzLmN1c3RvbUhlbHBCdXR0b24pIHtcclxuXHRcdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uLnJlbW92ZSgpO1xyXG5cdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24gPSB1bmRlZmluZWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2xlYXIgc3RvcmVkIHJlZmVyZW5jZXNcclxuXHRcdHRoaXMuaGVscEJ1dHRvbkVsZW1lbnQgPSB1bmRlZmluZWQ7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbW92ZVJpYmJvbkljb25zRnJvbUNvbnRleHRNZW51KG1lbnVFbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG5cdFx0Y29uc3QgdGVybWluYWxTaG91bGRCZUhpZGRlbiA9ICF0aGlzLnNldHRpbmdzLmVuYWJsZVRlcm1pbmFsUmliYm9uSWNvbiB8fCAhdGhpcy5zZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kO1xyXG5cdFx0Y29uc3QgY29uZmlnU2hvdWxkQmVIaWRkZW4gPSAhdGhpcy5zZXR0aW5ncy5lbmFibGVDb25maWdSaWJib25JY29uIHx8ICF0aGlzLnNldHRpbmdzLmVuYWJsZU9wZW5Db25maWdGaWxlQ29tbWFuZDtcclxuXHJcblx0XHQvLyBGaW5kIGFsbCBtZW51IGl0ZW1zXHJcblx0XHRjb25zdCBtZW51SXRlbXMgPSBtZW51RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudS1pdGVtJyk7XHJcblx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgQXJyYXkuZnJvbShtZW51SXRlbXMpKSB7XHJcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgbWVudSBpdGVtIGNvbnRhaW5zIG91ciBpY29uc1xyXG5cdFx0XHRjb25zdCBzdmcgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xyXG5cdFx0XHRpZiAoc3ZnKSB7XHJcblx0XHRcdFx0Y29uc3QgaWNvbk5hbWUgPSBzdmcuZ2V0QXR0cmlidXRlKCdkYXRhLWx1Y2lkZScpIHx8IFxyXG5cdFx0XHRcdFx0c3ZnLmdldEF0dHJpYnV0ZSgneG1sbnM6bHVjaWRlJykgfHxcclxuXHRcdFx0XHRcdChzdmcuY2xhc3NMaXN0LmNvbnRhaW5zKCdsdWNpZGUtdGVybWluYWwtc3F1YXJlJykgPyAndGVybWluYWwtc3F1YXJlJyA6IG51bGwpIHx8XHJcblx0XHRcdFx0XHQoc3ZnLmNsYXNzTGlzdC5jb250YWlucygnbHVjaWRlLXdyZW5jaCcpID8gJ3dyZW5jaCcgOiBudWxsKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBSZW1vdmUgdGVybWluYWwgaWNvbiBpZiBpdCBzaG91bGQgYmUgaGlkZGVuXHJcblx0XHRcdFx0aWYgKHRlcm1pbmFsU2hvdWxkQmVIaWRkZW4gJiYgaWNvbk5hbWUgPT09ICd0ZXJtaW5hbC1zcXVhcmUnKSB7XHJcblx0XHRcdFx0XHRjb25zdCBpdGVtVGV4dCA9IGl0ZW0udGV4dENvbnRlbnQ/LnRvTG93ZXJDYXNlKCkgfHwgJyc7XHJcblx0XHRcdFx0XHRpZiAoaXRlbVRleHQuaW5jbHVkZXMoJ3Rlcm1pbmFsJykgfHwgaXRlbVRleHQuaW5jbHVkZXMoJ3Byb2plY3QgdGVybWluYWwnKSkge1xyXG5cdFx0XHRcdFx0XHRpdGVtLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBSZW1vdmUgY29uZmlnIGljb24gaWYgaXQgc2hvdWxkIGJlIGhpZGRlblxyXG5cdFx0XHRcdGlmIChjb25maWdTaG91bGRCZUhpZGRlbiAmJiBpY29uTmFtZSA9PT0gJ3dyZW5jaCcpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGl0ZW1UZXh0ID0gaXRlbS50ZXh0Q29udGVudD8udG9Mb3dlckNhc2UoKSB8fCAnJztcclxuXHRcdFx0XHRcdGlmIChpdGVtVGV4dC5pbmNsdWRlcygnY29uZmlnJykgfHwgaXRlbVRleHQuaW5jbHVkZXMoJ2FzdHJvIGNvbmZpZycpKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW0ucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBc3Ryb0NvbXBvc2VyU2V0dGluZ3Mge1xyXG5cdGRlZmF1bHRUZW1wbGF0ZTogc3RyaW5nOyAvLyBLZXB0IHRlbXBvcmFyaWx5IGZvciBtaWdyYXRpb25cclxuXHRhdXRvSW5zZXJ0UHJvcGVydGllczogYm9vbGVhbjtcclxuXHRkYXRlRm9ybWF0OiBzdHJpbmc7XHJcblx0ZW5hYmxlQ29weUhlYWRpbmdMaW5rOiBib29sZWFuO1xyXG5cdGNvcHlIZWFkaW5nTGlua0Zvcm1hdDogXCJvYnNpZGlhblwiIHwgXCJhc3Ryb1wiO1xyXG5cdGFkZFRyYWlsaW5nU2xhc2hUb0xpbmtzOiBib29sZWFuO1xyXG5cdGVuYWJsZU9wZW5UZXJtaW5hbENvbW1hbmQ6IGJvb2xlYW47XHJcblx0dGVybWluYWxQcm9qZWN0Um9vdFBhdGg6IHN0cmluZztcclxuXHR0ZXJtaW5hbEFwcGxpY2F0aW9uTmFtZTogc3RyaW5nO1xyXG5cdGVuYWJsZVRlcm1pbmFsRGVidWdMb2dnaW5nOiBib29sZWFuO1xyXG5cdGVuYWJsZVRlcm1pbmFsUmliYm9uSWNvbjogYm9vbGVhbjtcclxuXHRlbmFibGVPcGVuQ29uZmlnRmlsZUNvbW1hbmQ6IGJvb2xlYW47XHJcblx0Y29uZmlnRmlsZVBhdGg6IHN0cmluZztcclxuXHRlbmFibGVDb25maWdSaWJib25JY29uOiBib29sZWFuO1xyXG5cdGNvbnRlbnRUeXBlczogQ29udGVudFR5cGVbXTtcclxuXHRoZWxwQnV0dG9uUmVwbGFjZW1lbnQ6IEhlbHBCdXR0b25SZXBsYWNlbWVudFNldHRpbmdzO1xyXG5cdG1pZ3JhdGlvbkNvbXBsZXRlZDogYm9vbGVhbjtcclxuXHRzaG93TWR4RmlsZXNJbkV4cGxvcmVyOiBib29sZWFuO1xyXG5cdC8vIExlZ2FjeSBmaWVsZHMgKGtlcHQgZm9yIG1pZ3JhdGlvbiwgaWdub3JlZCBhZnRlciBtaWdyYXRpb24pXHJcblx0ZW5hYmxlVW5kZXJzY29yZVByZWZpeD86IGJvb2xlYW47XHJcblx0cG9zdHNGb2xkZXI/OiBzdHJpbmc7XHJcblx0cG9zdHNMaW5rQmFzZVBhdGg/OiBzdHJpbmc7XHJcblx0YXV0b21hdGVQb3N0Q3JlYXRpb24/OiBib29sZWFuO1xyXG5cdGNyZWF0aW9uTW9kZT86IFwiZmlsZVwiIHwgXCJmb2xkZXJcIjtcclxuXHRpbmRleEZpbGVOYW1lPzogc3RyaW5nO1xyXG5cdGV4Y2x1ZGVkRGlyZWN0b3JpZXM/OiBzdHJpbmc7XHJcblx0b25seUF1dG9tYXRlSW5Qb3N0c0ZvbGRlcj86IGJvb2xlYW47XHJcblx0ZW5hYmxlUGFnZXM/OiBib29sZWFuO1xyXG5cdHBhZ2VzRm9sZGVyPzogc3RyaW5nO1xyXG5cdHBhZ2VzTGlua0Jhc2VQYXRoPzogc3RyaW5nO1xyXG5cdHBhZ2VzQ3JlYXRpb25Nb2RlPzogXCJmaWxlXCIgfCBcImZvbGRlclwiO1xyXG5cdHBhZ2VzSW5kZXhGaWxlTmFtZT86IHN0cmluZztcclxuXHRwYWdlVGVtcGxhdGU/OiBzdHJpbmc7XHJcblx0b25seUF1dG9tYXRlSW5QYWdlc0ZvbGRlcj86IGJvb2xlYW47XHJcblx0Y3VzdG9tQ29udGVudFR5cGVzPzogQ29udGVudFR5cGVbXTsgLy8gTGVnYWN5IG5hbWVcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBIZWxwQnV0dG9uUmVwbGFjZW1lbnRTZXR0aW5ncyB7XHJcblx0ZW5hYmxlZDogYm9vbGVhbjtcclxuXHRjb21tYW5kSWQ6IHN0cmluZztcclxuXHRpY29uSWQ6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRGcm9udG1hdHRlciB7XHJcblx0cHJvcGVydGllczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+O1xyXG5cdHByb3BlcnRpZXNUZXh0OiBzdHJpbmc7XHJcblx0cHJvcGVydGllc0VuZDogbnVtYmVyO1xyXG5cdGJvZHlDb250ZW50OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGVtcGxhdGVWYWx1ZXMge1xyXG5cdFtrZXk6IHN0cmluZ106IHN0cmluZ1tdIHwgc3RyaW5nO1xyXG59XHJcblxyXG4vLyBDb250ZW50VHlwZSBpcyBub3cganVzdCBhIHN0cmluZyBJRCAtIG5vIGRpc3RpbmN0aW9uIGJldHdlZW4gYnVpbHQtaW4gYW5kIGN1c3RvbSB0eXBlc1xyXG5leHBvcnQgdHlwZSBDb250ZW50VHlwZUlkID0gc3RyaW5nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDb250ZW50VHlwZSB7XHJcblx0aWQ6IHN0cmluZztcclxuXHRuYW1lOiBzdHJpbmc7XHJcblx0Zm9sZGVyOiBzdHJpbmc7XHJcblx0bGlua0Jhc2VQYXRoOiBzdHJpbmc7XHJcblx0dGVtcGxhdGU6IHN0cmluZztcclxuXHRlbmFibGVkOiBib29sZWFuO1xyXG5cdGNyZWF0aW9uTW9kZTogXCJmaWxlXCIgfCBcImZvbGRlclwiO1xyXG5cdGluZGV4RmlsZU5hbWU6IHN0cmluZztcclxuXHRpZ25vcmVTdWJmb2xkZXJzOiBib29sZWFuO1xyXG5cdGVuYWJsZVVuZGVyc2NvcmVQcmVmaXg6IGJvb2xlYW47XHJcblx0dXNlTWR4RXh0ZW5zaW9uOiBib29sZWFuO1xyXG5cdGNvbGxhcHNlZD86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmlsZUNyZWF0aW9uT3B0aW9ucyB7XHJcblx0ZmlsZTogVEZpbGU7XHJcblx0dGl0bGU6IHN0cmluZztcclxuXHR0eXBlOiBDb250ZW50VHlwZUlkOyAvLyBDb250ZW50IHR5cGUgSUQgKHN0cmluZylcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZW5hbWVPcHRpb25zIHtcclxuXHRmaWxlOiBURmlsZTtcclxuXHR0aXRsZTogc3RyaW5nO1xyXG5cdHR5cGU6IENvbnRlbnRUeXBlSWQ7IC8vIENvbnRlbnQgdHlwZSBJRCAoc3RyaW5nKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgS05PV05fQVJSQVlfS0VZUyA9IFsndGFncycsICdhbGlhc2VzJywgJ2Nzc2NsYXNzZXMnXSBhcyBjb25zdDtcclxuXHJcbmV4cG9ydCBjb25zdCBDT05TVEFOVFMgPSB7XHJcblx0REVCT1VOQ0VfTVM6IDUwMCxcclxuXHRTVEFUX01USU1FX1RIUkVTSE9MRDogMTAwMCxcclxuXHRFRElUT1JfU1RBQklMSVpFX0RFTEFZOiAxMDAsXHJcblx0RklMRV9FWFBMT1JFUl9SRVZFQUxfREVMQVk6IDIwMCxcclxufSBhcyBjb25zdDtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZSB7XHJcblx0c2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncztcclxuXHRzYXZlU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPjtcclxuXHRyZWdpc3RlckNyZWF0ZUV2ZW50KCk6IHZvaWQ7XHJcblx0cmVnaXN0ZXJSaWJib25JY29ucz8oKTogdm9pZDtcclxuXHR1cGRhdGVIZWxwQnV0dG9uPygpOiBQcm9taXNlPHZvaWQ+O1xyXG59IiwgImltcG9ydCB7IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyB9IGZyb20gXCIuL3R5cGVzXCI7XHJcblxyXG5leHBvcnQgdHlwZSB7IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyB9IGZyb20gXCIuL3R5cGVzXCI7XHJcbmV4cG9ydCB7IENPTlNUQU5UUyB9IGZyb20gXCIuL3R5cGVzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogQXN0cm9Db21wb3NlclNldHRpbmdzID0ge1xyXG5cdGRlZmF1bHRUZW1wbGF0ZTpcclxuXHRcdCctLS1cXG50aXRsZTogXCJ7e3RpdGxlfX1cIlxcbmRhdGU6IHt7ZGF0ZX19XFxudGFnczogW11cXG4tLS1cXG4nLFxyXG5cdGF1dG9JbnNlcnRQcm9wZXJ0aWVzOiB0cnVlLFxyXG5cdGRhdGVGb3JtYXQ6IFwiWVlZWS1NTS1ERFwiLFxyXG5cdGVuYWJsZUNvcHlIZWFkaW5nTGluazogdHJ1ZSxcclxuXHRjb3B5SGVhZGluZ0xpbmtGb3JtYXQ6IFwib2JzaWRpYW5cIixcclxuXHRhZGRUcmFpbGluZ1NsYXNoVG9MaW5rczogZmFsc2UsXHJcblx0ZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZDogZmFsc2UsXHJcblx0dGVybWluYWxQcm9qZWN0Um9vdFBhdGg6IFwiXCIsXHJcblx0dGVybWluYWxBcHBsaWNhdGlvbk5hbWU6IFwiXCIsXHJcblx0ZW5hYmxlVGVybWluYWxEZWJ1Z0xvZ2dpbmc6IGZhbHNlLFxyXG5cdGVuYWJsZVRlcm1pbmFsUmliYm9uSWNvbjogZmFsc2UsXHJcblx0ZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kOiBmYWxzZSxcclxuXHRjb25maWdGaWxlUGF0aDogXCJcIixcclxuXHRlbmFibGVDb25maWdSaWJib25JY29uOiBmYWxzZSxcclxuXHRjb250ZW50VHlwZXM6IFtdLFxyXG5cdG1pZ3JhdGlvbkNvbXBsZXRlZDogZmFsc2UsXHJcblx0aGVscEJ1dHRvblJlcGxhY2VtZW50OiB7XHJcblx0XHRlbmFibGVkOiBmYWxzZSxcclxuXHRcdGNvbW1hbmRJZDogJ2VkaXQtYXN0cm8tY29uZmlnJyxcclxuXHRcdGljb25JZDogJ3dyZW5jaCcsXHJcblx0fSxcclxuXHRzaG93TWR4RmlsZXNJbkV4cGxvcmVyOiBmYWxzZSxcclxufTtcclxuIiwgImltcG9ydCB7IFBsdWdpbiwgRWRpdG9yLCBNYXJrZG93blZpZXcsIFRGaWxlLCBOb3RpY2UsIEFwcCwgTWFya2Rvd25GaWxlSW5mbywgUGxhdGZvcm0sIFRGb2xkZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgQXN0cm9Db21wb3NlclNldHRpbmdzLCBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlIH0gZnJvbSBcIi4uL3R5cGVzXCI7XHJcbmltcG9ydCB7IEZpbGVPcGVyYXRpb25zIH0gZnJvbSBcIi4uL3V0aWxzL2ZpbGUtb3BlcmF0aW9uc1wiO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZVBhcnNlciB9IGZyb20gXCIuLi91dGlscy90ZW1wbGF0ZS1wYXJzaW5nXCI7XHJcbmltcG9ydCB7IExpbmtDb252ZXJ0ZXIgfSBmcm9tIFwiLi4vdXRpbHMvbGluay1jb252ZXJzaW9uXCI7XHJcbmltcG9ydCB7IFRpdGxlTW9kYWwgfSBmcm9tIFwiLi4vdWkvdGl0bGUtbW9kYWxcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luLCBzZXR0aW5nczogQXN0cm9Db21wb3NlclNldHRpbmdzKTogdm9pZCB7XHJcblx0Ly8gVGVybWluYWwgYW5kIGNvbmZpZyBjb21tYW5kcyBhcmUgZGVza3RvcC1vbmx5IC0gTkVWRVIgcmVnaXN0ZXIgb24gbW9iaWxlXHJcblx0Ly8gQ2hlY2sgUGxhdGZvcm0uaXNNb2JpbGUgLSBpZiB0cnVlLCB0aGVzZSBjb21tYW5kcyBtdXN0IE5FVkVSIGJlIHJlZ2lzdGVyZWRcclxuXHRjb25zdCBpc01vYmlsZSA9IFBsYXRmb3JtLmlzTW9iaWxlO1xyXG5cdFxyXG5cdC8vIElmIG9uIG1vYmlsZSwgYWJzb2x1dGVseSBkbyBub3QgcmVnaXN0ZXIgdGVybWluYWwvY29uZmlnIGNvbW1hbmRzXHJcblx0Ly8gVGhleSB1c2UgTm9kZS5qcy9FbGVjdHJvbiBBUElzIHRoYXQgZG9uJ3QgZXhpc3Qgb24gbW9iaWxlXHJcblx0aWYgKGlzTW9iaWxlKSB7XHJcblx0XHQvLyBPbiBtb2JpbGUsIG9ubHkgcmVnaXN0ZXIgdGhlIHNhZmUgY29tbWFuZHMgdGhhdCB3b3JrIG9uIG1vYmlsZVxyXG5cdFx0Y29uc3QgcGx1Z2luSW50ZXJmYWNlID0gcGx1Z2luIGFzIHVua25vd24gYXMgQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZTtcclxuXHRcdGNvbnN0IGZpbGVPcHMgPSBuZXcgRmlsZU9wZXJhdGlvbnMocGx1Z2luLmFwcCwgc2V0dGluZ3MsIHBsdWdpbkludGVyZmFjZSBhcyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlICYgeyBwbHVnaW5DcmVhdGVkRmlsZXM/OiBTZXQ8c3RyaW5nPiB9KTtcclxuXHRcdGNvbnN0IGxpbmtDb252ZXJ0ZXIgPSBuZXcgTGlua0NvbnZlcnRlcihzZXR0aW5ncywgcGx1Z2luSW50ZXJmYWNlKTtcclxuXHRcdFxyXG5cdFx0Ly8gUmVnaXN0ZXIgb25seSBtb2JpbGUtc2FmZSBjb21tYW5kc1xyXG5cdFx0cGx1Z2luLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogXCJzdGFuZGFyZGl6ZS1wcm9wZXJ0aWVzXCIsXHJcblx0XHRcdG5hbWU6IFwiU3RhbmRhcmRpemUgcHJvcGVydGllc1wiLFxyXG5cdFx0XHRpY29uOiBcImZpbGUtY2hlY2tcIixcclxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgY3R4OiBNYXJrZG93blZpZXcgfCBNYXJrZG93bkZpbGVJbmZvKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgZmlsZSA9IGN0eCBpbnN0YW5jZW9mIE1hcmtkb3duVmlldyA/IGN0eC5maWxlIDogY3R4LmZpbGU7XHJcblx0XHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdFx0Ly8gR2V0IGZyZXNoIHNldHRpbmdzIGZyb20gcGx1Z2luXHJcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50U2V0dGluZ3MgPSBwbHVnaW5JbnRlcmZhY2Uuc2V0dGluZ3MgfHwgc2V0dGluZ3M7XHJcblx0XHRcdFx0XHR2b2lkIHN0YW5kYXJkaXplUHJvcGVydGllcyhwbHVnaW4uYXBwLCBjdXJyZW50U2V0dGluZ3MsIGZpbGUsIHBsdWdpbkludGVyZmFjZSwgZWRpdG9yKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHRwbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcImNvbnZlcnQtd2lraWxpbmtzLWFzdHJvXCIsXHJcblx0XHRcdG5hbWU6IFwiQ29udmVydCBpbnRlcm5hbCBsaW5rcyBmb3IgYXN0cm9cIixcclxuXHRcdFx0aWNvbjogXCJsaW5rLTJcIixcclxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgY3R4OiBNYXJrZG93blZpZXcgfCBNYXJrZG93bkZpbGVJbmZvKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgZmlsZSA9IGN0eCBpbnN0YW5jZW9mIE1hcmtkb3duVmlldyA/IGN0eC5maWxlIDogY3R4LmZpbGU7XHJcblx0XHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdFx0bGlua0NvbnZlcnRlci5jb252ZXJ0V2lraWxpbmtzRm9yQXN0cm8oZWRpdG9yLCBmaWxlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBIZWxwZXIgZnVuY3Rpb24gZm9yIHJlbmFtZSBjb21tYW5kIChtb2JpbGUgdmVyc2lvbilcclxuXHRcdC8vIFVzZXMgdGhlIHNhbWUgbG9naWMgYXMgRmlsZU9wZXJhdGlvbnMuZGV0ZXJtaW5lVHlwZSgpIHRvIGVuc3VyZSBjb25zaXN0ZW5jeVxyXG5cdFx0ZnVuY3Rpb24gaGFzTWF0Y2hpbmdDb250ZW50VHlwZShmaWxlOiBURmlsZSwgc2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyk6IGJvb2xlYW4ge1xyXG5cdFx0XHRjb25zdCB0eXBlID0gZmlsZU9wcy5kZXRlcm1pbmVUeXBlKGZpbGUpO1xyXG5cdFx0XHQvLyBJZiBkZXRlcm1pbmVUeXBlIHJldHVybnMgXCJub3RlXCIsIGl0IG1lYW5zIG5vIGNvbnRlbnQgdHlwZSBtYXRjaGVkXHJcblx0XHRcdGlmICh0eXBlID09PSBcIm5vdGVcIikge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgbWF0Y2hlZCBjb250ZW50IHR5cGUgaXMgZW5hYmxlZFxyXG5cdFx0XHRjb25zdCBjb250ZW50VHlwZSA9IGZpbGVPcHMuZ2V0Q29udGVudFR5cGUodHlwZSk7XHJcblx0XHRcdHJldHVybiBjb250ZW50VHlwZSAhPT0gbnVsbCAmJiBjb250ZW50VHlwZS5lbmFibGVkO1xyXG5cdFx0fVxyXG5cclxuXHRcdHBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IFwicmVuYW1lLWNvbnRlbnRcIixcclxuXHRcdFx0bmFtZTogXCJSZW5hbWUgY3VycmVudCBjb250ZW50XCIsXHJcblx0XHRcdGljb246IFwicGVuY2lsXCIsXHJcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIGN0eDogTWFya2Rvd25WaWV3IHwgTWFya2Rvd25GaWxlSW5mbykgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSBjdHggaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgPyBjdHguZmlsZSA6IGN0eC5maWxlO1xyXG5cdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRcdGlmICghaGFzTWF0Y2hpbmdDb250ZW50VHlwZShmaWxlLCBzZXR0aW5ncykpIHtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkNhbm5vdCByZW5hbWU6IHRoaXMgZmlsZSBpcyBub3QgcGFydCBvZiBhIGNvbmZpZ3VyZWQgY29udGVudCB0eXBlIGZvbGRlci5cIik7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y29uc3QgdHlwZSA9IGZpbGVPcHMuZGV0ZXJtaW5lVHlwZShmaWxlKTtcclxuXHRcdFx0XHRcdGNvbnN0IGNhY2hlID0gcGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcclxuXHRcdFx0XHRcdGNvbnN0IHRpdGxlS2V5ID0gZmlsZU9wcy5nZXRUaXRsZUtleSh0eXBlKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKCFjYWNoZT8uZnJvbnRtYXR0ZXIgfHwgISh0aXRsZUtleSBpbiBjYWNoZS5mcm9udG1hdHRlcikpIHtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgQ2Fubm90IHJlbmFtZTogTm8gJHt0aXRsZUtleX0gZm91bmQgaW4gcHJvcGVydGllc2ApO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdG5ldyBUaXRsZU1vZGFsKHBsdWdpbi5hcHAsIGZpbGUsIHBsdWdpbiBhcyB1bmtub3duIGFzIEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2UsIHR5cGUsIHRydWUpLm9wZW4oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBETyBOT1QgcmVnaXN0ZXIgdGVybWluYWwgb3IgY29uZmlnIGNvbW1hbmRzIG9uIG1vYmlsZSAtIHJldHVybiBlYXJseVxyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRcclxuXHQvLyBEZXNrdG9wOiByZWdpc3RlciBhbGwgY29tbWFuZHMgaW5jbHVkaW5nIHRlcm1pbmFsIGFuZCBjb25maWdcclxuXHRjb25zdCBwbHVnaW5JbnRlcmZhY2UgPSBwbHVnaW4gYXMgdW5rbm93biBhcyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlO1xyXG5cclxuXHJcblx0Ly8gSGVscGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIGEgZmlsZSBtYXRjaGVzIGFueSBjb25maWd1cmVkIGNvbnRlbnQgdHlwZVxyXG5cdC8vIFVzZXMgdGhlIHNhbWUgbG9naWMgYXMgRmlsZU9wZXJhdGlvbnMuZGV0ZXJtaW5lVHlwZSgpIHRvIGVuc3VyZSBjb25zaXN0ZW5jeVxyXG5cdC8vIEdldHMgZnJlc2ggc2V0dGluZ3MgZnJvbSBwbHVnaW4gdG8gZW5zdXJlIHdlIGNoZWNrIGFnYWluc3QgY3VycmVudCBjb250ZW50IHR5cGVzXHJcblx0ZnVuY3Rpb24gaGFzTWF0Y2hpbmdDb250ZW50VHlwZShmaWxlOiBURmlsZSwgc2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyk6IGJvb2xlYW4ge1xyXG5cdFx0Ly8gR2V0IGZyZXNoIHNldHRpbmdzIGZyb20gcGx1Z2luIGlmIGF2YWlsYWJsZVxyXG5cdFx0Y29uc3QgY3VycmVudFNldHRpbmdzID0gKHBsdWdpbiBhcyB1bmtub3duIGFzIEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2UpPy5zZXR0aW5ncyB8fCBzZXR0aW5ncztcclxuXHRcdC8vIENyZWF0ZSBhIHRlbXBvcmFyeSBGaWxlT3BlcmF0aW9ucyB3aXRoIGZyZXNoIHNldHRpbmdzXHJcblx0XHRjb25zdCB0ZW1wRmlsZU9wcyA9IG5ldyBGaWxlT3BlcmF0aW9ucyhwbHVnaW4uYXBwLCBjdXJyZW50U2V0dGluZ3MsIHBsdWdpbiBhcyB1bmtub3duIGFzIEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2UgJiB7IHBsdWdpbkNyZWF0ZWRGaWxlcz86IFNldDxzdHJpbmc+IH0pO1xyXG5cdFx0Y29uc3QgdHlwZSA9IHRlbXBGaWxlT3BzLmRldGVybWluZVR5cGUoZmlsZSk7XHJcblx0XHQvLyBJZiBkZXRlcm1pbmVUeXBlIHJldHVybnMgXCJub3RlXCIsIGl0IG1lYW5zIG5vIGNvbnRlbnQgdHlwZSBtYXRjaGVkXHJcblx0XHRpZiAodHlwZSA9PT0gXCJub3RlXCIpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlIG1hdGNoZWQgY29udGVudCB0eXBlIGlzIGVuYWJsZWRcclxuXHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gdGVtcEZpbGVPcHMuZ2V0Q29udGVudFR5cGUodHlwZSk7XHJcblx0XHRyZXR1cm4gY29udGVudFR5cGUgIT09IG51bGwgJiYgY29udGVudFR5cGUuZW5hYmxlZDtcclxuXHR9XHJcblxyXG5cdC8vIFN0YW5kYXJkaXplIFByb3BlcnRpZXMgY29tbWFuZFxyXG5cdHBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdGlkOiBcInN0YW5kYXJkaXplLXByb3BlcnRpZXNcIixcclxuXHRcdG5hbWU6IFwiU3RhbmRhcmRpemUgcHJvcGVydGllc1wiLFxyXG5cdFx0aWNvbjogXCJmaWxlLWNoZWNrXCIsXHJcblx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBjdHg6IE1hcmtkb3duVmlldyB8IE1hcmtkb3duRmlsZUluZm8pID0+IHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IGN0eCBpbnN0YW5jZW9mIE1hcmtkb3duVmlldyA/IGN0eC5maWxlIDogY3R4LmZpbGU7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHR2b2lkIHN0YW5kYXJkaXplUHJvcGVydGllcyhwbHVnaW4uYXBwLCBzZXR0aW5ncywgZmlsZSwgcGx1Z2luIGFzIHVua25vd24gYXMgQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZSwgZWRpdG9yKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHR9KTtcclxuXHJcblx0Ly8gQ29udmVydCBXaWtpbGlua3MgY29tbWFuZFxyXG5cdHBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdGlkOiBcImNvbnZlcnQtd2lraWxpbmtzLWFzdHJvXCIsXHJcblx0XHRuYW1lOiBcIkNvbnZlcnQgaW50ZXJuYWwgbGlua3MgZm9yIGFzdHJvXCIsXHJcblx0XHRpY29uOiBcImxpbmstMlwiLFxyXG5cdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgY3R4OiBNYXJrZG93blZpZXcgfCBNYXJrZG93bkZpbGVJbmZvKSA9PiB7XHJcblx0XHRcdGNvbnN0IGZpbGUgPSBjdHggaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgPyBjdHguZmlsZSA6IGN0eC5maWxlO1xyXG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0Ly8gR2V0IGZyZXNoIHNldHRpbmdzIGZyb20gcGx1Z2luIGFuZCBjcmVhdGUgTGlua0NvbnZlcnRlciB3aXRoIGl0XHJcblx0XHRcdFx0Y29uc3QgY3VycmVudFNldHRpbmdzID0gcGx1Z2luSW50ZXJmYWNlLnNldHRpbmdzIHx8IHNldHRpbmdzO1xyXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRMaW5rQ29udmVydGVyID0gbmV3IExpbmtDb252ZXJ0ZXIoY3VycmVudFNldHRpbmdzLCBwbHVnaW5JbnRlcmZhY2UpO1xyXG5cdFx0XHRcdGN1cnJlbnRMaW5rQ29udmVydGVyLmNvbnZlcnRXaWtpbGlua3NGb3JBc3RybyhlZGl0b3IsIGZpbGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdH0pO1xyXG5cclxuXHRcdC8vIFJlbmFtZSBDb250ZW50IGNvbW1hbmRcclxuXHRcdHBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IFwicmVuYW1lLWNvbnRlbnRcIixcclxuXHRcdFx0bmFtZTogXCJSZW5hbWUgY3VycmVudCBjb250ZW50XCIsXHJcblx0XHRcdGljb246IFwicGVuY2lsXCIsXHJcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIGN0eDogTWFya2Rvd25WaWV3IHwgTWFya2Rvd25GaWxlSW5mbykgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSBjdHggaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgPyBjdHguZmlsZSA6IGN0eC5maWxlO1xyXG5cdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRcdC8vIEdldCBmcmVzaCBzZXR0aW5ncyBmcm9tIHBsdWdpblxyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFNldHRpbmdzID0gcGx1Z2luSW50ZXJmYWNlLnNldHRpbmdzIHx8IHNldHRpbmdzO1xyXG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIEZpbGVPcGVyYXRpb25zIHdpdGggZnJlc2ggc2V0dGluZ3NcclxuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRGaWxlT3BzID0gbmV3IEZpbGVPcGVyYXRpb25zKHBsdWdpbi5hcHAsIGN1cnJlbnRTZXR0aW5ncywgcGx1Z2luSW50ZXJmYWNlIGFzIEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2UgJiB7IHBsdWdpbkNyZWF0ZWRGaWxlcz86IFNldDxzdHJpbmc+IH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBDaGVjayBpZiB0aGlzIGZpbGUgbWF0Y2hlcyBhbnkgY29uZmlndXJlZCBjb250ZW50IHR5cGVcclxuXHRcdFx0XHRcdGlmICghaGFzTWF0Y2hpbmdDb250ZW50VHlwZShmaWxlLCBjdXJyZW50U2V0dGluZ3MpKSB7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJDYW5ub3QgcmVuYW1lOiB0aGlzIGZpbGUgaXMgbm90IHBhcnQgb2YgYSBjb25maWd1cmVkIGNvbnRlbnQgdHlwZSBmb2xkZXIuXCIpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIERldGVybWluZSBjb250ZW50IHR5cGUgZnJvbSBmb2xkZXIgc3RydWN0dXJlXHJcblx0XHRcdFx0XHRjb25zdCB0eXBlID0gY3VycmVudEZpbGVPcHMuZGV0ZXJtaW5lVHlwZShmaWxlKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIG9wZW4gdGhlIG1vZGFsIC0gaXQgd2lsbCBoYW5kbGUgZmlsZXMgd2l0aG91dCBmcm9udG1hdHRlciBvciB0aXRsZSBrZXlcclxuXHRcdFx0XHRcdC8vIElmIHRoZXJlJ3Mgbm8gdGl0bGUgaW4gZnJvbnRtYXR0ZXIsIHRoZSBtb2RhbCB3aWxsIHVzZSB0aGUgZmlsZW5hbWUgYXMgZmFsbGJhY2tcclxuXHRcdFx0XHRcdC8vIGFuZCB0aGUgcmVuYW1lIHdpbGwgcHJvY2VlZCB3aXRoIGtlYmFiLWNhc2UgdmVyc2lvbiBvZiB3aGF0IHVzZXIgdHlwZXNcclxuXHRcdFx0XHRcdG5ldyBUaXRsZU1vZGFsKHBsdWdpbi5hcHAsIGZpbGUsIHBsdWdpbkludGVyZmFjZSwgdHlwZSwgdHJ1ZSkub3BlbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cclxuXHQvLyBPcGVuIFRlcm1pbmFsIGNvbW1hbmQgKGRlc2t0b3Agb25seSAtIG5vdCBhdmFpbGFibGUgb24gbW9iaWxlKVxyXG5cdGlmICghaXNNb2JpbGUpIHtcclxuXHRcdHBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IFwib3Blbi1wcm9qZWN0LXRlcm1pbmFsXCIsXHJcblx0XHRcdG5hbWU6IFwiT3BlbiBwcm9qZWN0IHRlcm1pbmFsXCIsXHJcblx0XHRcdGljb246IFwidGVybWluYWwtc3F1YXJlXCIsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgY3VycmVudFNldHRpbmdzID0gKHBsdWdpbiBhcyB1bmtub3duIGFzIEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2UpLnNldHRpbmdzO1xyXG5cdFx0XHRcdGlmICghY3VycmVudFNldHRpbmdzLmVuYWJsZU9wZW5UZXJtaW5hbENvbW1hbmQpIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJPcGVuIHRlcm1pbmFsIGNvbW1hbmQgaXMgZGlzYWJsZWQuIEVuYWJsZSBpdCBpbiBzZXR0aW5ncyB0byB1c2UgdGhpcyBjb21tYW5kLlwiKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0b3BlblRlcm1pbmFsSW5Qcm9qZWN0Um9vdChwbHVnaW4uYXBwLCBjdXJyZW50U2V0dGluZ3MpO1xyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvLyBFZGl0IENvbmZpZyBGaWxlIGNvbW1hbmQgKGRlc2t0b3Agb25seSAtIG5vdCBhdmFpbGFibGUgb24gbW9iaWxlKVxyXG5cdGlmICghaXNNb2JpbGUpIHtcclxuXHRcdHBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IFwiZWRpdC1hc3Ryby1jb25maWdcIixcclxuXHRcdFx0bmFtZTogXCJFZGl0IGFzdHJvIGNvbmZpZ1wiLFxyXG5cdFx0XHRpY29uOiBcIndyZW5jaFwiLFxyXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IChwbHVnaW4gYXMgdW5rbm93biBhcyBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlKS5zZXR0aW5ncztcclxuXHRcdFx0XHRpZiAoIWN1cnJlbnRTZXR0aW5ncy5lbmFibGVPcGVuQ29uZmlnRmlsZUNvbW1hbmQpIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJFZGl0IGNvbmZpZyBmaWxlIGNvbW1hbmQgaXMgZGlzYWJsZWQuIEVuYWJsZSBpdCBpbiBzZXR0aW5ncyB0byB1c2UgdGhpcyBjb21tYW5kLlwiKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0YXdhaXQgb3BlbkNvbmZpZ0ZpbGUocGx1Z2luLmFwcCwgY3VycmVudFNldHRpbmdzKTtcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gc3RhbmRhcmRpemVQcm9wZXJ0aWVzKGFwcDogQXBwLCBzZXR0aW5nczogQXN0cm9Db21wb3NlclNldHRpbmdzLCBmaWxlOiBURmlsZSwgcGx1Z2luPzogQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZSwgZWRpdG9yPzogRWRpdG9yKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0Ly8gR2V0IGZyZXNoIHNldHRpbmdzIGZyb20gcGx1Z2luIGlmIGF2YWlsYWJsZVxyXG5cdGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IHBsdWdpbj8uc2V0dGluZ3MgfHwgc2V0dGluZ3M7XHJcblx0Y29uc3QgdGVtcGxhdGVQYXJzZXIgPSBuZXcgVGVtcGxhdGVQYXJzZXIoYXBwLCBjdXJyZW50U2V0dGluZ3MpO1xyXG5cdGNvbnN0IGZpbGVPcHMgPSBuZXcgRmlsZU9wZXJhdGlvbnMoYXBwLCBjdXJyZW50U2V0dGluZ3MsIHBsdWdpbik7XHJcblx0XHJcblx0Ly8gUHJlc2VydmUgY3Vyc29yIHBvc2l0aW9uIGlmIGVkaXRvciBpcyBwcm92aWRlZFxyXG5cdGxldCBjdXJzb3JQb3NpdGlvbjogeyBsaW5lOiBudW1iZXI7IGNoOiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xyXG5cdGxldCBvcmlnaW5hbENvbnRlbnQgPSBcIlwiO1xyXG5cdGlmIChlZGl0b3IpIHtcclxuXHRcdGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuXHRcdGN1cnNvclBvc2l0aW9uID0geyBsaW5lOiBjdXJzb3IubGluZSwgY2g6IGN1cnNvci5jaCB9O1xyXG5cdFx0b3JpZ2luYWxDb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKCk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIERldGVybWluZSBjb250ZW50IHR5cGUgdXNpbmcgdGhlIGV4aXN0aW5nIGxvZ2ljXHJcblx0Y29uc3QgdHlwZSA9IGZpbGVPcHMuZGV0ZXJtaW5lVHlwZShmaWxlKTtcclxuXHRcclxuXHQvLyBDaGVjayBpZiB0aGlzIGZpbGUgaGFzIGEgdmFsaWQgY29udGVudCB0eXBlIChub3QganVzdCBcIm5vdGVcIilcclxuXHRpZiAodHlwZSA9PT0gXCJub3RlXCIpIHtcclxuXHRcdG5ldyBOb3RpY2UoXCJObyBwcm9wZXJ0aWVzIHRlbXBsYXRlIHNwZWNpZmllZCBmb3IgdGhpcyBjb250ZW50LiBUaGlzIGZpbGUgZG9lc24ndCBtYXRjaCBhbnkgY29uZmlndXJlZCBjb250ZW50IHR5cGUgZm9sZGVycy5cIik7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdFxyXG5cdGxldCB0ZW1wbGF0ZVN0cmluZzogc3RyaW5nO1xyXG5cdFxyXG5cdC8vIERldGVybWluZSB0ZW1wbGF0ZSBiYXNlZCBvbiBjb250ZW50IHR5cGVcclxuXHRpZiAodHlwZSA9PT0gXCJub3RlXCIpIHtcclxuXHRcdG5ldyBOb3RpY2UoXCJObyBwcm9wZXJ0aWVzIHRlbXBsYXRlIHNwZWNpZmllZCBmb3IgdGhpcyBjb250ZW50LiBUaGlzIGZpbGUgZG9lc24ndCBtYXRjaCBhbnkgY29uZmlndXJlZCBjb250ZW50IHR5cGUgZm9sZGVycy5cIik7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdFxyXG5cdGNvbnN0IGNvbnRlbnRUeXBlID0gZmlsZU9wcy5nZXRDb250ZW50VHlwZSh0eXBlKTtcclxuXHRpZiAoIWNvbnRlbnRUeXBlKSB7XHJcblx0XHRuZXcgTm90aWNlKFwiQ29udGVudCB0eXBlIG5vdCBmb3VuZC5cIik7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdFxyXG5cdHRlbXBsYXRlU3RyaW5nID0gY29udGVudFR5cGUudGVtcGxhdGU7XHJcblxyXG5cdC8vIFdhaXQgYnJpZWZseSB0byBhbGxvdyBlZGl0b3Igc3RhdGUgdG8gc3RhYmlsaXplXHJcblx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xyXG5cclxuXHQvLyBSZS1yZWFkIGNvbnRlbnQgdG8gZW5zdXJlIGxhdGVzdCBzdGF0ZSBhZnRlciBlZGl0b3IgY2hhbmdlc1xyXG5cdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRjb25zdCB0aXRsZSA9IGZpbGUuYmFzZW5hbWUucmVwbGFjZSgvXl8vLCBcIlwiKTtcclxuXHRcclxuXHRjb25zdCBwYXJzZWQgPSB0ZW1wbGF0ZVBhcnNlci5wYXJzZUZyb250bWF0dGVyKGNvbnRlbnQpO1xyXG5cdGNvbnN0IHsgdGVtcGxhdGVQcm9wcywgdGVtcGxhdGVWYWx1ZXMgfSA9IHRlbXBsYXRlUGFyc2VyLnBhcnNlVGVtcGxhdGUodGVtcGxhdGVTdHJpbmcsIHRpdGxlKTtcclxuXHJcblx0Ly8gTWVyZ2UgdGVtcGxhdGUgcHJvcGVydGllcyB3aXRoIGV4aXN0aW5nIG9uZXMsIHByZXNlcnZpbmcgYWxsIGV4aXN0aW5nXHJcblx0Y29uc3QgZmluYWxQcm9wczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0geyAuLi5wYXJzZWQucHJvcGVydGllcyB9O1xyXG5cdGNvbnN0IGFycmF5S2V5cyA9IG5ldyBTZXQ8c3RyaW5nPigpOyAvLyBUcmFjayB3aGljaCBrZXlzIGFyZSBhcnJheXNcclxuXHRcclxuXHQvLyBHZW5lcmF0ZSBzbHVnIGZyb20gdGl0bGUgZm9yIHNsdWcgcHJvcGVydHkgYXV0by1wb3B1bGF0aW9uXHJcblx0Y29uc3Qgc2x1ZyA9IGZpbGVPcHMudG9LZWJhYkNhc2UodGl0bGUpO1xyXG5cdFxyXG5cdGZvciAoY29uc3Qga2V5IG9mIHRlbXBsYXRlUHJvcHMpIHtcclxuXHRcdGlmICghKGtleSBpbiBwYXJzZWQucHJvcGVydGllcykpIHtcclxuXHRcdFx0Ly8gUHJvcGVydHkgZG9lc24ndCBleGlzdCwgYWRkIGl0IGZyb20gdGVtcGxhdGVcclxuXHRcdFx0Y29uc3QgdGVtcGxhdGVWYWx1ZSA9IHRlbXBsYXRlVmFsdWVzW2tleV07XHJcblx0XHRcdGlmIChBcnJheS5pc0FycmF5KHRlbXBsYXRlVmFsdWUpKSB7XHJcblx0XHRcdFx0ZmluYWxQcm9wc1trZXldID0gdGVtcGxhdGVWYWx1ZTtcclxuXHRcdFx0XHRhcnJheUtleXMuYWRkKGtleSk7IC8vIE1hcmsgYXMgYXJyYXlcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRmaW5hbFByb3BzW2tleV0gPSBbdGVtcGxhdGVWYWx1ZSB8fCBcIlwiXTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gUHJvcGVydHkgZXhpc3RzLCBjaGVjayBpZiBpdCdzIGFuIGFycmF5IHR5cGVcclxuXHRcdFx0Y29uc3QgdGVtcGxhdGVWYWx1ZSA9IHRlbXBsYXRlVmFsdWVzW2tleV07XHJcblx0XHRcdGNvbnN0IGlzQXJyYXlWYWx1ZSA9IEFycmF5LmlzQXJyYXkodGVtcGxhdGVWYWx1ZSk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoaXNBcnJheVZhbHVlKSB7XHJcblx0XHRcdFx0Ly8gVGhpcyBpcyBhbiBhcnJheSBwcm9wZXJ0eSAtIHByZXNlcnZlIGV4aXN0aW5nIHZhbHVlcyBhbmQgbWVyZ2Ugd2l0aCB0ZW1wbGF0ZVxyXG5cdFx0XHRcdGNvbnN0IGV4aXN0aW5nSXRlbXMgPSBwYXJzZWQucHJvcGVydGllc1trZXldIHx8IFtdO1xyXG5cdFx0XHRcdGNvbnN0IG5ld0l0ZW1zID0gdGVtcGxhdGVWYWx1ZS5maWx0ZXIoaXRlbSA9PiAhZXhpc3RpbmdJdGVtcy5pbmNsdWRlcyhpdGVtKSk7XHJcblx0XHRcdFx0ZmluYWxQcm9wc1trZXldID0gWy4uLmV4aXN0aW5nSXRlbXMsIC4uLm5ld0l0ZW1zXTtcclxuXHRcdFx0XHRhcnJheUtleXMuYWRkKGtleSk7IC8vIE1hcmsgYXMgYXJyYXlcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBGb3Igbm9uLWFycmF5IHZhbHVlcywgY2hlY2sgaWYgaXQncyBzbHVnIGFuZCBuZWVkcyBhdXRvLXBvcHVsYXRpb25cclxuXHRcdFx0XHRpZiAoa2V5ID09PSBcInNsdWdcIikge1xyXG5cdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdTbHVnID0gcGFyc2VkLnByb3BlcnRpZXNba2V5XVswXSB8fCBcIlwiO1xyXG5cdFx0XHRcdFx0Ly8gT25seSBhdXRvLXBvcHVsYXRlIGlmIHNsdWcgaXMgZW1wdHkgb3IgbWlzc2luZ1xyXG5cdFx0XHRcdFx0aWYgKCFleGlzdGluZ1NsdWcgfHwgZXhpc3RpbmdTbHVnLnRyaW0oKSA9PT0gXCJcIikge1xyXG5cdFx0XHRcdFx0XHRmaW5hbFByb3BzW2tleV0gPSBbc2x1Z107XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBJZiBzbHVnIGhhcyBhIHZhbHVlLCBwcmVzZXJ2ZSBpdCAoZG9uJ3Qgb3ZlcndyaXRlKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBGb3Igb3RoZXIgbm9uLWFycmF5IHZhbHVlcywga2VlcCBleGlzdGluZyB2YWx1ZSAoZG9uJ3Qgb3ZlcndyaXRlKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIEFsc28gY2hlY2sgaWYgc2x1ZyBwcm9wZXJ0eSBleGlzdHMgaW4gZnJvbnRtYXR0ZXIgYnV0IGlzIGVtcHR5IChldmVuIGlmIG5vdCBpbiB0ZW1wbGF0ZSlcclxuXHQvLyBPbmx5IGF1dG8tcG9wdWxhdGUgaWYgdGVtcGxhdGUgaGFzIHt7c2x1Z319IHBsYWNlaG9sZGVyXHJcblx0aWYgKFwic2x1Z1wiIGluIHBhcnNlZC5wcm9wZXJ0aWVzICYmIHRlbXBsYXRlU3RyaW5nLmluY2x1ZGVzKFwie3tzbHVnfX1cIikpIHtcclxuXHRcdGNvbnN0IGV4aXN0aW5nU2x1ZyA9IHBhcnNlZC5wcm9wZXJ0aWVzW1wic2x1Z1wiXVswXSB8fCBcIlwiO1xyXG5cdFx0aWYgKCFleGlzdGluZ1NsdWcgfHwgZXhpc3RpbmdTbHVnLnRyaW0oKSA9PT0gXCJcIikge1xyXG5cdFx0XHQvLyBTbHVnIGV4aXN0cyBidXQgaXMgZW1wdHksIGFuZCB0ZW1wbGF0ZSBoYXMge3tzbHVnfX0gLSBhdXRvLXBvcHVsYXRlIGl0XHJcblx0XHRcdGZpbmFsUHJvcHNbXCJzbHVnXCJdID0gW3NsdWddO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gQWxzbyBhZGQgYW55IGV4aXN0aW5nIGFycmF5IGtleXMgdGhhdCB3ZXJlbid0IGluIHRoZSB0ZW1wbGF0ZVxyXG5cdGZvciAoY29uc3Qga2V5IGluIHBhcnNlZC5wcm9wZXJ0aWVzKSB7XHJcblx0XHRpZiAocGFyc2VkLnByb3BlcnRpZXNba2V5XS5sZW5ndGggPiAxKSB7XHJcblx0XHRcdGFycmF5S2V5cy5hZGQoa2V5KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGNvbnN0IG5ld0NvbnRlbnQgPSB0ZW1wbGF0ZVBhcnNlci5idWlsZEZyb250bWF0dGVyQ29udGVudChmaW5hbFByb3BzLCBhcnJheUtleXMpICsgcGFyc2VkLmJvZHlDb250ZW50O1xyXG5cclxuXHRhd2FpdCBhcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0NvbnRlbnQpO1xyXG5cdFxyXG5cdC8vIFJlc3RvcmUgY3Vyc29yIHBvc2l0aW9uIGlmIGVkaXRvciB3YXMgcHJvdmlkZWQgYW5kIGZpbGUgaXMgc3RpbGwgb3BlblxyXG5cdGlmIChlZGl0b3IgJiYgY3Vyc29yUG9zaXRpb24pIHtcclxuXHRcdC8vIFdhaXQgZm9yIE9ic2lkaWFuIHRvIHJlbG9hZCB0aGUgZmlsZSBpbiB0aGUgZWRpdG9yXHJcblx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTApKTtcclxuXHRcdFxyXG5cdFx0Ly8gVHJ5IHRvIGdldCB0aGUgYWN0aXZlIGVkaXRvciBmb3IgdGhpcyBmaWxlXHJcblx0XHRjb25zdCBhY3RpdmVWaWV3ID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRpZiAoYWN0aXZlVmlldyAmJiBhY3RpdmVWaWV3LmZpbGUgPT09IGZpbGUgJiYgYWN0aXZlVmlldy5lZGl0b3IpIHtcclxuXHRcdFx0Y29uc3QgYWN0aXZlRWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XHJcblx0XHRcdGNvbnN0IG5ld0xpbmVDb3VudCA9IG5ld0NvbnRlbnQuc3BsaXQoJ1xcbicpLmxlbmd0aDtcclxuXHRcdFx0Y29uc3Qgb3JpZ2luYWxMaW5lQ291bnQgPSBvcmlnaW5hbENvbnRlbnQuc3BsaXQoJ1xcbicpLmxlbmd0aDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIENhbGN1bGF0ZSBuZXcgY3Vyc29yIHBvc2l0aW9uXHJcblx0XHRcdGxldCBuZXdMaW5lID0gY3Vyc29yUG9zaXRpb24ubGluZTtcclxuXHRcdFx0bGV0IG5ld0NoID0gY3Vyc29yUG9zaXRpb24uY2g7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBZGp1c3QgZm9yIGNvbnRlbnQgY2hhbmdlc1xyXG5cdFx0XHRpZiAobmV3TGluZUNvdW50ICE9PSBvcmlnaW5hbExpbmVDb3VudCkge1xyXG5cdFx0XHRcdC8vIElmIGxpbmVzIHdlcmUgYWRkZWQvcmVtb3ZlZCwgYWRqdXN0IGxpbmUgbnVtYmVyXHJcblx0XHRcdFx0aWYgKG5ld0xpbmUgPj0gbmV3TGluZUNvdW50KSB7XHJcblx0XHRcdFx0XHRuZXdMaW5lID0gTWF0aC5tYXgoMCwgbmV3TGluZUNvdW50IC0gMSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBZGp1c3QgY29sdW1uIHBvc2l0aW9uIGlmIGxpbmUgbGVuZ3RoIGNoYW5nZWRcclxuXHRcdFx0Y29uc3QgbmV3TGluZUxlbmd0aCA9IG5ld0NvbnRlbnQuc3BsaXQoJ1xcbicpW25ld0xpbmVdPy5sZW5ndGggfHwgMDtcclxuXHRcdFx0aWYgKG5ld0NoID4gbmV3TGluZUxlbmd0aCkge1xyXG5cdFx0XHRcdG5ld0NoID0gTWF0aC5tYXgoMCwgbmV3TGluZUxlbmd0aCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFJlc3RvcmUgY3Vyc29yIHBvc2l0aW9uXHJcblx0XHRcdGFjdGl2ZUVkaXRvci5zZXRDdXJzb3IoeyBsaW5lOiBuZXdMaW5lLCBjaDogbmV3Q2ggfSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdG5ldyBOb3RpY2UoXCJQcm9wZXJ0aWVzIHN0YW5kYXJkaXplZCB1c2luZyB0ZW1wbGF0ZS5cIik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW5hbWUgYSBmaWxlIGJ5IHBhdGggKGZvciBwcm9ncmFtbWF0aWMgdXNlLCBlLmcuLCBmcm9tIG90aGVyIHBsdWdpbnMpXHJcbiAqIFRoaXMgYWxsb3dzIHRoZSByZW5hbWUgbW9kYWwgdG8gYXBwZWFyIHdpdGhvdXQgb3BlbmluZyB0aGUgZmlsZSBmaXJzdFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbmFtZUNvbnRlbnRCeVBhdGgoXHJcblx0YXBwOiBBcHAsXHJcblx0ZmlsZVBhdGg6IHN0cmluZyxcclxuXHRzZXR0aW5nczogQXN0cm9Db21wb3NlclNldHRpbmdzLFxyXG5cdHBsdWdpbjogQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZVxyXG4pOiB2b2lkIHtcclxuXHRjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcblx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xyXG5cdFx0bmV3IE5vdGljZShgRmlsZSBub3QgZm91bmQ6ICR7ZmlsZVBhdGh9YCk7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRjb25zdCBmaWxlT3BzID0gbmV3IEZpbGVPcGVyYXRpb25zKGFwcCwgc2V0dGluZ3MsIHBsdWdpbiBhcyB1bmtub3duIGFzIEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2UgJiB7IHBsdWdpbkNyZWF0ZWRGaWxlcz86IFNldDxzdHJpbmc+IH0pO1xyXG5cclxuXHQvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY2hlY2sgaWYgZmlsZSBtYXRjaGVzIGNvbnRlbnQgdHlwZVxyXG5cdC8vIFVzZXMgdGhlIHNhbWUgbG9naWMgYXMgRmlsZU9wZXJhdGlvbnMuZGV0ZXJtaW5lVHlwZSgpIHRvIGVuc3VyZSBjb25zaXN0ZW5jeVxyXG5cdGZ1bmN0aW9uIGhhc01hdGNoaW5nQ29udGVudFR5cGUoZmlsZTogVEZpbGUsIHNldHRpbmdzOiBBc3Ryb0NvbXBvc2VyU2V0dGluZ3MpOiBib29sZWFuIHtcclxuXHRcdGNvbnN0IHR5cGUgPSBmaWxlT3BzLmRldGVybWluZVR5cGUoZmlsZSk7XHJcblx0XHQvLyBJZiBkZXRlcm1pbmVUeXBlIHJldHVybnMgXCJub3RlXCIsIGl0IG1lYW5zIG5vIGNvbnRlbnQgdHlwZSBtYXRjaGVkXHJcblx0XHRpZiAodHlwZSA9PT0gXCJub3RlXCIpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlIG1hdGNoZWQgY29udGVudCB0eXBlIGlzIGVuYWJsZWRcclxuXHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gZmlsZU9wcy5nZXRDb250ZW50VHlwZSh0eXBlKTtcclxuXHRcdHJldHVybiBjb250ZW50VHlwZSAhPT0gbnVsbCAmJiBjb250ZW50VHlwZS5lbmFibGVkO1xyXG5cdH1cclxuXHJcblx0aWYgKCFoYXNNYXRjaGluZ0NvbnRlbnRUeXBlKGZpbGUsIHNldHRpbmdzKSkge1xyXG5cdFx0bmV3IE5vdGljZShcIkNhbm5vdCByZW5hbWU6IHRoaXMgZmlsZSBpcyBub3QgcGFydCBvZiBhIGNvbmZpZ3VyZWQgY29udGVudCB0eXBlIGZvbGRlci5cIik7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRjb25zdCB0eXBlID0gZmlsZU9wcy5kZXRlcm1pbmVUeXBlKGZpbGUpO1xyXG5cdFxyXG5cdC8vIEFsd2F5cyBvcGVuIHRoZSBtb2RhbCAtIGl0IHdpbGwgaGFuZGxlIGZpbGVzIHdpdGhvdXQgZnJvbnRtYXR0ZXIgb3IgdGl0bGUga2V5XHJcblx0Ly8gSWYgdGhlcmUncyBubyB0aXRsZSBpbiBmcm9udG1hdHRlciwgdGhlIG1vZGFsIHdpbGwgdXNlIHRoZSBmaWxlbmFtZSBhcyBmYWxsYmFja1xyXG5cdC8vIGFuZCB0aGUgcmVuYW1lIHdpbGwgcHJvY2VlZCB3aXRoIGtlYmFiLWNhc2UgdmVyc2lvbiBvZiB3aGF0IHVzZXIgdHlwZXNcclxuXHRuZXcgVGl0bGVNb2RhbChhcHAsIGZpbGUsIHBsdWdpbiwgdHlwZSwgdHJ1ZSkub3BlbigpO1xyXG59XHJcblxyXG4vKipcclxuICogUmVnaXN0ZXIgY29tbWFuZHMgZm9yIGVhY2ggZW5hYmxlZCBjb250ZW50IHR5cGVcclxuICogRWFjaCBjb21tYW5kIGNyZWF0ZXMgYSBuZXcgZmlsZSBpbiB0aGUgY29udGVudCB0eXBlJ3MgZm9sZGVyIGFuZCBvcGVucyB0aGUgVGl0bGVNb2RhbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQ29udGVudFR5cGVDb21tYW5kcyhwbHVnaW46IFBsdWdpbiwgc2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyk6IHZvaWQge1xyXG5cdGNvbnN0IHBsdWdpbkludGVyZmFjZSA9IHBsdWdpbiBhcyB1bmtub3duIGFzIEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2U7XHJcblx0Y29uc3QgY29udGVudFR5cGVzID0gc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xyXG5cdFxyXG5cdC8vIFJlZ2lzdGVyIGEgY29tbWFuZCBmb3IgZWFjaCBlbmFibGVkIGNvbnRlbnQgdHlwZVxyXG5cdGZvciAoY29uc3QgY29udGVudFR5cGUgb2YgY29udGVudFR5cGVzKSB7XHJcblx0XHRpZiAoIWNvbnRlbnRUeXBlLmVuYWJsZWQpIHtcclxuXHRcdFx0Y29udGludWU7IC8vIFNraXAgZGlzYWJsZWQgY29udGVudCB0eXBlc1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRjb25zdCBjb21tYW5kSWQgPSBgY3JlYXRlLWNvbnRlbnQtdHlwZS0ke2NvbnRlbnRUeXBlLmlkfWA7XHJcblx0XHRjb25zdCBjb21tYW5kTmFtZSA9IGBDcmVhdGUgbmV3IGNvbnRlbnQgdHlwZTogJHtjb250ZW50VHlwZS5uYW1lfWA7XHJcblx0XHRcclxuXHRcdHBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IGNvbW1hbmRJZCxcclxuXHRcdFx0bmFtZTogY29tbWFuZE5hbWUsXHJcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0Ly8gRGV0ZXJtaW5lIHRhcmdldCBmb2xkZXIgZnJvbSBjb250ZW50IHR5cGUgKG9yIHZhdWx0IHJvb3QgaWYgYmxhbmspXHJcblx0XHRcdFx0bGV0IHRhcmdldEZvbGRlciA9IGNvbnRlbnRUeXBlLmZvbGRlciB8fCBcIlwiO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIENyZWF0ZSBmb2xkZXIgaWYgaXQgZG9lc24ndCBleGlzdCBhbmQgaXMgc3BlY2lmaWVkXHJcblx0XHRcdFx0aWYgKHRhcmdldEZvbGRlciAmJiB0YXJnZXRGb2xkZXIudHJpbSgpICE9PSBcIlwiKSB7XHJcblx0XHRcdFx0XHRjb25zdCBmb2xkZXIgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0YXJnZXRGb2xkZXIpO1xyXG5cdFx0XHRcdFx0aWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcclxuXHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCBwbHVnaW4uYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih0YXJnZXRGb2xkZXIpO1xyXG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcclxuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBGYWlsZWQgdG8gY3JlYXRlIGZvbGRlcjogJHtlcnJvck1lc3NhZ2V9YCk7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIENyZWF0ZSBhIHRlbXBvcmFyeSBmaWxlIGluIHRoZSB0YXJnZXQgZm9sZGVyXHJcblx0XHRcdFx0Y29uc3QgdGVtcEZpbGVOYW1lID0gXCJVbnRpdGxlZC5tZFwiO1xyXG5cdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gdGFyZ2V0Rm9sZGVyID8gYCR7dGFyZ2V0Rm9sZGVyfS8ke3RlbXBGaWxlTmFtZX1gIDogdGVtcEZpbGVOYW1lO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIENoZWNrIGlmIGZpbGUgYWxyZWFkeSBleGlzdHMgKHVubGlrZWx5IGJ1dCBwb3NzaWJsZSlcclxuXHRcdFx0XHRjb25zdCBleGlzdGluZ0ZpbGUgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcblx0XHRcdFx0aWYgKGV4aXN0aW5nRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0XHQvLyBJZiBmaWxlIGV4aXN0cywgdXNlIGl0IGRpcmVjdGx5XHJcblx0XHRcdFx0XHRuZXcgVGl0bGVNb2RhbChwbHVnaW4uYXBwLCBleGlzdGluZ0ZpbGUsIHBsdWdpbkludGVyZmFjZSwgY29udGVudFR5cGUuaWQsIGZhbHNlLCB0cnVlKS5vcGVuKCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIE1hcmsgdGhhdCB0aGlzIGZpbGUgd2lsbCBiZSBjcmVhdGVkIGJ5IHRoZSBwbHVnaW5cclxuXHRcdFx0XHQvLyBUaGlzIHByZXZlbnRzIHRoZSBjcmVhdGUgZXZlbnQgZnJvbSB0cmlnZ2VyaW5nIGFub3RoZXIgbW9kYWxcclxuXHRcdFx0XHRpZiAocGx1Z2luSW50ZXJmYWNlICYmICdwbHVnaW5DcmVhdGVkRmlsZXMnIGluIHBsdWdpbkludGVyZmFjZSkge1xyXG5cdFx0XHRcdFx0Y29uc3QgcGx1Z2luV2l0aEZpbGVzID0gcGx1Z2luSW50ZXJmYWNlIGFzIHsgcGx1Z2luQ3JlYXRlZEZpbGVzPzogU2V0PHN0cmluZz4gfTtcclxuXHRcdFx0XHRcdGlmICghcGx1Z2luV2l0aEZpbGVzLnBsdWdpbkNyZWF0ZWRGaWxlcykge1xyXG5cdFx0XHRcdFx0XHRwbHVnaW5XaXRoRmlsZXMucGx1Z2luQ3JlYXRlZEZpbGVzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRwbHVnaW5XaXRoRmlsZXMucGx1Z2luQ3JlYXRlZEZpbGVzLmFkZChmaWxlUGF0aCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHQvLyBDcmVhdGUgdGhlIHRlbXBvcmFyeSBmaWxlXHJcblx0XHRcdFx0XHRjb25zdCB0ZW1wRmlsZSA9IGF3YWl0IHBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBcIlwiKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gT3BlbiB0aGUgVGl0bGVNb2RhbCB3aXRoIHRoZSBmaWxlLCBjb250ZW50IHR5cGUgSUQsIGFuZCBpc05ld05vdGUgZmxhZ1xyXG5cdFx0XHRcdFx0bmV3IFRpdGxlTW9kYWwocGx1Z2luLmFwcCwgdGVtcEZpbGUsIHBsdWdpbkludGVyZmFjZSwgY29udGVudFR5cGUuaWQsIGZhbHNlLCB0cnVlKS5vcGVuKCk7XHJcblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJHtlcnJvck1lc3NhZ2V9YCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIENsZWFuIHVwIHRoZSB0cmFja2luZyBpZiBmaWxlIGNyZWF0aW9uIGZhaWxlZFxyXG5cdFx0XHRcdFx0aWYgKHBsdWdpbkludGVyZmFjZSAmJiAncGx1Z2luQ3JlYXRlZEZpbGVzJyBpbiBwbHVnaW5JbnRlcmZhY2UpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgcGx1Z2luV2l0aEZpbGVzID0gcGx1Z2luSW50ZXJmYWNlIGFzIHsgcGx1Z2luQ3JlYXRlZEZpbGVzPzogU2V0PHN0cmluZz4gfTtcclxuXHRcdFx0XHRcdFx0cGx1Z2luV2l0aEZpbGVzLnBsdWdpbkNyZWF0ZWRGaWxlcz8uZGVsZXRlKGZpbGVQYXRoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZWJ1ZyBsb2dnZXIgZm9yIHRlcm1pbmFsIGNvbW1hbmRzXHJcbiAqL1xyXG5jb25zdCB0ZXJtaW5hbExvZ2dlciA9IHtcclxuXHRlbmFibGVkOiBmYWxzZSxcclxuXHRzZXRFbmFibGVkKHZhbHVlOiBib29sZWFuKSB7XHJcblx0XHR0aGlzLmVuYWJsZWQgPSB2YWx1ZTtcclxuXHR9LFxyXG5cdGxvZyguLi5hcmdzOiB1bmtub3duW10pIHtcclxuXHRcdGlmICh0aGlzLmVuYWJsZWQpIHtcclxuXHRcdFx0Y29uc29sZS5kZWJ1ZyhcIlthc3Ryby1jb21wb3Nlcjp0ZXJtaW5hbF1cIiwgLi4uYXJncyk7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdldCBkZWZhdWx0IHRlcm1pbmFsIGFwcGxpY2F0aW9uIG5hbWUgYmFzZWQgb24gcGxhdGZvcm1cclxuICovXHJcbmZ1bmN0aW9uIGdldERlZmF1bHRUZXJtaW5hbEFwcCgpOiBzdHJpbmcge1xyXG5cdGlmICghUGxhdGZvcm0uaXNEZXNrdG9wQXBwKSB7XHJcblx0XHRyZXR1cm4gXCJcIjtcclxuXHR9XHJcblx0aWYgKFBsYXRmb3JtLmlzTWFjT1MpIHtcclxuXHRcdHJldHVybiBcIlRlcm1pbmFsXCI7XHJcblx0fVxyXG5cdGlmIChQbGF0Zm9ybS5pc1dpbikge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1ub2RlanMtbW9kdWxlcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLXJlcXVpcmUtaW1wb3J0cywgbm8tdW5kZWZcclxuXHRcdFx0Y29uc3Qgb3MgPSByZXF1aXJlKCdvcycpIGFzIHsgcmVsZWFzZTogKCkgPT4gc3RyaW5nIH07XHJcblx0XHRcdGNvbnN0IHJlbGVhc2UgPSBvcy5yZWxlYXNlKCk7XHJcblx0XHRcdC8vIFdpbmRvd3MgMTEgYnVpbGQgbnVtYmVycyBzdGFydCBhdCAyMjAwMFxyXG5cdFx0XHRjb25zdCBtYWpvclZlcnNpb24gPSBwYXJzZUludChyZWxlYXNlLnNwbGl0KCcuJylbMF0pO1xyXG5cdFx0XHRjb25zdCBidWlsZE51bWJlciA9IHBhcnNlSW50KHJlbGVhc2Uuc3BsaXQoJy4nKVsyXSk7XHJcblxyXG5cdFx0XHRpZiAobWFqb3JWZXJzaW9uID4gMTAgfHwgKG1ham9yVmVyc2lvbiA9PT0gMTAgJiYgYnVpbGROdW1iZXIgPj0gMjIwMDApKSB7XHJcblx0XHRcdFx0cmV0dXJuIFwid3QuZXhlXCI7XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Ly8gRmFsbGJhY2sgdG8gY21kLmV4ZSBpZiBPUyBkZXRlY3Rpb24gZmFpbHNcclxuXHRcdH1cclxuXHRcdHJldHVybiBcImNtZC5leGVcIjtcclxuXHR9XHJcblx0aWYgKFBsYXRmb3JtLmlzTGludXgpIHtcclxuXHRcdHJldHVybiBcImdub21lLXRlcm1pbmFsXCI7XHJcblx0fVxyXG5cdHJldHVybiBcIlwiO1xyXG59XHJcblxyXG4vKipcclxuICogU2FuaXRpemUgdGVybWluYWwgYXBwbGljYXRpb24gbmFtZSAodHJpbSB3aGl0ZXNwYWNlKVxyXG4gKi9cclxuZnVuY3Rpb24gc2FuaXRpemVUZXJtaW5hbEFwcCh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRyZXR1cm4gdmFsdWUudHJpbSgpO1xyXG59XHJcblxyXG4vKipcclxuICogRXNjYXBlIGRvdWJsZSBxdW90ZXMgaW4gYSBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGVzY2FwZURvdWJsZVF1b3Rlcyh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRyZXR1cm4gdmFsdWUucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xyXG59XHJcblxyXG4vKipcclxuICogT3BlbiB0ZXJtaW5hbCBpbiBwcm9qZWN0IHJvb3QgZGlyZWN0b3J5XHJcbiAqIEV4cG9ydGVkIGZvciB1c2UgYnkgcmliYm9uIGljb25zXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gb3BlblRlcm1pbmFsSW5Qcm9qZWN0Um9vdChhcHA6IEFwcCwgc2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyk6IHZvaWQge1xyXG5cdC8vIFVwZGF0ZSBsb2dnZXIgc3RhdGVcclxuXHR0ZXJtaW5hbExvZ2dlci5zZXRFbmFibGVkKHNldHRpbmdzLmVuYWJsZVRlcm1pbmFsRGVidWdMb2dnaW5nKTtcclxuXHJcblx0dHJ5IHtcclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tbm9kZWpzLW1vZHVsZXMsIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHMsIG5vLXVuZGVmXHJcblx0XHRjb25zdCB7IGV4ZWMgfSA9IHJlcXVpcmUoJ2NoaWxkX3Byb2Nlc3MnKSBhcyB7IGV4ZWM6IChjb21tYW5kOiBzdHJpbmcsIGNhbGxiYWNrOiAoZXJyb3I6IHsgbWVzc2FnZT86IHN0cmluZyB9IHwgbnVsbCkgPT4gdm9pZCkgPT4gdm9pZCB9O1xyXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1ub2RlanMtbW9kdWxlcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLXJlcXVpcmUtaW1wb3J0cywgbm8tdW5kZWZcclxuXHRcdGNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJykgYXMgeyByZXNvbHZlOiAoLi4uYXJnczogc3RyaW5nW10pID0+IHN0cmluZyB9O1xyXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1ub2RlanMtbW9kdWxlcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLXJlcXVpcmUtaW1wb3J0cywgbm8tdW5kZWZcclxuXHRcdGNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKSBhcyB7IGV4aXN0c1N5bmM6IChwYXRoOiBzdHJpbmcpID0+IGJvb2xlYW4gfTtcclxuXHJcblx0XHQvLyBHZXQgdGhlIGFjdHVhbCB2YXVsdCBwYXRoIHN0cmluZyBmcm9tIHRoZSBhZGFwdGVyXHJcblx0XHRjb25zdCBhZGFwdGVyID0gYXBwLnZhdWx0LmFkYXB0ZXIgYXMgdW5rbm93biBhcyB7IGJhc2VQYXRoPzogc3RyaW5nOyBwYXRoPzogc3RyaW5nIH07XHJcblx0XHRjb25zdCB2YXVsdFBhdGggPSBhZGFwdGVyLmJhc2VQYXRoIHx8IGFkYXB0ZXIucGF0aDtcclxuXHRcdGNvbnN0IHZhdWx0UGF0aFN0cmluZyA9IHR5cGVvZiB2YXVsdFBhdGggPT09ICdzdHJpbmcnID8gdmF1bHRQYXRoIDogU3RyaW5nKHZhdWx0UGF0aCk7XHJcblxyXG5cdFx0Ly8gUmVzb2x2ZSBwcm9qZWN0IHJvb3QgcGF0aFxyXG5cdFx0bGV0IHByb2plY3RQYXRoOiBzdHJpbmc7XHJcblx0XHRpZiAoc2V0dGluZ3MudGVybWluYWxQcm9qZWN0Um9vdFBhdGggJiYgc2V0dGluZ3MudGVybWluYWxQcm9qZWN0Um9vdFBhdGgudHJpbSgpKSB7XHJcblx0XHRcdC8vIFVzZSBjdXN0b20gcGF0aCByZWxhdGl2ZSB0byB2YXVsdFxyXG5cdFx0XHRwcm9qZWN0UGF0aCA9IHBhdGgucmVzb2x2ZSh2YXVsdFBhdGhTdHJpbmcsIHNldHRpbmdzLnRlcm1pbmFsUHJvamVjdFJvb3RQYXRoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIERlZmF1bHQ6IHZhdWx0IGZvbGRlciBpdHNlbGZcclxuXHRcdFx0cHJvamVjdFBhdGggPSB2YXVsdFBhdGhTdHJpbmc7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVmVyaWZ5IHRoZSBwYXRoIGV4aXN0c1xyXG5cdFx0aWYgKCFmcy5leGlzdHNTeW5jKHByb2plY3RQYXRoKSkge1xyXG5cdFx0XHRuZXcgTm90aWNlKGBQcm9qZWN0IHJvb3QgZGlyZWN0b3J5IG5vdCBmb3VuZCBhdDogJHtwcm9qZWN0UGF0aH1gKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEdldCB0ZXJtaW5hbCBhcHBsaWNhdGlvbiBuYW1lICh1c2UgY29uZmlndXJlZCBvciBkZWZhdWx0KVxyXG5cdFx0Y29uc3QgY29uZmlndXJlZEFwcCA9IHNhbml0aXplVGVybWluYWxBcHAoc2V0dGluZ3MudGVybWluYWxBcHBsaWNhdGlvbk5hbWUgfHwgXCJcIik7XHJcblx0XHRjb25zdCB0ZXJtaW5hbEFwcCA9IGNvbmZpZ3VyZWRBcHAgfHwgZ2V0RGVmYXVsdFRlcm1pbmFsQXBwKCk7XHJcblxyXG5cdFx0Ly8gV2FybiBpZiB0ZXJtaW5hbCBhcHAgbmFtZSBpcyBlbXB0eSAoYnV0IHN0aWxsIHRyeSB0byB1c2UgZGVmYXVsdHMpXHJcblx0XHRpZiAoIWNvbmZpZ3VyZWRBcHAgJiYgIXRlcm1pbmFsQXBwKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoXCJUZXJtaW5hbCBhcHBsaWNhdGlvbiBuYW1lIGlzIGVtcHR5LiBQbGVhc2UgY29uZmlndXJlIGl0IGluIHNldHRpbmdzLlwiKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG5cdFx0Y29uc3QgcGxhdGZvcm0gPSBwcm9jZXNzLnBsYXRmb3JtO1xyXG5cdFx0dGVybWluYWxMb2dnZXIubG9nKFwiT3BlbmluZyB0ZXJtaW5hbFwiLCB7IHBsYXRmb3JtLCB0ZXJtaW5hbEFwcCwgcHJvamVjdFBhdGggfSk7XHJcblxyXG5cdFx0aWYgKHBsYXRmb3JtID09PSAnd2luMzInKSB7XHJcblx0XHRcdC8vIFdpbmRvd3M6IFVzZSBzdGFydCBjb21tYW5kIHdpdGggY29uZmlndXJhYmxlIHRlcm1pbmFsXHJcblx0XHRcdGNvbnN0IGVzY2FwZWRQYXRoID0gcHJvamVjdFBhdGgucmVwbGFjZSgvXCIvZywgJ1wiJyk7XHJcblx0XHRcdGNvbnN0IGxvd2VyQXBwID0gdGVybWluYWxBcHAudG9Mb3dlckNhc2UoKTtcclxuXHJcblx0XHRcdGlmIChsb3dlckFwcCA9PT0gXCJ3dC5leGVcIiB8fCBsb3dlckFwcCA9PT0gXCJ3dFwiIHx8IGxvd2VyQXBwID09PSBcIndpbmRvd3MgdGVybWluYWxcIikge1xyXG5cdFx0XHRcdC8vIFdpbmRvd3MgVGVybWluYWxcclxuXHRcdFx0XHRleGVjKCd3aGVyZSB3dCcsIChlcnJvcjogeyBtZXNzYWdlPzogc3RyaW5nIH0gfCBudWxsKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAoIWVycm9yKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBgc3RhcnQgXCJcIiB3dC5leGUgLWQgXCIke2VzY2FwZWRQYXRofVwiYDtcclxuXHRcdFx0XHRcdFx0dGVybWluYWxMb2dnZXIubG9nKFwiV2luZG93cyBsYXVuY2ggKHd0KVwiLCB7IGNvbW1hbmQsIHByb2plY3RQYXRoIH0pO1xyXG5cdFx0XHRcdFx0XHRleGVjKGNvbW1hbmQsIChleGVjRXJyb3I6IHsgbWVzc2FnZT86IHN0cmluZyB9IHwgbnVsbCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChleGVjRXJyb3IpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHRlcm1pbmFsTG9nZ2VyLmxvZyhcIldpbmRvd3MgVGVybWluYWwgZmFpbGVkLCBmYWxsaW5nIGJhY2sgdG8gY21kXCIsIHsgZXJyb3I6IGV4ZWNFcnJvci5tZXNzYWdlIH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gY21kXHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBmYWxsYmFja0NvbW1hbmQgPSBgc3RhcnQgXCJcIiBjbWQuZXhlIC9LIFwiY2QgL2QgXCIke2VzY2FwZWRQYXRofVwiXCJgO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZXhlYyhmYWxsYmFja0NvbW1hbmQsIChjbWRFcnJvcjogeyBtZXNzYWdlPzogc3RyaW5nIH0gfCBudWxsKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChjbWRFcnJvcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIG9wZW5pbmcgdGVybWluYWw6ICR7Y21kRXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBXaW5kb3dzIFRlcm1pbmFsIG5vdCBmb3VuZCwgZmFsbGJhY2sgdG8gY21kXHJcblx0XHRcdFx0XHRcdHRlcm1pbmFsTG9nZ2VyLmxvZyhcIldpbmRvd3MgVGVybWluYWwgbm90IGZvdW5kLCB1c2luZyBjbWRcIiwge30pO1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmYWxsYmFja0NvbW1hbmQgPSBgc3RhcnQgXCJcIiBjbWQuZXhlIC9LIFwiY2QgL2QgXCIke2VzY2FwZWRQYXRofVwiXCJgO1xyXG5cdFx0XHRcdFx0XHRleGVjKGZhbGxiYWNrQ29tbWFuZCwgKGNtZEVycm9yOiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSB8IG51bGwpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoY21kRXJyb3IpIHtcclxuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIG9wZW5pbmcgdGVybWluYWw6ICR7Y21kRXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIGlmIChsb3dlckFwcCA9PT0gXCJwb3dlcnNoZWxsXCIgfHwgbG93ZXJBcHAgPT09IFwicG93ZXJzaGVsbC5leGVcIikge1xyXG5cdFx0XHRcdC8vIFBvd2VyU2hlbGxcclxuXHRcdFx0XHRjb25zdCBlc2NhcGVkUGF0aEZvclBTID0gcHJvamVjdFBhdGgucmVwbGFjZSgvJy9nLCBcIicnXCIpO1xyXG5cdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBgc3RhcnQgXCJcIiBwb3dlcnNoZWxsIC1Ob0V4aXQgLUNvbW1hbmQgXCJTZXQtTG9jYXRpb24gJyR7ZXNjYXBlZFBhdGhGb3JQU30nO1wiYDtcclxuXHRcdFx0XHR0ZXJtaW5hbExvZ2dlci5sb2coXCJXaW5kb3dzIGxhdW5jaCAocG93ZXJzaGVsbClcIiwgeyBjb21tYW5kLCBwcm9qZWN0UGF0aCB9KTtcclxuXHRcdFx0XHRleGVjKGNvbW1hbmQsIChlcnJvcjogeyBtZXNzYWdlPzogc3RyaW5nIH0gfCBudWxsKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAoZXJyb3IpIHtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3Igb3BlbmluZyB0ZXJtaW5hbDogJHtlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIGlmIChsb3dlckFwcCA9PT0gXCJjbWQuZXhlXCIgfHwgbG93ZXJBcHAgPT09IFwiY21kXCIpIHtcclxuXHRcdFx0XHQvLyBDb21tYW5kIFByb21wdFxyXG5cdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBgc3RhcnQgXCJcIiBjbWQuZXhlIC9LIFwiY2QgL2QgXCIke2VzY2FwZWRQYXRofVwiXCJgO1xyXG5cdFx0XHRcdHRlcm1pbmFsTG9nZ2VyLmxvZyhcIldpbmRvd3MgbGF1bmNoIChjbWQpXCIsIHsgY29tbWFuZCwgcHJvamVjdFBhdGggfSk7XHJcblx0XHRcdFx0ZXhlYyhjb21tYW5kLCAoZXJyb3I6IHsgbWVzc2FnZT86IHN0cmluZyB9IHwgbnVsbCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKGVycm9yKSB7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIG9wZW5pbmcgdGVybWluYWw6ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gR2VuZXJpYyB0ZXJtaW5hbCAtIHRyeSB0byBsYXVuY2ggaXQgZGlyZWN0bHlcclxuXHRcdFx0XHRjb25zdCBjb21tYW5kID0gYHN0YXJ0IFwiXCIgXCIke3Rlcm1pbmFsQXBwfVwiYDtcclxuXHRcdFx0XHR0ZXJtaW5hbExvZ2dlci5sb2coXCJXaW5kb3dzIGxhdW5jaCAoZ2VuZXJpYylcIiwgeyBjb21tYW5kLCB0ZXJtaW5hbEFwcCwgcHJvamVjdFBhdGggfSk7XHJcblx0XHRcdFx0ZXhlYyhjb21tYW5kLCAoZXJyb3I6IHsgbWVzc2FnZT86IHN0cmluZyB9IHwgbnVsbCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKGVycm9yKSB7XHJcblx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrIHRvIGNtZCBpZiBnZW5lcmljIGxhdW5jaCBmYWlsc1xyXG5cdFx0XHRcdFx0XHR0ZXJtaW5hbExvZ2dlci5sb2coXCJHZW5lcmljIHRlcm1pbmFsIGZhaWxlZCwgZmFsbGluZyBiYWNrIHRvIGNtZFwiLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmYWxsYmFja0NvbW1hbmQgPSBgc3RhcnQgXCJcIiBjbWQuZXhlIC9LIFwiY2QgL2QgXCIke2VzY2FwZWRQYXRofVwiXCJgO1xyXG5cdFx0XHRcdFx0XHRleGVjKGZhbGxiYWNrQ29tbWFuZCwgKGNtZEVycm9yOiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSB8IG51bGwpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoY21kRXJyb3IpIHtcclxuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIG9wZW5pbmcgdGVybWluYWw6ICR7Y21kRXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmIChwbGF0Zm9ybSA9PT0gJ2RhcndpbicpIHtcclxuXHRcdFx0Ly8gbWFjT1M6IFVzZSBvcGVuIC1hIChzaW1wbGVyIHRoYW4gb3Nhc2NyaXB0KVxyXG5cdFx0XHRjb25zdCBlc2NhcGVkQXBwID0gZXNjYXBlRG91YmxlUXVvdGVzKHRlcm1pbmFsQXBwKTtcclxuXHRcdFx0Y29uc3QgZXNjYXBlZFBhdGggPSBlc2NhcGVEb3VibGVRdW90ZXMocHJvamVjdFBhdGgpO1xyXG5cdFx0XHRjb25zdCBjb21tYW5kID0gYG9wZW4gLW5hIFwiJHtlc2NhcGVkQXBwfVwiIFwiJHtlc2NhcGVkUGF0aH1cImA7XHJcblx0XHRcdHRlcm1pbmFsTG9nZ2VyLmxvZyhcIm1hY09TIGxhdW5jaFwiLCB7IGNvbW1hbmQsIHRlcm1pbmFsQXBwLCBwcm9qZWN0UGF0aCB9KTtcclxuXHRcdFx0ZXhlYyhjb21tYW5kLCAoZXJyb3I6IHsgbWVzc2FnZT86IHN0cmluZyB9IHwgbnVsbCkgPT4ge1xyXG5cdFx0XHRcdGlmIChlcnJvcikge1xyXG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3Igb3BlbmluZyB0ZXJtaW5hbDogJHtlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gTGludXg6IFRyeSBjb25maWd1cmFibGUgdGVybWluYWwgd2l0aCBmYWxsYmFjayBjaGFpblxyXG5cdFx0XHRjb25zdCB0ZXJtaW5hbHMgPSB0ZXJtaW5hbEFwcCA/IFt0ZXJtaW5hbEFwcF0gOiBbXCJnbm9tZS10ZXJtaW5hbFwiLCBcImtvbnNvbGVcIiwgXCJ4dGVybVwiXTtcclxuXHRcdFx0Y29uc3QgcHJvamVjdFBhdGhFc2NhcGVkID0gcHJvamVjdFBhdGgucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xyXG5cclxuXHRcdFx0Ly8gVHJ5IGVhY2ggdGVybWluYWwgdW50aWwgb25lIHdvcmtzXHJcblx0XHRcdGNvbnN0IHRyeVRlcm1pbmFsID0gKGluZGV4OiBudW1iZXIpID0+IHtcclxuXHRcdFx0XHRpZiAoaW5kZXggPj0gdGVybWluYWxzLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0bmV3IE5vdGljZSgnTm8gc3VwcG9ydGVkIHRlcm1pbmFsIGZvdW5kLiBQbGVhc2UgaW5zdGFsbCBhIHRlcm1pbmFsIGFwcGxpY2F0aW9uIG9yIGNvbmZpZ3VyZSBvbmUgaW4gc2V0dGluZ3MuJyk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb25zdCBjdXJyZW50VGVybWluYWwgPSB0ZXJtaW5hbHNbaW5kZXhdO1xyXG5cdFx0XHRcdGNvbnN0IHRlcm1pbmFsTmFtZSA9IGN1cnJlbnRUZXJtaW5hbC5zcGxpdCgnICcpWzBdO1xyXG5cclxuXHRcdFx0XHQvLyBDaGVjayBpZiB0ZXJtaW5hbCBleGlzdHNcclxuXHRcdFx0XHRleGVjKGB3aGljaCAke3Rlcm1pbmFsTmFtZX1gLCAoZXJyb3I6IHsgbWVzc2FnZT86IHN0cmluZyB9IHwgbnVsbCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKCFlcnJvcikge1xyXG5cdFx0XHRcdFx0XHQvLyBUZXJtaW5hbCBmb3VuZCwgdHJ5IHRvIGxhdW5jaCBpdFxyXG5cdFx0XHRcdFx0XHRsZXQgY29tbWFuZDogc3RyaW5nO1xyXG5cdFx0XHRcdFx0XHRpZiAoY3VycmVudFRlcm1pbmFsLmluY2x1ZGVzKFwiZ25vbWUtdGVybWluYWxcIikpIHtcclxuXHRcdFx0XHRcdFx0XHRjb21tYW5kID0gYGdub21lLXRlcm1pbmFsIC0td29ya2luZy1kaXJlY3Rvcnk9XCIke3Byb2plY3RQYXRoRXNjYXBlZH1cImA7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoY3VycmVudFRlcm1pbmFsLmluY2x1ZGVzKFwia29uc29sZVwiKSkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbW1hbmQgPSBga29uc29sZSAtLXdvcmtkaXIgXCIke3Byb2plY3RQYXRoRXNjYXBlZH1cImA7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gR2VuZXJpYyB0ZXJtaW5hbFxyXG5cdFx0XHRcdFx0XHRcdGNvbW1hbmQgPSBgJHtjdXJyZW50VGVybWluYWx9IC1lIFwiY2QgXFxcXFwiJHtwcm9qZWN0UGF0aEVzY2FwZWR9XFxcXFwiICYmIGJhc2hcImA7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0dGVybWluYWxMb2dnZXIubG9nKFwiTGludXggbGF1bmNoXCIsIHsgY29tbWFuZCwgdGVybWluYWw6IGN1cnJlbnRUZXJtaW5hbCwgcHJvamVjdFBhdGggfSk7XHJcblx0XHRcdFx0XHRcdGV4ZWMoY29tbWFuZCwgKGV4ZWNFcnJvcjogeyBtZXNzYWdlPzogc3RyaW5nIH0gfCBudWxsKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGV4ZWNFcnJvciAmJiBpbmRleCA8IHRlcm1pbmFscy5sZW5ndGggLSAxKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0ZXJtaW5hbExvZ2dlci5sb2coXCJUZXJtaW5hbCBsYXVuY2ggZmFpbGVkLCB0cnlpbmcgbmV4dFwiLCB7IHRlcm1pbmFsOiBjdXJyZW50VGVybWluYWwsIGVycm9yOiBleGVjRXJyb3IubWVzc2FnZSB9KTtcclxuXHRcdFx0XHRcdFx0XHRcdHRyeVRlcm1pbmFsKGluZGV4ICsgMSk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChleGVjRXJyb3IpIHtcclxuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIG9wZW5pbmcgdGVybWluYWw6ICR7ZXhlY0Vycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBUZXJtaW5hbCBub3QgZm91bmQsIHRyeSBuZXh0XHJcblx0XHRcdFx0XHRcdHRlcm1pbmFsTG9nZ2VyLmxvZyhcIlRlcm1pbmFsIG5vdCBmb3VuZCwgdHJ5aW5nIG5leHRcIiwgeyB0ZXJtaW5hbDogY3VycmVudFRlcm1pbmFsIH0pO1xyXG5cdFx0XHRcdFx0XHR0cnlUZXJtaW5hbChpbmRleCArIDEpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0dHJ5VGVybWluYWwoMCk7XHJcblx0XHR9XHJcblx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdHRlcm1pbmFsTG9nZ2VyLmxvZyhcIlVuZXhwZWN0ZWQgZXJyb3JcIiwgeyBlcnJvciB9KTtcclxuXHRcdG5ldyBOb3RpY2UoYEVycm9yIG9wZW5pbmcgdGVybWluYWw6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE9wZW4gY29uZmlnIGZpbGUgaW4gZGVmYXVsdCBlZGl0b3JcclxuICogRXhwb3J0ZWQgZm9yIHVzZSBieSByaWJib24gaWNvbnNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBvcGVuQ29uZmlnRmlsZShhcHA6IEFwcCwgc2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyk6IFByb21pc2U8dm9pZD4ge1xyXG5cdHRyeSB7XHJcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLW5vZGVqcy1tb2R1bGVzLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tcmVxdWlyZS1pbXBvcnRzLCBuby11bmRlZlxyXG5cdFx0Y29uc3QgZnMgPSByZXF1aXJlKCdmcycpIGFzIHsgZXhpc3RzU3luYzogKHBhdGg6IHN0cmluZykgPT4gYm9vbGVhbiB9O1xyXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1ub2RlanMtbW9kdWxlcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLXJlcXVpcmUtaW1wb3J0cywgbm8tdW5kZWZcclxuXHRcdGNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJykgYXMgeyByZXNvbHZlOiAoLi4uYXJnczogc3RyaW5nW10pID0+IHN0cmluZyB9O1xyXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHMsIG5vLXVuZGVmXHJcblx0XHRjb25zdCB7IHNoZWxsIH0gPSByZXF1aXJlKCdlbGVjdHJvbicpIGFzIHsgc2hlbGw6IHsgb3BlblBhdGg6IChwYXRoOiBzdHJpbmcpID0+IFByb21pc2U8c3RyaW5nPiB9IH07XHJcblxyXG5cdFx0Ly8gR2V0IHRoZSBhY3R1YWwgdmF1bHQgcGF0aCBzdHJpbmcgZnJvbSB0aGUgYWRhcHRlclxyXG5cdFx0Y29uc3QgYWRhcHRlciA9IGFwcC52YXVsdC5hZGFwdGVyIGFzIHVua25vd24gYXMgeyBiYXNlUGF0aD86IHN0cmluZzsgcGF0aD86IHN0cmluZyB9O1xyXG5cdFx0Y29uc3QgdmF1bHRQYXRoID0gYWRhcHRlci5iYXNlUGF0aCB8fCBhZGFwdGVyLnBhdGg7XHJcblx0XHRjb25zdCB2YXVsdFBhdGhTdHJpbmcgPSB0eXBlb2YgdmF1bHRQYXRoID09PSAnc3RyaW5nJyA/IHZhdWx0UGF0aCA6IFN0cmluZyh2YXVsdFBhdGgpO1xyXG5cclxuXHRcdC8vIFJlc29sdmUgY29uZmlnIGZpbGUgcGF0aFxyXG5cdFx0aWYgKCFzZXR0aW5ncy5jb25maWdGaWxlUGF0aCB8fCAhc2V0dGluZ3MuY29uZmlnRmlsZVBhdGgudHJpbSgpKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2Ugc3BlY2lmeSBhIGNvbmZpZyBmaWxlIHBhdGggaW4gc2V0dGluZ3MuXCIpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVXNlIGN1c3RvbSBwYXRoIHJlbGF0aXZlIHRvIHZhdWx0XHJcblx0XHRjb25zdCBjb25maWdQYXRoID0gcGF0aC5yZXNvbHZlKHZhdWx0UGF0aFN0cmluZywgc2V0dGluZ3MuY29uZmlnRmlsZVBhdGgpO1xyXG5cclxuXHRcdC8vIENoZWNrIGlmIGZpbGUgZXhpc3RzXHJcblx0XHRpZiAoIWZzLmV4aXN0c1N5bmMoY29uZmlnUGF0aCkpIHtcclxuXHRcdFx0bmV3IE5vdGljZShgQ29uZmlnIGZpbGUgbm90IGZvdW5kIGF0OiAke2NvbmZpZ1BhdGh9YCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBVc2UgRWxlY3Ryb24ncyBzaGVsbCB0byBvcGVuIHRoZSBmaWxlIHdpdGggdGhlIGRlZmF1bHQgZWRpdG9yXHJcblx0XHRhd2FpdCBzaGVsbC5vcGVuUGF0aChjb25maWdQYXRoKTtcclxuXHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0bmV3IE5vdGljZShgRXJyb3Igb3BlbmluZyBjb25maWcgZmlsZTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XHJcblx0fVxyXG59IiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQXN0cm9Db21wb3NlclNldHRpbmdzLCBGaWxlQ3JlYXRpb25PcHRpb25zLCBSZW5hbWVPcHRpb25zLCBDb250ZW50VHlwZSwgQ29udGVudFR5cGVJZCwgQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZSB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgbWF0Y2hlc0ZvbGRlclBhdHRlcm4sIHNvcnRCeVBhdHRlcm5TcGVjaWZpY2l0eSB9IGZyb20gXCIuL3BhdGgtbWF0Y2hpbmdcIjtcblxuZXhwb3J0IGNsYXNzIEZpbGVPcGVyYXRpb25zIHtcblx0Y29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCwgcHJpdmF0ZSBzZXR0aW5nczogQXN0cm9Db21wb3NlclNldHRpbmdzLCBwcml2YXRlIHBsdWdpbj86IEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2UgJiB7IHBsdWdpbkNyZWF0ZWRGaWxlcz86IFNldDxzdHJpbmc+IH0pIHt9XG5cdFxuXHQvLyBHZXQgZnJlc2ggc2V0dGluZ3MgZnJvbSBwbHVnaW4gaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgdXNlIHN0b3JlZCBzZXR0aW5nc1xuXHRwcml2YXRlIGdldFNldHRpbmdzKCk6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyB7XG5cdFx0Ly8gQWx3YXlzIHByZWZlciBwbHVnaW4gc2V0dGluZ3MgKHRoZXkncmUga2VwdCB1cCB0byBkYXRlKVxuXHRcdGlmICh0aGlzLnBsdWdpbj8uc2V0dGluZ3MpIHtcblx0XHRcdHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncztcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3M7XG5cdH1cblxuXHR0b0tlYmFiQ2FzZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHN0clxuXHRcdFx0LnRvTG93ZXJDYXNlKClcblx0XHRcdC8vIFJlbW92ZSBvciByZXBsYWNlIHByb2JsZW1hdGljIGNoYXJhY3RlcnMgZm9yIGZpbGVuYW1lc1xuXHRcdFx0LnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXS9nLCBcIlwiKSAvLyBSZW1vdmUgV2luZG93cy9Vbml4IGludmFsaWQgZmlsZW5hbWUgY2hhcmFjdGVyc1xuXHRcdFx0LnJlcGxhY2UoL1snXCJdL2csIFwiXCIpIC8vIFJlbW92ZSBxdW90ZXNcblx0XHRcdC5yZXBsYWNlKC9bXlxcd1xccy1dL2csIFwiXCIpIC8vIFJlbW92ZSBvdGhlciBzcGVjaWFsIGNoYXJhY3RlcnMgYnV0IGtlZXAgbGV0dGVycywgbnVtYmVycywgc3BhY2VzLCBoeXBoZW5zXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcblx0XHRcdC5yZXBsYWNlKC8tKy9nLCBcIi1cIilcblx0XHRcdC5yZXBsYWNlKC9eLXwtJC9nLCBcIlwiKTtcblx0fVxuXG5cdGdlbmVyYXRlRmlsZW5hbWUodGl0bGU6IHN0cmluZywgZW5hYmxlVW5kZXJzY29yZVByZWZpeDogYm9vbGVhbiA9IGZhbHNlKTogc3RyaW5nIHtcblx0XHRjb25zdCBrZWJhYlRpdGxlID0gdGhpcy50b0tlYmFiQ2FzZSh0aXRsZSk7XG5cdFx0Ly8gSWYga2ViYWIgY2FzZSByZXN1bHRzIGluIGVtcHR5IHN0cmluZywgdXNlIGEgZmFsbGJhY2tcblx0XHRjb25zdCBzYWZlS2ViYWJUaXRsZSA9IGtlYmFiVGl0bGUgfHwgXCJ1bnRpdGxlZFwiO1xuXHRcdGNvbnN0IHByZWZpeCA9IGVuYWJsZVVuZGVyc2NvcmVQcmVmaXggPyBcIl9cIiA6IFwiXCI7XG5cdFx0cmV0dXJuIGAke3ByZWZpeH0ke3NhZmVLZWJhYlRpdGxlfWA7XG5cdH1cblxuXHRkZXRlcm1pbmVUeXBlKGZpbGU6IFRGaWxlKTogQ29udGVudFR5cGVJZCB7XG5cdFx0Y29uc3QgZmlsZVBhdGggPSBmaWxlLnBhdGg7XG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLmdldFNldHRpbmdzKCk7XG5cdFx0XG5cdFx0Ly8gQ2hlY2sgYWxsIGNvbnRlbnQgdHlwZXMsIHNvcnRlZCBieSBwYXR0ZXJuIHNwZWNpZmljaXR5IChtb3JlIHNwZWNpZmljIGZpcnN0KVxuXHRcdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBbXTtcblx0XHRjb25zdCBzb3J0ZWRUeXBlcyA9IHNvcnRCeVBhdHRlcm5TcGVjaWZpY2l0eShjb250ZW50VHlwZXMpO1xuXHRcdFxuXHRcdGZvciAoY29uc3QgY29udGVudFR5cGUgb2Ygc29ydGVkVHlwZXMpIHtcblx0XHRcdGlmICghY29udGVudFR5cGUuZW5hYmxlZCkgY29udGludWU7XG5cdFx0XHRcblx0XHRcdC8vIEhhbmRsZSBibGFuayBmb2xkZXIgKHJvb3QpIC0gbWF0Y2hlcyBmaWxlcyBpbiB2YXVsdCByb290IG9ubHlcblx0XHRcdGlmICghY29udGVudFR5cGUuZm9sZGVyIHx8IGNvbnRlbnRUeXBlLmZvbGRlci50cmltKCkgPT09IFwiXCIpIHtcblx0XHRcdFx0aWYgKCFmaWxlUGF0aC5pbmNsdWRlcyhcIi9cIikgfHwgZmlsZVBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRcdHJldHVybiBjb250ZW50VHlwZS5pZDtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChtYXRjaGVzRm9sZGVyUGF0dGVybihmaWxlUGF0aCwgY29udGVudFR5cGUuZm9sZGVyKSkge1xuXHRcdFx0XHQvLyBDaGVjayBpZ25vcmVTdWJmb2xkZXJzIGlmIGZvbGRlciBpcyBzcGVjaWZpZWRcblx0XHRcdFx0aWYgKGNvbnRlbnRUeXBlLmlnbm9yZVN1YmZvbGRlcnMpIHtcblx0XHRcdFx0XHRjb25zdCBwYXRoU2VnbWVudHMgPSBmaWxlUGF0aC5zcGxpdChcIi9cIik7XG5cdFx0XHRcdFx0Y29uc3QgcGF0aERlcHRoID0gcGF0aFNlZ21lbnRzLmxlbmd0aDtcblx0XHRcdFx0XHRjb25zdCBwYXR0ZXJuU2VnbWVudHMgPSBjb250ZW50VHlwZS5mb2xkZXIuc3BsaXQoXCIvXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGV4cGVjdGVkRGVwdGggPSBwYXR0ZXJuU2VnbWVudHMubGVuZ3RoO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjb250ZW50VHlwZS5jcmVhdGlvbk1vZGUgPT09IFwiZm9sZGVyXCIpIHtcblx0XHRcdFx0XHRcdC8vIEZvciBmb2xkZXItYmFzZWQgY3JlYXRpb24sIGZpbGVzIGFyZSBvbmUgbGV2ZWwgZGVlcGVyIChlLmcuLCB0ZXN0L215LWZpbGUvaW5kZXgubWQpXG5cdFx0XHRcdFx0XHQvLyBTbyB3ZSBuZWVkIHRvIGFsbG93IG9uZSBleHRyYSBsZXZlbCBiZXlvbmQgdGhlIHBhdHRlcm4gZGVwdGhcblx0XHRcdFx0XHRcdGNvbnN0IGZvbGRlckRlcHRoID0gcGF0aERlcHRoIC0gMTsgLy8gU3VidHJhY3QgMSBmb3IgdGhlIGluZGV4Lm1kIGZpbGVcblx0XHRcdFx0XHRcdGlmIChmb2xkZXJEZXB0aCA9PT0gZXhwZWN0ZWREZXB0aCB8fCBmb2xkZXJEZXB0aCA9PT0gZXhwZWN0ZWREZXB0aCArIDEpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNvbnRlbnRUeXBlLmlkO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBGb3IgZmlsZS1iYXNlZCBjcmVhdGlvbiwgZmlsZXMgYXJlIGF0IHRoZSBzYW1lIGRlcHRoIGFzIHRoZSBwYXR0ZXJuXG5cdFx0XHRcdFx0XHRpZiAocGF0aERlcHRoID09PSBleHBlY3RlZERlcHRoKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBjb250ZW50VHlwZS5pZDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNvbnRlbnRUeXBlLmlkO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIElmIG5vIGNvbnRlbnQgdHlwZSBtYXRjaGVzLCByZXR1cm4gXCJub3RlXCIgYXMgZmFsbGJhY2tcblx0XHRyZXR1cm4gXCJub3RlXCI7XG5cdH1cblxuXHRnZXRDb250ZW50VHlwZSh0eXBlSWQ6IENvbnRlbnRUeXBlSWQpOiBDb250ZW50VHlwZSB8IG51bGwge1xuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xuXHRcdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBbXTtcblx0XHRyZXR1cm4gY29udGVudFR5cGVzLmZpbmQoY3QgPT4gY3QuaWQgPT09IHR5cGVJZCkgfHwgbnVsbDtcblx0fVxuXG5cdGdldFRpdGxlS2V5KHR5cGU6IENvbnRlbnRUeXBlSWQpOiBzdHJpbmcge1xuXHRcdC8vIEZvciBnZW5lcmljIG5vdGVzLCBhbHdheXMgdXNlIFwidGl0bGVcIlxuXHRcdGlmICh0eXBlID09PSBcIm5vdGVcIikgcmV0dXJuIFwidGl0bGVcIjtcblx0XHRcblx0XHRjb25zdCBjb250ZW50VHlwZSA9IHRoaXMuZ2V0Q29udGVudFR5cGUodHlwZSk7XG5cdFx0aWYgKCFjb250ZW50VHlwZSkgcmV0dXJuIFwidGl0bGVcIjtcblx0XHRcblx0XHRjb25zdCB0ZW1wbGF0ZSA9IGNvbnRlbnRUeXBlLnRlbXBsYXRlO1xuXHRcdGNvbnN0IGxpbmVzID0gdGVtcGxhdGUuc3BsaXQoXCJcXG5cIik7XG5cdFx0bGV0IGluUHJvcGVydGllcyA9IGZhbHNlO1xuXHRcdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuXHRcdFx0Y29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpO1xuXHRcdFx0aWYgKHRyaW1tZWQgPT09IFwiLS0tXCIpIHtcblx0XHRcdFx0aW5Qcm9wZXJ0aWVzID0gIWluUHJvcGVydGllcztcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaW5Qcm9wZXJ0aWVzKSB7XG5cdFx0XHRcdGNvbnN0IG1hdGNoID0gdHJpbW1lZC5tYXRjaCgvXihcXHcrKTpcXHMqKC4rKSQvKTtcblx0XHRcdFx0aWYgKG1hdGNoKSB7XG5cdFx0XHRcdFx0Y29uc3Qga2V5ID0gbWF0Y2hbMV07XG5cdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSBtYXRjaFsyXTtcblx0XHRcdFx0XHRpZiAodmFsdWUuaW5jbHVkZXMoXCJ7e3RpdGxlfX1cIikpIHtcblx0XHRcdFx0XHRcdHJldHVybiBrZXk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBcInRpdGxlXCI7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVGaWxlKG9wdGlvbnM6IEZpbGVDcmVhdGlvbk9wdGlvbnMpOiBQcm9taXNlPFRGaWxlIHwgbnVsbD4ge1xuXHRcdGNvbnN0IHsgZmlsZSwgdGl0bGUsIHR5cGUgfSA9IG9wdGlvbnM7XG5cdFx0XG5cdFx0aWYgKCF0aXRsZSkge1xuXHRcdFx0bmV3IE5vdGljZShgVGl0bGUgaXMgcmVxdWlyZWQgdG8gY3JlYXRlIGEgJHt0eXBlfS5gKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdC8vIEdldCBjb250ZW50IHR5cGUgc2V0dGluZ3Ncblx0XHRjb25zdCBjb250ZW50VHlwZSA9IHRoaXMuZ2V0Q29udGVudFR5cGUodHlwZSk7XG5cdFx0aWYgKCFjb250ZW50VHlwZSAmJiB0eXBlICE9PSBcIm5vdGVcIikge1xuXHRcdFx0bmV3IE5vdGljZShgQ29udGVudCB0eXBlICR7dHlwZX0gbm90IGZvdW5kLmApO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Y29uc3Qga2ViYWJUaXRsZSA9IHRoaXMudG9LZWJhYkNhc2UodGl0bGUpO1xuXHRcdGNvbnN0IGVuYWJsZVVuZGVyc2NvcmVQcmVmaXggPSBjb250ZW50VHlwZT8uZW5hYmxlVW5kZXJzY29yZVByZWZpeCB8fCBmYWxzZTtcblx0XHRjb25zdCBwcmVmaXggPSBlbmFibGVVbmRlcnNjb3JlUHJlZml4ID8gXCJfXCIgOiBcIlwiO1xuXG5cdFx0bGV0IHRhcmdldEZvbGRlciA9IFwiXCI7XG5cdFx0aWYgKHR5cGUgPT09IFwibm90ZVwiKSB7XG5cdFx0XHQvLyBGb3IgZ2VuZXJpYyBub3Rlcywga2VlcCB0aGVtIGluIHRoZWlyIGN1cnJlbnQgbG9jYXRpb25cblx0XHRcdHRhcmdldEZvbGRlciA9IFwiXCI7XG5cdFx0fSBlbHNlIGlmIChjb250ZW50VHlwZSkge1xuXHRcdFx0Ly8gR2V0IHRoZSBkaXJlY3Rvcnkgd2hlcmUgdGhlIHVzZXIgY3JlYXRlZCB0aGUgZmlsZVxuXHRcdFx0Y29uc3Qgb3JpZ2luYWxEaXIgPSBmaWxlLnBhcmVudD8ucGF0aCB8fCBcIlwiO1xuXHRcdFx0XG5cdFx0XHQvLyBSZXNwZWN0IHRoZSB1c2VyJ3MgY2hvc2VuIGxvY2F0aW9uIChzdWJmb2xkZXIpXG5cdFx0XHQvLyBPbmx5IHVzZSB0aGUgY29uZmlndXJlZCBmb2xkZXIgaWYgdGhlIHVzZXIgY3JlYXRlZCB0aGUgZmlsZSBpbiB0aGUgdmF1bHQgcm9vdFxuXHRcdFx0aWYgKG9yaWdpbmFsRGlyID09PSBcIlwiIHx8IG9yaWdpbmFsRGlyID09PSBcIi9cIikge1xuXHRcdFx0XHR0YXJnZXRGb2xkZXIgPSBjb250ZW50VHlwZS5mb2xkZXIgfHwgXCJcIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRhcmdldEZvbGRlciA9IG9yaWdpbmFsRGlyO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHRpZiAodGFyZ2V0Rm9sZGVyKSB7XG5cdFx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGFyZ2V0Rm9sZGVyKTtcblx0XHRcdGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih0YXJnZXRGb2xkZXIpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IGNyZWF0aW9uTW9kZSA9IGNvbnRlbnRUeXBlPy5jcmVhdGlvbk1vZGUgfHwgXCJmaWxlXCI7XG5cdFx0aWYgKGNyZWF0aW9uTW9kZSA9PT0gXCJmb2xkZXJcIikge1xuXHRcdFx0cmV0dXJuIHRoaXMuY3JlYXRlRm9sZGVyU3RydWN0dXJlKGZpbGUsIGtlYmFiVGl0bGUsIHByZWZpeCwgdGFyZ2V0Rm9sZGVyLCB0eXBlLCBjb250ZW50VHlwZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB0aGlzLmNyZWF0ZUZpbGVTdHJ1Y3R1cmUoZmlsZSwga2ViYWJUaXRsZSwgcHJlZml4LCB0YXJnZXRGb2xkZXIsIGNvbnRlbnRUeXBlKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZUZvbGRlclN0cnVjdHVyZShmaWxlOiBURmlsZSwga2ViYWJUaXRsZTogc3RyaW5nLCBwcmVmaXg6IHN0cmluZywgdGFyZ2V0Rm9sZGVyOiBzdHJpbmcsIHR5cGU6IENvbnRlbnRUeXBlSWQsIGNvbnRlbnRUeXBlOiBDb250ZW50VHlwZSB8IG51bGwpOiBQcm9taXNlPFRGaWxlIHwgbnVsbD4ge1xuXHRcdGNvbnN0IGZvbGRlck5hbWUgPSBgJHtwcmVmaXh9JHtrZWJhYlRpdGxlfWA7XG5cdFx0bGV0IGZvbGRlclBhdGg6IHN0cmluZztcblx0XHRcblx0XHRpZiAodGFyZ2V0Rm9sZGVyKSB7XG5cdFx0XHQvLyBNb3ZlIHRvIHRhcmdldCBmb2xkZXJcblx0XHRcdGZvbGRlclBhdGggPSBgJHt0YXJnZXRGb2xkZXJ9LyR7Zm9sZGVyTmFtZX1gO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBLZWVwIGluIGN1cnJlbnQgbG9jYXRpb25cblx0XHRcdGNvbnN0IGN1cnJlbnREaXIgPSBmaWxlLnBhcmVudCA/IGZpbGUucGFyZW50LnBhdGggOiBcIlwiO1xuXHRcdFx0aWYgKGN1cnJlbnREaXIgJiYgY3VycmVudERpciAhPT0gXCIvXCIpIHtcblx0XHRcdFx0Zm9sZGVyUGF0aCA9IGAke2N1cnJlbnREaXJ9LyR7Zm9sZGVyTmFtZX1gO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRmlsZSBpcyBpbiB2YXVsdCByb290LCBqdXN0IHVzZSBmb2xkZXIgbmFtZVxuXHRcdFx0XHRmb2xkZXJQYXRoID0gZm9sZGVyTmFtZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xuXHRcdFx0aWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2gge1xuXHRcdFx0Ly8gRm9sZGVyIG1pZ2h0IGFscmVhZHkgZXhpc3QsIHByb2NlZWRcblx0XHR9XG5cblx0XHRjb25zdCBpbmRleEZpbGVOYW1lID0gY29udGVudFR5cGU/LmluZGV4RmlsZU5hbWUgfHwgXCJpbmRleFwiO1xuXHRcdGNvbnN0IGV4dGVuc2lvbiA9IGNvbnRlbnRUeXBlPy51c2VNZHhFeHRlbnNpb24gPyBcIi5tZHhcIiA6IFwiLm1kXCI7XG5cdFx0Y29uc3QgZmlsZU5hbWUgPSBgJHtpbmRleEZpbGVOYW1lfSR7ZXh0ZW5zaW9ufWA7XG5cdFx0Y29uc3QgbmV3UGF0aCA9IGAke2ZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YDtcblxuXHRcdGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdQYXRoKTtcblx0XHRpZiAoZXhpc3RpbmdGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdG5ldyBOb3RpY2UoYEZpbGUgYWxyZWFkeSBleGlzdHMgYXQgJHtuZXdQYXRofS5gKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdC8vIFRyYWNrIHRoYXQgdGhpcyBmaWxlIHdpbGwgYmUgY3JlYXRlZCBieSB0aGUgcGx1Z2luIEJFRk9SRSByZW5hbWluZ1xuXHRcdC8vIFRoaXMgcHJldmVudHMgdGhlIGNyZWF0ZSBldmVudCBmcm9tIHRyaWdnZXJpbmcgYW5vdGhlciBtb2RhbFxuXHRcdGlmICh0aGlzLnBsdWdpbiAmJiAncGx1Z2luQ3JlYXRlZEZpbGVzJyBpbiB0aGlzLnBsdWdpbikge1xuXHRcdFx0Y29uc3QgcGx1Z2luV2l0aEZpbGVzID0gdGhpcy5wbHVnaW4gYXMgeyBwbHVnaW5DcmVhdGVkRmlsZXM/OiBTZXQ8c3RyaW5nPiB9O1xuXHRcdFx0cGx1Z2luV2l0aEZpbGVzLnBsdWdpbkNyZWF0ZWRGaWxlcz8uYWRkKG5ld1BhdGgpO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xuXHRcdFx0Y29uc3QgbmV3RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdQYXRoKTtcblx0XHRcdGlmICghKG5ld0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBmaWxlRXhwbG9yZXIgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwiZmlsZS1leHBsb3JlclwiKVswXTtcblx0XHRcdFx0aWYgKGZpbGVFeHBsb3JlciAmJiBmaWxlRXhwbG9yZXIudmlldykge1xuXHRcdFx0XHRcdGNvbnN0IHZpZXcgPSBmaWxlRXhwbG9yZXIudmlldztcblx0XHRcdFx0XHRpZiAodmlldyAmJiB0eXBlb2YgdmlldyA9PT0gJ29iamVjdCcgJiYgJ3RyZWUnIGluIHZpZXcpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVUcmVlID0gKHZpZXcgYXMgeyB0cmVlPzogeyByZXZlYWxGaWxlPzogKGZpbGU6IFRGaWxlKSA9PiB2b2lkIH0gfSkudHJlZTtcblx0XHRcdFx0XHRcdGlmIChmaWxlVHJlZSAmJiBuZXdGaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgdHlwZW9mIGZpbGVUcmVlLnJldmVhbEZpbGUgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdFx0ZmlsZVRyZWUucmV2ZWFsRmlsZShuZXdGaWxlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sIDIwMCk7XG5cblx0XHRcdGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG5cdFx0XHRhd2FpdCBsZWFmLm9wZW5GaWxlKG5ld0ZpbGUpO1xuXG5cdFx0XHQvLyBQb3NpdGlvbiBjdXJzb3IgYXQgdGhlIGVuZCBvZiBjb250ZW50IGFmdGVyIGVkaXRvciBpcyByZWFkeVxuXHRcdFx0Y29uc3QgcG9zaXRpb25DdXJzb3IgPSAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXc7XG5cdFx0XHRcdGlmICh2aWV3ICYmICdlZGl0b3InIGluIHZpZXcpIHtcblx0XHRcdFx0XHRjb25zdCBlZGl0b3IgPSAodmlldyBhcyB7IGVkaXRvcj86IHsgc2V0Q3Vyc29yOiAocG9zOiB7IGxpbmU6IG51bWJlcjsgY2g6IG51bWJlciB9KSA9PiB2b2lkOyBnZXRWYWx1ZTogKCkgPT4gc3RyaW5nOyBmb2N1czogKCkgPT4gdm9pZCB9IH0pLmVkaXRvcjtcblx0XHRcdFx0XHRpZiAoZWRpdG9yKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cdFx0XHRcdFx0XHRpZiAoY29udGVudCkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsYXN0TGluZSA9IGxpbmVzLmxlbmd0aCAtIDE7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxhc3RMaW5lTGVuZ3RoID0gbGluZXNbbGFzdExpbmVdPy5sZW5ndGggfHwgMDtcblx0XHRcdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGxhc3RMaW5lLCBjaDogbGFzdExpbmVMZW5ndGggfSk7XG5cdFx0XHRcdFx0XHRcdGVkaXRvci5mb2N1cygpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fTtcblx0XHRcdFxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdGlmICghcG9zaXRpb25DdXJzb3IoKSkge1xuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0cG9zaXRpb25DdXJzb3IoKTtcblx0XHRcdFx0XHR9LCAyMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAxMDApO1xuXG5cdFx0XHRyZXR1cm4gbmV3RmlsZTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuXHRcdFx0bmV3IE5vdGljZShgRmFpbGVkIHRvIGNyZWF0ZSBmb2xkZXIgc3RydWN0dXJlOiAke2Vycm9yTWVzc2FnZX0uYCk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZUZpbGVTdHJ1Y3R1cmUoZmlsZTogVEZpbGUsIGtlYmFiVGl0bGU6IHN0cmluZywgcHJlZml4OiBzdHJpbmcsIHRhcmdldEZvbGRlcjogc3RyaW5nLCBjb250ZW50VHlwZTogQ29udGVudFR5cGUgfCBudWxsKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcblx0XHRjb25zdCBleHRlbnNpb24gPSBjb250ZW50VHlwZT8udXNlTWR4RXh0ZW5zaW9uID8gXCIubWR4XCIgOiBcIi5tZFwiO1xuXHRcdGNvbnN0IG5ld05hbWUgPSBgJHtwcmVmaXh9JHtrZWJhYlRpdGxlfSR7ZXh0ZW5zaW9ufWA7XG5cdFx0bGV0IG5ld1BhdGg6IHN0cmluZztcblx0XHRcblx0XHRpZiAodGFyZ2V0Rm9sZGVyKSB7XG5cdFx0XHQvLyBNb3ZlIHRvIHRhcmdldCBmb2xkZXJcblx0XHRcdG5ld1BhdGggPSBgJHt0YXJnZXRGb2xkZXJ9LyR7bmV3TmFtZX1gO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBLZWVwIGluIGN1cnJlbnQgbG9jYXRpb24sIGp1c3QgcmVuYW1lIHRoZSBmaWxlXG5cdFx0XHRjb25zdCBjdXJyZW50RGlyID0gZmlsZS5wYXJlbnQgPyBmaWxlLnBhcmVudC5wYXRoIDogXCJcIjtcblx0XHRcdGlmIChjdXJyZW50RGlyICYmIGN1cnJlbnREaXIgIT09IFwiL1wiKSB7XG5cdFx0XHRcdG5ld1BhdGggPSBgJHtjdXJyZW50RGlyfS8ke25ld05hbWV9YDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEZpbGUgaXMgaW4gdmF1bHQgcm9vdCwganVzdCB1c2UgbmV3IG5hbWVcblx0XHRcdFx0bmV3UGF0aCA9IG5ld05hbWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld1BhdGgpO1xuXHRcdGlmIChleGlzdGluZ0ZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBleGlzdGluZ0ZpbGUgIT09IGZpbGUpIHtcblx0XHRcdG5ldyBOb3RpY2UoYEZpbGUgd2l0aCBuYW1lIFwiJHtuZXdOYW1lfVwiIGFscmVhZHkgZXhpc3RzLmApO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gVHJhY2sgdGhhdCB0aGlzIGZpbGUgd2lsbCBiZSBjcmVhdGVkIGJ5IHRoZSBwbHVnaW4gQkVGT1JFIHJlbmFtaW5nXG5cdFx0Ly8gVGhpcyBwcmV2ZW50cyB0aGUgY3JlYXRlIGV2ZW50IGZyb20gdHJpZ2dlcmluZyBhbm90aGVyIG1vZGFsXG5cdFx0aWYgKHRoaXMucGx1Z2luICYmICdwbHVnaW5DcmVhdGVkRmlsZXMnIGluIHRoaXMucGx1Z2luKSB7XG5cdFx0XHRjb25zdCBwbHVnaW5XaXRoRmlsZXMgPSB0aGlzLnBsdWdpbiBhcyB7IHBsdWdpbkNyZWF0ZWRGaWxlcz86IFNldDxzdHJpbmc+IH07XG5cdFx0XHRwbHVnaW5XaXRoRmlsZXMucGx1Z2luQ3JlYXRlZEZpbGVzPy5hZGQobmV3UGF0aCk7XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdC8vIFVzZSBmaWxlTWFuYWdlci5yZW5hbWVGaWxlKCkgd2hpY2ggcmVzcGVjdHMgdXNlciBzZXR0aW5ncyBhbmQgaGFuZGxlcyBhbGwgbGluayBmb3JtYXRzXG5cdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xuXHRcdFx0XG5cdFx0XHRjb25zdCBuZXdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld1BhdGgpO1xuXHRcdFx0aWYgKCEobmV3RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGxvY2F0ZSByZW5hbWVkIGZpbGUuXCIpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKTtcblx0XHRcdGF3YWl0IGxlYWYub3BlbkZpbGUobmV3RmlsZSk7XG5cblx0XHRcdC8vIFBvc2l0aW9uIGN1cnNvciBhdCB0aGUgZW5kIG9mIGNvbnRlbnQgYWZ0ZXIgZWRpdG9yIGlzIHJlYWR5XG5cdFx0XHRjb25zdCBwb3NpdGlvbkN1cnNvciA9ICgpID0+IHtcblx0XHRcdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldztcblx0XHRcdFx0aWYgKHZpZXcgJiYgJ2VkaXRvcicgaW4gdmlldykge1xuXHRcdFx0XHRcdGNvbnN0IGVkaXRvciA9ICh2aWV3IGFzIHsgZWRpdG9yPzogeyBzZXRDdXJzb3I6IChwb3M6IHsgbGluZTogbnVtYmVyOyBjaDogbnVtYmVyIH0pID0+IHZvaWQ7IGdldFZhbHVlOiAoKSA9PiBzdHJpbmc7IGZvY3VzOiAoKSA9PiB2b2lkIH0gfSkuZWRpdG9yO1xuXHRcdFx0XHRcdGlmIChlZGl0b3IpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblx0XHRcdFx0XHRcdGlmIChjb250ZW50KSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxhc3RMaW5lID0gbGluZXMubGVuZ3RoIC0gMTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbGFzdExpbmVMZW5ndGggPSBsaW5lc1tsYXN0TGluZV0/Lmxlbmd0aCB8fCAwO1xuXHRcdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogbGFzdExpbmUsIGNoOiBsYXN0TGluZUxlbmd0aCB9KTtcblx0XHRcdFx0XHRcdFx0ZWRpdG9yLmZvY3VzKCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9O1xuXHRcdFx0XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0aWYgKCFwb3NpdGlvbkN1cnNvcigpKSB7XG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRwb3NpdGlvbkN1cnNvcigpO1xuXHRcdFx0XHRcdH0sIDIwMCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIDEwMCk7XG5cblx0XHRcdHJldHVybiBuZXdGaWxlO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG5cdFx0XHRuZXcgTm90aWNlKGBGYWlsZWQgdG8gcmVuYW1lIGZpbGU6ICR7ZXJyb3JNZXNzYWdlfS5gKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxuXG5cblx0YXN5bmMgcmVuYW1lRmlsZShvcHRpb25zOiBSZW5hbWVPcHRpb25zKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcblx0XHRjb25zdCB7IGZpbGUsIHRpdGxlLCB0eXBlIH0gPSBvcHRpb25zO1xuXHRcdFxuXHRcdGlmICghdGl0bGUpIHtcblx0XHRcdG5ldyBOb3RpY2UoYFRpdGxlIGlzIHJlcXVpcmVkIHRvIHJlbmFtZSB0aGUgY29udGVudC5gKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gdGhpcy5nZXRDb250ZW50VHlwZSh0eXBlKTtcblx0XHRpZiAoIWNvbnRlbnRUeXBlICYmIHR5cGUgIT09IFwibm90ZVwiKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBDb250ZW50IHR5cGUgJHt0eXBlfSBub3QgZm91bmQuYCk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRjb25zdCBrZWJhYlRpdGxlID0gdGhpcy50b0tlYmFiQ2FzZSh0aXRsZSk7XG5cdFx0Y29uc3QgcHJlZml4ID0gXCJcIjtcblxuXHRcdGNvbnN0IGNyZWF0aW9uTW9kZSA9IGNvbnRlbnRUeXBlPy5jcmVhdGlvbk1vZGUgfHwgXCJmaWxlXCI7XG5cdFx0aWYgKGNyZWF0aW9uTW9kZSA9PT0gXCJmb2xkZXJcIikge1xuXHRcdFx0cmV0dXJuIHRoaXMucmVuYW1lRm9sZGVyU3RydWN0dXJlKGZpbGUsIGtlYmFiVGl0bGUsIHByZWZpeCwgdHlwZSwgY29udGVudFR5cGUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5yZW5hbWVGaWxlU3RydWN0dXJlKGZpbGUsIGtlYmFiVGl0bGUsIHByZWZpeCwgY29udGVudFR5cGUpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcmVuYW1lRm9sZGVyU3RydWN0dXJlKGZpbGU6IFRGaWxlLCBrZWJhYlRpdGxlOiBzdHJpbmcsIHByZWZpeDogc3RyaW5nLCB0eXBlOiBDb250ZW50VHlwZUlkLCBjb250ZW50VHlwZTogQ29udGVudFR5cGUgfCBudWxsKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcblx0XHQvLyBTbWFydCBkZXRlY3Rpb246IHRyZWF0IGFzIGluZGV4IGlmIGZpbGVuYW1lIG1hdGNoZXMgdGhlIGluZGV4IGZpbGUgbmFtZVxuXHRcdC8vIERlZmF1bHQgdG8gXCJpbmRleFwiIHdoZW4gaW5kZXhGaWxlTmFtZSBpcyBibGFua1xuXHRcdGNvbnN0IGluZGV4RmlsZU5hbWUgPSBjb250ZW50VHlwZT8uaW5kZXhGaWxlTmFtZSB8fCBcImluZGV4XCI7XG5cdFx0Y29uc3QgaXNJbmRleCA9IGZpbGUuYmFzZW5hbWUgPT09IGluZGV4RmlsZU5hbWU7XG5cdFx0aWYgKGlzSW5kZXgpIHtcblx0XHRcdGlmICghZmlsZS5wYXJlbnQpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIkNhbm5vdCByZW5hbWU6IGZpbGUgaGFzIG5vIHBhcmVudCBmb2xkZXIuXCIpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHRcdHByZWZpeCA9IGZpbGUucGFyZW50Lm5hbWUuc3RhcnRzV2l0aChcIl9cIikgPyBcIl9cIiA6IFwiXCI7XG5cdFx0XHRjb25zdCBuZXdGb2xkZXJOYW1lID0gYCR7cHJlZml4fSR7a2ViYWJUaXRsZX1gO1xuXHRcdFx0Y29uc3QgcGFyZW50Rm9sZGVyID0gZmlsZS5wYXJlbnQucGFyZW50O1xuXHRcdFx0aWYgKCFwYXJlbnRGb2xkZXIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIkNhbm5vdCByZW5hbWU6IHBhcmVudCBmb2xkZXIgaGFzIG5vIHBhcmVudC5cIik7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0Ly8gRml4IHBhdGggY29uc3RydWN0aW9uIHRvIGF2b2lkIGRvdWJsZSBzbGFzaGVzXG5cdFx0XHRsZXQgbmV3Rm9sZGVyUGF0aDogc3RyaW5nO1xuXHRcdFx0aWYgKHBhcmVudEZvbGRlci5wYXRoID09PSBcIlwiIHx8IHBhcmVudEZvbGRlci5wYXRoID09PSBcIi9cIikge1xuXHRcdFx0XHQvLyBQYXJlbnQgaXMgdmF1bHQgcm9vdFxuXHRcdFx0XHRuZXdGb2xkZXJQYXRoID0gbmV3Rm9sZGVyTmFtZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFBhcmVudCBpcyBpbiBhIHN1YmZvbGRlclxuXHRcdFx0XHRuZXdGb2xkZXJQYXRoID0gYCR7cGFyZW50Rm9sZGVyLnBhdGh9LyR7bmV3Rm9sZGVyTmFtZX1gO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBleGlzdGluZ0ZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdGb2xkZXJQYXRoKTtcblx0XHRcdGlmIChleGlzdGluZ0ZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRm9sZGVyIGFscmVhZHkgZXhpc3RzIGF0ICR7bmV3Rm9sZGVyUGF0aH0uYCk7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUucGFyZW50LCBuZXdGb2xkZXJQYXRoKTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcblx0XHRcdFx0bmV3IE5vdGljZShgRmFpbGVkIHRvIHJlbmFtZSBmb2xkZXI6ICR7ZXJyb3JNZXNzYWdlfS5gKTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGNvbnN0IG5ld0ZpbGVQYXRoID0gYCR7bmV3Rm9sZGVyUGF0aH0vJHtmaWxlLm5hbWV9YDtcblx0XHRcdGNvbnN0IG5ld0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3RmlsZVBhdGgpO1xuXHRcdFx0aWYgKCEobmV3RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGxvY2F0ZSByZW5hbWVkIGZpbGUuXCIpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0XG5cdFx0XHRyZXR1cm4gbmV3RmlsZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCFmaWxlLnBhcmVudCkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQ2Fubm90IHJlbmFtZTogZmlsZSBoYXMgbm8gcGFyZW50IGZvbGRlci5cIik7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0cHJlZml4ID0gZmlsZS5iYXNlbmFtZS5zdGFydHNXaXRoKFwiX1wiKSA/IFwiX1wiIDogXCJcIjtcblx0XHRcdC8vIFByZXNlcnZlIHRoZSBvcmlnaW5hbCBmaWxlIGV4dGVuc2lvblxuXHRcdFx0Y29uc3QgZXh0ZW5zaW9uID0gZmlsZS5leHRlbnNpb247XG5cdFx0XHRjb25zdCBuZXdOYW1lID0gYCR7cHJlZml4fSR7a2ViYWJUaXRsZX0uJHtleHRlbnNpb259YDtcblx0XHRcdGNvbnN0IG5ld1BhdGggPSBgJHtmaWxlLnBhcmVudC5wYXRofS8ke25ld05hbWV9YDtcblxuXHRcdFx0Y29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld1BhdGgpO1xuXHRcdFx0aWYgKGV4aXN0aW5nRmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGV4aXN0aW5nRmlsZSAhPT0gZmlsZSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBGaWxlIGFscmVhZHkgZXhpc3RzIGF0ICR7bmV3UGF0aH0uYCk7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBVc2UgZmlsZU1hbmFnZXIucmVuYW1lRmlsZSgpIHdoaWNoIGF1dG9tYXRpY2FsbHkgdXBkYXRlcyBsaW5rc1xuXHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLCBuZXdQYXRoKTtcblx0XHRcdGNvbnN0IG5ld0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3UGF0aCk7XG5cdFx0XHRpZiAoIShuZXdGaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gbG9jYXRlIHJlbmFtZWQgZmlsZS5cIik7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRcblx0XHRcdHJldHVybiBuZXdGaWxlO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcmVuYW1lRmlsZVN0cnVjdHVyZShmaWxlOiBURmlsZSwga2ViYWJUaXRsZTogc3RyaW5nLCBwcmVmaXg6IHN0cmluZywgY29udGVudFR5cGU6IENvbnRlbnRUeXBlIHwgbnVsbCk6IFByb21pc2U8VEZpbGUgfCBudWxsPiB7XG5cdFx0aWYgKCFmaWxlLnBhcmVudCkge1xuXHRcdFx0bmV3IE5vdGljZShcIkNhbm5vdCByZW5hbWU6IGZpbGUgaGFzIG5vIHBhcmVudCBmb2xkZXIuXCIpO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYW4gaW5kZXggZmlsZSAtIGlmIHNvLCByZW5hbWUgdGhlIHBhcmVudCBmb2xkZXIgaW5zdGVhZFxuXHRcdC8vIFNtYXJ0IGRldGVjdGlvbjogb25seSB0cmVhdCBhcyBpbmRleCBpZiBpbmRleEZpbGVOYW1lIGlzIHNwZWNpZmllZCBhbmQgbWF0Y2hlc1xuXHRcdGNvbnN0IGluZGV4RmlsZU5hbWUgPSBjb250ZW50VHlwZT8uaW5kZXhGaWxlTmFtZSB8fCBcIlwiO1xuXHRcdGNvbnN0IGlzSW5kZXggPSBpbmRleEZpbGVOYW1lICYmIFxuXHRcdFx0aW5kZXhGaWxlTmFtZS50cmltKCkgIT09IFwiXCIgJiYgXG5cdFx0XHRmaWxlLmJhc2VuYW1lID09PSBpbmRleEZpbGVOYW1lO1xuXHRcdFxuXHRcdGlmIChpc0luZGV4KSB7XG5cdFx0XHRwcmVmaXggPSBmaWxlLnBhcmVudC5uYW1lLnN0YXJ0c1dpdGgoXCJfXCIpID8gXCJfXCIgOiBcIlwiO1xuXHRcdFx0Y29uc3QgbmV3Rm9sZGVyTmFtZSA9IGAke3ByZWZpeH0ke2tlYmFiVGl0bGV9YDtcblx0XHRcdGNvbnN0IHBhcmVudEZvbGRlciA9IGZpbGUucGFyZW50LnBhcmVudDtcblx0XHRcdGlmICghcGFyZW50Rm9sZGVyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDYW5ub3QgcmVuYW1lOiBwYXJlbnQgZm9sZGVyIGhhcyBubyBwYXJlbnQuXCIpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHRcdC8vIEZpeCBwYXRoIGNvbnN0cnVjdGlvbiB0byBhdm9pZCBkb3VibGUgc2xhc2hlc1xuXHRcdFx0bGV0IG5ld0ZvbGRlclBhdGg6IHN0cmluZztcblx0XHRcdGlmIChwYXJlbnRGb2xkZXIucGF0aCA9PT0gXCJcIiB8fCBwYXJlbnRGb2xkZXIucGF0aCA9PT0gXCIvXCIpIHtcblx0XHRcdFx0Ly8gUGFyZW50IGlzIHZhdWx0IHJvb3Rcblx0XHRcdFx0bmV3Rm9sZGVyUGF0aCA9IG5ld0ZvbGRlck5hbWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBQYXJlbnQgaXMgaW4gYSBzdWJmb2xkZXJcblx0XHRcdFx0bmV3Rm9sZGVyUGF0aCA9IGAke3BhcmVudEZvbGRlci5wYXRofS8ke25ld0ZvbGRlck5hbWV9YDtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgZXhpc3RpbmdGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3Rm9sZGVyUGF0aCk7XG5cdFx0XHRpZiAoZXhpc3RpbmdGb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEZvbGRlciBhbHJlYWR5IGV4aXN0cyBhdCAke25ld0ZvbGRlclBhdGh9LmApO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHRoZSBuZXcgZmlsZSBwYXRoIGJlZm9yZSByZW5hbWluZ1xuXHRcdFx0Y29uc3QgbmV3RmlsZVBhdGggPSBgJHtuZXdGb2xkZXJQYXRofS8ke2ZpbGUubmFtZX1gO1xuXHRcdFx0XG5cdFx0XHQvLyBUcmFjayB0aGF0IHRoaXMgZmlsZSB3aWxsIGJlIGNyZWF0ZWQgYnkgdGhlIHBsdWdpbiBCRUZPUkUgcmVuYW1pbmdcblx0XHRcdC8vIFRoaXMgcHJldmVudHMgdGhlIGNyZWF0ZSBldmVudCBmcm9tIHRyaWdnZXJpbmcgYW5vdGhlciBtb2RhbFxuXHRcdFx0aWYgKHRoaXMucGx1Z2luICYmICdwbHVnaW5DcmVhdGVkRmlsZXMnIGluIHRoaXMucGx1Z2luKSB7XG5cdFx0XHRcdGNvbnN0IHBsdWdpbldpdGhGaWxlcyA9IHRoaXMucGx1Z2luIGFzIHsgcGx1Z2luQ3JlYXRlZEZpbGVzPzogU2V0PHN0cmluZz4gfTtcblx0XHRcdFx0cGx1Z2luV2l0aEZpbGVzLnBsdWdpbkNyZWF0ZWRGaWxlcz8uYWRkKG5ld0ZpbGVQYXRoKTtcblx0XHRcdH1cblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLnBhcmVudCwgbmV3Rm9sZGVyUGF0aCk7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdGaWxlT3BlcmF0aW9uczogRm9sZGVyIHJlbmFtZSBmYWlsZWQ6JywgZXJyb3IpO1xuXHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byByZW5hbWUgZm9sZGVyOiAke2Vycm9yTWVzc2FnZX0uYCk7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRjb25zdCBuZXdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld0ZpbGVQYXRoKTtcblx0XHRcdGlmICghKG5ld0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIkZhaWxlZCB0byBsb2NhdGUgcmVuYW1lZCBmaWxlLlwiKTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdHJldHVybiBuZXdGaWxlO1xuXHRcdH1cblx0XHRcblx0XHQvLyBGb3Igbm9uLWluZGV4IGZpbGVzLCByZW5hbWUgdGhlIGZpbGUgaXRzZWxmXG5cdFx0cHJlZml4ID0gZmlsZS5iYXNlbmFtZS5zdGFydHNXaXRoKFwiX1wiKSA/IFwiX1wiIDogXCJcIjtcblx0XHQvLyBQcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgZmlsZSBleHRlbnNpb25cblx0XHRjb25zdCBleHRlbnNpb24gPSBmaWxlLmV4dGVuc2lvbjtcblx0XHRjb25zdCBuZXdOYW1lID0gYCR7cHJlZml4fSR7a2ViYWJUaXRsZX0uJHtleHRlbnNpb259YDtcblx0XHRcblx0XHQvLyBGaXggcGF0aCBjb25zdHJ1Y3Rpb24gdG8gYXZvaWQgZG91YmxlIHNsYXNoZXNcblx0XHRsZXQgbmV3UGF0aDogc3RyaW5nO1xuXHRcdGlmIChmaWxlLnBhcmVudC5wYXRoID09PSBcIlwiIHx8IGZpbGUucGFyZW50LnBhdGggPT09IFwiL1wiKSB7XG5cdFx0XHQvLyBGaWxlIGlzIGluIHZhdWx0IHJvb3Rcblx0XHRcdG5ld1BhdGggPSBuZXdOYW1lO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBGaWxlIGlzIGluIGEgc3ViZm9sZGVyXG5cdFx0XHRuZXdQYXRoID0gYCR7ZmlsZS5wYXJlbnQucGF0aH0vJHtuZXdOYW1lfWA7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld1BhdGgpO1xuXHRcdGlmIChleGlzdGluZ0ZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBleGlzdGluZ0ZpbGUgIT09IGZpbGUpIHtcblx0XHRcdG5ldyBOb3RpY2UoYEZpbGUgYWxyZWFkeSBleGlzdHMgYXQgJHtuZXdQYXRofS5gKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdC8vIFRyYWNrIHRoYXQgdGhpcyBmaWxlIHdpbGwgYmUgY3JlYXRlZCBieSB0aGUgcGx1Z2luIEJFRk9SRSByZW5hbWluZ1xuXHRcdC8vIFRoaXMgcHJldmVudHMgdGhlIGNyZWF0ZSBldmVudCBmcm9tIHRyaWdnZXJpbmcgYW5vdGhlciBtb2RhbFxuXHRcdGlmICh0aGlzLnBsdWdpbiAmJiAncGx1Z2luQ3JlYXRlZEZpbGVzJyBpbiB0aGlzLnBsdWdpbikge1xuXHRcdFx0Y29uc3QgcGx1Z2luV2l0aEZpbGVzID0gdGhpcy5wbHVnaW4gYXMgeyBwbHVnaW5DcmVhdGVkRmlsZXM/OiBTZXQ8c3RyaW5nPiB9O1xuXHRcdFx0cGx1Z2luV2l0aEZpbGVzLnBsdWdpbkNyZWF0ZWRGaWxlcz8uYWRkKG5ld1BhdGgpO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdGaWxlT3BlcmF0aW9uczogRmlsZSByZW5hbWUgZmFpbGVkOicsIGVycm9yKTtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcblx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byByZW5hbWUgZmlsZTogJHtlcnJvck1lc3NhZ2V9LmApO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdFxuXHRcdGNvbnN0IG5ld0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3UGF0aCk7XG5cdFx0aWYgKCEobmV3RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0bmV3IE5vdGljZShcIkZhaWxlZCB0byBsb2NhdGUgcmVuYW1lZCBmaWxlLlwiKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRcblx0XHRyZXR1cm4gbmV3RmlsZTtcblx0fVxufVxuIiwgIi8qKlxyXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbWF0Y2hpbmcgZmlsZSBwYXRocyBhZ2FpbnN0IGZvbGRlciBwYXR0ZXJucyB3aXRoIHdpbGRjYXJkIHN1cHBvcnQuXHJcbiAqIFxyXG4gKiBXaWxkY2FyZCBwYXR0ZXJuczpcclxuICogLSBgZG9jc2AgbWF0Y2hlcyBgZG9jcy9gIGFuZCBhbnl0aGluZyB1bmRlciBpdFxyXG4gKiAtIGBkb2NzL3thc3Rlcmlza31gIG1hdGNoZXMgYGRvY3MvYW55dGhpbmcvYCBhbmQgYW55dGhpbmcgdW5kZXIgaXQgKG9uZSBsZXZlbCBkZWVwKVxyXG4gKiAtIGBkb2NzL3thc3Rlcmlza30ve2FzdGVyaXNrfWAgbWF0Y2hlcyBgZG9jcy9hbnl0aGluZy9hbnl0aGluZy9gIGFuZCBhbnl0aGluZyB1bmRlciBpdCAodHdvIGxldmVscyBkZWVwKVxyXG4gKiAtIGV0Yy5cclxuICogXHJcbiAqIE5vdGU6IHthc3Rlcmlza30gcmVwcmVzZW50cyB0aGUgd2lsZGNhcmQgY2hhcmFjdGVyICpcclxuICovXHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIGEgZmlsZSBwYXRoIG1hdGNoZXMgYSBmb2xkZXIgcGF0dGVybiAoc3VwcG9ydHMgd2lsZGNhcmRzKVxyXG4gKiBAcGFyYW0gZmlsZVBhdGggVGhlIGZpbGUgcGF0aCB0byBjaGVjayAoZS5nLiwgXCJkb2NzL2V4YW1wbGUtYS9nZXR0aW5nLXN0YXJ0ZWQubWRcIilcclxuICogQHBhcmFtIGZvbGRlclBhdHRlcm4gVGhlIGZvbGRlciBwYXR0ZXJuIC0gdXNlIGFzdGVyaXNrIGZvciB3aWxkY2FyZHMgKGUuZy4sIFwiZG9jc1wiLCBcImRvY3MvYXN0ZXJpc2tcIiwgXCJkb2NzL2FzdGVyaXNrL2FzdGVyaXNrXCIpXHJcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGZpbGUgcGF0aCBtYXRjaGVzIHRoZSBwYXR0ZXJuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hlc0ZvbGRlclBhdHRlcm4oZmlsZVBhdGg6IHN0cmluZywgZm9sZGVyUGF0dGVybjogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0Ly8gSGFuZGxlIGVtcHR5IGZvbGRlciBwYXR0ZXJuIChyb290IGZvbGRlcikgLSBtYXRjaGVzIGZpbGVzIGluIHZhdWx0IHJvb3Qgb25seVxyXG5cdGlmICghZm9sZGVyUGF0dGVybiB8fCBmb2xkZXJQYXR0ZXJuLnRyaW0oKSA9PT0gXCJcIikge1xyXG5cdFx0Ly8gUm9vdCBmb2xkZXIgbWF0Y2hlcyBmaWxlcyB0aGF0IGRvbid0IGhhdmUgYW55IHBhdGggc2VwYXJhdG9yc1xyXG5cdFx0Ly8gb3IgYXJlIGluIHZhdWx0IHJvb3QgKG5vIGxlYWRpbmcgc2xhc2gsIHNpbmdsZSBzZWdtZW50KVxyXG5cdFx0cmV0dXJuICFmaWxlUGF0aC5pbmNsdWRlcyhcIi9cIikgfHwgKGZpbGVQYXRoLnNwbGl0KFwiL1wiKS5sZW5ndGggPT09IDEpO1xyXG5cdH1cclxuXHJcblx0Ly8gSWYgcGF0dGVybiBkb2Vzbid0IGNvbnRhaW4gd2lsZGNhcmRzLCB1c2Ugc2ltcGxlIHByZWZpeCBtYXRjaGluZ1xyXG5cdGlmICghZm9sZGVyUGF0dGVybi5pbmNsdWRlcyhcIipcIikpIHtcclxuXHRcdHJldHVybiBmaWxlUGF0aCA9PT0gZm9sZGVyUGF0dGVybiB8fCBmaWxlUGF0aC5zdGFydHNXaXRoKGZvbGRlclBhdHRlcm4gKyBcIi9cIik7XHJcblx0fVxyXG5cclxuXHQvLyBDb252ZXJ0IHdpbGRjYXJkIHBhdHRlcm4gdG8gcmVnZXhcclxuXHQvLyBFc2NhcGUgc3BlY2lhbCByZWdleCBjaGFyYWN0ZXJzIGV4Y2VwdCAqXHJcblx0Y29uc3QgZXNjYXBlZFBhdHRlcm4gPSBmb2xkZXJQYXR0ZXJuXHJcblx0XHQucmVwbGFjZSgvWy4rP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIilcclxuXHRcdC5yZXBsYWNlKC9cXCovZywgXCJbXi9dK1wiKTsgLy8gV2lsZGNhcmQgbWF0Y2hlcyBhbnkgcGF0aCBzZWdtZW50IChub24tc2xhc2ggY2hhcmFjdGVycylcclxuXHJcblx0Ly8gQ3JlYXRlIHJlZ2V4IHRoYXQgbWF0Y2hlcyB0aGUgcGF0dGVybiBhbmQgYW55dGhpbmcgYWZ0ZXIgaXRcclxuXHRjb25zdCByZWdleFBhdHRlcm4gPSBgXiR7ZXNjYXBlZFBhdHRlcm59KD86L3wkKWA7XHJcblx0Y29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4UGF0dGVybik7XHJcblx0cmV0dXJuIHJlZ2V4LnRlc3QoZmlsZVBhdGgpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0cyB0aGUgZGVwdGggb2YgYSBmb2xkZXIgcGF0dGVybiAobnVtYmVyIG9mIHNlZ21lbnRzKVxyXG4gKiBVc2VkIGZvciBwcmlvcml0aXppbmcgbW9yZSBzcGVjaWZpYyBwYXR0ZXJuc1xyXG4gKiBCbGFuay9yb290IGZvbGRlciBoYXMgZGVwdGggMCAobGVhc3Qgc3BlY2lmaWMpXHJcbiAqIEBwYXJhbSBmb2xkZXJQYXR0ZXJuIFRoZSBmb2xkZXIgcGF0dGVyblxyXG4gKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIHBhdGggc2VnbWVudHMgaW4gdGhlIHBhdHRlcm4gKDAgZm9yIHJvb3QvYmxhbmspXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGF0dGVybkRlcHRoKGZvbGRlclBhdHRlcm46IHN0cmluZyk6IG51bWJlciB7XHJcblx0aWYgKCFmb2xkZXJQYXR0ZXJuIHx8IGZvbGRlclBhdHRlcm4udHJpbSgpID09PSBcIlwiKSByZXR1cm4gMDtcclxuXHRyZXR1cm4gZm9sZGVyUGF0dGVybi5zcGxpdChcIi9cIikubGVuZ3RoO1xyXG59XHJcblxyXG4vKipcclxuICogU29ydHMgY29udGVudCB0eXBlcyBieSBwYXR0ZXJuIHNwZWNpZmljaXR5IChtb3JlIHNwZWNpZmljIHBhdHRlcm5zIGZpcnN0KVxyXG4gKiBUaGlzIGVuc3VyZXMgdGhhdCBtb3JlIHNwZWNpZmljIHBhdHRlcm5zIGFyZSBjaGVja2VkIGJlZm9yZSBsZXNzIHNwZWNpZmljIG9uZXNcclxuICogQmxhbmsvcm9vdCBmb2xkZXIgcGF0dGVybnMgKGRlcHRoIDApIGFyZSBzb3J0ZWQgbGFzdCAobGVhc3Qgc3BlY2lmaWMpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc29ydEJ5UGF0dGVyblNwZWNpZmljaXR5PFQgZXh0ZW5kcyB7IGZvbGRlcjogc3RyaW5nIH0+KHR5cGVzOiBUW10pOiBUW10ge1xyXG5cdHJldHVybiBbLi4udHlwZXNdLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdGNvbnN0IGRlcHRoQSA9IGdldFBhdHRlcm5EZXB0aChhLmZvbGRlcik7XHJcblx0XHRjb25zdCBkZXB0aEIgPSBnZXRQYXR0ZXJuRGVwdGgoYi5mb2xkZXIpO1xyXG5cdFx0Ly8gTW9yZSBzcGVjaWZpYyAoZGVlcGVyKSBwYXR0ZXJucyBmaXJzdFxyXG5cdFx0Ly8gQmxhbmsgcGF0dGVybnMgKGRlcHRoIDApIHdpbGwgYmUgc29ydGVkIGxhc3RcclxuXHRcdHJldHVybiBkZXB0aEIgLSBkZXB0aEE7XHJcblx0fSk7XHJcbn1cclxuXHJcbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgQXN0cm9Db21wb3NlclNldHRpbmdzLCBQYXJzZWRGcm9udG1hdHRlciwgVGVtcGxhdGVWYWx1ZXMsIEtOT1dOX0FSUkFZX0tFWVMsIENvbnRlbnRUeXBlSWQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZVBhcnNlciB7XHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCwgcHJpdmF0ZSBzZXR0aW5nczogQXN0cm9Db21wb3NlclNldHRpbmdzKSB7fVxyXG5cclxuXHQvKipcclxuXHQgKiBDb252ZXJ0IGEgc3RyaW5nIHRvIGtlYmFiLWNhc2UgZm9yIHNsdWcgZ2VuZXJhdGlvblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgdG9LZWJhYkNhc2Uoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHN0clxyXG5cdFx0XHQudG9Mb3dlckNhc2UoKVxyXG5cdFx0XHQucmVwbGFjZSgvW15hLXowLTlcXHMtXS9nLCBcIlwiKVxyXG5cdFx0XHQudHJpbSgpXHJcblx0XHRcdC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxyXG5cdFx0XHQucmVwbGFjZSgvLSsvZywgXCItXCIpXHJcblx0XHRcdC5yZXBsYWNlKC9eLXwtJC9nLCBcIlwiKTtcclxuXHR9XHJcblxyXG5cdHBhcnNlRnJvbnRtYXR0ZXIoY29udGVudDogc3RyaW5nKTogUGFyc2VkRnJvbnRtYXR0ZXIge1xyXG5cdFx0bGV0IHByb3BlcnRpZXNFbmQgPSAwO1xyXG5cdFx0bGV0IHByb3BlcnRpZXNUZXh0ID0gXCJcIjtcclxuXHRcdGNvbnN0IGV4aXN0aW5nUHJvcGVydGllczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge307XHJcblxyXG5cdFx0Ly8gUGFyc2UgZXhpc3RpbmcgcHJvcGVydGllcyB3aXRoIGZhbGxiYWNrIGZvciBtaXNzaW5nIHNlY29uZCAtLS1cclxuXHRcdGlmIChjb250ZW50LnN0YXJ0c1dpdGgoXCItLS1cIikpIHtcclxuXHRcdFx0cHJvcGVydGllc0VuZCA9IGNvbnRlbnQuaW5kZXhPZihcIlxcbi0tLVwiLCAzKTtcclxuXHRcdFx0aWYgKHByb3BlcnRpZXNFbmQgPT09IC0xKSB7XHJcblx0XHRcdFx0cHJvcGVydGllc0VuZCA9IGNvbnRlbnQubGVuZ3RoOyAvLyBUcmVhdCBlbnRpcmUgY29udGVudCBhcyBwcm9wZXJ0aWVzIGlmIG5vIHNlY29uZCAtLS1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRwcm9wZXJ0aWVzRW5kICs9IDQ7IC8vIE1vdmUgcGFzdCB0aGUgc2Vjb25kIC0tLVxyXG5cdFx0XHR9XHJcblx0XHRcdHByb3BlcnRpZXNUZXh0ID0gY29udGVudC5zbGljZSg0LCBwcm9wZXJ0aWVzRW5kIC0gNCkudHJpbSgpO1xyXG5cdFx0XHRcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRsZXQgY3VycmVudEtleTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgYXJyYXlLZXlzID0gbmV3IFNldDxzdHJpbmc+KCk7IC8vIFRyYWNrIHdoaWNoIGtleXMgYXJlIGFycmF5c1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHByb3BlcnRpZXNUZXh0LnNwbGl0KFwiXFxuXCIpLmZvckVhY2goKGxpbmUpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHRyaW1tZWRMaW5lID0gbGluZS50cmltKCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIE1hdGNoIHByb3BlcnR5IGxpbmVzIC0gbW9yZSBmbGV4aWJsZSByZWdleCB0byBoYW5kbGUgdmFyaW91cyBwcm9wZXJ0eSBuYW1lc1xyXG5cdFx0XHRcdFx0Y29uc3QgbWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXihbYS16QS1aX11bYS16QS1aMC05Xy1dKik6XFxzKiguKikkLyk7XHJcblx0XHRcdFx0XHRpZiAobWF0Y2gpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgWywga2V5LCB2YWx1ZV0gPSBtYXRjaDtcclxuXHRcdFx0XHRcdFx0Y3VycmVudEtleSA9IGtleTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgdHJpbW1lZFZhbHVlID0gdmFsdWUgPyB2YWx1ZS50cmltKCkgOiBcIlwiO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgZm9yIGJyYWNrZXQtc3ludGF4IGFycmF5czogW2l0ZW1dIG9yIFtcIml0ZW0xXCIsIFwiaXRlbTJcIl0gb3IgW2l0ZW0xLCBpdGVtMl1cclxuXHRcdFx0XHRcdFx0Y29uc3QgYnJhY2tldEFycmF5TWF0Y2ggPSB0cmltbWVkVmFsdWUubWF0Y2goL15cXFsoLiopXFxdJC8pO1xyXG5cdFx0XHRcdFx0XHRpZiAoYnJhY2tldEFycmF5TWF0Y2gpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBUaGlzIGlzIGEgYnJhY2tldC1mb3JtYXQgYXJyYXlcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBhcnJheUNvbnRlbnQgPSBicmFja2V0QXJyYXlNYXRjaFsxXS50cmltKCk7XHJcblx0XHRcdFx0XHRcdFx0ZXhpc3RpbmdQcm9wZXJ0aWVzW2tleV0gPSBbXTtcclxuXHRcdFx0XHRcdFx0XHRhcnJheUtleXMuYWRkKGtleSk7IC8vIE1hcmsgdGhpcyBrZXkgYXMgYW4gYXJyYXlcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRpZiAoYXJyYXlDb250ZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBQYXJzZSBhcnJheSBpdGVtcyAtIGhhbmRsZSBib3RoIHF1b3RlZCBhbmQgdW5xdW90ZWQgdmFsdWVzXHJcblx0XHRcdFx0XHRcdFx0XHQvLyBTcGxpdCBieSBjb21tYSwgYnV0IHJlc3BlY3QgcXVvdGVzXHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBpdGVtczogc3RyaW5nW10gPSBbXTtcclxuXHRcdFx0XHRcdFx0XHRcdGxldCBjdXJyZW50SXRlbSA9IFwiXCI7XHJcblx0XHRcdFx0XHRcdFx0XHRsZXQgaW5RdW90ZXMgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdGxldCBxdW90ZUNoYXIgPSAnJztcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheUNvbnRlbnQubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgY2hhciA9IGFycmF5Q29udGVudFtpXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghaW5RdW90ZXMgJiYgKGNoYXIgPT09ICdcIicgfHwgY2hhciA9PT0gXCInXCIpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aW5RdW90ZXMgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHF1b3RlQ2hhciA9IGNoYXI7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoaW5RdW90ZXMgJiYgY2hhciA9PT0gcXVvdGVDaGFyKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgaXQncyBlc2NhcGVkXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGkgPiAwICYmIGFycmF5Q29udGVudFtpIC0gMV0gPT09ICdcXFxcJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudEl0ZW0gKz0gY2hhcjtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aW5RdW90ZXMgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHF1b3RlQ2hhciA9ICcnO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICghaW5RdW90ZXMgJiYgY2hhciA9PT0gJywnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRW5kIG9mIGN1cnJlbnQgaXRlbVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRyaW1tZWRJdGVtID0gY3VycmVudEl0ZW0udHJpbSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0cmltbWVkSXRlbSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIHN1cnJvdW5kaW5nIHF1b3RlcyBpZiBwcmVzZW50XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCB1bnF1b3RlZCA9IHRyaW1tZWRJdGVtLnJlcGxhY2UoL15bXCInXXxbXCInXSQvZywgJycpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aXRlbXMucHVzaCh1bnF1b3RlZCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRJdGVtID0gXCJcIjtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50SXRlbSArPSBjaGFyO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEFkZCB0aGUgbGFzdCBpdGVtXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoY3VycmVudEl0ZW0udHJpbSgpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRyaW1tZWRJdGVtID0gY3VycmVudEl0ZW0udHJpbSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCB1bnF1b3RlZCA9IHRyaW1tZWRJdGVtLnJlcGxhY2UoL15bXCInXXxbXCInXSQvZywgJycpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpdGVtcy5wdXNoKHVucXVvdGVkKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0ZXhpc3RpbmdQcm9wZXJ0aWVzW2tleV0gPSBpdGVtcztcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gTm90IGEgYnJhY2tldCBhcnJheSwgY2hlY2sgZm9yIG90aGVyIGFycmF5IGZvcm1hdHNcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBpc0tub3duQXJyYXlLZXkgPSBLTk9XTl9BUlJBWV9LRVlTLmluY2x1ZGVzKGtleSBhcyB0eXBlb2YgS05PV05fQVJSQVlfS0VZU1tudW1iZXJdKTtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBpc0VtcHR5QXJyYXkgPSAhdHJpbW1lZFZhbHVlIHx8IHRyaW1tZWRWYWx1ZSA9PT0gXCJcIjtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBpc0FycmF5UHJvcGVydHkgPSBpc0tub3duQXJyYXlLZXkgfHwgaXNFbXB0eUFycmF5O1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChpc0FycmF5UHJvcGVydHkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGV4aXN0aW5nUHJvcGVydGllc1trZXldID0gW107XHJcblx0XHRcdFx0XHRcdFx0XHRhcnJheUtleXMuYWRkKGtleSk7IC8vIE1hcmsgdGhpcyBrZXkgYXMgYW4gYXJyYXlcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3RyaXAgc3Vycm91bmRpbmcgcXVvdGVzIGZyb20gc3RyaW5nIHZhbHVlc1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgdW5xdW90ZWRWYWx1ZSA9IHRyaW1tZWRWYWx1ZS5yZXBsYWNlKC9eW1wiJ118W1wiJ10kL2csICcnKTtcclxuXHRcdFx0XHRcdFx0XHRcdGV4aXN0aW5nUHJvcGVydGllc1trZXldID0gW3VucXVvdGVkVmFsdWVdO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChjdXJyZW50S2V5ICYmIHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoXCItIFwiKSkge1xyXG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBjdXJyZW50IGtleSBpcyBhbiBhcnJheSBwcm9wZXJ0eVxyXG5cdFx0XHRcdFx0XHRjb25zdCBpc0FycmF5UHJvcGVydHkgPSBhcnJheUtleXMuaGFzKGN1cnJlbnRLZXkpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKGlzQXJyYXlQcm9wZXJ0eSkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGl0ZW0gPSB0cmltbWVkTGluZS5yZXBsYWNlKC9eLVxccyovLCBcIlwiKTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoaXRlbSkgZXhpc3RpbmdQcm9wZXJ0aWVzW2N1cnJlbnRLZXldLnB1c2goaXRlbSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAodHJpbW1lZExpbmUgJiYgIXRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoXCItIFwiKSAmJiAhdHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIiNcIikpIHtcclxuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIHVucmVjb2duaXplZCBwcm9wZXJ0aWVzIHRoYXQgZG9uJ3QgbWF0Y2ggdGhlIHN0YW5kYXJkIGZvcm1hdFxyXG5cdFx0XHRcdFx0XHQvLyBUaGlzIGlzIGEgZmFsbGJhY2sgdG8gcHJlc2VydmUgcHJvcGVydGllcyB0aGF0IG1pZ2h0IGhhdmUgc3BlY2lhbCBmb3JtYXR0aW5nXHJcblx0XHRcdFx0XHRcdGNvbnN0IGtleU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14oW146XSspOlxccyooLiopJC8pO1xyXG5cdFx0XHRcdFx0XHRpZiAoa2V5TWF0Y2gpIHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBbLCBrZXksIHZhbHVlXSA9IGtleU1hdGNoO1xyXG5cdFx0XHRcdFx0XHRcdGlmICghZXhpc3RpbmdQcm9wZXJ0aWVzW2tleV0pIHtcclxuXHRcdFx0XHRcdFx0XHRcdGV4aXN0aW5nUHJvcGVydGllc1trZXldID0gW3ZhbHVlID8gdmFsdWUudHJpbSgpIDogXCJcIl07XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Ly8gUHJlc2VydmUgYXJyYXkga2V5cyBpZiB0aGV5IGV4aXN0IHdpdGhvdXQgdmFsdWVzXHJcblx0XHRcdFx0S05PV05fQVJSQVlfS0VZUy5mb3JFYWNoKGtleSA9PiB7XHJcblx0XHRcdFx0XHRpZiAocHJvcGVydGllc1RleHQuaW5jbHVkZXMoa2V5ICsgJzonKSAmJiAhZXhpc3RpbmdQcm9wZXJ0aWVzW2tleV0pIHtcclxuXHRcdFx0XHRcdFx0ZXhpc3RpbmdQcm9wZXJ0aWVzW2tleV0gPSBbXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gdGVtcGxhdGUgaWYgcGFyc2luZyBmYWlsc1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJGYWxsaW5nIGJhY2sgdG8gdGVtcGxhdGUgZHVlIHRvIHBhcnNpbmcgZXJyb3IuXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgYm9keUNvbnRlbnQgPSBjb250ZW50LnNsaWNlKHByb3BlcnRpZXNFbmQpO1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0cHJvcGVydGllczogZXhpc3RpbmdQcm9wZXJ0aWVzLFxyXG5cdFx0XHRwcm9wZXJ0aWVzVGV4dCxcclxuXHRcdFx0cHJvcGVydGllc0VuZCxcclxuXHRcdFx0Ym9keUNvbnRlbnRcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHRwYXJzZVRlbXBsYXRlKHRlbXBsYXRlU3RyaW5nOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcpOiB7IHRlbXBsYXRlUHJvcHM6IHN0cmluZ1tdOyB0ZW1wbGF0ZVZhbHVlczogVGVtcGxhdGVWYWx1ZXMgfSB7XHJcblx0XHRjb25zdCB0ZW1wbGF0ZUxpbmVzID0gdGVtcGxhdGVTdHJpbmcuc3BsaXQoXCJcXG5cIik7XHJcblx0XHRjb25zdCB0ZW1wbGF0ZVByb3BzOiBzdHJpbmdbXSA9IFtdO1xyXG5cdFx0Y29uc3QgdGVtcGxhdGVWYWx1ZXM6IFRlbXBsYXRlVmFsdWVzID0ge307XHJcblx0XHRsZXQgaW5Qcm9wZXJ0aWVzID0gZmFsc2U7XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wbGF0ZUxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IGxpbmUgPSB0ZW1wbGF0ZUxpbmVzW2ldLnRyaW0oKTtcclxuXHRcdFx0aWYgKGxpbmUgPT09IFwiLS0tXCIpIHtcclxuXHRcdFx0XHRpblByb3BlcnRpZXMgPSAhaW5Qcm9wZXJ0aWVzO1xyXG5cdFx0XHRcdGlmICghaW5Qcm9wZXJ0aWVzKSB7XHJcblx0XHRcdFx0XHRicmVhazsgLy8gU3RvcCBhdCBzZWNvbmQgLS0tIHRvIGV4Y2x1ZGUgcG9zdC1wcm9wZXJ0eSBjb250ZW50XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChpblByb3BlcnRpZXMpIHtcclxuXHRcdFx0XHRjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL14oXFx3Kyk6XFxzKiguKikkLyk7XHJcblx0XHRcdFx0aWYgKG1hdGNoKSB7XHJcblx0XHRcdFx0XHRjb25zdCBbLCBrZXksIHZhbHVlXSA9IG1hdGNoO1xyXG5cdFx0XHRcdFx0dGVtcGxhdGVQcm9wcy5wdXNoKGtleSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYW4gYXJyYXkgcHJvcGVydHkgKGtub3duIGFycmF5IGtleXMgb3IgWUFNTCBsaXN0IGZvcm1hdClcclxuXHRcdFx0XHRcdGNvbnN0IGlzS25vd25BcnJheUtleSA9IEtOT1dOX0FSUkFZX0tFWVMuaW5jbHVkZXMoa2V5IGFzIHR5cGVvZiBLTk9XTl9BUlJBWV9LRVlTW251bWJlcl0pO1xyXG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgaXQncyBhIFlBTUwgbGlzdCBmb3JtYXQgKG5vIHZhbHVlIGFmdGVyIGNvbG9uLCBlbXB0eSBicmFja2V0cywgb3IgZW1wdHkgdmFsdWUgbWVhbnMgaXQncyBhbiBhcnJheSlcclxuXHRcdFx0XHRcdGNvbnN0IGlzRW1wdHlBcnJheSA9ICF2YWx1ZSB8fCB2YWx1ZS50cmltKCkgPT09IFwiXCIgfHwgdmFsdWUudHJpbSgpID09PSBcIltdXCI7XHJcblx0XHRcdFx0XHRjb25zdCBpc0FycmF5UHJvcGVydHkgPSBpc0tub3duQXJyYXlLZXkgfHwgaXNFbXB0eUFycmF5O1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAoaXNBcnJheVByb3BlcnR5KSB7XHJcblx0XHRcdFx0XHRcdC8vIEhhbmRsZSBhcnJheSBwcm9wZXJ0aWVzXHJcblx0XHRcdFx0XHRcdGlmICh2YWx1ZSAmJiB2YWx1ZS5zdGFydHNXaXRoKFwiW1wiKSkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIEhhbmRsZSBicmFja2V0IGZvcm1hdDogW1wiaXRlbTFcIiwgXCJpdGVtMlwiXVxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGl0ZW1zID0gdmFsdWVcclxuXHRcdFx0XHRcdFx0XHRcdC5yZXBsYWNlKC9bW1xcXV0vZywgXCJcIilcclxuXHRcdFx0XHRcdFx0XHRcdC5zcGxpdChcIixcIilcclxuXHRcdFx0XHRcdFx0XHRcdC5tYXAodCA9PiB0LnRyaW0oKSlcclxuXHRcdFx0XHRcdFx0XHRcdC5maWx0ZXIodCA9PiB0KTtcclxuXHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZVZhbHVlc1trZXldID0gaXRlbXM7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIFlBTUwgbGlzdCBmb3JtYXQ6IGVtcHR5IG9yIHdpdGggLSBpdGVtc1xyXG5cdFx0XHRcdFx0XHRcdHRlbXBsYXRlVmFsdWVzW2tleV0gPSBbXTtcclxuXHRcdFx0XHRcdFx0XHQvLyBMb29rIGFoZWFkIGZvciBpdGVtIGxpc3RcclxuXHRcdFx0XHRcdFx0XHRmb3IgKGxldCBqID0gaSArIDE7IGogPCB0ZW1wbGF0ZUxpbmVzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBuZXh0TGluZSA9IHRlbXBsYXRlTGluZXNbal0udHJpbSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKG5leHRMaW5lLnN0YXJ0c1dpdGgoXCItIFwiKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBpdGVtID0gbmV4dExpbmUucmVwbGFjZSgvXi1cXHMqLywgXCJcIikudHJpbSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaXRlbSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGFycmF5VmFsdWUgPSB0ZW1wbGF0ZVZhbHVlc1trZXldO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KGFycmF5VmFsdWUpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhcnJheVZhbHVlLnB1c2goaXRlbSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG5leHRMaW5lID09PSBcIi0tLVwiIHx8IChuZXh0TGluZSAmJiAhbmV4dExpbmUuc3RhcnRzV2l0aChcIi0gXCIpICYmIG5leHRMaW5lLmluY2x1ZGVzKFwiOlwiKSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3RvcCBhdCBuZXh0IHByb3BlcnR5IG9yIGVuZCBvZiBwcm9wZXJ0aWVzIHNlY3Rpb25cclxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBUaGlzIGlzIGEgc3RyaW5nIHByb3BlcnR5LCBub3QgYW4gYXJyYXlcclxuXHRcdFx0XHRcdFx0Y29uc3Qgc2x1ZyA9IHRoaXMudG9LZWJhYkNhc2UodGl0bGUpO1xyXG5cdFx0XHRcdFx0XHRjb25zdCBzdHJpbmdWYWx1ZSA9ICh2YWx1ZSB8fCBcIlwiKVxyXG5cdFx0XHRcdFx0XHRcdC5yZXBsYWNlKC9cXHtcXHt0aXRsZVxcfVxcfS9nLCB0aXRsZSlcclxuXHRcdFx0XHRcdFx0XHQucmVwbGFjZSgvXFx7XFx7ZGF0ZVxcfVxcfS9nLCB3aW5kb3cubW9tZW50KG5ldyBEYXRlKCkpLmZvcm1hdCh0aGlzLnNldHRpbmdzLmRhdGVGb3JtYXQpKVxyXG5cdFx0XHRcdFx0XHRcdC5yZXBsYWNlKC9cXHtcXHtzbHVnXFx9XFx9L2csIHNsdWcpO1xyXG5cdFx0XHRcdFx0XHQvLyBTdG9yZSBhcyBhIHNpbmdsZSBzdHJpbmcgdmFsdWUsIG5vdCBpbiBhbiBhcnJheVxyXG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVZhbHVlc1trZXldID0gc3RyaW5nVmFsdWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHsgdGVtcGxhdGVQcm9wcywgdGVtcGxhdGVWYWx1ZXMgfTtcclxuXHR9XHJcblxyXG5cdGJ1aWxkRnJvbnRtYXR0ZXJDb250ZW50KGZpbmFsUHJvcHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiwgYXJyYXlLZXlzPzogU2V0PHN0cmluZz4pOiBzdHJpbmcge1xyXG5cdFx0bGV0IG5ld0NvbnRlbnQgPSBcIi0tLVxcblwiO1xyXG5cdFx0Zm9yIChjb25zdCBrZXkgaW4gZmluYWxQcm9wcykge1xyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIGFuIGFycmF5IHByb3BlcnR5XHJcblx0XHRcdGNvbnN0IGlzQXJyYXlQcm9wZXJ0eSA9IEtOT1dOX0FSUkFZX0tFWVMuaW5jbHVkZXMoa2V5IGFzIHR5cGVvZiBLTk9XTl9BUlJBWV9LRVlTW251bWJlcl0pIHx8IFxyXG5cdFx0XHRcdChhcnJheUtleXMgJiYgYXJyYXlLZXlzLmhhcyhrZXkpKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChpc0FycmF5UHJvcGVydHkpIHtcclxuXHRcdFx0XHRuZXdDb250ZW50ICs9IGAke2tleX06XFxuYDtcclxuXHRcdFx0XHRpZiAoZmluYWxQcm9wc1trZXldLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdGZpbmFsUHJvcHNba2V5XS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG5cdFx0XHRcdFx0XHRuZXdDb250ZW50ICs9IGAgIC0gJHtpdGVtfVxcbmA7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bmV3Q29udGVudCArPSBgJHtrZXl9OiAke2ZpbmFsUHJvcHNba2V5XVswXSB8fCBcIlwifVxcbmA7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdG5ld0NvbnRlbnQgKz0gXCItLS1cIjtcclxuXHRcdHJldHVybiBuZXdDb250ZW50O1xyXG5cdH1cclxuXHJcblx0YXN5bmMgdXBkYXRlVGl0bGVJbkZyb250bWF0dGVyKGZpbGU6IFRGaWxlLCBuZXdUaXRsZTogc3RyaW5nLCB0eXBlOiBDb250ZW50VHlwZUlkKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHQvLyBDaGVjayBpZiB0ZW1wbGF0ZSBoYXMge3t0aXRsZX19IC0gaWYgbm90LCBkb24ndCB1cGRhdGUgZnJvbnRtYXR0ZXIgYXQgYWxsXHJcblx0XHRjb25zdCB0aXRsZUtleSA9IHRoaXMuZ2V0VGl0bGVLZXkodHlwZSk7XHJcblx0XHRjb25zdCBoYXNUaXRsZUluVGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlSGFzVGl0bGUodHlwZSk7XHJcblx0XHRcclxuXHRcdC8vIElmIHRlbXBsYXRlIGRvZXNuJ3QgaGF2ZSB7e3RpdGxlfX0sIGRvbid0IG1vZGlmeSBmcm9udG1hdHRlclxyXG5cdFx0aWYgKCFoYXNUaXRsZUluVGVtcGxhdGUpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRcdGxldCBwcm9wZXJ0aWVzRW5kID0gMDtcclxuXHRcdGxldCBwcm9wZXJ0aWVzVGV4dCA9IFwiXCI7XHJcblx0XHRsZXQgaGFzRnJvbnRtYXR0ZXIgPSBmYWxzZTtcclxuXHJcblx0XHRpZiAoY29udGVudC5zdGFydHNXaXRoKFwiLS0tXCIpKSB7XHJcblx0XHRcdGhhc0Zyb250bWF0dGVyID0gdHJ1ZTtcclxuXHRcdFx0cHJvcGVydGllc0VuZCA9IGNvbnRlbnQuaW5kZXhPZihcIlxcbi0tLVwiLCAzKTtcclxuXHRcdFx0aWYgKHByb3BlcnRpZXNFbmQgPT09IC0xKSB7XHJcblx0XHRcdFx0cHJvcGVydGllc0VuZCA9IGNvbnRlbnQubGVuZ3RoO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHByb3BlcnRpZXNFbmQgKz0gNDtcclxuXHRcdFx0fVxyXG5cdFx0XHRwcm9wZXJ0aWVzVGV4dCA9IGNvbnRlbnQuc2xpY2UoNCwgcHJvcGVydGllc0VuZCAtIDQpLnRyaW0oKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBwcm9wT3JkZXI6IHN0cmluZ1tdID0gW107XHJcblx0XHRjb25zdCBleGlzdGluZzogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgc3RyaW5nW10+ID0ge307XHJcblx0XHRsZXQgY3VycmVudEtleTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblx0XHRsZXQgdGl0bGVLZXlQb3NpdGlvbiA9IC0xOyAvLyBUcmFjayB0aGUgb3JpZ2luYWwgcG9zaXRpb24gb2YgdGhlIHRpdGxlIGtleVxyXG5cclxuXHRcdGNvbnN0IGFycmF5S2V5cyA9IG5ldyBTZXQ8c3RyaW5nPigpOyAvLyBUcmFjayB3aGljaCBrZXlzIGFyZSBhcnJheXNcclxuXHRcdFxyXG5cdFx0cHJvcGVydGllc1RleHQuc3BsaXQoXCJcXG5cIikuZm9yRWFjaCgobGluZSwgaW5kZXgpID0+IHtcclxuXHRcdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIE1hdGNoIHByb3BlcnR5IGxpbmVzIC0gbW9yZSBmbGV4aWJsZSByZWdleCB0byBoYW5kbGUgdmFyaW91cyBwcm9wZXJ0eSBuYW1lc1xyXG5cdFx0XHRjb25zdCBtYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eKFthLXpBLVpfXVthLXpBLVowLTlfLV0qKTpcXHMqKC4qKSQvKTtcclxuXHRcdFx0aWYgKG1hdGNoKSB7XHJcblx0XHRcdFx0Y29uc3QgWywga2V5LCB2YWx1ZV0gPSBtYXRjaDtcclxuXHRcdFx0XHRwcm9wT3JkZXIucHVzaChrZXkpO1xyXG5cdFx0XHRcdGN1cnJlbnRLZXkgPSBrZXk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gVHJhY2sgdGhlIG9yaWdpbmFsIHBvc2l0aW9uIG9mIHRoZSB0aXRsZSBrZXlcclxuXHRcdFx0XHRpZiAoa2V5ID09PSB0aXRsZUtleSkge1xyXG5cdFx0XHRcdFx0dGl0bGVLZXlQb3NpdGlvbiA9IGluZGV4O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zdCBpc0tub3duQXJyYXlLZXkgPSBLTk9XTl9BUlJBWV9LRVlTLmluY2x1ZGVzKGtleSBhcyB0eXBlb2YgS05PV05fQVJSQVlfS0VZU1tudW1iZXJdKTtcclxuXHRcdFx0XHRjb25zdCBpc0VtcHR5QXJyYXkgPSAhdmFsdWUgfHwgdmFsdWUudHJpbSgpID09PSBcIlwiIHx8IHZhbHVlLnRyaW0oKSA9PT0gXCJbXVwiO1xyXG5cdFx0XHRcdGNvbnN0IGlzQXJyYXlQcm9wZXJ0eSA9IGlzS25vd25BcnJheUtleSB8fCBpc0VtcHR5QXJyYXk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGlzQXJyYXlQcm9wZXJ0eSkge1xyXG5cdFx0XHRcdFx0ZXhpc3Rpbmdba2V5XSA9IFtdO1xyXG5cdFx0XHRcdFx0YXJyYXlLZXlzLmFkZChrZXkpOyAvLyBNYXJrIHRoaXMga2V5IGFzIGFuIGFycmF5XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGV4aXN0aW5nW2tleV0gPSB2YWx1ZSA/IHZhbHVlLnRyaW0oKSA6IFwiXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2UgaWYgKGN1cnJlbnRLZXkgJiYgYXJyYXlLZXlzLmhhcyhjdXJyZW50S2V5KSAmJiB0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiLSBcIikpIHtcclxuXHRcdFx0XHQvLyBIYW5kbGUgYXJyYXkgaXRlbXNcclxuXHRcdFx0XHRjb25zdCBpdGVtID0gdHJpbW1lZExpbmUucmVwbGFjZSgvXi1cXHMqLywgXCJcIik7XHJcblx0XHRcdFx0aWYgKGl0ZW0pIChleGlzdGluZ1tjdXJyZW50S2V5XSBhcyBzdHJpbmdbXSkucHVzaChpdGVtKTtcclxuXHRcdFx0fSBlbHNlIGlmICh0cmltbWVkTGluZSAmJiAhdHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIi0gXCIpICYmICF0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiI1wiKSkge1xyXG5cdFx0XHRcdC8vIEhhbmRsZSB1bnJlY29nbml6ZWQgcHJvcGVydGllcyB0aGF0IGRvbid0IG1hdGNoIHRoZSBzdGFuZGFyZCBmb3JtYXRcclxuXHRcdFx0XHQvLyBUaGlzIGlzIGEgZmFsbGJhY2sgdG8gcHJlc2VydmUgcHJvcGVydGllcyB0aGF0IG1pZ2h0IGhhdmUgc3BlY2lhbCBmb3JtYXR0aW5nXHJcblx0XHRcdFx0Y29uc3Qga2V5TWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXihbXjpdKyk6XFxzKiguKikkLyk7XHJcblx0XHRcdFx0aWYgKGtleU1hdGNoKSB7XHJcblx0XHRcdFx0XHRjb25zdCBbLCBrZXksIHZhbHVlXSA9IGtleU1hdGNoO1xyXG5cdFx0XHRcdFx0aWYgKCFwcm9wT3JkZXIuaW5jbHVkZXMoa2V5KSkge1xyXG5cdFx0XHRcdFx0XHRwcm9wT3JkZXIucHVzaChrZXkpO1xyXG5cdFx0XHRcdFx0XHRleGlzdGluZ1trZXldID0gdmFsdWUgPyB2YWx1ZS50cmltKCkgOiBcIlwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUHJvcGVybHkgZXNjYXBlIFlBTUwgc3RyaW5nIHZhbHVlc1xyXG5cdFx0Ly8gWUFNTCBzdHJpbmdzIHdpdGggcXVvdGVzIG5lZWQgdG8gYmUgd3JhcHBlZCBpbiBzaW5nbGUgcXVvdGVzIG9yIGVzY2FwZWQgcHJvcGVybHlcclxuXHRcdGxldCB0aXRsZVZhbDogc3RyaW5nO1xyXG5cdFx0aWYgKG5ld1RpdGxlLmluY2x1ZGVzKCdcIicpIHx8IG5ld1RpdGxlLmluY2x1ZGVzKFwiJ1wiKSB8fCBuZXdUaXRsZS5pbmNsdWRlcygnXFxuJykgfHwgbmV3VGl0bGUuaW5jbHVkZXMoJ1xcXFwnKSkge1xyXG5cdFx0XHQvLyBGb3Igc3RyaW5ncyB3aXRoIHF1b3RlcywgbmV3bGluZXMsIG9yIGJhY2tzbGFzaGVzLCB1c2Ugc2luZ2xlIHF1b3RlcyBhbmQgZXNjYXBlIHNpbmdsZSBxdW90ZXNcclxuXHRcdFx0dGl0bGVWYWwgPSBgJyR7bmV3VGl0bGUucmVwbGFjZSgvJy9nLCBcIicnXCIpfSdgO1xyXG5cdFx0fSBlbHNlIGlmIChuZXdUaXRsZS5pbmNsdWRlcyhcIiBcIikgfHwgbmV3VGl0bGUuaW5jbHVkZXMoXCI6XCIpIHx8IG5ld1RpdGxlLmluY2x1ZGVzKFwiI1wiKSB8fCBuZXdUaXRsZS5pbmNsdWRlcyhcIkBcIikpIHtcclxuXHRcdFx0Ly8gRm9yIHN0cmluZ3Mgd2l0aCBzcGFjZXMgb3Igc3BlY2lhbCBZQU1MIGNoYXJhY3RlcnMsIHdyYXAgaW4gZG91YmxlIHF1b3RlcyBhbmQgZXNjYXBlIGRvdWJsZSBxdW90ZXNcclxuXHRcdFx0dGl0bGVWYWwgPSBgXCIke25ld1RpdGxlLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKX1cImA7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBGb3Igc2ltcGxlIHN0cmluZ3MsIG5vIHF1b3RlcyBuZWVkZWRcclxuXHRcdFx0dGl0bGVWYWwgPSBuZXdUaXRsZTtcclxuXHRcdH1cclxuXHRcdGV4aXN0aW5nW3RpdGxlS2V5XSA9IHRpdGxlVmFsO1xyXG5cdFx0XHJcblx0XHQvLyBBbHNvIHVwZGF0ZSBzbHVnIGlmIGl0IGV4aXN0cyBpbiBmcm9udG1hdHRlclxyXG5cdFx0aWYgKFwic2x1Z1wiIGluIGV4aXN0aW5nKSB7XHJcblx0XHRcdGNvbnN0IG5ld1NsdWcgPSB0aGlzLnRvS2ViYWJDYXNlKG5ld1RpdGxlKTtcclxuXHRcdFx0ZXhpc3RpbmdbXCJzbHVnXCJdID0gbmV3U2x1ZztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiB0aXRsZSBrZXkgd2FzIGZvdW5kIGluIG9yaWdpbmFsIHByb3BlcnRpZXMsIHByZXNlcnZlIGl0cyBwb3NpdGlvblxyXG5cdFx0Ly8gT3RoZXJ3aXNlLCBhZGQgaXQgYXQgdGhlIGVuZFxyXG5cdFx0aWYgKHRpdGxlS2V5UG9zaXRpb24gPT09IC0xKSB7XHJcblx0XHRcdC8vIFRpdGxlIGtleSBub3QgZm91bmQgaW4gb3JpZ2luYWwgcHJvcGVydGllcywgYWRkIGl0IGF0IHRoZSBlbmRcclxuXHRcdFx0cHJvcE9yZGVyLnB1c2godGl0bGVLZXkpO1xyXG5cdFx0fVxyXG5cdFx0Ly8gSWYgdGl0bGVLZXlQb3NpdGlvbiA+PSAwLCB0aGUgdGl0bGUga2V5IGlzIGFscmVhZHkgaW4gcHJvcE9yZGVyIGF0IHRoZSBjb3JyZWN0IHBvc2l0aW9uXHJcblxyXG5cdFx0Ly8gT25seSBjcmVhdGUvdXBkYXRlIGZyb250bWF0dGVyIGlmIGl0IGFscmVhZHkgZXhpc3RzXHJcblx0XHQvLyBEb24ndCBjcmVhdGUgZnJvbnRtYXR0ZXIgZnJvbSBzY3JhdGNoIGlmIGZpbGUgaGFkIG5vbmVcclxuXHRcdGlmICghaGFzRnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0Ly8gRmlsZSBoYWQgbm8gZnJvbnRtYXR0ZXIgLSBkb24ndCBjcmVhdGUgaXQsIGp1c3QgcmV0dXJuXHJcblx0XHRcdC8vIFRoZSByZW5hbWUgYWxyZWFkeSBoYXBwZW5lZCwgd2UganVzdCBkb24ndCB1cGRhdGUgZnJvbnRtYXR0ZXJcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEJ1aWxkIG5ldyBjb250ZW50IHdpdGggZnJvbnRtYXR0ZXJcclxuXHRcdGxldCBuZXdDb250ZW50ID0gXCItLS1cXG5cIjtcclxuXHRcdGZvciAoY29uc3Qga2V5IG9mIHByb3BPcmRlcikge1xyXG5cdFx0XHRjb25zdCB2YWwgPSBleGlzdGluZ1trZXldO1xyXG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XHJcblx0XHRcdFx0bmV3Q29udGVudCArPSBgJHtrZXl9OlxcbmA7XHJcblx0XHRcdFx0aWYgKHZhbC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHR2YWwuZm9yRWFjaCgoaXRlbTogc3RyaW5nKSA9PiB7XHJcblx0XHRcdFx0XHRcdG5ld0NvbnRlbnQgKz0gYCAgLSAke2l0ZW19XFxuYDtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRuZXdDb250ZW50ICs9IGAke2tleX06ICR7dmFsIHx8IFwiXCJ9XFxuYDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0bmV3Q29udGVudCArPSBcIi0tLVxcblwiO1xyXG5cclxuXHRcdC8vIEdldCBib2R5IGNvbnRlbnQgKGZyb250bWF0dGVyIGFscmVhZHkgZXhpc3RlZCwgc28gd2Uga25vdyBwcm9wZXJ0aWVzRW5kIGlzIHNldClcclxuXHRcdGNvbnN0IGJvZHlDb250ZW50ID0gY29udGVudC5zbGljZShwcm9wZXJ0aWVzRW5kKTtcclxuXHRcdG5ld0NvbnRlbnQgKz0gYm9keUNvbnRlbnQ7XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0NvbnRlbnQpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXRUaXRsZUtleSh0eXBlOiBDb250ZW50VHlwZUlkKTogc3RyaW5nIHtcclxuXHRcdGlmICh0eXBlID09PSBcIm5vdGVcIikgcmV0dXJuIFwidGl0bGVcIjtcclxuXHRcdFxyXG5cdFx0Y29uc3QgY29udGVudFR5cGVzID0gdGhpcy5zZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XHJcblx0XHRjb25zdCBjb250ZW50VHlwZSA9IGNvbnRlbnRUeXBlcy5maW5kKGN0ID0+IGN0LmlkID09PSB0eXBlKTtcclxuXHRcdGlmICghY29udGVudFR5cGUpIHJldHVybiBcInRpdGxlXCI7XHJcblx0XHRcclxuXHRcdGNvbnN0IHRlbXBsYXRlID0gY29udGVudFR5cGUudGVtcGxhdGU7XHJcblx0XHRjb25zdCBsaW5lcyA9IHRlbXBsYXRlLnNwbGl0KFwiXFxuXCIpO1xyXG5cdFx0bGV0IGluUHJvcGVydGllcyA9IGZhbHNlO1xyXG5cdFx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcblx0XHRcdGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcclxuXHRcdFx0aWYgKHRyaW1tZWQgPT09IFwiLS0tXCIpIHtcclxuXHRcdFx0XHRpblByb3BlcnRpZXMgPSAhaW5Qcm9wZXJ0aWVzO1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChpblByb3BlcnRpZXMpIHtcclxuXHRcdFx0XHRjb25zdCBtYXRjaCA9IHRyaW1tZWQubWF0Y2goL14oXFx3Kyk6XFxzKiguKykkLyk7XHJcblx0XHRcdFx0aWYgKG1hdGNoKSB7XHJcblx0XHRcdFx0XHRjb25zdCBrZXkgPSBtYXRjaFsxXTtcclxuXHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gbWF0Y2hbMl07XHJcblx0XHRcdFx0XHRpZiAodmFsdWUuaW5jbHVkZXMoXCJ7e3RpdGxlfX1cIikpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGtleTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBcInRpdGxlXCI7XHJcblx0fVxyXG5cdFxyXG5cdC8vIENoZWNrIGlmIHRoZSB0ZW1wbGF0ZSBmb3IgdGhpcyBjb250ZW50IHR5cGUgaGFzIHt7dGl0bGV9fVxyXG5cdHByaXZhdGUgdGVtcGxhdGVIYXNUaXRsZSh0eXBlOiBDb250ZW50VHlwZUlkKTogYm9vbGVhbiB7XHJcblx0XHRpZiAodHlwZSA9PT0gXCJub3RlXCIpIHJldHVybiB0cnVlOyAvLyBOb3RlcyBhbHdheXMgaGF2ZSB0aXRsZVxyXG5cdFx0XHJcblx0XHRjb25zdCBjb250ZW50VHlwZXMgPSB0aGlzLnNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBbXTtcclxuXHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gY29udGVudFR5cGVzLmZpbmQoY3QgPT4gY3QuaWQgPT09IHR5cGUpO1xyXG5cdFx0aWYgKCFjb250ZW50VHlwZSkgcmV0dXJuIHRydWU7IC8vIERlZmF1bHQgdG8gdHJ1ZSBmb3Igc2FmZXR5XHJcblx0XHRcclxuXHRcdGNvbnN0IHRlbXBsYXRlID0gY29udGVudFR5cGUudGVtcGxhdGU7XHJcblx0XHRyZXR1cm4gdGVtcGxhdGUuaW5jbHVkZXMoXCJ7e3RpdGxlfX1cIik7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBFZGl0b3IsIFRGaWxlLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5pbXBvcnQgeyBtYXRjaGVzRm9sZGVyUGF0dGVybiwgc29ydEJ5UGF0dGVyblNwZWNpZmljaXR5IH0gZnJvbSBcIi4vcGF0aC1tYXRjaGluZ1wiO1xuXG5leHBvcnQgY2xhc3MgTGlua0NvbnZlcnRlciB7XG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgc2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncywgcHJpdmF0ZSBwbHVnaW4/OiB7IHNldHRpbmdzPzogQXN0cm9Db21wb3NlclNldHRpbmdzIH0pIHt9XG5cdFxuXHQvLyBHZXQgZnJlc2ggc2V0dGluZ3MgZnJvbSBwbHVnaW4gaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgdXNlIHN0b3JlZCBzZXR0aW5nc1xuXHRwcml2YXRlIGdldFNldHRpbmdzKCk6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncyB7XG5cdFx0Ly8gQWx3YXlzIHByZWZlciBwbHVnaW4gc2V0dGluZ3MgKHRoZXkncmUga2VwdCB1cCB0byBkYXRlKVxuXHRcdGlmICh0aGlzLnBsdWdpbj8uc2V0dGluZ3MpIHtcblx0XHRcdHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncztcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3M7XG5cdH1cblxuXHR0b0tlYmFiQ2FzZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHN0clxuXHRcdFx0LnRvTG93ZXJDYXNlKClcblx0XHRcdC5yZXBsYWNlKC9bXmEtejAtOVxccy1dL2csIFwiXCIpXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcblx0XHRcdC5yZXBsYWNlKC8tKy9nLCBcIi1cIilcblx0XHRcdC5yZXBsYWNlKC9eLXwtJC9nLCBcIlwiKTtcblx0fVxuXG5cdGdldEFzdHJvVXJsRnJvbUludGVybmFsTGluayhsaW5rOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGNvbnN0IGhhc2hJbmRleCA9IGxpbmsuaW5kZXhPZignIycpO1xuXHRcdGxldCBwYXRoID0gaGFzaEluZGV4ID49IDAgPyBsaW5rLnNsaWNlKDAsIGhhc2hJbmRleCkgOiBsaW5rO1xuXHRcdGNvbnN0IGFuY2hvciA9IGhhc2hJbmRleCA+PSAwID8gbGluay5zbGljZShoYXNoSW5kZXgpIDogJyc7XG5cblx0XHQvLyBVUkwgZGVjb2RlIHRoZSBwYXRoIHRvIGhhbmRsZSBlbmNvZGVkIGNoYXJhY3RlcnMgbGlrZSAlMjBcblx0XHRwYXRoID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhdGgpO1xuXHRcdHBhdGggPSBwYXRoLnJlcGxhY2UoL1xcLihtZHxtZHgpJC8sIFwiXCIpO1xuXG5cdFx0Ly8gRGV0ZXJtaW5lIGNvbnRlbnQgdHlwZSBhbmQgYXBwcm9wcmlhdGUgYmFzZSBwYXRoIHVzaW5nIHBhdHRlcm4gc3BlY2lmaWNpdHlcblx0XHQvLyBTdXBwb3J0IGJvdGggLm1kIGFuZCAubWR4IGV4dGVuc2lvbnNcblx0XHRjb25zdCBmaWxlRXh0ZW5zaW9uID0gbGluay5lbmRzV2l0aCgnLm1keCcpID8gJy5tZHgnIDogJy5tZCc7XG5cdFx0Y29uc3QgY29udGVudFR5cGVJbmZvID0gdGhpcy5nZXRDb250ZW50VHlwZUZvclBhdGgocGF0aCArIGZpbGVFeHRlbnNpb24pO1xuXHRcdGxldCBiYXNlUGF0aCA9IGNvbnRlbnRUeXBlSW5mby5iYXNlUGF0aCB8fCBcIlwiO1xuXHRcdGxldCBjb250ZW50Rm9sZGVyID0gY29udGVudFR5cGVJbmZvLmNvbnRlbnRGb2xkZXIgfHwgXCJcIjtcblx0XHRsZXQgaW5kZXhGaWxlTmFtZSA9IGNvbnRlbnRUeXBlSW5mby5pbmRleEZpbGVOYW1lIHx8IFwiXCI7XG5cblxuXHRcdC8vIFN0cmlwIGNvbnRlbnQgZm9sZGVyIGlmIHByZXNlbnRcblx0XHRpZiAoY29udGVudEZvbGRlcikge1xuXHRcdFx0cGF0aCA9IHBhdGguc2xpY2UoY29udGVudEZvbGRlci5sZW5ndGggKyAxKTtcblx0XHR9XG5cblx0XHRsZXQgYWRkVHJhaWxpbmdTbGFzaCA9IGZhbHNlO1xuXHRcdFxuXHRcdC8vIFNtYXJ0IGRldGVjdGlvbjogaWYgdGhlIGZpbGVuYW1lIG1hdGNoZXMgdGhlIGluZGV4IGZpbGUgbmFtZSAocmVnYXJkbGVzcyBvZiBjcmVhdGlvbiBtb2RlKSxcblx0XHQvLyB0cmVhdCBpdCBhcyBmb2xkZXItYmFzZWQgbG9naWNcblx0XHQvLyBOb3RlOiBXZSBvbmx5IHNldCBhZGRUcmFpbGluZ1NsYXNoIGhlcmU7IHRoZSBmaW5hbCBjaGVjayB3aWxsIHByZXZlbnQgaXQgaWYgdGhlcmUncyBhbiBhbmNob3Jcblx0XHRjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy8nKTtcblx0XHRjb25zdCBsYXN0UGFydCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuXHRcdFxuXHRcdC8vIENoZWNrIGlmIHRoZSBsYXN0IHBhcnQgbWF0Y2hlcyB0aGUgc3BlY2lmaWVkIGluZGV4IGZpbGUgbmFtZVxuXHRcdGlmIChpbmRleEZpbGVOYW1lICYmIGluZGV4RmlsZU5hbWUudHJpbSgpICE9PSBcIlwiICYmIGxhc3RQYXJ0ID09PSBpbmRleEZpbGVOYW1lKSB7XG5cdFx0XHRwYXJ0cy5wb3AoKTtcblx0XHRcdHBhdGggPSBwYXJ0cy5qb2luKCcvJyk7XG5cdFx0XHRhZGRUcmFpbGluZ1NsYXNoID0gdHJ1ZTtcblx0XHR9XG5cdFx0Ly8gQ2hlY2sgaWYgdGhlIGxhc3QgcGFydCBtYXRjaGVzIHRoZSBkZWZhdWx0IFwiaW5kZXhcIiAod2hlbiBubyBpbmRleEZpbGVOYW1lIGlzIHNwZWNpZmllZClcblx0XHRlbHNlIGlmICgoIWluZGV4RmlsZU5hbWUgfHwgaW5kZXhGaWxlTmFtZS50cmltKCkgPT09IFwiXCIpICYmIGxhc3RQYXJ0ID09PSBcImluZGV4XCIpIHtcblx0XHRcdHBhcnRzLnBvcCgpO1xuXHRcdFx0cGF0aCA9IHBhcnRzLmpvaW4oJy8nKTtcblx0XHRcdGFkZFRyYWlsaW5nU2xhc2ggPSB0cnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IHNsdWdQYXJ0cyA9IHBhdGguc3BsaXQoJy8nKS5tYXAocGFydCA9PiB0aGlzLnRvS2ViYWJDYXNlKHBhcnQpKTtcblx0XHRjb25zdCBzbHVnID0gc2x1Z1BhcnRzLmpvaW4oJy8nKTtcblxuXHRcdC8vIEZvcm1hdCBiYXNlIHBhdGhcblx0XHRpZiAoYmFzZVBhdGgpIHtcblx0XHRcdC8vIEFkZCBsZWFkaW5nIHNsYXNoIGlmIG5vdCBwcmVzZW50IHRvIG1ha2UgaXQgYWJzb2x1dGUgZnJvbSByb290XG5cdFx0XHRpZiAoIWJhc2VQYXRoLnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG5cdFx0XHRcdGJhc2VQYXRoID0gXCIvXCIgKyBiYXNlUGF0aDtcblx0XHRcdH1cblx0XHRcdC8vIEFkZCB0cmFpbGluZyBzbGFzaCBpZiBub3QgcHJlc2VudFxuXHRcdFx0aWYgKCFiYXNlUGF0aC5lbmRzV2l0aChcIi9cIikpIHtcblx0XHRcdFx0YmFzZVBhdGggKz0gXCIvXCI7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFdoZW4gbm8gYmFzZSBwYXRoIGlzIHNwZWNpZmllZCwgYWRkIGxlYWRpbmcgc2xhc2ggdG8gbWFrZSBpdCBhYnNvbHV0ZSBmcm9tIHJvb3Rcblx0XHRcdGJhc2VQYXRoID0gXCIvXCI7XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZXJtaW5lIGlmIHdlIHNob3VsZCBhZGQgdHJhaWxpbmcgc2xhc2hcblx0XHQvLyBDUklUSUNBTDogTmV2ZXIgYWRkIHRyYWlsaW5nIHNsYXNoIGJlZm9yZSBhbiBhbmNob3IgKGUuZy4sIC9hYm91dCNoZWFkaW5nIG5vdCAvYWJvdXQvI2hlYWRpbmcpXG5cdFx0Ly8gVGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3IgYW5jaG9yIGxpbmtzIGZyb20gY29weSBoZWFkaW5nIFVSTCBmdW5jdGlvbmFsaXR5XG5cdFx0Ly8gQW5jaG9yIGxpbmtzIHNob3VsZCBORVZFUiBoYXZlIHRyYWlsaW5nIHNsYXNoZXMsIHJlZ2FyZGxlc3Mgb2Ygc2V0dGluZ3Ncblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcblx0XHRjb25zdCBzaG91bGRBZGRUcmFpbGluZ1NsYXNoID0gKHNldHRpbmdzLmFkZFRyYWlsaW5nU2xhc2hUb0xpbmtzIHx8IGFkZFRyYWlsaW5nU2xhc2gpICYmICFhbmNob3I7XG5cblx0XHRyZXR1cm4gYCR7YmFzZVBhdGh9JHtzbHVnfSR7c2hvdWxkQWRkVHJhaWxpbmdTbGFzaCA/ICcvJyA6ICcnfSR7YW5jaG9yfWA7XG5cdH1cblxuXHRwcml2YXRlIGdldEFzdHJvVXJsRnJvbUludGVybmFsTGlua1dpdGhDb250ZXh0KGxpbms6IHN0cmluZywgY3VycmVudEZpbGVQYXRoOiBzdHJpbmcsIGN1cnJlbnRGaWxlQ29udGVudFR5cGU6IHsgYmFzZVBhdGg6IHN0cmluZzsgY3JlYXRpb25Nb2RlOiBcImZpbGVcIiB8IFwiZm9sZGVyXCI7IGluZGV4RmlsZU5hbWU6IHN0cmluZzsgY29udGVudEZvbGRlcjogc3RyaW5nIH0pOiBzdHJpbmcge1xuXHRcdFxuXHRcdGNvbnN0IGhhc2hJbmRleCA9IGxpbmsuaW5kZXhPZignIycpO1xuXHRcdGxldCBwYXRoID0gaGFzaEluZGV4ID49IDAgPyBsaW5rLnNsaWNlKDAsIGhhc2hJbmRleCkgOiBsaW5rO1xuXHRcdGNvbnN0IGFuY2hvciA9IGhhc2hJbmRleCA+PSAwID8gbGluay5zbGljZShoYXNoSW5kZXgpIDogJyc7XG5cblx0XHQvLyBVUkwgZGVjb2RlIHRoZSBwYXRoIHRvIGhhbmRsZSBlbmNvZGVkIGNoYXJhY3RlcnMgbGlrZSAlMjBcblx0XHRwYXRoID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhdGgpO1xuXHRcdHBhdGggPSBwYXRoLnJlcGxhY2UoL1xcLihtZHxtZHgpJC8sIFwiXCIpO1xuXHRcdFxuXG5cdFx0Ly8gRGV0ZXJtaW5lIGNvbnRlbnQgdHlwZSBhbmQgYXBwcm9wcmlhdGUgYmFzZSBwYXRoXG5cdFx0bGV0IGJhc2VQYXRoID0gXCJcIjtcblx0XHRsZXQgY29udGVudEZvbGRlciA9IFwiXCI7XG5cdFx0bGV0IGluZGV4RmlsZU5hbWUgPSBcIlwiO1xuXG5cdFx0Ly8gVXNlIHRoZSBzYW1lIGxvZ2ljIGFzIGdldENvbnRlbnRUeXBlRm9yUGF0aCBidXQgZm9yIHRoZSB0YXJnZXQgbGlua1xuXHRcdC8vIFN1cHBvcnQgYm90aCAubWQgYW5kIC5tZHggZXh0ZW5zaW9ucyAtIHRyeSAubWR4IGZpcnN0IGlmIGxpbmsgc3VnZ2VzdHMgaXRcblx0XHRjb25zdCBmaWxlRXh0ZW5zaW9uID0gbGluay5lbmRzV2l0aCgnLm1keCcpID8gJy5tZHgnIDogJy5tZCc7XG5cdFx0Y29uc3QgdGFyZ2V0Q29udGVudFR5cGUgPSB0aGlzLmdldENvbnRlbnRUeXBlRm9yUGF0aChwYXRoICsgZmlsZUV4dGVuc2lvbik7XG5cdFx0XG5cdFx0Ly8gSWYgdGFyZ2V0IGxpbmsgZG9lc24ndCBoYXZlIGEgY2xlYXIgY29udGVudCB0eXBlIChubyBmb2xkZXIgcGF0aCksIHVzZSBjdXJyZW50IGZpbGUncyBjb250ZW50IHR5cGVcblx0XHRpZiAoIXRhcmdldENvbnRlbnRUeXBlLmJhc2VQYXRoICYmIGN1cnJlbnRGaWxlQ29udGVudFR5cGUuYmFzZVBhdGgpIHtcblx0XHRcdGJhc2VQYXRoID0gY3VycmVudEZpbGVDb250ZW50VHlwZS5iYXNlUGF0aDtcblx0XHRcdGluZGV4RmlsZU5hbWUgPSBjdXJyZW50RmlsZUNvbnRlbnRUeXBlLmluZGV4RmlsZU5hbWU7XG5cdFx0XHRjb250ZW50Rm9sZGVyID0gY3VycmVudEZpbGVDb250ZW50VHlwZS5jb250ZW50Rm9sZGVyO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRiYXNlUGF0aCA9IHRhcmdldENvbnRlbnRUeXBlLmJhc2VQYXRoO1xuXHRcdFx0aW5kZXhGaWxlTmFtZSA9IHRhcmdldENvbnRlbnRUeXBlLmluZGV4RmlsZU5hbWU7XG5cdFx0XHRjb250ZW50Rm9sZGVyID0gdGFyZ2V0Q29udGVudFR5cGUuY29udGVudEZvbGRlcjtcblx0XHR9XG5cblx0XHQvLyBTdHJpcCBjb250ZW50IGZvbGRlciBpZiBwcmVzZW50XG5cdFx0aWYgKGNvbnRlbnRGb2xkZXIpIHtcblx0XHRcdHBhdGggPSBwYXRoLnNsaWNlKGNvbnRlbnRGb2xkZXIubGVuZ3RoICsgMSk7XG5cdFx0fVxuXG5cdFx0bGV0IGFkZFRyYWlsaW5nU2xhc2ggPSBmYWxzZTtcblx0XHRcblx0XHQvLyBTbWFydCBkZXRlY3Rpb246IGlmIHRoZSBmaWxlbmFtZSBtYXRjaGVzIHRoZSBpbmRleCBmaWxlIG5hbWUgKHJlZ2FyZGxlc3Mgb2YgY3JlYXRpb24gbW9kZSksXG5cdFx0Ly8gdHJlYXQgaXQgYXMgZm9sZGVyLWJhc2VkIGxvZ2ljXG5cdFx0Ly8gTm90ZTogV2Ugb25seSBzZXQgYWRkVHJhaWxpbmdTbGFzaCBoZXJlOyB0aGUgZmluYWwgY2hlY2sgd2lsbCBwcmV2ZW50IGl0IGlmIHRoZXJlJ3MgYW4gYW5jaG9yXG5cdFx0Y29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcvJyk7XG5cdFx0Y29uc3QgbGFzdFBhcnQgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcblx0XHRcblx0XHQvLyBDaGVjayBpZiB0aGUgbGFzdCBwYXJ0IG1hdGNoZXMgdGhlIHNwZWNpZmllZCBpbmRleCBmaWxlIG5hbWVcblx0XHRpZiAoaW5kZXhGaWxlTmFtZSAmJiBpbmRleEZpbGVOYW1lLnRyaW0oKSAhPT0gXCJcIiAmJiBsYXN0UGFydCA9PT0gaW5kZXhGaWxlTmFtZSkge1xuXHRcdFx0cGFydHMucG9wKCk7XG5cdFx0XHRwYXRoID0gcGFydHMuam9pbignLycpO1xuXHRcdFx0YWRkVHJhaWxpbmdTbGFzaCA9IHRydWU7XG5cdFx0fVxuXHRcdC8vIENoZWNrIGlmIHRoZSBsYXN0IHBhcnQgbWF0Y2hlcyB0aGUgZGVmYXVsdCBcImluZGV4XCIgKHdoZW4gbm8gaW5kZXhGaWxlTmFtZSBpcyBzcGVjaWZpZWQpXG5cdFx0ZWxzZSBpZiAoKCFpbmRleEZpbGVOYW1lIHx8IGluZGV4RmlsZU5hbWUudHJpbSgpID09PSBcIlwiKSAmJiBsYXN0UGFydCA9PT0gXCJpbmRleFwiKSB7XG5cdFx0XHRwYXJ0cy5wb3AoKTtcblx0XHRcdHBhdGggPSBwYXJ0cy5qb2luKCcvJyk7XG5cdFx0XHRhZGRUcmFpbGluZ1NsYXNoID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRjb25zdCBzbHVnUGFydHMgPSBwYXRoLnNwbGl0KCcvJykubWFwKHBhcnQgPT4gdGhpcy50b0tlYmFiQ2FzZShwYXJ0KSk7XG5cdFx0Y29uc3Qgc2x1ZyA9IHNsdWdQYXJ0cy5qb2luKCcvJyk7XG5cblx0XHQvLyBGb3JtYXQgYmFzZSBwYXRoXG5cdFx0aWYgKGJhc2VQYXRoKSB7XG5cdFx0XHQvLyBBZGQgbGVhZGluZyBzbGFzaCBpZiBub3QgcHJlc2VudCB0byBtYWtlIGl0IGFic29sdXRlIGZyb20gcm9vdFxuXHRcdFx0aWYgKCFiYXNlUGF0aC5zdGFydHNXaXRoKFwiL1wiKSkge1xuXHRcdFx0XHRiYXNlUGF0aCA9IFwiL1wiICsgYmFzZVBhdGg7XG5cdFx0XHR9XG5cdFx0XHQvLyBBZGQgdHJhaWxpbmcgc2xhc2ggaWYgbm90IHByZXNlbnRcblx0XHRcdGlmICghYmFzZVBhdGguZW5kc1dpdGgoXCIvXCIpKSB7XG5cdFx0XHRcdGJhc2VQYXRoICs9IFwiL1wiO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBXaGVuIG5vIGJhc2UgcGF0aCBpcyBzcGVjaWZpZWQsIGFkZCBsZWFkaW5nIHNsYXNoIHRvIG1ha2UgaXQgYWJzb2x1dGUgZnJvbSByb290XG5cdFx0XHRiYXNlUGF0aCA9IFwiL1wiO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBpZiB3ZSBzaG91bGQgYWRkIHRyYWlsaW5nIHNsYXNoXG5cdFx0Ly8gQ1JJVElDQUw6IE5ldmVyIGFkZCB0cmFpbGluZyBzbGFzaCBiZWZvcmUgYW4gYW5jaG9yIChlLmcuLCAvYWJvdXQjaGVhZGluZyBub3QgL2Fib3V0LyNoZWFkaW5nKVxuXHRcdC8vIFRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIGFuY2hvciBsaW5rcyBmcm9tIGNvcHkgaGVhZGluZyBVUkwgZnVuY3Rpb25hbGl0eVxuXHRcdC8vIEFuY2hvciBsaW5rcyBzaG91bGQgTkVWRVIgaGF2ZSB0cmFpbGluZyBzbGFzaGVzLCByZWdhcmRsZXNzIG9mIHNldHRpbmdzXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLmdldFNldHRpbmdzKCk7XG5cdFx0Y29uc3Qgc2hvdWxkQWRkVHJhaWxpbmdTbGFzaCA9IChzZXR0aW5ncy5hZGRUcmFpbGluZ1NsYXNoVG9MaW5rcyB8fCBhZGRUcmFpbGluZ1NsYXNoKSAmJiAhYW5jaG9yO1xuXG5cdFx0cmV0dXJuIGAke2Jhc2VQYXRofSR7c2x1Z30ke3Nob3VsZEFkZFRyYWlsaW5nU2xhc2ggPyAnLycgOiAnJ30ke2FuY2hvcn1gO1xuXHR9XG5cblx0cHJpdmF0ZSBpc0luQ29uZmlndXJlZENvbnRlbnREaXJlY3RvcnkoZmlsZVBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRcdC8vIENoZWNrIGFsbCBjb250ZW50IHR5cGVzLCBzb3J0ZWQgYnkgcGF0dGVybiBzcGVjaWZpY2l0eSAobW9yZSBzcGVjaWZpYyBmaXJzdClcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcblx0XHRjb25zdCBjb250ZW50VHlwZXMgPSBzZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XG5cdFx0Y29uc3Qgc29ydGVkVHlwZXMgPSBzb3J0QnlQYXR0ZXJuU3BlY2lmaWNpdHkoY29udGVudFR5cGVzKTtcblx0XHRcblx0XHRmb3IgKGNvbnN0IGNvbnRlbnRUeXBlIG9mIHNvcnRlZFR5cGVzKSB7XG5cdFx0XHRpZiAoIWNvbnRlbnRUeXBlLmVuYWJsZWQpIGNvbnRpbnVlO1xuXHRcdFx0XG5cdFx0XHQvLyBIYW5kbGUgYmxhbmsgZm9sZGVyIChyb290KSAtIG1hdGNoZXMgZmlsZXMgaW4gdmF1bHQgcm9vdCBvbmx5XG5cdFx0XHRpZiAoIWNvbnRlbnRUeXBlLmZvbGRlciB8fCBjb250ZW50VHlwZS5mb2xkZXIudHJpbSgpID09PSBcIlwiKSB7XG5cdFx0XHRcdGlmICghZmlsZVBhdGguaW5jbHVkZXMoXCIvXCIpIHx8IGZpbGVQYXRoLnNwbGl0KFwiL1wiKS5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChtYXRjaGVzRm9sZGVyUGF0dGVybihmaWxlUGF0aCwgY29udGVudFR5cGUuZm9sZGVyKSkge1xuXHRcdFx0XHQvLyBDaGVjayBpZ25vcmVTdWJmb2xkZXJzIGlmIGZvbGRlciBpcyBzcGVjaWZpZWRcblx0XHRcdFx0aWYgKGNvbnRlbnRUeXBlLmlnbm9yZVN1YmZvbGRlcnMpIHtcblx0XHRcdFx0XHRjb25zdCBwYXRoU2VnbWVudHMgPSBmaWxlUGF0aC5zcGxpdChcIi9cIik7XG5cdFx0XHRcdFx0Y29uc3QgcGF0aERlcHRoID0gcGF0aFNlZ21lbnRzLmxlbmd0aDtcblx0XHRcdFx0XHRjb25zdCBwYXR0ZXJuU2VnbWVudHMgPSBjb250ZW50VHlwZS5mb2xkZXIuc3BsaXQoXCIvXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGV4cGVjdGVkRGVwdGggPSBwYXR0ZXJuU2VnbWVudHMubGVuZ3RoO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjb250ZW50VHlwZS5jcmVhdGlvbk1vZGUgPT09IFwiZm9sZGVyXCIpIHtcblx0XHRcdFx0XHRcdC8vIEZvciBmb2xkZXItYmFzZWQgY3JlYXRpb24sIGZpbGVzIGFyZSBvbmUgbGV2ZWwgZGVlcGVyIChlLmcuLCB0ZXN0L215LWZpbGUvaW5kZXgubWQpXG5cdFx0XHRcdFx0XHQvLyBTbyB3ZSBuZWVkIHRvIGFsbG93IG9uZSBleHRyYSBsZXZlbCBiZXlvbmQgdGhlIHBhdHRlcm4gZGVwdGhcblx0XHRcdFx0XHRcdGNvbnN0IGZvbGRlckRlcHRoID0gcGF0aERlcHRoIC0gMTsgLy8gU3VidHJhY3QgMSBmb3IgdGhlIGluZGV4Lm1kIGZpbGVcblx0XHRcdFx0XHRcdGlmIChmb2xkZXJEZXB0aCA9PT0gZXhwZWN0ZWREZXB0aCB8fCBmb2xkZXJEZXB0aCA9PT0gZXhwZWN0ZWREZXB0aCArIDEpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIEZvciBmaWxlLWJhc2VkIGNyZWF0aW9uLCBmaWxlcyBhcmUgYXQgdGhlIHNhbWUgZGVwdGggYXMgdGhlIHBhdHRlcm5cblx0XHRcdFx0XHRcdGlmIChwYXRoRGVwdGggPT09IGV4cGVjdGVkRGVwdGgpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHByaXZhdGUgZ2V0Q29udGVudFR5cGVGb3JQYXRoKGZpbGVQYXRoOiBzdHJpbmcpOiB7IGJhc2VQYXRoOiBzdHJpbmc7IGNyZWF0aW9uTW9kZTogXCJmaWxlXCIgfCBcImZvbGRlclwiOyBpbmRleEZpbGVOYW1lOiBzdHJpbmc7IGNvbnRlbnRGb2xkZXI6IHN0cmluZyB9IHtcblx0XHQvLyBDaGVjayBhbGwgY29udGVudCB0eXBlcywgc29ydGVkIGJ5IHBhdHRlcm4gc3BlY2lmaWNpdHkgKG1vcmUgc3BlY2lmaWMgZmlyc3QpXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLmdldFNldHRpbmdzKCk7XG5cdFx0Y29uc3QgY29udGVudFR5cGVzID0gc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xuXHRcdGNvbnN0IHNvcnRlZFR5cGVzID0gc29ydEJ5UGF0dGVyblNwZWNpZmljaXR5KGNvbnRlbnRUeXBlcyk7XG5cdFx0XG5cdFx0Zm9yIChjb25zdCBjb250ZW50VHlwZSBvZiBzb3J0ZWRUeXBlcykge1xuXHRcdFx0aWYgKCFjb250ZW50VHlwZS5lbmFibGVkKSBjb250aW51ZTtcblx0XHRcdFxuXHRcdFx0Ly8gSGFuZGxlIGJsYW5rIGZvbGRlciAocm9vdCkgLSBtYXRjaGVzIGZpbGVzIGluIHZhdWx0IHJvb3Qgb25seVxuXHRcdFx0aWYgKCFjb250ZW50VHlwZS5mb2xkZXIgfHwgY29udGVudFR5cGUuZm9sZGVyLnRyaW0oKSA9PT0gXCJcIikge1xuXHRcdFx0XHRpZiAoIWZpbGVQYXRoLmluY2x1ZGVzKFwiL1wiKSB8fCBmaWxlUGF0aC5zcGxpdChcIi9cIikubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdGJhc2VQYXRoOiBjb250ZW50VHlwZS5saW5rQmFzZVBhdGggfHwgXCJcIixcblx0XHRcdFx0XHRcdGNyZWF0aW9uTW9kZTogY29udGVudFR5cGUuY3JlYXRpb25Nb2RlLFxuXHRcdFx0XHRcdFx0aW5kZXhGaWxlTmFtZTogY29udGVudFR5cGUuaW5kZXhGaWxlTmFtZSB8fCBcIlwiLFxuXHRcdFx0XHRcdFx0Y29udGVudEZvbGRlcjogXCJcIlxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAobWF0Y2hlc0ZvbGRlclBhdHRlcm4oZmlsZVBhdGgsIGNvbnRlbnRUeXBlLmZvbGRlcikpIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWdub3JlU3ViZm9sZGVycyBpZiBmb2xkZXIgaXMgc3BlY2lmaWVkXG5cdFx0XHRcdGlmIChjb250ZW50VHlwZS5pZ25vcmVTdWJmb2xkZXJzKSB7XG5cdFx0XHRcdFx0Y29uc3QgcGF0aFNlZ21lbnRzID0gZmlsZVBhdGguc3BsaXQoXCIvXCIpO1xuXHRcdFx0XHRcdGNvbnN0IHBhdGhEZXB0aCA9IHBhdGhTZWdtZW50cy5sZW5ndGg7XG5cdFx0XHRcdFx0Y29uc3QgcGF0dGVyblNlZ21lbnRzID0gY29udGVudFR5cGUuZm9sZGVyLnNwbGl0KFwiL1wiKTtcblx0XHRcdFx0XHRjb25zdCBleHBlY3RlZERlcHRoID0gcGF0dGVyblNlZ21lbnRzLmxlbmd0aDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoY29udGVudFR5cGUuY3JlYXRpb25Nb2RlID09PSBcImZvbGRlclwiKSB7XG5cdFx0XHRcdFx0XHQvLyBGb3IgZm9sZGVyLWJhc2VkIGNyZWF0aW9uLCBmaWxlcyBhcmUgb25lIGxldmVsIGRlZXBlciAoZS5nLiwgdGVzdC9teS1maWxlL2luZGV4Lm1kKVxuXHRcdFx0XHRcdFx0Ly8gU28gd2UgbmVlZCB0byBhbGxvdyBvbmUgZXh0cmEgbGV2ZWwgYmV5b25kIHRoZSBwYXR0ZXJuIGRlcHRoXG5cdFx0XHRcdFx0XHRjb25zdCBmb2xkZXJEZXB0aCA9IHBhdGhEZXB0aCAtIDE7IC8vIFN1YnRyYWN0IDEgZm9yIHRoZSBpbmRleC5tZCBmaWxlXG5cdFx0XHRcdFx0XHRpZiAoZm9sZGVyRGVwdGggPT09IGV4cGVjdGVkRGVwdGggfHwgZm9sZGVyRGVwdGggPT09IGV4cGVjdGVkRGVwdGggKyAxKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0YmFzZVBhdGg6IGNvbnRlbnRUeXBlLmxpbmtCYXNlUGF0aCB8fCBcIlwiLFxuXHRcdFx0XHRcdFx0XHRcdGNyZWF0aW9uTW9kZTogY29udGVudFR5cGUuY3JlYXRpb25Nb2RlLFxuXHRcdFx0XHRcdFx0XHRcdGluZGV4RmlsZU5hbWU6IGNvbnRlbnRUeXBlLmluZGV4RmlsZU5hbWUgfHwgXCJcIixcblx0XHRcdFx0XHRcdFx0XHRjb250ZW50Rm9sZGVyOiBjb250ZW50VHlwZS5mb2xkZXJcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gRm9yIGZpbGUtYmFzZWQgY3JlYXRpb24sIGZpbGVzIGFyZSBhdCB0aGUgc2FtZSBkZXB0aCBhcyB0aGUgcGF0dGVyblxuXHRcdFx0XHRcdFx0aWYgKHBhdGhEZXB0aCA9PT0gZXhwZWN0ZWREZXB0aCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdGJhc2VQYXRoOiBjb250ZW50VHlwZS5saW5rQmFzZVBhdGggfHwgXCJcIixcblx0XHRcdFx0XHRcdFx0XHRjcmVhdGlvbk1vZGU6IGNvbnRlbnRUeXBlLmNyZWF0aW9uTW9kZSxcblx0XHRcdFx0XHRcdFx0XHRpbmRleEZpbGVOYW1lOiBjb250ZW50VHlwZS5pbmRleEZpbGVOYW1lIHx8IFwiXCIsXG5cdFx0XHRcdFx0XHRcdFx0Y29udGVudEZvbGRlcjogY29udGVudFR5cGUuZm9sZGVyXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRiYXNlUGF0aDogY29udGVudFR5cGUubGlua0Jhc2VQYXRoIHx8IFwiXCIsXG5cdFx0XHRcdFx0XHRjcmVhdGlvbk1vZGU6IGNvbnRlbnRUeXBlLmNyZWF0aW9uTW9kZSxcblx0XHRcdFx0XHRcdGluZGV4RmlsZU5hbWU6IGNvbnRlbnRUeXBlLmluZGV4RmlsZU5hbWUgfHwgXCJcIixcblx0XHRcdFx0XHRcdGNvbnRlbnRGb2xkZXI6IGNvbnRlbnRUeXBlLmZvbGRlclxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Ly8gRGVmYXVsdCBmYWxsYmFja1xuXHRcdHJldHVybiB7XG5cdFx0XHRiYXNlUGF0aDogXCJcIixcblx0XHRcdGNyZWF0aW9uTW9kZTogXCJmaWxlXCIsXG5cdFx0XHRpbmRleEZpbGVOYW1lOiBcIlwiLFxuXHRcdFx0Y29udGVudEZvbGRlcjogXCJcIlxuXHRcdH07XG5cdH1cblxuXHRjb252ZXJ0V2lraWxpbmtzRm9yQXN0cm8oZWRpdG9yOiBFZGl0b3IsIGZpbGU6IFRGaWxlIHwgbnVsbCk6IHZvaWQge1xuXHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJObyBhY3RpdmUgZmlsZS5cIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUHJlc2VydmUgY3Vyc29yIHBvc2l0aW9uIGJlZm9yZSBtb2RpZnlpbmcgY29udGVudFxuXHRcdGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcblx0XHRjb25zdCBvcmlnaW5hbExpbmUgPSBjdXJzb3IubGluZTtcblx0XHRjb25zdCBvcmlnaW5hbENoID0gY3Vyc29yLmNoO1xuXHRcdGNvbnN0IG9yaWdpbmFsQ29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXHRcdGNvbnN0IG9yaWdpbmFsTGluZUNvdW50ID0gb3JpZ2luYWxDb250ZW50LnNwbGl0KCdcXG4nKS5sZW5ndGg7XG5cdFx0Y29uc3Qgb3JpZ2luYWxMaW5lTGVuZ3RoID0gb3JpZ2luYWxDb250ZW50LnNwbGl0KCdcXG4nKVtvcmlnaW5hbExpbmVdPy5sZW5ndGggfHwgMDtcblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblx0XHRsZXQgbmV3Q29udGVudCA9IGNvbnRlbnQ7XG5cdFx0bGV0IGNvbnZlcnRlZENvdW50ID0gMDtcblx0XHRsZXQgc2tpcHBlZENvdW50ID0gMDtcblx0XHRjb25zdCBza2lwcGVkTGlua3M6IHN0cmluZ1tdID0gW107XG5cblx0XHQvLyBEZXRlcm1pbmUgdGhlIGN1cnJlbnQgZmlsZSdzIGNvbnRlbnQgdHlwZSBmb3IgcmVsYXRpdmUgbGlua3Ncblx0XHRjb25zdCBjdXJyZW50RmlsZUNvbnRlbnRUeXBlID0gdGhpcy5nZXRDb250ZW50VHlwZUZvclBhdGgoZmlsZS5wYXRoKTtcblxuXHRcdC8vIERlZmluZSBjb21tb24gaW1hZ2UgZXh0ZW5zaW9uc1xuXHRcdGNvbnN0IGltYWdlRXh0ZW5zaW9ucyA9IC9cXC4ocG5nfGpwZ3xqcGVnfGdpZnxzdmcpJC9pO1xuXG5cdFx0Ly8gSGVscGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIGEgbGluayBjYW4gYmUgcmVsaWFibHkgY29udmVydGVkXG5cdFx0Y29uc3QgY2FuQ29udmVydExpbmsgPSAobGlua1RleHQ6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuXHRcdFx0Ly8gRG9uJ3QgY29udmVydCBpZiBpdCdzIGFuIGltYWdlXG5cdFx0XHRpZiAoaW1hZ2VFeHRlbnNpb25zLnRlc3QobGlua1RleHQpKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRG9uJ3QgY29udmVydCBleHRlcm5hbCBsaW5rc1xuXHRcdFx0aWYgKGxpbmtUZXh0Lm1hdGNoKC9eaHR0cHM/OlxcL1xcLy8pKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRG9uJ3QgY29udmVydCBpZiBpdCdzIG5vdCBhIC5tZCBvciAubWR4IGZpbGUgYW5kIGRvZXNuJ3QgbG9vayBsaWtlIGEgdmFsaWQgaW50ZXJuYWwgbGlua1xuXHRcdFx0aWYgKCFsaW5rVGV4dC5pbmNsdWRlcygnLm1kJykgJiYgIWxpbmtUZXh0LmluY2x1ZGVzKCcubWR4JykgJiYgIWxpbmtUZXh0Lm1hdGNoKC9eW2EtekEtWjAtOV8tXSsoXFwvW2EtekEtWjAtOV8tXSspKiQvKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENoZWNrIGlmIHRoZSB0YXJnZXQgZmlsZSBpcyBpbiBhbnkgY29uZmlndXJlZCBjb250ZW50IGRpcmVjdG9yeVxuXHRcdFx0Ly8gU3VwcG9ydCBib3RoIC5tZCBhbmQgLm1keCBleHRlbnNpb25zXG5cdFx0XHRsZXQgdGFyZ2V0UGF0aDogc3RyaW5nO1xuXHRcdFx0aWYgKGxpbmtUZXh0LmVuZHNXaXRoKCcubWQnKSB8fCBsaW5rVGV4dC5lbmRzV2l0aCgnLm1keCcpKSB7XG5cdFx0XHRcdHRhcmdldFBhdGggPSBsaW5rVGV4dDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIERlZmF1bHQgdG8gLm1kIGlmIG5vIGV4dGVuc2lvbiBzcGVjaWZpZWRcblx0XHRcdFx0dGFyZ2V0UGF0aCA9IGxpbmtUZXh0ICsgJy5tZCc7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIENoZWNrIGlmIGl0J3MgaW4gYSBjb25maWd1cmVkIGNvbnRlbnQgZGlyZWN0b3J5XG5cdFx0XHRjb25zdCBpc0luQ29uZmlndXJlZERpcmVjdG9yeSA9IHRoaXMuaXNJbkNvbmZpZ3VyZWRDb250ZW50RGlyZWN0b3J5KHRhcmdldFBhdGgpO1xuXHRcdFx0XG5cdFx0XHQvLyBBbHNvIGNoZWNrIGlmIGl0J3MgYSBzaW1wbGUgZmlsZW5hbWUgKG5vIHBhdGgpIGFuZCBjdXJyZW50IGZpbGUgaGFzIGEgY29udGVudCB0eXBlXG5cdFx0XHRjb25zdCBpc1NpbXBsZUZpbGVuYW1lID0gIXRhcmdldFBhdGguaW5jbHVkZXMoJy8nKTtcblx0XHRcdGNvbnN0IGhhc0N1cnJlbnRDb250ZW50VHlwZSA9IGN1cnJlbnRGaWxlQ29udGVudFR5cGUuYmFzZVBhdGggIT09IFwiXCIgfHwgY3VycmVudEZpbGVDb250ZW50VHlwZS5jcmVhdGlvbk1vZGUgIT09IFwiZmlsZVwiIHx8IGN1cnJlbnRGaWxlQ29udGVudFR5cGUuaW5kZXhGaWxlTmFtZSAhPT0gXCJcIjtcblx0XHRcdFxuXHRcdFx0cmV0dXJuIGlzSW5Db25maWd1cmVkRGlyZWN0b3J5IHx8IChpc1NpbXBsZUZpbGVuYW1lICYmIGhhc0N1cnJlbnRDb250ZW50VHlwZSk7XG5cdFx0fTtcblxuXHRcdC8vIEhhbmRsZSByZWd1bGFyIFdpa2lsaW5rcyAobm9uLWltYWdlKVxuXHRcdG5ld0NvbnRlbnQgPSBuZXdDb250ZW50LnJlcGxhY2UoXG5cdFx0XHQvXFxbXFxbKFteXFxdfF0rKShcXHwoW15cXF1dKykpP1xcXVxcXS9nLFxuXHRcdFx0KG1hdGNoOiBzdHJpbmcsIGxpbmtUZXh0OiBzdHJpbmcsIF9waXBlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGRpc3BsYXlUZXh0OiBzdHJpbmcgfCB1bmRlZmluZWQpID0+IHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgaXQncyBhbiBpbWFnZSBXaWtpbGlua1xuXHRcdFx0XHRpZiAoaW1hZ2VFeHRlbnNpb25zLnRlc3QobGlua1RleHQpKSB7XG5cdFx0XHRcdFx0c2tpcHBlZENvdW50Kys7XG5cdFx0XHRcdFx0c2tpcHBlZExpbmtzLnB1c2gobGlua1RleHQpO1xuXHRcdFx0XHRcdHJldHVybiBtYXRjaDsgLy8gSWdub3JlIGFuZCByZXR1cm4gb3JpZ2luYWwgaW1hZ2UgV2lraWxpbmtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENoZWNrIGlmIHdlIGNhbiByZWxpYWJseSBjb252ZXJ0IHRoaXMgbGlua1xuXHRcdFx0XHRpZiAoIWNhbkNvbnZlcnRMaW5rKGxpbmtUZXh0KSkge1xuXHRcdFx0XHRcdHNraXBwZWRDb3VudCsrO1xuXHRcdFx0XHRcdHNraXBwZWRMaW5rcy5wdXNoKGxpbmtUZXh0KTtcblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2g7IC8vIFJldHVybiBvcmlnaW5hbCBpZiB3ZSBjYW4ndCBjb252ZXJ0IHJlbGlhYmx5XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBkaXNwbGF5ID0gZGlzcGxheVRleHQgfHwgbGlua1RleHQucmVwbGFjZSgvXFwuKG1kfG1keCkkLywgXCJcIik7XG5cblx0XHRcdFx0Ly8gRm9yIHJlbGF0aXZlIGxpbmtzIChubyBmb2xkZXIgcGF0aCksIHVzZSBjdXJyZW50IGZpbGUncyBjb250ZW50IHR5cGVcblx0XHRcdFx0Y29uc3QgdXJsID0gdGhpcy5nZXRBc3Ryb1VybEZyb21JbnRlcm5hbExpbmtXaXRoQ29udGV4dChsaW5rVGV4dCwgZmlsZS5wYXRoLCBjdXJyZW50RmlsZUNvbnRlbnRUeXBlKTtcblxuXHRcdFx0XHRjb252ZXJ0ZWRDb3VudCsrO1xuXHRcdFx0XHRyZXR1cm4gYFske2Rpc3BsYXl9XSgke3VybH0pYDtcblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0Ly8gSGFuZGxlIHN0YW5kYXJkIE1hcmtkb3duIGxpbmtzIChub24taW1hZ2UsIG5vbi1leHRlcm5hbClcblx0XHQvLyBPbmx5IHByb2Nlc3MgbGlua3MgdGhhdCBjb250YWluIC5tZCBvciAubWR4IHRvIGF2b2lkIHByb2Nlc3NpbmcgYWxyZWFkeS1jb252ZXJ0ZWQgbGlua3Ncblx0XHRuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKFxuXHRcdFx0L1xcWyhbXlxcXV0rKVxcXVxcKChbXildK1xcLihtZHxtZHgpW14pXSopXFwpL2csXG5cdFx0XHQobWF0Y2g6IHN0cmluZywgZGlzcGxheVRleHQ6IHN0cmluZywgbGluazogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgYW4gaW1hZ2UgbGluayBvciBleHRlcm5hbCBsaW5rXG5cdFx0XHRcdGlmIChsaW5rLm1hdGNoKC9eaHR0cHM/OlxcL1xcLy8pIHx8IGltYWdlRXh0ZW5zaW9ucy50ZXN0KGxpbmspKSB7XG5cdFx0XHRcdFx0c2tpcHBlZENvdW50Kys7XG5cdFx0XHRcdFx0c2tpcHBlZExpbmtzLnB1c2gobGluayk7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoOyAvLyBJZ25vcmUgZXh0ZXJuYWwgb3IgaW1hZ2UgbGlua3Ncblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENoZWNrIGlmIHdlIGNhbiByZWxpYWJseSBjb252ZXJ0IHRoaXMgbGlua1xuXHRcdFx0XHRpZiAoIWNhbkNvbnZlcnRMaW5rKGxpbmspKSB7XG5cdFx0XHRcdFx0c2tpcHBlZENvdW50Kys7XG5cdFx0XHRcdFx0c2tpcHBlZExpbmtzLnB1c2gobGluayk7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoOyAvLyBSZXR1cm4gb3JpZ2luYWwgaWYgd2UgY2FuJ3QgY29udmVydCByZWxpYWJseVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgdXJsID0gdGhpcy5nZXRBc3Ryb1VybEZyb21JbnRlcm5hbExpbmtXaXRoQ29udGV4dChsaW5rLCBmaWxlLnBhdGgsIGN1cnJlbnRGaWxlQ29udGVudFR5cGUpO1xuXG5cdFx0XHRcdGNvbnZlcnRlZENvdW50Kys7XG5cdFx0XHRcdHJldHVybiBgWyR7ZGlzcGxheVRleHR9XSgke3VybH0pYDtcblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0Ly8gSGFuZGxlIGltYWdlIGxpbmtzIGluIE1hcmtkb3duIGZvcm1hdCAoZS5nLiwgIVtJbWFnZV0obW91bnRhaW5zLnBuZykpXG5cdFx0bmV3Q29udGVudCA9IG5ld0NvbnRlbnQucmVwbGFjZShcblx0XHRcdC8hXFxbKC4qPylcXF1cXCgoW14pXSspXFwpL2csXG5cdFx0XHQobWF0Y2g6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRza2lwcGVkQ291bnQrKztcblx0XHRcdFx0cmV0dXJuIG1hdGNoOyAvLyBJZ25vcmUgYWxsIGltYWdlIGxpbmtzXG5cdFx0XHR9XG5cdFx0KTtcblxuXHRcdC8vIEhhbmRsZSB7e2VtYmVkfX0gc3ludGF4XG5cdFx0bmV3Q29udGVudCA9IG5ld0NvbnRlbnQucmVwbGFjZSgvXFx7XFx7KFtefV0rKVxcfVxcfS9nLCAobWF0Y2g6IHN0cmluZywgZmlsZU5hbWU6IHN0cmluZykgPT4ge1xuXHRcdFx0aWYgKGltYWdlRXh0ZW5zaW9ucy50ZXN0KGZpbGVOYW1lKSkge1xuXHRcdFx0XHRza2lwcGVkQ291bnQrKztcblx0XHRcdFx0c2tpcHBlZExpbmtzLnB1c2goZmlsZU5hbWUpO1xuXHRcdFx0XHRyZXR1cm4gbWF0Y2g7IC8vIElnbm9yZSBlbWJlZGRlZCBpbWFnZXNcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2hlY2sgaWYgd2UgY2FuIHJlbGlhYmx5IGNvbnZlcnQgdGhpcyBsaW5rXG5cdFx0XHRpZiAoIWNhbkNvbnZlcnRMaW5rKGZpbGVOYW1lKSkge1xuXHRcdFx0XHRza2lwcGVkQ291bnQrKztcblx0XHRcdFx0c2tpcHBlZExpbmtzLnB1c2goZmlsZU5hbWUpO1xuXHRcdFx0XHRyZXR1cm4gbWF0Y2g7IC8vIFJldHVybiBvcmlnaW5hbCBpZiB3ZSBjYW4ndCBjb252ZXJ0IHJlbGlhYmx5XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHVybCA9IHRoaXMuZ2V0QXN0cm9VcmxGcm9tSW50ZXJuYWxMaW5rV2l0aENvbnRleHQoZmlsZU5hbWUsIGZpbGUucGF0aCwgY3VycmVudEZpbGVDb250ZW50VHlwZSk7XG5cblx0XHRcdGNvbnZlcnRlZENvdW50Kys7XG5cdFx0XHRyZXR1cm4gYFtFbWJlZGRlZDogJHtmaWxlTmFtZX1dKCR7dXJsfSlgO1xuXHRcdH0pO1xuXG5cdFx0ZWRpdG9yLnNldFZhbHVlKG5ld0NvbnRlbnQpO1xuXHRcdFxuXHRcdC8vIFJlc3RvcmUgY3Vyc29yIHBvc2l0aW9uLCBhZGp1c3RpbmcgZm9yIGNvbnRlbnQgY2hhbmdlc1xuXHRcdGNvbnN0IG5ld0xpbmVDb3VudCA9IG5ld0NvbnRlbnQuc3BsaXQoJ1xcbicpLmxlbmd0aDtcblx0XHRjb25zdCBuZXdMaW5lTGVuZ3RoID0gbmV3Q29udGVudC5zcGxpdCgnXFxuJylbb3JpZ2luYWxMaW5lXT8ubGVuZ3RoIHx8IDA7XG5cdFx0XG5cdFx0Ly8gQ2FsY3VsYXRlIG5ldyBjdXJzb3IgcG9zaXRpb25cblx0XHRsZXQgbmV3TGluZSA9IG9yaWdpbmFsTGluZTtcblx0XHRsZXQgbmV3Q2ggPSBvcmlnaW5hbENoO1xuXHRcdFxuXHRcdC8vIElmIGNvbnRlbnQgbGVuZ3RoIGNoYW5nZWQsIGFkanVzdCBjdXJzb3IgcG9zaXRpb25cblx0XHRpZiAobmV3TGluZUNvdW50ICE9PSBvcmlnaW5hbExpbmVDb3VudCkge1xuXHRcdFx0Ly8gSWYgbGluZXMgd2VyZSBhZGRlZC9yZW1vdmVkIGJlZm9yZSBjdXJzb3IsIGFkanVzdCBsaW5lIG51bWJlclxuXHRcdFx0Ly8gRm9yIHNpbXBsaWNpdHksIGtlZXAgc2FtZSBsaW5lIGlmIGl0IHN0aWxsIGV4aXN0cywgb3RoZXJ3aXNlIGNsYW1wIHRvIGVuZFxuXHRcdFx0aWYgKG5ld0xpbmUgPj0gbmV3TGluZUNvdW50KSB7XG5cdFx0XHRcdG5ld0xpbmUgPSBNYXRoLm1heCgwLCBuZXdMaW5lQ291bnQgLSAxKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Ly8gQWRqdXN0IGNvbHVtbiBwb3NpdGlvbiBpZiBsaW5lIGxlbmd0aCBjaGFuZ2VkXG5cdFx0aWYgKG5ld0xpbmVMZW5ndGggIT09IG9yaWdpbmFsTGluZUxlbmd0aCkge1xuXHRcdFx0Ly8gSWYgbGluZSBnb3Qgc2hvcnRlciwgY2xhbXAgdG8gZW5kIG9mIGxpbmVcblx0XHRcdGlmIChuZXdDaCA+IG5ld0xpbmVMZW5ndGgpIHtcblx0XHRcdFx0bmV3Q2ggPSBNYXRoLm1heCgwLCBuZXdMaW5lTGVuZ3RoKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Ly8gUmVzdG9yZSBjdXJzb3IgcG9zaXRpb25cblx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogbmV3TGluZSwgY2g6IG5ld0NoIH0pO1xuXHRcdFxuXHRcdC8vIFNob3cgYXBwcm9wcmlhdGUgbm90aWNlIGJhc2VkIG9uIHJlc3VsdHNcblx0XHRpZiAoY29udmVydGVkQ291bnQgPiAwICYmIHNraXBwZWRDb3VudCA9PT0gMCkge1xuXHRcdFx0bmV3IE5vdGljZShgQ29udmVydGVkICR7Y29udmVydGVkQ291bnR9IGludGVybmFsIGxpbmske2NvbnZlcnRlZENvdW50ID4gMSA/ICdzJyA6ICcnfSBmb3IgQXN0cm8uYCk7XG5cdFx0fSBlbHNlIGlmIChjb252ZXJ0ZWRDb3VudCA+IDAgJiYgc2tpcHBlZENvdW50ID4gMCkge1xuXHRcdFx0bmV3IE5vdGljZShgQ29udmVydGVkICR7Y29udmVydGVkQ291bnR9IGxpbmske2NvbnZlcnRlZENvdW50ID4gMSA/ICdzJyA6ICcnfSBmb3IgQXN0cm8uIFNraXBwZWQgJHtza2lwcGVkQ291bnR9IGxpbmske3NraXBwZWRDb3VudCA+IDEgPyAncycgOiAnJ30gb3V0c2lkZSBjb25maWd1cmVkIGNvbnRlbnQgZGlyZWN0b3JpZXMuYCk7XG5cdFx0fSBlbHNlIGlmIChza2lwcGVkQ291bnQgPiAwKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBObyBsaW5rcyBjb252ZXJ0ZWQuIEFsbCAke3NraXBwZWRDb3VudH0gbGluayR7c2tpcHBlZENvdW50ID4gMSA/ICdzJyA6ICcnfSBhcmUgb3V0c2lkZSBjb25maWd1cmVkIGNvbnRlbnQgZGlyZWN0b3JpZXMgb3IgYXJlIGltYWdlcy9leHRlcm5hbCBsaW5rcy5gKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bmV3IE5vdGljZShcIk5vIGludGVybmFsIGxpbmtzIGZvdW5kIHRvIGNvbnZlcnQuXCIpO1xuXHRcdH1cblx0fVxufVxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFRGaWxlLCBOb3RpY2UsIFBsYXRmb3JtLCBNYXJrZG93blZpZXcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2UsIENvbnRlbnRUeXBlSWQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IEZpbGVPcGVyYXRpb25zIH0gZnJvbSBcIi4uL3V0aWxzL2ZpbGUtb3BlcmF0aW9uc1wiO1xuaW1wb3J0IHsgVGVtcGxhdGVQYXJzZXIgfSBmcm9tIFwiLi4vdXRpbHMvdGVtcGxhdGUtcGFyc2luZ1wiO1xuXG5leHBvcnQgY2xhc3MgVGl0bGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0ZmlsZTogVEZpbGUgfCBudWxsO1xuXHRwbHVnaW46IEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2U7XG5cdHR5cGU6IENvbnRlbnRUeXBlSWQ7XG5cdGlzUmVuYW1lOiBib29sZWFuO1xuXHRpc05ld05vdGU6IGJvb2xlYW47XG5cdHRpdGxlSW5wdXQhOiBIVE1MSW5wdXRFbGVtZW50O1xuXHRwcml2YXRlIGZpbGVPcHM6IEZpbGVPcGVyYXRpb25zO1xuXHRwcml2YXRlIHRlbXBsYXRlUGFyc2VyOiBUZW1wbGF0ZVBhcnNlcjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZmlsZTogVEZpbGUgfCBudWxsLCBwbHVnaW46IEFzdHJvQ29tcG9zZXJQbHVnaW5JbnRlcmZhY2UsIHR5cGU6IENvbnRlbnRUeXBlSWQsIGlzUmVuYW1lID0gZmFsc2UsIGlzTmV3Tm90ZSA9IGZhbHNlKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLmZpbGUgPSBmaWxlO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMudHlwZSA9IHR5cGU7XG5cdFx0dGhpcy5pc1JlbmFtZSA9IGlzUmVuYW1lO1xuXHRcdHRoaXMuaXNOZXdOb3RlID0gaXNOZXdOb3RlO1xuXHRcdFxuXHRcdC8vIEluaXRpYWxpemUgdXRpbGl0aWVzIHdpdGggY3VycmVudCBzZXR0aW5nc1xuXHRcdC8vIEZpbGVPcGVyYXRpb25zIHdpbGwgZ2V0IGZyZXNoIHNldHRpbmdzIGZyb20gcGx1Z2luIGR5bmFtaWNhbGx5XG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSBwbHVnaW4uc2V0dGluZ3M7XG5cdFx0dGhpcy5maWxlT3BzID0gbmV3IEZpbGVPcGVyYXRpb25zKGFwcCwgc2V0dGluZ3MsIHBsdWdpbik7XG5cdFx0dGhpcy50ZW1wbGF0ZVBhcnNlciA9IG5ldyBUZW1wbGF0ZVBhcnNlcihhcHAsIHNldHRpbmdzKTtcblx0fVxuXG5cdGFzeW5jIGdldEN1cnJlbnRUaXRsZUFzeW5jKCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0aWYgKCF0aGlzLmZpbGUpIHtcblx0XHRcdHJldHVybiBcIlwiO1xuXHRcdH1cblx0XHRcblx0XHQvLyBSZWFkIHRoZSBmaWxlIGNvbnRlbnQgZGlyZWN0bHkgdG8gZW5zdXJlIHdlIGhhdmUgdGhlIGxhdGVzdCB0aXRsZVxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZCh0aGlzLmZpbGUpO1xuXHRcdFx0Y29uc3QgdGl0bGVLZXkgPSB0aGlzLmZpbGVPcHMuZ2V0VGl0bGVLZXkodGhpcy50eXBlKTtcblx0XHRcdGNvbnN0IHsgcHJvcGVydGllcyB9ID0gdGhpcy50ZW1wbGF0ZVBhcnNlci5wYXJzZUZyb250bWF0dGVyKGNvbnRlbnQpO1xuXHRcdFx0XG5cdFx0XHRpZiAodGl0bGVLZXkgaW4gcHJvcGVydGllcykge1xuXHRcdFx0XHRjb25zdCB0aXRsZVZhbHVlID0gcHJvcGVydGllc1t0aXRsZUtleV07XG5cdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KHRpdGxlVmFsdWUpICYmIHRpdGxlVmFsdWUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdHJldHVybiBTdHJpbmcodGl0bGVWYWx1ZVswXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHRpdGxlVmFsdWUgIT09IG51bGwgJiYgdGl0bGVWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFN0cmluZyh0aXRsZVZhbHVlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgcmVhZGluZyBmaWxlIGZvciB0aXRsZTpcIiwgZXJyb3IpO1xuXHRcdH1cblx0XHRcblx0XHQvLyBGYWxsIGJhY2sgdG8gZmlsZW5hbWUtYmFzZWQgdGl0bGVcblx0XHRyZXR1cm4gdGhpcy5nZXRGYWxsYmFja1RpdGxlKCk7XG5cdH1cblxuXHRnZXRDdXJyZW50VGl0bGUoKTogc3RyaW5nIHtcblx0XHRpZiAoIXRoaXMuZmlsZSkge1xuXHRcdFx0cmV0dXJuIFwiXCI7XG5cdFx0fVxuXHRcdFxuXHRcdGNvbnN0IHRpdGxlS2V5ID0gdGhpcy5maWxlT3BzLmdldFRpdGxlS2V5KHRoaXMudHlwZSk7XG5cdFx0Y29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0aGlzLmZpbGUpO1xuXG5cdFx0aWYgKGNhY2hlPy5mcm9udG1hdHRlciAmJiB0aXRsZUtleSBpbiBjYWNoZS5mcm9udG1hdHRlcikge1xuXHRcdFx0Y29uc3QgdGl0bGVWYWx1ZSA9IGNhY2hlLmZyb250bWF0dGVyW3RpdGxlS2V5XSBhcyB1bmtub3duO1xuXHRcdFx0aWYgKHR5cGVvZiB0aXRsZVZhbHVlID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRyZXR1cm4gdGl0bGVWYWx1ZTtcblx0XHRcdH1cblx0XHRcdGlmIChBcnJheS5pc0FycmF5KHRpdGxlVmFsdWUpICYmIHRpdGxlVmFsdWUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb25zdCBmaXJzdFZhbHVlID0gdGl0bGVWYWx1ZVswXSBhcyB1bmtub3duO1xuXHRcdFx0XHRpZiAodHlwZW9mIGZpcnN0VmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZpcnN0VmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGZpcnN0VmFsdWUgIT0gbnVsbCkge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgZmlyc3RWYWx1ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGZpcnN0VmFsdWUgPT09ICdib29sZWFuJykge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFN0cmluZyhmaXJzdFZhbHVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBmaXJzdFZhbHVlID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZpcnN0VmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAodGl0bGVWYWx1ZSA9PSBudWxsKSB7XG5cdFx0XHRcdHJldHVybiAnJztcblx0XHRcdH1cblx0XHRcdGlmICh0eXBlb2YgdGl0bGVWYWx1ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHRpdGxlVmFsdWUgPT09ICdib29sZWFuJykge1xuXHRcdFx0XHRyZXR1cm4gU3RyaW5nKHRpdGxlVmFsdWUpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHR5cGVvZiB0aXRsZVZhbHVlID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRyZXR1cm4gdGl0bGVWYWx1ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiAnJztcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZ2V0RmFsbGJhY2tUaXRsZSgpO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRGYWxsYmFja1RpdGxlKCk6IHN0cmluZyB7XG5cdFx0aWYgKCF0aGlzLmZpbGUpIHtcblx0XHRcdHJldHVybiBcIlwiO1xuXHRcdH1cblx0XHRcblx0XHRsZXQgYmFzZW5hbWUgPSB0aGlzLmZpbGUuYmFzZW5hbWU7XG5cdFx0aWYgKHRoaXMuZmlsZS5wYXJlbnQgJiYgdGhpcy50eXBlICE9PSBcIm5vdGVcIikge1xuXHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSB0aGlzLmZpbGVPcHMuZ2V0Q29udGVudFR5cGUodGhpcy50eXBlKTtcblx0XHRcdGNvbnN0IGluZGV4RmlsZU5hbWUgPSBjb250ZW50VHlwZT8uaW5kZXhGaWxlTmFtZSB8fCBcIlwiO1xuXHRcdFx0aWYgKGluZGV4RmlsZU5hbWUudHJpbSgpICE9PSBcIlwiICYmIGJhc2VuYW1lID09PSBpbmRleEZpbGVOYW1lKSB7XG5cdFx0XHRcdGJhc2VuYW1lID0gdGhpcy5maWxlLnBhcmVudC5uYW1lO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoYmFzZW5hbWUuc3RhcnRzV2l0aChcIl9cIikpIHtcblx0XHRcdGJhc2VuYW1lID0gYmFzZW5hbWUuc2xpY2UoMSk7XG5cdFx0fVxuXHRcdHJldHVybiBiYXNlbmFtZS5yZXBsYWNlKC8tL2csIFwiIFwiKS5zcGxpdChcIiBcIikubWFwKHdvcmQgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkpLmpvaW4oXCIgXCIpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEV4dHJhY3RzIGEgc3VnZ2VzdGVkIHRpdGxlIGZyb20gdGhlIGZpbGUgYmFzZW5hbWUgZm9yIG5ld2x5IGNyZWF0ZWQgZmlsZXMuXG5cdCAqIFRoaXMgaXMgdXNlZCB3aGVuIGEgZmlsZSBpcyBjcmVhdGVkIGZyb20gYSBsaW5rIChlLmcuLCBbW3NFZnNsZWlmXV0pLlxuXHQgKiBQcmVzZXJ2ZXMgdGhlIG9yaWdpbmFsIHRleHQgYXMgbXVjaCBhcyBwb3NzaWJsZS5cblx0ICovXG5cdGdldFN1Z2dlc3RlZFRpdGxlRnJvbUJhc2VuYW1lKCk6IHN0cmluZyB7XG5cdFx0aWYgKCF0aGlzLmZpbGUpIHtcblx0XHRcdHJldHVybiBcIlwiO1xuXHRcdH1cblxuXHRcdGxldCBiYXNlbmFtZSA9IHRoaXMuZmlsZS5iYXNlbmFtZTtcblxuXHRcdC8vIEhhbmRsZSBpbmRleCBmaWxlIG5hbWVzIC0gdXNlIHBhcmVudCBmb2xkZXIgbmFtZSBpbnN0ZWFkXG5cdFx0aWYgKHRoaXMuZmlsZS5wYXJlbnQgJiYgdGhpcy50eXBlICE9PSBcIm5vdGVcIikge1xuXHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSB0aGlzLmZpbGVPcHMuZ2V0Q29udGVudFR5cGUodGhpcy50eXBlKTtcblx0XHRcdGNvbnN0IGluZGV4RmlsZU5hbWUgPSBjb250ZW50VHlwZT8uaW5kZXhGaWxlTmFtZSB8fCBcIlwiO1xuXHRcdFx0aWYgKGluZGV4RmlsZU5hbWUudHJpbSgpICE9PSBcIlwiICYmIGJhc2VuYW1lID09PSBpbmRleEZpbGVOYW1lKSB7XG5cdFx0XHRcdGJhc2VuYW1lID0gdGhpcy5maWxlLnBhcmVudC5uYW1lO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFJlbW92ZSBsZWFkaW5nIHVuZGVyc2NvcmUgaWYgcHJlc2VudFxuXHRcdGlmIChiYXNlbmFtZS5zdGFydHNXaXRoKFwiX1wiKSkge1xuXHRcdFx0YmFzZW5hbWUgPSBiYXNlbmFtZS5zbGljZSgxKTtcblx0XHR9XG5cblx0XHQvLyBSZXR1cm4gdGhlIGJhc2VuYW1lIGFzLWlzIHRvIHByZXNlcnZlIHVzZXIncyBvcmlnaW5hbCBpbnB1dFxuXHRcdC8vIChlLmcuLCBcInNFZnNsZWlmXCIgc3RheXMgYXMgXCJzRWZzbGVpZlwiKVxuXHRcdHJldHVybiBiYXNlbmFtZTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0XHRcblx0XHQvLyBBZGQgbW9iaWxlLWZyaWVuZGx5IHBvc2l0aW9uaW5nIGNsYXNzIC0gY2hlY2sgYm90aCB3aWR0aCBhbmQgcGxhdGZvcm1cblx0XHRjb25zdCBpc01vYmlsZSA9IHdpbmRvdy5pbm5lcldpZHRoIDw9IDc2OCB8fCBQbGF0Zm9ybS5pc01vYmlsZTtcblx0XHRpZiAoaXNNb2JpbGUpIHtcblx0XHRcdHRoaXMubW9kYWxFbC5hZGRDbGFzcygnYXN0cm8tY29tcG9zZXItbW9iaWxlLW1vZGFsJyk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuaXNSZW5hbWUpIHtcblx0XHRcdGNvbnN0IHR5cGVOYW1lID0gdGhpcy5nZXRUeXBlRGlzcGxheU5hbWUoKTtcblx0XHRcdFxuXHRcdFx0aWYgKHRoaXMudHlwZSA9PT0gXCJub3RlXCIpIHtcblx0XHRcdFx0Ly8gRm9yIGdlbmVyaWMgbm90ZXMgb3V0c2lkZSBvZiBhbnkga25vd24gY29udGVudCB0eXBlXG5cdFx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJSZW5hbWUgY29udGVudFwiIH0pO1xuXHRcdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJFbnRlciBhIHRpdGxlIGZvciB0aGlzIGNvbnRlbnQ6XCIgfSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IGBSZW5hbWUgJHt0eXBlTmFtZX0gY29udGVudGAgfSk7XG5cdFx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBgRW50ZXIgbmV3IHRpdGxlIGZvciB5b3VyICR7dHlwZU5hbWV9IGNvbnRlbnQ6YCB9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0dGhpcy50aXRsZUlucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuXHRcdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdFx0cGxhY2Vob2xkZXI6IFwiTmV3IFRpdGxlXCIsXG5cdFx0XHRcdGNsczogXCJhc3Ryby1jb21wb3Nlci10aXRsZS1pbnB1dFwiXG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Ly8gQXN5bmMgbG9hZCB0aGUgY3VycmVudCB0aXRsZSBmcm9tIGZpbGVcblx0XHRcdHZvaWQgdGhpcy5nZXRDdXJyZW50VGl0bGVBc3luYygpLnRoZW4odGl0bGUgPT4ge1xuXHRcdFx0XHR0aGlzLnRpdGxlSW5wdXQudmFsdWUgPSB0aXRsZTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5pc05ld05vdGUpIHtcblx0XHRcdGNvbnN0IHR5cGVOYW1lID0gdGhpcy5nZXRUeXBlRGlzcGxheU5hbWUoKTtcblx0XHRcdFxuXHRcdFx0aWYgKHRoaXMudHlwZSA9PT0gXCJub3RlXCIpIHtcblx0XHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIk5ldyBjb250ZW50XCIgfSk7XG5cdFx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIkVudGVyIGEgdGl0bGUgZm9yIHRoaXMgY29udGVudDpcIiB9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogYENyZWF0ZSBuZXcgJHt0eXBlTmFtZX0gY29udGVudGAgfSk7XG5cdFx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBgRW50ZXIgYSB0aXRsZSBmb3IgeW91ciBuZXcgJHt0eXBlTmFtZX0gY29udGVudDpgIH0pO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHR0aGlzLnRpdGxlSW5wdXQgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHRcdHR5cGU6IFwidGV4dFwiLFxuXHRcdFx0XHRwbGFjZWhvbGRlcjogXCJOZXcgVGl0bGVcIixcblx0XHRcdFx0Y2xzOiBcImFzdHJvLWNvbXBvc2VyLXRpdGxlLWlucHV0XCJcblx0XHRcdH0pO1xuXHRcdFx0Ly8gTGVhdmUgaW5wdXQgZW1wdHkgZm9yIG5ldyBub3RlcyAtIHVzZXIgY2FuIHR5cGUgZGlyZWN0bHlcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3QgdHlwZU5hbWUgPSB0aGlzLmdldFR5cGVEaXNwbGF5TmFtZSgpO1xuXHRcdFx0XG5cdFx0XHRpZiAodGhpcy50eXBlID09PSBcIm5vdGVcIikge1xuXHRcdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiTmV3IGNvbnRlbnRcIiB9KTtcblx0XHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiRW50ZXIgYSB0aXRsZSBmb3IgdGhpcyBjb250ZW50OlwiIH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBgQ3JlYXRlIG5ldyAke3R5cGVOYW1lfSBjb250ZW50YCB9KTtcblx0XHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGBFbnRlciBhIHRpdGxlIGZvciB5b3VyIG5ldyAke3R5cGVOYW1lfSBjb250ZW50OmAgfSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdHRoaXMudGl0bGVJbnB1dCA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHRcdHBsYWNlaG9sZGVyOiBcIk5ldyBUaXRsZVwiLFxuXHRcdFx0XHRjbHM6IFwiYXN0cm8tY29tcG9zZXItdGl0bGUtaW5wdXRcIlxuXHRcdFx0fSk7XG5cdFx0XHQvLyBQcmUtcG9wdWxhdGUgd2l0aCBzdWdnZXN0ZWQgdGl0bGUgZnJvbSBiYXNlbmFtZSBpZiBhdmFpbGFibGVcblx0XHRcdC8vIFRoaXMgaGFuZGxlcyBmaWxlcyBjcmVhdGVkIGZyb20gbGlua3MgKGUuZy4sIFtbc0Vmc2xlaWZdXSlcblx0XHRcdGlmICh0aGlzLmZpbGUpIHtcblx0XHRcdFx0Y29uc3Qgc3VnZ2VzdGVkVGl0bGUgPSB0aGlzLmdldFN1Z2dlc3RlZFRpdGxlRnJvbUJhc2VuYW1lKCk7XG5cdFx0XHRcdGlmIChzdWdnZXN0ZWRUaXRsZSkge1xuXHRcdFx0XHRcdHRoaXMudGl0bGVJbnB1dC52YWx1ZSA9IHN1Z2dlc3RlZFRpdGxlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMudGl0bGVJbnB1dC5mb2N1cygpO1xuXHRcdC8vIEZvciBuZXcgbm90ZXMsIGVuc3VyZSBjdXJzb3IgaXMgYXQgdGhlIHN0YXJ0IChwb3NpdGlvbiAwKVxuXHRcdGlmICh0aGlzLmlzTmV3Tm90ZSkge1xuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdHRoaXMudGl0bGVJbnB1dC5zZXRTZWxlY3Rpb25SYW5nZSgwLCAwKTtcblx0XHRcdH0sIDApO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwiYXN0cm8tY29tcG9zZXItYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXG5cdFx0Y29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiwgY2xzOiBcImFzdHJvLWNvbXBvc2VyLWNhbmNlbC1idXR0b25cIiB9KTtcblx0XHRjYW5jZWxCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcblxuXHRcdGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IHRoaXMuaXNSZW5hbWUgPyBcIlJlbmFtZVwiIDogXCJDcmVhdGVcIiwgY2xzOiBbXCJhc3Ryby1jb21wb3Nlci1jcmVhdGUtYnV0dG9uXCIsIFwibW9kLWN0YVwiXSB9KTtcblx0XHRzdWJtaXRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc3VibWl0KCk7XG5cblx0XHR0aGlzLnRpdGxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIsIChlKSA9PiB7XG5cdFx0XHRpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikgdm9pZCB0aGlzLnN1Ym1pdCgpO1xuXHRcdH0pO1xuXHR9XG5cblx0YXN5bmMgc3VibWl0KCkge1xuXHRcdGNvbnN0IHRpdGxlID0gdGhpcy50aXRsZUlucHV0LnZhbHVlLnRyaW0oKTtcblx0XHRcblx0XHRpZiAoIXRpdGxlKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIGVudGVyIGEgdGl0bGUuXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRsZXQgbmV3RmlsZTogVEZpbGUgfCBudWxsID0gbnVsbDtcblx0XHRcdGlmICh0aGlzLmlzUmVuYW1lKSB7XG5cdFx0XHRcdG5ld0ZpbGUgPSBhd2FpdCB0aGlzLmZpbGVPcHMucmVuYW1lRmlsZSh7IGZpbGU6IHRoaXMuZmlsZSEsIHRpdGxlLCB0eXBlOiB0aGlzLnR5cGUgfSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAobmV3RmlsZSkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMudGVtcGxhdGVQYXJzZXIudXBkYXRlVGl0bGVJbkZyb250bWF0dGVyKG5ld0ZpbGUsIHRpdGxlLCB0aGlzLnR5cGUpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIHJlbmFtZUZpbGUgYWxyZWFkeSBzaG93ZWQgYW4gZXJyb3Igbm90aWNlLCBjbG9zZSBtb2RhbCBhbmQgcmV0dXJuXG5cdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0aGlzLmlzTmV3Tm90ZSkge1xuXHRcdFx0XHQvLyBQcm9jZXNzIHRoZSBcIlVudGl0bGVkXCIgZmlsZSAtIHJlbmFtZSBpdCBhbmQgYWRkIHByb3BlcnRpZXNcblx0XHRcdFx0Ly8gVGhpcyByZXNwZWN0cyBjcmVhdGlvbk1vZGUgKGZvbGRlciB2cyBmaWxlKSBhbmQgZG9lc24ndCByZXF1aXJlIGRlbGV0aW9uXG5cdFx0XHRcdGlmICh0aGlzLmZpbGUpIHtcblx0XHRcdFx0XHRuZXdGaWxlID0gYXdhaXQgdGhpcy5maWxlT3BzLmNyZWF0ZUZpbGUoeyBmaWxlOiB0aGlzLmZpbGUsIHRpdGxlLCB0eXBlOiB0aGlzLnR5cGUgfSk7XG5cdFx0XHRcdFx0Ly8gQWx3YXlzIGluc2VydCBwcm9wZXJ0aWVzIHdoZW4gYXV0b0luc2VydFByb3BlcnRpZXMgaXMgZW5hYmxlZFxuXHRcdFx0XHRcdGNvbnN0IHNob3VsZEluc2VydFByb3BlcnRpZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvSW5zZXJ0UHJvcGVydGllcztcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAobmV3RmlsZSAmJiBzaG91bGRJbnNlcnRQcm9wZXJ0aWVzKSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFkZFByb3BlcnRpZXNUb0ZpbGUobmV3RmlsZSwgdGl0bGUsIHRoaXMudHlwZSk7XG5cdFx0XHRcdFx0XHQvLyBQb3NpdGlvbiBjdXJzb3IgYXQgZW5kIGFmdGVyIHByb3BlcnRpZXMgYXJlIGFkZGVkXG5cdFx0XHRcdFx0XHR0aGlzLnBvc2l0aW9uQ3Vyc29yQXRFbmQobmV3RmlsZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMuZmlsZSkge1xuXHRcdFx0XHQvLyBXZSBoYXZlIGFuIGV4aXN0aW5nIGZpbGUsIHByb2Nlc3MgaXRcblx0XHRcdFx0bmV3RmlsZSA9IGF3YWl0IHRoaXMuZmlsZU9wcy5jcmVhdGVGaWxlKHsgZmlsZTogdGhpcy5maWxlLCB0aXRsZSwgdHlwZTogdGhpcy50eXBlIH0pO1xuXHRcdFx0XHQvLyBBbHdheXMgaW5zZXJ0IHByb3BlcnRpZXMgd2hlbiBhdXRvSW5zZXJ0UHJvcGVydGllcyBpcyBlbmFibGVkXG5cdFx0XHRcdGNvbnN0IHNob3VsZEluc2VydFByb3BlcnRpZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvSW5zZXJ0UHJvcGVydGllcztcblx0XHRcdFx0XG5cdFx0XHRcdGlmIChuZXdGaWxlICYmIHNob3VsZEluc2VydFByb3BlcnRpZXMpIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFkZFByb3BlcnRpZXNUb0ZpbGUobmV3RmlsZSwgdGl0bGUsIHRoaXMudHlwZSk7XG5cdFx0XHRcdFx0Ly8gUG9zaXRpb24gY3Vyc29yIGF0IGVuZCBhZnRlciBwcm9wZXJ0aWVzIGFyZSBhZGRlZFxuXHRcdFx0XHRcdHRoaXMucG9zaXRpb25DdXJzb3JBdEVuZChuZXdGaWxlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRmFsbGJhY2sgLSBjcmVhdGUgbmV3IGZpbGVcblx0XHRcdFx0bmV3RmlsZSA9IGF3YWl0IHRoaXMuY3JlYXRlTmV3RmlsZSh0aXRsZSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGlmICghbmV3RmlsZSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBGYWlsZWQgdG8gJHt0aGlzLmlzUmVuYW1lID8gXCJyZW5hbWVcIiA6IFwiY3JlYXRlXCJ9ICR7dGhpcy50eXBlfS5gKTtcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1RpdGxlTW9kYWw6IEVycm9yIGR1cmluZyBwcm9jZXNzOicsIGVycm9yKTtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yICR7dGhpcy5pc1JlbmFtZSA/IFwicmVuYW1pbmdcIiA6IFwiY3JlYXRpbmdcIn0gJHt0aGlzLnR5cGV9OiAke2Vycm9yTWVzc2FnZX0uYCk7XG5cdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5jbG9zZSgpO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRUeXBlRGlzcGxheU5hbWUoKTogc3RyaW5nIHtcblx0XHRpZiAodGhpcy50eXBlID09PSBcIm5vdGVcIikge1xuXHRcdFx0cmV0dXJuIFwiQ29udGVudFwiO1xuXHRcdH1cblx0XHRjb25zdCBjb250ZW50VHlwZSA9IHRoaXMuZmlsZU9wcy5nZXRDb250ZW50VHlwZSh0aGlzLnR5cGUpO1xuXHRcdHJldHVybiBjb250ZW50VHlwZSA/IGNvbnRlbnRUeXBlLm5hbWUgOiBcIkNvbnRlbnRcIjtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgY3JlYXRlTmV3RmlsZSh0aXRsZTogc3RyaW5nKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcblx0XHQvLyBEZXRlcm1pbmUgdGhlIGFwcHJvcHJpYXRlIGZvbGRlciBiYXNlZCBvbiB3aGVyZSB0aGUgdXNlciBjcmVhdGVkIHRoZSBmaWxlXG5cdFx0bGV0IHRhcmdldEZvbGRlcjogc3RyaW5nO1xuXHRcdFxuXHRcdC8vIEdldCB0aGUgZGlyZWN0b3J5IHdoZXJlIHRoZSB1c2VyIGNyZWF0ZWQgdGhlIGZpbGVcblx0XHRjb25zdCBvcmlnaW5hbERpciA9IHRoaXMuZmlsZT8ucGFyZW50Py5wYXRoIHx8IFwiXCI7XG5cdFx0XG5cdFx0aWYgKHRoaXMudHlwZSAhPT0gXCJub3RlXCIpIHtcblx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gdGhpcy5maWxlT3BzLmdldENvbnRlbnRUeXBlKHRoaXMudHlwZSk7XG5cdFx0XHQvLyBGb3IgY29udGVudCB0eXBlcywgcmVzcGVjdCB0aGUgdXNlcidzIGNob3NlbiBsb2NhdGlvbiAoc3ViZm9sZGVyKVxuXHRcdFx0Ly8gT25seSB1c2UgdGhlIGNvbmZpZ3VyZWQgZm9sZGVyIGlmIHRoZSB1c2VyIGNyZWF0ZWQgdGhlIGZpbGUgaW4gdGhlIHZhdWx0IHJvb3Rcblx0XHRcdGlmIChvcmlnaW5hbERpciA9PT0gXCJcIiB8fCBvcmlnaW5hbERpciA9PT0gXCIvXCIpIHtcblx0XHRcdFx0dGFyZ2V0Rm9sZGVyID0gY29udGVudFR5cGU/LmZvbGRlciB8fCBcIlwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGFyZ2V0Rm9sZGVyID0gb3JpZ2luYWxEaXI7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEZvciBub3RlcywgdXNlIHRoZSBvcmlnaW5hbCBkaXJlY3Rvcnlcblx0XHRcdHRhcmdldEZvbGRlciA9IG9yaWdpbmFsRGlyO1xuXHRcdH1cblxuXHRcdC8vIENyZWF0ZSB0aGUgZmlsZW5hbWUgZnJvbSB0aGUgdGl0bGVcblx0XHRjb25zdCBmaWxlbmFtZSA9IHRoaXMuZmlsZU9wcy5nZW5lcmF0ZUZpbGVuYW1lKHRpdGxlKTtcblx0XHRjb25zdCBjb250ZW50VHlwZSA9IHRoaXMuZmlsZU9wcy5nZXRDb250ZW50VHlwZSh0aGlzLnR5cGUpO1xuXHRcdGNvbnN0IGV4dGVuc2lvbiA9IGNvbnRlbnRUeXBlPy51c2VNZHhFeHRlbnNpb24gPyBcIi5tZHhcIiA6IFwiLm1kXCI7XG5cdFx0Y29uc3QgZmlsZVBhdGggPSB0YXJnZXRGb2xkZXIgPyBgJHt0YXJnZXRGb2xkZXJ9LyR7ZmlsZW5hbWV9JHtleHRlbnNpb259YCA6IGAke2ZpbGVuYW1lfSR7ZXh0ZW5zaW9ufWA7XG5cblx0XHQvLyBUcmFjayB0aGF0IHRoaXMgZmlsZSB3aWxsIGJlIGNyZWF0ZWQgYnkgdGhlIHBsdWdpbiBCRUZPUkUgY3JlYXRpbmcgaXRcblx0XHQvLyBUaGlzIHByZXZlbnRzIHRoZSBjcmVhdGUgZXZlbnQgZnJvbSB0cmlnZ2VyaW5nIGFub3RoZXIgbW9kYWxcblx0XHRpZiAodGhpcy5wbHVnaW4gJiYgJ3BsdWdpbkNyZWF0ZWRGaWxlcycgaW4gdGhpcy5wbHVnaW4pIHtcblx0XHRcdCh0aGlzLnBsdWdpbiBhcyB7IHBsdWdpbkNyZWF0ZWRGaWxlcz86IFNldDxzdHJpbmc+IH0pLnBsdWdpbkNyZWF0ZWRGaWxlcz8uYWRkKGZpbGVQYXRoKTtcblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgdGhlIGZpbGUgd2l0aCBpbml0aWFsIGNvbnRlbnRcblx0XHRsZXQgaW5pdGlhbENvbnRlbnQgPSBcIlwiO1xuXHRcdC8vIEFsd2F5cyBpbnNlcnQgcHJvcGVydGllcyB3aGVuIGF1dG9JbnNlcnRQcm9wZXJ0aWVzIGlzIGVuYWJsZWRcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0luc2VydFByb3BlcnRpZXMpIHtcblx0XHRcdGluaXRpYWxDb250ZW50ID0gdGhpcy5nZW5lcmF0ZUluaXRpYWxDb250ZW50KHRpdGxlKTtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgbmV3RmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgaW5pdGlhbENvbnRlbnQpO1xuXHRcdFx0XG5cdFx0XHQvLyBPcGVuIHRoZSBuZXcgZmlsZVxuXHRcdFx0Y29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCk7XG5cdFx0XHRhd2FpdCBsZWFmLm9wZW5GaWxlKG5ld0ZpbGUpO1xuXHRcdFx0XG5cdFx0XHQvLyBQb3NpdGlvbiBjdXJzb3IgYXQgdGhlIGVuZCBvZiBjb250ZW50IGFmdGVyIGVkaXRvciBpcyByZWFkeVxuXHRcdFx0Ly8gVXNlIG11bHRpcGxlIGF0dGVtcHRzIHRvIGVuc3VyZSBpdCB3b3JrcyBldmVuIGlmIGVkaXRvciBpc24ndCByZWFkeSBpbW1lZGlhdGVseVxuXHRcdFx0Y29uc3QgcG9zaXRpb25DdXJzb3IgPSAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXc7XG5cdFx0XHRcdGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ICYmIHZpZXcuZWRpdG9yKSB7XG5cdFx0XHRcdFx0Y29uc3QgZWRpdG9yID0gdmlldy5lZGl0b3I7XG5cdFx0XHRcdFx0Y29uc3QgY29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXHRcdFx0XHRcdGlmIChjb250ZW50KSB7XG5cdFx0XHRcdFx0XHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuXHRcdFx0XHRcdFx0Y29uc3QgbGFzdExpbmUgPSBsaW5lcy5sZW5ndGggLSAxO1xuXHRcdFx0XHRcdFx0Y29uc3QgbGFzdExpbmVMZW5ndGggPSBsaW5lc1tsYXN0TGluZV0/Lmxlbmd0aCB8fCAwO1xuXHRcdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGxhc3RMaW5lLCBjaDogbGFzdExpbmVMZW5ndGggfSk7XG5cdFx0XHRcdFx0XHQvLyBGb2N1cyB0aGUgZWRpdG9yIHRvIGVuc3VyZSBjdXJzb3IgaXMgdmlzaWJsZSBhbmQgZmlsZW5hbWUgaXNuJ3Qgc2VsZWN0ZWRcblx0XHRcdFx0XHRcdGVkaXRvci5mb2N1cygpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdC8vIFRyeSBpbW1lZGlhdGVseVxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdGlmICghcG9zaXRpb25DdXJzb3IoKSkge1xuXHRcdFx0XHRcdC8vIElmIGl0IGRpZG4ndCB3b3JrLCB0cnkgYWdhaW4gYWZ0ZXIgYSBsb25nZXIgZGVsYXlcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdHBvc2l0aW9uQ3Vyc29yKCk7XG5cdFx0XHRcdFx0fSwgMjAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgMTAwKTtcblx0XHRcdFxuXHRcdFx0cmV0dXJuIG5ld0ZpbGU7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAke2Vycm9yTWVzc2FnZX1gKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGdlbmVyYXRlSW5pdGlhbENvbnRlbnQodGl0bGU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblx0XHRjb25zdCBkYXRlU3RyaW5nID0gd2luZG93Lm1vbWVudChub3cpLmZvcm1hdCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0KTtcblx0XHRjb25zdCBzbHVnID0gdGhpcy5maWxlT3BzLnRvS2ViYWJDYXNlKHRpdGxlKTtcblxuXHRcdGxldCB0ZW1wbGF0ZTogc3RyaW5nO1xuXHRcdGlmICh0aGlzLnR5cGUgPT09IFwibm90ZVwiKSB7XG5cdFx0XHQvLyBGb3IgZ2VuZXJpYyBub3RlcywgdXNlIGEgc2ltcGxlIHRlbXBsYXRlXG5cdFx0XHQvLyBQcm9wZXJseSBlc2NhcGUgdGhlIHRpdGxlIGZvciBZQU1MXG5cdFx0XHRjb25zdCBlc2NhcGVkVGl0bGUgPSB0aGlzLmVzY2FwZVlhbWxTdHJpbmcodGl0bGUpO1xuXHRcdFx0dGVtcGxhdGUgPSBgLS0tXFxudGl0bGU6ICR7ZXNjYXBlZFRpdGxlfVxcbmRhdGU6ICR7ZGF0ZVN0cmluZ31cXG4tLS1cXG5gO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBjb250ZW50VHlwZSA9IHRoaXMuZmlsZU9wcy5nZXRDb250ZW50VHlwZSh0aGlzLnR5cGUpO1xuXHRcdFx0aWYgKCFjb250ZW50VHlwZSkge1xuXHRcdFx0XHRjb25zdCBlc2NhcGVkVGl0bGUgPSB0aGlzLmVzY2FwZVlhbWxTdHJpbmcodGl0bGUpO1xuXHRcdFx0XHR0ZW1wbGF0ZSA9IGAtLS1cXG50aXRsZTogJHtlc2NhcGVkVGl0bGV9XFxuZGF0ZTogJHtkYXRlU3RyaW5nfVxcbi0tLVxcbmA7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0ZW1wbGF0ZSA9IGNvbnRlbnRUeXBlLnRlbXBsYXRlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHR0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UoL1xce1xce3RpdGxlXFx9XFx9L2csIHRpdGxlKTtcblx0XHR0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UoL1xce1xce2RhdGVcXH1cXH0vZywgZGF0ZVN0cmluZyk7XG5cdFx0dGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKC9cXHtcXHtzbHVnXFx9XFx9L2csIHNsdWcpO1xuXG5cdFx0cmV0dXJuIHRlbXBsYXRlO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBhZGRQcm9wZXJ0aWVzVG9GaWxlKGZpbGU6IFRGaWxlLCB0aXRsZTogc3RyaW5nLCB0eXBlOiBDb250ZW50VHlwZUlkKSB7XG5cdFx0Y29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblx0XHRjb25zdCBkYXRlU3RyaW5nID0gd2luZG93Lm1vbWVudChub3cpLmZvcm1hdCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0KTtcblx0XHRjb25zdCBzbHVnID0gdGhpcy5maWxlT3BzLnRvS2ViYWJDYXNlKHRpdGxlKTtcblxuXHRcdGxldCB0ZW1wbGF0ZTogc3RyaW5nO1xuXHRcdGlmICh0eXBlID09PSBcIm5vdGVcIikge1xuXHRcdFx0Ly8gRm9yIGdlbmVyaWMgbm90ZXMsIHVzZSBhIHNpbXBsZSB0ZW1wbGF0ZVxuXHRcdFx0Ly8gUHJvcGVybHkgZXNjYXBlIHRoZSB0aXRsZSBmb3IgWUFNTFxuXHRcdFx0Y29uc3QgZXNjYXBlZFRpdGxlID0gdGhpcy5lc2NhcGVZYW1sU3RyaW5nKHRpdGxlKTtcblx0XHRcdHRlbXBsYXRlID0gYC0tLVxcbnRpdGxlOiAke2VzY2FwZWRUaXRsZX1cXG5kYXRlOiAke2RhdGVTdHJpbmd9XFxuLS0tXFxuYDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSB0aGlzLmZpbGVPcHMuZ2V0Q29udGVudFR5cGUodHlwZSk7XG5cdFx0XHRpZiAoIWNvbnRlbnRUeXBlKSB7XG5cdFx0XHRcdGNvbnN0IGVzY2FwZWRUaXRsZSA9IHRoaXMuZXNjYXBlWWFtbFN0cmluZyh0aXRsZSk7XG5cdFx0XHRcdHRlbXBsYXRlID0gYC0tLVxcbnRpdGxlOiAke2VzY2FwZWRUaXRsZX1cXG5kYXRlOiAke2RhdGVTdHJpbmd9XFxuLS0tXFxuYDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRlbXBsYXRlID0gY29udGVudFR5cGUudGVtcGxhdGU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgvXFx7XFx7dGl0bGVcXH1cXH0vZywgdGl0bGUpO1xuXHRcdHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgvXFx7XFx7ZGF0ZVxcfVxcfS9nLCBkYXRlU3RyaW5nKTtcblx0XHR0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UoL1xce1xce3NsdWdcXH1cXH0vZywgc2x1Zyk7XG5cblx0XHQvLyBFbnN1cmUgbm8gZXh0cmEgbmV3bGluZXMgb3IgLS0tIGFyZSBhZGRlZCBiZXlvbmQgdGhlIHRlbXBsYXRlXG5cdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIHRlbXBsYXRlKTtcblx0fVxuXG5cdHByaXZhdGUgcG9zaXRpb25DdXJzb3JBdEVuZChmaWxlOiBURmlsZSkge1xuXHRcdGNvbnN0IHBvc2l0aW9uQ3Vyc29yID0gKCkgPT4ge1xuXHRcdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0XHRpZiAodmlldyAmJiB2aWV3LmZpbGUgPT09IGZpbGUgJiYgdmlldy5lZGl0b3IpIHtcblx0XHRcdFx0Y29uc3QgZWRpdG9yID0gdmlldy5lZGl0b3I7XG5cdFx0XHRcdGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblx0XHRcdFx0aWYgKGNvbnRlbnQpIHtcblx0XHRcdFx0XHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuXHRcdFx0XHRcdGNvbnN0IGxhc3RMaW5lID0gbGluZXMubGVuZ3RoIC0gMTtcblx0XHRcdFx0XHRjb25zdCBsYXN0TGluZUxlbmd0aCA9IGxpbmVzW2xhc3RMaW5lXT8ubGVuZ3RoIHx8IDA7XG5cdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGxhc3RMaW5lLCBjaDogbGFzdExpbmVMZW5ndGggfSk7XG5cdFx0XHRcdFx0Ly8gRm9jdXMgdGhlIGVkaXRvciB0byBlbnN1cmUgY3Vyc29yIGlzIHZpc2libGVcblx0XHRcdFx0XHRlZGl0b3IuZm9jdXMoKTtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG5cdFx0XG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRpZiAoIXBvc2l0aW9uQ3Vyc29yKCkpIHtcblx0XHRcdFx0Ly8gSWYgaXQgZGlkbid0IHdvcmssIHRyeSBhZ2FpbiBhZnRlciBhIGxvbmdlciBkZWxheVxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRwb3NpdGlvbkN1cnNvcigpO1xuXHRcdFx0XHR9LCAyMDApO1xuXHRcdFx0fVxuXHRcdH0sIDEwMCk7XG5cdH1cblxuXHRwcml2YXRlIGVzY2FwZVlhbWxTdHJpbmcoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdC8vIFByb3Blcmx5IGVzY2FwZSBZQU1MIHN0cmluZyB2YWx1ZXNcblx0XHQvLyBZQU1MIHN0cmluZ3Mgd2l0aCBxdW90ZXMgbmVlZCB0byBiZSB3cmFwcGVkIGluIHNpbmdsZSBxdW90ZXMgb3IgZXNjYXBlZCBwcm9wZXJseVxuXHRcdGlmIChzdHIuaW5jbHVkZXMoJ1wiJykgfHwgc3RyLmluY2x1ZGVzKFwiJ1wiKSB8fCBzdHIuaW5jbHVkZXMoJ1xcbicpIHx8IHN0ci5pbmNsdWRlcygnXFxcXCcpKSB7XG5cdFx0XHQvLyBGb3Igc3RyaW5ncyB3aXRoIHF1b3RlcywgbmV3bGluZXMsIG9yIGJhY2tzbGFzaGVzLCB1c2Ugc2luZ2xlIHF1b3RlcyBhbmQgZXNjYXBlIHNpbmdsZSBxdW90ZXNcblx0XHRcdHJldHVybiBgJyR7c3RyLnJlcGxhY2UoLycvZywgXCInJ1wiKX0nYDtcblx0XHR9IGVsc2UgaWYgKHN0ci5pbmNsdWRlcyhcIiBcIikgfHwgc3RyLmluY2x1ZGVzKFwiOlwiKSB8fCBzdHIuaW5jbHVkZXMoXCIjXCIpIHx8IHN0ci5pbmNsdWRlcyhcIkBcIikpIHtcblx0XHRcdC8vIEZvciBzdHJpbmdzIHdpdGggc3BhY2VzIG9yIHNwZWNpYWwgWUFNTCBjaGFyYWN0ZXJzLCB3cmFwIGluIGRvdWJsZSBxdW90ZXMgYW5kIGVzY2FwZSBkb3VibGUgcXVvdGVzXG5cdFx0XHRyZXR1cm4gYFwiJHtzdHIucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpfVwiYDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gRm9yIHNpbXBsZSBzdHJpbmdzLCBubyBxdW90ZXMgbmVlZGVkXG5cdFx0XHRyZXR1cm4gc3RyO1xuXHRcdH1cblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFBsYXRmb3JtLCBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBDb250ZW50VHlwZSwgQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZSwgQXN0cm9Db21wb3NlclNldHRpbmdzIH0gZnJvbSBcIi4uL3R5cGVzXCI7XHJcbmltcG9ydCB7IENvbW1hbmRQaWNrZXJNb2RhbCB9IGZyb20gXCIuL2NvbXBvbmVudHMvQ29tbWFuZFBpY2tlck1vZGFsXCI7XHJcbmltcG9ydCB7IEljb25QaWNrZXJNb2RhbCB9IGZyb20gXCIuL2NvbXBvbmVudHMvSWNvblBpY2tlck1vZGFsXCI7XHJcbmltcG9ydCB7IENvbmZpcm1Nb2RhbCB9IGZyb20gXCIuL2NvbXBvbmVudHMvQ29uZmlybU1vZGFsXCI7XHJcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAgfSBmcm9tIFwiLi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0XCI7XHJcbmltcG9ydCB7IHJlZ2lzdGVyQ29udGVudFR5cGVDb21tYW5kcyB9IGZyb20gXCIuLi9jb21tYW5kc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFzdHJvQ29tcG9zZXJTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBBc3Ryb0NvbXBvc2VyUGx1Z2luSW50ZXJmYWNlO1xyXG5cdGF1dG9SZW5hbWVDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0cG9zdHNGb2xkZXJDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0b25seUF1dG9tYXRlQ29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cdGNyZWF0aW9uTW9kZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRpbmRleEZpbGVDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0ZXhjbHVkZWREaXJzQ29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cdHVuZGVyc2NvcmVQcmVmaXhDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0YXV0b0luc2VydENvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwYWdlc0ZpZWxkc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwYWdlc0luZGV4RmlsZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwYWdlc09ubHlBdXRvbWF0ZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHR0ZXJtaW5hbENvbW1hbmRDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0Y29uZmlnQ29tbWFuZENvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRjdXN0b21Db250ZW50VHlwZXNDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0dGVybWluYWxSaWJib25Ub2dnbGU6IFNldHRpbmcgfCBudWxsID0gbnVsbDtcclxuXHRjb25maWdSaWJib25Ub2dnbGU6IFNldHRpbmcgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIHRlcm1pbmFsUmliYm9uVG9nZ2xlQ29tcG9uZW50OiB7IHNldERpc2FibGVkOiAoZGlzYWJsZWQ6IGJvb2xlYW4pID0+IHZvaWQgfSB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgY29uZmlnUmliYm9uVG9nZ2xlQ29tcG9uZW50OiB7IHNldERpc2FibGVkOiAoZGlzYWJsZWQ6IGJvb2xlYW4pID0+IHZvaWQgfSB8IG51bGwgPSBudWxsO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luIGFzIHVua25vd24gYXMgQXN0cm9Db21wb3NlclBsdWdpbkludGVyZmFjZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZnJlc2gganVzdCB0aGUgY29udGVudCB0eXBlcyBzZWN0aW9uXHJcblx0ICogTW9yZSBlZmZpY2llbnQgdGhhbiByZWZyZXNoaW5nIHRoZSBlbnRpcmUgc2V0dGluZ3MgdGFiXHJcblx0ICovXHJcblx0cHVibGljIHJlZnJlc2hDb250ZW50VHlwZXMoKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5jdXN0b21Db250ZW50VHlwZXNDb250YWluZXIpIHtcclxuXHRcdFx0dGhpcy5yZW5kZXJDdXN0b21Db250ZW50VHlwZXMoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHQvLyBVc2UgY3VycmVudCBwbHVnaW4gc2V0dGluZ3MgKGFscmVhZHkgbG9hZGVkIGFuZCB1cC10by1kYXRlKVxyXG5cdFx0Ly8gQWx3YXlzIHJlYWQgZnJlc2ggc2V0dGluZ3MgdG8gZW5zdXJlIHdlIHNob3cgbWlncmF0ZWQgY29udGVudCB0eXBlcyBpbW1lZGlhdGVseVxyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHRcdFxyXG5cdFx0Ly8gUmVuZGVyIHRoZSBzZXR0aW5ncyB0YWIgd2l0aCBjdXJyZW50IHNldHRpbmdzXHJcblx0XHQvLyBUaGlzIHdpbGwgc2hvdyBhbGwgY29udGVudCB0eXBlcyBpbmNsdWRpbmcgbmV3bHkgbWlncmF0ZWQgb25lc1xyXG5cdFx0dGhpcy5yZW5kZXJTZXR0aW5nc1RhYihjb250YWluZXJFbCwgc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJTZXR0aW5nc1RhYihjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHNldHRpbmdzOiBBc3Ryb0NvbXBvc2VyU2V0dGluZ3MpOiB2b2lkIHtcclxuXHJcblx0XHQvLyBHbG9iYWwgc2V0dGluZ3MgKGZpcnN0IGdyb3VwIC0gbm8gaGVhZGluZylcclxuXHRcdGNvbnN0IGdlbmVyYWxHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsIHVuZGVmaW5lZCwgJ2FzdHJvLWNvbXBvc2VyJyk7XHJcblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoXCJEYXRlIGZvcm1hdFwiKVxyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBEYXRlIGZvcm1hdCBjb2RlcyAoTU1NTSwgeXl5eSwgZXRjLikgYXJlIHRlY2huaWNhbCBub3RhdGlvbiwgbm90IFVJIHRleHRcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0LnNldERlc2MoXCJGb3JtYXQgZm9yIHRoZSBkYXRlIGluIHByb3BlcnRpZXMgKGUuZy4sIHl5eXktbW0tZGQsIE1NTU0gRCwgeXl5eSwgeXl5eS1tbS1kZCBISDptbSlcIilcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cclxuXHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiWVlZWS1NTS1ERFwiIGlzIGEgZGF0ZSBmb3JtYXQgcGxhY2Vob2xkZXIsIG5vdCBVSSB0ZXh0XHJcblx0XHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiWVlZWS1NTS1ERFwiKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuZGF0ZUZvcm1hdClcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZGF0ZUZvcm1hdCA9IHZhbHVlIHx8IFwiWVlZWS1NTS1ERFwiO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoXCJFbmFibGUgY29weSBoZWFkaW5nIGxpbmtzXCIpXHJcblx0XHRcdFx0LnNldERlc2MoXCJBZGQgcmlnaHQtY2xpY2sgY29udGV4dCBtZW51IG9wdGlvbiB0byBjb3B5IGhlYWRpbmcgbGlua3MgaW4gdmFyaW91cyBmb3JtYXRzLlwiKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuZW5hYmxlQ29weUhlYWRpbmdMaW5rKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZW5hYmxlQ29weUhlYWRpbmdMaW5rID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy51cGRhdGVDb3B5SGVhZGluZ0ZpZWxkcygpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoXCJEZWZhdWx0IGhlYWRpbmcgbGluayBmb3JtYXRcIilcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJBc3Ryb1wiIGlzIGEgcHJvcGVyIG5vdW4gKGZyYW1ld29yayBuYW1lKSBhbmQgc2hvdWxkIGJlIGNhcGl0YWxpemVkXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKFwiQ2hvb3NlIHRoZSBkZWZhdWx0IGZvcm1hdCBmb3IgY29waWVkIGhlYWRpbmcgbGlua3MuIE9ic2lkaWFuIGZvcm1hdCByZXNwZWN0cyB5b3VyIE9ic2lkaWFuIHNldHRpbmdzIGZvciB3aWtpbGluayB2cyBtYXJrZG93biBwcmVmZXJlbmNlLiBBc3RybyBsaW5rIHVzZXMgeW91ciBsaW5rIGJhc2UgcGF0aCBmcm9tIGFib3ZlIGFuZCBjb252ZXJ0cyB0aGUgaGVhZGluZyBpbnRvIGtlYmFiLWNhc2UgZm9ybWF0IGFzIGFuIGFuY2hvciBsaW5rXCIpXHJcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cclxuXHRcdFx0XHRcdGRyb3Bkb3duXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oXCJvYnNpZGlhblwiLCBcIk9ic2lkaWFuIGxpbmtcIilcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihcImFzdHJvXCIsIFwiQXN0cm8gbGlua1wiKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuY29weUhlYWRpbmdMaW5rRm9ybWF0KVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5jb3B5SGVhZGluZ0xpbmtGb3JtYXQgPSB2YWx1ZSBhcyBcIm9ic2lkaWFuXCIgfCBcImFzdHJvXCI7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0Ly8gQWRkIGNvbmRpdGlvbmFsIHZpc2liaWxpdHkgY2xhc3NlcyAtIGtlZXAgc2V0dGluZyBpbiBncm91cFxyXG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItdmlzaWJsZVwiLCBzZXR0aW5ncy5lbmFibGVDb3B5SGVhZGluZ0xpbmspO1xyXG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsICFzZXR0aW5ncy5lbmFibGVDb3B5SGVhZGluZ0xpbmspO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKFwiQWRkIHRyYWlsaW5nIHNsYXNoIHRvIGxpbmtzXCIpXHJcblx0XHRcdFx0LnNldERlc2MoXCJBZGQgdHJhaWxpbmcgc2xhc2hlcyB0byBhbGwgY29udmVydGVkIGludGVybmFsIGxpbmtzIChlLmcuLCAvYWJvdXQvIGluc3RlYWQgb2YgL2Fib3V0KS5cIilcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHNldHRpbmdzLmFkZFRyYWlsaW5nU2xhc2hUb0xpbmtzKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuYWRkVHJhaWxpbmdTbGFzaFRvTGlua3MgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBcIk1EWFwiIGlzIGEgcHJvcGVyIG5vdW4gKGZpbGUgZm9ybWF0KSBhbmQgc2hvdWxkIGJlIGNhcGl0YWxpemVkXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXROYW1lKFwiU2hvdyBNRFggZmlsZXMgaW4gZmlsZSBleHBsb3JlclwiKVxyXG5cdFx0XHRcdC5zZXREZXNjKFwiTWFrZSAubWR4IGZpbGVzIHZpc2libGUgaW4gT2JzaWRpYW4ncyBmaWxlIGV4cGxvcmVyLiBSZXF1aXJlcyByZWxvYWQgdG8gdGFrZSBlZmZlY3QuXCIpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5zaG93TWR4RmlsZXNJbkV4cGxvcmVyKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3Muc2hvd01keEZpbGVzSW5FeHBsb3JlciA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBdXRvLWluc2VydCBwcm9wZXJ0aWVzIChnbG9iYWwgc2V0dGluZylcclxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZShcIkF1dG8taW5zZXJ0IHByb3BlcnRpZXNcIilcclxuXHRcdFx0XHQuc2V0RGVzYyhcIkF1dG9tYXRpY2FsbHkgaW5zZXJ0IHRoZSBwcm9wZXJ0aWVzIHRlbXBsYXRlIHdoZW4gY3JlYXRpbmcgbmV3IGZpbGVzIGZvciBhbnkgY29udGVudCB0eXBlLlwiKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuYXV0b0luc2VydFByb3BlcnRpZXMpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5hdXRvSW5zZXJ0UHJvcGVydGllcyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDb250ZW50IHR5cGVzXHJcblx0XHRjb25zdCBjb250ZW50VHlwZXNHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsIFwiQ29udGVudCB0eXBlc1wiLCAnYXN0cm8tY29tcG9zZXInKTtcclxuXHJcblx0XHQvLyBBZGQgY29udGFpbmVyIGFzIGEgc2V0dGluZyAtIGhpZGUgdGhlIHNldHRpbmcncyBkZWZhdWx0IFVJLCBhZGQgb3VyIGNvbnRhaW5lciBpbnNpZGVcclxuXHRcdGNvbnRlbnRUeXBlc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0Ly8gSGlkZSB0aGUgc2V0dGluZydzIGRlZmF1bHQgVUkgZWxlbWVudHMgdXNpbmcgQ1NTIGNsYXNzZXNcclxuXHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuYWRkQ2xhc3MoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWhpZGRlbi1lbGVtZW50c1wiKTtcclxuXHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuYWRkQ2xhc3MoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci1mdWxsLXdpZHRoXCIpO1xyXG5cdFx0XHQvLyBBZGQgb3VyIGNvbnRhaW5lciBpbnNpZGUgdGhlIHNldHRpbmcgZWxlbWVudCAtIGVuc3VyZSBpdCdzIHZpc2libGVcclxuXHRcdFx0dGhpcy5jdXN0b21Db250ZW50VHlwZXNDb250YWluZXIgPSBzZXR0aW5nLnNldHRpbmdFbC5jcmVhdGVEaXYoeyBcclxuXHRcdFx0XHRjbHM6IFwiY3VzdG9tLWNvbnRlbnQtdHlwZXMtY29udGFpbmVyIGFzdHJvLWNvbXBvc2VyLWN1c3RvbS10eXBlcy1jb250YWluZXItdmlzaWJsZVwiIFxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdFx0Ly8gUmVuZGVyIGNvbnRlbnQgdHlwZXMgYWZ0ZXIgY29udGFpbmVyIGlzIGNyZWF0ZWRcclxuXHRcdGlmICh0aGlzLmN1c3RvbUNvbnRlbnRUeXBlc0NvbnRhaW5lcikge1xyXG5cdFx0XHR0aGlzLnJlbmRlckN1c3RvbUNvbnRlbnRUeXBlcygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERldmVsb3BlciBjb21tYW5kcyAoZGVza3RvcCBvbmx5IC0gbm90IGF2YWlsYWJsZSBvbiBtb2JpbGUpXHJcblx0XHRpZiAoIVBsYXRmb3JtLmlzTW9iaWxlKSB7XHJcblx0XHRcdGNvbnN0IGRldmVsb3Blckdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgXCJEZXZlbG9wZXIgY29tbWFuZHNcIiwgJ2FzdHJvLWNvbXBvc2VyJyk7XHJcblxyXG5cdFx0XHQvLyBUZXJtaW5hbCBjb21tYW5kIHNldHRpbmdzXHJcblx0XHRcdGRldmVsb3Blckdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZShcIkVuYWJsZSBvcGVuIHRlcm1pbmFsIGNvbW1hbmRcIilcclxuXHRcdFx0XHRcdC5zZXREZXNjKFwiRW5hYmxlIGNvbW1hbmQgdG8gb3BlbiB0ZXJtaW5hbCBpbiBwcm9qZWN0IHJvb3QgZGlyZWN0b3J5LlwiKVxyXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZClcclxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMudXBkYXRlVGVybWluYWxDb21tYW5kRmllbGRzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyByZWdpc3RlclJpYmJvbkljb25zIGNoZWNrcyBib3RoIGNvbW1hbmQgYW5kIGljb24gc2V0dGluZ3NcclxuXHRcdFx0XHRcdFx0XHRcdC8vIElmIGNvbW1hbmQgaXMgZW5hYmxlZCBBTkQgaWNvbiBpcyBlbmFibGVkLCBpdCB3aWxsIHNob3c7IG90aGVyd2lzZSBpdCB3aWxsIGhpZGVcclxuXHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5yZWdpc3RlclJpYmJvbkljb25zKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyUmliYm9uSWNvbnMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBDcmVhdGUgY29udGFpbmVyIGZvciB0ZXJtaW5hbCBjb21tYW5kIGZpZWxkcyAtIGtlZXAgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCB1cGRhdGUgbWV0aG9kc1xyXG5cdFx0XHR0aGlzLnRlcm1pbmFsQ29tbWFuZENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogXCJ0ZXJtaW5hbC1jb21tYW5kLWZpZWxkc1wiIH0pO1xyXG5cdFx0XHR0aGlzLnRlcm1pbmFsQ29tbWFuZENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItdmlzaWJsZVwiLCBzZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kKTtcclxuXHRcdFx0dGhpcy50ZXJtaW5hbENvbW1hbmRDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZCk7XHJcblxyXG5cdFx0XHRkZXZlbG9wZXJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgZGVzY0ZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBUZXh0IGlzIGFscmVhZHkgaW4gc2VudGVuY2UgY2FzZTsgXCJPYnNpZGlhblwiIGlzIGEgcHJvcGVyIG5vdW5cclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0ZGVzY0ZyYWdtZW50LmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCJQYXRoIHJlbGF0aXZlIHRvIHRoZSBPYnNpZGlhbiB2YXVsdCByb290IGZvbGRlci4gVXNlIC4uLy4uIGZvciB0d28gbGV2ZWxzIHVwLiBMZWF2ZSBibGFuayB0byB1c2UgdGhlIHZhdWx0IGZvbGRlclwiIH0pO1xyXG5cdFx0XHRcdGRlc2NGcmFnbWVudC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiVGhpcyBpcyB3aGVyZSB0aGUgdGVybWluYWwgd2lsbCBvcGVuLiBBYnNvbHV0ZSBwYXRocyB3b3JrIGFsc28uXCIgfSk7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoXCJQcm9qZWN0IHJvb3QgZGlyZWN0b3J5IHBhdGhcIilcclxuXHRcdFx0XHRcdC5zZXREZXNjKGRlc2NGcmFnbWVudClcclxuXHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG5cdFx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiLi4vLi5cIilcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MudGVybWluYWxQcm9qZWN0Um9vdFBhdGgpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy50ZXJtaW5hbFByb2plY3RSb290UGF0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0Ly8gQWRkIGNsYXNzIGZvciBjb25kaXRpb25hbCB2aXNpYmlsaXR5IC0ga2VlcCBzZXR0aW5nIGluIGdyb3VwXHJcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZCk7XHJcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0ZGV2ZWxvcGVyR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGRlc2NGcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogVGV4dCBpcyBhbHJlYWR5IGluIHNlbnRlbmNlIGNhc2U7IFwibWFjT1NcIiwgXCJXaW5kb3dzXCIsIFwiTGludXhcIiwgXCJUZXJtaW5hbFwiLCBcIldpbmRvd3MgVGVybWluYWxcIiwgXCJjbWQuZXhlXCIgYXJlIHByb3BlciBub3VucyBvciBwcm9kdWN0IG5hbWVzXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdGRlc2NGcmFnbWVudC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiTGVhdmUgYmxhbmsgdG8gdXNlIHBsYXRmb3JtIGRlZmF1bHRzLiBPbiBtYWNPUywgdGhlIGRlZmF1bHQgaXMgVGVybWluYWwuIE9uIFdpbmRvd3MsIGl0J3MgV2luZG93cyBUZXJtaW5hbCAoV2luIDExKSBvciBjbWQuZXhlIChXaW4gMTApLiBPbiBMaW51eCwgaXQncyBnbm9tZS10ZXJtaW5hbCwga29uc29sZSwgb3IgeHRlcm1cIiB9KTtcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogVGV4dCBpcyBhbHJlYWR5IGluIHNlbnRlbmNlIGNhc2U7IFwiVGVybWluYWxcIiwgXCJpVGVybVwiLCBcIlBvd2VyU2hlbGxcIiwgXCJBbGFjcml0dHlcIiBhcmUgcHJvcGVyIG5vdW5zIChwcm9kdWN0IG5hbWVzKVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHRkZXNjRnJhZ21lbnQuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIkV4YW1wbGVzIGluY2x1ZGUgVGVybWluYWwsIGlUZXJtLCBQb3dlclNoZWxsLCBhbmQgQWxhY3JpdHR5XCIgfSk7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoXCJUZXJtaW5hbCBhcHBsaWNhdGlvbiBuYW1lXCIpXHJcblx0XHRcdFx0XHQuc2V0RGVzYyhkZXNjRnJhZ21lbnQpXHJcblx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cclxuXHRcdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIlRlcm1pbmFsXCIpXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHNldHRpbmdzLnRlcm1pbmFsQXBwbGljYXRpb25OYW1lKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MudGVybWluYWxBcHBsaWNhdGlvbk5hbWUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdC8vIEFkZCBjbGFzcyBmb3IgY29uZGl0aW9uYWwgdmlzaWJpbGl0eSAtIGtlZXAgc2V0dGluZyBpbiBncm91cFxyXG5cdFx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci12aXNpYmxlXCIsIHNldHRpbmdzLmVuYWJsZU9wZW5UZXJtaW5hbENvbW1hbmQpO1xyXG5cdFx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci1oaWRkZW5cIiwgIXNldHRpbmdzLmVuYWJsZU9wZW5UZXJtaW5hbENvbW1hbmQpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGRldmVsb3Blckdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZShcIkVuYWJsZSBkZWJ1ZyBsb2dnaW5nXCIpXHJcblx0XHRcdFx0XHQuc2V0RGVzYyhcIkxvZyB0ZXJtaW5hbCBsYXVuY2ggY29tbWFuZHMgYW5kIHBsYXRmb3JtIGRlY2lzaW9ucyB0byB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgZm9yIHRyb3VibGVzaG9vdGluZy5cIilcclxuXHRcdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHNldHRpbmdzLmVuYWJsZVRlcm1pbmFsRGVidWdMb2dnaW5nKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLmVuYWJsZVRlcm1pbmFsRGVidWdMb2dnaW5nID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHQvLyBBZGQgY2xhc3MgZm9yIGNvbmRpdGlvbmFsIHZpc2liaWxpdHkgLSBrZWVwIHNldHRpbmcgaW4gZ3JvdXBcclxuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItdmlzaWJsZVwiLCBzZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kKTtcclxuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsICFzZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRkZXZlbG9wZXJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoXCJTaG93IG9wZW4gdGVybWluYWwgcmliYm9uIGljb25cIilcclxuXHRcdFx0XHRcdC5zZXREZXNjKFwiQWRkIGEgcmliYm9uIGljb24gdG8gbGF1bmNoIHRoZSB0ZXJtaW5hbCBjb21tYW5kLlwiKVxyXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMudGVybWluYWxSaWJib25Ub2dnbGVDb21wb25lbnQgPSB0b2dnbGU7XHJcblx0XHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5lbmFibGVUZXJtaW5hbFJpYmJvbkljb24pXHJcblx0XHRcdFx0XHRcdFx0LnNldERpc2FibGVkKCFzZXR0aW5ncy5lbmFibGVPcGVuVGVybWluYWxDb21tYW5kKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBzZXR0aW5ncyBkaXJlY3RseSBvbiBwbHVnaW4gaW5zdGFuY2VcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVRlcm1pbmFsUmliYm9uSWNvbiA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZW5hYmxlVGVybWluYWxSaWJib25JY29uID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBzZXR0aW5ncyBhcmUgc2F2ZWQsIHRoZW4gcmUtcmVnaXN0ZXJcclxuXHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4ucmVnaXN0ZXJSaWJib25JY29ucykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyUmliYm9uSWNvbnMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Ly8gQWRkIGNsYXNzIGZvciBjb25kaXRpb25hbCB2aXNpYmlsaXR5IC0ga2VlcCBzZXR0aW5nIGluIGdyb3VwXHJcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZCk7XHJcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZCk7XHJcblx0XHRcdFx0Ly8gU3RvcmUgcmVmZXJlbmNlIGZvciB1cGRhdGluZyBkaXNhYmxlZCBzdGF0ZVxyXG5cdFx0XHRcdHRoaXMudGVybWluYWxSaWJib25Ub2dnbGUgPSBzZXR0aW5nO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIENvbmZpZyBmaWxlIGNvbW1hbmQgc2V0dGluZ3NcclxuXHRcdFx0ZGV2ZWxvcGVyR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKFwiRW5hYmxlIGVkaXQgY29uZmlnIGZpbGUgY29tbWFuZFwiKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoXCJFbmFibGUgY29tbWFuZCB0byBvcGVuIGFzdHJvIGNvbmZpZyBmaWxlIGluIGRlZmF1bHQgZWRpdG9yLlwiKVxyXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLmVuYWJsZU9wZW5Db25maWdGaWxlQ29tbWFuZCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnVwZGF0ZUNvbmZpZ0NvbW1hbmRGaWVsZHMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHJlZ2lzdGVyUmliYm9uSWNvbnMgY2hlY2tzIGJvdGggY29tbWFuZCBhbmQgaWNvbiBzZXR0aW5nc1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gSWYgY29tbWFuZCBpcyBlbmFibGVkIEFORCBpY29uIGlzIGVuYWJsZWQsIGl0IHdpbGwgc2hvdzsgb3RoZXJ3aXNlIGl0IHdpbGwgaGlkZVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnJlZ2lzdGVyUmliYm9uSWNvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJSaWJib25JY29ucygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIENyZWF0ZSBjb250YWluZXIgZm9yIGNvbmZpZyBjb21tYW5kIGZpZWxkcyAtIGtlZXAgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCB1cGRhdGUgbWV0aG9kc1xyXG5cdFx0XHR0aGlzLmNvbmZpZ0NvbW1hbmRDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6IFwiY29uZmlnLWNvbW1hbmQtZmllbGRzXCIgfSk7XHJcblx0XHRcdHRoaXMuY29uZmlnQ29tbWFuZENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItdmlzaWJsZVwiLCBzZXR0aW5ncy5lbmFibGVPcGVuQ29uZmlnRmlsZUNvbW1hbmQpO1xyXG5cdFx0XHR0aGlzLmNvbmZpZ0NvbW1hbmRDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhc2V0dGluZ3MuZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kKTtcclxuXHJcblx0XHRcdGRldmVsb3Blckdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRjb25zdCBkZXNjRnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblx0XHRcdFx0ZGVzY0ZyYWdtZW50LmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCJQYXRoIHRvIHRoZSBjb25maWcgZmlsZSByZWxhdGl2ZSB0byB0aGUgdmF1bHQgcm9vdC4gVXNlIC4uL2NvbmZpZy50cyBvciAuLi8uLi9hc3Ryby5jb25maWcubWpzLlwiIH0pO1xyXG5cdFx0XHRcdGRlc2NGcmFnbWVudC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiQWJzb2x1dGUgcGF0aHMgd29yayBhbHNvLlwiIH0pO1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKFwiQ29uZmlnIGZpbGUgcGF0aFwiKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoZGVzY0ZyYWdtZW50KVxyXG5cdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+XHJcblx0XHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCIuLi9jb25maWcudHNcIilcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuY29uZmlnRmlsZVBhdGgpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5jb25maWdGaWxlUGF0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0Ly8gQWRkIGNsYXNzIGZvciBjb25kaXRpb25hbCB2aXNpYmlsaXR5IC0ga2VlcCBzZXR0aW5nIGluIGdyb3VwXHJcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgc2V0dGluZ3MuZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kKTtcclxuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsICFzZXR0aW5ncy5lbmFibGVPcGVuQ29uZmlnRmlsZUNvbW1hbmQpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGRldmVsb3Blckdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZShcIlNob3cgb3BlbiBjb25maWcgcmliYm9uIGljb25cIilcclxuXHRcdFx0XHRcdC5zZXREZXNjKFwiQWRkIGEgcmliYm9uIGljb24gdG8gbGF1bmNoIHRoZSBjb25maWcgZmlsZSBjb21tYW5kLlwiKVxyXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuY29uZmlnUmliYm9uVG9nZ2xlQ29tcG9uZW50ID0gdG9nZ2xlO1xyXG5cdFx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuZW5hYmxlQ29uZmlnUmliYm9uSWNvbilcclxuXHRcdFx0XHRcdFx0XHQuc2V0RGlzYWJsZWQoIXNldHRpbmdzLmVuYWJsZU9wZW5Db25maWdGaWxlQ29tbWFuZClcclxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgc2V0dGluZ3MgZGlyZWN0bHkgb24gcGx1Z2luIGluc3RhbmNlXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb25maWdSaWJib25JY29uID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5lbmFibGVDb25maWdSaWJib25JY29uID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBzZXR0aW5ncyBhcmUgc2F2ZWQsIHRoZW4gcmUtcmVnaXN0ZXJcclxuXHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4ucmVnaXN0ZXJSaWJib25JY29ucykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyUmliYm9uSWNvbnMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Ly8gQWRkIGNsYXNzIGZvciBjb25kaXRpb25hbCB2aXNpYmlsaXR5IC0ga2VlcCBzZXR0aW5nIGluIGdyb3VwXHJcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgc2V0dGluZ3MuZW5hYmxlT3BlbkNvbmZpZ0ZpbGVDb21tYW5kKTtcclxuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsICFzZXR0aW5ncy5lbmFibGVPcGVuQ29uZmlnRmlsZUNvbW1hbmQpO1xyXG5cdFx0XHRcdC8vIFN0b3JlIHJlZmVyZW5jZSBmb3IgdXBkYXRpbmcgZGlzYWJsZWQgc3RhdGVcclxuXHRcdFx0XHR0aGlzLmNvbmZpZ1JpYmJvblRvZ2dsZSA9IHNldHRpbmc7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gSGVscCBidXR0b24gcmVwbGFjZW1lbnQgdG9nZ2xlIChwYXJ0IG9mIGRldmVsb3BlciBjb21tYW5kcyBncm91cClcclxuXHRcdFx0ZGV2ZWxvcGVyR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdTd2FwIG91dCBoZWxwIGJ1dHRvbiBmb3IgY3VzdG9tIGFjdGlvbicpXHJcblx0XHRcdFx0XHQuc2V0RGVzYygnUmVwbGFjZSB0aGUgaGVscCBidXR0b24gaW4gdGhlIHZhdWx0IHByb2ZpbGUgYXJlYSB3aXRoIGEgY3VzdG9tIGFjdGlvbi4nKVxyXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQgPz8gZmFsc2UpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50ID0ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZElkOiAnZWRpdC1hc3Ryby1jb25maWcnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxyXG5cdFx0XHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50LmVuYWJsZWQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHQvLyBUcmlnZ2VyIGhlbHAgYnV0dG9uIHJlcGxhY2VtZW50IHVwZGF0ZSAoaXQgd2lsbCByZWxvYWQgc2V0dGluZ3MpXHJcblx0XHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnVwZGF0ZUhlbHBCdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnVwZGF0ZUhlbHBCdXR0b24oKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSBvcHRpb25zXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHRcdH0pKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBTaG93IGNvbW1hbmQgYW5kIGljb24gcGlja2VycyBvbmx5IGlmIGVuYWJsZWQgKHBhcnQgb2YgZGV2ZWxvcGVyIGNvbW1hbmRzIGdyb3VwKVxyXG5cdFx0XHRpZiAoc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XHJcblx0XHRcdFx0Ly8gQ29tbWFuZCBwaWNrZXJcclxuXHRcdFx0XHRjb25zdCBjb21tYW5kTmFtZSA9IHRoaXMuZ2V0Q29tbWFuZE5hbWUoc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50LmNvbW1hbmRJZCk7XHJcblx0XHRcdFx0ZGV2ZWxvcGVyR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0XHQuc2V0TmFtZSgnQ29tbWFuZCcpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGNvbW1hbmQgdG8gZXhlY3V0ZSB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZC4nKVxyXG5cdFx0XHRcdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cclxuXHRcdFx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChjb21tYW5kTmFtZSB8fCAnU2VsZWN0IGNvbW1hbmQnKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IENvbW1hbmRQaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGNvbW1hbmRJZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCA9IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZW5hYmxlZDogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZElkOiAnZWRpdC1hc3Ryby1jb25maWcnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50LmNvbW1hbmRJZCA9IGNvbW1hbmRJZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUcmlnZ2VyIGhlbHAgYnV0dG9uIHJlcGxhY2VtZW50IHVwZGF0ZSBpbW1lZGlhdGVseSAoaXQgd2lsbCByZWxvYWQgc2V0dGluZ3MpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnVwZGF0ZUhlbHBCdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnVwZGF0ZUhlbHBCdXR0b24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cgdXBkYXRlZCBjb21tYW5kIG5hbWVcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHRcdH0pKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gSWNvbiBwaWNrZXJcclxuXHRcdFx0XHRjb25zdCBpY29uTmFtZSA9IHRoaXMuZ2V0SWNvbk5hbWUoc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Lmljb25JZCk7XHJcblx0XHRcdFx0ZGV2ZWxvcGVyR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0XHQuc2V0TmFtZSgnSWNvbicpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGljb24gdG8gZGlzcGxheSBvbiB0aGUgYnV0dG9uLicpXHJcblx0XHRcdFx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KGljb25OYW1lIHx8ICdTZWxlY3QgaWNvbi4uLicpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50ID0ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbmFibGVkOiB0cnVlLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb21tYW5kSWQ6ICdlZGl0LWFzdHJvLWNvbmZpZycsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFRyaWdnZXIgaGVscCBidXR0b24gcmVwbGFjZW1lbnQgdXBkYXRlIGltbWVkaWF0ZWx5IChpdCB3aWxsIHJlbG9hZCBzZXR0aW5ncylcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4udXBkYXRlSGVscEJ1dHRvbikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4udXBkYXRlSGVscEJ1dHRvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gc2hvdyB1cGRhdGVkIGljb24gbmFtZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHRcdFx0fSkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy51cGRhdGVDb3B5SGVhZGluZ0ZpZWxkcygpO1xyXG5cdFx0Ly8gT25seSB1cGRhdGUgdGVybWluYWwvY29uZmlnIGZpZWxkcyBpZiBub3Qgb24gbW9iaWxlXHJcblx0XHRpZiAoIVBsYXRmb3JtLmlzTW9iaWxlKSB7XHJcblx0XHRcdHRoaXMudXBkYXRlVGVybWluYWxDb21tYW5kRmllbGRzKCk7XHJcblx0XHRcdHRoaXMudXBkYXRlQ29uZmlnQ29tbWFuZEZpZWxkcygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblxyXG5cdHVwZGF0ZUNvcHlIZWFkaW5nRmllbGRzKCkge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHRcdGNvbnN0IGlzVmlzaWJsZSA9IHNldHRpbmdzLmVuYWJsZUNvcHlIZWFkaW5nTGluaztcclxuXHRcdFxyXG5cdFx0Ly8gVXBkYXRlIHRoZSBcIkRlZmF1bHQgaGVhZGluZyBsaW5rIGZvcm1hdFwiIHNldHRpbmcgZWxlbWVudCB2aXNpYmlsaXR5XHJcblx0XHRjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGFpbmVyRWw7XHJcblx0XHRjb25zdCBhbGxTZXR0aW5ncyA9IGNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZXR0aW5nLWl0ZW0nKTtcclxuXHRcdGFsbFNldHRpbmdzLmZvckVhY2goKHNldHRpbmdFbCkgPT4ge1xyXG5cdFx0XHRjb25zdCBuYW1lRWwgPSBzZXR0aW5nRWwucXVlcnlTZWxlY3RvcignLnNldHRpbmctaXRlbS1uYW1lJyk7XHJcblx0XHRcdGlmIChuYW1lRWwgJiYgbmFtZUVsLnRleHRDb250ZW50Py50cmltKCkgPT09IFwiRGVmYXVsdCBoZWFkaW5nIGxpbmsgZm9ybWF0XCIpIHtcclxuXHRcdFx0XHRzZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgaXNWaXNpYmxlKTtcclxuXHRcdFx0XHRzZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhaXNWaXNpYmxlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVUZXJtaW5hbENvbW1hbmRGaWVsZHMoKSB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xyXG5cdFx0Y29uc3QgaXNWaXNpYmxlID0gc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZDtcclxuXHRcdFxyXG5cdFx0Ly8gVXBkYXRlIGNvbnRhaW5lciBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxyXG5cdFx0aWYgKHRoaXMudGVybWluYWxDb21tYW5kQ29udGFpbmVyKSB7XHJcblx0XHRcdHRoaXMudGVybWluYWxDb21tYW5kQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci12aXNpYmxlXCIsIGlzVmlzaWJsZSk7XHJcblx0XHRcdHRoaXMudGVybWluYWxDb21tYW5kQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci1oaWRkZW5cIiwgIWlzVmlzaWJsZSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFVwZGF0ZSBpbmRpdmlkdWFsIHNldHRpbmcgZWxlbWVudHMgdGhhdCBhcmUgaW4gdGhlIGdyb3VwXHJcblx0XHQvLyBGaW5kIHNldHRpbmdzIGJ5IHRoZWlyIG5hbWUgdGV4dCBjb250ZW50XHJcblx0XHRjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGFpbmVyRWw7XHJcblx0XHRjb25zdCBhbGxTZXR0aW5ncyA9IGNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZXR0aW5nLWl0ZW0nKTtcclxuXHRcdGFsbFNldHRpbmdzLmZvckVhY2goKHNldHRpbmdFbCkgPT4ge1xyXG5cdFx0XHRjb25zdCBuYW1lRWwgPSBzZXR0aW5nRWwucXVlcnlTZWxlY3RvcignLnNldHRpbmctaXRlbS1uYW1lJyk7XHJcblx0XHRcdGlmIChuYW1lRWwpIHtcclxuXHRcdFx0XHRjb25zdCBuYW1lID0gbmFtZUVsLnRleHRDb250ZW50Py50cmltKCk7XHJcblx0XHRcdFx0aWYgKG5hbWUgPT09IFwiUHJvamVjdCByb290IGRpcmVjdG9yeSBwYXRoXCIgfHwgbmFtZSA9PT0gXCJTaG93IG9wZW4gdGVybWluYWwgcmliYm9uIGljb25cIikge1xyXG5cdFx0XHRcdFx0c2V0dGluZ0VsLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci12aXNpYmxlXCIsIGlzVmlzaWJsZSk7XHJcblx0XHRcdFx0XHRzZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhaXNWaXNpYmxlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHQvLyBVcGRhdGUgcmliYm9uIHRvZ2dsZSBkaXNhYmxlZCBzdGF0ZSB1c2luZyB0aGUgdG9nZ2xlIGNvbXBvbmVudFxyXG5cdFx0aWYgKHRoaXMudGVybWluYWxSaWJib25Ub2dnbGVDb21wb25lbnQpIHtcclxuXHRcdFx0dGhpcy50ZXJtaW5hbFJpYmJvblRvZ2dsZUNvbXBvbmVudC5zZXREaXNhYmxlZCghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlT3BlblRlcm1pbmFsQ29tbWFuZCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHR1cGRhdGVDb25maWdDb21tYW5kRmllbGRzKCkge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHRcdGNvbnN0IGlzVmlzaWJsZSA9IHNldHRpbmdzLmVuYWJsZU9wZW5Db25maWdGaWxlQ29tbWFuZDtcclxuXHRcdFxyXG5cdFx0Ly8gVXBkYXRlIGNvbnRhaW5lciBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxyXG5cdFx0aWYgKHRoaXMuY29uZmlnQ29tbWFuZENvbnRhaW5lcikge1xyXG5cdFx0XHR0aGlzLmNvbmZpZ0NvbW1hbmRDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgaXNWaXNpYmxlKTtcclxuXHRcdFx0dGhpcy5jb25maWdDb21tYW5kQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci1oaWRkZW5cIiwgIWlzVmlzaWJsZSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFVwZGF0ZSBpbmRpdmlkdWFsIHNldHRpbmcgZWxlbWVudHMgdGhhdCBhcmUgaW4gdGhlIGdyb3VwXHJcblx0XHQvLyBGaW5kIHNldHRpbmdzIGJ5IHRoZWlyIG5hbWUgdGV4dCBjb250ZW50XHJcblx0XHRjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGFpbmVyRWw7XHJcblx0XHRjb25zdCBhbGxTZXR0aW5ncyA9IGNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZXR0aW5nLWl0ZW0nKTtcclxuXHRcdGFsbFNldHRpbmdzLmZvckVhY2goKHNldHRpbmdFbCkgPT4ge1xyXG5cdFx0XHRjb25zdCBuYW1lRWwgPSBzZXR0aW5nRWwucXVlcnlTZWxlY3RvcignLnNldHRpbmctaXRlbS1uYW1lJyk7XHJcblx0XHRcdGlmIChuYW1lRWwpIHtcclxuXHRcdFx0XHRjb25zdCBuYW1lID0gbmFtZUVsLnRleHRDb250ZW50Py50cmltKCk7XHJcblx0XHRcdFx0aWYgKG5hbWUgPT09IFwiQ29uZmlnIGZpbGUgcGF0aFwiIHx8IG5hbWUgPT09IFwiU2hvdyBvcGVuIGNvbmZpZyByaWJib24gaWNvblwiKSB7XHJcblx0XHRcdFx0XHRzZXR0aW5nRWwuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIiwgaXNWaXNpYmxlKTtcclxuXHRcdFx0XHRcdHNldHRpbmdFbC5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsICFpc1Zpc2libGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIFVwZGF0ZSByaWJib24gdG9nZ2xlIGRpc2FibGVkIHN0YXRlIHVzaW5nIHRoZSB0b2dnbGUgY29tcG9uZW50XHJcblx0XHRpZiAodGhpcy5jb25maWdSaWJib25Ub2dnbGVDb21wb25lbnQpIHtcclxuXHRcdFx0dGhpcy5jb25maWdSaWJib25Ub2dnbGVDb21wb25lbnQuc2V0RGlzYWJsZWQoIXRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZU9wZW5Db25maWdGaWxlQ29tbWFuZCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjaGVja0ZvckZvbGRlckNvbmZsaWN0cygpIHtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblx0XHRjb25zdCBibGFua0ZvbGRlcnM6IHN0cmluZ1tdID0gW107XHJcblx0XHRjb25zdCBmb2xkZXJDb25mbGljdHM6IHsgW2ZvbGRlcjogc3RyaW5nXTogc3RyaW5nW10gfSA9IHt9O1xyXG5cdFx0XHJcblx0XHQvLyBDaGVjayBjb250ZW50IHR5cGVzXHJcblx0XHRjb25zdCBjb250ZW50VHlwZXMgPSBzZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XHJcblx0XHRmb3IgKGNvbnN0IGNvbnRlbnRUeXBlIG9mIGNvbnRlbnRUeXBlcykge1xyXG5cdFx0XHRpZiAoY29udGVudFR5cGUuZW5hYmxlZCkge1xyXG5cdFx0XHRcdGlmICghY29udGVudFR5cGUuZm9sZGVyIHx8IGNvbnRlbnRUeXBlLmZvbGRlci50cmltKCkgPT09IFwiXCIpIHtcclxuXHRcdFx0XHRcdGJsYW5rRm9sZGVycy5wdXNoKGNvbnRlbnRUeXBlLm5hbWUgfHwgXCJDb250ZW50XCIpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRpZiAoIWZvbGRlckNvbmZsaWN0c1tjb250ZW50VHlwZS5mb2xkZXJdKSB7XHJcblx0XHRcdFx0XHRcdGZvbGRlckNvbmZsaWN0c1tjb250ZW50VHlwZS5mb2xkZXJdID0gW107XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRmb2xkZXJDb25mbGljdHNbY29udGVudFR5cGUuZm9sZGVyXS5wdXNoKGNvbnRlbnRUeXBlLm5hbWUgfHwgXCJDb250ZW50XCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBDaGVjayBmb3IgY29uZmxpY3RzXHJcblx0XHQvLyBXYXJuaW5nIGJveCByZW1vdmVkIC0gY29uZmxpY3RzIGFyZSBzdGlsbCBkZXRlY3RlZCBhdCBydW50aW1lXHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZEN1c3RvbUNvbnRlbnRUeXBlKCkge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHRcdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBbXTtcclxuXHRcdGNvbnN0IG5ld1R5cGU6IENvbnRlbnRUeXBlID0ge1xyXG5cdFx0XHRpZDogYGNvbnRlbnQtJHtEYXRlLm5vdygpfWAsXHJcblx0XHRcdG5hbWU6IGBDb250ZW50ICR7Y29udGVudFR5cGVzLmxlbmd0aCArIDF9YCxcclxuXHRcdFx0Zm9sZGVyOiBcIlwiLFxyXG5cdFx0XHRsaW5rQmFzZVBhdGg6IFwiXCIsXHJcblx0XHRcdHRlbXBsYXRlOiAnLS0tXFxudGl0bGU6IFwie3t0aXRsZX19XCJcXG5kYXRlOiB7e2RhdGV9fVxcbi0tLVxcbicsXHJcblx0XHRcdGVuYWJsZWQ6IHRydWUsXHJcblx0XHRcdGNyZWF0aW9uTW9kZTogXCJmaWxlXCIsXHJcblx0XHRcdGluZGV4RmlsZU5hbWU6IFwiXCIsXHJcblx0XHRcdGlnbm9yZVN1YmZvbGRlcnM6IGZhbHNlLFxyXG5cdFx0XHRlbmFibGVVbmRlcnNjb3JlUHJlZml4OiBmYWxzZSxcclxuXHRcdFx0dXNlTWR4RXh0ZW5zaW9uOiBmYWxzZSxcclxuXHRcdH07XHJcblx0XHRjb250ZW50VHlwZXMucHVzaChuZXdUeXBlKTtcclxuXHRcdHNldHRpbmdzLmNvbnRlbnRUeXBlcyA9IGNvbnRlbnRUeXBlcztcclxuXHRcdHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHR0aGlzLnJlbmRlckN1c3RvbUNvbnRlbnRUeXBlcygpO1xyXG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJDcmVhdGVFdmVudCgpO1xyXG5cdFx0Ly8gUmUtcmVnaXN0ZXIgY29udGVudCB0eXBlIGNvbW1hbmRzIHRvIGluY2x1ZGUgdGhlIG5ldyB0eXBlXHJcblx0XHRyZWdpc3RlckNvbnRlbnRUeXBlQ29tbWFuZHModGhpcy5wbHVnaW4gYXMgdW5rbm93biBhcyBQbHVnaW4sIHNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyQ3VzdG9tQ29udGVudFR5cGVzKCkge1xyXG5cdFx0aWYgKCF0aGlzLmN1c3RvbUNvbnRlbnRUeXBlc0NvbnRhaW5lcikgcmV0dXJuO1xyXG5cdFx0XHJcblx0XHR0aGlzLmN1c3RvbUNvbnRlbnRUeXBlc0NvbnRhaW5lci5lbXB0eSgpO1xyXG5cdFx0XHJcblx0XHQvLyBBbHdheXMgcmVhZCBmcmVzaCBzZXR0aW5ncyBmcm9tIHBsdWdpbiB0byBlbnN1cmUgd2UgaGF2ZSBsYXRlc3QgZGF0YVxyXG5cdFx0Ly8gVGhpcyBpcyBjcml0aWNhbCBhZnRlciBtaWdyYXRpb25cclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblx0XHRjb25zdCBjb250ZW50VHlwZXMgPSBzZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XHJcblx0XHRjb250ZW50VHlwZXMuZm9yRWFjaCgoY3VzdG9tVHlwZTogQ29udGVudFR5cGUsIGluZGV4OiBudW1iZXIpID0+IHtcclxuXHRcdFx0aWYgKCF0aGlzLmN1c3RvbUNvbnRlbnRUeXBlc0NvbnRhaW5lcikgcmV0dXJuO1xyXG5cdFx0XHRjb25zdCB0eXBlQ29udGFpbmVyID0gdGhpcy5jdXN0b21Db250ZW50VHlwZXNDb250YWluZXIuY3JlYXRlRGl2KHsgXHJcblx0XHRcdFx0Y2xzOiBcImN1c3RvbS1jb250ZW50LXR5cGUtaXRlbVwiLFxyXG5cdFx0XHRcdGF0dHI6IHsgXCJkYXRhLXR5cGUtaWRcIjogY3VzdG9tVHlwZS5pZCB9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gSGVhZGVyIHdpdGggY29udHJvbHNcclxuXHRcdFx0Y29uc3QgaGVhZGVyID0gdHlwZUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwiY3VzdG9tLWNvbnRlbnQtdHlwZS1oZWFkZXJcIiB9KTtcclxuXHRcdFx0aGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJhc3Ryby1jb21wb3Nlci1jdXN0b20tdHlwZS1oZWFkZXJcIik7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBMZWZ0IHNpZGUgLSBjb2xsYXBzZS9leHBhbmQgYnV0dG9uXHJcblx0XHRcdGNvbnN0IGNvbGxhcHNlQnV0dG9uID0gaGVhZGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXHJcblx0XHRcdFx0Y2xzOiBcImFzdHJvLWNvbXBvc2VyLWNvbGxhcHNlLWJ1dHRvblwiLFxyXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQ29sbGFwc2UvZXhwYW5kXCIgfVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Y29uc3QgaXNDb2xsYXBzZWQgPSBjdXN0b21UeXBlLmNvbGxhcHNlZCA/PyBmYWxzZTtcclxuXHRcdFx0Ly8gQWx3YXlzIHVzZSBjaGV2cm9uLWRvd24sIHJvdGF0ZSBpdCB3aGVuIGNvbGxhcHNlZCB0byBwb2ludCByaWdodFxyXG5cdFx0XHRzZXRJY29uKGNvbGxhcHNlQnV0dG9uLCBcImNoZXZyb24tZG93blwiKTtcclxuXHRcdFx0aWYgKGlzQ29sbGFwc2VkKSB7XHJcblx0XHRcdFx0Y29sbGFwc2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImlzLWNvbGxhcHNlZFwiKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjb2xsYXBzZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHRcdHZvaWQgdGhpcy50b2dnbGVDb250ZW50VHlwZUNvbGxhcHNlKGN1c3RvbVR5cGUuaWQpO1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSBjbGFzcyBhZnRlciB0b2dnbGUgKGljb24gc3RheXMgdGhlIHNhbWUsIGp1c3Qgcm90YXRlcylcclxuXHRcdFx0XHRjb25zdCB1cGRhdGVkVHlwZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRlbnRUeXBlcy5maW5kKChjdDogQ29udGVudFR5cGUpID0+IGN0LmlkID09PSBjdXN0b21UeXBlLmlkKTtcclxuXHRcdFx0XHRpZiAodXBkYXRlZFR5cGUpIHtcclxuXHRcdFx0XHRcdGlmICh1cGRhdGVkVHlwZS5jb2xsYXBzZWQpIHtcclxuXHRcdFx0XHRcdFx0Y29sbGFwc2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImlzLWNvbGxhcHNlZFwiKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGNvbGxhcHNlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1jb2xsYXBzZWRcIik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIE1pZGRsZSBsZWZ0IC0gY29udGVudCB0eXBlIG5hbWVcclxuXHRcdFx0Y29uc3QgaGVhZGVyTmFtZSA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6IFwiYXN0cm8tY29tcG9zZXItaGVhZGVyLW5hbWVcIiB9KTtcclxuXHRcdFx0aGVhZGVyTmFtZS5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGN1c3RvbVR5cGUubmFtZSB8fCBgQ29udGVudCAke2luZGV4ICsgMX1gLCBjbHM6IFwic2V0dGluZy1pdGVtLW5hbWVcIiB9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIE1pZGRsZSByaWdodCAtIHVwL2Rvd24gYnV0dG9ucyAoc2lkZS1ieS1zaWRlKVxyXG5cdFx0XHRjb25zdCByZW9yZGVyQ29udGFpbmVyID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogXCJhc3Ryby1jb21wb3Nlci1yZW9yZGVyLWJ1dHRvbnNcIiB9KTtcclxuXHRcdFx0Y29uc3QgdXBCdXR0b24gPSByZW9yZGVyQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcclxuXHRcdFx0XHRjbHM6IFwiYXN0cm8tY29tcG9zZXItcmVvcmRlci1idXR0b25cIixcclxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIk1vdmUgdXBcIiB9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRzZXRJY29uKHVwQnV0dG9uLCBcImNoZXZyb24tdXBcIik7XHJcblx0XHRcdHVwQnV0dG9uLmRpc2FibGVkID0gaW5kZXggPT09IDA7XHJcblx0XHRcdHVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRcdFx0dm9pZCB0aGlzLm1vdmVDb250ZW50VHlwZVVwKGN1c3RvbVR5cGUuaWQpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IGRvd25CdXR0b24gPSByZW9yZGVyQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcclxuXHRcdFx0XHRjbHM6IFwiYXN0cm8tY29tcG9zZXItcmVvcmRlci1idXR0b25cIixcclxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIk1vdmUgZG93blwiIH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdHNldEljb24oZG93bkJ1dHRvbiwgXCJjaGV2cm9uLWRvd25cIik7XHJcblx0XHRcdGRvd25CdXR0b24uZGlzYWJsZWQgPSBpbmRleCA9PT0gY29udGVudFR5cGVzLmxlbmd0aCAtIDE7XHJcblx0XHRcdGRvd25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0XHR2b2lkIHRoaXMubW92ZUNvbnRlbnRUeXBlRG93bihjdXN0b21UeXBlLmlkKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBSaWdodCBzaWRlIC0gdG9nZ2xlXHJcblx0XHRcdGNvbnN0IHRvZ2dsZUNvbnRhaW5lciA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6IFwiY2hlY2tib3gtY29udGFpbmVyXCIgfSk7XHJcblx0XHRcdGlmIChjdXN0b21UeXBlLmVuYWJsZWQpIHtcclxuXHRcdFx0XHR0b2dnbGVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImlzLWVuYWJsZWRcIik7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IHRvZ2dsZSA9IHRvZ2dsZUNvbnRhaW5lci5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJjaGVja2JveFwiLCBjbHM6IFwiY2hlY2tib3gtaW5wdXRcIiB9KTtcclxuXHRcdFx0dG9nZ2xlLmNoZWNrZWQgPSBjdXN0b21UeXBlLmVuYWJsZWQ7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBZGQgY2xpY2sgZXZlbnQgdG8gdGhlIGNvbnRhaW5lciBhcyB3ZWxsXHJcblx0XHRcdHRvZ2dsZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRjb25zdCBuZXdWYWx1ZSA9ICFjdXN0b21UeXBlLmVuYWJsZWQ7XHJcblx0XHRcdFx0XHRjdXN0b21UeXBlLmVuYWJsZWQgPSBuZXdWYWx1ZTtcclxuXHRcdFx0XHRcdHRvZ2dsZS5jaGVja2VkID0gbmV3VmFsdWU7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJDcmVhdGVFdmVudCgpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIGNvbnRhaW5lciBjbGFzcyBmb3IgdmlzdWFsIGZlZWRiYWNrXHJcblx0XHRcdFx0XHRpZiAobmV3VmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0dG9nZ2xlQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJpcy1lbmFibGVkXCIpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dG9nZ2xlQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1lbmFibGVkXCIpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBVcGRhdGUgdmlzaWJpbGl0eVxyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGVDdXN0b21Db250ZW50VHlwZVZpc2liaWxpdHkoY3VzdG9tVHlwZS5pZCwgbmV3VmFsdWUpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBSZS1yZWdpc3RlciBjb250ZW50IHR5cGUgY29tbWFuZHMgdG8gcmVmbGVjdCBlbmFibGVkL2Rpc2FibGVkIHN0YXRlXHJcblx0XHRcdFx0XHRyZWdpc3RlckNvbnRlbnRUeXBlQ29tbWFuZHModGhpcy5wbHVnaW4gYXMgdW5rbm93biBhcyBQbHVnaW4sIHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQ29uZmxpY3QgY2hlY2tpbmcgcmVtb3ZlZCBmcm9tIHNldHRpbmdzIFVJXHJcblx0XHRcdFx0fSkoKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBbHNvIGFkZCBjaGFuZ2UgZXZlbnQgYXMgYmFja3VwXHJcblx0XHRcdHRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlKSA9PiB7XHJcblx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZDtcclxuXHRcdFx0XHRcdGN1c3RvbVR5cGUuZW5hYmxlZCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckNyZWF0ZUV2ZW50KCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgY29udGFpbmVyIGNsYXNzIGZvciB2aXN1YWwgZmVlZGJhY2tcclxuXHRcdFx0XHRcdGlmICh2YWx1ZSkge1xyXG5cdFx0XHRcdFx0XHR0b2dnbGVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImlzLWVuYWJsZWRcIik7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR0b2dnbGVDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImlzLWVuYWJsZWRcIik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFVwZGF0ZSB2aXNpYmlsaXR5XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUN1c3RvbUNvbnRlbnRUeXBlVmlzaWJpbGl0eShjdXN0b21UeXBlLmlkLCB2YWx1ZSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFJlLXJlZ2lzdGVyIGNvbnRlbnQgdHlwZSBjb21tYW5kcyB0byByZWZsZWN0IGVuYWJsZWQvZGlzYWJsZWQgc3RhdGVcclxuXHRcdFx0XHRcdHJlZ2lzdGVyQ29udGVudFR5cGVDb21tYW5kcyh0aGlzLnBsdWdpbiBhcyB1bmtub3duIGFzIFBsdWdpbiwgdGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdH0pKCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gU2V0dGluZ3MgY29udGFpbmVyIHRoYXQgY2FuIGJlIGNvbGxhcHNlZFxyXG5cdFx0XHRjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IHR5cGVDb250YWluZXIuY3JlYXRlRGl2KHsgXHJcblx0XHRcdFx0Y2xzOiBcImN1c3RvbS1jb250ZW50LXR5cGUtc2V0dGluZ3NcIixcclxuXHRcdFx0XHRhdHRyOiB7IFwiZGF0YS10eXBlLWlkXCI6IGN1c3RvbVR5cGUuaWQgfVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFNldCBpbml0aWFsIHZpc2liaWxpdHkgc3RhdGUgYmFzZWQgb24gZW5hYmxlZCBhbmQgY29sbGFwc2VkIHN0YXRlXHJcblx0XHRcdGNvbnN0IGluaXRpYWxseUNvbGxhcHNlZCA9IGN1c3RvbVR5cGUuY29sbGFwc2VkID8/IGZhbHNlO1xyXG5cdFx0XHRjb25zdCBpbml0aWFsbHlWaXNpYmxlID0gY3VzdG9tVHlwZS5lbmFibGVkICYmICFpbml0aWFsbHlDb2xsYXBzZWQ7XHJcblx0XHRcdGlmIChpbml0aWFsbHlWaXNpYmxlKSB7XHJcblx0XHRcdFx0c2V0dGluZ3NDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLXZpc2libGVcIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0c2V0dGluZ3NDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ29udGVudCB0eXBlIG5hbWVcclxuXHRcdFx0Y29uc3QgbmFtZUNvbnRhaW5lciA9IHNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdigpO1xyXG5cdFx0XHRuZXcgU2V0dGluZyhuYW1lQ29udGFpbmVyKVxyXG5cdFx0XHRcdC5zZXROYW1lKFwiQ29udGVudCB0eXBlIG5hbWVcIilcclxuXHRcdFx0XHQuc2V0RGVzYyhcIkRpc3BsYXkgbmFtZSBmb3IgdGhpcyBjb250ZW50IHR5cGUgKGUuZy4sICdwcm9qZWN0cycsICdub3RlcycsICd0dXRvcmlhbHMnKVwiKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkVudGVyIGNvbnRlbnQgdHlwZSBuYW1lXCIpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShjdXN0b21UeXBlLm5hbWUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGN1c3RvbVR5cGUubmFtZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdC8vIFJlLXJlZ2lzdGVyIGNvbnRlbnQgdHlwZSBjb21tYW5kcyB0byB1cGRhdGUgY29tbWFuZCBuYW1lXHJcblx0XHRcdFx0XHRcdFx0cmVnaXN0ZXJDb250ZW50VHlwZUNvbW1hbmRzKHRoaXMucGx1Z2luIGFzIHVua25vd24gYXMgUGx1Z2luLCB0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gRm9sZGVyIGxvY2F0aW9uXHJcblx0XHRcdGNvbnN0IGZvbGRlckNvbnRhaW5lciA9IHNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdigpO1xyXG5cdFx0XHRjb25zdCBmb2xkZXJTZXR0aW5nID0gbmV3IFNldHRpbmcoZm9sZGVyQ29udGFpbmVyKVxyXG5cdFx0XHRcdC5zZXROYW1lKFwiRm9sZGVyIGxvY2F0aW9uXCIpXHJcblx0XHRcdFx0LnNldERlc2MoXCJGb2xkZXIgcGF0aCB3aGVyZSB0aGlzIGNvbnRlbnQgdHlwZSB3aWxsIGJlIGNyZWF0ZWQuIExlYXZlIGJsYW5rIHRvIHVzZSB0aGUgdmF1bHQgZm9sZGVyLiBTdXBwb3J0cyB3aWxkY2FyZHMgbGlrZSBkaXJlY3RvcnkvKiBvciBkaXJlY3RvcnkvKi8qIHRvIG1hdGNoIHNwZWNpZmljIGZvbGRlciBkZXB0aHMuXCIpXHJcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgZm9sZGVyIHBhdGggKGUuZy4sICdkb2NzJywgJ2RvY3MvKicsICdkb2NzLyovKicpIG9yIGxlYXZlIGJsYW5rIGZvciB2YXVsdCByb290XCIpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShjdXN0b21UeXBlLmZvbGRlcilcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y3VzdG9tVHlwZS5mb2xkZXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckNyZWF0ZUV2ZW50KCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy51cGRhdGVDdXN0b21Db250ZW50VHlwZUlnbm9yZVN1YmZvbGRlcnNGaWVsZChjdXN0b21UeXBlLmlkKTtcclxuXHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgY29uZmxpY3Qgd2FybmluZ3MgZm9yIGFsbCBjb250ZW50IHR5cGVzIChmb2xkZXIgY2hhbmdlIG1heSBhZmZlY3Qgb3RoZXJzKVxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFsbENvbnRlbnRUeXBlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBbXTtcclxuXHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGN0IG9mIGFsbENvbnRlbnRUeXBlcykge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy51cGRhdGVGb2xkZXJDb25mbGljdFdhcm5pbmcoY3QuaWQsIG51bGwpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBZGQgY29uZmxpY3Qgd2FybmluZyBlbGVtZW50XHJcblx0XHRcdGZvbGRlckNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwiYXN0cm8tY29tcG9zZXItY29uZmxpY3Qtd2FybmluZyBoaWRkZW5cIiwgYXR0cjogeyBcImRhdGEtdHlwZS1pZFwiOiBjdXN0b21UeXBlLmlkIH0gfSk7XHJcblx0XHRcdHRoaXMudXBkYXRlRm9sZGVyQ29uZmxpY3RXYXJuaW5nKGN1c3RvbVR5cGUuaWQsIGZvbGRlclNldHRpbmcpO1xyXG5cclxuXHRcdFx0Ly8gSWdub3JlIHN1YmZvbGRlcnMgKG9ubHkgc2hvdyB3aGVuIGZvbGRlciBpcyBzZXQpXHJcblx0XHRcdGNvbnN0IGlnbm9yZVN1YmZvbGRlcnNDb250YWluZXIgPSBzZXR0aW5nc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwiY3VzdG9tLWlnbm9yZS1zdWJmb2xkZXJzLWZpZWxkXCIgfSk7XHJcblx0XHRcdGlnbm9yZVN1YmZvbGRlcnNDb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS10eXBlLWlkXCIsIGN1c3RvbVR5cGUuaWQpO1xyXG5cdFx0XHRpZ25vcmVTdWJmb2xkZXJzQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci12aXNpYmxlXCIsICEhY3VzdG9tVHlwZS5mb2xkZXIpO1xyXG5cdFx0XHRpZ25vcmVTdWJmb2xkZXJzQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci1oaWRkZW5cIiwgIWN1c3RvbVR5cGUuZm9sZGVyKTtcclxuXHRcdFx0bmV3IFNldHRpbmcoaWdub3JlU3ViZm9sZGVyc0NvbnRhaW5lcilcclxuXHRcdFx0XHQuc2V0TmFtZShcIklnbm9yZSBzdWJmb2xkZXJzXCIpXHJcblx0XHRcdFx0LnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIGF1dG9tYXRpb24gd2lsbCBvbmx5IHRyaWdnZXIgZm9yIG5ldyAubWQgZmlsZXMgd2l0aGluIHRoaXMgY29udGVudCB0eXBlJ3MgZm9sZGVyIGFuZCBvbmUgbGV2ZWwgZG93biAoZm9yIGZvbGRlci1iYXNlZCBjb250ZW50KS4gRmlsZXMgaW4gZGVlcGVyIHN1YmZvbGRlcnMgd2lsbCBiZSBpZ25vcmVkLlwiKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoY3VzdG9tVHlwZS5pZ25vcmVTdWJmb2xkZXJzIHx8IGZhbHNlKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y3VzdG9tVHlwZS5pZ25vcmVTdWJmb2xkZXJzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdC8vIFVuZGVyc2NvcmUgcHJlZml4XHJcblx0XHRcdGNvbnN0IHVuZGVyc2NvcmVQcmVmaXhDb250YWluZXIgPSBzZXR0aW5nc0NvbnRhaW5lci5jcmVhdGVEaXYoKTtcclxuXHRcdFx0bmV3IFNldHRpbmcodW5kZXJzY29yZVByZWZpeENvbnRhaW5lcilcclxuXHRcdFx0XHQuc2V0TmFtZShcIlVzZSB1bmRlcnNjb3JlIHByZWZpeCBmb3IgZHJhZnRzXCIpXHJcblx0XHRcdFx0LnNldERlc2MoXCJBZGQgYW4gdW5kZXJzY29yZSBwcmVmaXggKF9jb250ZW50LXRpdGxlKSB0byBuZXcgbm90ZXMgYnkgZGVmYXVsdCB3aGVuIGVuYWJsZWQuIFRoaXMgaGlkZXMgdGhlbSBmcm9tIGFzdHJvLCB3aGljaCBjYW4gYmUgaGVscGZ1bCBmb3IgZHJhZnRzXCIpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShjdXN0b21UeXBlLmVuYWJsZVVuZGVyc2NvcmVQcmVmaXggfHwgZmFsc2UpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjdXN0b21UeXBlLmVuYWJsZVVuZGVyc2NvcmVQcmVmaXggPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0Ly8gTGluayBiYXNlIHBhdGhcclxuXHRcdFx0Y29uc3QgbGlua0NvbnRhaW5lciA9IHNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdigpO1xyXG5cdFx0XHRuZXcgU2V0dGluZyhsaW5rQ29udGFpbmVyKVxyXG5cdFx0XHRcdC5zZXROYW1lKFwiTGluayBiYXNlIHBhdGhcIilcclxuXHRcdFx0XHQuc2V0RGVzYyhcIkJhc2UgcGF0aCBmb3IgY29udmVydGVkIGxpbmtzIChlLmcuLCAnL3Byb2plY3RzLycsICcvbm90ZXMvdHV0b3JpYWxzLycsIGxlYXZlIGJsYW5rIGZvciByb290IC8pLlwiKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkVudGVyIGxpbmsgYmFzZSBwYXRoXCIpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShjdXN0b21UeXBlLmxpbmtCYXNlUGF0aCB8fCBcIlwiKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjdXN0b21UeXBlLmxpbmtCYXNlUGF0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIENyZWF0aW9uIG1vZGVcclxuXHRcdFx0Y29uc3QgY3JlYXRpb25Nb2RlQ29udGFpbmVyID0gc2V0dGluZ3NDb250YWluZXIuY3JlYXRlRGl2KCk7XHJcblx0XHRcdG5ldyBTZXR0aW5nKGNyZWF0aW9uTW9kZUNvbnRhaW5lcilcclxuXHRcdFx0XHQuc2V0TmFtZShcIkNyZWF0aW9uIG1vZGVcIilcclxuXHRcdFx0XHQuc2V0RGVzYyhcIkhvdyB0byBjcmVhdGUgbmV3IGVudHJpZXM6IGZpbGUtYmFzZWQgb3IgZm9sZGVyLWJhc2VkIHdpdGggYW4gaW5kZXggZmlsZS5cIilcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxyXG5cdFx0XHRcdFx0ZHJvcGRvd25cclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihcImZpbGVcIiwgXCJGaWxlLWJhc2VkIChjb250ZW50LXRpdGxlLm1kKVwiKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKFwiZm9sZGVyXCIsIFwiRm9sZGVyLWJhc2VkIChjb250ZW50LXRpdGxlL2luZGV4Lm1kKVwiKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoY3VzdG9tVHlwZS5jcmVhdGlvbk1vZGUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGN1c3RvbVR5cGUuY3JlYXRpb25Nb2RlID0gdmFsdWUgYXMgXCJmaWxlXCIgfCBcImZvbGRlclwiO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMudXBkYXRlQ3VzdG9tQ29udGVudFR5cGVJbmRleEZpbGVGaWVsZChjdXN0b21UeXBlLmlkKTtcclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0Ly8gVXNlIE1EWCBleHRlbnNpb25cclxuXHRcdFx0Y29uc3QgdXNlTWR4Q29udGFpbmVyID0gc2V0dGluZ3NDb250YWluZXIuY3JlYXRlRGl2KCk7XHJcblx0XHRcdG5ldyBTZXR0aW5nKHVzZU1keENvbnRhaW5lcilcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJNRFhcIiBpcyBhIHByb3BlciBub3VuIChmaWxlIGZvcm1hdCkgYW5kIHNob3VsZCBiZSBjYXBpdGFsaXplZFxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0TmFtZShcIlVzZSBNRFggaW5zdGVhZCBvZiBNRFwiKVxyXG5cdFx0XHRcdC5zZXREZXNjKFwiQ3JlYXRlIGZpbGVzIHdpdGggLm1keCBleHRlbnNpb24gaW5zdGVhZCBvZiAubWQgZXh0ZW5zaW9uLlwiKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoY3VzdG9tVHlwZS51c2VNZHhFeHRlbnNpb24gfHwgZmFsc2UpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjdXN0b21UeXBlLnVzZU1keEV4dGVuc2lvbiA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0XHQvLyBJbmRleCBmaWxlIG5hbWUgKG9ubHkgc2hvdyBmb3IgZm9sZGVyLWJhc2VkKVxyXG5cdFx0XHRjb25zdCBpbmRleEZpbGVDb250YWluZXIgPSBzZXR0aW5nc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwiY3VzdG9tLWluZGV4LWZpbGUtZmllbGRcIiB9KTtcclxuXHRcdFx0aW5kZXhGaWxlQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJhc3Ryby1jb21wb3Nlci1zZXR0aW5nLWNvbnRhaW5lci12aXNpYmxlXCIsIGN1c3RvbVR5cGUuY3JlYXRpb25Nb2RlID09PSBcImZvbGRlclwiKTtcclxuXHRcdGluZGV4RmlsZUNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsIGN1c3RvbVR5cGUuY3JlYXRpb25Nb2RlICE9PSBcImZvbGRlclwiKTtcclxuXHRcdFx0bmV3IFNldHRpbmcoaW5kZXhGaWxlQ29udGFpbmVyKVxyXG5cdFx0XHRcdC5zZXROYW1lKFwiSW5kZXggZmlsZSBuYW1lXCIpXHJcblx0XHRcdFx0LnNldERlc2MoXCJOYW1lIGZvciBpbmRleCBmaWxlcyBpbiBmb2xkZXItYmFzZWQgY29udGVudCAod2l0aG91dCAubWQgZXh0ZW5zaW9uKS4gRGVmYXVsdHMgdG8gJ2luZGV4JyBpZiBsZWZ0IGJsYW5rLlwiKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJJbmRleFwiKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoY3VzdG9tVHlwZS5pbmRleEZpbGVOYW1lKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjdXN0b21UeXBlLmluZGV4RmlsZU5hbWUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0Ly8gVGVtcGxhdGVcclxuXHRcdFx0Y29uc3QgdGVtcGxhdGVDb250YWluZXIgPSBzZXR0aW5nc0NvbnRhaW5lci5jcmVhdGVEaXYoKTtcclxuXHRcdFx0bmV3IFNldHRpbmcodGVtcGxhdGVDb250YWluZXIpXHJcblx0XHRcdFx0LnNldE5hbWUoXCJQcm9wZXJ0aWVzIHRlbXBsYXRlXCIpXHJcblx0XHRcdFx0LmFkZFRleHRBcmVhKCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignLS0tXFxudGl0bGU6IFwie3t0aXRsZX19XCJcXG5kYXRlOiB7e2RhdGV9fVxcbi0tLVxcbicpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShjdXN0b21UeXBlLnRlbXBsYXRlKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjdXN0b21UeXBlLnRlbXBsYXRlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0dGV4dC5pbnB1dEVsLmNsYXNzTGlzdC5hZGQoXCJhc3Ryby1jb21wb3Nlci10ZW1wbGF0ZS10ZXh0YXJlYVwiKTtcclxuXHRcdFx0XHRcdHJldHVybiB0ZXh0O1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LnRoZW4oKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nLmRlc2NFbC5lbXB0eSgpO1xyXG5cdFx0XHRcdGNvbnN0IGRlc2NEaXYgPSBzZXR0aW5nLmRlc2NFbC5jcmVhdGVFbChcImRpdlwiKTtcclxuXHRcdFx0XHRkZXNjRGl2LmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCJUZW1wbGF0ZSBmb3IgbmV3IGZpbGVzIG9mIHRoaXMgY29udGVudCB0eXBlLlwiIH0pO1xyXG5cdFx0XHRcdGRlc2NEaXYuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIlZhcmlhYmxlcyBpbmNsdWRlIHt7dGl0bGV9fSwge3tkYXRlfX0sIGFuZCB7e3NsdWd9fS5cIiB9KTtcclxuXHRcdFx0XHRkZXNjRGl2LmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCJEbyBub3Qgd3JhcCB7e2RhdGV9fSBpbiBxdW90ZXMgYXMgaXQgcmVwcmVzZW50cyBhIGRhdGV0aW1lIHZhbHVlLCBub3QgYSBzdHJpbmcuXCIgfSk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgYnV0dG9uIGF0IHRoZSBib3R0b20gKG5vIGRpdmlkZXIpXHJcblx0XHRcdGNvbnN0IHJlbW92ZUNvbnRhaW5lciA9IHNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdigpO1xyXG5cdFx0XHRjb25zdCByZW1vdmVTZXR0aW5nID0gbmV3IFNldHRpbmcocmVtb3ZlQ29udGFpbmVyKVxyXG5cdFx0XHRcdC5zZXROYW1lKFwiXCIpXHJcblx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHRidXR0b25cclxuXHRcdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJSZW1vdmVcIilcclxuXHRcdFx0XHRcdFx0LnNldFdhcm5pbmcoKVxyXG5cdFx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZW50VHlwZXMuZmluZChjdCA9PiBjdC5pZCA9PT0gY3VzdG9tVHlwZS5pZCk7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgdHlwZU5hbWUgPSBjb250ZW50VHlwZT8ubmFtZSB8fCBcImNvbnRlbnQgdHlwZVwiO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbChcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRcdFx0XHRcdFx0YEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZW1vdmUgXCIke3R5cGVOYW1lfVwiPyBUaGlzIGFjdGlvbiBjYW5ub3QgYmUgdW5kb25lLmAsXHJcblx0XHRcdFx0XHRcdFx0XHRcIlJlbW92ZVwiLFxyXG5cdFx0XHRcdFx0XHRcdFx0XCJDYW5jZWxcIlxyXG5cdFx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29uZmlybWVkID0gYXdhaXQgbW9kYWwud2FpdEZvclJlc3VsdCgpO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChjb25maXJtZWQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucmVtb3ZlQ3VzdG9tQ29udGVudFR5cGUoY3VzdG9tVHlwZS5pZCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEhpZGUgdGhlIGRpdmlkZXIgbGluZSBmb3IgdGhlIHJlbW92ZSBidXR0b25cclxuXHRcdFx0cmVtb3ZlU2V0dGluZy5zZXR0aW5nRWwuY2xhc3NMaXN0LmFkZChcImFzdHJvLWNvbXBvc2VyLXJlbW92ZS1zZXR0aW5nXCIpO1xyXG5cclxuXHRcdFx0Ly8gU2V0IGluaXRpYWwgdmlzaWJpbGl0eSAoY2hlY2tzIGJvdGggZW5hYmxlZCBhbmQgY29sbGFwc2VkIHN0YXRlKVxyXG5cdFx0XHR0aGlzLnVwZGF0ZUN1c3RvbUNvbnRlbnRUeXBlVmlzaWJpbGl0eShjdXN0b21UeXBlLmlkLCBjdXN0b21UeXBlLmVuYWJsZWQpO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIFVwZGF0ZSBjb25mbGljdCB3YXJuaW5ncyBmb3IgYWxsIHR5cGVzIGFmdGVyIHJlbmRlcmluZyAoZm9sZGVyIGNoYW5nZXMgbWF5IGFmZmVjdCBvdGhlcnMpXHJcblx0XHRjb250ZW50VHlwZXMuZm9yRWFjaCgoY3VzdG9tVHlwZTogQ29udGVudFR5cGUpID0+IHtcclxuXHRcdFx0dGhpcy51cGRhdGVGb2xkZXJDb25mbGljdFdhcm5pbmcoY3VzdG9tVHlwZS5pZCwgbnVsbCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgZmxvYXRpbmcgYnV0dG9uIGZvciBjcmVhdGluZyBuZXcgY3VzdG9tIGNvbnRlbnQgdHlwZXMgKG5vIHNldHRpbmdzIGJhY2tncm91bmQpXHJcblx0XHRjb25zdCBhZGRCdXR0b25Db250YWluZXIgPSB0aGlzLmN1c3RvbUNvbnRlbnRUeXBlc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwiYXN0cm8tY29tcG9zZXItYWRkLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcclxuXHRcdGNvbnN0IGFkZEJ1dHRvbiA9IGFkZEJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XHJcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXHJcblx0XHRcdHRleHQ6IFwiQWRkIGNvbnRlbnQgdHlwZVwiXHJcblx0XHR9KTtcclxuXHRcdGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmFkZEN1c3RvbUNvbnRlbnRUeXBlKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdXBkYXRlQ3VzdG9tQ29udGVudFR5cGVWaXNpYmlsaXR5KHR5cGVJZDogc3RyaW5nLCBlbmFibGVkOiBib29sZWFuKSB7XHJcblx0XHRjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IHRoaXMuY3VzdG9tQ29udGVudFR5cGVzQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKGBbZGF0YS10eXBlLWlkPVwiJHt0eXBlSWR9XCJdLmN1c3RvbS1jb250ZW50LXR5cGUtc2V0dGluZ3NgKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGlmIChzZXR0aW5nc0NvbnRhaW5lcikge1xyXG5cdFx0XHRjb25zdCBjb250ZW50VHlwZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XHJcblx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gY29udGVudFR5cGVzLmZpbmQoKGN0OiBDb250ZW50VHlwZSkgPT4gY3QuaWQgPT09IHR5cGVJZCk7XHJcblx0XHRcdGNvbnN0IGlzQ29sbGFwc2VkID0gY29udGVudFR5cGU/LmNvbGxhcHNlZCA/PyBmYWxzZTtcclxuXHRcdFx0Y29uc3Qgc2hvdWxkQmVWaXNpYmxlID0gZW5hYmxlZCAmJiAhaXNDb2xsYXBzZWQ7XHJcblx0XHRcdFxyXG5cdFx0XHRzZXR0aW5nc0NvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItdmlzaWJsZVwiLCBzaG91bGRCZVZpc2libGUpO1xyXG5cdFx0XHRzZXR0aW5nc0NvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItaGlkZGVuXCIsICFzaG91bGRCZVZpc2libGUpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB1cGRhdGVDdXN0b21Db250ZW50VHlwZUluZGV4RmlsZUZpZWxkKHR5cGVJZDogc3RyaW5nKSB7XHJcblx0XHRjb25zdCBjb250ZW50VHlwZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XHJcblx0XHRjb25zdCBjdXN0b21UeXBlID0gY29udGVudFR5cGVzLmZpbmQodHlwZSA9PiB0eXBlLmlkID09PSB0eXBlSWQpO1xyXG5cdFx0aWYgKCFjdXN0b21UeXBlKSByZXR1cm47XHJcblxyXG5cdFx0Y29uc3QgaW5kZXhGaWxlQ29udGFpbmVyID0gdGhpcy5jdXN0b21Db250ZW50VHlwZXNDb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXR5cGUtaWQ9XCIke3R5cGVJZH1cIl0gLmN1c3RvbS1pbmRleC1maWxlLWZpZWxkYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRpZiAoaW5kZXhGaWxlQ29udGFpbmVyKSB7XHJcblx0XHRcdGluZGV4RmlsZUNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItdmlzaWJsZVwiLCBjdXN0b21UeXBlLmNyZWF0aW9uTW9kZSA9PT0gXCJmb2xkZXJcIik7XHJcblx0XHRpbmRleEZpbGVDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCBjdXN0b21UeXBlLmNyZWF0aW9uTW9kZSAhPT0gXCJmb2xkZXJcIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHVwZGF0ZUN1c3RvbUNvbnRlbnRUeXBlSWdub3JlU3ViZm9sZGVyc0ZpZWxkKHR5cGVJZDogc3RyaW5nKSB7XHJcblx0XHRjb25zdCBjb250ZW50VHlwZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XHJcblx0XHRjb25zdCBjdXN0b21UeXBlID0gY29udGVudFR5cGVzLmZpbmQodHlwZSA9PiB0eXBlLmlkID09PSB0eXBlSWQpO1xyXG5cdFx0aWYgKCFjdXN0b21UeXBlKSByZXR1cm47XHJcblxyXG5cdFx0Y29uc3QgaWdub3JlU3ViZm9sZGVyc0NvbnRhaW5lciA9IHRoaXMuY3VzdG9tQ29udGVudFR5cGVzQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKGBbZGF0YS10eXBlLWlkPVwiJHt0eXBlSWR9XCJdLmN1c3RvbS1pZ25vcmUtc3ViZm9sZGVycy1maWVsZGApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0aWYgKGlnbm9yZVN1YmZvbGRlcnNDb250YWluZXIpIHtcclxuXHRcdFx0aWdub3JlU3ViZm9sZGVyc0NvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiYXN0cm8tY29tcG9zZXItc2V0dGluZy1jb250YWluZXItdmlzaWJsZVwiLCAhIWN1c3RvbVR5cGUuZm9sZGVyICYmIGN1c3RvbVR5cGUuZm9sZGVyLnRyaW0oKSAhPT0gXCJcIik7XHJcblx0XHRcdGlnbm9yZVN1YmZvbGRlcnNDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImFzdHJvLWNvbXBvc2VyLXNldHRpbmctY29udGFpbmVyLWhpZGRlblwiLCAhY3VzdG9tVHlwZS5mb2xkZXIgfHwgY3VzdG9tVHlwZS5mb2xkZXIudHJpbSgpID09PSBcIlwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdXBkYXRlRm9sZGVyQ29uZmxpY3RXYXJuaW5nKHR5cGVJZDogc3RyaW5nLCBzZXR0aW5nOiBTZXR0aW5nIHwgbnVsbCkge1xyXG5cdFx0Y29uc3QgY29udGVudFR5cGVzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudFR5cGVzIHx8IFtdO1xyXG5cdFx0Y29uc3QgY3VycmVudFR5cGUgPSBjb250ZW50VHlwZXMuZmluZCh0eXBlID0+IHR5cGUuaWQgPT09IHR5cGVJZCk7XHJcblx0XHRpZiAoIWN1cnJlbnRUeXBlKSByZXR1cm47XHJcblxyXG5cdFx0Y29uc3QgY29uZmxpY3RXYXJuaW5nRWwgPSB0aGlzLmN1c3RvbUNvbnRlbnRUeXBlc0NvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcihgW2RhdGEtdHlwZS1pZD1cIiR7dHlwZUlkfVwiXS5hc3Ryby1jb21wb3Nlci1jb25mbGljdC13YXJuaW5nYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRpZiAoIWNvbmZsaWN0V2FybmluZ0VsKSByZXR1cm47XHJcblxyXG5cdFx0Ly8gRmluZCBjb25mbGljdHMgLSBvdGhlciBjb250ZW50IHR5cGVzIHdpdGggdGhlIHNhbWUgZm9sZGVyIHBhdHRlcm5cclxuXHRcdGNvbnN0IGN1cnJlbnRGb2xkZXIgPSAoY3VycmVudFR5cGUuZm9sZGVyIHx8IFwiXCIpLnRyaW0oKTtcclxuXHRcdGNvbnN0IGNvbmZsaWN0aW5nVHlwZXM6IHN0cmluZ1tdID0gW107XHJcblx0XHRcclxuXHRcdGZvciAoY29uc3Qgb3RoZXJUeXBlIG9mIGNvbnRlbnRUeXBlcykge1xyXG5cdFx0XHRpZiAob3RoZXJUeXBlLmlkID09PSB0eXBlSWQgfHwgIW90aGVyVHlwZS5lbmFibGVkKSBjb250aW51ZTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IG90aGVyRm9sZGVyID0gKG90aGVyVHlwZS5mb2xkZXIgfHwgXCJcIikudHJpbSgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgZm9sZGVycyBjb25mbGljdFxyXG5cdFx0XHQvLyBCb3RoIGJsYW5rID0gY29uZmxpY3QgKGJvdGggbWF0Y2ggdmF1bHQgcm9vdClcclxuXHRcdFx0aWYgKGN1cnJlbnRGb2xkZXIgPT09IFwiXCIgJiYgb3RoZXJGb2xkZXIgPT09IFwiXCIpIHtcclxuXHRcdFx0XHRjb25mbGljdGluZ1R5cGVzLnB1c2gob3RoZXJUeXBlLm5hbWUgfHwgXCJVbm5hbWVkXCIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIFNhbWUgZm9sZGVyID0gY29uZmxpY3RcclxuXHRcdFx0ZWxzZSBpZiAoY3VycmVudEZvbGRlciA9PT0gb3RoZXJGb2xkZXIgJiYgY3VycmVudEZvbGRlciAhPT0gXCJcIikge1xyXG5cdFx0XHRcdGNvbmZsaWN0aW5nVHlwZXMucHVzaChvdGhlclR5cGUubmFtZSB8fCBcIlVubmFtZWRcIik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoY29uZmxpY3RpbmdUeXBlcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGNvbmZsaWN0V2FybmluZ0VsLnJlbW92ZUNsYXNzKFwiaGlkZGVuXCIpO1xyXG5cdFx0XHRjb25mbGljdFdhcm5pbmdFbC50ZXh0Q29udGVudCA9IGBDb25mbGljdDogJHtjb25mbGljdGluZ1R5cGVzLmpvaW4oXCIsIFwiKX0gYWxzbyB1c2Uke2NvbmZsaWN0aW5nVHlwZXMubGVuZ3RoID09PSAxID8gXCJzXCIgOiBcIlwifSB0aGlzIGZvbGRlci4gTW9yZSBzcGVjaWZpYyBwYXR0ZXJucyB3aWxsIHRha2UgcHJpb3JpdHkuYDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbmZsaWN0V2FybmluZ0VsLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblxyXG5cdHByaXZhdGUgYXN5bmMgbW92ZUNvbnRlbnRUeXBlVXAodHlwZUlkOiBzdHJpbmcpIHtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblx0XHRjb25zdCBjb250ZW50VHlwZXMgPSBzZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XHJcblx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBjb250ZW50VHlwZXMuZmluZEluZGV4KChjdDogQ29udGVudFR5cGUpID0+IGN0LmlkID09PSB0eXBlSWQpO1xyXG5cdFx0XHJcblx0XHRpZiAoY3VycmVudEluZGV4IDw9IDApIHJldHVybjsgLy8gQWxyZWFkeSBhdCB0aGUgdG9wXHJcblx0XHRcclxuXHRcdC8vIFN3YXAgd2l0aCBwcmV2aW91cyBpdGVtXHJcblx0XHRbY29udGVudFR5cGVzW2N1cnJlbnRJbmRleF0sIGNvbnRlbnRUeXBlc1tjdXJyZW50SW5kZXggLSAxXV0gPSBbY29udGVudFR5cGVzW2N1cnJlbnRJbmRleCAtIDFdLCBjb250ZW50VHlwZXNbY3VycmVudEluZGV4XV07XHJcblx0XHRzZXR0aW5ncy5jb250ZW50VHlwZXMgPSBjb250ZW50VHlwZXM7XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMucmVuZGVyQ3VzdG9tQ29udGVudFR5cGVzKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIG1vdmVDb250ZW50VHlwZURvd24odHlwZUlkOiBzdHJpbmcpIHtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblx0XHRjb25zdCBjb250ZW50VHlwZXMgPSBzZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XHJcblx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBjb250ZW50VHlwZXMuZmluZEluZGV4KChjdDogQ29udGVudFR5cGUpID0+IGN0LmlkID09PSB0eXBlSWQpO1xyXG5cdFx0XHJcblx0XHRpZiAoY3VycmVudEluZGV4IDwgMCB8fCBjdXJyZW50SW5kZXggPj0gY29udGVudFR5cGVzLmxlbmd0aCAtIDEpIHJldHVybjsgLy8gQWxyZWFkeSBhdCB0aGUgYm90dG9tXHJcblx0XHRcclxuXHRcdC8vIFN3YXAgd2l0aCBuZXh0IGl0ZW1cclxuXHRcdFtjb250ZW50VHlwZXNbY3VycmVudEluZGV4XSwgY29udGVudFR5cGVzW2N1cnJlbnRJbmRleCArIDFdXSA9IFtjb250ZW50VHlwZXNbY3VycmVudEluZGV4ICsgMV0sIGNvbnRlbnRUeXBlc1tjdXJyZW50SW5kZXhdXTtcclxuXHRcdHNldHRpbmdzLmNvbnRlbnRUeXBlcyA9IGNvbnRlbnRUeXBlcztcclxuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0dGhpcy5yZW5kZXJDdXN0b21Db250ZW50VHlwZXMoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgdG9nZ2xlQ29udGVudFR5cGVDb2xsYXBzZSh0eXBlSWQ6IHN0cmluZykge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHRcdGNvbnN0IGNvbnRlbnRUeXBlcyA9IHNldHRpbmdzLmNvbnRlbnRUeXBlcyB8fCBbXTtcclxuXHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gY29udGVudFR5cGVzLmZpbmQoKGN0OiBDb250ZW50VHlwZSkgPT4gY3QuaWQgPT09IHR5cGVJZCk7XHJcblx0XHRcclxuXHRcdGlmICghY29udGVudFR5cGUpIHJldHVybjtcclxuXHRcdFxyXG5cdFx0Y29udGVudFR5cGUuY29sbGFwc2VkID0gIWNvbnRlbnRUeXBlLmNvbGxhcHNlZDtcclxuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0dGhpcy51cGRhdGVDdXN0b21Db250ZW50VHlwZVZpc2liaWxpdHkodHlwZUlkLCBjb250ZW50VHlwZS5lbmFibGVkKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgcmVtb3ZlQ3VzdG9tQ29udGVudFR5cGUodHlwZUlkOiBzdHJpbmcpIHtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblx0XHRjb25zdCBjb250ZW50VHlwZXMgPSBzZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XHJcblx0XHRzZXR0aW5ncy5jb250ZW50VHlwZXMgPSBjb250ZW50VHlwZXMuZmlsdGVyKChjdDogQ29udGVudFR5cGUpID0+IGN0LmlkICE9PSB0eXBlSWQpO1xyXG5cdFx0Ly8gQ1JJVElDQUw6IEF3YWl0IHRoZSBzYXZlIHRvIGVuc3VyZSBkZWxldGlvbiBpcyBwZXJzaXN0ZWQgYmVmb3JlIGFueSByZWxvYWRzIGhhcHBlblxyXG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHR0aGlzLnJlbmRlckN1c3RvbUNvbnRlbnRUeXBlcygpO1xyXG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJDcmVhdGVFdmVudCgpO1xyXG5cdFx0Ly8gUmUtcmVnaXN0ZXIgY29udGVudCB0eXBlIGNvbW1hbmRzIHRvIHJlbW92ZSB0aGUgZGVsZXRlZCB0eXBlXHJcblx0XHRyZWdpc3RlckNvbnRlbnRUeXBlQ29tbWFuZHModGhpcy5wbHVnaW4gYXMgdW5rbm93biBhcyBQbHVnaW4sIHNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0Q29tbWFuZE5hbWUoY29tbWFuZElkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0aWYgKCFjb21tYW5kSWQpIHJldHVybiAnJztcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IGNvbW1hbmRSZWdpc3RyeSA9ICh0aGlzLmFwcCBhcyB1bmtub3duIGFzIHsgY29tbWFuZHM/OiB7IGxpc3RDb21tYW5kcz86ICgpID0+IEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+OyBjb21tYW5kcz86IFJlY29yZDxzdHJpbmcsIHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+IH0gfSkuY29tbWFuZHM7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBNZXRob2QgMTogVHJ5IGxpc3RDb21tYW5kcygpXHJcblx0XHRcdGlmIChjb21tYW5kUmVnaXN0cnkgJiYgdHlwZW9mIGNvbW1hbmRSZWdpc3RyeS5saXN0Q29tbWFuZHMgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Y29uc3QgYWxsQ29tbWFuZHMgPSBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzKCk7XHJcblx0XHRcdFx0XHRjb25zdCBjb21tYW5kID0gYWxsQ29tbWFuZHMuZmluZCgoY21kOiB7IGlkOiBzdHJpbmc7IG5hbWU/OiBzdHJpbmcgfSkgPT4gY21kLmlkID09PSBjb21tYW5kSWQpO1xyXG5cdFx0XHRcdFx0aWYgKGNvbW1hbmQ/Lm5hbWUpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGNvbW1hbmQubmFtZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ1tBc3RybyBDb21wb3Nlcl0gRXJyb3IgZ2V0dGluZyBjb21tYW5kIG5hbWUgdmlhIGxpc3RDb21tYW5kcygpOicsIGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gTWV0aG9kIDI6IFRyeSBhY2Nlc3NpbmcgdGhlIGludGVybmFsIGNvbW1hbmRzIHJlZ2lzdHJ5IGRpcmVjdGx5XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y29uc3QgcmVnaXN0cnkgPSBjb21tYW5kUmVnaXN0cnk/LmNvbW1hbmRzO1xyXG5cdFx0XHRcdGlmIChyZWdpc3RyeSAmJiB0eXBlb2YgcmVnaXN0cnkgPT09ICdvYmplY3QnKSB7XHJcblx0XHRcdFx0XHRjb25zdCBjb21tYW5kID0gKHJlZ2lzdHJ5IGFzIFJlY29yZDxzdHJpbmcsIHsgbmFtZT86IHN0cmluZyB9PilbY29tbWFuZElkXTtcclxuXHRcdFx0XHRcdGlmIChjb21tYW5kPy5uYW1lKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBjb21tYW5kLm5hbWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdFx0Y29uc29sZS53YXJuKCdbQXN0cm8gQ29tcG9zZXJdIEVycm9yIGdldHRpbmcgY29tbWFuZCBuYW1lIHZpYSByZWdpc3RyeTonLCBlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oJ1tBc3RybyBDb21wb3Nlcl0gRXJyb3IgZ2V0dGluZyBjb21tYW5kIG5hbWU6JywgZSk7XHJcblx0XHR9XHJcblx0XHQvLyBSZXR1cm4gZW1wdHkgc3RyaW5nIGlmIGNvbW1hbmQgbm90IGZvdW5kLCBzbyBpdCBzaG93cyBcIlNlbGVjdCBjb21tYW5kLi4uXCIgcGxhY2Vob2xkZXJcclxuXHRcdHJldHVybiAnJztcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0SWNvbk5hbWUoaWNvbklkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0aWYgKCFpY29uSWQpIHJldHVybiAnJztcclxuXHRcdC8vIENvbnZlcnQgaWNvbiBJRCB0byBhIHJlYWRhYmxlIG5hbWUsIHJlbW92aW5nIGx1Y2lkZS0gcHJlZml4IGlmIHByZXNlbnRcclxuXHRcdHJldHVybiBpY29uSWRcclxuXHRcdFx0LnJlcGxhY2UoL15sdWNpZGUtLywgJycpIC8vIFJlbW92ZSBsdWNpZGUtIHByZWZpeFxyXG5cdFx0XHQuc3BsaXQoJy0nKVxyXG5cdFx0XHQubWFwKHdvcmQgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkpXHJcblx0XHRcdC5qb2luKCcgJyk7XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogQ29tbWFuZCBQaWNrZXIgTW9kYWxcclxuICogU2VhcmNoYWJsZSBtb2RhbCBmb3Igc2VsZWN0aW5nIGFuIE9ic2lkaWFuIGNvbW1hbmRcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIEZ1enp5U3VnZ2VzdE1vZGFsIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW50ZXJmYWNlIENvbW1hbmRPcHRpb24ge1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0bmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tbWFuZFBpY2tlck1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8Q29tbWFuZE9wdGlvbj4ge1xyXG5cdHByaXZhdGUgb25TZWxlY3Q6IChjb21tYW5kSWQ6IHN0cmluZykgPT4gdm9pZDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU2VsZWN0OiAoY29tbWFuZElkOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLm9uU2VsZWN0ID0gb25TZWxlY3Q7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtcygpOiBDb21tYW5kT3B0aW9uW10ge1xyXG5cdFx0Ly8gR2V0IGFsbCBhdmFpbGFibGUgY29tbWFuZHNcclxuXHRcdC8vIFRyeSBtdWx0aXBsZSBtZXRob2RzIHRvIGVuc3VyZSB3ZSBnZXQgQUxMIGNvbW1hbmRzLCBub3QganVzdCBjb250ZXh0LWZpbHRlcmVkIG9uZXNcclxuXHRcdGNvbnN0IGNvbW1hbmRSZWdpc3RyeSA9ICh0aGlzLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBsaXN0Q29tbWFuZHM/OiAoKSA9PiBDb21tYW5kT3B0aW9uW107IGNvbW1hbmRzPzogUmVjb3JkPHN0cmluZywgQ29tbWFuZE9wdGlvbj47IGNvbW1hbmRSZWdpc3RyeT86IFJlY29yZDxzdHJpbmcsIENvbW1hbmRPcHRpb24+IH0gfSkuY29tbWFuZHM7XHJcblx0XHRcclxuXHRcdC8vIFVzZSBhIFNldCB0byBkZWR1cGxpY2F0ZSBieSBjb21tYW5kIElEXHJcblx0XHRjb25zdCBjb21tYW5kTWFwID0gbmV3IE1hcDxzdHJpbmcsIENvbW1hbmRPcHRpb24+KCk7XHJcblx0XHRcclxuXHRcdC8vIE1ldGhvZCAxOiBUcnkgbGlzdENvbW1hbmRzKCkgLSBidXQgdGhpcyBtaWdodCBiZSBjb250ZXh0LWZpbHRlcmVkXHJcblx0XHRpZiAoY29tbWFuZFJlZ2lzdHJ5ICYmIHR5cGVvZiBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y29uc3QgY29tbWFuZHMgPSBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzKCk7XHJcblx0XHRcdFx0Zm9yIChjb25zdCBjb21tYW5kIG9mIGNvbW1hbmRzKSB7XHJcblx0XHRcdFx0XHRpZiAoY29tbWFuZCAmJiBjb21tYW5kLmlkICYmIGNvbW1hbmQubmFtZSAmJiAhY29tbWFuZE1hcC5oYXMoY29tbWFuZC5pZCkpIHtcclxuXHRcdFx0XHRcdFx0Y29tbWFuZE1hcC5zZXQoY29tbWFuZC5pZCwge1xyXG5cdFx0XHRcdFx0XHRcdGlkOiBjb21tYW5kLmlkLFxyXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGNvbW1hbmQubmFtZVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ1tBc3RybyBDb21wb3Nlcl0gRXJyb3IgZ2V0dGluZyBjb21tYW5kcyB2aWEgbGlzdENvbW1hbmRzKCk6JywgZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gTWV0aG9kIDI6IFRyeSBhY2Nlc3NpbmcgdGhlIGludGVybmFsIGNvbW1hbmRzIHJlZ2lzdHJ5IGRpcmVjdGx5XHJcblx0XHQvLyBUaGlzIHNob3VsZCBnaXZlIHVzIEFMTCBjb21tYW5kcyByZWdhcmRsZXNzIG9mIGNvbnRleHRcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHJlZ2lzdHJ5ID0gY29tbWFuZFJlZ2lzdHJ5Py5jb21tYW5kcztcclxuXHRcdFx0aWYgKHJlZ2lzdHJ5ICYmIHR5cGVvZiByZWdpc3RyeSA9PT0gJ29iamVjdCcpIHtcclxuXHRcdFx0XHRjb25zdCBhbGxDb21tYW5kcyA9IE9iamVjdC52YWx1ZXMocmVnaXN0cnkpO1xyXG5cdFx0XHRcdGZvciAoY29uc3QgY29tbWFuZCBvZiBhbGxDb21tYW5kcykge1xyXG5cdFx0XHRcdFx0aWYgKGNvbW1hbmQgJiYgY29tbWFuZC5pZCAmJiBjb21tYW5kLm5hbWUgJiYgIWNvbW1hbmRNYXAuaGFzKGNvbW1hbmQuaWQpKSB7XHJcblx0XHRcdFx0XHRcdGNvbW1hbmRNYXAuc2V0KGNvbW1hbmQuaWQsIHtcclxuXHRcdFx0XHRcdFx0XHRpZDogY29tbWFuZC5pZCxcclxuXHRcdFx0XHRcdFx0XHRuYW1lOiBjb21tYW5kLm5hbWVcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdGNvbnNvbGUud2FybignW0FzdHJvIENvbXBvc2VyXSBFcnJvciBnZXR0aW5nIGNvbW1hbmRzIHZpYSByZWdpc3RyeTonLCBlKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gTWV0aG9kIDM6IFRyeSBhY2Nlc3NpbmcgdmlhIGludGVybmFsIHN0cnVjdHVyZSAoZmFsbGJhY2spXHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCBpbnRlcm5hbFJlZ2lzdHJ5ID0gY29tbWFuZFJlZ2lzdHJ5Py5jb21tYW5kUmVnaXN0cnk7XHJcblx0XHRcdGlmIChpbnRlcm5hbFJlZ2lzdHJ5ICYmIHR5cGVvZiBpbnRlcm5hbFJlZ2lzdHJ5ID09PSAnb2JqZWN0Jykge1xyXG5cdFx0XHRcdGNvbnN0IGFsbENvbW1hbmRzID0gT2JqZWN0LnZhbHVlcyhpbnRlcm5hbFJlZ2lzdHJ5KTtcclxuXHRcdFx0XHRmb3IgKGNvbnN0IGNvbW1hbmQgb2YgYWxsQ29tbWFuZHMpIHtcclxuXHRcdFx0XHRcdGlmIChjb21tYW5kICYmIGNvbW1hbmQuaWQgJiYgY29tbWFuZC5uYW1lICYmICFjb21tYW5kTWFwLmhhcyhjb21tYW5kLmlkKSkge1xyXG5cdFx0XHRcdFx0XHRjb21tYW5kTWFwLnNldChjb21tYW5kLmlkLCB7XHJcblx0XHRcdFx0XHRcdFx0aWQ6IGNvbW1hbmQuaWQsXHJcblx0XHRcdFx0XHRcdFx0bmFtZTogY29tbWFuZC5uYW1lXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oJ1tBc3RybyBDb21wb3Nlcl0gRXJyb3IgZ2V0dGluZyBjb21tYW5kcyB2aWEgaW50ZXJuYWwgcmVnaXN0cnk6JywgZSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNvbnN0IGNvbW1hbmRPcHRpb25zID0gQXJyYXkuZnJvbShjb21tYW5kTWFwLnZhbHVlcygpKTtcclxuXHRcdFxyXG5cdFx0Ly8gU29ydCBhbHBoYWJldGljYWxseSBieSBuYW1lXHJcblx0XHRjb21tYW5kT3B0aW9ucy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIGNvbW1hbmRPcHRpb25zO1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbVRleHQoaXRlbTogQ29tbWFuZE9wdGlvbik6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gaXRlbS5uYW1lO1xyXG5cdH1cclxuXHJcblx0b25DaG9vc2VJdGVtKGl0ZW06IENvbW1hbmRPcHRpb24sIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMub25TZWxlY3QoaXRlbS5pZCk7XHJcblx0fVxyXG5cclxuXHQvLyBPdmVycmlkZSB0byBzaG93IGNvbW1hbmQgbmFtZSBvbmx5XHJcblx0cmVuZGVyU3VnZ2VzdGlvbihtYXRjaDogeyBpdGVtOiBDb21tYW5kT3B0aW9uIH0sIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgaXRlbSA9IG1hdGNoLml0ZW07XHJcblx0XHRlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLXRpdGxlJywgdGV4dDogaXRlbS5uYW1lIH0pO1xyXG5cdH1cclxufVxyXG5cclxuIiwgIi8qKlxyXG4gKiBJY29uIFBpY2tlciBNb2RhbFxyXG4gKiBTZWFyY2hhYmxlIG1vZGFsIGZvciBzZWxlY3RpbmcgYSBMdWNpZGUgaWNvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgRnV6enlTdWdnZXN0TW9kYWwsIHNldEljb24sIGdldEljb25JZHMsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW50ZXJmYWNlIEljb25PcHRpb24ge1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0bmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG4vLyBHZXQgaWNvbiBsaXN0IGZyb20gT2JzaWRpYW4gQVBJIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBmYWxsYmFjayBsaXN0XHJcbmNvbnN0IGdldEljb25MaXN0ID0gKCk6IHN0cmluZ1tdID0+IHtcclxuXHRpZiAocmVxdWlyZUFwaVZlcnNpb24gJiYgcmVxdWlyZUFwaVZlcnNpb24oJzEuNy4zJykgJiYgZ2V0SWNvbklkcykge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0cmV0dXJuIGdldEljb25JZHMoKTtcclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbQXN0cm8gQ29tcG9zZXJdIEVycm9yIGdldHRpbmcgaWNvbiBJRHMgZnJvbSBPYnNpZGlhbjonLCBlKTtcclxuXHRcdH1cclxuXHR9XHJcblx0Ly8gRmFsbGJhY2sgdG8gYSBiYXNpYyBsaXN0IGlmIEFQSSBpcyBub3QgYXZhaWxhYmxlXHJcblx0cmV0dXJuIFtcclxuXHRcdCdzZXR0aW5ncy0yJywgJ3NldHRpbmdzJywgJ2hlbHAtY2lyY2xlJywgJ2luZm8nLCAnc3RhcicsICdoZWFydCcsICdib29rbWFyaycsXHJcblx0XHQnaG9tZScsICdzZWFyY2gnLCAnYmVsbCcsICdtYWlsJywgJ3VzZXInLCAndXNlcnMnLCAnZm9sZGVyJywgJ2ZpbGUnLCAnZmlsZS10ZXh0JyxcclxuXHRcdCdpbWFnZScsICd2aWRlbycsICdtdXNpYycsICdjYWxlbmRhcicsICdjbG9jaycsICdlZGl0JywgJ3BlbmNpbCcsICd0cmFzaCcsXHJcblx0XHQnY29weScsICdjdXQnLCAncGFzdGUnLCAnZG93bmxvYWQnLCAndXBsb2FkJywgJ3NhdmUnLCAnc2hhcmUnLCAnbGluaycsXHJcblx0XHQnZXh0ZXJuYWwtbGluaycsICdsb2NrJywgJ3VubG9jaycsICdleWUnLCAnZXllLW9mZicsICdrZXknLCAnc2hpZWxkJyxcclxuXHRcdCdjaGVjaycsICd4JywgJ3BsdXMnLCAnbWludXMnLCAnYXJyb3ctbGVmdCcsICdhcnJvdy1yaWdodCcsICdhcnJvdy11cCcsXHJcblx0XHQnYXJyb3ctZG93bicsICdjaGV2cm9uLWxlZnQnLCAnY2hldnJvbi1yaWdodCcsICdjaGV2cm9uLXVwJywgJ2NoZXZyb24tZG93bicsXHJcblx0XHQnbWVudScsICdtb3JlLWhvcml6b250YWwnLCAnbW9yZS12ZXJ0aWNhbCcsICdncmlkJywgJ2xpc3QnLCAnbGF5b3V0JyxcclxuXHRcdCdjb2x1bW5zJywgJ3Jvd3MnLCAnbWF4aW1pemUnLCAnbWluaW1pemUnLCAnem9vbS1pbicsICd6b29tLW91dCcsXHJcblx0XHQncmVmcmVzaC1jdycsICdwbGF5JywgJ3BhdXNlJywgJ3N0b3AnLCAnc3VuJywgJ21vb24nLCAnY2xvdWQnLCAnemFwJyxcclxuXHRcdCd3YW5kLTInLCAnd2FuZCcsICd3YW5kLXNwYXJrbGVzJywgJ3BhbGV0dGUnLCAnYnJ1c2gnLCAnc2xpZGVycycsXHJcblx0XHQncG93ZXInLCAnd2lmaScsICdibHVldG9vdGgnLCAnbW9uaXRvcicsICdsYXB0b3AnLCAnc21hcnRwaG9uZScsXHJcblx0XHQnY2FtZXJhJywgJ21pYycsICdoZWFkcGhvbmVzJywgJ2NvZGUnLCAndGVybWluYWwnLCAndGVybWluYWwtc3F1YXJlJyxcclxuXHRcdCdnaXRodWInLCAnZ2l0bGFiJywgJ2dpdC1icmFuY2gnLCAnZ2l0LWNvbW1pdCcsICdkYXRhYmFzZScsICdzZXJ2ZXInLFxyXG5cdFx0J2Nsb3VkLWRvd25sb2FkJywgJ2Nsb3VkLXVwbG9hZCcsICd0YWcnLCAndGFncycsICdmbGFnJywgJ3BpbicsXHJcblx0XHQnbWFwLXBpbicsICdjb21wYXNzJywgJ2dsb2JlJywgJ3JvY2tldCcsICdjYXInLCAnYmlrZScsICdyb2JvdCcsXHJcblx0XHQnYXBwbGUnLCAnd2luZG93cycsICdsaW51eCcsICdjaHJvbWUnLCAnZmlyZWZveCcsICdzYWZhcmknLFxyXG5cdFx0J2NyZWRpdC1jYXJkJywgJ3dhbGxldCcsICdjb2lucycsICdib29rJywgJ2Jvb2stb3BlbicsICdhd2FyZCcsXHJcblx0XHQndHJvcGh5JywgJ2JhZGdlJywgJ3dyZW5jaCcsICd0b29sJywgJ3BhY2thZ2UnLCAnYm94JywgJ2FyY2hpdmUnLFxyXG5cdFx0J3NlbmQnLCAncmVwbHknLCAnZm9yd2FyZCcsICdtYWlsLW9wZW4nLCAndGFnLXBsdXMnLCAndGFnLW1pbnVzJyxcclxuXHRcdCdmbGFnLW9mZicsICdwaW4tb2ZmJywgJ21hcC1waW4tb2ZmJywgJ25hdmlnYXRpb24nLCAnbWFwJywgJ2VhcnRoJyxcclxuXHRcdCdwbGFuZScsICdzaGlwJywgJ2FuY2hvcicsICdoZWxpY29wdGVyJywgJ2Ryb25lJywgJ2FuZHJvaWQnLFxyXG5cdFx0J2tleWhvbGUnLCAna2V5cycsICdmaW5nZXJwcmludCcsICdzY2FuJywgJ3FyLWNvZGUnLCAnYmFyY29kZScsXHJcblx0XHQncmVjZWlwdCcsICdwaWdneS1iYW5rJywgJ2Jhbmtub3RlJ1xyXG5cdF07XHJcbn07XHJcblxyXG4vLyBDb252ZXJ0IGljb24gSURzIHRvIEljb25PcHRpb24gZm9ybWF0XHJcbmNvbnN0IExVQ0lERV9JQ09OUzogSWNvbk9wdGlvbltdID0gZ2V0SWNvbkxpc3QoKS5tYXAoaWQgPT4gKHtcclxuXHRpZDogaWQsXHJcblx0bmFtZTogaWRcclxuXHRcdC5yZXBsYWNlKC9ebHVjaWRlLS8sICcnKSAvLyBSZW1vdmUgbHVjaWRlLSBwcmVmaXggZm9yIGRpc3BsYXlcclxuXHRcdC5yZXBsYWNlKC8tL2csICcgJylcclxuXHRcdC5yZXBsYWNlKC8oXlxcd3sxfSl8KFxccytcXHd7MX0pL2csIChsZXR0ZXIpID0+IGxldHRlci50b1VwcGVyQ2FzZSgpKVxyXG59KSkuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7XHJcblxyXG5leHBvcnQgY2xhc3MgSWNvblBpY2tlck1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8SWNvbk9wdGlvbj4ge1xyXG5cdHByaXZhdGUgb25TZWxlY3Q6IChpY29uSWQ6IHN0cmluZykgPT4gdm9pZDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU2VsZWN0OiAoaWNvbklkOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLm9uU2VsZWN0ID0gb25TZWxlY3Q7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtcygpOiBJY29uT3B0aW9uW10ge1xyXG5cdFx0cmV0dXJuIExVQ0lERV9JQ09OUztcclxuXHR9XHJcblxyXG5cdGdldEl0ZW1UZXh0KGl0ZW06IEljb25PcHRpb24pOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIGl0ZW0ubmFtZTtcclxuXHR9XHJcblxyXG5cdG9uQ2hvb3NlSXRlbShpdGVtOiBJY29uT3B0aW9uLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLm9uU2VsZWN0KGl0ZW0uaWQpO1xyXG5cdH1cclxuXHJcblx0Ly8gT3ZlcnJpZGUgdG8gc2hvdyBpY29uIHByZXZpZXdcclxuXHRyZW5kZXJTdWdnZXN0aW9uKG1hdGNoOiB7IGl0ZW06IEljb25PcHRpb24gfSwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBpdGVtID0gbWF0Y2guaXRlbTtcclxuXHRcdGVsLmFkZENsYXNzKCdtb2QtY29tcGxleCcpO1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGVsLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24tY29udGVudCcgfSk7XHJcblx0XHRjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24tdGl0bGUnLCB0ZXh0OiBpdGVtLm5hbWUgfSk7XHJcblx0XHRcclxuXHRcdC8vIENyZWF0ZSBpY29uIHByZXZpZXcgdXNpbmcgT2JzaWRpYW4ncyBzZXRJY29uXHJcblx0XHRjb25zdCBhdXggPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWF1eCcgfSk7XHJcblx0XHRzZXRJY29uKGF1eC5jcmVhdGVTcGFuKHsgY2xzOiAnc3VnZ2VzdGlvbi1mbGFpcicgfSksIGl0ZW0uaWQpO1xyXG5cdH1cclxufVxyXG5cclxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cmVzdWx0OiBib29sZWFuID0gZmFsc2U7XHJcblx0cmVzb2x2ZVByb21pc2U6ICgocmVzdWx0OiBib29sZWFuKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcHJpdmF0ZSBtZXNzYWdlOiBzdHJpbmcsIHByaXZhdGUgY29uZmlybVRleHQ6IHN0cmluZyA9IFwiQ29uZmlybVwiLCBwcml2YXRlIGNhbmNlbFRleHQ6IHN0cmluZyA9IFwiQ2FuY2VsXCIpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0Y29udGVudEVsLmFkZENsYXNzKFwiYXN0cm8tY29tcG9zZXItY29uZmlybS1tb2RhbFwiKTtcclxuXHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogdGhpcy5tZXNzYWdlIH0pO1xyXG5cclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xyXG5cclxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XHJcblx0XHRcdHRleHQ6IHRoaXMuY2FuY2VsVGV4dCxcclxuXHRcdH0pO1xyXG5cdFx0Y2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMucmVzdWx0ID0gZmFsc2U7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3QgY29uZmlybUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XHJcblx0XHRcdHRleHQ6IHRoaXMuY29uZmlybVRleHQsXHJcblx0XHRcdGNsczogXCJtb2QtY3RhIG1vZC13YXJuaW5nXCIsXHJcblx0XHR9KTtcclxuXHRcdGNvbmZpcm1CdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5yZXN1bHQgPSB0cnVlO1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0XHRpZiAodGhpcy5yZXNvbHZlUHJvbWlzZSkge1xyXG5cdFx0XHR0aGlzLnJlc29sdmVQcm9taXNlKHRoaXMucmVzdWx0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIHdhaXRGb3JSZXN1bHQoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuXHRcdFx0dGhpcy5yZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XHJcblx0XHRcdHRoaXMub3BlbigpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG4iLCAiLyoqXHJcbiAqIENvbXBhdGliaWxpdHkgdXRpbGl0aWVzIGZvciBzZXR0aW5nc1xyXG4gKiBQcm92aWRlcyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGZvciBTZXR0aW5nR3JvdXAgKHJlcXVpcmVzIEFQSSAxLjExLjArKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNldHRpbmcsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgKiBhcyBPYnNpZGlhbk1vZHVsZSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIHRoYXQgd29ya3Mgd2l0aCBib3RoIFNldHRpbmdHcm91cCBhbmQgZmFsbGJhY2sgY29udGFpbmVyXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc2V0dGluZ3MgY29udGFpbmVyIHRoYXQgdXNlcyBTZXR0aW5nR3JvdXAgaWYgYXZhaWxhYmxlIChBUEkgMS4xMS4wKyksXHJcbiAqIG90aGVyd2lzZSBmYWxscyBiYWNrIHRvIGNyZWF0aW5nIGEgaGVhZGluZyBhbmQgdXNpbmcgdGhlIGNvbnRhaW5lciBkaXJlY3RseS5cclxuICogXHJcbiAqIFVzZXMgcmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpIHRvIGNoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUuXHJcbiAqIFRoaXMgaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmcuXHJcbiAqIFxyXG4gKiBAcGFyYW0gY29udGFpbmVyRWwgLSBUaGUgY29udGFpbmVyIGVsZW1lbnQgZm9yIHNldHRpbmdzXHJcbiAqIEBwYXJhbSBoZWFkaW5nIC0gVGhlIGhlYWRpbmcgdGV4dCBmb3IgdGhlIHNldHRpbmdzIGdyb3VwIChvcHRpb25hbClcclxuICogQHBhcmFtIG1hbmlmZXN0SWQgLSBUaGUgcGx1Z2luJ3MgbWFuaWZlc3QgSUQgZm9yIENTUyBzY29waW5nIChyZXF1aXJlZCBmb3IgZmFsbGJhY2sgbW9kZSlcclxuICogQHJldHVybnMgQSBjb250YWluZXIgdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXR0aW5nc0dyb3VwKFxyXG5cdGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuXHRoZWFkaW5nPzogc3RyaW5nLFxyXG5cdG1hbmlmZXN0SWQ/OiBzdHJpbmdcclxuKTogU2V0dGluZ3NDb250YWluZXIge1xyXG5cdC8vIENoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUgKEFQSSAxLjExLjArKVxyXG5cdC8vIHJlcXVpcmVBcGlWZXJzaW9uIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nXHJcblx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSkge1xyXG5cdFx0Ly8gVXNlIFNldHRpbmdHcm91cCAtIGl0J3MgZ3VhcmFudGVlZCB0byBleGlzdCBpZiByZXF1aXJlQXBpVmVyc2lvbiByZXR1cm5zIHRydWVcclxuXHRcdC8vIEFjY2VzcyBTZXR0aW5nR3JvdXAgdmlhIHR5cGUgYXNzZXJ0aW9uIHNpbmNlIGl0IG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9uc1xyXG5cdFx0Ly8gZm9yIG9sZGVyIFR5cGVTY3JpcHQgdmVyc2lvbnMsIGJ1dCBleGlzdHMgYXQgcnVudGltZSBpbiBPYnNpZGlhbiAxLjExLjArXHJcblx0XHQvLyBVc2luZyB1bmtub3duIGluc3RlYWQgb2YgYW55IHRvIHNhdGlzZnkgZXNsaW50IHdoaWxlIG1haW50YWluaW5nIHR5cGUgc2FmZXR5XHJcblx0XHRjb25zdCBTZXR0aW5nR3JvdXBDbGFzcyA9IChPYnNpZGlhbk1vZHVsZSBhcyB1bmtub3duIGFzIHsgU2V0dGluZ0dyb3VwPzogbmV3IChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpID0+IHtcclxuXHRcdFx0c2V0SGVhZGluZyhoZWFkaW5nOiBzdHJpbmcpOiB7XHJcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcblx0XHR9IH0pLlNldHRpbmdHcm91cDtcclxuXHRcdFxyXG5cdFx0aWYgKFNldHRpbmdHcm91cENsYXNzKSB7XHJcblx0XHRcdGNvbnN0IGdyb3VwID0gaGVhZGluZyBcclxuXHRcdFx0XHQ/IG5ldyBTZXR0aW5nR3JvdXBDbGFzcyhjb250YWluZXJFbCkuc2V0SGVhZGluZyhoZWFkaW5nKVxyXG5cdFx0XHRcdDogbmV3IFNldHRpbmdHcm91cENsYXNzKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZyhjYik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBGYWxsYmFjayBwYXRoIChlaXRoZXIgQVBJIDwgMS4xMS4wIG9yIFNldHRpbmdHcm91cCBub3QgZm91bmQpXHJcblx0Ly8gQWRkIHNjb3BpbmcgY2xhc3MgdG8gY29udGFpbmVyRWwgdG8gc2NvcGUgQ1NTIHRvIG9ubHkgdGhpcyBwbHVnaW4ncyBzZXR0aW5nc1xyXG5cdGlmIChtYW5pZmVzdElkKSB7XHJcblx0XHRjb250YWluZXJFbC5hZGRDbGFzcyhgJHttYW5pZmVzdElkfS1zZXR0aW5ncy1jb21wYXRgKTtcclxuXHR9XHJcblx0XHJcblx0e1xyXG5cdFx0Ly8gRmFsbGJhY2s6IENyZWF0ZSBhIGhlYWRpbmcgbWFudWFsbHkgZm9yIG9sZGVyIEFQSSB2ZXJzaW9uc1xyXG5cdFx0Ly8gTm90ZTogV2hpbGUgYmVzdCBwcmFjdGljZSBwcmVmZXJzIFNldHRpbmcuc2V0SGVhZGluZygpLCB0aGUgZmFsbGJhY2sgcGF0aFxyXG5cdFx0Ly8gaXMgZm9yIHZlcnNpb25zIHRoYXQgbWF5IG5vdCBzdXBwb3J0IGl0LCBzbyBtYW51YWwgaGVhZGluZyBpcyBhcHByb3ByaWF0ZSBoZXJlXHJcblx0XHRpZiAoaGVhZGluZykge1xyXG5cdFx0XHRjb25zdCBoZWFkaW5nRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmctZ3JvdXAtaGVhZGluZycpO1xyXG5cdFx0XHRoZWFkaW5nRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBoZWFkaW5nIH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XHJcblx0XHRcdFx0Y2Ioc2V0dGluZyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE1pZ3JhdGlvbkNvbmZsaWN0UmVzdWx0IHtcclxuXHRhY3Rpb246IFwic2tpcFwiIHwgXCJtaWdyYXRlXCI7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNaWdyYXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRyZXN1bHQ6IE1pZ3JhdGlvbkNvbmZsaWN0UmVzdWx0IHwgbnVsbCA9IG51bGw7XHJcblx0cmVzb2x2ZVByb21pc2U6ICgocmVzdWx0OiBNaWdyYXRpb25Db25mbGljdFJlc3VsdCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGNvbmZsaWN0czogc3RyaW5nW10pIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0Y29udGVudEVsLmFkZENsYXNzKFwiYXN0cm8tY29tcG9zZXItbWlncmF0aW9uLW1vZGFsXCIpO1xyXG5cclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJNaWdyYXRpb24gY29uZmxpY3QgZGV0ZWN0ZWRcIiB9KTtcclxuXHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuXHRcdFx0dGV4dDogXCJZb3UgaGF2ZSBleGlzdGluZyBjb250ZW50IHR5cGVzIHdpdGggbmFtZXMgdGhhdCBjb25mbGljdCB3aXRoIHBvc3RzIG9yIHBhZ2VzLiBIb3cgd291bGQgeW91IGxpa2UgdG8gcHJvY2VlZD9cIixcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnN0IGNvbmZsaWN0TGlzdCA9IGNvbnRlbnRFbC5jcmVhdGVFbChcInVsXCIpO1xyXG5cdFx0Y29uZmxpY3RMaXN0LmNyZWF0ZUVsKFwibGlcIiwgeyB0ZXh0OiBcIlNraXAgbWlncmF0aW9uOiBrZWVwIHlvdXIgZXhpc3RpbmcgcG9zdHMvcGFnZXMgc2V0dGluZ3MgKHRoZXkgd2lsbCBiZSBpZ25vcmVkKVwiIH0pO1xyXG5cdFx0Y29uZmxpY3RMaXN0LmNyZWF0ZUVsKFwibGlcIiwgeyB0ZXh0OiBcIk1pZ3JhdGUgd2l0aCByZW5hbWVkIHR5cGVzOiBjcmVhdGUgJ3Bvc3RzIChtaWdyYXRlZCknIGFuZCAncGFnZXMgKG1pZ3JhdGVkKScgY29udGVudCB0eXBlc1wiIH0pO1xyXG5cclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xyXG5cclxuXHRcdGNvbnN0IHNraXBCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xyXG5cdFx0XHR0ZXh0OiBcIlNraXAgbWlncmF0aW9uXCIsXHJcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXHJcblx0XHR9KTtcclxuXHRcdHNraXBCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5yZXN1bHQgPSB7IGFjdGlvbjogXCJza2lwXCIgfTtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fTtcclxuXHJcblx0XHRjb25zdCBtaWdyYXRlQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcclxuXHRcdFx0dGV4dDogXCJNaWdyYXRlIHdpdGggcmVuYW1lZCB0eXBlc1wiLFxyXG5cdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxyXG5cdFx0fSk7XHJcblx0XHRtaWdyYXRlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMucmVzdWx0ID0geyBhY3Rpb246IFwibWlncmF0ZVwiIH07XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCkge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHRcdGlmICh0aGlzLnJlc29sdmVQcm9taXNlICYmIHRoaXMucmVzdWx0KSB7XHJcblx0XHRcdHRoaXMucmVzb2x2ZVByb21pc2UodGhpcy5yZXN1bHQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgd2FpdEZvclJlc3VsdCgpOiBQcm9taXNlPE1pZ3JhdGlvbkNvbmZsaWN0UmVzdWx0PiB7XHJcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuXHRcdFx0dGhpcy5yZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XHJcblx0XHRcdHRoaXMub3BlbigpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG4iLCAiaW1wb3J0IHsgVEZpbGUsIEhlYWRpbmdDYWNoZSwgQXBwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBc3Ryb0NvbXBvc2VyU2V0dGluZ3MgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IG1hdGNoZXNGb2xkZXJQYXR0ZXJuLCBzb3J0QnlQYXR0ZXJuU3BlY2lmaWNpdHkgfSBmcm9tIFwiLi9wYXRoLW1hdGNoaW5nXCI7XG5cbmV4cG9ydCBjbGFzcyBIZWFkaW5nTGlua0dlbmVyYXRvciB7XG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgc2V0dGluZ3M6IEFzdHJvQ29tcG9zZXJTZXR0aW5ncykge31cblxuXHQvKipcblx0ICogQ29udmVydHMgdGV4dCB0byBrZWJhYi1jYXNlIHNsdWcgZm9yIFVSTHNcblx0ICovXG5cdHByaXZhdGUgdG9LZWJhYkNhc2Uoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdHJldHVybiBzdHJcblx0XHRcdC50b0xvd2VyQ2FzZSgpXG5cdFx0XHQucmVwbGFjZSgvW15hLXowLTlcXHMtXS9nLCBcIlwiKVxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL1xccysvZywgXCItXCIpXG5cdFx0XHQucmVwbGFjZSgvLSsvZywgXCItXCIpXG5cdFx0XHQucmVwbGFjZSgvXi18LSQvZywgXCJcIik7XG5cdH1cblxuXHQvKipcblx0ICogR2V0cyB0aGUgQXN0cm8tY29tcGF0aWJsZSBVUkwgZnJvbSBhbiBpbnRlcm5hbCBsaW5rIChjb3BpZWQgZnJvbSBMaW5rQ29udmVydGVyKVxuXHQgKi9cblx0cHJpdmF0ZSBnZXRBc3Ryb1VybEZyb21JbnRlcm5hbExpbmsobGluazogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRjb25zdCBoYXNoSW5kZXggPSBsaW5rLmluZGV4T2YoJyMnKTtcblx0XHRsZXQgcGF0aCA9IGhhc2hJbmRleCA+PSAwID8gbGluay5zbGljZSgwLCBoYXNoSW5kZXgpIDogbGluaztcblx0XHRjb25zdCBhbmNob3IgPSBoYXNoSW5kZXggPj0gMCA/IGxpbmsuc2xpY2UoaGFzaEluZGV4KSA6ICcnO1xuXG5cdFx0cGF0aCA9IHBhdGgucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cblx0XHQvLyBEZXRlcm1pbmUgY29udGVudCB0eXBlIGFuZCBhcHByb3ByaWF0ZSBiYXNlIHBhdGhcblx0XHRsZXQgYmFzZVBhdGggPSBcIlwiO1xuXHRcdGxldCBjb250ZW50Rm9sZGVyID0gXCJcIjtcblx0XHRsZXQgY3JlYXRpb25Nb2RlOiBcImZpbGVcIiB8IFwiZm9sZGVyXCIgPSBcImZpbGVcIjtcblx0XHRsZXQgaW5kZXhGaWxlTmFtZSA9IFwiXCI7XG5cblx0XHQvLyBDaGVjayBhbGwgY29udGVudCB0eXBlcywgc29ydGVkIGJ5IHBhdHRlcm4gc3BlY2lmaWNpdHkgKG1vcmUgc3BlY2lmaWMgZmlyc3QpXG5cdFx0Y29uc3QgY29udGVudFR5cGVzID0gdGhpcy5zZXR0aW5ncy5jb250ZW50VHlwZXMgfHwgW107XG5cdFx0Y29uc3Qgc29ydGVkVHlwZXMgPSBzb3J0QnlQYXR0ZXJuU3BlY2lmaWNpdHkoY29udGVudFR5cGVzKTtcblx0XHRcblx0XHRmb3IgKGNvbnN0IGNvbnRlbnRUeXBlIG9mIHNvcnRlZFR5cGVzKSB7XG5cdFx0XHRpZiAoIWNvbnRlbnRUeXBlLmVuYWJsZWQpIGNvbnRpbnVlO1xuXHRcdFx0XG5cdFx0XHRsZXQgbWF0Y2hlcyA9IGZhbHNlO1xuXHRcdFx0XG5cdFx0XHQvLyBIYW5kbGUgYmxhbmsgZm9sZGVyIChyb290KSAtIG1hdGNoZXMgZmlsZXMgaW4gdmF1bHQgcm9vdCBvbmx5XG5cdFx0XHRpZiAoIWNvbnRlbnRUeXBlLmZvbGRlciB8fCBjb250ZW50VHlwZS5mb2xkZXIudHJpbSgpID09PSBcIlwiKSB7XG5cdFx0XHRcdGlmICghcGF0aC5pbmNsdWRlcyhcIi9cIikgfHwgcGF0aC5zcGxpdChcIi9cIikubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdFx0bWF0Y2hlcyA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAobWF0Y2hlc0ZvbGRlclBhdHRlcm4ocGF0aCwgY29udGVudFR5cGUuZm9sZGVyKSkge1xuXHRcdFx0XHRtYXRjaGVzID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKG1hdGNoZXMpIHtcblx0XHRcdFx0Y29udGVudEZvbGRlciA9IGNvbnRlbnRUeXBlLmZvbGRlciB8fCBcIlwiO1xuXHRcdFx0XHRiYXNlUGF0aCA9IGNvbnRlbnRUeXBlLmxpbmtCYXNlUGF0aCB8fCBcIlwiO1xuXHRcdFx0XHRjcmVhdGlvbk1vZGUgPSBjb250ZW50VHlwZS5jcmVhdGlvbk1vZGU7XG5cdFx0XHRcdGluZGV4RmlsZU5hbWUgPSBjb250ZW50VHlwZS5pbmRleEZpbGVOYW1lIHx8IFwiXCI7XG5cdFx0XHRcdGJyZWFrOyAvLyBNb3N0IHNwZWNpZmljIHBhdHRlcm4gd2luc1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFN0cmlwIGNvbnRlbnQgZm9sZGVyIGlmIHByZXNlbnRcblx0XHRpZiAoY29udGVudEZvbGRlcikge1xuXHRcdFx0cGF0aCA9IHBhdGguc2xpY2UoY29udGVudEZvbGRlci5sZW5ndGggKyAxKTtcblx0XHR9XG5cblx0XHRsZXQgYWRkVHJhaWxpbmdTbGFzaCA9IGZhbHNlO1xuXHRcdFxuXHRcdC8vIFNtYXJ0IGRldGVjdGlvbjogaWYgdGhlIGZpbGVuYW1lIG1hdGNoZXMgdGhlIGluZGV4IGZpbGUgbmFtZSAocmVnYXJkbGVzcyBvZiBjcmVhdGlvbiBtb2RlKSxcblx0XHQvLyB0cmVhdCBpdCBhcyBmb2xkZXItYmFzZWQgbG9naWNcblx0XHQvLyBOb3RlOiBXZSBvbmx5IHNldCBhZGRUcmFpbGluZ1NsYXNoIGhlcmU7IHRoZSBmaW5hbCBjaGVjayB3aWxsIHByZXZlbnQgaXQgaWYgdGhlcmUncyBhbiBhbmNob3Jcblx0XHRpZiAoaW5kZXhGaWxlTmFtZSAmJiBpbmRleEZpbGVOYW1lLnRyaW0oKSAhPT0gXCJcIikge1xuXHRcdFx0Y29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcvJyk7XG5cdFx0XHRpZiAocGFydHNbcGFydHMubGVuZ3RoIC0gMV0gPT09IGluZGV4RmlsZU5hbWUpIHtcblx0XHRcdFx0cGFydHMucG9wKCk7XG5cdFx0XHRcdHBhdGggPSBwYXJ0cy5qb2luKCcvJyk7XG5cdFx0XHRcdGFkZFRyYWlsaW5nU2xhc2ggPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoY3JlYXRpb25Nb2RlID09PSBcImZvbGRlclwiKSB7XG5cdFx0XHQvLyBGYWxsYmFjayB0byBvcmlnaW5hbCBsb2dpYyBpZiBubyBpbmRleCBmaWxlIG5hbWUgaXMgc3BlY2lmaWVkXG5cdFx0XHQvLyBEZWZhdWx0IHRvIFwiaW5kZXhcIiB3aGVuIGluZGV4RmlsZU5hbWUgaXMgYmxhbmtcblx0XHRcdGNvbnN0IGRlZmF1bHRJbmRleE5hbWUgPSBcImluZGV4XCI7XG5cdFx0XHRjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy8nKTtcblx0XHRcdGlmIChwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXSA9PT0gZGVmYXVsdEluZGV4TmFtZSkge1xuXHRcdFx0XHRwYXJ0cy5wb3AoKTtcblx0XHRcdFx0cGF0aCA9IHBhcnRzLmpvaW4oJy8nKTtcblx0XHRcdFx0YWRkVHJhaWxpbmdTbGFzaCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2x1Z1BhcnRzID0gcGF0aC5zcGxpdCgnLycpLm1hcChwYXJ0ID0+IHRoaXMudG9LZWJhYkNhc2UocGFydCkpO1xuXHRcdGNvbnN0IHNsdWcgPSBzbHVnUGFydHMuam9pbignLycpO1xuXG5cdFx0Ly8gRm9ybWF0IGJhc2UgcGF0aFxuXHRcdGlmIChiYXNlUGF0aCkge1xuXHRcdFx0aWYgKCFiYXNlUGF0aC5zdGFydHNXaXRoKFwiL1wiKSkgYmFzZVBhdGggPSBcIi9cIiArIGJhc2VQYXRoO1xuXHRcdFx0aWYgKCFiYXNlUGF0aC5lbmRzV2l0aChcIi9cIikpIGJhc2VQYXRoICs9IFwiL1wiO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBpZiB3ZSBzaG91bGQgYWRkIHRyYWlsaW5nIHNsYXNoXG5cdFx0Ly8gQ1JJVElDQUw6IE5ldmVyIGFkZCB0cmFpbGluZyBzbGFzaCBiZWZvcmUgYW4gYW5jaG9yIChlLmcuLCAvYWJvdXQjaGVhZGluZyBub3QgL2Fib3V0LyNoZWFkaW5nKVxuXHRcdC8vIFRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIGFuY2hvciBsaW5rcyBmcm9tIGNvcHkgaGVhZGluZyBVUkwgZnVuY3Rpb25hbGl0eVxuXHRcdC8vIEFuY2hvciBsaW5rcyBzaG91bGQgTkVWRVIgaGF2ZSB0cmFpbGluZyBzbGFzaGVzLCByZWdhcmRsZXNzIG9mIHNldHRpbmdzXG5cdFx0Y29uc3Qgc2hvdWxkQWRkVHJhaWxpbmdTbGFzaCA9ICh0aGlzLnNldHRpbmdzLmFkZFRyYWlsaW5nU2xhc2hUb0xpbmtzIHx8IGFkZFRyYWlsaW5nU2xhc2gpICYmICFhbmNob3I7XG5cblx0XHRyZXR1cm4gYCR7YmFzZVBhdGh9JHtzbHVnfSR7c2hvdWxkQWRkVHJhaWxpbmdTbGFzaCA/ICcvJyA6ICcnfSR7YW5jaG9yfWA7XG5cdH1cblxuXHQvKipcblx0ICogR2VuZXJhdGVzIGEgc3RhbmRhcmQgT2JzaWRpYW4gbGluayB0byBhIGhlYWRpbmcsIHJlc3BlY3RpbmcgdXNlcidzIGxpbmsgZm9ybWF0IHByZWZlcmVuY2Vcblx0ICovXG5cdGdlbmVyYXRlT2JzaWRpYW5MaW5rKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgaGVhZGluZzogSGVhZGluZ0NhY2hlKTogc3RyaW5nIHtcblx0XHRjb25zdCBoZWFkaW5nVGV4dCA9IGhlYWRpbmcuaGVhZGluZztcblx0XHRcblx0XHQvLyBDaGVjayBpZiB1c2VyIHByZWZlcnMgd2lraWxpbmtzIGJ5IHRlc3RpbmcgT2JzaWRpYW4ncyBkZWZhdWx0IGJlaGF2aW9yXG5cdFx0Y29uc3QgdGVzdExpbmsgPSBhcHAuZmlsZU1hbmFnZXIuZ2VuZXJhdGVNYXJrZG93bkxpbmsoZmlsZSwgJycsICcnKTtcblx0XHRpZiAodGVzdExpbmsuc3RhcnRzV2l0aCgnW1snKSkge1xuXHRcdFx0Ly8gVXNlciBwcmVmZXJzIHdpa2lsaW5rcyAtIHVzZSBqdXN0IHRoZSBmaWxlbmFtZSAoYmFzZW5hbWUpIHdpdGhvdXQgcGF0aFxuXHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBmaWxlLmJhc2VuYW1lO1xuXHRcdFx0cmV0dXJuIGBbWyR7ZmlsZU5hbWV9IyR7aGVhZGluZ1RleHR9fCR7aGVhZGluZ1RleHR9XV1gO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBVc2VyIHByZWZlcnMgbWFya2Rvd24gbGlua3MgLSB1c2UgT2JzaWRpYW4ncyBtZXRob2Qgd2l0aCBoZWFkaW5nIHRleHQgYXMtaXMgKFVSTC1lbmNvZGVkKVxuXHRcdFx0Ly8gR2V0IHRoZSBiYXNlIGxpbmsgZnJvbSBPYnNpZGlhbiAocmVzcGVjdHMgdXNlcidzIHBhdGggc2V0dGluZ3MpXG5cdFx0XHRjb25zdCBiYXNlTGluayA9IGFwcC5maWxlTWFuYWdlci5nZW5lcmF0ZU1hcmtkb3duTGluayhmaWxlLCAnJywgJycpO1xuXHRcdFx0Ly8gRXh0cmFjdCB0aGUgcGF0aCBwYXJ0IGFuZCBhZGQgb3VyIGFuY2hvciB3aXRoIHByb3BlciBkaXNwbGF5IHRleHRcblx0XHRcdGlmIChiYXNlTGluay5zdGFydHNXaXRoKCdbWycpKSB7XG5cdFx0XHRcdC8vIFRoaXMgc2hvdWxkbid0IGhhcHBlbiBzaW5jZSB3ZSdyZSBpbiB0aGUgbWFya2Rvd24gYnJhbmNoLCBidXQganVzdCBpbiBjYXNlXG5cdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gZmlsZS5iYXNlbmFtZTtcblx0XHRcdFx0cmV0dXJuIGBbWyR7ZmlsZU5hbWV9IyR7aGVhZGluZ1RleHR9fCR7aGVhZGluZ1RleHR9XV1gO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRXh0cmFjdCB0aGUgcGF0aCBmcm9tIHRoZSBnZW5lcmF0ZWQgbGluayBhbmQgcmVjb25zdHJ1Y3Qgd2l0aCBwcm9wZXIgZGlzcGxheSB0ZXh0XG5cdFx0XHRcdGNvbnN0IG1hdGNoID0gYmFzZUxpbmsubWF0Y2goL1xcWyhbXlxcXV0rKVxcXVxcKChbXildKylcXCkvKTtcblx0XHRcdFx0aWYgKG1hdGNoKSB7XG5cdFx0XHRcdFx0Y29uc3QgWywgLCBwYXRoXSA9IG1hdGNoO1xuXHRcdFx0XHRcdC8vIEZvciBPYnNpZGlhbiwgdXNlIHRoZSBoZWFkaW5nIHRleHQgYXMtaXMgKFVSTC1lbmNvZGVkKSwgbm90IGtlYmFiLWNhc2Vcblx0XHRcdFx0XHRyZXR1cm4gYFske2hlYWRpbmdUZXh0fV0oJHtwYXRofSMke2VuY29kZVVSSUNvbXBvbmVudChoZWFkaW5nVGV4dCl9KWA7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gbWFudWFsIGNvbnN0cnVjdGlvblxuXHRcdFx0XHRcdGNvbnN0IGVuY29kZWRGaWxlbmFtZSA9IGVuY29kZVVSSUNvbXBvbmVudChmaWxlLm5hbWUpO1xuXHRcdFx0XHRcdC8vIEZvciBPYnNpZGlhbiwgdXNlIHRoZSBoZWFkaW5nIHRleHQgYXMtaXMgKFVSTC1lbmNvZGVkKVxuXHRcdFx0XHRcdHJldHVybiBgWyR7aGVhZGluZ1RleHR9XSgke2VuY29kZWRGaWxlbmFtZX0jJHtlbmNvZGVVUklDb21wb25lbnQoaGVhZGluZ1RleHQpfSlgO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEdlbmVyYXRlcyBhIHN0YW5kYXJkIE9ic2lkaWFuIHdpa2lsaW5rIHRvIGEgaGVhZGluZ1xuXHQgKi9cblx0Z2VuZXJhdGVPYnNpZGlhbldpa2lsaW5rKGZpbGU6IFRGaWxlLCBoZWFkaW5nOiBIZWFkaW5nQ2FjaGUpOiBzdHJpbmcge1xuXHRcdGNvbnN0IGhlYWRpbmdUZXh0ID0gaGVhZGluZy5oZWFkaW5nO1xuXHRcdC8vIFVzZSBqdXN0IHRoZSBmaWxlbmFtZSAoYmFzZW5hbWUpLCBub3QgdGhlIGZ1bGwgcGF0aFxuXHRcdGNvbnN0IGZpbGVOYW1lID0gZmlsZS5iYXNlbmFtZTtcblx0XHRyZXR1cm4gYFtbJHtmaWxlTmFtZX0jJHtoZWFkaW5nVGV4dH18JHtoZWFkaW5nVGV4dH1dXWA7XG5cdH1cblxuXHQvKipcblx0ICogR2VuZXJhdGVzIGFuIEFzdHJvLWNvbXBhdGlibGUgbWFya2Rvd24gbGluayB0byBhIGhlYWRpbmdcblx0ICovXG5cdGdlbmVyYXRlQXN0cm9MaW5rKGZpbGU6IFRGaWxlLCBoZWFkaW5nOiBIZWFkaW5nQ2FjaGUpOiBzdHJpbmcge1xuXHRcdGNvbnN0IGhlYWRpbmdUZXh0ID0gaGVhZGluZy5oZWFkaW5nO1xuXHRcdGNvbnN0IGFuY2hvciA9IHRoaXMudG9LZWJhYkNhc2UoaGVhZGluZ1RleHQpO1xuXHRcdC8vIFVzZSB0aGUgc2FtZSBsb2dpYyBhcyB0aGUgZXhpc3RpbmcgbGluayBjb252ZXJ0ZXJcblx0XHRjb25zdCBpbnRlcm5hbExpbmsgPSBgJHtmaWxlLnBhdGh9IyR7YW5jaG9yfWA7XG5cdFx0Y29uc3QgYXN0cm9VcmwgPSB0aGlzLmdldEFzdHJvVXJsRnJvbUludGVybmFsTGluayhpbnRlcm5hbExpbmspO1xuXHRcdHJldHVybiBgWyR7aGVhZGluZ1RleHR9XSgke2FzdHJvVXJsfSlgO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdlbmVyYXRlcyBhbiBBc3Ryby1jb21wYXRpYmxlIHdpa2lsaW5rIHRvIGEgaGVhZGluZ1xuXHQgKi9cblx0Z2VuZXJhdGVBc3Ryb1dpa2lsaW5rKGZpbGU6IFRGaWxlLCBoZWFkaW5nOiBIZWFkaW5nQ2FjaGUpOiBzdHJpbmcge1xuXHRcdGNvbnN0IGhlYWRpbmdUZXh0ID0gaGVhZGluZy5oZWFkaW5nO1xuXHRcdGNvbnN0IGFuY2hvciA9IHRoaXMudG9LZWJhYkNhc2UoaGVhZGluZ1RleHQpO1xuXHRcdC8vIFVzZSB0aGUgc2FtZSBsb2dpYyBhcyB0aGUgZXhpc3RpbmcgbGluayBjb252ZXJ0ZXJcblx0XHRjb25zdCBpbnRlcm5hbExpbmsgPSBgJHtmaWxlLnBhdGh9IyR7YW5jaG9yfWA7XG5cdFx0Y29uc3QgYXN0cm9VcmwgPSB0aGlzLmdldEFzdHJvVXJsRnJvbUludGVybmFsTGluayhpbnRlcm5hbExpbmspO1xuXHRcdC8vIENyZWF0ZSBhIHdpa2lsaW5rIHdpdGggdGhlIEFzdHJvIFVSTCBhcyB0aGUgdGFyZ2V0XG5cdFx0cmV0dXJuIGBbWyR7aGVhZGluZ1RleHR9fCR7YXN0cm9Vcmx9XV1gO1xuXHR9XG5cblx0LyoqXG5cdCAqIEV4dHJhY3RzIHRoZSBVUkwgZnJvbSBhIG1hcmtkb3duIGxpbmsgb3Igd2lraWxpbmtcblx0ICovXG5cdGV4dHJhY3RVcmwobGluazogc3RyaW5nKTogc3RyaW5nIHtcblx0XHQvLyBIYW5kbGUgbWFya2Rvd24gbGlua3M6IFt0ZXh0XSh1cmwpXG5cdFx0Y29uc3QgbWFya2Rvd25NYXRjaCA9IGxpbmsubWF0Y2goL1xcWyhbXlxcXV0rKVxcXVxcKChbXildKylcXCkvKTtcblx0XHRpZiAobWFya2Rvd25NYXRjaCkge1xuXHRcdFx0cmV0dXJuIG1hcmtkb3duTWF0Y2hbMl07XG5cdFx0fVxuXHRcdFxuXHRcdC8vIEhhbmRsZSB3aWtpbGlua3M6IFtbcGF0aCNoZWFkaW5nfHRleHRdXSBvciBbW3BhdGgjaGVhZGluZ11dXG5cdFx0Y29uc3Qgd2lraWxpbmtNYXRjaCA9IGxpbmsubWF0Y2goL1xcW1xcWyhbXlxcXV0rKVxcXVxcXS8pO1xuXHRcdGlmICh3aWtpbGlua01hdGNoKSB7XG5cdFx0XHRjb25zdCBjb250ZW50ID0gd2lraWxpbmtNYXRjaFsxXTtcblx0XHRcdC8vIEV4dHJhY3QgdGhlIHBhdGggcGFydCAoYmVmb3JlIHwgaWYgcHJlc2VudClcblx0XHRcdGNvbnN0IHBhdGhQYXJ0ID0gY29udGVudC5zcGxpdCgnfCcpWzBdO1xuXHRcdFx0cmV0dXJuIHBhdGhQYXJ0O1xuXHRcdH1cblx0XHRcblx0XHQvLyBJZiBpdCBkb2Vzbid0IG1hdGNoIGVpdGhlciBmb3JtYXQsIHJldHVybiBhcy1pcyAobWlnaHQgYWxyZWFkeSBiZSBhIFVSTClcblx0XHRyZXR1cm4gbGluaztcblx0fVxuXG5cdC8qKlxuXHQgKiBHZW5lcmF0ZXMgdGhlIGFwcHJvcHJpYXRlIGxpbmsgZm9ybWF0IGJhc2VkIG9uIHNldHRpbmdzXG5cdCAqL1xuXHRnZW5lcmF0ZUxpbmsoYXBwOiBBcHAsIGZpbGU6IFRGaWxlLCBoZWFkaW5nOiBIZWFkaW5nQ2FjaGUpOiBzdHJpbmcge1xuXHRcdGlmICh0aGlzLnNldHRpbmdzLmNvcHlIZWFkaW5nTGlua0Zvcm1hdCA9PT0gXCJhc3Ryb1wiKSB7XG5cdFx0XHQvLyBBc3RybyBmb3JtYXQgYWx3YXlzIHVzZXMgbWFya2Rvd24gbGlua3MgKHdpa2lsaW5rcyB3aXRoIEFzdHJvIFVSTHMgZG9uJ3QgbWFrZSBzZW5zZSlcblx0XHRcdHJldHVybiB0aGlzLmdlbmVyYXRlQXN0cm9MaW5rKGZpbGUsIGhlYWRpbmcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBVc2UgT2JzaWRpYW4ncyBidWlsdC1pbiBtZXRob2Qgd2hpY2ggcmVzcGVjdHMgdXNlciBzZXR0aW5nc1xuXHRcdFx0cmV0dXJuIHRoaXMuZ2VuZXJhdGVPYnNpZGlhbkxpbmsoYXBwLCBmaWxlLCBoZWFkaW5nKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogRmluZHMgdGhlIGhlYWRpbmcgYXQgYSBzcGVjaWZpYyBsaW5lIGluIGEgZmlsZVxuXHQgKi9cblx0ZmluZEhlYWRpbmdBdExpbmUoYXBwOiBBcHAsIGZpbGU6IFRGaWxlLCBsaW5lOiBudW1iZXIpOiBIZWFkaW5nQ2FjaGUgfCBudWxsIHtcblx0XHRjb25zdCBjYWNoZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcblx0XHRpZiAoIWNhY2hlIHx8ICFjYWNoZS5oZWFkaW5ncykge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gRmluZCB0aGUgaGVhZGluZyB0aGF0IGNvbnRhaW5zIHRoaXMgbGluZVxuXHRcdGZvciAobGV0IGkgPSBjYWNoZS5oZWFkaW5ncy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0Y29uc3QgaGVhZGluZyA9IGNhY2hlLmhlYWRpbmdzW2ldO1xuXHRcdFx0aWYgKGhlYWRpbmcucG9zaXRpb24uc3RhcnQubGluZSA8PSBsaW5lKSB7XG5cdFx0XHRcdHJldHVybiBoZWFkaW5nO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxvQkFPTzs7O0FDZ0ZBLElBQU0sbUJBQW1CLENBQUMsUUFB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LENBQUMsS0FBSyxTQUFTO0FBR3JGLFVBQU0sWUFBWSxZQUFZLGlCQUFpQixZQUFZO0FBQzNELGVBQVcsUUFBUSxNQUFNLEtBQUssU0FBUyxHQUFHO0FBRXpDLFlBQU0sTUFBTSxLQUFLLGNBQWMsS0FBSztBQUNwQyxVQUFJLEtBQUs7QUFDUixjQUFNLFdBQVcsSUFBSSxhQUFhLGFBQWEsS0FDOUMsSUFBSSxhQUFhLGNBQWMsTUFDOUIsSUFBSSxVQUFVLFNBQVMsd0JBQXdCLElBQUksb0JBQW9CLFVBQ3ZFLElBQUksVUFBVSxTQUFTLGVBQWUsSUFBSSxXQUFXO0FBR3ZELFlBQUksMEJBQTBCLGFBQWEsbUJBQW1CO0FBQzdELGdCQUFNLGFBQVcsVUFBSyxnQkFBTCxtQkFBa0Isa0JBQWlCO0FBQ3BELGNBQUksU0FBUyxTQUFTLFVBQVUsS0FBSyxTQUFTLFNBQVMsa0JBQWtCLEdBQUc7QUFDM0UsaUJBQUssT0FBTztBQUFBLFVBQ2I7QUFBQSxRQUNEO0FBR0EsWUFBSSx3QkFBd0IsYUFBYSxVQUFVO0FBQ2xELGdCQUFNLGFBQVcsVUFBSyxnQkFBTCxtQkFBa0Isa0JBQWlCO0FBQ3BELGNBQUksU0FBUyxTQUFTLFFBQVEsS0FBSyxTQUFTLFNBQVMsY0FBYyxHQUFHO0FBQ3JFLGlCQUFLLE9BQU87QUFBQSxVQUNiO0FBQUEsUUFDRDtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUNEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgIm5ld0ZpbGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiY29udGVudFR5cGUiLCAiX2EiLCAiaGFzTWF0Y2hpbmdDb250ZW50VHlwZSIsICJzZXR0aW5ncyIsICJwbHVnaW5JbnRlcmZhY2UiLCAiZmlsZSIsICJ0eXBlIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAidG9nZ2xlIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJ2YXVsdEFjdGlvbnMiXQp9Cg==
