/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/utils/mdx-frontmatter.ts
function isMdxFile(file) {
  return file.extension === "mdx";
}
function parseMdxFrontmatter(content) {
  const frontmatterRegex = /^---\n([\s\S]*?)\n---\n/;
  const match = content.match(frontmatterRegex);
  if (!match) {
    return {
      frontmatter: {},
      body: content
    };
  }
  const frontmatterText = match[1];
  const bodyContent = content.slice(match[0].length);
  try {
    const parsed = (0, import_obsidian5.parseYaml)(frontmatterText);
    const frontmatter = parsed && typeof parsed === "object" ? parsed : {};
    return {
      frontmatter,
      body: bodyContent
    };
  } catch (e) {
    console.error("Error parsing MDX frontmatter:", e);
    return {
      frontmatter: {},
      body: bodyContent
    };
  }
}
async function readMdxFrontmatter(app, file) {
  if (!isMdxFile(file)) {
    return null;
  }
  try {
    const content = await app.vault.read(file);
    const parsed = parseMdxFrontmatter(content);
    return parsed ? parsed.frontmatter : null;
  } catch (e) {
    console.error(`Error reading MDX frontmatter from ${file.path}:`, e);
    return null;
  }
}
async function processMdxFrontMatter(app, file, callback) {
  if (!isMdxFile(file)) {
    throw new Error(`File ${file.path} is not an MDX file`);
  }
  try {
    const content = await app.vault.read(file);
    const parsed = parseMdxFrontmatter(content);
    if (!parsed) {
      throw new Error("Failed to parse existing frontmatter");
    }
    const frontmatter = { ...parsed.frontmatter };
    callback(frontmatter);
    const newFrontmatterText = (0, import_obsidian5.stringifyYaml)(frontmatter).trim();
    const newContent = `---
${newFrontmatterText}
---
${parsed.body}`;
    await app.vault.modify(file, newContent);
  } catch (e) {
    console.error(`Error processing MDX frontmatter for ${file.path}:`, e);
    throw e;
  }
}
var import_obsidian5;
var init_mdx_frontmatter = __esm({
  "src/utils/mdx-frontmatter.ts"() {
    "use strict";
    import_obsidian5 = require("obsidian");
  }
});

// src/utils/frontmatter-helper.ts
async function getFileFrontmatter(app, file) {
  if (isMdxFile(file)) {
    return await readMdxFrontmatter(app, file);
  } else {
    const metadata = app.metadataCache.getFileCache(file);
    return (metadata == null ? void 0 : metadata.frontmatter) || null;
  }
}
async function processFileFrontMatter(app, file, callback) {
  if (isMdxFile(file)) {
    await processMdxFrontMatter(app, file, callback);
  } else {
    await app.fileManager.processFrontMatter(file, callback);
  }
}
var init_frontmatter_helper = __esm({
  "src/utils/frontmatter-helper.ts"() {
    "use strict";
    init_mdx_frontmatter();
  }
});

// src/shared/settings-schema.ts
var settings_schema_exports = {};
__export(settings_schema_exports, {
  getCMSViewOptions: () => getCMSViewOptions,
  readCMSSettings: () => readCMSSettings
});
function readCMSSettings(config, pluginSettings) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u;
  const getConfig = (key) => {
    var _a2;
    return (_a2 = config == null ? void 0 : config.get) == null ? void 0 : _a2.call(config, key);
  };
  return {
    titleProperty: getConfig("titleProperty") || "",
    descriptionProperty: getConfig("descriptionProperty") || "",
    imageProperty: getConfig("imageProperty") || "",
    showTitle: true,
    // Always show title, defaulting to file name if no property set
    showDate: (_a = getConfig("showDate")) != null ? _a : false,
    dateProperty: getConfig("dateProperty") || "",
    dateIncludeTime: (_b = getConfig("dateIncludeTime")) != null ? _b : false,
    showTextPreview: (_c = getConfig("showTextPreview")) != null ? _c : true,
    fallbackToContent: (_d = getConfig("fallbackToContent")) != null ? _d : true,
    truncatePreviewProperty: (_e = getConfig("truncatePreviewProperty")) != null ? _e : false,
    fallbackToEmbeds: (() => {
      const value = getConfig("fallbackToEmbeds");
      if (value === "always" || value === "if-empty" || value === "never") {
        return value;
      }
      return value === false ? "never" : "if-empty";
    })(),
    propertyDisplay1: getConfig("propertyDisplay1") || "",
    propertyDisplay2: getConfig("propertyDisplay2") || "",
    propertyDisplay3: getConfig("propertyDisplay3") || "",
    propertyDisplay4: getConfig("propertyDisplay4") || "",
    propertyDisplay5: getConfig("propertyDisplay5") || "",
    propertyDisplay6: getConfig("propertyDisplay6") || "",
    propertyDisplay7: getConfig("propertyDisplay7") || "",
    propertyDisplay8: getConfig("propertyDisplay8") || "",
    propertyDisplay9: getConfig("propertyDisplay9") || "",
    propertyDisplay10: getConfig("propertyDisplay10") || "",
    propertyDisplay11: getConfig("propertyDisplay11") || "",
    propertyDisplay12: getConfig("propertyDisplay12") || "",
    propertyDisplay13: getConfig("propertyDisplay13") || "",
    propertyDisplay14: getConfig("propertyDisplay14") || "",
    propertyLayout12SideBySide: (_f = getConfig("propertyLayout12SideBySide")) != null ? _f : false,
    propertyLayout34SideBySide: (_g = getConfig("propertyLayout34SideBySide")) != null ? _g : false,
    propertyLayout56SideBySide: (_h = getConfig("propertyLayout56SideBySide")) != null ? _h : false,
    propertyLayout78SideBySide: (_i = getConfig("propertyLayout78SideBySide")) != null ? _i : false,
    propertyLayout910SideBySide: (_j = getConfig("propertyLayout910SideBySide")) != null ? _j : false,
    propertyLayout1112SideBySide: (_k = getConfig("propertyLayout1112SideBySide")) != null ? _k : false,
    propertyLayout1314SideBySide: (_l = getConfig("propertyLayout1314SideBySide")) != null ? _l : false,
    propertyGroup1Position: getConfig("propertyGroup1Position") || "bottom",
    propertyGroup2Position: getConfig("propertyGroup2Position") || "bottom",
    propertyGroup3Position: getConfig("propertyGroup3Position") || "bottom",
    propertyGroup4Position: getConfig("propertyGroup4Position") || "bottom",
    propertyGroup5Position: getConfig("propertyGroup5Position") || "bottom",
    propertyGroup6Position: getConfig("propertyGroup6Position") || "bottom",
    propertyGroup7Position: getConfig("propertyGroup7Position") || "bottom",
    imageFormat: getConfig("imageFormat") || "thumbnail",
    imagePosition: getConfig("imagePosition") || "right",
    propertyLabels: getConfig("propertyLabels") || "hide",
    showDraftStatus: (_m = getConfig("showDraftStatus")) != null ? _m : false,
    draftStatusProperty: getConfig("draftStatusProperty") || "",
    draftStatusReverse: (_n = getConfig("draftStatusReverse")) != null ? _n : false,
    draftStatusUseFilenamePrefix: (_o = getConfig("draftStatusUseFilenamePrefix")) != null ? _o : false,
    showTags: (_p = getConfig("showTags")) != null ? _p : false,
    tagsProperty: getConfig("tagsProperty") || "",
    maxTagsToShow: (_q = getConfig("maxTagsToShow")) != null ? _q : 3,
    customizeNewButton: (_r = getConfig("customizeNewButton")) != null ? _r : false,
    newNoteLocation: getConfig("newNoteLocation") || "",
    hideQuickEditIcon: (_s = getConfig("hideQuickEditIcon")) != null ? _s : false,
    cardSize: (_t = getConfig("cardSize")) != null ? _t : 250,
    imageAspectRatio: (_u = getConfig("imageAspectRatio")) != null ? _u : 0.55
  };
}
function getCMSViewOptions() {
  return [
    // Card size (standalone)
    {
      type: "slider",
      displayName: "Card size",
      key: "cardSize",
      min: 50,
      max: 800,
      step: 10,
      default: 250
    },
    // Title group
    {
      type: "group",
      displayName: "Title",
      items: [
        {
          type: "property",
          displayName: "Title property",
          key: "titleProperty",
          placeholder: "Select property",
          default: ""
        }
      ]
    },
    // Text preview group
    {
      type: "group",
      displayName: "Text preview",
      items: [
        {
          type: "toggle",
          displayName: "Show text preview",
          key: "showTextPreview",
          default: true
        },
        {
          type: "property",
          displayName: "Text preview property",
          key: "descriptionProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Use note content if text preview property unavailable",
          key: "fallbackToContent",
          default: true
        },
        {
          type: "toggle",
          displayName: "Truncate preview property",
          key: "truncatePreviewProperty",
          default: false
        }
      ]
    },
    // Image group
    {
      type: "group",
      displayName: "Image",
      items: [
        {
          type: "dropdown",
          displayName: "Image format",
          key: "imageFormat",
          options: {
            "none": "No image",
            "thumbnail": "Thumbnail",
            "cover": "Cover"
          },
          default: "thumbnail"
        },
        {
          type: "property",
          displayName: "Image property",
          key: "imageProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "dropdown",
          displayName: "Show image embeds",
          key: "fallbackToEmbeds",
          options: {
            "always": "Always",
            "if-empty": "If image property missing or empty",
            "never": "Never"
          },
          default: "if-empty"
        },
        {
          type: "slider",
          displayName: "Image aspect ratio",
          key: "imageAspectRatio",
          min: 0.1,
          max: 2,
          step: 0.05,
          default: 0.55,
          showWhen: {
            key: "imageFormat",
            value: "cover"
          }
        }
      ]
    },
    // Date group
    {
      type: "group",
      displayName: "Date",
      items: [
        {
          type: "toggle",
          displayName: "Show date",
          key: "showDate",
          default: false
        },
        {
          type: "property",
          displayName: "Date property",
          key: "dateProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Include time",
          description: "When enabled, displays both date and time using your system locale settings",
          key: "dateIncludeTime",
          default: false
        }
      ]
    },
    // Draft status group
    {
      type: "group",
      displayName: "Draft status",
      items: [
        {
          type: "toggle",
          displayName: "Show draft status",
          key: "showDraftStatus",
          default: false
        },
        {
          type: "property",
          displayName: "Draft status property",
          key: "draftStatusProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Reverse logic",
          key: "draftStatusReverse",
          default: false
        },
        {
          type: "toggle",
          displayName: "Filename underscore prefix as draft indicator",
          key: "draftStatusUseFilenamePrefix",
          default: false
        }
      ]
    },
    // Tags group
    {
      type: "group",
      displayName: "Tags",
      items: [
        {
          type: "toggle",
          displayName: "Show tags",
          key: "showTags",
          default: false
        },
        {
          type: "property",
          displayName: "Tags property",
          key: "tagsProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "slider",
          displayName: "Maximum tags to show",
          key: "maxTagsToShow",
          min: 1,
          max: 50,
          step: 1,
          default: 3,
          showWhen: {
            key: "showTags",
            value: true
          }
        }
      ]
    },
    // Properties group
    {
      type: "group",
      displayName: "Properties",
      items: [
        {
          type: "dropdown",
          displayName: "Show property labels",
          key: "propertyLabels",
          options: {
            "hide": "Hide",
            "inline": "Inline",
            "above": "On top"
          },
          default: "hide"
        }
      ]
    },
    // Property group 1
    {
      type: "group",
      displayName: "Property group 1",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay1",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay2",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout12SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup1Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 2
    {
      type: "group",
      displayName: "Property group 2",
      items: [
        {
          type: "property",
          displayName: "Third property",
          key: "propertyDisplay3",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Fourth property",
          key: "propertyDisplay4",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout34SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup2Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 3
    {
      type: "group",
      displayName: "Property group 3",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay5",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay6",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout56SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup3Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 4
    {
      type: "group",
      displayName: "Property group 4",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay7",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay8",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout78SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup4Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 5
    {
      type: "group",
      displayName: "Property group 5",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay9",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay10",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout910SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup5Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 6
    {
      type: "group",
      displayName: "Property group 6",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay11",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay12",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout1112SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup6Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 7
    {
      type: "group",
      displayName: "Property group 7",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay13",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay14",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout1314SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup7Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Behavior group
    {
      type: "group",
      displayName: "Behavior",
      items: [
        {
          type: "toggle",
          displayName: "Open new notes directly",
          description: "Skip the Bases modal and create notes directly (like the file explorer). When disabled, uses normal Bases behavior with the property popup.",
          key: "customizeNewButton",
          default: false
        },
        {
          type: "text",
          displayName: "Location for new notes",
          description: 'Folder path where new notes will be created. Use / for vault root, or specify a folder path. Works independently of "Open new notes directly".',
          key: "newNoteLocation",
          placeholder: "Simply use / for vault folder",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Hide quick edit icon",
          key: "hideQuickEditIcon",
          default: false
        }
      ]
    }
  ];
}
var init_settings_schema = __esm({
  "src/shared/settings-schema.ts"() {
    "use strict";
  }
});

// src/utils/attachment-detection.ts
async function getAttachmentsInNote(app, file) {
  var _a;
  const attachments = [];
  const content = app.vault.getAbstractFileByPath(file.path);
  if (content instanceof import_obsidian17.TFile) {
    if (file.extension === "md") {
      const metadata = app.metadataCache.getFileCache(content);
      const embeds = (metadata == null ? void 0 : metadata.embeds) || [];
      for (const embed of embeds) {
        const embedFile = app.metadataCache.getFirstLinkpathDest(embed.link, file.path);
        if (embedFile instanceof import_obsidian17.TFile) {
          attachments.push(embedFile);
        }
      }
    }
    const frontmatter = await getFileFrontmatter(app, file);
    if (frontmatter) {
      const imagePropertyNames = ["image", "imageOG", "cover", "thumbnail"];
      const validImageExtensions = ["avif", "bmp", "gif", "jpeg", "jpg", "png", "svg", "webp"];
      for (const propName of imagePropertyNames) {
        const propValue = frontmatter[propName];
        if (!propValue) continue;
        const imagePaths = Array.isArray(propValue) ? propValue : [propValue];
        for (const imagePath of imagePaths) {
          if (typeof imagePath !== "string") continue;
          const cleanPath = imagePath.replace(/^!?\[\[([^\]]+)\]\]$/, "$1").trim();
          if (!cleanPath) continue;
          if (cleanPath.startsWith("http://") || cleanPath.startsWith("https://")) {
            continue;
          }
          let imageFile = app.metadataCache.getFirstLinkpathDest(cleanPath, file.path);
          if (!imageFile && cleanPath.startsWith("./")) {
            const relativePath = cleanPath.substring(2);
            const fullPath = ((_a = file.parent) == null ? void 0 : _a.path) ? `${file.parent.path}/${relativePath}` : relativePath;
            const resolvedFile = app.vault.getAbstractFileByPath(fullPath);
            if (resolvedFile instanceof import_obsidian17.TFile) {
              imageFile = resolvedFile;
            }
          }
          if (!imageFile) {
            const absoluteFile = app.vault.getAbstractFileByPath(cleanPath);
            if (absoluteFile instanceof import_obsidian17.TFile) {
              imageFile = absoluteFile;
            }
          }
          if (imageFile && validImageExtensions.includes(imageFile.extension)) {
            attachments.push(imageFile);
          }
        }
      }
    }
  }
  return attachments;
}
async function getAttachmentsInFolder(app, folder) {
  const attachments = [];
  for (const child of folder.children) {
    if (child instanceof import_obsidian17.TFile && (child.extension === "md" || child.extension === "mdx")) {
      attachments.push(...await getAttachmentsInNote(app, child));
    } else if (child instanceof import_obsidian17.TFolder) {
      attachments.push(...await getAttachmentsInFolder(app, child));
    }
  }
  return attachments;
}
async function isAttachmentUsedInOtherNotes(app, attachment, excludedNote, excludedFolder) {
  const allNotes = app.vault.getMarkdownFiles().filter(
    (file) => file.path !== excludedNote.path
  );
  const attachmentPath = attachment.path;
  const attachmentName = attachment.name;
  const attachmentBasename = attachment.basename;
  for (const note of allNotes) {
    if (excludedFolder && note.path.startsWith(excludedFolder.path + "/")) {
      continue;
    }
    const content = await app.vault.read(note);
    if (content.includes(attachmentPath) || content.includes(attachmentName) || content.includes(attachmentBasename) || content.includes(`![[${attachmentName}]]`) || content.includes(`[[${attachmentName}]]`) || content.includes(`(${attachmentName})`) || content.includes(`(${attachmentPath})`)) {
      return true;
    }
  }
  return false;
}
async function findUniqueAttachments(app, deletedNote, deletedFolder) {
  const attachments = [];
  attachments.push(...await getAttachmentsInNote(app, deletedNote));
  if (deletedFolder) {
    attachments.push(...await getAttachmentsInFolder(app, deletedFolder));
  }
  const uniqueAttachments = Array.from(new Set(attachments.map((a) => a.path))).map((path) => app.vault.getAbstractFileByPath(path)).filter((file) => file instanceof import_obsidian17.TFile);
  const result = [];
  for (const attachment of uniqueAttachments) {
    const isUsedElsewhere = await isAttachmentUsedInOtherNotes(
      app,
      attachment,
      deletedNote,
      deletedFolder
    );
    if (!isUsedElsewhere) {
      result.push(attachment);
    }
  }
  return result;
}
var import_obsidian17;
var init_attachment_detection = __esm({
  "src/utils/attachment-detection.ts"() {
    "use strict";
    import_obsidian17 = require("obsidian");
    init_frontmatter_helper();
  }
});

// src/utils/smart-deletion.ts
var smart_deletion_exports = {};
__export(smart_deletion_exports, {
  executeSmartDeletion: () => executeSmartDeletion,
  isFolderBasedContent: () => isFolderBasedContent,
  prepareDeletionPreview: () => prepareDeletionPreview,
  shouldDeleteParentFolder: () => shouldDeleteParentFolder
});
function isFolderBasedContent(file, config) {
  const configuredFilename = config.deleteParentFolderFilename || "index";
  return file.basename === configuredFilename && file.parent !== null;
}
function shouldDeleteParentFolder(file, config) {
  return config.deleteParentFolder && isFolderBasedContent(file, config);
}
async function prepareDeletionPreview(app, files, config) {
  const filesToDelete = [];
  const foldersToDelete = [];
  const attachmentsToDelete = [];
  for (const filePath of files) {
    const file = app.vault.getAbstractFileByPath(filePath);
    if (!(file instanceof import_obsidian18.TFile)) continue;
    if (shouldDeleteParentFolder(file, config)) {
      const parentFolder = file.parent;
      if (parentFolder && !foldersToDelete.includes(parentFolder)) {
        foldersToDelete.push(parentFolder);
        const folderFiles = parentFolder.children.filter(
          (child) => child instanceof import_obsidian18.TFile
        );
        filesToDelete.push(...folderFiles);
      }
    } else {
      filesToDelete.push(file);
    }
    if (config.deleteUniqueAttachments) {
      const parentFolder = shouldDeleteParentFolder(file, config) ? file.parent || void 0 : void 0;
      const uniqueAttachments2 = await findUniqueAttachments(
        app,
        file,
        parentFolder
      );
      attachmentsToDelete.push(...uniqueAttachments2);
    }
  }
  const uniqueFiles = Array.from(new Set(filesToDelete.map((f) => f.path))).map((path) => app.vault.getAbstractFileByPath(path)).filter((file) => file instanceof import_obsidian18.TFile);
  const uniqueAttachments = Array.from(new Set(attachmentsToDelete.map((a) => a.path))).map((path) => app.vault.getAbstractFileByPath(path)).filter((file) => file instanceof import_obsidian18.TFile);
  return {
    filesToDelete: uniqueFiles,
    foldersToDelete: Array.from(new Set(foldersToDelete)),
    attachmentsToDelete: uniqueAttachments
  };
}
async function executeSmartDeletion(app, preview) {
  let deletedCount = 0;
  let errorCount = 0;
  for (const file of preview.filesToDelete) {
    try {
      await app.fileManager.trashFile(file);
      deletedCount++;
    } catch (error) {
      console.error(`Error deleting file ${file.path}:`, error);
      errorCount++;
    }
  }
  for (const attachment of preview.attachmentsToDelete) {
    try {
      await app.fileManager.trashFile(attachment);
      deletedCount++;
    } catch (error) {
      console.error(`Error deleting attachment ${attachment.path}:`, error);
      errorCount++;
    }
  }
  for (const folder of preview.foldersToDelete) {
    try {
      await app.fileManager.trashFile(folder);
      deletedCount++;
    } catch (error) {
      console.error(`Error deleting folder ${folder.path}:`, error);
      errorCount++;
    }
  }
  if (errorCount > 0) {
    new import_obsidian18.Notice(`Deleted ${deletedCount} items, ${errorCount} errors occurred`);
  } else {
    new import_obsidian18.Notice(`Successfully deleted ${deletedCount} item${deletedCount !== 1 ? "s" : ""}`);
  }
}
var import_obsidian18;
var init_smart_deletion = __esm({
  "src/utils/smart-deletion.ts"() {
    "use strict";
    import_obsidian18 = require("obsidian");
    init_attachment_detection();
  }
});

// src/components/deletion-preview.ts
var deletion_preview_exports = {};
__export(deletion_preview_exports, {
  DeletionPreviewModal: () => DeletionPreviewModal
});
var import_obsidian19, DeletionPreviewModal;
var init_deletion_preview = __esm({
  "src/components/deletion-preview.ts"() {
    "use strict";
    import_obsidian19 = require("obsidian");
    init_smart_deletion();
    DeletionPreviewModal = class extends import_obsidian19.Modal {
      constructor(app, preview, onConfirm) {
        super(app);
        this.preview = preview;
        this.onConfirm = onConfirm;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.empty();
        new import_obsidian19.Setting(contentEl).setName("Confirm deletion").setHeading();
        contentEl.createEl("p", {
          text: "The following items will be deleted:",
          cls: "bases-cms-deletion-warning"
        });
        if (this.preview.filesToDelete.length > 0) {
          contentEl.createEl("h3", { text: `Files (${this.preview.filesToDelete.length})` });
          const filesList = contentEl.createEl("ul", { cls: "bases-cms-deletion-list" });
          for (const file of this.preview.filesToDelete.slice(0, 20)) {
            const li = filesList.createEl("li");
            li.setText(file.path);
          }
          if (this.preview.filesToDelete.length > 20) {
            filesList.createEl("li", {
              text: `... and ${this.preview.filesToDelete.length - 20} more files`
            });
          }
        }
        if (this.preview.foldersToDelete.length > 0) {
          contentEl.createEl("h3", { text: `Folders (${this.preview.foldersToDelete.length})` });
          const foldersList = contentEl.createEl("ul", { cls: "bases-cms-deletion-list" });
          for (const folder of this.preview.foldersToDelete) {
            const li = foldersList.createEl("li");
            li.setText(folder.path);
          }
        }
        if (this.preview.attachmentsToDelete.length > 0) {
          contentEl.createEl("h3", { text: `Attachments (${this.preview.attachmentsToDelete.length})` });
          const attachmentsList = contentEl.createEl("ul", { cls: "bases-cms-deletion-list" });
          for (const attachment of this.preview.attachmentsToDelete.slice(0, 20)) {
            const li = attachmentsList.createEl("li");
            li.setText(attachment.path);
          }
          if (this.preview.attachmentsToDelete.length > 20) {
            attachmentsList.createEl("li", {
              text: `... and ${this.preview.attachmentsToDelete.length - 20} more attachments`
            });
          }
        }
        contentEl.createEl("p", {
          text: "This action cannot be undone.",
          cls: "bases-cms-deletion-warning"
        });
        const buttonContainer = contentEl.createDiv();
        buttonContainer.addClass("bases-cms-modal-button-container");
        const cancelBtn = buttonContainer.createEl("button");
        cancelBtn.setText("Cancel");
        cancelBtn.addEventListener("click", () => this.close());
        const deleteBtn = buttonContainer.createEl("button");
        deleteBtn.setText("Delete");
        deleteBtn.addClass("mod-cta");
        deleteBtn.addClass("destructive");
        deleteBtn.addEventListener("click", () => {
          void (async () => {
            await executeSmartDeletion(this.app, this.preview);
            this.onConfirm();
            this.close();
          })();
        });
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => BasesCMSPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian24 = require("obsidian");

// src/settings.ts
var import_obsidian4 = require("obsidian");

// src/components/command-picker-modal.ts
var import_obsidian = require("obsidian");
var CommandPickerModal = class extends import_obsidian.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    const commandRegistry = this.app.commands;
    const commandMap = /* @__PURE__ */ new Map();
    if (commandRegistry && typeof commandRegistry.listCommands === "function") {
      try {
        const commands = commandRegistry.listCommands();
        for (const command of commands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      } catch (e) {
        console.warn("[Bases CMS] Error getting commands via listCommands():", e);
      }
    }
    try {
      const registry = commandRegistry == null ? void 0 : commandRegistry.commands;
      if (registry && typeof registry === "object") {
        const allCommands = Object.values(registry);
        for (const command of allCommands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      }
    } catch (e) {
      console.warn("[Bases CMS] Error getting commands via registry:", e);
    }
    try {
      const internalRegistry = commandRegistry == null ? void 0 : commandRegistry.commandRegistry;
      if (internalRegistry && typeof internalRegistry === "object") {
        const allCommands = Object.values(internalRegistry);
        for (const command of allCommands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      }
    } catch (e) {
      console.warn("[Bases CMS] Error getting commands via internal registry:", e);
    }
    const commandOptions = Array.from(commandMap.values());
    commandOptions.sort((a, b) => a.name.localeCompare(b.name));
    return commandOptions;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
  // Override to show command name only
  renderSuggestion(match, el) {
    const item = match.item;
    el.createDiv({ cls: "suggestion-title", text: item.name });
  }
};

// src/components/icon-picker-modal.ts
var import_obsidian2 = require("obsidian");
var getIconList = () => {
  if (import_obsidian2.requireApiVersion && (0, import_obsidian2.requireApiVersion)("1.7.3") && import_obsidian2.getIconIds) {
    try {
      return (0, import_obsidian2.getIconIds)();
    } catch (e) {
      console.warn("[Bases CMS] Error getting icon IDs from Obsidian:", e);
    }
  }
  return [
    "settings-2",
    "settings",
    "help-circle",
    "info",
    "star",
    "heart",
    "bookmark",
    "home",
    "search",
    "bell",
    "mail",
    "user",
    "users",
    "folder",
    "file",
    "file-text",
    "image",
    "video",
    "music",
    "calendar",
    "clock",
    "edit",
    "pencil",
    "trash",
    "copy",
    "cut",
    "paste",
    "download",
    "upload",
    "save",
    "share",
    "link",
    "external-link",
    "lock",
    "unlock",
    "eye",
    "eye-off",
    "key",
    "shield",
    "check",
    "x",
    "plus",
    "minus",
    "arrow-left",
    "arrow-right",
    "arrow-up",
    "arrow-down",
    "chevron-left",
    "chevron-right",
    "chevron-up",
    "chevron-down",
    "menu",
    "more-horizontal",
    "more-vertical",
    "grid",
    "list",
    "layout",
    "columns",
    "rows",
    "maximize",
    "minimize",
    "zoom-in",
    "zoom-out",
    "refresh-cw",
    "play",
    "pause",
    "stop",
    "sun",
    "moon",
    "cloud",
    "zap",
    "wand-2",
    "wand",
    "wand-sparkles",
    "palette",
    "brush",
    "sliders",
    "power",
    "wifi",
    "bluetooth",
    "monitor",
    "laptop",
    "smartphone",
    "camera",
    "mic",
    "headphones",
    "code",
    "terminal",
    "terminal-square",
    "github",
    "gitlab",
    "git-branch",
    "git-commit",
    "database",
    "server",
    "cloud-download",
    "cloud-upload",
    "tag",
    "tags",
    "flag",
    "pin",
    "map-pin",
    "compass",
    "globe",
    "rocket",
    "car",
    "bike",
    "robot",
    "apple",
    "windows",
    "linux",
    "chrome",
    "firefox",
    "safari",
    "credit-card",
    "wallet",
    "coins",
    "book",
    "book-open",
    "award",
    "trophy",
    "badge",
    "wrench",
    "tool",
    "package",
    "box",
    "archive",
    "send",
    "reply",
    "forward",
    "mail-open",
    "tag-plus",
    "tag-minus",
    "flag-off",
    "pin-off",
    "map-pin-off",
    "navigation",
    "map",
    "earth",
    "plane",
    "ship",
    "anchor",
    "helicopter",
    "drone",
    "android",
    "keyhole",
    "keys",
    "fingerprint",
    "scan",
    "qr-code",
    "barcode",
    "receipt",
    "piggy-bank",
    "banknote",
    "pencil-line",
    "edit-2",
    "edit-3"
  ];
};
var LUCIDE_ICONS = getIconList().map((id) => ({
  id,
  name: id.replace(/^lucide-/, "").replace(/-/g, " ").replace(/(^\w{1})|(\s+\w{1})/g, (letter) => letter.toUpperCase())
})).sort((a, b) => a.name.localeCompare(b.name));
var IconPickerModal = class extends import_obsidian2.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    return LUCIDE_ICONS;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
  // Override to show icon preview
  renderSuggestion(match, el) {
    const item = match.item;
    el.addClass("mod-complex");
    const content = el.createDiv({ cls: "suggestion-content" });
    content.createDiv({ cls: "suggestion-title", text: item.name });
    const aux = el.createDiv({ cls: "suggestion-aux" });
    (0, import_obsidian2.setIcon)(aux.createSpan({ cls: "suggestion-flair" }), item.id);
  }
};

// src/utils/settings-compat.ts
var import_obsidian3 = require("obsidian");
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian3.requireApiVersion)("1.11.0")) {
    const obsidianModule = require("obsidian");
    const SettingGroup = obsidianModule.SettingGroup;
    if (SettingGroup) {
      const group = new SettingGroup(containerEl).setHeading(heading);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  const headingEl = containerEl.createDiv("setting-group-heading");
  headingEl.createEl("h3", { text: heading });
  return {
    addSetting(cb) {
      const setting = new import_obsidian3.Setting(containerEl);
      cb(setting);
    }
  };
}

// src/settings.ts
var BasesCMSSettingTab = class extends import_obsidian4.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  /**
   * Refresh toolbars in all active CMS views when settings change
   */
  refreshActiveToolbars() {
    const pluginWithMethod = this.plugin;
    if (pluginWithMethod && typeof pluginWithMethod.refreshAllToolbars === "function") {
      pluginWithMethod.refreshAllToolbars();
    }
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian4.Setting(containerEl).setName("Confirm bulk operations").setDesc("Show confirmation dialogs before performing bulk operations.").addToggle((toggle) => toggle.setValue(this.plugin.settings.confirmBulkOperations).onChange((value) => {
      void (async () => {
        this.plugin.settings.confirmBulkOperations = value;
        await this.plugin.saveData(this.plugin.settings);
      })();
    }));
    const toolbarButtonsGroup = createSettingsGroup(containerEl, "Toolbar buttons", "bases-cms");
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show select all button").setDesc("Display the select all button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarSelectAll);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarSelectAll = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show clear button").setDesc("Display the clear selection button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarClear);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarClear = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show publish button").setDesc("Display the publish button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarPublish);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarPublish = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show draft button").setDesc("Display the draft button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarDraft);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarDraft = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show tags button").setDesc("Display the tags button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarTags);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarTags = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show set button").setDesc("Display the set property button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarSet);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarSet = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show remove button").setDesc("Display the remove property button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarRemove);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarRemove = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show delete button").setDesc("Display the delete button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarDelete);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarDelete = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    const deletionsGroup = createSettingsGroup(containerEl, "Deletions", "bases-cms");
    deletionsGroup.addSetting((setting) => {
      setting.setName("Delete parent folder for specific file name").setDesc("When enabled, deleting a note will delete its parent folder and all its contents if the note file name matches the specified name.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.deleteParentFolder);
        toggle.onChange(async (value) => {
          this.plugin.settings.deleteParentFolder = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      });
    });
    deletionsGroup.addSetting((setting) => {
      setting.setName("Folder deletion file name").setDesc("File name that triggers parent folder deletion.").addText((text) => {
        text.setPlaceholder("index");
        text.setValue(this.plugin.settings.deleteParentFolderFilename);
        text.onChange(async (value) => {
          this.plugin.settings.deleteParentFolderFilename = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      }).setDisabled(!this.plugin.settings.deleteParentFolder);
    });
    deletionsGroup.addSetting((setting) => {
      setting.setName("Delete associated unique attachments").setDesc("When deleting a note, automatically delete attachments that are only used by that note. Attachments used by other notes will be preserved.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.deleteUniqueAttachments);
        toggle.onChange(async (value) => {
          this.plugin.settings.deleteUniqueAttachments = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      });
    });
    deletionsGroup.addSetting((setting) => {
      setting.setName("Confirm deletions").setDesc("Show confirmation dialog before deleting files.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.confirmDeletions);
        toggle.onChange(async (value) => {
          this.plugin.settings.confirmDeletions = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      });
    });
    const appearanceGroup = createSettingsGroup(containerEl, "Appearance", "bases-cms");
    appearanceGroup.addSetting((setting) => {
      setting.setName("Use home icon for CMS view").setDesc("Use the home icon instead of blocks icon for the CMS view in the Bases view selector. Restart Obsidian for this change to take effect.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.useHomeIcon);
        toggle.onChange(async (value) => {
          this.plugin.settings.useHomeIcon = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      });
    });
    appearanceGroup.addSetting((setting) => {
      setting.setName("Force static image for animated GIFs").setDesc("When enabled, animated GIFs will display only the first frame when used as card covers or thumbnails.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.forceStaticGifImages);
        toggle.onChange(async (value) => {
          this.plugin.settings.forceStaticGifImages = value;
          await this.plugin.saveData(this.plugin.settings);
          const pluginWithMethod = this.plugin;
          if (pluginWithMethod.activeViews) {
            pluginWithMethod.activeViews.forEach((view) => {
              if (view.onDataUpdated) {
                view.onDataUpdated();
              }
            });
          }
        });
      });
    });
    const quickEditGroup = createSettingsGroup(containerEl, "Quick edit", "bases-cms");
    let quickEditCommandSetting;
    let quickEditIconSetting;
    let quickEditOpenFileSetting;
    quickEditGroup.addSetting((setting) => {
      setting.setName("Enable quick edit").setDesc("Show an icon on card titles that launches a command when clicked.").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableQuickEdit).onChange((value) => {
        void (async () => {
          this.plugin.settings.enableQuickEdit = value;
          await this.plugin.saveData(this.plugin.settings);
          const shouldHide = !value;
          const commandEl = quickEditCommandSetting == null ? void 0 : quickEditCommandSetting.settingEl;
          const iconEl = quickEditIconSetting == null ? void 0 : quickEditIconSetting.settingEl;
          const openFileEl = quickEditOpenFileSetting == null ? void 0 : quickEditOpenFileSetting.settingEl;
          if (commandEl) {
            commandEl.toggleClass("bases-cms-setting-hidden", shouldHide);
          }
          if (iconEl) {
            iconEl.toggleClass("bases-cms-setting-hidden", shouldHide);
          }
          if (openFileEl) {
            openFileEl.toggleClass("bases-cms-setting-hidden", shouldHide);
          }
        })();
      }));
    });
    quickEditGroup.addSetting((setting) => {
      quickEditCommandSetting = setting;
      setting.setName("Quick edit command").setDesc("The command to execute when clicking the quick edit icon on a card title.").addButton((button) => {
        var _a;
        const currentCommandName = this.plugin.settings.quickEditCommandName || (this.plugin.settings.quickEditCommand ? "Select command..." : "No command selected");
        button.setButtonText(currentCommandName).onClick(() => {
          const modal = new CommandPickerModal(this.app, (commandId) => {
            void (async () => {
              const commandRegistry = this.app.commands;
              let commandName = "";
              if (commandRegistry) {
                if (typeof commandRegistry.listCommands === "function") {
                  const commands = commandRegistry.listCommands();
                  const command = commands.find((cmd) => cmd.id === commandId);
                  if (command) {
                    commandName = command.name;
                  }
                }
                if (!commandName) {
                  const registry = commandRegistry.commands;
                  if (registry && registry[commandId]) {
                    commandName = registry[commandId].name || "";
                  }
                }
              }
              this.plugin.settings.quickEditCommand = commandId;
              this.plugin.settings.quickEditCommandName = commandName;
              await this.plugin.saveData(this.plugin.settings);
              this.display();
            })();
          });
          modal.open();
        });
        if (this.plugin.settings.quickEditCommand) {
          const clearButton = (_a = button.buttonEl.parentElement) == null ? void 0 : _a.createEl("button", {
            text: "Clear",
            attr: { style: "margin-left: 8px;" }
          });
          clearButton == null ? void 0 : clearButton.addEventListener("click", () => {
            void (async () => {
              this.plugin.settings.quickEditCommand = "";
              this.plugin.settings.quickEditCommandName = "";
              await this.plugin.saveData(this.plugin.settings);
              this.display();
            })();
          });
        }
      });
      setting.settingEl.toggleClass("bases-cms-setting-hidden", !this.plugin.settings.enableQuickEdit);
    });
    quickEditGroup.addSetting((setting) => {
      quickEditIconSetting = setting;
      setting.setName("Quick edit icon").setDesc("Select the icon to display for the quick edit button on card titles.").addButton((button) => {
        const iconName = this.getIconName(this.plugin.settings.quickEditIcon || "pencil-line");
        button.setButtonText(iconName || "Select icon...").onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              this.plugin.settings.quickEditIcon = iconId;
              await this.plugin.saveData(this.plugin.settings);
              this.display();
            })();
          });
          modal.open();
        });
      });
      setting.settingEl.toggleClass("bases-cms-setting-hidden", !this.plugin.settings.enableQuickEdit);
    });
    quickEditGroup.addSetting((setting) => {
      quickEditOpenFileSetting = setting;
      setting.setName("Attempt to open file and execute quick edit command").setDesc("For commands that don't have special handling, attempt to open the file and execute the command. Some commands may not work properly this way.").addToggle((toggle) => toggle.setValue(this.plugin.settings.quickEditOpenFile).onChange((value) => {
        void (async () => {
          this.plugin.settings.quickEditOpenFile = value;
          await this.plugin.saveData(this.plugin.settings);
        })();
      }));
      setting.settingEl.toggleClass("bases-cms-setting-hidden", !this.plugin.settings.enableQuickEdit);
    });
  }
  getIconName(iconId) {
    if (!iconId) return "";
    return iconId.replace(/^lucide-/, "").split("-").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
  }
};

// src/types.ts
var DEFAULT_SETTINGS = {
  confirmBulkOperations: true,
  deleteParentFolder: false,
  deleteParentFolderFilename: "index",
  deleteUniqueAttachments: false,
  confirmDeletions: true,
  useHomeIcon: false,
  enableQuickEdit: false,
  quickEditCommand: "",
  quickEditCommandName: "",
  quickEditIcon: "pencil-line",
  quickEditOpenFile: false,
  showToolbarSelectAll: true,
  showToolbarClear: true,
  showToolbarDraft: true,
  showToolbarPublish: true,
  showToolbarTags: true,
  showToolbarSet: true,
  showToolbarRemove: true,
  showToolbarDelete: true,
  forceStaticGifImages: false
};

// src/views/cms-view.ts
var import_obsidian23 = require("obsidian");

// src/utils/css-props.ts
function setCssProps(element, props) {
  for (const [key, value] of Object.entries(props)) {
    if (key.startsWith("--")) {
      element.style.setProperty(key, String(value));
    } else {
      const cssKey = key.replace(/([A-Z])/g, "-$1").toLowerCase();
      element.style.setProperty(cssKey, String(value));
    }
  }
}

// src/shared/data-transform.ts
var import_obsidian7 = require("obsidian");

// src/utils/property.ts
var import_obsidian6 = require("obsidian");
init_frontmatter_helper();
async function getFirstBasesPropertyValue(entry, propertyString, app) {
  if (!propertyString || !propertyString.trim()) return null;
  const properties = propertyString.split(",").map((p) => p.trim()).filter((p) => p);
  for (const prop of properties) {
    const value = entry.getValue(prop);
    const valueObj = value;
    const propertyExists = valueObj && ("date" in valueObj && valueObj.date instanceof Date || "data" in valueObj && valueObj.data != null);
    if (propertyExists) {
      return value;
    }
    if (!propertyExists && app) {
      const file = app.vault.getAbstractFileByPath(entry.file.path);
      if (file instanceof import_obsidian6.TFile && file.extension === "mdx") {
        const frontmatter = await getFileFrontmatter(app, file);
        if (frontmatter) {
          const cleanProp = prop.startsWith("note.") ? prop.substring(5) : prop;
          const frontmatterValue = frontmatter[cleanProp];
          if (frontmatterValue != null) {
            return { data: frontmatterValue };
          }
        }
      }
    }
  }
  return null;
}
async function getAllBasesImagePropertyValues(entry, propertyString, app) {
  if (!propertyString || !propertyString.trim()) return [];
  const prop = propertyString.split(",")[0].trim();
  if (!prop) return [];
  const value = entry.getValue(prop);
  let data = null;
  if (value && "data" in value) {
    data = value.data;
  } else if (app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian6.TFile && file.extension === "mdx") {
      const frontmatter = await getFileFrontmatter(app, file);
      if (frontmatter) {
        const cleanProp = prop.startsWith("note.") ? prop.substring(5) : prop;
        data = frontmatter[cleanProp];
      }
    }
  }
  if (data == null) return [];
  const images = [];
  if (Array.isArray(data)) {
    for (const item of data) {
      if (typeof item === "string" || typeof item === "number") {
        const str = String(item);
        if (str && str.trim()) {
          images.push(str);
        }
      }
    }
  } else if (data !== "") {
    if (typeof data === "string" || typeof data === "number") {
      const str = String(data);
      if (str.trim()) {
        images.push(str);
      }
    }
  }
  return images;
}
function getPropertyLabel(propertyName, app, basesConfig, basesController) {
  if (!propertyName || propertyName === "") return "";
  if (basesConfig) {
    const configWithDisplayName = basesConfig;
    if (typeof configWithDisplayName.getDisplayName === "function") {
      try {
        const displayName = configWithDisplayName.getDisplayName(propertyName);
        if (displayName && typeof displayName === "string" && displayName.trim() !== "") {
          return displayName;
        }
      } catch (e) {
      }
    }
  }
  return propertyName;
}

// src/utils/style-settings.ts
function hasBodyClass(className) {
  return document.body.classList.contains(className);
}
function getListSeparator() {
  let value = getComputedStyle(document.body).getPropertyValue(
    "--bases-cms-list-separator"
  );
  if (value.startsWith('"') && value.endsWith('"') || value.startsWith("'") && value.endsWith("'")) {
    value = value.slice(1, -1);
  }
  return value || ", ";
}
function getEmptyValueMarker() {
  let value = getComputedStyle(document.body).getPropertyValue(
    "--bases-cms-empty-value-marker"
  );
  if (value.startsWith('"') && value.endsWith('"') || value.startsWith("'") && value.endsWith("'")) {
    value = value.slice(1, -1);
  }
  return value || "\u2014";
}
function shouldHideMissingProperties() {
  return hasBodyClass("bases-cms-hide-missing-properties");
}
function shouldHideEmptyProperties() {
  const hasClass = hasBodyClass("bases-cms-hide-empty-properties");
  if (hasClass) return true;
  return false;
}
function getTagStyle() {
  if (hasBodyClass("bases-cms-tag-style-minimal")) return "minimal";
  if (hasBodyClass("bases-cms-tag-style-theme")) return "theme";
  return "plain";
}
function showTagHashPrefix() {
  return hasBodyClass("bases-cms-show-tag-hash");
}

// src/shared/data-transform.ts
init_frontmatter_helper();
function removeDuplication(str) {
  if (str.length === 0) return str;
  for (let len = 1; len <= Math.floor(str.length / 2); len++) {
    const prefix = str.substring(0, len);
    const repeatCount = Math.floor(str.length / len);
    if (repeatCount < 2) continue;
    let isCompleteDuplication = true;
    for (let i = 1; i < repeatCount; i++) {
      const segment = str.substring(i * len, (i + 1) * len);
      if (segment !== prefix) {
        isCompleteDuplication = false;
        break;
      }
    }
    const remainder = str.length % len;
    if (remainder > 0) {
      const lastSegment = str.substring(repeatCount * len);
      if (lastSegment !== prefix.substring(0, remainder)) {
        isCompleteDuplication = false;
      }
    }
    if (isCompleteDuplication) {
      return prefix;
    }
  }
  return str;
}
async function basesEntryToCardData(entry, settings, sortMethod, isShuffled, snippet, imageUrl, hasImageAvailable, app, mdxFrontmatterCache) {
  var _a;
  const fileName = entry.file.basename || entry.file.name;
  let titleValue = null;
  if (app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian7.TFile && file.extension === "mdx" && mdxFrontmatterCache) {
      const frontmatter = mdxFrontmatterCache[entry.file.path];
      if (frontmatter) {
        const cleanProp = settings.titleProperty.startsWith("note.") ? settings.titleProperty.substring(5) : settings.titleProperty;
        const frontmatterValue = frontmatter[cleanProp];
        if (frontmatterValue != null) {
          titleValue = { data: frontmatterValue };
        }
      }
    }
  }
  if (!titleValue) {
    titleValue = await getFirstBasesPropertyValue(entry, settings.titleProperty, app);
  }
  const titleData = titleValue == null ? void 0 : titleValue.data;
  let title;
  if (titleData != null && titleData !== "") {
    if (Array.isArray(titleData)) {
      const items = titleData.map((item) => {
        if (item && typeof item === "object" && "data" in item) {
          return String(item.data);
        }
        return String(item);
      }).filter((s) => s.trim().length > 0);
      title = items.length > 0 ? items.join(", ") : fileName;
    } else if (typeof titleData === "string" || typeof titleData === "number") {
      title = String(titleData);
    } else {
      title = fileName;
    }
  } else {
    title = fileName;
  }
  const path = entry.file.path;
  const folderPath = path.split("/").slice(0, -1).join("/");
  let yamlTagsValue = entry.getValue("note.tags");
  let yamlTags = [];
  if (!yamlTagsValue && app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian7.TFile && file.extension === "mdx") {
      let frontmatter = (_a = mdxFrontmatterCache == null ? void 0 : mdxFrontmatterCache[entry.file.path]) != null ? _a : null;
      if (frontmatter === void 0) {
        frontmatter = await getFileFrontmatter(app, file);
      }
      if (frontmatter == null ? void 0 : frontmatter.tags) {
        const tagData = frontmatter.tags;
        const rawTags = Array.isArray(tagData) ? tagData.map((t) => {
          if (t && typeof t === "object" && t !== null) {
            return JSON.stringify(t);
          }
          if (typeof t === "string" || typeof t === "number") {
            return String(t);
          }
          return t ? JSON.stringify(t) : "";
        }) : (() => {
          if (tagData && typeof tagData === "object" && tagData !== null) {
            return [JSON.stringify(tagData)];
          }
          if (typeof tagData === "string" || typeof tagData === "number") {
            return [String(tagData)];
          }
          return tagData ? [JSON.stringify(tagData)] : [""];
        })();
        yamlTags = rawTags.map((tag) => tag.replace(/^#/, ""));
      }
    }
  }
  if (yamlTagsValue && yamlTagsValue.data != null) {
    const tagData = yamlTagsValue.data;
    const rawTags = Array.isArray(tagData) ? tagData.map((t) => {
      if (t && typeof t === "object" && "data" in t) {
        return String(t.data);
      }
      return typeof t === "string" || typeof t === "number" ? String(t) : "";
    }).filter((t) => t) : typeof tagData === "string" || typeof tagData === "number" ? [String(tagData)] : [];
    yamlTags = rawTags.map((tag) => tag.replace(/^#/, ""));
  }
  let allTagsValue = entry.getValue("file.tags");
  let tags = [];
  if (allTagsValue && allTagsValue.data != null) {
    const tagData = allTagsValue.data;
    const rawTags = Array.isArray(tagData) ? tagData.map((t) => {
      if (t && typeof t === "object" && t !== null && "data" in t) {
        const itemData = t.data;
        if (itemData && typeof itemData === "object" && itemData !== null) {
          return JSON.stringify(itemData);
        }
        return String(itemData);
      }
      if (t && typeof t === "object" && t !== null) {
        return JSON.stringify(t);
      }
      return typeof t === "string" || typeof t === "number" ? String(t) : "";
    }).filter((t) => typeof t === "string" && t.length > 0) : (() => {
      if (tagData && typeof tagData === "object" && tagData !== null) {
        return [JSON.stringify(tagData)];
      }
      return typeof tagData === "string" || typeof tagData === "number" ? [String(tagData)] : [];
    })();
    tags = rawTags.map((tag) => tag.replace(/^#/, ""));
  } else if (!allTagsValue && app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian7.TFile && file.extension === "mdx") {
      tags = [...yamlTags];
    }
  }
  const ctime = entry.file.stat.ctime;
  const mtime = entry.file.stat.mtime;
  let displayTags = [];
  if (settings.showTags && settings.tagsProperty) {
    const tagsValue = await getFirstBasesPropertyValue(entry, settings.tagsProperty, app);
    if (tagsValue && tagsValue.data != null) {
      const tagData = tagsValue.data;
      if (Array.isArray(tagData)) {
        displayTags = tagData.map((t) => {
          if (t && typeof t === "object" && "data" in t) {
            return String(t.data);
          }
          return typeof t === "string" || typeof t === "number" ? String(t) : "";
        }).filter((t) => typeof t === "string" && t.length > 0);
      } else if (typeof tagData === "string" || typeof tagData === "number") {
        displayTags = [String(tagData)];
      }
    }
  }
  const cardData = {
    path,
    name: fileName,
    title,
    tags,
    yamlTags,
    ctime,
    mtime,
    folderPath,
    snippet,
    imageUrl,
    hasImageAvailable: hasImageAvailable || false,
    displayTags: displayTags.length > 0 ? displayTags : void 0
  };
  const props = [
    settings.propertyDisplay1,
    settings.propertyDisplay2,
    settings.propertyDisplay3,
    settings.propertyDisplay4,
    settings.propertyDisplay5,
    settings.propertyDisplay6,
    settings.propertyDisplay7,
    settings.propertyDisplay8,
    settings.propertyDisplay9,
    settings.propertyDisplay10,
    settings.propertyDisplay11,
    settings.propertyDisplay12,
    settings.propertyDisplay13,
    settings.propertyDisplay14
  ];
  const seen = /* @__PURE__ */ new Set();
  const effectiveProps = props.map((prop) => {
    if (!prop || prop === "") return "";
    if (seen.has(prop)) return "";
    seen.add(prop);
    return prop;
  });
  cardData.propertyName1 = effectiveProps[0] || void 0;
  cardData.propertyName2 = effectiveProps[1] || void 0;
  cardData.propertyName3 = effectiveProps[2] || void 0;
  cardData.propertyName4 = effectiveProps[3] || void 0;
  cardData.propertyName5 = effectiveProps[4] || void 0;
  cardData.propertyName6 = effectiveProps[5] || void 0;
  cardData.propertyName7 = effectiveProps[6] || void 0;
  cardData.propertyName8 = effectiveProps[7] || void 0;
  cardData.propertyName9 = effectiveProps[8] || void 0;
  cardData.propertyName10 = effectiveProps[9] || void 0;
  cardData.propertyName11 = effectiveProps[10] || void 0;
  cardData.propertyName12 = effectiveProps[11] || void 0;
  cardData.propertyName13 = effectiveProps[12] || void 0;
  cardData.propertyName14 = effectiveProps[13] || void 0;
  cardData.property1 = effectiveProps[0] ? await resolveBasesPropertyAsync(effectiveProps[0], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property2 = effectiveProps[1] ? await resolveBasesPropertyAsync(effectiveProps[1], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property3 = effectiveProps[2] ? await resolveBasesPropertyAsync(effectiveProps[2], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property4 = effectiveProps[3] ? await resolveBasesPropertyAsync(effectiveProps[3], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property5 = effectiveProps[4] ? await resolveBasesPropertyAsync(effectiveProps[4], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property6 = effectiveProps[5] ? await resolveBasesPropertyAsync(effectiveProps[5], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property7 = effectiveProps[6] ? await resolveBasesPropertyAsync(effectiveProps[6], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property8 = effectiveProps[7] ? await resolveBasesPropertyAsync(effectiveProps[7], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property9 = effectiveProps[8] ? await resolveBasesPropertyAsync(effectiveProps[8], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property10 = effectiveProps[9] ? await resolveBasesPropertyAsync(effectiveProps[9], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property11 = effectiveProps[10] ? await resolveBasesPropertyAsync(effectiveProps[10], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property12 = effectiveProps[11] ? await resolveBasesPropertyAsync(effectiveProps[11], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property13 = effectiveProps[12] ? await resolveBasesPropertyAsync(effectiveProps[12], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property14 = effectiveProps[13] ? await resolveBasesPropertyAsync(effectiveProps[13], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  return cardData;
}
async function transformBasesEntries(entries, settings, sortMethod, isShuffled, snippets, images, hasImageAvailable, app, mdxFrontmatterCache) {
  return Promise.all(entries.map((entry) => basesEntryToCardData(
    entry,
    settings,
    sortMethod,
    isShuffled,
    snippets[entry.file.path],
    images[entry.file.path],
    hasImageAvailable[entry.file.path],
    app,
    mdxFrontmatterCache
  )));
}
async function resolveBasesPropertyAsync(propertyName, entry, cardData, settings, app, mdxFrontmatterCache) {
  if (!propertyName || propertyName === "") {
    return null;
  }
  if (propertyName === "file.path" || propertyName === "file path") {
    return cardData.folderPath || null;
  }
  if (propertyName === "tags" || propertyName === "note.tags") {
    return cardData.yamlTags.length > 0 ? "tags" : null;
  }
  if (propertyName === "file.tags" || propertyName === "file tags") {
    return cardData.tags.length > 0 ? "tags" : null;
  }
  if (propertyName === "file.ctime" || propertyName === "created time") {
    return new Date(cardData.ctime).toLocaleDateString();
  }
  if (propertyName === "file.mtime" || propertyName === "modified time") {
    return new Date(cardData.mtime).toLocaleDateString();
  }
  let value = null;
  if (app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian7.TFile && file.extension === "mdx" && mdxFrontmatterCache) {
      const frontmatter = mdxFrontmatterCache[entry.file.path];
      if (frontmatter) {
        const cleanProp = propertyName.startsWith("note.") ? propertyName.substring(5) : propertyName;
        const frontmatterValue = frontmatter[cleanProp];
        if (frontmatterValue != null) {
          value = { data: frontmatterValue };
        }
      }
    }
  }
  if (!value) {
    value = await getFirstBasesPropertyValue(entry, propertyName, app);
  }
  if (!value) return null;
  const valueObj = value;
  if (!valueObj) return null;
  if ("date" in valueObj && valueObj.date instanceof Date) {
    return valueObj.date.toLocaleDateString();
  }
  const data = valueObj.data;
  if (data == null) {
    return null;
  }
  if (data === "") {
    return "";
  }
  if (typeof data === "string") {
    const trimmed = data.trim();
    if (trimmed.length === 0) {
      return "";
    }
    return removeDuplication(trimmed);
  }
  if (Array.isArray(data)) {
    if (data.length === 0) {
      return "";
    }
    const uniqueItems = /* @__PURE__ */ new Set();
    const result = [];
    for (const item of data) {
      let str;
      if (item && typeof item === "object" && "data" in item) {
        const itemData = item.data;
        if (itemData && typeof itemData === "object" && !Array.isArray(itemData) && "data" in itemData) {
          str = String(itemData.data);
        } else {
          str = String(itemData);
        }
      } else if (item && typeof item === "object" && item !== null) {
        str = String(item);
      } else {
        str = String(item);
      }
      const trimmed = str.trim();
      if (trimmed && trimmed !== "") {
        const deduplicated = removeDuplication(trimmed);
        if (deduplicated && deduplicated !== "" && !uniqueItems.has(deduplicated)) {
          uniqueItems.add(deduplicated);
          result.push(deduplicated);
        }
      }
    }
    if (result.length > 0) {
      return result.join(getListSeparator());
    }
    return null;
  }
  if (typeof data === "string") {
    let str = data.trim();
    if (str.length === 0) {
      return null;
    }
    return removeDuplication(str);
  }
  if (typeof data === "number" || typeof data === "boolean") {
    return String(data);
  }
  return null;
}

// src/views/cms-view.ts
init_settings_schema();

// src/utils/image.ts
var import_obsidian8 = require("obsidian");
function isExternalUrl(url) {
  return /^https?:\/\//i.test(url);
}
function hasValidImageExtension(path) {
  return /\.(avif|bmp|gif|jpe?g|png|svg|webp)$/i.test(path);
}
function validateImageUrl(url) {
  return new Promise((resolve) => {
    const img = new Image();
    img.onload = () => resolve(true);
    img.onerror = () => resolve(false);
    setTimeout(() => resolve(false), 5e3);
    img.src = url;
  });
}
function stripWikilinkSyntax(path) {
  const wikilinkMatch = path.match(/^!?\[\[([^\]|]+)(?:\|[^\]]*)?\]\]$/);
  return wikilinkMatch ? wikilinkMatch[1].trim() : path;
}
async function processImagePaths(imagePaths) {
  const internalPaths = [];
  const externalUrlCandidates = [];
  for (const imgPath of imagePaths) {
    const cleanPath = stripWikilinkSyntax(imgPath);
    if (cleanPath.length === 0) continue;
    if (isExternalUrl(cleanPath)) {
      externalUrlCandidates.push(cleanPath);
    } else {
      if (hasValidImageExtension(cleanPath)) {
        internalPaths.push(cleanPath);
      }
    }
  }
  const validationPromises = externalUrlCandidates.map(
    (url) => validateImageUrl(url).then((isValid) => isValid ? url : null)
  );
  const validatedUrls = await Promise.all(validationPromises);
  const externalUrls = validatedUrls.filter((url) => url !== null);
  return { internalPaths, externalUrls };
}
function resolveInternalImagePaths(internalPaths, sourcePath, app) {
  const validImageExtensions = ["avif", "bmp", "gif", "jpeg", "jpg", "png", "svg", "webp"];
  const resourcePaths = [];
  for (const propPath of internalPaths) {
    let imageFile = app.metadataCache.getFirstLinkpathDest(propPath, sourcePath);
    if (!imageFile && propPath.startsWith("./")) {
      const sourceFile = app.vault.getAbstractFileByPath(sourcePath);
      if (sourceFile && sourceFile.parent) {
        const relativePath = propPath.substring(2);
        const fullPath = sourceFile.parent.path ? `${sourceFile.parent.path}/${relativePath}` : relativePath;
        const resolvedFile = app.vault.getAbstractFileByPath(fullPath);
        if (resolvedFile instanceof import_obsidian8.TFile) {
          imageFile = resolvedFile;
        }
      }
    }
    if (!imageFile) {
      const absoluteFile = app.vault.getAbstractFileByPath(propPath);
      if (absoluteFile instanceof import_obsidian8.TFile) {
        imageFile = absoluteFile;
      }
    }
    if (imageFile && validImageExtensions.includes(imageFile.extension)) {
      const resourcePath = app.vault.getResourcePath(imageFile);
      resourcePaths.push(resourcePath);
    }
  }
  return resourcePaths;
}
async function extractEmbedImages(file, app) {
  const validImageExtensions = ["avif", "bmp", "gif", "jpeg", "jpg", "png", "svg", "webp"];
  const metadata = app.metadataCache.getFileCache(file);
  const bodyResourcePaths = [];
  const bodyExternalUrlCandidates = /* @__PURE__ */ new Set();
  if (metadata == null ? void 0 : metadata.embeds) {
    for (const embed of metadata.embeds) {
      const embedLink = embed.link;
      if (isExternalUrl(embedLink)) {
        if (hasValidImageExtension(embedLink) || !embedLink.includes(".")) {
          bodyExternalUrlCandidates.add(embedLink);
        }
      } else {
        const targetFile = app.metadataCache.getFirstLinkpathDest(embedLink, file.path);
        if (targetFile && validImageExtensions.includes(targetFile.extension)) {
          const resourcePath = app.vault.getResourcePath(targetFile);
          bodyResourcePaths.push(resourcePath);
        }
      }
    }
  }
  if (file.extension === "md" || file.extension === "mdx") {
    try {
      const content = await app.vault.cachedRead(file);
      const markdownImageRegex = /!\[([^\]]*)\]\((https?:\/\/[^\s)]+)/gi;
      let match;
      while ((match = markdownImageRegex.exec(content)) !== null) {
        const url = match[2].trim();
        const cleanUrl = url.replace(/["')\s]+$/, "");
        if (isExternalUrl(cleanUrl) && (hasValidImageExtension(cleanUrl) || !cleanUrl.includes("."))) {
          bodyExternalUrlCandidates.add(cleanUrl);
        }
      }
      const htmlImgRegex = /<img[^>]+src\s*=\s*["']?(https?:\/\/[^\s"'<>]+)/gi;
      while ((match = htmlImgRegex.exec(content)) !== null) {
        const url = match[1].trim();
        const cleanUrl = url.replace(/["'\s>]+$/, "");
        if (isExternalUrl(cleanUrl) && (hasValidImageExtension(cleanUrl) || !cleanUrl.includes("."))) {
          bodyExternalUrlCandidates.add(cleanUrl);
        }
      }
    } catch (error) {
      console.warn(`Failed to read file content for image extraction: ${file.path}`, error);
    }
  }
  const externalUrlArray = Array.from(bodyExternalUrlCandidates);
  const validationPromises = externalUrlArray.map(
    (url) => validateImageUrl(url).then((isValid) => isValid ? url : null)
  );
  const validatedUrls = await Promise.all(validationPromises);
  const bodyExternalUrls = validatedUrls.filter((url) => url !== null);
  return [...bodyResourcePaths, ...bodyExternalUrls];
}
function isGifUrl(url) {
  return /\.gif(\?|#|$)/i.test(url) || /\.gif$/i.test(url);
}
async function convertGifToStatic(url, forceStatic) {
  if (!forceStatic || !isGifUrl(url)) {
    return url;
  }
  return new Promise((resolve) => {
    const img = new Image();
    img.crossOrigin = "anonymous";
    img.onload = () => {
      try {
        const canvas = document.createElement("canvas");
        canvas.width = img.width;
        canvas.height = img.height;
        const ctx = canvas.getContext("2d");
        if (ctx) {
          ctx.drawImage(img, 0, 0);
          const dataUrl = canvas.toDataURL("image/png");
          resolve(dataUrl);
        } else {
          resolve(url);
        }
      } catch (error) {
        console.warn("Failed to convert GIF to static image:", error);
        resolve(url);
      }
    };
    img.onerror = () => {
      resolve(url);
    };
    setTimeout(() => {
      resolve(url);
    }, 5e3);
    img.src = url;
  });
}

// src/utils/preview.ts
var markdownPatterns = [
  /`([^`]+)`/g,
  /\*\*\*((?:(?!\*\*\*).)+)\*\*\*/g,
  /___((?:(?!___).)+)___/g,
  /\*\*((?:(?!\*\*).)+)\*\*/g,
  /__((?:(?!__).)+)__/g,
  /\*((?:(?!\*).)+)\*/g,
  /_((?:(?!_).)+)_/g,
  /~~((?:(?!~~).)+)~~/g,
  /==((?:(?!==).)+)==/g,
  /\[([^\]]+)\]\([^)]+\)/g,
  /!\[\[[^\]]+\]\]/g,
  /\[\[[^\]|]+\|[^\]]+\]\]/g,
  /\[\[[^\]]+\]\]/g,
  /#[a-zA-Z0-9_\-/]+/g,
  /^[-*+]\s*\[[ xX]\]\s+/gm,
  /^(\d+\.\s*)\[[ xX]\]\s+/gm,
  /^(\d+\)\s*)\[[ xX]\]\s+/gm,
  /^[-*+]\s+/gm,
  /^#{1,6}\s+.+$/gm,
  /^\s*(?:[-_*])\s*(?:[-_*])\s*(?:[-_*])[\s\-_*]*$/gm,
  /^\s*\|.*\|.*$/gm,
  /\^\[[^\]]*?]/g,
  /\[\^[^\]]+]/g,
  /^\s*\[\^[^\]]+]:.*$/gm,
  /<([a-z][a-z0-9]*)\b[^>]*>(.*?)<\/\1>/gi,
  /<[^>]+>/g
];
function protectEscapedChars(text) {
  const map = /* @__PURE__ */ new Map();
  let counter = 0;
  const result = text.replace(/\\(.)/g, (match, char) => {
    const placeholder = `\xA7\xA7ESCAPED${counter}\xA7\xA7`;
    map.set(placeholder, char);
    counter++;
    return placeholder;
  });
  return { text: result, map };
}
function restoreEscapedChars(text, map) {
  let result = text;
  map.forEach((char, placeholder) => {
    result = result.split(placeholder).join(char);
  });
  return result;
}
function removeCodeBlocks(text) {
  let result = text;
  let changed = true;
  while (changed) {
    changed = false;
    const openMatch = result.match(/^([`~]{3,})/m);
    if (!openMatch) break;
    const fenceChar = openMatch[1][0];
    const fenceLength = openMatch[1].length;
    const openIndex = openMatch.index;
    const escapedChar = fenceChar.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
    const closePattern = new RegExp(`^${escapedChar}{${fenceLength}}\\s*$`, "m");
    const afterOpen = result.substring(openIndex + openMatch[1].length);
    const closeMatch = afterOpen.match(closePattern);
    if (closeMatch) {
      const closeIndex = openIndex + openMatch[1].length + closeMatch.index;
      const blockEnd = closeIndex + closeMatch[0].length;
      result = result.substring(0, openIndex) + result.substring(blockEnd);
      changed = true;
    } else {
      const lineEnd = result.indexOf("\n", openIndex);
      if (lineEnd === -1) {
        result = result.substring(0, openIndex);
      } else {
        result = result.substring(0, openIndex) + result.substring(lineEnd + 1);
      }
      changed = true;
    }
  }
  return result;
}
function stripMarkdownSyntax(text) {
  if (!text || text.trim().length === 0) return "";
  text = text.replace(/^>\s*\[![\w-]+\][+-]?.*$/gm, "");
  text = text.replace(/^>\s?/gm, "");
  const { text: protectedText, map: escapedCharsMap } = protectEscapedChars(text);
  let result = removeCodeBlocks(protectedText);
  markdownPatterns.forEach((pattern) => {
    result = result.replace(pattern, (match, ...groups) => {
      if (match.match(/<[a-z][a-z0-9]*\b[^>]*>.*?<\//i)) {
        return groups[1] || "";
      }
      if (groups.length > 0 && groups[0] !== void 0) {
        for (let i = 0; i < groups.length - 2; i++) {
          if (typeof groups[i] === "string") {
            return groups[i];
          }
        }
      }
      return "";
    });
  });
  result = restoreEscapedChars(result, escapedCharsMap);
  return result;
}
function sanitizeForPreview(content, omitFirstLine = false, filename, titleValue) {
  const cleaned = content.replace(/^---[\s\S]*?---/, "").trim();
  let stripped = stripMarkdownSyntax(cleaned);
  const firstLineEnd = stripped.indexOf("\n");
  const firstLine = (firstLineEnd !== -1 ? stripped.substring(0, firstLineEnd) : stripped).trim();
  if (omitFirstLine || filename && firstLine === filename || titleValue && firstLine === titleValue) {
    stripped = firstLineEnd !== -1 ? stripped.substring(firstLineEnd + 1).trim() : "";
  }
  const normalized = stripped.replace(/\^[a-zA-Z0-9-]+/g, "").split(/\s+/).filter((word) => word).join(" ").trim().replace(/\.{2,}/g, (match) => match.replace(/\./g, "\u2024"));
  const wasTruncated = normalized.length > 500;
  let preview = normalized.substring(0, 500);
  if (wasTruncated) {
    preview += "\u2026";
  }
  return preview;
}
async function loadFilePreview(file, app, propertyValue, settings, fileName, titleValue) {
  let result = null;
  if (propertyValue != null) {
    if (Array.isArray(propertyValue)) {
      const items = propertyValue.map((item) => {
        if (item && typeof item === "object" && "data" in item) {
          return String(item.data);
        }
        return String(item);
      }).filter((s) => s.trim().length > 0);
      result = items.length > 0 ? items.join(", ") : null;
    } else if (typeof propertyValue === "string" || typeof propertyValue === "number") {
      const str = String(propertyValue).trim();
      result = str.length > 0 ? str : null;
    }
  }
  if (result) {
    if (settings.truncatePreviewProperty) {
      const wasTruncated = result.length > 500;
      result = result.substring(0, 500);
      if (wasTruncated) {
        result += "\u2026";
      }
    }
    return result;
  }
  if (settings.fallbackToContent) {
    const content = await app.vault.cachedRead(file);
    return sanitizeForPreview(
      content,
      settings.omitFirstLine,
      fileName,
      titleValue
    );
  }
  return "";
}

// src/shared/content-loader.ts
async function loadImageForEntry(path, file, app, imagePropertyValues, fallbackToEmbeds, imageCache, hasImageCache) {
  const hasPropertyValues = imagePropertyValues && Array.isArray(imagePropertyValues) && imagePropertyValues.length > 0;
  const shouldFallback = fallbackToEmbeds === true || fallbackToEmbeds === "always" || fallbackToEmbeds === "if-empty" && !hasPropertyValues;
  if (!shouldFallback && path in imageCache) {
    delete imageCache[path];
    delete hasImageCache[path];
  }
  if (path in imageCache && !hasPropertyValues && shouldFallback) {
    return;
  }
  try {
    const { internalPaths, externalUrls } = await processImagePaths(imagePropertyValues);
    let validImages = [
      ...resolveInternalImagePaths(internalPaths, path, app),
      ...externalUrls
      // External URLs already validated by processImagePaths
    ];
    if (validImages.length === 0 && !hasPropertyValues && shouldFallback) {
      validImages = await extractEmbedImages(file, app);
    }
    if (validImages.length > 0) {
      imageCache[path] = validImages.length > 1 ? validImages : validImages[0];
      hasImageCache[path] = true;
    } else if (hasPropertyValues) {
      delete imageCache[path];
      hasImageCache[path] = true;
    } else if (!shouldFallback) {
      delete imageCache[path];
      delete hasImageCache[path];
    }
  } catch (error) {
    console.error(`Failed to load image for ${path}:`, error);
  }
}
async function loadImagesForEntries(entries, fallbackToEmbeds, app, imageCache, hasImageCache) {
  const entriesToProcess = entries.filter((entry) => {
    const hasPropertyValues = entry.imagePropertyValues && Array.isArray(entry.imagePropertyValues) && entry.imagePropertyValues.length > 0;
    return !(entry.path in imageCache) || hasPropertyValues;
  });
  const BATCH_SIZE = 50;
  for (let i = 0; i < entriesToProcess.length; i += BATCH_SIZE) {
    const batch = entriesToProcess.slice(i, i + BATCH_SIZE);
    await Promise.all(
      batch.map(async (entry) => {
        await loadImageForEntry(
          entry.path,
          entry.file,
          app,
          entry.imagePropertyValues,
          fallbackToEmbeds,
          imageCache,
          hasImageCache
        );
      })
    );
  }
}
async function loadSnippetsForEntries(entries, fallbackToContent, omitFirstLine, app, snippetCache, truncatePreviewProperty) {
  await Promise.all(
    entries.map(async (entry) => {
      if (entry.path in snippetCache) {
        return;
      }
      try {
        if (entry.file.extension === "md" || entry.file.extension === "mdx") {
          snippetCache[entry.path] = await loadFilePreview(
            entry.file,
            app,
            entry.descriptionData,
            {
              fallbackToContent,
              omitFirstLine,
              truncatePreviewProperty
            },
            entry.fileName,
            entry.titleString
          );
        } else {
          snippetCache[entry.path] = "";
        }
      } catch (error) {
        console.error(`Failed to load snippet for ${entry.path}:`, error);
        snippetCache[entry.path] = "";
      }
    })
  );
}

// src/views/shared-renderer.ts
var import_obsidian12 = require("obsidian");

// src/utils/draft-status-badge.ts
var import_obsidian9 = require("obsidian");
init_frontmatter_helper();
async function calculateDraftStatusAsync(entry, settings, app, mdxFrontmatterCache) {
  var _a;
  let booleanValue = null;
  let isDraft = false;
  if (settings.draftStatusUseFilenamePrefix && entry.file && entry.file.name) {
    const fileName = entry.file.name;
    const startsWithUnderscore = fileName.startsWith("_");
    booleanValue = startsWithUnderscore;
    isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
  } else if (settings.draftStatusProperty) {
    const draftValue = entry.getValue(settings.draftStatusProperty);
    if (draftValue && "data" in draftValue && typeof draftValue.data === "boolean") {
      booleanValue = draftValue.data;
      isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
    } else {
      const file = app.vault.getAbstractFileByPath(entry.file.path);
      if (file instanceof import_obsidian9.TFile && file.extension === "mdx") {
        let frontmatter = null;
        if (mdxFrontmatterCache) {
          frontmatter = (_a = mdxFrontmatterCache[entry.file.path]) != null ? _a : null;
        }
        if (frontmatter === void 0) {
          frontmatter = await getFileFrontmatter(app, file);
        }
        if (frontmatter) {
          const cleanProp = settings.draftStatusProperty.startsWith("note.") ? settings.draftStatusProperty.substring(5) : settings.draftStatusProperty;
          const frontmatterValue = frontmatter[cleanProp];
          if (typeof frontmatterValue === "boolean") {
            booleanValue = frontmatterValue;
            isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
          }
        }
      }
    }
  }
  return { booleanValue, isDraft };
}
function calculateDraftStatus(entry, settings) {
  let booleanValue = null;
  let isDraft = false;
  if (settings.draftStatusUseFilenamePrefix && entry.file && entry.file.name) {
    const fileName = entry.file.name;
    const startsWithUnderscore = fileName.startsWith("_");
    booleanValue = startsWithUnderscore;
    isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
  } else if (settings.draftStatusProperty) {
    const draftValue = entry.getValue(settings.draftStatusProperty);
    if (draftValue && "data" in draftValue && typeof draftValue.data === "boolean") {
      booleanValue = draftValue.data;
      isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
    }
  }
  return { booleanValue, isDraft };
}
function renderDraftStatusBadge(container, entry, cardPath, settings, onPropertyToggle, app, mdxFrontmatterCache) {
  if (!settings.showDraftStatus) {
    return;
  }
  const { booleanValue: syncValue, isDraft: syncIsDraft } = calculateDraftStatus(entry, settings);
  if (syncValue !== null) {
    renderBadge(container, syncValue, syncIsDraft, onPropertyToggle, cardPath);
  } else if (app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian9.TFile && file.extension === "mdx" && mdxFrontmatterCache) {
      const frontmatter = mdxFrontmatterCache[entry.file.path];
      if (frontmatter && settings.draftStatusProperty) {
        const cleanProp = settings.draftStatusProperty.startsWith("note.") ? settings.draftStatusProperty.substring(5) : settings.draftStatusProperty;
        const frontmatterValue = frontmatter[cleanProp];
        if (typeof frontmatterValue === "boolean") {
          const booleanValue = frontmatterValue;
          const isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
          renderBadge(container, booleanValue, isDraft, onPropertyToggle, cardPath);
          return;
        }
      }
    }
    void (async () => {
      const { booleanValue, isDraft } = await calculateDraftStatusAsync(entry, settings, app, mdxFrontmatterCache);
      if (booleanValue !== null && container.isConnected) {
        renderBadge(container, booleanValue, isDraft, onPropertyToggle, cardPath);
      }
    })();
  }
}
function renderBadge(container, booleanValue, isDraft, onPropertyToggle, cardPath) {
  if (container.querySelector(".card-status-badge")) {
    return;
  }
  const statusBadge = container.createDiv("card-status-badge");
  if (isDraft) {
    statusBadge.addClass("status-draft");
    statusBadge.appendText("Draft");
  } else {
    statusBadge.addClass("status-published");
    statusBadge.appendText("Published");
  }
  if (onPropertyToggle) {
    statusBadge.addClass("bases-cms-cursor-pointer");
    statusBadge.addEventListener("click", (e) => {
      e.stopPropagation();
      const newValue = !booleanValue;
      void onPropertyToggle(cardPath, "draft", newValue);
    });
  }
}

// src/utils/quick-edit-icon.ts
var import_obsidian10 = require("obsidian");
function showRenameDialog(app, file) {
  const modal = new import_obsidian10.Modal(app);
  modal.titleEl.setText("Rename file");
  const inputContainer = modal.contentEl.createDiv();
  setCssProps(inputContainer, {
    width: "100%"
  });
  const input = new import_obsidian10.TextComponent(inputContainer);
  input.setValue(file.basename);
  setCssProps(input.inputEl, {
    width: "100%",
    boxSizing: "border-box"
  });
  input.inputEl.focus();
  input.inputEl.select();
  const buttonContainer = modal.contentEl.createDiv({ cls: "modal-button-container" });
  const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
  cancelButton.addEventListener("click", () => modal.close());
  const renameButton = buttonContainer.createEl("button", {
    text: "Rename",
    cls: "mod-cta"
  });
  const handleRename = async () => {
    const newName = input.getValue().trim();
    if (!newName || newName === file.basename) {
      modal.close();
      return;
    }
    const pathParts = file.path.split("/");
    pathParts[pathParts.length - 1] = newName + (file.extension ? `.${file.extension}` : "");
    const newPath = pathParts.join("/");
    try {
      await app.fileManager.renameFile(file, newPath);
      modal.close();
    } catch (error) {
      console.error("[Bases CMS] Error renaming file:", error);
      modal.close();
    }
  };
  renameButton.addEventListener("click", () => {
    void handleRename();
  });
  input.inputEl.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      void handleRename();
    } else if (e.key === "Escape") {
      e.preventDefault();
      modal.close();
    }
  });
  modal.open();
}
function isObsidianRenameCommand(commandId) {
  const lowerId = commandId.toLowerCase();
  return commandId === "file-explorer:rename-file" || commandId === "rename-file" || commandId === "file:rename-file" || lowerId.includes("rename") && lowerId.includes("file") && !lowerId.includes(":");
}
function isProblematicCommand(commandId, commandName) {
  const lowerId = commandId.toLowerCase();
  const lowerName = commandName.toLowerCase();
  const problematicPatterns = [
    "add tag",
    "add-tag",
    "insert-template",
    "insert-template",
    "editor:",
    "markdown:"
  ];
  return problematicPatterns.some(
    (pattern) => lowerId.includes(pattern) || lowerName.includes(pattern)
  );
}
function setupQuickEditIcon(app, plugin, titleEl, cardEl, cardPath, settings) {
  if (!plugin.settings.enableQuickEdit || !plugin.settings.quickEditCommand || plugin.settings.quickEditCommand === "" || settings.hideQuickEditIcon) {
    return;
  }
  const quickEditIcon = titleEl.createSpan("bases-cms-quick-edit-icon");
  quickEditIcon.addClass("bases-cms-cursor-default");
  (0, import_obsidian10.setIcon)(quickEditIcon, plugin.settings.quickEditIcon || "pencil-line");
  titleEl.addEventListener("click", (e) => {
    if (quickEditIcon.contains(e.target)) {
      e.stopPropagation();
      e.stopImmediatePropagation();
    }
  }, true);
  cardEl.addEventListener("click", (e) => {
    void (async () => {
      var _a, _b, _c, _d;
      const target = e.target;
      if (!quickEditIcon.contains(target) && !target.closest(".bases-cms-quick-edit-icon")) {
        return;
      }
      e.stopPropagation();
      e.stopImmediatePropagation();
      e.preventDefault();
      const file = app.vault.getAbstractFileByPath(cardPath);
      if (file instanceof import_obsidian10.TFile) {
        const commandId = plugin.settings.quickEditCommand;
        const commandRegistry = app.commands;
        const command = (_a = commandRegistry == null ? void 0 : commandRegistry.commands) == null ? void 0 : _a[commandId];
        const commandName = (command == null ? void 0 : command.name) || "";
        const lowerCommandName = commandName.toLowerCase();
        if (isObsidianRenameCommand(commandId) || lowerCommandName.includes("rename") && lowerCommandName.includes("file")) {
          showRenameDialog(app, file);
          return;
        }
        if (isProblematicCommand(commandId, commandName)) {
          if (plugin.settings.quickEditOpenFile) {
          } else {
            new import_obsidian10.Notice(`The "${commandName}" command requires the file to be open in an editor. Enable "Attempt to open file and execute quick edit command" in settings to try anyway.`, 5e3);
            return;
          }
        }
        let helperCalled = false;
        try {
          let pluginId = null;
          let baseCommandId = commandId;
          if (commandId.includes(":")) {
            const parts = commandId.split(":");
            pluginId = parts[0];
            baseCommandId = parts.slice(1).join(":");
          } else {
            const appWithCommands = app;
            const commandRegistry2 = appWithCommands.commands;
            const command2 = (_b = commandRegistry2 == null ? void 0 : commandRegistry2.commands) == null ? void 0 : _b[commandId];
            if (command2) {
              const sourcePlugin = command2.plugin || command2.sourcePlugin;
              if (sourcePlugin) {
                pluginId = ((_c = sourcePlugin.manifest) == null ? void 0 : _c.id) || sourcePlugin.pluginId || null;
              }
            }
          }
          if (pluginId) {
            const plugins = app.plugins;
            const sourcePlugin = (_d = plugins == null ? void 0 : plugins.plugins) == null ? void 0 : _d[pluginId];
            if (sourcePlugin) {
              const methodName = baseCommandId.split("-").map(
                (part, index) => index === 0 ? part : part.charAt(0).toUpperCase() + part.slice(1)
              ).join("") + "ByPath";
              if (sourcePlugin && typeof sourcePlugin[methodName] === "function") {
                await sourcePlugin[methodName](cardPath);
                helperCalled = true;
                return;
              }
            }
          }
        } catch (e2) {
        }
        if (!helperCalled) {
          if (!plugin.settings.quickEditOpenFile) {
            new import_obsidian10.Notice(`This command doesn't have special handling. Enable "Attempt to open file and execute quick edit command" in settings to try executing it.`, 5e3);
            return;
          }
          const leaf = app.workspace.getLeaf(false);
          await leaf.openFile(file);
          app.workspace.setActiveLeaf(leaf, { focus: true });
          let attempts = 0;
          const maxAttempts = 30;
          const executeCommand = () => {
            const finalActiveFile = app.workspace.getActiveFile();
            if (finalActiveFile === file) {
              void (async () => {
                var _a2, _b2;
                try {
                  await ((_b2 = (_a2 = app.commands) == null ? void 0 : _a2.executeCommandById) == null ? void 0 : _b2.call(_a2, plugin.settings.quickEditCommand));
                } catch (e2) {
                }
              })();
            }
          };
          const checkEditorReady = () => {
            const view = leaf.view;
            const viewWithEditor = view;
            const activeFile = app.workspace.getActiveFile();
            if (view && "editor" in view && viewWithEditor.editor && activeFile === file) {
              requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                  setTimeout(() => {
                    executeCommand();
                  }, 200);
                });
              });
            } else if (attempts < maxAttempts) {
              attempts++;
              setTimeout(checkEditorReady, 50);
            }
          };
          checkEditorReady();
        }
      }
    })();
  }, true);
  quickEditIcon.addEventListener("mousedown", (e) => {
    e.stopPropagation();
    e.stopImmediatePropagation();
    e.preventDefault();
  }, true);
}

// src/utils/property-renderer.ts
var import_obsidian11 = require("obsidian");
var PropertyRenderer = class {
  constructor(app, getBasesConfig, getBasesController) {
    this.app = app;
    this.getBasesConfig = getBasesConfig;
    this.getBasesController = getBasesController;
  }
  /**
   * Renders property fields for a card
   * @param position - 'top' to render only top-positioned groups, 'bottom' to render only bottom-positioned groups, undefined to render all
   */
  renderProperties(cardEl, card, entry, settings, onPropertyToggle, position) {
    const props = [
      settings.propertyDisplay1,
      settings.propertyDisplay2,
      settings.propertyDisplay3,
      settings.propertyDisplay4,
      settings.propertyDisplay5,
      settings.propertyDisplay6,
      settings.propertyDisplay7,
      settings.propertyDisplay8,
      settings.propertyDisplay9,
      settings.propertyDisplay10,
      settings.propertyDisplay11,
      settings.propertyDisplay12,
      settings.propertyDisplay13,
      settings.propertyDisplay14
    ];
    const seen = /* @__PURE__ */ new Set();
    const effectiveProps = props.map((prop) => {
      if (!prop || prop === "") return "";
      if (seen.has(prop)) return "";
      seen.add(prop);
      return prop;
    });
    const values = effectiveProps.map((prop, index) => {
      if (!prop) return null;
      const cardProperty = `property${index + 1}`;
      const cardValue = card[cardProperty];
      if (cardValue !== void 0 && cardValue !== null) {
        return cardValue;
      }
      try {
        const value = entry.getValue(prop);
        if (!value) return null;
        if ("date" in value && value.date instanceof Date) {
          return value.date.toLocaleDateString();
        }
        if ("data" in value && value.data != null) {
          const data = value.data;
          if (Array.isArray(data)) {
            return data.map((item) => {
              if (item && typeof item === "object" && item !== null && !Array.isArray(item)) {
                return JSON.stringify(item);
              }
              return String(item);
            }).join(", ");
          }
          if (data && typeof data === "object" && data !== null && !Array.isArray(data)) {
            return JSON.stringify(data);
          }
          if (typeof data === "string" || typeof data === "number" || typeof data === "boolean") {
            return String(data);
          }
          return data ? JSON.stringify(data) : "";
        }
      } catch (e) {
      }
      return null;
    });
    const propertyGroups = [
      {
        props: [effectiveProps[0], effectiveProps[1]],
        values: [values[0], values[1]],
        sideBySide: settings.propertyLayout12SideBySide,
        position: settings.propertyGroup1Position
      },
      {
        props: [effectiveProps[2], effectiveProps[3]],
        values: [values[2], values[3]],
        sideBySide: settings.propertyLayout34SideBySide,
        position: settings.propertyGroup2Position
      },
      {
        props: [effectiveProps[4], effectiveProps[5]],
        values: [values[4], values[5]],
        sideBySide: settings.propertyLayout56SideBySide,
        position: settings.propertyGroup3Position
      },
      {
        props: [effectiveProps[6], effectiveProps[7]],
        values: [values[6], values[7]],
        sideBySide: settings.propertyLayout78SideBySide,
        position: settings.propertyGroup4Position
      },
      {
        props: [effectiveProps[8], effectiveProps[9]],
        values: [values[8], values[9]],
        sideBySide: settings.propertyLayout910SideBySide,
        position: settings.propertyGroup5Position
      },
      {
        props: [effectiveProps[10], effectiveProps[11]],
        values: [values[10], values[11]],
        sideBySide: settings.propertyLayout1112SideBySide,
        position: settings.propertyGroup6Position
      },
      {
        props: [effectiveProps[12], effectiveProps[13]],
        values: [values[12], values[13]],
        sideBySide: settings.propertyLayout1314SideBySide,
        position: settings.propertyGroup7Position
      }
    ];
    const topGroups = [];
    const bottomGroups = [];
    propertyGroups.forEach((group, index) => {
      const hasContent = group.props[0] !== "" || group.props[1] !== "";
      if (hasContent) {
        if (group.position === "top") {
          topGroups.push(group);
        } else {
          bottomGroups.push(group);
        }
      }
    });
    const shouldHideProperty = (propName, propValue) => {
      var _a, _b, _c;
      if (!propName || propName === "") return true;
      const isEmptyValue = propValue === null || propValue === "" || typeof propValue === "string" && propValue.trim() === "";
      let propertyExists = false;
      try {
        const filePath = (_a = entry == null ? void 0 : entry.file) == null ? void 0 : _a.path;
        if (filePath && ((_b = this.app) == null ? void 0 : _b.vault) && ((_c = this.app) == null ? void 0 : _c.metadataCache)) {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian11.TFile) {
            if (file.extension === "mdx") {
              propertyExists = !isEmptyValue;
            } else {
              const metadata = this.app.metadataCache.getFileCache(file);
              if (metadata && metadata.frontmatter) {
                const propertyNames = propName.split(",").map((p) => p.trim()).filter((p) => p);
                for (const prop of propertyNames) {
                  const propKey = prop.replace(/^(note|formula|file)\./, "");
                  if (propKey in metadata.frontmatter) {
                    propertyExists = true;
                    break;
                  }
                }
              }
            }
          }
        }
      } catch (e) {
      }
      if (shouldHideMissingProperties() && !propertyExists) {
        return true;
      }
      if (shouldHideEmptyProperties() && propertyExists && isEmptyValue) {
        return true;
      }
      if (shouldHideEmptyProperties() && isEmptyValue) {
        return true;
      }
      return false;
    };
    if ((position === "top" || position === void 0) && topGroups.length > 0) {
      const topMetaEl = cardEl.createDiv("card-properties properties-top");
      topGroups.forEach((group, groupIndex) => {
        const prop1ShouldRender = group.props[0] && !shouldHideProperty(group.props[0], group.values[0]);
        const prop2ShouldRender = group.props[1] && !shouldHideProperty(group.props[1], group.values[1]);
        if (!prop1ShouldRender && !prop2ShouldRender) {
          return;
        }
        const rowEl = topMetaEl.createDiv(`property-row property-row-group-${groupIndex + 1}`);
        if (group.sideBySide) {
          rowEl.addClass("property-row-side-by-side");
        }
        const field1El = rowEl.createDiv("property-field property-field-1");
        if (prop1ShouldRender) {
          this.renderPropertyContent(field1El, group.props[0], group.values[0], card, entry, settings, onPropertyToggle);
        }
        const field2El = rowEl.createDiv("property-field property-field-2");
        if (prop2ShouldRender) {
          this.renderPropertyContent(field2El, group.props[1], group.values[1], card, entry, settings, onPropertyToggle);
        }
      });
    }
    if ((position === "bottom" || position === void 0) && bottomGroups.length > 0) {
      const bottomMetaEl = cardEl.createDiv("card-properties properties-bottom");
      bottomGroups.forEach((group, groupIndex) => {
        const prop1ShouldRender = group.props[0] && !shouldHideProperty(group.props[0], group.values[0]);
        const prop2ShouldRender = group.props[1] && !shouldHideProperty(group.props[1], group.values[1]);
        if (!prop1ShouldRender && !prop2ShouldRender) {
          return;
        }
        const rowEl = bottomMetaEl.createDiv(`property-row property-row-group-${groupIndex + 1}`);
        if (group.sideBySide) {
          rowEl.addClass("property-row-side-by-side");
        }
        const field1El = rowEl.createDiv("property-field property-field-1");
        if (prop1ShouldRender) {
          this.renderPropertyContent(field1El, group.props[0], group.values[0], card, entry, settings, onPropertyToggle);
        }
        const field2El = rowEl.createDiv("property-field property-field-2");
        if (prop2ShouldRender) {
          this.renderPropertyContent(field2El, group.props[1], group.values[1], card, entry, settings, onPropertyToggle);
        }
      });
    }
  }
  /**
   * Renders individual property content
   */
  renderPropertyContent(container, propertyName, resolvedValue, card, entry, settings, onPropertyToggle) {
    if (propertyName === "") return;
    if (resolvedValue === null && shouldHideMissingProperties()) {
      return;
    }
    if (resolvedValue === "" && shouldHideEmptyProperties()) {
      return;
    }
    if (!resolvedValue && settings.propertyLabels === "hide") {
      return;
    }
    if (settings.propertyLabels === "hide") {
      if ((propertyName === "tags" || propertyName === "note.tags") && card.yamlTags.length === 0) {
        return;
      }
      if ((propertyName === "file.tags" || propertyName === "file tags") && card.tags.length === 0) {
        return;
      }
    }
    const basesConfig = this.getBasesConfig ? this.getBasesConfig() : void 0;
    const basesController = this.getBasesController ? this.getBasesController() : void 0;
    const propertyLabel = getPropertyLabel(propertyName, this.app, basesConfig, basesController);
    const isCustomLabel = propertyLabel.toLowerCase() !== propertyName.toLowerCase();
    if (settings.propertyLabels === "above") {
      const labelEl = container.createDiv("property-label");
      if (isCustomLabel) {
        labelEl.addClass("property-label-custom");
      }
      labelEl.textContent = propertyLabel;
    }
    const metaContent = container.createDiv("property-content");
    if (settings.propertyLabels === "inline") {
      metaContent.addClass("property-content-inline");
    }
    if (settings.propertyLabels === "inline") {
      const labelSpan = metaContent.createSpan("property-label-inline");
      labelSpan.textContent = propertyLabel + ": ";
    }
    if (!resolvedValue) {
      const emptyMarker = metaContent.createSpan("property-empty-marker");
      emptyMarker.textContent = getEmptyValueMarker();
      return;
    }
    const isKnownTimestampProperty = propertyName === "file.mtime" || propertyName === "file.ctime" || propertyName === "modified time" || propertyName === "created time";
    if (isKnownTimestampProperty) {
      const timestampWrapper = metaContent.createSpan();
      timestampWrapper.appendText(resolvedValue);
    } else if ((propertyName === "tags" || propertyName === "note.tags") && card.yamlTags.length > 0) {
      const tagsWrapper = metaContent.createDiv("tags-wrapper");
      const tagStyle = getTagStyle();
      if (tagStyle !== "plain") {
        tagsWrapper.addClass(`tag-style-${tagStyle}`);
      }
      card.yamlTags.forEach((tag) => {
        const tagEl = tagsWrapper.createEl("a", {
          cls: "tag",
          text: showTagHashPrefix() ? `#${tag}` : tag,
          href: "#"
        });
        tagEl.addEventListener("click", (e) => {
          var _a, _b, _c;
          e.preventDefault();
          const searchPlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["global-search"];
          if ((_c = searchPlugin == null ? void 0 : searchPlugin.instance) == null ? void 0 : _c.openGlobalSearch) {
            searchPlugin.instance.openGlobalSearch("tag:" + tag);
          }
        });
      });
    } else if ((propertyName === "file.tags" || propertyName === "file tags") && card.tags.length > 0) {
      const tagsWrapper = metaContent.createDiv("tags-wrapper");
      const tagStyle = getTagStyle();
      if (tagStyle !== "plain") {
        tagsWrapper.addClass(`tag-style-${tagStyle}`);
      }
      card.tags.forEach((tag) => {
        const tagEl = tagsWrapper.createEl("a", {
          cls: "tag",
          text: showTagHashPrefix() ? `#${tag}` : tag,
          href: "#"
        });
        tagEl.addEventListener("click", (e) => {
          var _a, _b, _c;
          e.preventDefault();
          const searchPlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["global-search"];
          if ((_c = searchPlugin == null ? void 0 : searchPlugin.instance) == null ? void 0 : _c.openGlobalSearch) {
            searchPlugin.instance.openGlobalSearch("tag:" + tag);
          }
        });
      });
    } else {
      if (!this.app || !this.app.metadataCache) {
        const textWrapper = metaContent.createDiv("text-wrapper");
        this.renderPropertyValueWithLinks(textWrapper, resolvedValue, card.path, propertyName);
        return;
      }
      let propInfo = void 0;
      try {
        const metadataCache = this.app.metadataCache;
        const getAllPropertyInfos = metadataCache.getAllPropertyInfos;
        if (typeof getAllPropertyInfos === "function") {
          const propertyInfos = getAllPropertyInfos();
          propInfo = propertyInfos[propertyName.toLowerCase()];
        }
      } catch (e) {
      }
      let entryValue = null;
      try {
        if (entry && typeof entry.getValue === "function") {
          entryValue = entry.getValue(propertyName);
        }
      } catch (e) {
      }
      const isCheckbox = (propInfo == null ? void 0 : propInfo.widget) === "checkbox" || entryValue && "data" in entryValue && typeof entryValue.data === "boolean";
      if (isCheckbox && onPropertyToggle) {
        const checkbox = metaContent.createEl("input", { type: "checkbox" });
        checkbox.checked = entryValue && "data" in entryValue ? Boolean(entryValue.data) : false;
        metaContent.createSpan({ text: propertyLabel });
        checkbox.addEventListener("change", (e) => {
          e.stopPropagation();
          const checked = checkbox.checked;
          void (async () => {
            try {
              const cleanProperty = propertyName.startsWith("note.") ? propertyName.substring(5) : propertyName;
              await onPropertyToggle(card.path, cleanProperty, checked);
            } catch (e2) {
              checkbox.checked = !checked;
            }
          })();
        });
        checkbox.addEventListener("click", (e) => {
          e.stopPropagation();
        });
      } else {
        const textWrapper = metaContent.createDiv("text-wrapper");
        this.renderPropertyValueWithLinks(textWrapper, resolvedValue, card.path, propertyName);
      }
    }
    if (!metaContent.textContent || metaContent.textContent.trim().length === 0) {
      metaContent.remove();
    }
  }
  /**
   * Renders property value with clickable links
   * Detects wikilinks [[...]], markdown links [...](...), and URLs
   * For image properties, also makes file paths clickable (like Obsidian does)
   */
  renderPropertyValueWithLinks(container, value, sourcePath, propertyName) {
    if (!value) {
      container.appendText(getEmptyValueMarker());
      return;
    }
    const trimmedValue = value.trim();
    if ((trimmedValue.startsWith("http://") || trimmedValue.startsWith("https://")) && !trimmedValue.includes(" ")) {
      const linkEl = container.createEl("a", {
        cls: "external-link",
        href: trimmedValue
      });
      linkEl.textContent = trimmedValue;
      linkEl.setAttr("target", "_blank");
      linkEl.setAttr("rel", "noopener");
      linkEl.addEventListener("click", (e) => {
        e.stopPropagation();
      });
      return;
    }
    const isImageProperty = propertyName && (propertyName.toLowerCase().includes("image") || propertyName.toLowerCase() === "cover" || propertyName.toLowerCase() === "thumbnail");
    if (isImageProperty && !trimmedValue.includes(" ") && !trimmedValue.startsWith("http://") && !trimmedValue.startsWith("https://") && (trimmedValue.includes("/") || trimmedValue.includes("\\") || trimmedValue.match(/\.(png|jpg|jpeg|gif|svg|webp|mp4|mov|avi)$/i))) {
      const linkEl = container.createEl("a", {
        cls: "internal-link",
        href: trimmedValue
      });
      linkEl.textContent = trimmedValue;
      linkEl.addEventListener("click", (e) => {
        e.stopPropagation();
        e.preventDefault();
        const newLeaf = e.metaKey || e.ctrlKey;
        void this.app.workspace.openLinkText(trimmedValue, sourcePath, newLeaf);
      });
      return;
    }
    const wikilinkRegex = /\[\[([^\]]+)\]\]/g;
    const markdownLinkRegex = /\[([^\]]+)\]\(([^)]+)\)/g;
    const matches = [];
    for (const m of value.matchAll(wikilinkRegex)) {
      if (m.index !== void 0) {
        matches.push({ index: m.index, type: "wikilink", match: m });
      }
    }
    for (const m of value.matchAll(markdownLinkRegex)) {
      if (m.index !== void 0) {
        matches.push({ index: m.index, type: "markdown", match: m });
      }
    }
    matches.sort((a, b) => a.index - b.index);
    let lastIndex = 0;
    for (const { index, type, match } of matches) {
      if (index > lastIndex) {
        container.appendText(value.substring(lastIndex, index));
      }
      if (type === "wikilink") {
        const linkContent = match[1];
        const parts = linkContent.split("|");
        const linkPath = parts[0].trim();
        const displayText = parts.length > 1 ? parts[1].trim() : linkPath;
        const linkEl = container.createEl("a", {
          cls: "internal-link",
          href: linkPath
        });
        linkEl.textContent = displayText;
        linkEl.addEventListener("click", (e) => {
          e.stopPropagation();
          e.preventDefault();
          const newLeaf = e.metaKey || e.ctrlKey;
          void this.app.workspace.openLinkText(linkPath, sourcePath, newLeaf);
        });
      } else if (type === "markdown") {
        const linkText = match[1];
        const linkUrl = match[2];
        if (linkUrl.startsWith("http://") || linkUrl.startsWith("https://")) {
          const linkEl = container.createEl("a", {
            cls: "external-link",
            href: linkUrl
          });
          linkEl.textContent = linkText;
          linkEl.setAttr("target", "_blank");
          linkEl.setAttr("rel", "noopener");
          linkEl.addEventListener("click", (e) => {
            e.stopPropagation();
          });
        } else {
          const linkEl = container.createEl("a", {
            cls: "internal-link",
            href: linkUrl
          });
          linkEl.textContent = linkText;
          linkEl.addEventListener("click", (e) => {
            e.stopPropagation();
            e.preventDefault();
            const newLeaf = e.metaKey || e.ctrlKey;
            void this.app.workspace.openLinkText(linkUrl, sourcePath, newLeaf);
          });
        }
      }
      lastIndex = index + match[0].length;
    }
    if (lastIndex < value.length) {
      container.appendText(value.substring(lastIndex));
    } else if (matches.length === 0) {
      container.appendText(value);
    }
  }
};

// src/views/shared-renderer.ts
init_frontmatter_helper();
var SharedCardRenderer = class {
  constructor(app, plugin, propertyObservers, updateLayoutRef, basesConfig, basesController) {
    this.app = app;
    this.plugin = plugin;
    this.propertyObservers = propertyObservers;
    this.updateLayoutRef = updateLayoutRef;
    this.basesConfig = basesConfig;
    this.basesController = basesController;
    this.propertyRenderer = new PropertyRenderer(
      this.app,
      () => this.basesConfig,
      // Pass a getter function so it always gets the latest config
      () => this.basesController
      // Pass a getter function so it always gets the latest controller
    );
  }
  /**
   * Set MDX frontmatter cache for synchronous access during rendering
   */
  setMdxFrontmatterCache(cache) {
    this.mdxFrontmatterCache = cache;
  }
  /**
   * Renders a complete card with CMS features
   */
  renderCard(container, card, entry, settings, hoverParent, isSelected, onSelect, onPropertyToggle, toolbarActions) {
    const cardEl = container.createDiv("card bases-cms-card");
    setCssProps(cardEl, {
      display: "block",
      position: "relative"
    });
    if (settings.imageFormat === "cover") {
      cardEl.classList.add("image-format-cover");
    } else if (settings.imageFormat === "thumbnail") {
      cardEl.classList.add("image-format-thumbnail");
      cardEl.classList.add(`thumbnail-${settings.imagePosition}`);
    }
    cardEl.setAttribute("data-path", card.path);
    cardEl.setAttribute("data-href", card.path);
    cardEl.addClass("bases-cms-cursor-pointer");
    const checkboxEl = cardEl.createDiv("bases-cms-select-checkbox");
    const checkbox = checkboxEl.createEl("input", { type: "checkbox", cls: "selection-checkbox" });
    checkbox.checked = isSelected;
    checkbox.addEventListener("change", (e) => {
      e.stopPropagation();
      e.stopImmediatePropagation();
      onSelect(card.path, checkbox.checked);
    });
    checkbox.addEventListener("click", (e) => {
      e.stopPropagation();
      e.stopImmediatePropagation();
    });
    if (settings.showDraftStatus && settings.imageFormat !== "cover") {
      renderDraftStatusBadge(cardEl, entry, card.path, settings, onPropertyToggle, this.app, this.mdxFrontmatterCache);
    }
    cardEl.addEventListener("click", (e) => {
      const target = e.target;
      const quickEditIcon = target.closest(".bases-cms-quick-edit-icon");
      if (quickEditIcon) {
        e.stopPropagation();
        e.stopImmediatePropagation();
        e.preventDefault();
        return;
      }
      if (checkboxEl.contains(target) || target.tagName === "INPUT" || target.closest("input") || target.closest(".bases-cms-property") || target.closest(".card-status-badge")) {
        return;
      }
      const newLeaf = e.metaKey || e.ctrlKey;
      void this.app.workspace.openLinkText(card.path, "", newLeaf);
    });
    cardEl.addEventListener("contextmenu", (e) => {
      const target = e.target;
      if (checkboxEl.contains(target) || target.tagName === "INPUT" || target.closest("input") || target.closest(".bases-cms-property") || target.closest(".card-status-badge") || target.closest(".bases-cms-quick-edit-icon")) {
        return;
      }
      const file = this.app.vault.getAbstractFileByPath(card.path);
      if (file && file instanceof import_obsidian12.TFile) {
        e.stopPropagation();
        const menu = new import_obsidian12.Menu();
        const currentlySelected = checkbox.checked;
        if (currentlySelected) {
          menu.addItem((item) => {
            item.setTitle("Unselect");
            item.setIcon("square");
            item.onClick(() => {
              onSelect(card.path, false);
            });
          });
        } else {
          menu.addItem((item) => {
            item.setTitle("Select");
            item.setIcon("copy-check");
            item.onClick(() => {
              onSelect(card.path, true);
            });
          });
        }
        menu.addSeparator();
        this.app.workspace.trigger("file-menu", menu, file, "bases");
        menu.addSeparator();
        menu.addItem((item) => {
          item.setTitle("Delete");
          item.setIcon("trash-2");
          item.onClick(async () => {
            if (toolbarActions) {
              await toolbarActions.handleDelete();
            }
          });
        });
        menu.showAtMouseEvent(e);
        setTimeout(() => {
          const menuEl = document.querySelector(".menu");
          if (!menuEl) return;
          const menuItems = Array.from(menuEl.querySelectorAll(".menu-item"));
          const deleteItem = menuItems.find((item) => {
            var _a;
            const title = (_a = item.textContent) == null ? void 0 : _a.trim();
            return title === "Delete";
          });
          if (deleteItem) {
            deleteItem.addClass("is-danger");
            const icon = deleteItem.querySelector("svg");
            if (icon) {
              setCssProps(icon, {
                color: "var(--text-error)",
                stroke: "var(--text-error)"
              });
            }
            const title = deleteItem.querySelector(".menu-item-title");
            if (title) {
              setCssProps(title, {
                color: "var(--text-error)"
              });
            }
          }
        }, 0);
      }
    });
    const titleEl = cardEl.createDiv("card-title");
    titleEl.appendText(card.title);
    setupQuickEditIcon(this.app, this.plugin, titleEl, cardEl, card.path, settings);
    if (settings.showDate && settings.dateProperty) {
      let dateValue = entry.getValue(settings.dateProperty);
      const hasValidDate = dateValue && ("date" in dateValue && dateValue.date instanceof Date || "data" in dateValue && dateValue.data != null);
      if (!hasValidDate) {
        const file = this.app.vault.getAbstractFileByPath(entry.file.path);
        if (file instanceof import_obsidian12.TFile && file.extension === "mdx") {
          void (async () => {
            const frontmatter = await getFileFrontmatter(this.app, file);
            if (frontmatter) {
              const cleanProp = settings.dateProperty.startsWith("note.") ? settings.dateProperty.substring(5) : settings.dateProperty;
              const frontmatterValue = frontmatter[cleanProp];
              if (frontmatterValue != null) {
                let date = null;
                if (frontmatterValue instanceof Date) {
                  date = frontmatterValue;
                } else if (frontmatterValue && typeof frontmatterValue === "object" && "getTime" in frontmatterValue) {
                  const dateLike = frontmatterValue;
                  try {
                    const timestamp = dateLike.getTime();
                    if (typeof timestamp === "number" && !isNaN(timestamp)) {
                      date = new Date(timestamp);
                    }
                  } catch (e) {
                  }
                }
                if (!date && typeof frontmatterValue === "string") {
                  const dateStr = frontmatterValue.trim();
                  const isoDateStr = dateStr.includes("T") ? dateStr : `${dateStr}T00:00:00`;
                  const parsedDate = new Date(isoDateStr);
                  if (!isNaN(parsedDate.getTime())) {
                    date = parsedDate;
                  } else {
                    const fallbackDate = new Date(dateStr);
                    if (!isNaN(fallbackDate.getTime())) {
                      date = fallbackDate;
                    }
                  }
                }
                if (!date && typeof frontmatterValue === "number") {
                  const parsedDate = new Date(frontmatterValue);
                  if (!isNaN(parsedDate.getTime())) {
                    date = parsedDate;
                  }
                }
                if (date) {
                  requestAnimationFrame(() => {
                    if (cardEl.isConnected) {
                      let dateString;
                      if (settings.dateIncludeTime) {
                        const datePart = date.toLocaleDateString();
                        const timePart = date.toLocaleTimeString(void 0, {
                          hour: "numeric",
                          minute: "2-digit",
                          hour12: true
                        });
                        dateString = `${datePart}, ${timePart}`;
                      } else {
                        dateString = date.toLocaleDateString();
                      }
                      let dateEl = cardEl.querySelector(".card-date");
                      if (!dateEl) {
                        const titleEl2 = cardEl.querySelector(".card-title");
                        if (titleEl2 && titleEl2.parentElement) {
                          dateEl = titleEl2.parentElement.createDiv("card-date");
                          titleEl2.parentElement.insertBefore(dateEl, titleEl2.nextSibling);
                        } else {
                          dateEl = cardEl.createDiv("card-date");
                        }
                      }
                      dateEl.setText(dateString);
                    }
                  });
                }
              }
            }
          })();
        }
      }
      if (hasValidDate && dateValue) {
        const dateObj = dateValue;
        let date = null;
        if (dateObj && "date" in dateObj && dateObj.date instanceof Date) {
          date = dateObj.date;
        } else if (dateObj && "data" in dateObj && dateObj.data) {
          const data = dateObj.data;
          if (data instanceof Date) {
            date = data;
          } else if (typeof data === "string" || typeof data === "number") {
            const parsedDate = new Date(data);
            if (!isNaN(parsedDate.getTime())) {
              date = parsedDate;
            }
          }
        }
        if (date) {
          let dateString;
          if (settings.dateIncludeTime) {
            const datePart = date.toLocaleDateString();
            const timePart = date.toLocaleTimeString(void 0, {
              hour: "numeric",
              minute: "2-digit",
              hour12: true
            });
            dateString = `${datePart}, ${timePart}`;
          } else {
            dateString = date.toLocaleDateString();
          }
          const dateEl = cardEl.createDiv("card-date");
          dateEl.appendText(dateString);
        }
      }
    }
    this.propertyRenderer.renderProperties(cardEl, card, entry, settings, onPropertyToggle, "top");
    if (settings.showTextPreview || settings.showTags && card.displayTags && card.displayTags.length > 0 || settings.imageFormat === "thumbnail" || settings.imageFormat === "cover" || settings.imageFormat !== "none" && (card.imageUrl || card.hasImageAvailable)) {
      const contentContainer = cardEl.createDiv("card-content");
      if (settings.imageFormat === "thumbnail" && card.imageUrl) {
        const rawUrls = Array.isArray(card.imageUrl) ? card.imageUrl : [card.imageUrl];
        const imageUrls = rawUrls.filter((url) => url && typeof url === "string" && url.trim().length > 0);
        if (imageUrls.length > 0) {
          const imageEl = contentContainer.createDiv("card-thumbnail");
          const imageEmbedContainer = imageEl.createDiv("image-embed");
          const originalUrl = imageUrls[0];
          void (async () => {
            const finalUrl = await convertGifToStatic(originalUrl, this.plugin.settings.forceStaticGifImages);
            imageEmbedContainer.style.backgroundImage = `url("${finalUrl}")`;
          })();
          imageEmbedContainer.style.backgroundImage = `url("${originalUrl}")`;
          setCssProps(imageEmbedContainer, {
            backgroundSize: "cover",
            backgroundPosition: "center center",
            backgroundRepeat: "no-repeat"
          });
        }
      }
      if (settings.imageFormat === "thumbnail") {
        const textWrapper = contentContainer.createDiv("card-text-wrapper");
        if (settings.showTextPreview) {
          const textPreviewEl = textWrapper.createDiv("card-text-preview");
          if (card.snippet) {
            textPreviewEl.setText(card.snippet);
          }
          cardEl.__textPreviewEl = textPreviewEl;
          cardEl.__cardPath = card.path;
        }
        if (settings.showTags && card.displayTags && card.displayTags.length > 0) {
          const tagsContainer = textWrapper.createDiv("card-tags");
          const tagStyle = getTagStyle();
          if (tagStyle !== "plain") {
            tagsContainer.addClass(`tag-style-${tagStyle}`);
          }
          const maxTags = settings.maxTagsToShow;
          const tagsToShow = card.displayTags.slice(0, maxTags);
          const remainingCount = card.displayTags.length - maxTags;
          tagsToShow.forEach((tag) => {
            const tagEl = tagsContainer.createSpan("card-tag");
            tagEl.appendText(showTagHashPrefix() ? `#${tag}` : tag);
          });
          if (remainingCount > 0) {
            const moreEl = tagsContainer.createSpan("card-tag-more");
            moreEl.appendText(`+${remainingCount} more`);
          }
        }
      } else {
        if (settings.showTextPreview) {
          const textPreviewEl = contentContainer.createDiv("card-text-preview");
          if (card.snippet) {
            textPreviewEl.setText(card.snippet);
          }
          cardEl.__textPreviewEl = textPreviewEl;
          cardEl.__cardPath = card.path;
        }
        if (settings.showTags && card.displayTags && card.displayTags.length > 0) {
          const tagsContainer = contentContainer.createDiv("card-tags");
          const tagStyle = getTagStyle();
          if (tagStyle !== "plain") {
            tagsContainer.addClass(`tag-style-${tagStyle}`);
          }
          const maxTags = settings.maxTagsToShow;
          const tagsToShow = card.displayTags.slice(0, maxTags);
          const remainingCount = card.displayTags.length - maxTags;
          tagsToShow.forEach((tag) => {
            const tagEl = tagsContainer.createSpan("card-tag");
            tagEl.appendText(showTagHashPrefix() ? `#${tag}` : tag);
          });
          if (remainingCount > 0) {
            const moreEl = tagsContainer.createSpan("card-tag-more");
            moreEl.appendText(`+${remainingCount} more`);
          }
        }
      }
      if (settings.imageFormat === "cover") {
        if (card.imageUrl) {
          const rawUrls = Array.isArray(card.imageUrl) ? card.imageUrl : [card.imageUrl];
          const imageUrls = rawUrls.filter((url) => url && typeof url === "string" && url.trim().length > 0);
          if (imageUrls.length > 0) {
            const imageEl = contentContainer.createDiv("card-cover");
            const imageEmbedContainer = imageEl.createDiv("image-embed");
            const originalUrl = imageUrls[0];
            void (async () => {
              const finalUrl = await convertGifToStatic(originalUrl, this.plugin.settings.forceStaticGifImages);
              imageEmbedContainer.style.backgroundImage = `url("${finalUrl}")`;
            })();
            imageEmbedContainer.style.backgroundImage = `url("${originalUrl}")`;
            setCssProps(imageEmbedContainer, {
              backgroundSize: "cover",
              backgroundPosition: "center center",
              backgroundRepeat: "no-repeat"
            });
            if (settings.showDraftStatus) {
              renderDraftStatusBadge(imageEl, entry, card.path, settings, onPropertyToggle, this.app, this.mdxFrontmatterCache);
            }
            this.propertyRenderer.renderProperties(cardEl, card, entry, settings, onPropertyToggle, "bottom");
            return;
          }
        }
        if (card.hasImageAvailable && !card.imageUrl) {
          const placeholderEl = contentContainer.createDiv("card-cover-placeholder");
          renderDraftStatusBadge(placeholderEl, entry, card.path, settings, onPropertyToggle, this.app, this.mdxFrontmatterCache);
        } else if (!card.imageUrl) {
          const placeholderEl = contentContainer.createDiv("card-cover-placeholder");
          renderDraftStatusBadge(placeholderEl, entry, card.path, settings, onPropertyToggle, this.app, this.mdxFrontmatterCache);
        }
      }
    }
    this.propertyRenderer.renderProperties(cardEl, card, entry, settings, onPropertyToggle, "bottom");
    return;
  }
};

// src/components/bulk-toolbar.ts
var import_obsidian21 = require("obsidian");

// src/utils/bulk-operations.ts
var import_obsidian13 = require("obsidian");

// src/utils/frontmatter.ts
init_frontmatter_helper();
async function addProperties(app, file, props, overwrite) {
  await processFileFrontMatter(app, file, (frontmatter) => {
    for (const [key, value] of props) {
      if (key === "tags" && !Object.prototype.hasOwnProperty.call(frontmatter, "tags") && !Array.isArray(value.data)) {
        frontmatter[key] = [value.data];
        continue;
      }
      if (!frontmatter[key] || overwrite) {
        frontmatter[key] = value.data;
        continue;
      }
      const type1 = value.type;
      const existingValue = frontmatter[key];
      const type2 = Array.isArray(existingValue) ? "list" : typeof existingValue === "number" ? "number" : typeof existingValue === "boolean" ? "checkbox" : "text";
      if (canBeAppended(type1, type2)) {
        if (frontmatter[key] === value.data) continue;
        if (!value.data) continue;
        const arr = mergeIntoArrays(frontmatter[key], value.data);
        frontmatter[key] = arr;
        continue;
      } else {
        frontmatter[key] = value.data;
        continue;
      }
    }
  });
}
async function removeProperties(app, file, props) {
  await processFileFrontMatter(app, file, (frontmatter) => {
    for (const prop of props) {
      frontmatter[prop] = void 0;
    }
  });
}
function canBeAppended(str1, str2) {
  const arr = ["number", "date", "datetime", "checkbox"];
  if (arr.includes(str1) || arr.includes(str2)) return false;
  return true;
}
function mergeIntoArrays(...args) {
  const arrays = args.map((arg) => Array.isArray(arg) ? arg : [arg]);
  const flattened = arrays.flat();
  const unique = [...new Set(flattened)];
  return unique;
}

// src/utils/bulk-operations.ts
init_frontmatter_helper();
var BulkOperations = class {
  constructor(app) {
    this.app = app;
  }
  /**
   * Set draft status for multiple files
   * Respects filename prefix mode and reverse logic settings
   */
  async setDraft(files, draft, settings) {
    await this.batchProcessFiles(files, async (file) => {
      if (settings) {
        if (settings.draftStatusUseFilenamePrefix) {
          const fileName = file.basename;
          const startsWithUnderscore = fileName.startsWith("_");
          const currentPath = file.path;
          const pathParts = currentPath.split("/");
          let targetValue = draft;
          if (settings.draftStatusReverse) {
            targetValue = !draft;
          }
          if (targetValue === true) {
            if (!startsWithUnderscore) {
              const newName = `_${fileName}${file.extension ? `.${file.extension}` : ""}`;
              pathParts[pathParts.length - 1] = newName;
              const newPath = pathParts.join("/");
              await this.app.fileManager.renameFile(file, newPath);
            }
          } else {
            if (startsWithUnderscore) {
              const newName = fileName.substring(1) + (file.extension ? `.${file.extension}` : "");
              pathParts[pathParts.length - 1] = newName;
              const newPath = pathParts.join("/");
              await this.app.fileManager.renameFile(file, newPath);
            }
          }
        } else {
          const cleanConfigProperty = settings.draftStatusProperty && settings.draftStatusProperty.trim() ? settings.draftStatusProperty.startsWith("note.") ? settings.draftStatusProperty.substring(5) : settings.draftStatusProperty : "draft";
          let targetValue = draft;
          if (settings.draftStatusReverse) {
            targetValue = !draft;
          }
          await processFileFrontMatter(this.app, file, (frontmatter) => {
            frontmatter[cleanConfigProperty] = targetValue;
          });
        }
      } else {
        await processFileFrontMatter(this.app, file, (frontmatter) => {
          frontmatter.draft = draft;
        });
      }
    });
    new import_obsidian13.Notice(`Set ${files.length} file${files.length !== 1 ? "s" : ""} to ${draft ? "draft" : "published"}`);
  }
  /**
   * Add tags to multiple files
   */
  async addTags(files, tags) {
    const props = /* @__PURE__ */ new Map();
    props.set("tags", {
      type: "tags",
      data: tags,
      overwrite: false,
      delimiter: ","
    });
    await this.batchProcessFiles(files, async (file) => {
      await addProperties(this.app, file, props, false);
    });
    new import_obsidian13.Notice(`Added tags to ${files.length} file${files.length !== 1 ? "s" : ""}`);
  }
  /**
   * Remove tags from multiple files
   */
  async removeTags(files, tagsToRemove) {
    await this.batchProcessFiles(files, async (file) => {
      const frontmatter = await getFileFrontmatter(this.app, file);
      if (frontmatter == null ? void 0 : frontmatter.tags) {
        const fmTags = frontmatter.tags;
        const currentTags = Array.isArray(fmTags) ? fmTags : [fmTags];
        const updatedTags = currentTags.filter(
          (tag) => !tagsToRemove.includes(tag)
        );
        await processFileFrontMatter(this.app, file, (fm) => {
          if (updatedTags.length > 0) {
            fm.tags = updatedTags;
          } else {
            fm.tags = void 0;
          }
        });
      }
    });
    new import_obsidian13.Notice(`Removed tags from ${files.length} file${files.length !== 1 ? "s" : ""}`);
  }
  /**
   * Set a property value for multiple files
   */
  async setProperty(files, property, value, propertyType = "text") {
    const cleanProperty = property.startsWith("note.") ? property.substring(5) : property;
    const props = /* @__PURE__ */ new Map();
    props.set(cleanProperty, {
      type: propertyType,
      data: value,
      overwrite: true,
      delimiter: ","
    });
    await this.batchProcessFiles(files, async (file) => {
      await addProperties(this.app, file, props, true);
    });
    new import_obsidian13.Notice(`Set ${cleanProperty} on ${files.length} file${files.length !== 1 ? "s" : ""}`);
  }
  /**
   * Remove a property from multiple files
   */
  async removeProperty(files, property) {
    const cleanProperty = property.startsWith("note.") ? property.substring(5) : property;
    await this.batchProcessFiles(files, async (file) => {
      await removeProperties(this.app, file, [cleanProperty]);
    });
    new import_obsidian13.Notice(`Removed ${cleanProperty} from ${files.length} file${files.length !== 1 ? "s" : ""}`);
  }
  /**
   * Batch process files with progress indication
   */
  async batchProcessFiles(files, processor) {
    let processed = 0;
    const total = files.length;
    for (const filePath of files) {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian13.TFile) {
        try {
          await processor(file);
          processed++;
        } catch (error) {
          console.error(`Error processing ${filePath}:`, error);
        }
      }
    }
    if (processed < total) {
      new import_obsidian13.Notice(`Processed ${processed} of ${total} files`);
    }
  }
};

// src/components/manage-tags-modal.ts
var import_obsidian14 = require("obsidian");
init_frontmatter_helper();
var ManageTagsModal = class extends import_obsidian14.Modal {
  constructor(app, files) {
    super(app);
    this.tagsToAdd = "";
    this.tagsToRemove = /* @__PURE__ */ new Set();
    this.files = files;
    this.bulkOps = new BulkOperations(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    new import_obsidian14.Setting(contentEl).setName("Manage tags").setHeading();
    contentEl.createEl("p", { text: `Managing tags for ${this.files.length} file${this.files.length !== 1 ? "s" : ""}` });
    new import_obsidian14.Setting(contentEl).setName("Add tags").setDesc("Enter tags to add (comma-separated).").addText((text) => {
      text.setPlaceholder("tag1, tag2, tag3").onChange((value) => {
        this.tagsToAdd = value;
      });
    });
    contentEl.createEl("h3", { text: "Remove tags" });
    const removeContainer = contentEl.createDiv();
    const allTags = /* @__PURE__ */ new Set();
    for (const filePath of this.files) {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian14.TFile) {
        if (file.extension === "mdx") {
          void (async () => {
            const frontmatter = await getFileFrontmatter(this.app, file);
            if (frontmatter == null ? void 0 : frontmatter.tags) {
              const tags = Array.isArray(frontmatter.tags) ? frontmatter.tags : [frontmatter.tags];
              tags.forEach((tag) => {
                if (!allTags.has(tag)) {
                  allTags.add(tag);
                  if (this.contentEl && this.contentEl.isConnected && removeContainer.isConnected) {
                    this.addTagCheckbox(removeContainer, tag);
                  }
                }
              });
            }
          })();
        } else {
          const metadata = this.app.metadataCache.getFileCache(file);
          const frontmatter = metadata == null ? void 0 : metadata.frontmatter;
          if (frontmatter == null ? void 0 : frontmatter.tags) {
            const tags = Array.isArray(frontmatter.tags) ? frontmatter.tags : [frontmatter.tags];
            tags.forEach((tag) => allTags.add(tag));
          }
        }
      }
    }
    for (const tag of Array.from(allTags).sort()) {
      new import_obsidian14.Setting(removeContainer).setName(tag).addToggle((toggle) => {
        toggle.setValue(this.tagsToRemove.has(tag)).onChange((value) => {
          if (value) {
            this.tagsToRemove.add(tag);
          } else {
            this.tagsToRemove.delete(tag);
          }
        });
      });
    }
    const buttonContainer = contentEl.createDiv();
    buttonContainer.addClass("bases-cms-modal-button-container");
    const cancelBtn = buttonContainer.createEl("button");
    cancelBtn.setText("Cancel");
    cancelBtn.addEventListener("click", () => this.close());
    const applyBtn = buttonContainer.createEl("button");
    applyBtn.setText("Apply");
    applyBtn.addClass("mod-cta");
    applyBtn.addEventListener("click", () => {
      void (async () => {
        await this.applyChanges();
        this.close();
      })();
    });
  }
  addTagCheckbox(container, tag) {
    new import_obsidian14.Setting(container).setName(tag).addToggle((toggle) => {
      toggle.setValue(this.tagsToRemove.has(tag)).onChange((value) => {
        if (value) {
          this.tagsToRemove.add(tag);
        } else {
          this.tagsToRemove.delete(tag);
        }
      });
    });
  }
  async applyChanges() {
    if (this.tagsToAdd.trim()) {
      const tagsToAdd = this.tagsToAdd.split(",").map((t) => t.trim()).filter((t) => t.length > 0);
      if (tagsToAdd.length > 0) {
        await this.bulkOps.addTags(this.files, tagsToAdd);
      }
    }
    if (this.tagsToRemove.size > 0) {
      await this.bulkOps.removeTags(this.files, Array.from(this.tagsToRemove));
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/components/set-property-modal.ts
var import_obsidian15 = require("obsidian");
var SetPropertyModal = class extends import_obsidian15.Modal {
  constructor(app, files) {
    super(app);
    this.propertyName = "";
    this.propertyValue = "";
    this.propertyType = "text";
    this.files = files;
    this.bulkOps = new BulkOperations(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    new import_obsidian15.Setting(contentEl).setName("Set property").setHeading();
    contentEl.createEl("p", { text: `Setting property on ${this.files.length} file${this.files.length !== 1 ? "s" : ""}` });
    new import_obsidian15.Setting(contentEl).setName("Property name").setDesc("Enter the property name to set.").addText((text) => {
      text.setPlaceholder("Enter name").onChange((value) => {
        this.propertyName = value;
      });
    });
    new import_obsidian15.Setting(contentEl).setName("Property type").setDesc("Select the property type.").addDropdown((dropdown) => {
      dropdown.addOption("text", "Text").addOption("number", "Number").addOption("checkbox", "Checkbox").addOption("date", "Date").setValue(this.propertyType).onChange((value) => {
        this.propertyType = value;
      });
    });
    new import_obsidian15.Setting(contentEl).setName("Property value").setDesc("Enter the property value.").addText((text) => {
      text.setPlaceholder("Enter value").onChange((value) => {
        this.propertyValue = value;
      });
    });
    const buttonContainer = contentEl.createDiv();
    buttonContainer.addClass("bases-cms-modal-button-container");
    const cancelBtn = buttonContainer.createEl("button");
    cancelBtn.setText("Cancel");
    cancelBtn.addEventListener("click", () => this.close());
    const applyBtn = buttonContainer.createEl("button");
    applyBtn.setText("Apply");
    applyBtn.addClass("mod-cta");
    applyBtn.addEventListener("click", () => {
      void (async () => {
        if (this.propertyName && this.propertyValue) {
          await this.applyChanges();
          this.close();
        }
      })();
    });
  }
  async applyChanges() {
    let value = this.propertyValue;
    if (this.propertyType === "number") {
      value = Number(this.propertyValue);
    } else if (this.propertyType === "checkbox") {
      value = this.propertyValue.toLowerCase() === "true" || this.propertyValue === "1";
    } else if (this.propertyType === "date") {
      value = this.propertyValue;
    }
    await this.bulkOps.setProperty(this.files, this.propertyName, value, this.propertyType);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/components/remove-property-modal.ts
var import_obsidian16 = require("obsidian");
init_frontmatter_helper();
var RemovePropertyModal = class extends import_obsidian16.Modal {
  constructor(app, files) {
    super(app);
    this.propertiesToRemove = /* @__PURE__ */ new Set();
    this.files = files;
    this.bulkOps = new BulkOperations(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    new import_obsidian16.Setting(contentEl).setName("Remove property").setHeading();
    contentEl.createEl("p", { text: `Removing properties from ${this.files.length} file${this.files.length !== 1 ? "s" : ""}` });
    const propertiesContainer = contentEl.createDiv();
    const allProperties = /* @__PURE__ */ new Set();
    for (const filePath of this.files) {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian16.TFile && file.extension !== "mdx") {
        const metadata = this.app.metadataCache.getFileCache(file);
        const frontmatter = metadata == null ? void 0 : metadata.frontmatter;
        if (frontmatter) {
          for (const key in frontmatter) {
            if (key !== "tags" && key !== "title") {
              allProperties.add(key);
            }
          }
        }
      }
    }
    for (const prop of Array.from(allProperties).sort()) {
      this.addPropertyCheckbox(propertiesContainer, prop);
    }
    void (async () => {
      for (const filePath of this.files) {
        const file = this.app.vault.getAbstractFileByPath(filePath);
        if (file instanceof import_obsidian16.TFile && file.extension === "mdx") {
          const frontmatter = await getFileFrontmatter(this.app, file);
          if (frontmatter) {
            for (const key in frontmatter) {
              if (key !== "tags" && key !== "title") {
                if (!allProperties.has(key)) {
                  allProperties.add(key);
                  if (this.contentEl && this.contentEl.isConnected && propertiesContainer.isConnected) {
                    this.addPropertyCheckbox(propertiesContainer, key);
                  }
                }
              }
            }
          }
        }
      }
    })();
    if (allProperties.size === 0) {
      contentEl.createEl("p", { text: "No properties found in selected files." });
    }
    const buttonContainer = contentEl.createDiv();
    buttonContainer.addClass("bases-cms-modal-button-container");
    const cancelBtn = buttonContainer.createEl("button");
    cancelBtn.setText("Cancel");
    cancelBtn.addEventListener("click", () => this.close());
    const applyBtn = buttonContainer.createEl("button");
    applyBtn.setText("Apply");
    applyBtn.addClass("mod-cta");
    applyBtn.addEventListener("click", () => {
      void (async () => {
        if (this.propertiesToRemove.size > 0) {
          await this.applyChanges();
          this.close();
        }
      })();
    });
  }
  addPropertyCheckbox(container, prop) {
    new import_obsidian16.Setting(container).setName(prop).addToggle((toggle) => {
      toggle.setValue(this.propertiesToRemove.has(prop)).onChange((value) => {
        if (value) {
          this.propertiesToRemove.add(prop);
        } else {
          this.propertiesToRemove.delete(prop);
        }
      });
    });
  }
  async applyChanges() {
    for (const prop of this.propertiesToRemove) {
      await this.bulkOps.removeProperty(this.files, prop);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/toolbar-actions.ts
init_deletion_preview();

// src/components/bulk-operation-confirm.ts
var import_obsidian20 = require("obsidian");
var BulkOperationConfirmModal = class extends import_obsidian20.Modal {
  constructor(app, files, operation, onConfirm) {
    super(app);
    this.files = files;
    this.operation = operation;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const operationName = this.operation === "draft" ? "mark as draft" : "mark as published";
    const headingText = operationName.charAt(0).toUpperCase() + operationName.slice(1);
    new import_obsidian20.Setting(contentEl).setName(`Confirm ${headingText}`).setHeading();
    contentEl.createEl("p", {
      text: `Are you sure you want to ${operationName} ${this.files.length} file${this.files.length !== 1 ? "s" : ""}?`
    });
    if (this.files.length > 0) {
      const filesList = contentEl.createEl("ul", { cls: "bases-cms-deletion-list" });
      for (const filePath of this.files.slice(0, 20)) {
        const li = filesList.createEl("li");
        li.setText(filePath);
      }
      if (this.files.length > 20) {
        filesList.createEl("li", {
          text: `... and ${this.files.length - 20} more file${this.files.length - 20 !== 1 ? "s" : ""}`
        });
      }
    }
    const buttonContainer = contentEl.createDiv();
    buttonContainer.addClass("bases-cms-modal-button-container");
    const cancelBtn = buttonContainer.createEl("button");
    cancelBtn.setText("Cancel");
    cancelBtn.addEventListener("click", () => this.close());
    const confirmBtn = buttonContainer.createEl("button");
    confirmBtn.setText("Confirm");
    confirmBtn.addClass("mod-cta");
    confirmBtn.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/toolbar-actions.ts
init_smart_deletion();
var ToolbarActions = class {
  constructor(app, plugin, getSelectedFiles, clearSelection, refreshView, showToolbar) {
    this.app = app;
    this.plugin = plugin;
    this.getSelectedFiles = getSelectedFiles;
    this.clearSelection = clearSelection;
    this.refreshView = refreshView;
    this.showToolbar = showToolbar;
    this.bulkOps = new BulkOperations(app);
  }
  async handleSetDraft(settings) {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    if (this.plugin.settings.confirmBulkOperations) {
      const modal = new BulkOperationConfirmModal(
        this.app,
        files,
        "draft",
        () => {
          void (async () => {
            await this.bulkOps.setDraft(files, true, settings);
            this.refreshView();
          })();
        }
      );
      modal.open();
    } else {
      await this.bulkOps.setDraft(files, true, settings);
      this.refreshView();
    }
  }
  async handlePublish(settings) {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    if (this.plugin.settings.confirmBulkOperations) {
      const modal = new BulkOperationConfirmModal(
        this.app,
        files,
        "publish",
        () => {
          void (async () => {
            await this.bulkOps.setDraft(files, false, settings);
            this.refreshView();
          })();
        }
      );
      modal.open();
    } else {
      await this.bulkOps.setDraft(files, false, settings);
      this.refreshView();
    }
  }
  handleManageTags() {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    const modal = new ManageTagsModal(this.app, files);
    modal.onClose = () => {
      this.showToolbar();
      this.refreshView();
    };
    modal.open();
  }
  handleSetProperty() {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    const modal = new SetPropertyModal(this.app, files);
    modal.onClose = () => {
      this.showToolbar();
      this.refreshView();
    };
    modal.open();
  }
  handleRemoveProperty() {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    const modal = new RemovePropertyModal(this.app, files);
    modal.onClose = () => {
      this.showToolbar();
      this.refreshView();
    };
    modal.open();
  }
  async handleDelete() {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    if (this.plugin.settings.confirmDeletions) {
      const preview = await prepareDeletionPreview(
        this.app,
        files,
        this.plugin.settings
      );
      const modal = new DeletionPreviewModal(
        this.app,
        preview,
        () => {
          this.clearSelection();
          this.refreshView();
        }
      );
      modal.open();
    } else {
      const preview = await prepareDeletionPreview(
        this.app,
        files,
        this.plugin.settings
      );
      await executeSmartDeletion(this.app, preview);
      this.clearSelection();
      this.refreshView();
    }
  }
};

// src/components/bulk-toolbar.ts
var BulkToolbar = class {
  constructor(app, plugin, container, getSelectedFiles, clearSelection, refreshView, selectAllCallback, settings) {
    this.app = app;
    this.plugin = plugin;
    this.container = container;
    this.getSelectedFiles = getSelectedFiles;
    this.clearSelection = clearSelection;
    this.refreshView = refreshView;
    this.toolbarEl = null;
    this.countEl = null;
    this.resizeObserver = null;
    this.timeoutIds = [];
    this.selectAllCallback = selectAllCallback;
    this.settings = settings;
    this.actions = new ToolbarActions(
      this.app,
      this.plugin,
      this.getSelectedFiles,
      this.clearSelection,
      this.refreshView,
      () => this.show()
    );
    this.createToolbar();
  }
  /**
   * Update settings (called when view settings change)
   */
  updateSettings(settings) {
    this.settings = settings;
  }
  /**
   * Get toolbar actions (for use in context menus)
   */
  getActions() {
    return this.actions;
  }
  createToolbar() {
    this.toolbarEl = document.createElement("div");
    this.toolbarEl.className = "bases-toolbar bases-cms-bulk-toolbar bases-cms-bulk-toolbar-hidden";
    this.toolbarEl.__bulkToolbarInstance = this;
    this.createToolbarContent();
    this.positionToolbar();
    const timeoutId = window.setTimeout(() => this.positionToolbar(), 100);
    this.timeoutIds.push(timeoutId);
  }
  positionToolbar() {
    if (!this.toolbarEl) return;
    let basesHeader = this.container.closest(".bases-header");
    if (!basesHeader) {
      let parent = this.container.parentElement;
      while (parent && !basesHeader) {
        if (parent.classList.contains("bases-header")) {
          basesHeader = parent;
          break;
        }
        parent = parent.parentElement;
      }
    }
    if (!basesHeader) {
      const allHeaders = Array.from(document.querySelectorAll(".bases-header"));
      for (const header of allHeaders) {
        if (header.contains(this.container)) {
          basesHeader = header;
          break;
        }
      }
    }
    const viewContent = this.container.closest(".view-content");
    if (viewContent) {
      if (this.toolbarEl.parentElement !== viewContent) {
        if (this.toolbarEl.parentElement) {
          this.toolbarEl.remove();
        }
        viewContent.insertBefore(this.toolbarEl, this.container);
      } else if (this.toolbarEl.nextSibling !== this.container) {
        if (this.toolbarEl.parentElement) {
          this.toolbarEl.remove();
        }
        viewContent.insertBefore(this.toolbarEl, this.container);
      }
    } else if (basesHeader && basesHeader.parentElement) {
      if (this.toolbarEl.parentElement !== basesHeader.parentElement) {
        if (this.toolbarEl.parentElement) {
          this.toolbarEl.remove();
        }
        basesHeader.parentElement.insertBefore(this.toolbarEl, basesHeader.nextSibling);
      }
    } else {
      const parent = this.container.parentElement;
      if (parent) {
        if (this.toolbarEl.parentElement !== parent || this.toolbarEl.nextSibling !== this.container) {
          if (this.toolbarEl.parentElement) {
            this.toolbarEl.remove();
          }
          parent.insertBefore(this.toolbarEl, this.container);
        }
      }
    }
  }
  createToolbarContent() {
    if (!this.toolbarEl) return;
    const leftContainer = this.toolbarEl.createDiv("bases-cms-bulk-toolbar-left");
    const createBasesButton = (iconName, text, onClick, container, isDestructive = false) => {
      const toolbarItem = container.createDiv("bases-toolbar-item");
      const button = toolbarItem.createDiv("text-icon-button");
      if (isDestructive) {
        button.addClass("destructive");
      }
      button.setAttribute("tabindex", "0");
      const iconEl = button.createSpan("text-button-icon");
      (0, import_obsidian21.setIcon)(iconEl, iconName);
      const textEl = button.createSpan("text-button-label");
      textEl.setText(text);
      button.addEventListener("click", onClick);
      return button;
    };
    if (this.plugin.settings.showToolbarSelectAll) {
      createBasesButton("copy-check", "Select all", () => this.handleSelectAll(), leftContainer);
    }
    if (this.plugin.settings.showToolbarClear) {
      createBasesButton("square-x", "Clear", () => this.clearSelection(), leftContainer);
    }
    const countItem = leftContainer.createDiv("bases-toolbar-item bases-cms-selected-count");
    this.countEl = countItem.createSpan("text-button-label");
    this.countEl.setText("0 selected");
    const rightContainer = this.toolbarEl.createDiv("bases-cms-bulk-toolbar-right");
    if (this.plugin.settings.showToolbarPublish) {
      createBasesButton("book-check", "Publish", () => {
        void this.actions.handlePublish(this.settings);
      }, rightContainer);
    }
    if (this.plugin.settings.showToolbarDraft) {
      createBasesButton("book-dashed", "Draft", () => {
        void this.actions.handleSetDraft(this.settings);
      }, rightContainer);
    }
    if (this.plugin.settings.showToolbarTags) {
      createBasesButton("tags", "Tags", () => this.actions.handleManageTags(), rightContainer);
    }
    if (this.plugin.settings.showToolbarSet) {
      createBasesButton("list-check", "Set", () => this.actions.handleSetProperty(), rightContainer);
    }
    if (this.plugin.settings.showToolbarRemove) {
      createBasesButton("list-x", "Remove", () => this.actions.handleRemoveProperty(), rightContainer);
    }
    if (this.plugin.settings.showToolbarDelete) {
      createBasesButton("trash-2", "Delete", () => {
        void this.actions.handleDelete();
      }, rightContainer, true);
    }
    this.setupResponsiveBehavior();
  }
  setupResponsiveBehavior() {
    if (!this.toolbarEl) return;
    const timeoutId1 = window.setTimeout(() => {
      this.updateCollapsedState();
    }, 100);
    this.timeoutIds.push(timeoutId1);
    if (this.toolbarEl) {
      this.resizeObserver = new ResizeObserver(() => {
        this.updateCollapsedState();
      });
      this.resizeObserver.observe(this.toolbarEl);
    }
    const container = this.container;
    if (container) {
      const containerObserver = new ResizeObserver(() => {
        const timeoutId = window.setTimeout(() => {
          this.updateCollapsedState();
        }, 10);
        this.timeoutIds.push(timeoutId);
      });
      containerObserver.observe(container);
      this.containerObserver = containerObserver;
    }
  }
  updateCollapsedState() {
    if (!this.toolbarEl) return;
    const toolbarWidth = this.toolbarEl.offsetWidth;
    const isCollapsed = toolbarWidth < 680;
    if (isCollapsed) {
      this.toolbarEl.addClass("collapsed");
    } else {
      this.toolbarEl.removeClass("collapsed");
    }
  }
  updateCount(count) {
    if (this.countEl) {
      this.countEl.setText(`${count} selected`);
    }
  }
  handleSelectAll() {
    if (this.selectAllCallback) {
      this.selectAllCallback();
    }
  }
  show() {
    if (!this.toolbarEl) {
      console.warn("[Bases CMS] Toolbar element not found, recreating...");
      this.createToolbar();
    }
    if (this.toolbarEl) {
      this.positionToolbar();
      if (!this.toolbarEl.parentElement) {
        console.warn("[Bases CMS] Toolbar not in DOM, repositioning...");
        this.positionToolbar();
      }
      this.toolbarEl.removeClass("bases-cms-bulk-toolbar-hidden");
      this.toolbarEl.addClass("bases-cms-bulk-toolbar-visible");
      void this.toolbarEl.offsetHeight;
      const timeoutId = window.setTimeout(() => {
        if (this.toolbarEl) {
          this.toolbarEl.removeClass("bases-cms-bulk-toolbar-animating-out");
          this.toolbarEl.addClass("bases-cms-bulk-toolbar-animating-in");
        }
      }, 10);
      this.timeoutIds.push(timeoutId);
    } else {
      console.error("[Bases CMS] Failed to show toolbar - element is null");
    }
  }
  hide() {
    if (this.toolbarEl) {
      this.toolbarEl.removeClass("bases-cms-bulk-toolbar-animating-in");
      this.toolbarEl.addClass("bases-cms-bulk-toolbar-animating-out");
      const timeoutId = window.setTimeout(() => {
        if (this.toolbarEl) {
          this.toolbarEl.removeClass("bases-cms-bulk-toolbar-visible");
          this.toolbarEl.addClass("bases-cms-bulk-toolbar-hidden");
        }
      }, 200);
      this.timeoutIds.push(timeoutId);
    }
  }
  /**
   * Recreate the toolbar with updated settings
   * Preserves visibility state and count
   */
  recreate() {
    const wasVisible = this.toolbarEl && !this.toolbarEl.hasClass("bases-cms-bulk-toolbar-hidden");
    let currentCount = 0;
    if (this.countEl && this.countEl.textContent) {
      const match = this.countEl.textContent.match(/\d+/);
      if (match) {
        currentCount = parseInt(match[0], 10);
      }
    }
    this.destroy();
    this.createToolbar();
    if (wasVisible && this.toolbarEl && currentCount > 0) {
      this.updateCount(currentCount);
      this.show();
    }
  }
  destroy() {
    this.timeoutIds.forEach((id) => window.clearTimeout(id));
    this.timeoutIds = [];
    if (this.resizeObserver) {
      this.resizeObserver.disconnect();
      this.resizeObserver = null;
    }
    const containerObserver = this.containerObserver;
    if (containerObserver) {
      containerObserver.disconnect();
      this.containerObserver = void 0;
    }
    if (this.toolbarEl) {
      this.toolbarEl.remove();
      this.toolbarEl = null;
    }
  }
};

// src/utils/new-note-interceptor.ts
init_settings_schema();
function setupNewNoteInterceptor(app, containerEl, config, pluginSettings, registerCleanup) {
  const interceptNewButton = (e) => {
    const target = e.target;
    const buttonEl = target.closest('.bases-toolbar-new-item-menu, .bases-toolbar-new-item-menu .text-icon-button, [data-action="new-item"], button[aria-label*="new"], button[aria-label*="New"], .bases-toolbar button');
    if (!buttonEl) {
      return;
    }
    if (target.closest(".bases-cms-bulk-toolbar, .bases-cms-container .card")) {
      return;
    }
    const activeLeaf = app.workspace.activeLeaf;
    const activeView = activeLeaf == null ? void 0 : activeLeaf.view;
    const activeViewContainer = activeView == null ? void 0 : activeView.containerEl;
    const isCMSView = (activeView == null ? void 0 : activeView.type) === "bases-cms" || (activeViewContainer == null ? void 0 : activeViewContainer.querySelector(".bases-cms-container")) !== null;
    if (!isCMSView) {
      return;
    }
    const isOurView = activeViewContainer && (activeViewContainer === containerEl || activeViewContainer.contains(containerEl) || containerEl.contains(activeViewContainer));
    if (!isOurView) {
      return;
    }
    const containerWithView = containerEl;
    const viewInstance = containerWithView.__cmsView;
    const viewConfig = (viewInstance == null ? void 0 : viewInstance.config) || containerWithView.__cmsConfig || config;
    const settings = readCMSSettings(viewConfig, pluginSettings);
    const hasCustomLocation = settings.newNoteLocation && settings.newNoteLocation.trim() !== "";
    if (settings.customizeNewButton || hasCustomLocation) {
      e.preventDefault();
      e.stopPropagation();
      e.stopImmediatePropagation();
      void (async () => {
        var _a;
        const locationInput = ((_a = settings.newNoteLocation) == null ? void 0 : _a.trim()) || "";
        if (locationInput === "" && !settings.customizeNewButton) {
          const vaultConfig = app.vault.config;
          const newFileLocation = (vaultConfig == null ? void 0 : vaultConfig.newFileLocation) || "folder";
          const newFileFolderPath = (vaultConfig == null ? void 0 : vaultConfig.newFileFolderPath) || "";
          let filePath = "Untitled.md";
          if (newFileLocation === "folder" && newFileFolderPath) {
            filePath = `${newFileFolderPath}/Untitled.md`;
          } else if (newFileLocation === "current") {
            const activeFile = app.workspace.getActiveFile();
            if (activeFile && activeFile.parent) {
              filePath = `${activeFile.parent.path}/Untitled.md`;
            }
          } else if (newFileLocation === "root") {
            filePath = "Untitled.md";
          }
          const file = await app.vault.create(filePath, "");
          if (settings.customizeNewButton) {
            await app.workspace.openLinkText(file.path, "", false);
          }
          return;
        }
        if (locationInput === "/" || locationInput.replace(/\//g, "") === "") {
          const newFile = await app.vault.create("Untitled.md", "");
          if (settings.customizeNewButton) {
            await app.workspace.openLinkText(newFile.path, "", false);
          }
          return;
        }
        const folderPath = locationInput.replace(/^\/+|\/+$/g, "");
        let folder = app.vault.getAbstractFileByPath(folderPath);
        if (!folder || !("children" in folder)) {
          await app.vault.createFolder(folderPath);
          folder = app.vault.getAbstractFileByPath(folderPath);
        }
        if (folder && "children" in folder) {
          const newFile = await app.vault.create(`${folderPath}/Untitled.md`, "");
          if (settings.customizeNewButton) {
            await app.workspace.openLinkText(newFile.path, "", false);
          }
        }
      })().catch((error) => {
        console.error("[CMS] Error creating new note:", error);
      });
    }
  };
  document.addEventListener("click", interceptNewButton, true);
  const observer = new MutationObserver(() => {
    const buttons2 = document.querySelectorAll('.bases-toolbar-new-item-menu, .bases-toolbar-new-item-menu .text-icon-button, [data-action="new-item"]');
    buttons2.forEach((buttonEl) => {
      const buttonWithFlag = buttonEl;
      if (!buttonWithFlag.__cmsIntercepted) {
        buttonWithFlag.__cmsIntercepted = true;
        buttonEl.addEventListener("click", interceptNewButton, true);
      }
    });
  });
  observer.observe(document.body, { childList: true, subtree: true });
  const buttons = document.querySelectorAll('.bases-toolbar-new-item-menu, .bases-toolbar-new-item-menu .text-icon-button, [data-action="new-item"]');
  buttons.forEach((buttonEl) => {
    const buttonWithFlag = buttonEl;
    if (!buttonWithFlag.__cmsIntercepted) {
      buttonWithFlag.__cmsIntercepted = true;
      buttonEl.addEventListener("click", interceptNewButton, true);
    }
  });
  registerCleanup(() => {
    document.removeEventListener("click", interceptNewButton, true);
    observer.disconnect();
  });
}

// src/utils/property-toggle-handler.ts
var import_obsidian22 = require("obsidian");
init_settings_schema();
init_frontmatter_helper();
var PropertyToggleHandler = class {
  constructor(app, config, pluginSettings, onRefresh) {
    this.app = app;
    this.config = config;
    this.pluginSettings = pluginSettings;
    this.onRefresh = onRefresh;
  }
  async handlePropertyToggle(path, property, value) {
    try {
      const file = this.app.vault.getAbstractFileByPath(path);
      if (!(file instanceof import_obsidian22.TFile)) return;
      const cleanProperty = property.startsWith("note.") ? property.substring(5) : property;
      const settings = readCMSSettings(
        this.config,
        this.pluginSettings
      );
      const isDraftProperty = settings.showDraftStatus && cleanProperty === "draft";
      let shouldRefresh = false;
      if (isDraftProperty) {
        if (settings.draftStatusUseFilenamePrefix) {
          const fileName = file.basename;
          const startsWithUnderscore = fileName.startsWith("_");
          const currentPath = file.path;
          const pathParts = currentPath.split("/");
          if (value === true) {
            if (!startsWithUnderscore) {
              const newName = `_${fileName}${file.extension ? `.${file.extension}` : ""}`;
              pathParts[pathParts.length - 1] = newName;
              const newPath = pathParts.join("/");
              await this.app.fileManager.renameFile(file, newPath);
              shouldRefresh = true;
            }
          } else {
            if (startsWithUnderscore) {
              const newName = fileName.substring(1) + (file.extension ? `.${file.extension}` : "");
              pathParts[pathParts.length - 1] = newName;
              const newPath = pathParts.join("/");
              await this.app.fileManager.renameFile(file, newPath);
              shouldRefresh = true;
            }
          }
        } else {
          const cleanConfigProperty = settings.draftStatusProperty && settings.draftStatusProperty.trim() ? settings.draftStatusProperty.startsWith("note.") ? settings.draftStatusProperty.substring(5) : settings.draftStatusProperty : "draft";
          await processFileFrontMatter(this.app, file, (frontmatter) => {
            frontmatter[cleanConfigProperty] = value;
          });
          shouldRefresh = true;
        }
      } else {
        await processFileFrontMatter(this.app, file, (frontmatter) => {
          frontmatter[cleanProperty] = value;
        });
        shouldRefresh = true;
      }
      if (shouldRefresh) {
        requestAnimationFrame(() => {
          window.setTimeout(() => {
            try {
              this.onRefresh();
            } catch (error) {
              console.error("Error refreshing view after property toggle:", error);
            }
          }, 100);
        });
      }
    } catch (error) {
      console.error("Error toggling property:", error);
    }
  }
};

// src/utils/scroll-layout-manager.ts
init_settings_schema();
var ScrollLayoutManager = class {
  constructor(containerEl, app, config, pluginSettings, onLoadMore, registerCleanup) {
    this.containerEl = containerEl;
    this.app = app;
    this.pluginSettings = pluginSettings;
    this.onLoadMore = onLoadMore;
    this.registerCleanup = registerCleanup;
    this.scrollListener = null;
    this.scrollThrottleTimeout = null;
    this.resizeObserver = null;
    this.windowResizeHandler = null;
    this.isLoading = false;
    this.displayedCount = 50;
    this.totalEntries = 0;
    this.configPollInterval = null;
    this.lastCardSize = null;
    this.lastImageAspectRatio = null;
    var _a;
    this.config = config;
    const isMobile = (_a = this.app.isMobile) != null ? _a : false;
    this.displayedCount = isMobile ? 25 : 50;
  }
  /**
   * Update the config reference (useful when config becomes available after construction)
   */
  updateConfig(config) {
    this.config = config;
  }
  setDisplayedCount(count) {
    this.displayedCount = count;
  }
  getDisplayedCount() {
    return this.displayedCount;
  }
  setIsLoading(loading) {
    this.isLoading = loading;
  }
  setupInfiniteScroll(totalEntries) {
    this.totalEntries = totalEntries;
    if (this.scrollListener) {
      this.containerEl.removeEventListener("scroll", this.scrollListener);
      this.scrollListener = null;
    }
    if (this.displayedCount >= totalEntries) {
      return;
    }
    this.scrollListener = () => {
      var _a;
      if (this.scrollThrottleTimeout !== null) {
        return;
      }
      if (this.isLoading) {
        return;
      }
      const scrollTop = this.containerEl.scrollTop;
      const scrollHeight = this.containerEl.scrollHeight;
      const clientHeight = this.containerEl.clientHeight;
      const distanceFromBottom = scrollHeight - (scrollTop + clientHeight);
      const isMobile = (_a = this.app.isMobile) != null ? _a : false;
      const viewportMultiplier = isMobile ? 1 : 2;
      const threshold = clientHeight * viewportMultiplier;
      if (distanceFromBottom < threshold && this.displayedCount < totalEntries) {
        this.isLoading = true;
        const batchSize = 50;
        this.displayedCount = Math.min(this.displayedCount + batchSize, totalEntries);
        this.onLoadMore();
      }
      this.scrollThrottleTimeout = window.setTimeout(() => {
        this.scrollThrottleTimeout = null;
      }, 100);
    };
    this.containerEl.addEventListener("scroll", this.scrollListener);
    this.registerCleanup(() => {
      if (this.scrollListener) {
        this.containerEl.removeEventListener("scroll", this.scrollListener);
      }
      if (this.scrollThrottleTimeout !== null) {
        window.clearTimeout(this.scrollThrottleTimeout);
      }
    });
  }
  setupResizeObserver() {
    if (this.resizeObserver) {
      return;
    }
    const updateGrid = () => {
      if (!this.config || typeof this.config.get !== "function") {
        return;
      }
      const currentSettings = readCMSSettings(
        this.config,
        this.pluginSettings
      );
      const cardMinWidth = currentSettings.cardSize;
      const imageAspectRatio = currentSettings.imageAspectRatio;
      this.containerEl.style.setProperty("--card-min-width", `${cardMinWidth}px`);
      this.containerEl.style.setProperty("--bases-cms-image-aspect-ratio", String(imageAspectRatio));
      this.lastCardSize = cardMinWidth;
      this.lastImageAspectRatio = imageAspectRatio;
    };
    this.resizeObserver = new ResizeObserver(updateGrid);
    this.resizeObserver.observe(this.containerEl);
    updateGrid();
    this.configPollInterval = window.setInterval(() => {
      if (!this.config || typeof this.config.get !== "function") {
        return;
      }
      const currentSettings = readCMSSettings(
        this.config,
        this.pluginSettings
      );
      const currentCardSize = currentSettings.cardSize;
      const currentImageAspectRatio = currentSettings.imageAspectRatio;
      if (this.lastCardSize !== currentCardSize || this.lastImageAspectRatio !== currentImageAspectRatio) {
        this.containerEl.style.setProperty("--card-min-width", `${currentCardSize}px`);
        this.containerEl.style.setProperty("--bases-cms-image-aspect-ratio", String(currentImageAspectRatio));
        this.lastCardSize = currentCardSize;
        this.lastImageAspectRatio = currentImageAspectRatio;
      }
    }, 100);
    this.registerCleanup(() => {
      if (this.configPollInterval !== null) {
        window.clearInterval(this.configPollInterval);
        this.configPollInterval = null;
      }
    });
  }
  updateGridLayout(settings) {
    this.containerEl.style.setProperty("--card-min-width", `${settings.cardSize}px`);
    this.containerEl.style.setProperty("--bases-cms-image-aspect-ratio", String(settings.imageAspectRatio));
    this.lastCardSize = settings.cardSize;
    this.lastImageAspectRatio = settings.imageAspectRatio;
  }
  cleanup() {
    if (this.resizeObserver) {
      this.resizeObserver.disconnect();
      this.resizeObserver = null;
    }
    if (this.windowResizeHandler) {
      window.removeEventListener("resize", this.windowResizeHandler);
      this.windowResizeHandler = null;
    }
    if (this.scrollListener) {
      this.containerEl.removeEventListener("scroll", this.scrollListener);
      this.scrollListener = null;
    }
    if (this.scrollThrottleTimeout !== null) {
      window.clearTimeout(this.scrollThrottleTimeout);
      this.scrollThrottleTimeout = null;
    }
    if (this.configPollInterval !== null) {
      window.clearInterval(this.configPollInterval);
      this.configPollInterval = null;
    }
  }
};

// src/utils/view-switch-listener.ts
var ViewSwitchListener = class {
  constructor(containerEl, plugin, config, controller, data, selectedFiles, onSelectionCleared, registerCleanup) {
    this.containerEl = containerEl;
    this.plugin = plugin;
    this.config = config;
    this.controller = controller;
    this.data = data;
    this.selectedFiles = selectedFiles;
    this.onSelectionCleared = onSelectionCleared;
    this.registerCleanup = registerCleanup;
    this.mutationObserver = null;
    this.backupInterval = null;
    this.currentBaseIdentifier = null;
  }
  setup(handleSelectionChange) {
    const startObserving = () => {
      if (this.mutationObserver) return;
      this.mutationObserver = new MutationObserver((mutations) => {
        if (this.selectedFiles.size === 0) {
          return;
        }
        for (const mutation of mutations) {
          if (mutation.type === "childList" && mutation.removedNodes.length > 0) {
            let foundSelectedCard = false;
            for (const path of this.selectedFiles) {
              const card = this.containerEl.querySelector(`[data-path="${path}"]`);
              if (card) {
                foundSelectedCard = true;
                break;
              }
            }
            const allCards = this.containerEl.querySelectorAll(".card[data-path]");
            if (!foundSelectedCard || allCards.length === 0) {
              this.selectedFiles.clear();
              this.onSelectionCleared();
              break;
            }
          }
        }
      });
      if (this.containerEl) {
        this.mutationObserver.observe(this.containerEl, {
          childList: true,
          subtree: true
        });
      }
    };
    const stopObserving = () => {
      if (this.mutationObserver) {
        this.mutationObserver.disconnect();
        this.mutationObserver = null;
        if (this.selectedFiles.size > 0) {
          this.selectedFiles.clear();
        }
        this.onSelectionCleared();
      }
    };
    const getBaseIdentifier = () => {
      var _a, _b, _c, _d;
      try {
        if ((_a = this.config) == null ? void 0 : _a.getName) {
          return this.config.getName();
        }
        if ((_b = this.config) == null ? void 0 : _b.name) {
          return String(this.config.name);
        }
        if (this.controller) {
          if ((_c = this.controller) == null ? void 0 : _c.getBaseName) {
            return this.controller.getBaseName();
          }
          if ((_d = this.controller) == null ? void 0 : _d.baseName) {
            return String(this.controller.baseName);
          }
        }
        if (this.data) {
          if (this.data.baseName) {
            return String(this.data.baseName);
          }
        }
      } catch (e) {
      }
      return null;
    };
    const backupCheck = () => {
      if (this.selectedFiles.size === 0) {
        if (this.backupInterval !== null) {
          window.clearInterval(this.backupInterval);
          this.backupInterval = null;
        }
        return;
      }
      const currentBaseId = getBaseIdentifier();
      if (this.currentBaseIdentifier !== null && currentBaseId !== null && this.currentBaseIdentifier !== currentBaseId) {
        this.selectedFiles.clear();
        this.onSelectionCleared();
        stopObserving();
        if (this.backupInterval !== null) {
          window.clearInterval(this.backupInterval);
          this.backupInterval = null;
        }
        return;
      }
      const allCards = this.containerEl.querySelectorAll(".card[data-path]");
      if (allCards.length === 0) {
        this.selectedFiles.clear();
        this.onSelectionCleared();
      }
    };
    const originalHandleSelectionChange = handleSelectionChange.bind(this);
    const wrappedHandleSelectionChange = (path, selected) => {
      originalHandleSelectionChange(path, selected);
      if (this.selectedFiles.size > 0) {
        if (this.currentBaseIdentifier === null) {
          this.currentBaseIdentifier = getBaseIdentifier();
        }
        startObserving();
        if (this.backupInterval === null) {
          this.backupInterval = this.plugin.registerInterval(window.setInterval(backupCheck, 500));
        }
      } else {
        this.currentBaseIdentifier = null;
        stopObserving();
        if (this.backupInterval !== null) {
          window.clearInterval(this.backupInterval);
          this.backupInterval = null;
        }
      }
    };
    this.registerCleanup(() => {
      stopObserving();
      if (this.backupInterval !== null) {
        window.clearInterval(this.backupInterval);
        this.backupInterval = null;
      }
    });
    return wrappedHandleSelectionChange;
  }
  cleanup() {
    if (this.mutationObserver) {
      this.mutationObserver.disconnect();
      this.mutationObserver = null;
    }
    if (this.backupInterval !== null) {
      window.clearInterval(this.backupInterval);
      this.backupInterval = null;
    }
  }
};

// src/views/cms-view.ts
init_frontmatter_helper();
var CMS_VIEW_TYPE = "bases-cms";
var BasesCMSView = class extends import_obsidian23.BasesView {
  constructor(controller, containerEl, plugin) {
    super(controller);
    this.type = CMS_VIEW_TYPE;
    this.selectedFiles = /* @__PURE__ */ new Set();
    this.snippets = {};
    this.images = {};
    this.hasImageAvailable = {};
    this.mdxFrontmatterCache = {};
    this.updateLayoutRef = { current: null };
    this.propertyObservers = [];
    this.bulkToolbar = null;
    this.isRefreshingWithSelection = false;
    this.propertyToggleHandler = null;
    this.viewSwitchListener = null;
    this.settingsPollInterval = null;
    this.lastSettings = null;
    this.containerEl = containerEl;
    this.plugin = plugin;
    this.cardRenderer = new SharedCardRenderer(
      this.app,
      this.plugin,
      this.propertyObservers,
      this.updateLayoutRef,
      void 0,
      // Config not available in constructor
      controller
    );
    this.containerEl.addClass("bases-cms");
    this.containerEl.addClass("bases-cms-container");
    try {
      this.propertyToggleHandler = new PropertyToggleHandler(
        this.app,
        this.config,
        this.plugin.settings,
        () => this.onDataUpdated()
      );
    } catch (e) {
      this.propertyToggleHandler = null;
    }
    try {
      const configToUse = this.config && typeof this.config.get === "function" ? this.config : { get: () => void 0 };
      this.scrollLayoutManager = new ScrollLayoutManager(
        this.containerEl,
        this.app,
        configToUse,
        this.plugin.settings,
        () => this.onDataUpdated(),
        (cleanup) => this.register(cleanup)
      );
    } catch (e) {
      const dummyConfig = { get: () => void 0 };
      this.scrollLayoutManager = new ScrollLayoutManager(
        this.containerEl,
        this.app,
        dummyConfig,
        this.plugin.settings,
        () => this.onDataUpdated(),
        (cleanup) => this.register(cleanup)
      );
    }
    try {
      this.viewSwitchListener = new ViewSwitchListener(
        this.containerEl,
        this.plugin,
        this.config,
        this.controller,
        this.data,
        this.selectedFiles,
        () => this.updateSelectionUI(),
        (cleanup) => this.register(cleanup)
      );
    } catch (e) {
      this.viewSwitchListener = null;
    }
    if (this.viewSwitchListener) {
      const originalHandleSelectionChange = this.handleSelectionChange.bind(this);
      this.handleSelectionChange = this.viewSwitchListener.setup(originalHandleSelectionChange);
    }
  }
  onDataUpdated() {
    void (async () => {
      var _a;
      try {
        if (!this.data) {
          if (this.containerEl.children.length === 0) {
            const loadingEl = this.containerEl.createDiv("bases-cms-loading");
            loadingEl.setText("Loading...");
            setCssProps(loadingEl, {
              padding: "20px",
              textAlign: "center"
            });
          }
          setTimeout(() => {
            if (this.data) {
              this.onDataUpdated();
            }
          }, 100);
          return;
        }
        if (!this.data.groupedData || !this.data.data) {
          setTimeout(() => {
            if (this.data && this.data.groupedData && this.data.data) {
              this.onDataUpdated();
            }
          }, 100);
          return;
        }
        const groupedData = this.data.groupedData;
        const allEntries = this.data.data;
        const settings = readCMSSettings(
          this.config,
          this.plugin.settings
        );
        if (this.config && typeof this.config.get === "function") {
          try {
            this.scrollLayoutManager.updateConfig(this.config);
          } catch (e) {
          }
        }
        this.scrollLayoutManager.updateGridLayout(settings);
        const savedScrollTop = this.containerEl.scrollTop;
        const sortMethod = this.getSortMethod();
        const processedGroups = groupedData.map((group) => ({
          group,
          entries: [...group.entries]
        }));
        const visibleEntries = [];
        let remainingCount = this.scrollLayoutManager.getDisplayedCount();
        for (const processedGroup of processedGroups) {
          if (remainingCount <= 0) break;
          const entriesToTake = Math.min(processedGroup.entries.length, remainingCount);
          visibleEntries.push(...processedGroup.entries.slice(0, entriesToTake));
          remainingCount -= entriesToTake;
        }
        await this.loadContentForEntries(visibleEntries, settings);
        if (this.config && !this.containerEl.__cmsInterceptorSetup) {
          try {
            this.containerEl.__cmsInterceptorSetup = true;
            const containerWithConfig = this.containerEl;
            containerWithConfig.__cmsConfig = this.config;
            containerWithConfig.__cmsView = this;
            setupNewNoteInterceptor(
              this.app,
              this.containerEl,
              this.config,
              this.plugin.settings,
              (cleanup) => this.register(cleanup)
            );
          } catch (e) {
            this.containerEl.__cmsInterceptorSetup = true;
          }
        }
        this.cardRenderer.basesConfig = this.config;
        if (this.cardRenderer && typeof this.cardRenderer.setMdxFrontmatterCache === "function") {
          this.cardRenderer.setMdxFrontmatterCache(this.mdxFrontmatterCache);
        }
        this.containerEl.empty();
        this.mdxFrontmatterCache = {};
        this.propertyObservers.forEach((obs) => obs.disconnect());
        this.propertyObservers = [];
        const feedEl = this.containerEl.createDiv("bases-cms-grid");
        let displayedSoFar = 0;
        let totalCardsRendered = 0;
        for (const processedGroup of processedGroups) {
          if (displayedSoFar >= this.scrollLayoutManager.getDisplayedCount()) break;
          const entriesToDisplay = Math.min(processedGroup.entries.length, this.scrollLayoutManager.getDisplayedCount() - displayedSoFar);
          if (entriesToDisplay === 0) continue;
          const groupEntries = processedGroup.entries.slice(0, entriesToDisplay);
          const groupEl = feedEl.createDiv("bases-cms-group");
          if (processedGroup.group.hasKey()) {
            const headerEl = groupEl.createDiv("bases-cms-group-heading");
            const valueEl = headerEl.createDiv("bases-cms-group-value");
            const keyValue = ((_a = processedGroup.group.key) == null ? void 0 : _a.toString()) || "";
            valueEl.setText(keyValue);
          }
          const cards = await transformBasesEntries(
            groupEntries,
            settings,
            sortMethod,
            false,
            this.snippets,
            this.images,
            this.hasImageAvailable,
            this.app,
            this.mdxFrontmatterCache
          );
          for (let i = 0; i < cards.length; i++) {
            const card = cards[i];
            const entry = groupEntries[i];
            try {
              this.renderCard(groupEl, card, entry, displayedSoFar + i, settings);
              totalCardsRendered++;
            } catch (e) {
            }
          }
          displayedSoFar += entriesToDisplay;
        }
        if (totalCardsRendered === 0 && allEntries.length > 0) {
          throw new Error("No cards were rendered despite having entries. Check card rendering logic.");
        }
        if (savedScrollTop > 0) {
          this.containerEl.scrollTop = savedScrollTop;
        }
        this.scrollLayoutManager.setupInfiniteScroll(allEntries.length);
        this.scrollLayoutManager.setupResizeObserver();
        this.setupSettingsPolling(settings);
        this.updateSelectionUI();
        this.scrollLayoutManager.setIsLoading(false);
      } catch (e) {
        try {
          this.scrollLayoutManager.setIsLoading(false);
        } catch (e2) {
        }
        if (this.containerEl && this.containerEl.isConnected) {
          this.containerEl.empty();
          const errorEl = this.containerEl.createDiv("bases-cms-error");
          errorEl.setText("Error loading view. Check console for details.");
          setCssProps(errorEl, {
            padding: "20px",
            textAlign: "center",
            color: "var(--text-error)",
            margin: "20px"
          });
        }
      }
    })();
  }
  /**
   * Setup polling to detect settings changes and refresh view
   */
  setupSettingsPolling(initialSettings) {
    if (this.settingsPollInterval !== null) {
      return;
    }
    this.lastSettings = {
      descriptionProperty: initialSettings.descriptionProperty,
      showTextPreview: initialSettings.showTextPreview,
      fallbackToContent: initialSettings.fallbackToContent,
      truncatePreviewProperty: initialSettings.truncatePreviewProperty,
      imageProperty: initialSettings.imageProperty,
      imageFormat: initialSettings.imageFormat,
      fallbackToEmbeds: initialSettings.fallbackToEmbeds,
      propertyDisplay1: initialSettings.propertyDisplay1,
      propertyDisplay2: initialSettings.propertyDisplay2,
      propertyDisplay3: initialSettings.propertyDisplay3,
      propertyDisplay4: initialSettings.propertyDisplay4,
      propertyDisplay5: initialSettings.propertyDisplay5,
      propertyDisplay6: initialSettings.propertyDisplay6,
      propertyDisplay7: initialSettings.propertyDisplay7,
      propertyDisplay8: initialSettings.propertyDisplay8,
      propertyDisplay9: initialSettings.propertyDisplay9,
      propertyDisplay10: initialSettings.propertyDisplay10,
      propertyDisplay11: initialSettings.propertyDisplay11,
      propertyDisplay12: initialSettings.propertyDisplay12,
      propertyDisplay13: initialSettings.propertyDisplay13,
      propertyDisplay14: initialSettings.propertyDisplay14
    };
    this.settingsPollInterval = window.setInterval(() => {
      if (!this.config || typeof this.config.get !== "function") {
        return;
      }
      const currentSettings = readCMSSettings(
        this.config,
        this.plugin.settings
      );
      if (!this.lastSettings) {
        return;
      }
      const settingsChanged = this.lastSettings.descriptionProperty !== currentSettings.descriptionProperty || this.lastSettings.showTextPreview !== currentSettings.showTextPreview || this.lastSettings.fallbackToContent !== currentSettings.fallbackToContent || this.lastSettings.truncatePreviewProperty !== currentSettings.truncatePreviewProperty || this.lastSettings.imageProperty !== currentSettings.imageProperty || this.lastSettings.imageFormat !== currentSettings.imageFormat || this.lastSettings.fallbackToEmbeds !== currentSettings.fallbackToEmbeds || this.lastSettings.propertyDisplay1 !== currentSettings.propertyDisplay1 || this.lastSettings.propertyDisplay2 !== currentSettings.propertyDisplay2 || this.lastSettings.propertyDisplay3 !== currentSettings.propertyDisplay3 || this.lastSettings.propertyDisplay4 !== currentSettings.propertyDisplay4 || this.lastSettings.propertyDisplay5 !== currentSettings.propertyDisplay5 || this.lastSettings.propertyDisplay6 !== currentSettings.propertyDisplay6 || this.lastSettings.propertyDisplay7 !== currentSettings.propertyDisplay7 || this.lastSettings.propertyDisplay8 !== currentSettings.propertyDisplay8 || this.lastSettings.propertyDisplay9 !== currentSettings.propertyDisplay9 || this.lastSettings.propertyDisplay10 !== currentSettings.propertyDisplay10 || this.lastSettings.propertyDisplay11 !== currentSettings.propertyDisplay11 || this.lastSettings.propertyDisplay12 !== currentSettings.propertyDisplay12 || this.lastSettings.propertyDisplay13 !== currentSettings.propertyDisplay13 || this.lastSettings.propertyDisplay14 !== currentSettings.propertyDisplay14;
      if (settingsChanged) {
        if (this.lastSettings.descriptionProperty !== currentSettings.descriptionProperty || this.lastSettings.showTextPreview !== currentSettings.showTextPreview || this.lastSettings.fallbackToContent !== currentSettings.fallbackToContent || this.lastSettings.truncatePreviewProperty !== currentSettings.truncatePreviewProperty) {
          this.snippets = {};
        }
        if (this.lastSettings.imageProperty !== currentSettings.imageProperty || this.lastSettings.imageFormat !== currentSettings.imageFormat || this.lastSettings.fallbackToEmbeds !== currentSettings.fallbackToEmbeds) {
          this.images = {};
          this.hasImageAvailable = {};
        }
        this.lastSettings = {
          descriptionProperty: currentSettings.descriptionProperty,
          showTextPreview: currentSettings.showTextPreview,
          fallbackToContent: currentSettings.fallbackToContent,
          truncatePreviewProperty: currentSettings.truncatePreviewProperty,
          imageProperty: currentSettings.imageProperty,
          imageFormat: currentSettings.imageFormat,
          fallbackToEmbeds: currentSettings.fallbackToEmbeds,
          propertyDisplay1: currentSettings.propertyDisplay1,
          propertyDisplay2: currentSettings.propertyDisplay2,
          propertyDisplay3: currentSettings.propertyDisplay3,
          propertyDisplay4: currentSettings.propertyDisplay4,
          propertyDisplay5: currentSettings.propertyDisplay5,
          propertyDisplay6: currentSettings.propertyDisplay6,
          propertyDisplay7: currentSettings.propertyDisplay7,
          propertyDisplay8: currentSettings.propertyDisplay8,
          propertyDisplay9: currentSettings.propertyDisplay9,
          propertyDisplay10: currentSettings.propertyDisplay10,
          propertyDisplay11: currentSettings.propertyDisplay11,
          propertyDisplay12: currentSettings.propertyDisplay12,
          propertyDisplay13: currentSettings.propertyDisplay13,
          propertyDisplay14: currentSettings.propertyDisplay14
        };
        this.onDataUpdated();
      }
    }, 100);
    this.register(() => {
      if (this.settingsPollInterval !== null) {
        window.clearInterval(this.settingsPollInterval);
        this.settingsPollInterval = null;
      }
    });
  }
  /**
   * Preload MDX frontmatter for all visible entries to prevent flashing
   * This ensures all MDX data is available synchronously during card transformation
   */
  async preloadMdxFrontmatter(entries) {
    const mdxEntries = entries.filter((entry) => {
      const file = this.app.vault.getAbstractFileByPath(entry.file.path);
      return file instanceof import_obsidian23.TFile && file.extension === "mdx" && !(entry.file.path in this.mdxFrontmatterCache);
    });
    if (mdxEntries.length === 0) {
      return;
    }
    await Promise.all(
      mdxEntries.map(async (entry) => {
        const file = this.app.vault.getAbstractFileByPath(entry.file.path);
        if (file instanceof import_obsidian23.TFile) {
          try {
            const frontmatter = await getFileFrontmatter(this.app, file);
            this.mdxFrontmatterCache[entry.file.path] = frontmatter;
          } catch (error) {
            console.error(`Bases CMS: Error preloading frontmatter for ${entry.file.path}:`, error);
            this.mdxFrontmatterCache[entry.file.path] = null;
          }
        }
      })
    );
  }
  async loadContentForEntries(entries, settings) {
    if (settings.showTextPreview) {
      const snippetEntriesPromises = entries.filter((entry) => !(entry.file.path in this.snippets)).map(async (entry) => {
        const file = this.app.vault.getAbstractFileByPath(entry.file.path);
        if (!(file instanceof import_obsidian23.TFile)) return null;
        const descValue = await getFirstBasesPropertyValue(entry, settings.descriptionProperty, this.app);
        return {
          path: entry.file.path,
          file,
          descriptionData: descValue == null ? void 0 : descValue.data
        };
      });
      const snippetEntries = (await Promise.all(snippetEntriesPromises)).filter((e) => e !== null);
      if (snippetEntries.length > 0) {
        await loadSnippetsForEntries(
          snippetEntries,
          settings.fallbackToContent,
          false,
          this.app,
          this.snippets,
          settings.truncatePreviewProperty
        );
      }
    }
    if (settings.imageFormat !== "none") {
      const imageEntriesPromises = entries.filter((entry) => !(entry.file.path in this.images)).map(async (entry) => {
        const file = this.app.vault.getAbstractFileByPath(entry.file.path);
        if (!(file instanceof import_obsidian23.TFile)) return null;
        const imagePropertyValues = await getAllBasesImagePropertyValues(entry, settings.imageProperty, this.app);
        return {
          path: entry.file.path,
          file,
          imagePropertyValues
        };
      });
      const imageEntries = (await Promise.all(imageEntriesPromises)).filter((e) => e !== null);
      if (imageEntries.length > 0) {
        await loadImagesForEntries(
          imageEntries,
          settings.fallbackToEmbeds,
          this.app,
          this.images,
          this.hasImageAvailable
        );
      }
    }
  }
  /**
   * Direct delete handler for context menu - deletes a single file without selection
   */
  getDirectDeleteHandler(filePath) {
    return async () => {
      const { prepareDeletionPreview: prepareDeletionPreview2, executeSmartDeletion: executeSmartDeletion2 } = await Promise.resolve().then(() => (init_smart_deletion(), smart_deletion_exports));
      const { DeletionPreviewModal: DeletionPreviewModal2 } = await Promise.resolve().then(() => (init_deletion_preview(), deletion_preview_exports));
      if (this.plugin.settings.confirmDeletions) {
        const preview = await prepareDeletionPreview2(
          this.app,
          [filePath],
          this.plugin.settings
        );
        const modal = new DeletionPreviewModal2(
          this.app,
          preview,
          () => {
            this.onDataUpdated();
          }
        );
        modal.open();
      } else {
        const preview = await prepareDeletionPreview2(
          this.app,
          [filePath],
          this.plugin.settings
        );
        await executeSmartDeletion2(this.app, preview);
        this.onDataUpdated();
      }
    };
  }
  renderCard(container, card, entry, index, settings) {
    const isSelected = this.selectedFiles.has(card.path);
    return this.cardRenderer.renderCard(
      container,
      card,
      entry,
      settings,
      this,
      isSelected,
      (path, selected) => {
        this.handleSelectionChange(path, selected);
      },
      (path, property, value) => {
        void this.handlePropertyToggle(path, property, value);
      },
      { handleDelete: this.getDirectDeleteHandler(card.path) }
    );
  }
  /**
   * Update card image when it becomes available
   * Called asynchronously after images load
   */
  updateCardImage(path, imageUrl) {
    var _a;
    const cardEl = this.containerEl.querySelector(`.card[data-path="${path}"]`);
    if (!cardEl) return;
    const url = Array.isArray(imageUrl) ? imageUrl[0] : imageUrl;
    if (!url) return;
    let imageEmbedContainer = cardEl.querySelector(".image-embed");
    if (!imageEmbedContainer) {
      const placeholder = cardEl.querySelector(".card-cover-placeholder, .card-thumbnail-placeholder");
      const isThumbnail = cardEl.classList.contains("image-format-thumbnail");
      const isCover = cardEl.classList.contains("image-format-cover");
      if (placeholder) {
        const existingBadge = placeholder.querySelector(".card-status-badge");
        const imageClassName = placeholder.classList.contains("card-cover-placeholder") ? "card-cover" : "card-thumbnail";
        const imageEl = (_a = placeholder.parentElement) == null ? void 0 : _a.createDiv(imageClassName);
        if (imageEl) {
          imageEmbedContainer = imageEl.createDiv("image-embed");
          if (existingBadge) {
            imageEl.appendChild(existingBadge);
          }
          placeholder.remove();
        }
      } else if (isThumbnail) {
        const contentContainer = cardEl.querySelector(".card-content");
        if (contentContainer) {
          const textWrapper = contentContainer.querySelector(".card-text-wrapper");
          const imageEl = textWrapper ? contentContainer.insertBefore(contentContainer.createDiv("card-thumbnail"), textWrapper) : contentContainer.createDiv("card-thumbnail");
          imageEmbedContainer = imageEl.createDiv("image-embed");
        }
      } else if (isCover) {
        const contentContainer = cardEl.querySelector(".card-content");
        if (contentContainer) {
          const imageEl = contentContainer.createDiv("card-cover");
          imageEmbedContainer = imageEl.createDiv("image-embed");
        }
      }
    }
    if (imageEmbedContainer) {
      void (async () => {
        const finalUrl = await convertGifToStatic(url, this.plugin.settings.forceStaticGifImages);
        imageEmbedContainer.style.backgroundImage = `url("${finalUrl}")`;
      })();
      imageEmbedContainer.style.backgroundImage = `url("${url}")`;
      setCssProps(imageEmbedContainer, {
        backgroundSize: "cover",
        backgroundPosition: "center center",
        backgroundRepeat: "no-repeat"
      });
    }
  }
  getSortMethod() {
    const sortConfigs = this.config.getSort();
    if (sortConfigs && sortConfigs.length > 0) {
      const firstSort = sortConfigs[0];
      const property = firstSort.property;
      const direction = firstSort.direction.toLowerCase();
      if (property.includes("ctime")) {
        return `ctime-${direction}`;
      }
      if (property.includes("mtime")) {
        return `mtime-${direction}`;
      }
    }
    return "mtime-desc";
  }
  handleSelectionChange(path, selected) {
    if (selected) {
      this.selectedFiles.add(path);
    } else {
      this.selectedFiles.delete(path);
    }
    this.updateSelectionUI();
    if (this.selectedFiles.size === 0) {
      if (this.bulkToolbar) {
        this.bulkToolbar.hide();
        const toolbarEl = this.containerEl.querySelector(".bases-cms-bulk-toolbar");
        if (toolbarEl instanceof HTMLElement) {
          toolbarEl.removeClass("bases-cms-bulk-toolbar-visible");
          toolbarEl.addClass("bases-cms-bulk-toolbar-hidden");
        }
      }
    }
  }
  async handlePropertyToggle(path, property, value) {
    if (this.propertyToggleHandler) {
      await this.propertyToggleHandler.handlePropertyToggle(path, property, value);
    }
  }
  selectAll() {
    const cards = this.containerEl.querySelectorAll(".bases-cms-card");
    cards.forEach((cardEl) => {
      const path = cardEl.getAttribute("data-path");
      if (path) {
        this.selectedFiles.add(path);
      }
    });
    this.updateSelectionUI();
  }
  deselectAll() {
    this.selectedFiles.clear();
    this.updateSelectionUI();
  }
  /**
   * Refresh the toolbar when settings change
   * Called from settings tab when toolbar button visibility settings are updated
   */
  refreshToolbar() {
    if (this.bulkToolbar) {
      const currentCount = this.selectedFiles.size;
      this.bulkToolbar.recreate();
      if (currentCount > 0) {
        this.bulkToolbar.updateCount(currentCount);
      }
    }
  }
  updateSelectionUI() {
    const cards = this.containerEl.querySelectorAll(".card");
    cards.forEach((cardEl) => {
      const path = cardEl.getAttribute("data-path");
      const checkbox = cardEl.querySelector('input[type="checkbox"].selection-checkbox');
      if (path) {
        const isSelected = this.selectedFiles.has(path);
        if (isSelected) {
          cardEl.addClass("selected");
        } else {
          cardEl.removeClass("selected");
        }
        if (checkbox) {
          checkbox.checked = isSelected;
        }
      }
    });
    if (this.selectedFiles.size > 0) {
      const orphanedToolbars = document.querySelectorAll(".bases-cms-bulk-toolbar");
      orphanedToolbars.forEach((toolbar) => {
        const toolbarInstance = toolbar.__bulkToolbarInstance;
        if (!toolbarInstance || toolbarInstance !== this.bulkToolbar) {
          toolbar.remove();
        }
      });
      if (!this.bulkToolbar) {
        const settings = readCMSSettings(
          this.config,
          this.plugin.settings
        );
        this.bulkToolbar = new BulkToolbar(
          this.app,
          this.plugin,
          this.containerEl,
          () => Array.from(this.selectedFiles),
          () => {
            this.selectedFiles.clear();
            this.updateSelectionUI();
          },
          () => {
            const selectedPaths = Array.from(this.selectedFiles);
            this.isRefreshingWithSelection = true;
            if (this.bulkToolbar && selectedPaths.length > 0) {
              this.bulkToolbar.show();
            }
            this.onDataUpdated();
            window.setTimeout(() => {
              selectedPaths.forEach((path) => {
                if (this.app.vault.getAbstractFileByPath(path)) {
                  this.selectedFiles.add(path);
                }
              });
              this.isRefreshingWithSelection = false;
              this.updateSelectionUI();
              if (this.selectedFiles.size > 0 && this.bulkToolbar) {
                this.bulkToolbar.show();
                this.bulkToolbar.updateCount(this.selectedFiles.size);
              }
              window.setTimeout(() => {
                if (this.selectedFiles.size > 0 && this.bulkToolbar) {
                  this.bulkToolbar.show();
                  this.bulkToolbar.updateCount(this.selectedFiles.size);
                }
              }, 100);
            }, 250);
          },
          () => {
            this.selectAll();
          },
          settings
        );
      } else {
        const settings = readCMSSettings(
          this.config,
          this.plugin.settings
        );
        this.bulkToolbar.updateSettings(settings);
      }
      this.bulkToolbar.updateCount(this.selectedFiles.size);
      this.bulkToolbar.show();
    } else {
      if (this.bulkToolbar && !this.isRefreshingWithSelection) {
        this.bulkToolbar.hide();
        const toolbarEl = this.containerEl.querySelector(".bases-cms-bulk-toolbar");
        if (toolbarEl instanceof HTMLElement) {
          toolbarEl.removeClass("bases-cms-bulk-toolbar-visible");
          toolbarEl.addClass("bases-cms-bulk-toolbar-hidden");
        }
      }
    }
  }
  onClose() {
    this.scrollLayoutManager.cleanup();
    if (this.viewSwitchListener) {
      this.viewSwitchListener.cleanup();
    }
    if (this.settingsPollInterval !== null) {
      window.clearInterval(this.settingsPollInterval);
      this.settingsPollInterval = null;
    }
    this.propertyObservers.forEach((obs) => obs.disconnect());
    this.propertyObservers = [];
    if (this.bulkToolbar) {
      this.bulkToolbar.destroy();
    }
    this.selectedFiles.clear();
    const orphanedToolbars = document.querySelectorAll(".bases-cms-bulk-toolbar");
    orphanedToolbars.forEach((toolbar) => toolbar.remove());
    const pluginWithMethod = this.plugin;
    if (pluginWithMethod && typeof pluginWithMethod.removeView === "function") {
      pluginWithMethod.removeView(this);
    }
  }
  /**
   * Override new note creation to use custom location if configured
   */
  async onNew() {
    var _a;
    const settings = readCMSSettings(
      this.config,
      this.plugin.settings
    );
    if (settings.customizeNewButton) {
      try {
        const locationInput = ((_a = settings.newNoteLocation) == null ? void 0 : _a.trim()) || "";
        if (locationInput === "") {
          const vaultConfig = this.app.vault.config;
          const newFileLocation = (vaultConfig == null ? void 0 : vaultConfig.newFileLocation) || "folder";
          const newFileFolderPath = (vaultConfig == null ? void 0 : vaultConfig.newFileFolderPath) || "";
          let filePath = "Untitled.md";
          if (newFileLocation === "folder" && newFileFolderPath) {
            filePath = `${newFileFolderPath}/Untitled.md`;
          } else if (newFileLocation === "current") {
            const activeFile = this.app.workspace.getActiveFile();
            if (activeFile && activeFile.parent) {
              filePath = `${activeFile.parent.path}/Untitled.md`;
            }
          } else if (newFileLocation === "root") {
            filePath = "Untitled.md";
          }
          const file = await this.app.vault.create(filePath, "");
          await this.app.workspace.openLinkText(file.path, "", false);
          return true;
        }
        if (locationInput === "/" || locationInput.replace(/\//g, "") === "") {
          const newFile = await this.app.vault.create("Untitled.md", "");
          await this.app.workspace.openLinkText(newFile.path, "", false);
          return true;
        }
        const folderPath = locationInput.replace(/^\/+|\/+$/g, "");
        let folder = this.app.vault.getAbstractFileByPath(folderPath);
        if (!folder || !("children" in folder)) {
          await this.app.vault.createFolder(folderPath);
          folder = this.app.vault.getAbstractFileByPath(folderPath);
        }
        if (folder && "children" in folder) {
          const newFile = await this.app.vault.create(`${folderPath}/Untitled.md`, "");
          await this.app.workspace.openLinkText(newFile.path, "", false);
          return true;
        }
      } catch (e) {
      }
    }
    return false;
  }
};

// src/utils/view-registration.ts
function registerBasesCMSView(plugin, retries = 5) {
  try {
    const basesPlugin = plugin;
    if (typeof basesPlugin.registerBasesView === "function") {
      basesPlugin.registerBasesView(CMS_VIEW_TYPE, {
        name: "CMS",
        icon: plugin.settings.useHomeIcon ? "lucide-home" : "lucide-blocks",
        factory: (controller, containerEl) => {
          const view = new BasesCMSView(controller, containerEl, plugin);
          const pluginWithViews = plugin;
          if (pluginWithViews.activeViews) {
            pluginWithViews.activeViews.add(view);
          }
          return view;
        },
        options: getCMSViewOptions2()
      });
    } else if (retries > 0) {
      const pluginWithTimeout = plugin;
      const registrationTimeout = pluginWithTimeout.registrationTimeout;
      if (registrationTimeout !== null && registrationTimeout !== void 0) {
        window.clearTimeout(registrationTimeout);
      }
      pluginWithTimeout.registrationTimeout = window.setTimeout(() => {
        pluginWithTimeout.registrationTimeout = null;
        registerBasesCMSView(plugin, retries - 1);
      }, 200);
    } else {
      console.warn("Bases CMS: registerBasesView not available. Is Bases plugin installed?");
    }
  } catch (error) {
    console.error("Bases CMS: Error registering view:", error);
  }
}
function getCMSViewOptions2() {
  const { getCMSViewOptions: getCMSViewOptions3 } = (init_settings_schema(), __toCommonJS(settings_schema_exports));
  return getCMSViewOptions3;
}

// src/main.ts
var BasesCMSPlugin = class extends import_obsidian24.Plugin {
  constructor() {
    super(...arguments);
    this.activeViews = /* @__PURE__ */ new Set();
    this.registrationTimeout = null;
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new BasesCMSSettingTab(this.app, this));
    registerBasesCMSView(this);
  }
  onunload() {
    if (this.registrationTimeout !== null) {
      window.clearTimeout(this.registrationTimeout);
      this.registrationTimeout = null;
    }
    this.activeViews.clear();
  }
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  /**
   * Refresh toolbars in all active CMS views
   */
  refreshAllToolbars() {
    const viewsToRemove = [];
    this.activeViews.forEach((view) => {
      const containerEl = view.containerEl;
      if (!containerEl || !containerEl.parentElement) {
        viewsToRemove.push(view);
      }
    });
    viewsToRemove.forEach((view) => this.activeViews.delete(view));
    this.activeViews.forEach((view) => {
      if (view && typeof view.refreshToolbar === "function") {
        view.refreshToolbar();
      }
    });
  }
  /**
   * Remove a view from tracking when it's closed
   */
  removeView(view) {
    this.activeViews.delete(view);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3V0aWxzL21keC1mcm9udG1hdHRlci50cyIsICJzcmMvdXRpbHMvZnJvbnRtYXR0ZXItaGVscGVyLnRzIiwgInNyYy9zaGFyZWQvc2V0dGluZ3Mtc2NoZW1hLnRzIiwgInNyYy91dGlscy9hdHRhY2htZW50LWRldGVjdGlvbi50cyIsICJzcmMvdXRpbHMvc21hcnQtZGVsZXRpb24udHMiLCAic3JjL2NvbXBvbmVudHMvZGVsZXRpb24tcHJldmlldy50cyIsICJzcmMvbWFpbi50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL2NvbXBvbmVudHMvY29tbWFuZC1waWNrZXItbW9kYWwudHMiLCAic3JjL2NvbXBvbmVudHMvaWNvbi1waWNrZXItbW9kYWwudHMiLCAic3JjL3V0aWxzL3NldHRpbmdzLWNvbXBhdC50cyIsICJzcmMvdHlwZXMudHMiLCAic3JjL3ZpZXdzL2Ntcy12aWV3LnRzIiwgInNyYy91dGlscy9jc3MtcHJvcHMudHMiLCAic3JjL3NoYXJlZC9kYXRhLXRyYW5zZm9ybS50cyIsICJzcmMvdXRpbHMvcHJvcGVydHkudHMiLCAic3JjL3V0aWxzL3N0eWxlLXNldHRpbmdzLnRzIiwgInNyYy91dGlscy9pbWFnZS50cyIsICJzcmMvdXRpbHMvcHJldmlldy50cyIsICJzcmMvc2hhcmVkL2NvbnRlbnQtbG9hZGVyLnRzIiwgInNyYy92aWV3cy9zaGFyZWQtcmVuZGVyZXIudHMiLCAic3JjL3V0aWxzL2RyYWZ0LXN0YXR1cy1iYWRnZS50cyIsICJzcmMvdXRpbHMvcXVpY2stZWRpdC1pY29uLnRzIiwgInNyYy91dGlscy9wcm9wZXJ0eS1yZW5kZXJlci50cyIsICJzcmMvY29tcG9uZW50cy9idWxrLXRvb2xiYXIudHMiLCAic3JjL3V0aWxzL2J1bGstb3BlcmF0aW9ucy50cyIsICJzcmMvdXRpbHMvZnJvbnRtYXR0ZXIudHMiLCAic3JjL2NvbXBvbmVudHMvbWFuYWdlLXRhZ3MtbW9kYWwudHMiLCAic3JjL2NvbXBvbmVudHMvc2V0LXByb3BlcnR5LW1vZGFsLnRzIiwgInNyYy9jb21wb25lbnRzL3JlbW92ZS1wcm9wZXJ0eS1tb2RhbC50cyIsICJzcmMvdXRpbHMvdG9vbGJhci1hY3Rpb25zLnRzIiwgInNyYy9jb21wb25lbnRzL2J1bGstb3BlcmF0aW9uLWNvbmZpcm0udHMiLCAic3JjL3V0aWxzL25ldy1ub3RlLWludGVyY2VwdG9yLnRzIiwgInNyYy91dGlscy9wcm9wZXJ0eS10b2dnbGUtaGFuZGxlci50cyIsICJzcmMvdXRpbHMvc2Nyb2xsLWxheW91dC1tYW5hZ2VyLnRzIiwgInNyYy91dGlscy92aWV3LXN3aXRjaC1saXN0ZW5lci50cyIsICJzcmMvdXRpbHMvdmlldy1yZWdpc3RyYXRpb24udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxyXG4gKiBNRFggRnJvbnRtYXR0ZXIgVXRpbGl0aWVzXHJcbiAqIE1hbnVhbCBmcm9udG1hdHRlciBwYXJzaW5nIGFuZCBtb2RpZmljYXRpb24gZm9yIE1EWCBmaWxlc1xyXG4gKiBPYnNpZGlhbidzIG1ldGFkYXRhQ2FjaGUgYW5kIHByb2Nlc3NGcm9udE1hdHRlciBvbmx5IHdvcmsgZm9yIC5tZCBmaWxlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIHBhcnNlWWFtbCwgc3RyaW5naWZ5WWFtbCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYW4gTURYIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc01keEZpbGUoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gZmlsZS5leHRlbnNpb24gPT09ICdtZHgnO1xyXG59XHJcblxyXG4vKipcclxuICogUGFyc2UgZnJvbnRtYXR0ZXIgZnJvbSByYXcgZmlsZSBjb250ZW50XHJcbiAqIFJldHVybnMgdGhlIGZyb250bWF0dGVyIG9iamVjdCBhbmQgdGhlIGJvZHkgY29udGVudCBzZXBhcmF0ZWx5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNZHhGcm9udG1hdHRlcihcclxuXHRjb250ZW50OiBzdHJpbmdcclxuKTogeyBmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj47IGJvZHk6IHN0cmluZyB9IHwgbnVsbCB7XHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJSZWdleCA9IC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tXFxuLztcclxuXHRjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goZnJvbnRtYXR0ZXJSZWdleCk7XHJcblxyXG5cdGlmICghbWF0Y2gpIHtcclxuXHRcdC8vIE5vIGZyb250bWF0dGVyIGZvdW5kXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRmcm9udG1hdHRlcjoge30sXHJcblx0XHRcdGJvZHk6IGNvbnRlbnQsXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJUZXh0ID0gbWF0Y2hbMV07XHJcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBjb250ZW50LnNsaWNlKG1hdGNoWzBdLmxlbmd0aCk7XHJcblxyXG5cdHRyeSB7XHJcblx0XHRjb25zdCBwYXJzZWQgPSBwYXJzZVlhbWwoZnJvbnRtYXR0ZXJUZXh0KSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGwgfCB1bmRlZmluZWQ7XHJcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHBhcnNlZCAmJiB0eXBlb2YgcGFyc2VkID09PSAnb2JqZWN0JyA/IHBhcnNlZCA6IHt9O1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0ZnJvbnRtYXR0ZXIsXHJcblx0XHRcdGJvZHk6IGJvZHlDb250ZW50LFxyXG5cdFx0fTtcclxuXHR9IGNhdGNoIChlKSB7XHJcblx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIE1EWCBmcm9udG1hdHRlcjonLCBlKTtcclxuXHRcdC8vIFJldHVybiBlbXB0eSBmcm9udG1hdHRlciBidXQgcHJlc2VydmUgYm9keVxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0ZnJvbnRtYXR0ZXI6IHt9LFxyXG5cdFx0XHRib2R5OiBib2R5Q29udGVudCxcclxuXHRcdH07XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogUmVhZCBhbmQgcGFyc2UgZnJvbnRtYXR0ZXIgZnJvbSBhbiBNRFggZmlsZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWRNZHhGcm9udG1hdHRlcihcclxuXHRhcHA6IEFwcCxcclxuXHRmaWxlOiBURmlsZVxyXG4pOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbD4ge1xyXG5cdGlmICghaXNNZHhGaWxlKGZpbGUpKSB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblxyXG5cdHRyeSB7XHJcblx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcblx0XHRjb25zdCBwYXJzZWQgPSBwYXJzZU1keEZyb250bWF0dGVyKGNvbnRlbnQpO1xyXG5cdFx0cmV0dXJuIHBhcnNlZCA/IHBhcnNlZC5mcm9udG1hdHRlciA6IG51bGw7XHJcblx0fSBjYXRjaCAoZSkge1xyXG5cdFx0Y29uc29sZS5lcnJvcihgRXJyb3IgcmVhZGluZyBNRFggZnJvbnRtYXR0ZXIgZnJvbSAke2ZpbGUucGF0aH06YCwgZSk7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXcml0ZSB1cGRhdGVkIGZyb250bWF0dGVyIHRvIGFuIE1EWCBmaWxlXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd3JpdGVNZHhGcm9udG1hdHRlcihcclxuXHRhcHA6IEFwcCxcclxuXHRmaWxlOiBURmlsZSxcclxuXHRmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cclxuKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0aWYgKCFpc01keEZpbGUoZmlsZSkpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihgRmlsZSAke2ZpbGUucGF0aH0gaXMgbm90IGFuIE1EWCBmaWxlYCk7XHJcblx0fVxyXG5cclxuXHR0cnkge1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cdFx0Y29uc3QgcGFyc2VkID0gcGFyc2VNZHhGcm9udG1hdHRlcihjb250ZW50KTtcclxuXHJcblx0XHRpZiAoIXBhcnNlZCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBleGlzdGluZyBmcm9udG1hdHRlcicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFN0cmluZ2lmeSB0aGUgdXBkYXRlZCBmcm9udG1hdHRlclxyXG5cdFx0Y29uc3QgbmV3RnJvbnRtYXR0ZXJUZXh0ID0gc3RyaW5naWZ5WWFtbChmcm9udG1hdHRlcikudHJpbSgpO1xyXG5cclxuXHRcdC8vIFJlY29uc3RydWN0IGZpbGUgY29udGVudFxyXG5cdFx0Y29uc3QgbmV3Q29udGVudCA9IGAtLS1cXG4ke25ld0Zyb250bWF0dGVyVGV4dH1cXG4tLS1cXG4ke3BhcnNlZC5ib2R5fWA7XHJcblxyXG5cdFx0Ly8gV3JpdGUgYmFjayB0byBmaWxlXHJcblx0XHRhd2FpdCBhcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0NvbnRlbnQpO1xyXG5cdH0gY2F0Y2ggKGUpIHtcclxuXHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIHdyaXRpbmcgTURYIGZyb250bWF0dGVyIHRvICR7ZmlsZS5wYXRofTpgLCBlKTtcclxuXHRcdHRocm93IGU7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogUHJvY2VzcyBmcm9udG1hdHRlciBmb3IgYW4gTURYIGZpbGUgKHNpbWlsYXIgQVBJIHRvIHByb2Nlc3NGcm9udE1hdHRlcilcclxuICogVGhlIGNhbGxiYWNrIHJlY2VpdmVzIHRoZSBmcm9udG1hdHRlciBvYmplY3QgYW5kIGNhbiBtb2RpZnkgaXRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzTWR4RnJvbnRNYXR0ZXIoXHJcblx0YXBwOiBBcHAsXHJcblx0ZmlsZTogVEZpbGUsXHJcblx0Y2FsbGJhY2s6IChmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pID0+IHZvaWRcclxuKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0aWYgKCFpc01keEZpbGUoZmlsZSkpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihgRmlsZSAke2ZpbGUucGF0aH0gaXMgbm90IGFuIE1EWCBmaWxlYCk7XHJcblx0fVxyXG5cclxuXHR0cnkge1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cdFx0Y29uc3QgcGFyc2VkID0gcGFyc2VNZHhGcm9udG1hdHRlcihjb250ZW50KTtcclxuXHJcblx0XHRpZiAoIXBhcnNlZCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBleGlzdGluZyBmcm9udG1hdHRlcicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENyZWF0ZSBhIGNvcHkgb2YgdGhlIGZyb250bWF0dGVyIGZvciB0aGUgY2FsbGJhY2sgdG8gbW9kaWZ5XHJcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHsgLi4ucGFyc2VkLmZyb250bWF0dGVyIH07XHJcblxyXG5cdFx0Ly8gQ2FsbCB0aGUgY2FsbGJhY2sgdG8gbW9kaWZ5IGZyb250bWF0dGVyXHJcblx0XHRjYWxsYmFjayhmcm9udG1hdHRlcik7XHJcblxyXG5cdFx0Ly8gU3RyaW5naWZ5IHRoZSB1cGRhdGVkIGZyb250bWF0dGVyXHJcblx0XHRjb25zdCBuZXdGcm9udG1hdHRlclRleHQgPSBzdHJpbmdpZnlZYW1sKGZyb250bWF0dGVyKS50cmltKCk7XHJcblxyXG5cdFx0Ly8gUmVjb25zdHJ1Y3QgZmlsZSBjb250ZW50XHJcblx0XHRjb25zdCBuZXdDb250ZW50ID0gYC0tLVxcbiR7bmV3RnJvbnRtYXR0ZXJUZXh0fVxcbi0tLVxcbiR7cGFyc2VkLmJvZHl9YDtcclxuXHJcblx0XHQvLyBXcml0ZSBiYWNrIHRvIGZpbGVcclxuXHRcdGF3YWl0IGFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudCk7XHJcblx0fSBjYXRjaCAoZSkge1xyXG5cdFx0Y29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBNRFggZnJvbnRtYXR0ZXIgZm9yICR7ZmlsZS5wYXRofTpgLCBlKTtcclxuXHRcdHRocm93IGU7XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogVW5pZmllZCBGcm9udG1hdHRlciBIZWxwZXJcclxuICogUHJvdmlkZXMgYSB1bmlmaWVkIGludGVyZmFjZSBmb3IgcmVhZGluZyBhbmQgbW9kaWZ5aW5nIGZyb250bWF0dGVyXHJcbiAqIFdvcmtzIGZvciBib3RoIC5tZCBmaWxlcyAodXNpbmcgT2JzaWRpYW4ncyBjYWNoZSkgYW5kIC5tZHggZmlsZXMgKG1hbnVhbCBwYXJzaW5nKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7XHJcblx0aXNNZHhGaWxlLFxyXG5cdHJlYWRNZHhGcm9udG1hdHRlcixcclxuXHRwcm9jZXNzTWR4RnJvbnRNYXR0ZXIsXHJcbn0gZnJvbSAnLi9tZHgtZnJvbnRtYXR0ZXInO1xyXG5cclxuLyoqXHJcbiAqIEdldCBmcm9udG1hdHRlciBmcm9tIGEgZmlsZSAod29ya3MgZm9yIGJvdGggLm1kIGFuZCAubWR4KVxyXG4gKiBGb3IgLm1kIGZpbGVzLCB1c2VzIE9ic2lkaWFuJ3MgbWV0YWRhdGEgY2FjaGUgKGZhc3QpXHJcbiAqIEZvciAubWR4IGZpbGVzLCB1c2VzIG1hbnVhbCBwYXJzaW5nXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmlsZUZyb250bWF0dGVyKFxyXG5cdGFwcDogQXBwLFxyXG5cdGZpbGU6IFRGaWxlXHJcbik6IFByb21pc2U8UmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPiB7XHJcblx0aWYgKGlzTWR4RmlsZShmaWxlKSkge1xyXG5cdFx0Ly8gTURYIGZpbGVzOiB1c2UgbWFudWFsIHBhcnNpbmdcclxuXHRcdHJldHVybiBhd2FpdCByZWFkTWR4RnJvbnRtYXR0ZXIoYXBwLCBmaWxlKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Ly8gLm1kIGZpbGVzOiB1c2UgT2JzaWRpYW4ncyBtZXRhZGF0YSBjYWNoZVxyXG5cdFx0Y29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcblx0XHRyZXR1cm4gbWV0YWRhdGE/LmZyb250bWF0dGVyIHx8IG51bGw7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogUHJvY2VzcyBmcm9udG1hdHRlciBmb3IgYSBmaWxlICh3b3JrcyBmb3IgYm90aCAubWQgYW5kIC5tZHgpXHJcbiAqIFNpbWlsYXIgQVBJIHRvIGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIgYnV0IHdvcmtzIGZvciBNRFggZmlsZXMgdG9vXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0ZpbGVGcm9udE1hdHRlcihcclxuXHRhcHA6IEFwcCxcclxuXHRmaWxlOiBURmlsZSxcclxuXHRjYWxsYmFjazogKGZyb250bWF0dGVyOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgPT4gdm9pZFxyXG4pOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRpZiAoaXNNZHhGaWxlKGZpbGUpKSB7XHJcblx0XHQvLyBNRFggZmlsZXM6IHVzZSBtYW51YWwgcHJvY2Vzc2luZ1xyXG5cdFx0YXdhaXQgcHJvY2Vzc01keEZyb250TWF0dGVyKGFwcCwgZmlsZSwgY2FsbGJhY2spO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyAubWQgZmlsZXM6IHVzZSBPYnNpZGlhbidzIGJ1aWx0LWluIG1ldGhvZFxyXG5cdFx0YXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCBjYWxsYmFjayk7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGFuIE1EWCBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNNZHhGaWxlSGVscGVyKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGlzTWR4RmlsZShmaWxlKTtcclxufVxyXG4iLCAiLyoqXG4gKiBTZXR0aW5ncyBzY2hlbWEgZm9yIENNUyB2aWV3c1xuICovXG5cbmltcG9ydCB0eXBlIHsgQmFzZXNDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB0eXBlIHsgQ01TU2V0dGluZ3MgfSBmcm9tICcuL2RhdGEtdHJhbnNmb3JtJztcblxuLy8gQmFzZXMgY29uZmlnIG9iamVjdCBpbnRlcmZhY2VcbmludGVyZmFjZSBCYXNlc0NvbmZpZyB7XG5cdGdldChrZXk6IHN0cmluZyk6IHVua25vd247XG59XG5cbi8qKlxuICogUmVhZCBDTVMgc2V0dGluZ3MgZnJvbSBCYXNlcyBjb25maWcgd2l0aCBwbHVnaW4gZGVmYXVsdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlYWRDTVNTZXR0aW5ncyhcblx0Y29uZmlnOiBCYXNlc0NvbmZpZyB8IHVuZGVmaW5lZCxcblx0cGx1Z2luU2V0dGluZ3M6IEJhc2VzQ01TU2V0dGluZ3Ncbik6IENNU1NldHRpbmdzIHtcblx0Ly8gSGVscGVyIHRvIHNhZmVseSBnZXQgY29uZmlnIHZhbHVlc1xuXHRjb25zdCBnZXRDb25maWcgPSAoa2V5OiBzdHJpbmcpOiB1bmtub3duID0+IHtcblx0XHRyZXR1cm4gY29uZmlnPy5nZXQ/LihrZXkpO1xuXHR9O1xuXHRcblx0cmV0dXJuIHtcblx0XHR0aXRsZVByb3BlcnR5OiAoZ2V0Q29uZmlnKCd0aXRsZVByb3BlcnR5JykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRkZXNjcmlwdGlvblByb3BlcnR5OiAoZ2V0Q29uZmlnKCdkZXNjcmlwdGlvblByb3BlcnR5JykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRpbWFnZVByb3BlcnR5OiAoZ2V0Q29uZmlnKCdpbWFnZVByb3BlcnR5JykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRzaG93VGl0bGU6IHRydWUsIC8vIEFsd2F5cyBzaG93IHRpdGxlLCBkZWZhdWx0aW5nIHRvIGZpbGUgbmFtZSBpZiBubyBwcm9wZXJ0eSBzZXRcblx0XHRzaG93RGF0ZTogKGdldENvbmZpZygnc2hvd0RhdGUnKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcblx0XHRkYXRlUHJvcGVydHk6IChnZXRDb25maWcoJ2RhdGVQcm9wZXJ0eScpIGFzIHN0cmluZykgfHwgJycsXG5cdFx0ZGF0ZUluY2x1ZGVUaW1lOiAoZ2V0Q29uZmlnKCdkYXRlSW5jbHVkZVRpbWUnKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcblx0XHRzaG93VGV4dFByZXZpZXc6IChnZXRDb25maWcoJ3Nob3dUZXh0UHJldmlldycpIGFzIGJvb2xlYW4pID8/IHRydWUsXG5cdFx0ZmFsbGJhY2tUb0NvbnRlbnQ6IChnZXRDb25maWcoJ2ZhbGxiYWNrVG9Db250ZW50JykgYXMgYm9vbGVhbikgPz8gdHJ1ZSxcblx0XHR0cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eTogKGdldENvbmZpZygndHJ1bmNhdGVQcmV2aWV3UHJvcGVydHknKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcblx0XHRmYWxsYmFja1RvRW1iZWRzOiAoKCkgPT4ge1xuXHRcdFx0Y29uc3QgdmFsdWUgPSBnZXRDb25maWcoJ2ZhbGxiYWNrVG9FbWJlZHMnKTtcblx0XHRcdGlmICh2YWx1ZSA9PT0gJ2Fsd2F5cycgfHwgdmFsdWUgPT09ICdpZi1lbXB0eScgfHwgdmFsdWUgPT09ICduZXZlcicpIHtcblx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0fVxuXHRcdFx0Ly8gTGVnYWN5IGJvb2xlYW4gc3VwcG9ydCAtIGRlZmF1bHQgdG8gJ2lmLWVtcHR5JyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuXHRcdFx0cmV0dXJuICh2YWx1ZSA9PT0gZmFsc2UpID8gJ25ldmVyJyA6ICdpZi1lbXB0eSc7XG5cdFx0fSkoKSxcblx0XHRwcm9wZXJ0eURpc3BsYXkxOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXkxJykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRwcm9wZXJ0eURpc3BsYXkyOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXkyJykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRwcm9wZXJ0eURpc3BsYXkzOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXkzJykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRwcm9wZXJ0eURpc3BsYXk0OiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXk0JykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRwcm9wZXJ0eURpc3BsYXk1OiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXk1JykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRwcm9wZXJ0eURpc3BsYXk2OiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXk2JykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRwcm9wZXJ0eURpc3BsYXk3OiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXk3JykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRwcm9wZXJ0eURpc3BsYXk4OiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXk4JykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRwcm9wZXJ0eURpc3BsYXk5OiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXk5JykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRwcm9wZXJ0eURpc3BsYXkxMDogKGdldENvbmZpZygncHJvcGVydHlEaXNwbGF5MTAnKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdHByb3BlcnR5RGlzcGxheTExOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXkxMScpIGFzIHN0cmluZykgfHwgJycsXG5cdFx0cHJvcGVydHlEaXNwbGF5MTI6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTEyJykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRwcm9wZXJ0eURpc3BsYXkxMzogKGdldENvbmZpZygncHJvcGVydHlEaXNwbGF5MTMnKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdHByb3BlcnR5RGlzcGxheTE0OiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXkxNCcpIGFzIHN0cmluZykgfHwgJycsXG5cdFx0cHJvcGVydHlMYXlvdXQxMlNpZGVCeVNpZGU6IChnZXRDb25maWcoJ3Byb3BlcnR5TGF5b3V0MTJTaWRlQnlTaWRlJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXG5cdFx0cHJvcGVydHlMYXlvdXQzNFNpZGVCeVNpZGU6IChnZXRDb25maWcoJ3Byb3BlcnR5TGF5b3V0MzRTaWRlQnlTaWRlJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXG5cdFx0cHJvcGVydHlMYXlvdXQ1NlNpZGVCeVNpZGU6IChnZXRDb25maWcoJ3Byb3BlcnR5TGF5b3V0NTZTaWRlQnlTaWRlJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXG5cdFx0cHJvcGVydHlMYXlvdXQ3OFNpZGVCeVNpZGU6IChnZXRDb25maWcoJ3Byb3BlcnR5TGF5b3V0NzhTaWRlQnlTaWRlJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXG5cdFx0cHJvcGVydHlMYXlvdXQ5MTBTaWRlQnlTaWRlOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eUxheW91dDkxMFNpZGVCeVNpZGUnKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcblx0XHRwcm9wZXJ0eUxheW91dDExMTJTaWRlQnlTaWRlOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eUxheW91dDExMTJTaWRlQnlTaWRlJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXG5cdFx0cHJvcGVydHlMYXlvdXQxMzE0U2lkZUJ5U2lkZTogKGdldENvbmZpZygncHJvcGVydHlMYXlvdXQxMzE0U2lkZUJ5U2lkZScpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxuXHRcdHByb3BlcnR5R3JvdXAxUG9zaXRpb246IChnZXRDb25maWcoJ3Byb3BlcnR5R3JvdXAxUG9zaXRpb24nKSBhcyAndG9wJyB8ICdib3R0b20nKSB8fCAnYm90dG9tJyxcblx0XHRwcm9wZXJ0eUdyb3VwMlBvc2l0aW9uOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eUdyb3VwMlBvc2l0aW9uJykgYXMgJ3RvcCcgfCAnYm90dG9tJykgfHwgJ2JvdHRvbScsXG5cdFx0cHJvcGVydHlHcm91cDNQb3NpdGlvbjogKGdldENvbmZpZygncHJvcGVydHlHcm91cDNQb3NpdGlvbicpIGFzICd0b3AnIHwgJ2JvdHRvbScpIHx8ICdib3R0b20nLFxuXHRcdHByb3BlcnR5R3JvdXA0UG9zaXRpb246IChnZXRDb25maWcoJ3Byb3BlcnR5R3JvdXA0UG9zaXRpb24nKSBhcyAndG9wJyB8ICdib3R0b20nKSB8fCAnYm90dG9tJyxcblx0XHRwcm9wZXJ0eUdyb3VwNVBvc2l0aW9uOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eUdyb3VwNVBvc2l0aW9uJykgYXMgJ3RvcCcgfCAnYm90dG9tJykgfHwgJ2JvdHRvbScsXG5cdFx0cHJvcGVydHlHcm91cDZQb3NpdGlvbjogKGdldENvbmZpZygncHJvcGVydHlHcm91cDZQb3NpdGlvbicpIGFzICd0b3AnIHwgJ2JvdHRvbScpIHx8ICdib3R0b20nLFxuXHRcdHByb3BlcnR5R3JvdXA3UG9zaXRpb246IChnZXRDb25maWcoJ3Byb3BlcnR5R3JvdXA3UG9zaXRpb24nKSBhcyAndG9wJyB8ICdib3R0b20nKSB8fCAnYm90dG9tJyxcblx0XHRpbWFnZUZvcm1hdDogKGdldENvbmZpZygnaW1hZ2VGb3JtYXQnKSBhcyAnbm9uZScgfCAndGh1bWJuYWlsJyB8ICdjb3ZlcicpIHx8ICd0aHVtYm5haWwnLFxuXHRcdGltYWdlUG9zaXRpb246IChnZXRDb25maWcoJ2ltYWdlUG9zaXRpb24nKSBhcyAnbGVmdCcgfCAncmlnaHQnIHwgJ3RvcCcgfCAnYm90dG9tJykgfHwgJ3JpZ2h0Jyxcblx0XHRwcm9wZXJ0eUxhYmVsczogKGdldENvbmZpZygncHJvcGVydHlMYWJlbHMnKSBhcyAnaGlkZScgfCAnaW5saW5lJyB8ICdhYm92ZScpIHx8ICdoaWRlJyxcblx0XHRzaG93RHJhZnRTdGF0dXM6IChnZXRDb25maWcoJ3Nob3dEcmFmdFN0YXR1cycpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxuXHRcdGRyYWZ0U3RhdHVzUHJvcGVydHk6IChnZXRDb25maWcoJ2RyYWZ0U3RhdHVzUHJvcGVydHknKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdGRyYWZ0U3RhdHVzUmV2ZXJzZTogKGdldENvbmZpZygnZHJhZnRTdGF0dXNSZXZlcnNlJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXG5cdFx0ZHJhZnRTdGF0dXNVc2VGaWxlbmFtZVByZWZpeDogKGdldENvbmZpZygnZHJhZnRTdGF0dXNVc2VGaWxlbmFtZVByZWZpeCcpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxuXHRcdHNob3dUYWdzOiAoZ2V0Q29uZmlnKCdzaG93VGFncycpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxuXHRcdHRhZ3NQcm9wZXJ0eTogKGdldENvbmZpZygndGFnc1Byb3BlcnR5JykgYXMgc3RyaW5nKSB8fCAnJyxcblx0XHRtYXhUYWdzVG9TaG93OiAoZ2V0Q29uZmlnKCdtYXhUYWdzVG9TaG93JykgYXMgbnVtYmVyKSA/PyAzLFxuXHRcdGN1c3RvbWl6ZU5ld0J1dHRvbjogKGdldENvbmZpZygnY3VzdG9taXplTmV3QnV0dG9uJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXG5cdFx0bmV3Tm90ZUxvY2F0aW9uOiAoZ2V0Q29uZmlnKCduZXdOb3RlTG9jYXRpb24nKSBhcyBzdHJpbmcpIHx8ICcnLFxuXHRcdGhpZGVRdWlja0VkaXRJY29uOiAoZ2V0Q29uZmlnKCdoaWRlUXVpY2tFZGl0SWNvbicpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxuXHRcdGNhcmRTaXplOiAoZ2V0Q29uZmlnKCdjYXJkU2l6ZScpIGFzIG51bWJlcikgPz8gMjUwLFxuXHRcdGltYWdlQXNwZWN0UmF0aW86IChnZXRDb25maWcoJ2ltYWdlQXNwZWN0UmF0aW8nKSBhcyBudW1iZXIpID8/IDAuNTUsXG5cdH07XG59XG5cbi8qKlxuICogQ01TIHZpZXcgb3B0aW9ucyBmb3IgQmFzZXMgY29uZmlndXJhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q01TVmlld09wdGlvbnMoKTogdW5rbm93bltdIHtcblx0cmV0dXJuIFtcblx0XHQvLyBDYXJkIHNpemUgKHN0YW5kYWxvbmUpXG5cdFx0e1xuXHRcdFx0dHlwZTogJ3NsaWRlcicsXG5cdFx0XHRkaXNwbGF5TmFtZTogJ0NhcmQgc2l6ZScsXG5cdFx0XHRrZXk6ICdjYXJkU2l6ZScsXG5cdFx0XHRtaW46IDUwLFxuXHRcdFx0bWF4OiA4MDAsXG5cdFx0XHRzdGVwOiAxMCxcblx0XHRcdGRlZmF1bHQ6IDI1MFxuXHRcdH0sXG5cdFx0Ly8gVGl0bGUgZ3JvdXBcblx0XHR7XG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdUaXRsZScsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1RpdGxlIHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICd0aXRsZVByb3BlcnR5Jyxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0Ly8gVGV4dCBwcmV2aWV3IGdyb3VwXG5cdFx0e1xuXHRcdFx0dHlwZTogJ2dyb3VwJyxcblx0XHRcdGRpc3BsYXlOYW1lOiAnVGV4dCBwcmV2aWV3Jyxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgdGV4dCBwcmV2aWV3Jyxcblx0XHRcdFx0XHRrZXk6ICdzaG93VGV4dFByZXZpZXcnLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdUZXh0IHByZXZpZXcgcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ2Rlc2NyaXB0aW9uUHJvcGVydHknLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdVc2Ugbm90ZSBjb250ZW50IGlmIHRleHQgcHJldmlldyBwcm9wZXJ0eSB1bmF2YWlsYWJsZScsXG5cdFx0XHRcdFx0a2V5OiAnZmFsbGJhY2tUb0NvbnRlbnQnLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnVHJ1bmNhdGUgcHJldmlldyBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0a2V5OiAndHJ1bmNhdGVQcmV2aWV3UHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9LFxuXHRcdC8vIEltYWdlIGdyb3VwXG5cdFx0e1xuXHRcdFx0dHlwZTogJ2dyb3VwJyxcblx0XHRcdGRpc3BsYXlOYW1lOiAnSW1hZ2UnLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdkcm9wZG93bicsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdJbWFnZSBmb3JtYXQnLFxuXHRcdFx0XHRcdGtleTogJ2ltYWdlRm9ybWF0Jyxcblx0XHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0XHQnbm9uZSc6ICdObyBpbWFnZScsXG5cdFx0XHRcdFx0XHQndGh1bWJuYWlsJzogJ1RodW1ibmFpbCcsXG5cdFx0XHRcdFx0XHQnY292ZXInOiAnQ292ZXInXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRkZWZhdWx0OiAndGh1bWJuYWlsJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0ltYWdlIHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICdpbWFnZVByb3BlcnR5Jyxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdkcm9wZG93bicsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IGltYWdlIGVtYmVkcycsXG5cdFx0XHRcdFx0a2V5OiAnZmFsbGJhY2tUb0VtYmVkcycsXG5cdFx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdFx0J2Fsd2F5cyc6ICdBbHdheXMnLFxuXHRcdFx0XHRcdFx0J2lmLWVtcHR5JzogJ0lmIGltYWdlIHByb3BlcnR5IG1pc3Npbmcgb3IgZW1wdHknLFxuXHRcdFx0XHRcdFx0J25ldmVyJzogJ05ldmVyJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZGVmYXVsdDogJ2lmLWVtcHR5J1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3NsaWRlcicsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdJbWFnZSBhc3BlY3QgcmF0aW8nLFxuXHRcdFx0XHRcdGtleTogJ2ltYWdlQXNwZWN0UmF0aW8nLFxuXHRcdFx0XHRcdG1pbjogMC4xLFxuXHRcdFx0XHRcdG1heDogMi4wLFxuXHRcdFx0XHRcdHN0ZXA6IDAuMDUsXG5cdFx0XHRcdFx0ZGVmYXVsdDogMC41NSxcblx0XHRcdFx0XHRzaG93V2hlbjoge1xuXHRcdFx0XHRcdFx0a2V5OiAnaW1hZ2VGb3JtYXQnLFxuXHRcdFx0XHRcdFx0dmFsdWU6ICdjb3Zlcidcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9LFxuXHRcdC8vIERhdGUgZ3JvdXBcblx0XHR7XG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdEYXRlJyxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgZGF0ZScsXG5cdFx0XHRcdFx0a2V5OiAnc2hvd0RhdGUnLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAncHJvcGVydHknLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRGF0ZSBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0a2V5OiAnZGF0ZVByb3BlcnR5Jyxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnSW5jbHVkZSB0aW1lJyxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogJ1doZW4gZW5hYmxlZCwgZGlzcGxheXMgYm90aCBkYXRlIGFuZCB0aW1lIHVzaW5nIHlvdXIgc3lzdGVtIGxvY2FsZSBzZXR0aW5ncycsXG5cdFx0XHRcdFx0a2V5OiAnZGF0ZUluY2x1ZGVUaW1lJyxcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fSxcblx0XHQvLyBEcmFmdCBzdGF0dXMgZ3JvdXBcblx0XHR7XG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdEcmFmdCBzdGF0dXMnLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2hvdyBkcmFmdCBzdGF0dXMnLFxuXHRcdFx0XHRcdGtleTogJ3Nob3dEcmFmdFN0YXR1cycsXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdEcmFmdCBzdGF0dXMgcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ2RyYWZ0U3RhdHVzUHJvcGVydHknLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdSZXZlcnNlIGxvZ2ljJyxcblx0XHRcdFx0XHRrZXk6ICdkcmFmdFN0YXR1c1JldmVyc2UnLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0ZpbGVuYW1lIHVuZGVyc2NvcmUgcHJlZml4IGFzIGRyYWZ0IGluZGljYXRvcicsXG5cdFx0XHRcdFx0a2V5OiAnZHJhZnRTdGF0dXNVc2VGaWxlbmFtZVByZWZpeCcsXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2Vcblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0Ly8gVGFncyBncm91cFxuXHRcdHtcblx0XHRcdHR5cGU6ICdncm91cCcsXG5cdFx0XHRkaXNwbGF5TmFtZTogJ1RhZ3MnLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2hvdyB0YWdzJyxcblx0XHRcdFx0XHRrZXk6ICdzaG93VGFncycsXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdUYWdzIHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICd0YWdzUHJvcGVydHknLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3NsaWRlcicsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdNYXhpbXVtIHRhZ3MgdG8gc2hvdycsXG5cdFx0XHRcdFx0a2V5OiAnbWF4VGFnc1RvU2hvdycsXG5cdFx0XHRcdFx0bWluOiAxLFxuXHRcdFx0XHRcdG1heDogNTAsXG5cdFx0XHRcdFx0c3RlcDogMSxcblx0XHRcdFx0XHRkZWZhdWx0OiAzLFxuXHRcdFx0XHRcdHNob3dXaGVuOiB7XG5cdFx0XHRcdFx0XHRrZXk6ICdzaG93VGFncycsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdHJ1ZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0Ly8gUHJvcGVydGllcyBncm91cFxuXHRcdHtcblx0XHRcdHR5cGU6ICdncm91cCcsXG5cdFx0XHRkaXNwbGF5TmFtZTogJ1Byb3BlcnRpZXMnLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdkcm9wZG93bicsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IHByb3BlcnR5IGxhYmVscycsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlMYWJlbHMnLFxuXHRcdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRcdCdoaWRlJzogJ0hpZGUnLFxuXHRcdFx0XHRcdFx0J2lubGluZSc6ICdJbmxpbmUnLFxuXHRcdFx0XHRcdFx0J2Fib3ZlJzogJ09uIHRvcCdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICdoaWRlJ1xuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fSxcblx0XHQvLyBQcm9wZXJ0eSBncm91cCAxXG5cdFx0e1xuXHRcdFx0dHlwZTogJ2dyb3VwJyxcblx0XHRcdGRpc3BsYXlOYW1lOiAnUHJvcGVydHkgZ3JvdXAgMScsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0ZpcnN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eURpc3BsYXkxJyxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTZWNvbmQgcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTInLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IHNpZGUtYnktc2lkZScsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlMYXlvdXQxMlNpZGVCeVNpZGUnLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZHJvcGRvd24nLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnUG9zaXRpb24nLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5R3JvdXAxUG9zaXRpb24nLFxuXHRcdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRcdCd0b3AnOiAnVG9wJyxcblx0XHRcdFx0XHRcdCdib3R0b20nOiAnQm90dG9tJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZGVmYXVsdDogJ2JvdHRvbSdcblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0Ly8gUHJvcGVydHkgZ3JvdXAgMlxuXHRcdHtcblx0XHRcdHR5cGU6ICdncm91cCcsXG5cdFx0XHRkaXNwbGF5TmFtZTogJ1Byb3BlcnR5IGdyb3VwIDInLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdUaGlyZCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5MycsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAncHJvcGVydHknLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRm91cnRoIHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eURpc3BsYXk0Jyxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2hvdyBzaWRlLWJ5LXNpZGUnLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5TGF5b3V0MzRTaWRlQnlTaWRlJyxcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2Ryb3Bkb3duJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Bvc2l0aW9uJyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUdyb3VwMlBvc2l0aW9uJyxcblx0XHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0XHQndG9wJzogJ1RvcCcsXG5cdFx0XHRcdFx0XHQnYm90dG9tJzogJ0JvdHRvbSdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICdib3R0b20nXG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9LFxuXHRcdC8vIFByb3BlcnR5IGdyb3VwIDNcblx0XHR7XG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxuXHRcdFx0ZGlzcGxheU5hbWU6ICdQcm9wZXJ0eSBncm91cCAzJyxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAncHJvcGVydHknLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRmlyc3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTUnLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1NlY29uZCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5NicsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgc2lkZS1ieS1zaWRlJyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUxheW91dDU2U2lkZUJ5U2lkZScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdkcm9wZG93bicsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdQb3NpdGlvbicsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlHcm91cDNQb3NpdGlvbicsXG5cdFx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdFx0J3RvcCc6ICdUb3AnLFxuXHRcdFx0XHRcdFx0J2JvdHRvbSc6ICdCb3R0b20nXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRkZWZhdWx0OiAnYm90dG9tJ1xuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fSxcblx0XHQvLyBQcm9wZXJ0eSBncm91cCA0XG5cdFx0e1xuXHRcdFx0dHlwZTogJ2dyb3VwJyxcblx0XHRcdGRpc3BsYXlOYW1lOiAnUHJvcGVydHkgZ3JvdXAgNCcsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0ZpcnN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eURpc3BsYXk3Jyxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTZWNvbmQgcHJvcGVydHknLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTgnLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IHNpZGUtYnktc2lkZScsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlMYXlvdXQ3OFNpZGVCeVNpZGUnLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZHJvcGRvd24nLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnUG9zaXRpb24nLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5R3JvdXA0UG9zaXRpb24nLFxuXHRcdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRcdCd0b3AnOiAnVG9wJyxcblx0XHRcdFx0XHRcdCdib3R0b20nOiAnQm90dG9tJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZGVmYXVsdDogJ2JvdHRvbSdcblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0Ly8gUHJvcGVydHkgZ3JvdXAgNVxuXHRcdHtcblx0XHRcdHR5cGU6ICdncm91cCcsXG5cdFx0XHRkaXNwbGF5TmFtZTogJ1Byb3BlcnR5IGdyb3VwIDUnLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdGaXJzdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5OScsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAncHJvcGVydHknLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2Vjb25kIHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eURpc3BsYXkxMCcsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgc2lkZS1ieS1zaWRlJyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUxheW91dDkxMFNpZGVCeVNpZGUnLFxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZHJvcGRvd24nLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnUG9zaXRpb24nLFxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5R3JvdXA1UG9zaXRpb24nLFxuXHRcdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRcdCd0b3AnOiAnVG9wJyxcblx0XHRcdFx0XHRcdCdib3R0b20nOiAnQm90dG9tJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZGVmYXVsdDogJ2JvdHRvbSdcblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0Ly8gUHJvcGVydHkgZ3JvdXAgNlxuXHRcdHtcblx0XHRcdHR5cGU6ICdncm91cCcsXG5cdFx0XHRkaXNwbGF5TmFtZTogJ1Byb3BlcnR5IGdyb3VwIDYnLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdGaXJzdCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5MTEnLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1NlY29uZCBwcm9wZXJ0eScsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5MTInLFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IHNpZGUtYnktc2lkZScsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlMYXlvdXQxMTEyU2lkZUJ5U2lkZScsXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdkcm9wZG93bicsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdQb3NpdGlvbicsXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlHcm91cDZQb3NpdGlvbicsXG5cdFx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdFx0J3RvcCc6ICdUb3AnLFxuXHRcdFx0XHRcdFx0J2JvdHRvbSc6ICdCb3R0b20nXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRkZWZhdWx0OiAnYm90dG9tJ1xuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fSxcblx0XHQvLyBQcm9wZXJ0eSBncm91cCA3XG5cdFx0e1xuXHRcdFx0dHlwZTogJ2dyb3VwJyxcblx0XHRcdGRpc3BsYXlOYW1lOiAnUHJvcGVydHkgZ3JvdXAgNycsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5Jyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0ZpcnN0IHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eURpc3BsYXkxMycsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAncHJvcGVydHknLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2Vjb25kIHByb3BlcnR5Jyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eURpc3BsYXkxNCcsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgc2lkZS1ieS1zaWRlJyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUxheW91dDEzMTRTaWRlQnlTaWRlJyxcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2Ryb3Bkb3duJyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Bvc2l0aW9uJyxcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUdyb3VwN1Bvc2l0aW9uJyxcblx0XHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0XHQndG9wJzogJ1RvcCcsXG5cdFx0XHRcdFx0XHQnYm90dG9tJzogJ0JvdHRvbSdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRlZmF1bHQ6ICdib3R0b20nXG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9LFxuXHRcdC8vIEJlaGF2aW9yIGdyb3VwXG5cdFx0e1xuXHRcdFx0dHlwZTogJ2dyb3VwJyxcblx0XHRcdGRpc3BsYXlOYW1lOiAnQmVoYXZpb3InLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnT3BlbiBuZXcgbm90ZXMgZGlyZWN0bHknLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiAnU2tpcCB0aGUgQmFzZXMgbW9kYWwgYW5kIGNyZWF0ZSBub3RlcyBkaXJlY3RseSAobGlrZSB0aGUgZmlsZSBleHBsb3JlcikuIFdoZW4gZGlzYWJsZWQsIHVzZXMgbm9ybWFsIEJhc2VzIGJlaGF2aW9yIHdpdGggdGhlIHByb3BlcnR5IHBvcHVwLicsXG5cdFx0XHRcdFx0a2V5OiAnY3VzdG9taXplTmV3QnV0dG9uJyxcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ3RleHQnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnTG9jYXRpb24gZm9yIG5ldyBub3RlcycsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246ICdGb2xkZXIgcGF0aCB3aGVyZSBuZXcgbm90ZXMgd2lsbCBiZSBjcmVhdGVkLiBVc2UgLyBmb3IgdmF1bHQgcm9vdCwgb3Igc3BlY2lmeSBhIGZvbGRlciBwYXRoLiBXb3JrcyBpbmRlcGVuZGVudGx5IG9mIFwiT3BlbiBuZXcgbm90ZXMgZGlyZWN0bHlcIi4nLFxuXHRcdFx0XHRcdGtleTogJ25ld05vdGVMb2NhdGlvbicsXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTaW1wbHkgdXNlIC8gZm9yIHZhdWx0IGZvbGRlcicsXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnSGlkZSBxdWljayBlZGl0IGljb24nLFxuXHRcdFx0XHRcdGtleTogJ2hpZGVRdWlja0VkaXRJY29uJyxcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fVxuXHRdO1xufVxuXG4iLCAiLyoqXHJcbiAqIEF0dGFjaG1lbnQgZGV0ZWN0aW9uIHV0aWxpdGllc1xyXG4gKiBEZXRlY3RzIHVuaXF1ZSBhdHRhY2htZW50cyB0aGF0IGFyZSBvbmx5IHVzZWQgYnkgc3BlY2lmaWMgZmlsZXMvZm9sZGVyc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IGdldEZpbGVGcm9udG1hdHRlciB9IGZyb20gJy4vZnJvbnRtYXR0ZXItaGVscGVyJztcclxuXHJcbi8qKlxyXG4gKiBGaW5kIGFsbCBhdHRhY2htZW50cyBpbiBhIG5vdGVcclxuICogSW5jbHVkZXMgYm90aCBlbWJlZGRlZCBpbWFnZXMgaW4gbWFya2Rvd24gYW5kIGltYWdlcyByZWZlcmVuY2VkIGluIGZyb250bWF0dGVyIHByb3BlcnRpZXNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdHRhY2htZW50c0luTm90ZShhcHA6IEFwcCwgZmlsZTogVEZpbGUpOiBQcm9taXNlPFRGaWxlW10+IHtcclxuXHRjb25zdCBhdHRhY2htZW50czogVEZpbGVbXSA9IFtdO1xyXG5cdGNvbnN0IGNvbnRlbnQgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGUucGF0aCk7XHJcblx0XHJcblx0aWYgKGNvbnRlbnQgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0Ly8gR2V0IGVtYmVkZGVkIGltYWdlcyBmcm9tIG1hcmtkb3duIGJvZHkgKG9ubHkgd29ya3MgZm9yIC5tZCBmaWxlcylcclxuXHRcdGlmIChmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xyXG5cdFx0XHRjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShjb250ZW50KTtcclxuXHRcdFx0Y29uc3QgZW1iZWRzID0gbWV0YWRhdGE/LmVtYmVkcyB8fCBbXTtcclxuXHRcdFx0Zm9yIChjb25zdCBlbWJlZCBvZiBlbWJlZHMpIHtcclxuXHRcdFx0XHRjb25zdCBlbWJlZEZpbGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChlbWJlZC5saW5rLCBmaWxlLnBhdGgpO1xyXG5cdFx0XHRcdGlmIChlbWJlZEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdFx0YXR0YWNobWVudHMucHVzaChlbWJlZEZpbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBHZXQgaW1hZ2VzIGZyb20gZnJvbnRtYXR0ZXIgcHJvcGVydGllcyAod29ya3MgZm9yIGJvdGggLm1kIGFuZCAubWR4KVxyXG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBhd2FpdCBnZXRGaWxlRnJvbnRtYXR0ZXIoYXBwLCBmaWxlKTtcclxuXHRcdGlmIChmcm9udG1hdHRlcikge1xyXG5cdFx0XHRjb25zdCBpbWFnZVByb3BlcnR5TmFtZXMgPSBbJ2ltYWdlJywgJ2ltYWdlT0cnLCAnY292ZXInLCAndGh1bWJuYWlsJ107XHJcblx0XHRcdGNvbnN0IHZhbGlkSW1hZ2VFeHRlbnNpb25zID0gWydhdmlmJywgJ2JtcCcsICdnaWYnLCAnanBlZycsICdqcGcnLCAncG5nJywgJ3N2ZycsICd3ZWJwJ107XHJcblx0XHRcdFxyXG5cdFx0XHRmb3IgKGNvbnN0IHByb3BOYW1lIG9mIGltYWdlUHJvcGVydHlOYW1lcykge1xyXG5cdFx0XHRcdGNvbnN0IHByb3BWYWx1ZSA9IGZyb250bWF0dGVyW3Byb3BOYW1lXTtcclxuXHRcdFx0XHRpZiAoIXByb3BWYWx1ZSkgY29udGludWU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSGFuZGxlIGFycmF5IG9mIGltYWdlIHBhdGhzXHJcblx0XHRcdFx0Y29uc3QgaW1hZ2VQYXRocyA9IEFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSA/IHByb3BWYWx1ZSA6IFtwcm9wVmFsdWVdO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGZvciAoY29uc3QgaW1hZ2VQYXRoIG9mIGltYWdlUGF0aHMpIHtcclxuXHRcdFx0XHRcdGlmICh0eXBlb2YgaW1hZ2VQYXRoICE9PSAnc3RyaW5nJykgY29udGludWU7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFN0cmlwIHdpa2lsaW5rIHN5bnRheCBpZiBwcmVzZW50XHJcblx0XHRcdFx0XHRjb25zdCBjbGVhblBhdGggPSBpbWFnZVBhdGgucmVwbGFjZSgvXiE/XFxbXFxbKFteXFxdXSspXFxdXFxdJC8sICckMScpLnRyaW0oKTtcclxuXHRcdFx0XHRcdGlmICghY2xlYW5QYXRoKSBjb250aW51ZTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gU2tpcCBleHRlcm5hbCBVUkxzXHJcblx0XHRcdFx0XHRpZiAoY2xlYW5QYXRoLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSB8fCBjbGVhblBhdGguc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSkge1xyXG5cdFx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gVHJ5IHRvIHJlc29sdmUgdGhlIGltYWdlIGZpbGVcclxuXHRcdFx0XHRcdGxldCBpbWFnZUZpbGU6IFRGaWxlIHwgbnVsbCA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGNsZWFuUGF0aCwgZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gSWYgbm90IGZvdW5kIGFuZCBwYXRoIHN0YXJ0cyB3aXRoIC4vLCB0cnkgcmVzb2x2aW5nIHJlbGF0aXZlIHRvIGZpbGUncyBkaXJlY3RvcnlcclxuXHRcdFx0XHRcdGlmICghaW1hZ2VGaWxlICYmIGNsZWFuUGF0aC5zdGFydHNXaXRoKCcuLycpKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHJlbGF0aXZlUGF0aCA9IGNsZWFuUGF0aC5zdWJzdHJpbmcoMik7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGZ1bGxQYXRoID0gZmlsZS5wYXJlbnQ/LnBhdGggXHJcblx0XHRcdFx0XHRcdFx0PyBgJHtmaWxlLnBhcmVudC5wYXRofS8ke3JlbGF0aXZlUGF0aH1gXHJcblx0XHRcdFx0XHRcdFx0OiByZWxhdGl2ZVBhdGg7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHJlc29sdmVkRmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbFBhdGgpO1xyXG5cdFx0XHRcdFx0XHRpZiAocmVzb2x2ZWRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRcdFx0XHRpbWFnZUZpbGUgPSByZXNvbHZlZEZpbGU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gSWYgc3RpbGwgbm90IGZvdW5kLCB0cnkgYXMgYWJzb2x1dGUgcGF0aFxyXG5cdFx0XHRcdFx0aWYgKCFpbWFnZUZpbGUpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgYWJzb2x1dGVGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjbGVhblBhdGgpO1xyXG5cdFx0XHRcdFx0XHRpZiAoYWJzb2x1dGVGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRcdFx0XHRpbWFnZUZpbGUgPSBhYnNvbHV0ZUZpbGU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gT25seSBhZGQgaWYgaXQncyBhIHZhbGlkIGltYWdlIGZpbGVcclxuXHRcdFx0XHRcdGlmIChpbWFnZUZpbGUgJiYgdmFsaWRJbWFnZUV4dGVuc2lvbnMuaW5jbHVkZXMoaW1hZ2VGaWxlLmV4dGVuc2lvbikpIHtcclxuXHRcdFx0XHRcdFx0YXR0YWNobWVudHMucHVzaChpbWFnZUZpbGUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gYXR0YWNobWVudHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGaW5kIGFsbCBhdHRhY2htZW50cyBpbiBhIGZvbGRlclxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF0dGFjaG1lbnRzSW5Gb2xkZXIoYXBwOiBBcHAsIGZvbGRlcjogVEZvbGRlcik6IFByb21pc2U8VEZpbGVbXT4ge1xyXG5cdGNvbnN0IGF0dGFjaG1lbnRzOiBURmlsZVtdID0gW107XHJcblx0XHJcblx0Zm9yIChjb25zdCBjaGlsZCBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcclxuXHRcdGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGaWxlICYmIChjaGlsZC5leHRlbnNpb24gPT09ICdtZCcgfHwgY2hpbGQuZXh0ZW5zaW9uID09PSAnbWR4JykpIHtcclxuXHRcdFx0YXR0YWNobWVudHMucHVzaCguLi5hd2FpdCBnZXRBdHRhY2htZW50c0luTm90ZShhcHAsIGNoaWxkKSk7XHJcblx0XHR9IGVsc2UgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRhdHRhY2htZW50cy5wdXNoKC4uLmF3YWl0IGdldEF0dGFjaG1lbnRzSW5Gb2xkZXIoYXBwLCBjaGlsZCkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gYXR0YWNobWVudHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhbiBhdHRhY2htZW50IGlzIHVzZWQgaW4gb3RoZXIgbm90ZXNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc0F0dGFjaG1lbnRVc2VkSW5PdGhlck5vdGVzKFxyXG5cdGFwcDogQXBwLFxyXG5cdGF0dGFjaG1lbnQ6IFRGaWxlLFxyXG5cdGV4Y2x1ZGVkTm90ZTogVEZpbGUsXHJcblx0ZXhjbHVkZWRGb2xkZXI/OiBURm9sZGVyXHJcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdGNvbnN0IGFsbE5vdGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoXHJcblx0XHRmaWxlID0+IGZpbGUucGF0aCAhPT0gZXhjbHVkZWROb3RlLnBhdGhcclxuXHQpO1xyXG5cdFxyXG5cdGNvbnN0IGF0dGFjaG1lbnRQYXRoID0gYXR0YWNobWVudC5wYXRoO1xyXG5cdGNvbnN0IGF0dGFjaG1lbnROYW1lID0gYXR0YWNobWVudC5uYW1lO1xyXG5cdGNvbnN0IGF0dGFjaG1lbnRCYXNlbmFtZSA9IGF0dGFjaG1lbnQuYmFzZW5hbWU7XHJcblx0XHJcblx0Zm9yIChjb25zdCBub3RlIG9mIGFsbE5vdGVzKSB7XHJcblx0XHQvLyBTa2lwIG5vdGVzIGluIGV4Y2x1ZGVkIGZvbGRlclxyXG5cdFx0aWYgKGV4Y2x1ZGVkRm9sZGVyICYmIG5vdGUucGF0aC5zdGFydHNXaXRoKGV4Y2x1ZGVkRm9sZGVyLnBhdGggKyAnLycpKSB7XHJcblx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQobm90ZSk7XHJcblx0XHRcclxuXHRcdC8vIENoZWNrIGZvciB2YXJpb3VzIHJlZmVyZW5jZSBwYXR0ZXJuc1xyXG5cdFx0aWYgKFxyXG5cdFx0XHRjb250ZW50LmluY2x1ZGVzKGF0dGFjaG1lbnRQYXRoKSB8fFxyXG5cdFx0XHRjb250ZW50LmluY2x1ZGVzKGF0dGFjaG1lbnROYW1lKSB8fFxyXG5cdFx0XHRjb250ZW50LmluY2x1ZGVzKGF0dGFjaG1lbnRCYXNlbmFtZSkgfHxcclxuXHRcdFx0Y29udGVudC5pbmNsdWRlcyhgIVtbJHthdHRhY2htZW50TmFtZX1dXWApIHx8XHJcblx0XHRcdGNvbnRlbnQuaW5jbHVkZXMoYFtbJHthdHRhY2htZW50TmFtZX1dXWApIHx8XHJcblx0XHRcdGNvbnRlbnQuaW5jbHVkZXMoYCgke2F0dGFjaG1lbnROYW1lfSlgKSB8fFxyXG5cdFx0XHRjb250ZW50LmluY2x1ZGVzKGAoJHthdHRhY2htZW50UGF0aH0pYClcclxuXHRcdCkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTsgLy8gQXR0YWNobWVudCBpcyB1c2VkIGVsc2V3aGVyZVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gZmFsc2U7IC8vIEF0dGFjaG1lbnQgaXMgdW5pcXVlIHRvIGRlbGV0ZWQgbm90ZS9mb2xkZXJcclxufVxyXG5cclxuLyoqXHJcbiAqIEZpbmQgdW5pcXVlIGF0dGFjaG1lbnRzIGZvciBhIG5vdGUvZm9sZGVyXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmluZFVuaXF1ZUF0dGFjaG1lbnRzKFxyXG5cdGFwcDogQXBwLFxyXG5cdGRlbGV0ZWROb3RlOiBURmlsZSxcclxuXHRkZWxldGVkRm9sZGVyPzogVEZvbGRlclxyXG4pOiBQcm9taXNlPFRGaWxlW10+IHtcclxuXHQvLyBHZXQgYWxsIGF0dGFjaG1lbnRzIGluIGRlbGV0ZWQgbm90ZS9mb2xkZXJcclxuXHRjb25zdCBhdHRhY2htZW50czogVEZpbGVbXSA9IFtdO1xyXG5cdFxyXG5cdGF0dGFjaG1lbnRzLnB1c2goLi4uYXdhaXQgZ2V0QXR0YWNobWVudHNJbk5vdGUoYXBwLCBkZWxldGVkTm90ZSkpO1xyXG5cdFxyXG5cdGlmIChkZWxldGVkRm9sZGVyKSB7XHJcblx0XHRhdHRhY2htZW50cy5wdXNoKC4uLmF3YWl0IGdldEF0dGFjaG1lbnRzSW5Gb2xkZXIoYXBwLCBkZWxldGVkRm9sZGVyKSk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIFJlbW92ZSBkdXBsaWNhdGVzXHJcblx0Y29uc3QgdW5pcXVlQXR0YWNobWVudHMgPSBBcnJheS5mcm9tKG5ldyBTZXQoYXR0YWNobWVudHMubWFwKGEgPT4gYS5wYXRoKSkpXHJcblx0XHQubWFwKHBhdGggPT4gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKSlcclxuXHRcdC5maWx0ZXIoKGZpbGUpOiBmaWxlIGlzIFRGaWxlID0+IGZpbGUgaW5zdGFuY2VvZiBURmlsZSk7XHJcblx0XHJcblx0Ly8gQ2hlY2sgZWFjaCBhdHRhY2htZW50IGFnYWluc3QgYWxsIG90aGVyIG5vdGVzXHJcblx0Y29uc3QgcmVzdWx0OiBURmlsZVtdID0gW107XHJcblx0XHJcblx0Zm9yIChjb25zdCBhdHRhY2htZW50IG9mIHVuaXF1ZUF0dGFjaG1lbnRzKSB7XHJcblx0XHRjb25zdCBpc1VzZWRFbHNld2hlcmUgPSBhd2FpdCBpc0F0dGFjaG1lbnRVc2VkSW5PdGhlck5vdGVzKFxyXG5cdFx0XHRhcHAsXHJcblx0XHRcdGF0dGFjaG1lbnQsXHJcblx0XHRcdGRlbGV0ZWROb3RlLFxyXG5cdFx0XHRkZWxldGVkRm9sZGVyXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0XHRpZiAoIWlzVXNlZEVsc2V3aGVyZSkge1xyXG5cdFx0XHRyZXN1bHQucHVzaChhdHRhY2htZW50KTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuXHJcbiIsICIvKipcclxuICogU21hcnQgZGVsZXRpb24gdXRpbGl0aWVzXHJcbiAqIEhhbmRsZXMgZm9sZGVyLWJhc2VkIGNvbnRlbnQgZGVsZXRpb24gYW5kIHVuaXF1ZSBhdHRhY2htZW50IGRldGVjdGlvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQmFzZXNDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgZmluZFVuaXF1ZUF0dGFjaG1lbnRzIH0gZnJvbSAnLi9hdHRhY2htZW50LWRldGVjdGlvbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERlbGV0aW9uUHJldmlldyB7XHJcblx0ZmlsZXNUb0RlbGV0ZTogVEZpbGVbXTtcclxuXHRmb2xkZXJzVG9EZWxldGU6IFRGb2xkZXJbXTtcclxuXHRhdHRhY2htZW50c1RvRGVsZXRlOiBURmlsZVtdO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGZvbGRlci1iYXNlZCBjb250ZW50XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNGb2xkZXJCYXNlZENvbnRlbnQoZmlsZTogVEZpbGUsIGNvbmZpZzogQmFzZXNDTVNTZXR0aW5ncyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IGNvbmZpZ3VyZWRGaWxlbmFtZSA9IGNvbmZpZy5kZWxldGVQYXJlbnRGb2xkZXJGaWxlbmFtZSB8fCAnaW5kZXgnO1xyXG5cdHJldHVybiBmaWxlLmJhc2VuYW1lID09PSBjb25maWd1cmVkRmlsZW5hbWUgJiYgZmlsZS5wYXJlbnQgIT09IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBzaG91bGQgZGVsZXRlIHBhcmVudCBmb2xkZXJcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG91bGREZWxldGVQYXJlbnRGb2xkZXIoZmlsZTogVEZpbGUsIGNvbmZpZzogQmFzZXNDTVNTZXR0aW5ncyk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiBjb25maWcuZGVsZXRlUGFyZW50Rm9sZGVyICYmIGlzRm9sZGVyQmFzZWRDb250ZW50KGZpbGUsIGNvbmZpZyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcmVwYXJlIGRlbGV0aW9uIHByZXZpZXdcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcmVwYXJlRGVsZXRpb25QcmV2aWV3KFxyXG5cdGFwcDogQXBwLFxyXG5cdGZpbGVzOiBzdHJpbmdbXSxcclxuXHRjb25maWc6IEJhc2VzQ01TU2V0dGluZ3NcclxuKTogUHJvbWlzZTxEZWxldGlvblByZXZpZXc+IHtcclxuXHRjb25zdCBmaWxlc1RvRGVsZXRlOiBURmlsZVtdID0gW107XHJcblx0Y29uc3QgZm9sZGVyc1RvRGVsZXRlOiBURm9sZGVyW10gPSBbXTtcclxuXHRjb25zdCBhdHRhY2htZW50c1RvRGVsZXRlOiBURmlsZVtdID0gW107XHJcblx0XHJcblx0Zm9yIChjb25zdCBmaWxlUGF0aCBvZiBmaWxlcykge1xyXG5cdFx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG5cdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgY29udGludWU7XHJcblx0XHRcclxuXHRcdC8vIENoZWNrIGlmIHNob3VsZCBkZWxldGUgcGFyZW50IGZvbGRlclxyXG5cdFx0aWYgKHNob3VsZERlbGV0ZVBhcmVudEZvbGRlcihmaWxlLCBjb25maWcpKSB7XHJcblx0XHRcdGNvbnN0IHBhcmVudEZvbGRlciA9IGZpbGUucGFyZW50O1xyXG5cdFx0XHRpZiAocGFyZW50Rm9sZGVyICYmICFmb2xkZXJzVG9EZWxldGUuaW5jbHVkZXMocGFyZW50Rm9sZGVyKSkge1xyXG5cdFx0XHRcdGZvbGRlcnNUb0RlbGV0ZS5wdXNoKHBhcmVudEZvbGRlcik7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gR2V0IGFsbCBmaWxlcyBpbiBmb2xkZXIgZm9yIGRlbGV0aW9uXHJcblx0XHRcdFx0Y29uc3QgZm9sZGVyRmlsZXMgPSBwYXJlbnRGb2xkZXIuY2hpbGRyZW4uZmlsdGVyKFxyXG5cdFx0XHRcdFx0KGNoaWxkKTogY2hpbGQgaXMgVEZpbGUgPT4gY2hpbGQgaW5zdGFuY2VvZiBURmlsZVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0ZmlsZXNUb0RlbGV0ZS5wdXNoKC4uLmZvbGRlckZpbGVzKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZmlsZXNUb0RlbGV0ZS5wdXNoKGZpbGUpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBGaW5kIHVuaXF1ZSBhdHRhY2htZW50cyBpZiBzZXR0aW5nIGVuYWJsZWRcclxuXHRcdGlmIChjb25maWcuZGVsZXRlVW5pcXVlQXR0YWNobWVudHMpIHtcclxuXHRcdFx0Y29uc3QgcGFyZW50Rm9sZGVyID0gc2hvdWxkRGVsZXRlUGFyZW50Rm9sZGVyKGZpbGUsIGNvbmZpZykgXHJcblx0XHRcdFx0PyAoZmlsZS5wYXJlbnQgfHwgdW5kZWZpbmVkKVxyXG5cdFx0XHRcdDogdW5kZWZpbmVkO1xyXG5cdFx0XHRjb25zdCB1bmlxdWVBdHRhY2htZW50cyA9IGF3YWl0IGZpbmRVbmlxdWVBdHRhY2htZW50cyhcclxuXHRcdFx0XHRhcHAsXHJcblx0XHRcdFx0ZmlsZSxcclxuXHRcdFx0XHRwYXJlbnRGb2xkZXJcclxuXHRcdFx0KTtcclxuXHRcdFx0YXR0YWNobWVudHNUb0RlbGV0ZS5wdXNoKC4uLnVuaXF1ZUF0dGFjaG1lbnRzKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gUmVtb3ZlIGR1cGxpY2F0ZXNcclxuXHRjb25zdCB1bmlxdWVGaWxlcyA9IEFycmF5LmZyb20obmV3IFNldChmaWxlc1RvRGVsZXRlLm1hcChmID0+IGYucGF0aCkpKVxyXG5cdFx0Lm1hcChwYXRoID0+IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCkpXHJcblx0XHQuZmlsdGVyKChmaWxlKTogZmlsZSBpcyBURmlsZSA9PiBmaWxlIGluc3RhbmNlb2YgVEZpbGUpO1xyXG5cdFxyXG5cdGNvbnN0IHVuaXF1ZUF0dGFjaG1lbnRzID0gQXJyYXkuZnJvbShuZXcgU2V0KGF0dGFjaG1lbnRzVG9EZWxldGUubWFwKGEgPT4gYS5wYXRoKSkpXHJcblx0XHQubWFwKHBhdGggPT4gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKSlcclxuXHRcdC5maWx0ZXIoKGZpbGUpOiBmaWxlIGlzIFRGaWxlID0+IGZpbGUgaW5zdGFuY2VvZiBURmlsZSk7XHJcblx0XHJcblx0cmV0dXJuIHtcclxuXHRcdGZpbGVzVG9EZWxldGU6IHVuaXF1ZUZpbGVzLFxyXG5cdFx0Zm9sZGVyc1RvRGVsZXRlOiBBcnJheS5mcm9tKG5ldyBTZXQoZm9sZGVyc1RvRGVsZXRlKSksXHJcblx0XHRhdHRhY2htZW50c1RvRGVsZXRlOiB1bmlxdWVBdHRhY2htZW50cyxcclxuXHR9O1xyXG59XHJcblxyXG4vKipcclxuICogRXhlY3V0ZSBzbWFydCBkZWxldGlvblxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVTbWFydERlbGV0aW9uKFxyXG5cdGFwcDogQXBwLFxyXG5cdHByZXZpZXc6IERlbGV0aW9uUHJldmlld1xyXG4pOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRsZXQgZGVsZXRlZENvdW50ID0gMDtcclxuXHRsZXQgZXJyb3JDb3VudCA9IDA7XHJcblx0XHJcblx0Ly8gRGVsZXRlIGZpbGVzXHJcblx0Zm9yIChjb25zdCBmaWxlIG9mIHByZXZpZXcuZmlsZXNUb0RlbGV0ZSkge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0YXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnRyYXNoRmlsZShmaWxlKTtcclxuXHRcdFx0ZGVsZXRlZENvdW50Kys7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGBFcnJvciBkZWxldGluZyBmaWxlICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XHJcblx0XHRcdGVycm9yQ291bnQrKztcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gRGVsZXRlIGF0dGFjaG1lbnRzXHJcblx0Zm9yIChjb25zdCBhdHRhY2htZW50IG9mIHByZXZpZXcuYXR0YWNobWVudHNUb0RlbGV0ZSkge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0YXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnRyYXNoRmlsZShhdHRhY2htZW50KTtcclxuXHRcdFx0ZGVsZXRlZENvdW50Kys7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGBFcnJvciBkZWxldGluZyBhdHRhY2htZW50ICR7YXR0YWNobWVudC5wYXRofTpgLCBlcnJvcik7XHJcblx0XHRcdGVycm9yQ291bnQrKztcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gRGVsZXRlIGZvbGRlcnMgKHJlY3Vyc2l2ZSlcclxuXHRmb3IgKGNvbnN0IGZvbGRlciBvZiBwcmV2aWV3LmZvbGRlcnNUb0RlbGV0ZSkge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0YXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnRyYXNoRmlsZShmb2xkZXIpO1xyXG5cdFx0XHRkZWxldGVkQ291bnQrKztcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIGRlbGV0aW5nIGZvbGRlciAke2ZvbGRlci5wYXRofTpgLCBlcnJvcik7XHJcblx0XHRcdGVycm9yQ291bnQrKztcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0aWYgKGVycm9yQ291bnQgPiAwKSB7XHJcblx0XHRuZXcgTm90aWNlKGBEZWxldGVkICR7ZGVsZXRlZENvdW50fSBpdGVtcywgJHtlcnJvckNvdW50fSBlcnJvcnMgb2NjdXJyZWRgKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0bmV3IE5vdGljZShgU3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgJHtkZWxldGVkQ291bnR9IGl0ZW0ke2RlbGV0ZWRDb3VudCAhPT0gMSA/ICdzJyA6ICcnfWApO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbiIsICIvKipcclxuICogRGVsZXRpb24gUHJldmlldyBNb2RhbFxyXG4gKiBTaG93cyBwcmV2aWV3IG9mIHdoYXQgd2lsbCBiZSBkZWxldGVkIGJlZm9yZSBjb25maXJtYXRpb25cclxuICovXHJcblxyXG5pbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBEZWxldGlvblByZXZpZXcgfSBmcm9tICcuLi91dGlscy9zbWFydC1kZWxldGlvbic7XHJcbmltcG9ydCB7IGV4ZWN1dGVTbWFydERlbGV0aW9uIH0gZnJvbSAnLi4vdXRpbHMvc21hcnQtZGVsZXRpb24nO1xyXG5cclxuZXhwb3J0IGNsYXNzIERlbGV0aW9uUHJldmlld01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgcHJldmlldzogRGVsZXRpb25QcmV2aWV3O1xyXG5cdHByaXZhdGUgb25Db25maXJtOiAoKSA9PiB2b2lkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcHJldmlldzogRGVsZXRpb25QcmV2aWV3LCBvbkNvbmZpcm06ICgpID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnByZXZpZXcgPSBwcmV2aWV3O1xyXG5cdFx0dGhpcy5vbkNvbmZpcm0gPSBvbkNvbmZpcm07XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZSgnQ29uZmlybSBkZWxldGlvbicpLnNldEhlYWRpbmcoKTtcclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXHJcblx0XHRcdHRleHQ6ICdUaGUgZm9sbG93aW5nIGl0ZW1zIHdpbGwgYmUgZGVsZXRlZDonLFxyXG5cdFx0XHRjbHM6ICdiYXNlcy1jbXMtZGVsZXRpb24td2FybmluZydcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEZpbGVzIHRvIGRlbGV0ZVxyXG5cdFx0aWYgKHRoaXMucHJldmlldy5maWxlc1RvRGVsZXRlLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogYEZpbGVzICgke3RoaXMucHJldmlldy5maWxlc1RvRGVsZXRlLmxlbmd0aH0pYCB9KTtcclxuXHRcdFx0Y29uc3QgZmlsZXNMaXN0ID0gY29udGVudEVsLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnYmFzZXMtY21zLWRlbGV0aW9uLWxpc3QnIH0pO1xyXG5cdFx0XHRmb3IgKGNvbnN0IGZpbGUgb2YgdGhpcy5wcmV2aWV3LmZpbGVzVG9EZWxldGUuc2xpY2UoMCwgMjApKSB7XHJcblx0XHRcdFx0Y29uc3QgbGkgPSBmaWxlc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XHJcblx0XHRcdFx0bGkuc2V0VGV4dChmaWxlLnBhdGgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLnByZXZpZXcuZmlsZXNUb0RlbGV0ZS5sZW5ndGggPiAyMCkge1xyXG5cdFx0XHRcdGZpbGVzTGlzdC5jcmVhdGVFbCgnbGknLCB7IFxyXG5cdFx0XHRcdFx0dGV4dDogYC4uLiBhbmQgJHt0aGlzLnByZXZpZXcuZmlsZXNUb0RlbGV0ZS5sZW5ndGggLSAyMH0gbW9yZSBmaWxlc2BcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZvbGRlcnMgdG8gZGVsZXRlXHJcblx0XHRpZiAodGhpcy5wcmV2aWV3LmZvbGRlcnNUb0RlbGV0ZS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGBGb2xkZXJzICgke3RoaXMucHJldmlldy5mb2xkZXJzVG9EZWxldGUubGVuZ3RofSlgIH0pO1xyXG5cdFx0XHRjb25zdCBmb2xkZXJzTGlzdCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndWwnLCB7IGNsczogJ2Jhc2VzLWNtcy1kZWxldGlvbi1saXN0JyB9KTtcclxuXHRcdFx0Zm9yIChjb25zdCBmb2xkZXIgb2YgdGhpcy5wcmV2aWV3LmZvbGRlcnNUb0RlbGV0ZSkge1xyXG5cdFx0XHRcdGNvbnN0IGxpID0gZm9sZGVyc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XHJcblx0XHRcdFx0bGkuc2V0VGV4dChmb2xkZXIucGF0aCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBBdHRhY2htZW50cyB0byBkZWxldGVcclxuXHRcdGlmICh0aGlzLnByZXZpZXcuYXR0YWNobWVudHNUb0RlbGV0ZS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGBBdHRhY2htZW50cyAoJHt0aGlzLnByZXZpZXcuYXR0YWNobWVudHNUb0RlbGV0ZS5sZW5ndGh9KWAgfSk7XHJcblx0XHRcdGNvbnN0IGF0dGFjaG1lbnRzTGlzdCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndWwnLCB7IGNsczogJ2Jhc2VzLWNtcy1kZWxldGlvbi1saXN0JyB9KTtcclxuXHRcdFx0Zm9yIChjb25zdCBhdHRhY2htZW50IG9mIHRoaXMucHJldmlldy5hdHRhY2htZW50c1RvRGVsZXRlLnNsaWNlKDAsIDIwKSkge1xyXG5cdFx0XHRcdGNvbnN0IGxpID0gYXR0YWNobWVudHNMaXN0LmNyZWF0ZUVsKCdsaScpO1xyXG5cdFx0XHRcdGxpLnNldFRleHQoYXR0YWNobWVudC5wYXRoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAodGhpcy5wcmV2aWV3LmF0dGFjaG1lbnRzVG9EZWxldGUubGVuZ3RoID4gMjApIHtcclxuXHRcdFx0XHRhdHRhY2htZW50c0xpc3QuY3JlYXRlRWwoJ2xpJywgeyBcclxuXHRcdFx0XHRcdHRleHQ6IGAuLi4gYW5kICR7dGhpcy5wcmV2aWV3LmF0dGFjaG1lbnRzVG9EZWxldGUubGVuZ3RoIC0gMjB9IG1vcmUgYXR0YWNobWVudHNgXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBXYXJuaW5nXHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XHJcblx0XHRcdHRleHQ6ICdUaGlzIGFjdGlvbiBjYW5ub3QgYmUgdW5kb25lLicsXHJcblx0XHRcdGNsczogJ2Jhc2VzLWNtcy1kZWxldGlvbi13YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQnV0dG9uc1xyXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xyXG5cdFx0YnV0dG9uQ29udGFpbmVyLmFkZENsYXNzKCdiYXNlcy1jbXMtbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicpO1xyXG5cclxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRjYW5jZWxCdG4uc2V0VGV4dCgnQ2FuY2VsJyk7XHJcblx0XHRjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG5cclxuXHRcdGNvbnN0IGRlbGV0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRkZWxldGVCdG4uc2V0VGV4dCgnRGVsZXRlJyk7XHJcblx0XHRkZWxldGVCdG4uYWRkQ2xhc3MoJ21vZC1jdGEnKTtcclxuXHRcdGRlbGV0ZUJ0bi5hZGRDbGFzcygnZGVzdHJ1Y3RpdmUnKTtcclxuXHRcdGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGF3YWl0IGV4ZWN1dGVTbWFydERlbGV0aW9uKHRoaXMuYXBwLCB0aGlzLnByZXZpZXcpO1xyXG5cdFx0XHRcdHRoaXMub25Db25maXJtKCk7XHJcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHR9KSgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG4iLCAiaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBCYXNlc0NNU1NldHRpbmdUYWIgfSBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IHsgQmFzZXNDTVNWaWV3IH0gZnJvbSAnLi92aWV3cy9jbXMtdmlldyc7XHJcbmltcG9ydCB7IEJhc2VzQ01TU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3R5cGVzJztcclxuaW1wb3J0IHsgcmVnaXN0ZXJCYXNlc0NNU1ZpZXcgfSBmcm9tICcuL3V0aWxzL3ZpZXctcmVnaXN0cmF0aW9uJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VzQ01TUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5ncyE6IEJhc2VzQ01TU2V0dGluZ3M7XHJcblx0YWN0aXZlVmlld3M6IFNldDxCYXNlc0NNU1ZpZXc+ID0gbmV3IFNldCgpO1xyXG5cdHJlZ2lzdHJhdGlvblRpbWVvdXQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdC8vIFJlZ2lzdGVyIHNldHRpbmdzIHRhYlxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBCYXNlc0NNU1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcblx0XHQvLyBSZWdpc3RlciBDTVMgdmlldyB3aXRoIEJhc2UgcGx1Z2luXHJcblx0XHQvLyBHcmFjZWZ1bCBkZWdyYWRhdGlvbjogaWYgQmFzZSBwbHVnaW4gbm90IGluc3RhbGxlZCwgdGhpcyB3aWxsIHNpbXBseSBkbyBub3RoaW5nXHJcblx0XHQvLyBPbiBtb2JpbGUsIEJhc2VzIHBsdWdpbiBtYXkgbm90IGJlIGxvYWRlZCB5ZXQsIHNvIHdlIHdhaXQgYSBiaXRcclxuXHRcdHJlZ2lzdGVyQmFzZXNDTVNWaWV3KHRoaXMpO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHQvLyBDbGVhciBhbnkgcGVuZGluZyByZWdpc3RyYXRpb24gdGltZW91dFxyXG5cdFx0aWYgKHRoaXMucmVnaXN0cmF0aW9uVGltZW91dCAhPT0gbnVsbCkge1xyXG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uVGltZW91dCk7XHJcblx0XHRcdHRoaXMucmVnaXN0cmF0aW9uVGltZW91dCA9IG51bGw7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIENsZWFuIHVwIGFjdGl2ZSB2aWV3c1xyXG5cdFx0dGhpcy5hY3RpdmVWaWV3cy5jbGVhcigpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKSBhcyBQYXJ0aWFsPEJhc2VzQ01TU2V0dGluZ3M+O1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZnJlc2ggdG9vbGJhcnMgaW4gYWxsIGFjdGl2ZSBDTVMgdmlld3NcclxuXHQgKi9cclxuXHRyZWZyZXNoQWxsVG9vbGJhcnMoKTogdm9pZCB7XHJcblx0XHQvLyBDbGVhbiB1cCBhbnkgdmlld3MgdGhhdCBhcmUgbm8gbG9uZ2VyIGFjdGl2ZVxyXG5cdFx0Y29uc3Qgdmlld3NUb1JlbW92ZTogQmFzZXNDTVNWaWV3W10gPSBbXTtcclxuXHRcdHRoaXMuYWN0aXZlVmlld3MuZm9yRWFjaCh2aWV3ID0+IHtcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdmlldyBpcyBzdGlsbCBpbiBET01cclxuXHRcdFx0Y29uc3QgY29udGFpbmVyRWwgPSAodmlldyBhcyB1bmtub3duIGFzIHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9KS5jb250YWluZXJFbDtcclxuXHRcdFx0aWYgKCFjb250YWluZXJFbCB8fCAhY29udGFpbmVyRWwucGFyZW50RWxlbWVudCkge1xyXG5cdFx0XHRcdHZpZXdzVG9SZW1vdmUucHVzaCh2aWV3KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIFJlbW92ZSBpbmFjdGl2ZSB2aWV3c1xyXG5cdFx0dmlld3NUb1JlbW92ZS5mb3JFYWNoKHZpZXcgPT4gdGhpcy5hY3RpdmVWaWV3cy5kZWxldGUodmlldykpO1xyXG5cdFx0XHJcblx0XHQvLyBSZWZyZXNoIGFsbCBhY3RpdmUgdmlld3NcclxuXHRcdHRoaXMuYWN0aXZlVmlld3MuZm9yRWFjaCh2aWV3ID0+IHtcclxuXHRcdFx0aWYgKHZpZXcgJiYgdHlwZW9mIHZpZXcucmVmcmVzaFRvb2xiYXIgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHR2aWV3LnJlZnJlc2hUb29sYmFyKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVtb3ZlIGEgdmlldyBmcm9tIHRyYWNraW5nIHdoZW4gaXQncyBjbG9zZWRcclxuXHQgKi9cclxuXHRyZW1vdmVWaWV3KHZpZXc6IEJhc2VzQ01TVmlldyk6IHZvaWQge1xyXG5cdFx0dGhpcy5hY3RpdmVWaWV3cy5kZWxldGUodmlldyk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuXHJcbiIsICJpbXBvcnQgeyBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBBcHAsIFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQmFzZXNDTVNTZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xyXG5pbXBvcnQgeyBDb21tYW5kUGlja2VyTW9kYWwgfSBmcm9tICcuL2NvbXBvbmVudHMvY29tbWFuZC1waWNrZXItbW9kYWwnO1xyXG5pbXBvcnQgeyBJY29uUGlja2VyTW9kYWwgfSBmcm9tICcuL2NvbXBvbmVudHMvaWNvbi1waWNrZXItbW9kYWwnO1xyXG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwIH0gZnJvbSAnLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJhc2VzQ01TU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogUGx1Z2luICYgeyBzZXR0aW5nczogQmFzZXNDTVNTZXR0aW5ncyB9O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBQbHVnaW4gJiB7IHNldHRpbmdzOiBCYXNlc0NNU1NldHRpbmdzIH0pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVmcmVzaCB0b29sYmFycyBpbiBhbGwgYWN0aXZlIENNUyB2aWV3cyB3aGVuIHNldHRpbmdzIGNoYW5nZVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgcmVmcmVzaEFjdGl2ZVRvb2xiYXJzKCk6IHZvaWQge1xyXG5cdFx0Ly8gVXNlIHRoZSBwbHVnaW4ncyBtZXRob2QgdG8gcmVmcmVzaCBhbGwgdG9vbGJhcnNcclxuXHRcdGNvbnN0IHBsdWdpbldpdGhNZXRob2QgPSB0aGlzLnBsdWdpbiBhcyB7IHJlZnJlc2hBbGxUb29sYmFycz86ICgpID0+IHZvaWQgfTtcclxuXHRcdGlmIChwbHVnaW5XaXRoTWV0aG9kICYmIHR5cGVvZiBwbHVnaW5XaXRoTWV0aG9kLnJlZnJlc2hBbGxUb29sYmFycyA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRwbHVnaW5XaXRoTWV0aG9kLnJlZnJlc2hBbGxUb29sYmFycygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHQvLyBCdWxrIG9wZXJhdGlvbiBzZXR0aW5nc1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdDb25maXJtIGJ1bGsgb3BlcmF0aW9ucycpXHJcblx0XHRcdC5zZXREZXNjKCdTaG93IGNvbmZpcm1hdGlvbiBkaWFsb2dzIGJlZm9yZSBwZXJmb3JtaW5nIGJ1bGsgb3BlcmF0aW9ucy4nKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybUJ1bGtPcGVyYXRpb25zKVxyXG5cdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybUJ1bGtPcGVyYXRpb25zID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdC8vIFRvb2xiYXIgYnV0dG9uIHZpc2liaWxpdHkgc2V0dGluZ3NcclxuXHRcdGNvbnN0IHRvb2xiYXJCdXR0b25zR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnVG9vbGJhciBidXR0b25zJywgJ2Jhc2VzLWNtcycpO1xyXG5cclxuXHRcdHRvb2xiYXJCdXR0b25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTaG93IHNlbGVjdCBhbGwgYnV0dG9uJylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdEaXNwbGF5IHRoZSBzZWxlY3QgYWxsIGJ1dHRvbiBpbiB0aGUgQ01TIHRvb2xiYXIuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJTZWxlY3RBbGwpO1xyXG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclNlbGVjdEFsbCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaEFjdGl2ZVRvb2xiYXJzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRvb2xiYXJCdXR0b25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTaG93IGNsZWFyIGJ1dHRvbicpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IEFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnRGlzcGxheSB0aGUgY2xlYXIgc2VsZWN0aW9uIGJ1dHRvbiBpbiB0aGUgQ01TIHRvb2xiYXIuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJDbGVhcik7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyQ2xlYXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2hBY3RpdmVUb29sYmFycygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0b29sYmFyQnV0dG9uc0dyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2hvdyBwdWJsaXNoIGJ1dHRvbicpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IEFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnRGlzcGxheSB0aGUgcHVibGlzaCBidXR0b24gaW4gdGhlIENNUyB0b29sYmFyLicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyUHVibGlzaCk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyUHVibGlzaCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaEFjdGl2ZVRvb2xiYXJzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRvb2xiYXJCdXR0b25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTaG93IGRyYWZ0IGJ1dHRvbicpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IEFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnRGlzcGxheSB0aGUgZHJhZnQgYnV0dG9uIGluIHRoZSBDTVMgdG9vbGJhci4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhckRyYWZ0KTtcclxuXHRcdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJEcmFmdCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaEFjdGl2ZVRvb2xiYXJzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRvb2xiYXJCdXR0b25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTaG93IHRhZ3MgYnV0dG9uJylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdEaXNwbGF5IHRoZSB0YWdzIGJ1dHRvbiBpbiB0aGUgQ01TIHRvb2xiYXIuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJUYWdzKTtcclxuXHRcdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJUYWdzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoQWN0aXZlVG9vbGJhcnMoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dG9vbGJhckJ1dHRvbnNHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1Nob3cgc2V0IGJ1dHRvbicpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IEFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnRGlzcGxheSB0aGUgc2V0IHByb3BlcnR5IGJ1dHRvbiBpbiB0aGUgQ01TIHRvb2xiYXIuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJTZXQpO1xyXG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclNldCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaEFjdGl2ZVRvb2xiYXJzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRvb2xiYXJCdXR0b25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTaG93IHJlbW92ZSBidXR0b24nKVxyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBBbHJlYWR5IGluIHNlbnRlbmNlIGNhc2VcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0LnNldERlc2MoJ0Rpc3BsYXkgdGhlIHJlbW92ZSBwcm9wZXJ0eSBidXR0b24gaW4gdGhlIENNUyB0b29sYmFyLicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyUmVtb3ZlKTtcclxuXHRcdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJSZW1vdmUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2hBY3RpdmVUb29sYmFycygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0b29sYmFyQnV0dG9uc0dyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2hvdyBkZWxldGUgYnV0dG9uJylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdEaXNwbGF5IHRoZSBkZWxldGUgYnV0dG9uIGluIHRoZSBDTVMgdG9vbGJhci4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhckRlbGV0ZSk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyRGVsZXRlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoQWN0aXZlVG9vbGJhcnMoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRGVsZXRpb24gc2V0dGluZ3NcclxuXHRcdGNvbnN0IGRlbGV0aW9uc0dyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ0RlbGV0aW9ucycsICdiYXNlcy1jbXMnKTtcclxuXHJcblx0XHRkZWxldGlvbnNHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0RlbGV0ZSBwYXJlbnQgZm9sZGVyIGZvciBzcGVjaWZpYyBmaWxlIG5hbWUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIGVuYWJsZWQsIGRlbGV0aW5nIGEgbm90ZSB3aWxsIGRlbGV0ZSBpdHMgcGFyZW50IGZvbGRlciBhbmQgYWxsIGl0cyBjb250ZW50cyBpZiB0aGUgbm90ZSBmaWxlIG5hbWUgbWF0Y2hlcyB0aGUgc3BlY2lmaWVkIG5hbWUuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsZXRlUGFyZW50Rm9sZGVyKTtcclxuXHRcdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsZXRlUGFyZW50Rm9sZGVyID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZGVsZXRpb25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdGb2xkZXIgZGVsZXRpb24gZmlsZSBuYW1lJylcclxuXHRcdFx0XHQuc2V0RGVzYygnRmlsZSBuYW1lIHRoYXQgdHJpZ2dlcnMgcGFyZW50IGZvbGRlciBkZWxldGlvbi4nKVxyXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFBsYWNlaG9sZGVyIHRleHQsIG5vdCBVSSB0ZXh0XHJcblx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKCdpbmRleCcpO1xyXG5cdFx0XHRcdFx0dGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVQYXJlbnRGb2xkZXJGaWxlbmFtZSk7XHJcblx0XHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVQYXJlbnRGb2xkZXJGaWxlbmFtZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5zZXREaXNhYmxlZCghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsZXRlUGFyZW50Rm9sZGVyKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGRlbGV0aW9uc0dyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRGVsZXRlIGFzc29jaWF0ZWQgdW5pcXVlIGF0dGFjaG1lbnRzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnV2hlbiBkZWxldGluZyBhIG5vdGUsIGF1dG9tYXRpY2FsbHkgZGVsZXRlIGF0dGFjaG1lbnRzIHRoYXQgYXJlIG9ubHkgdXNlZCBieSB0aGF0IG5vdGUuIEF0dGFjaG1lbnRzIHVzZWQgYnkgb3RoZXIgbm90ZXMgd2lsbCBiZSBwcmVzZXJ2ZWQuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsZXRlVW5pcXVlQXR0YWNobWVudHMpO1xyXG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVVbmlxdWVBdHRhY2htZW50cyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGRlbGV0aW9uc0dyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ29uZmlybSBkZWxldGlvbnMnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdTaG93IGNvbmZpcm1hdGlvbiBkaWFsb2cgYmVmb3JlIGRlbGV0aW5nIGZpbGVzLicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1EZWxldGlvbnMpO1xyXG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtRGVsZXRpb25zID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gSWNvbiBzZXR0aW5nc1xyXG5cdFx0Y29uc3QgYXBwZWFyYW5jZUdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ0FwcGVhcmFuY2UnLCAnYmFzZXMtY21zJyk7XHJcblxyXG5cdFx0YXBwZWFyYW5jZUdyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlOyBcIkNNU1wiIGlzIGEgcHJvcGVyIG5vdW5cclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0LnNldE5hbWUoJ1VzZSBob21lIGljb24gZm9yIENNUyB2aWV3JylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlOyBcIkNNU1wiIGFuZCBcIk9ic2lkaWFuXCIgYXJlIHByb3BlciBub3Vuc1xyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnVXNlIHRoZSBob21lIGljb24gaW5zdGVhZCBvZiBibG9ja3MgaWNvbiBmb3IgdGhlIENNUyB2aWV3IGluIHRoZSBCYXNlcyB2aWV3IHNlbGVjdG9yLiBSZXN0YXJ0IE9ic2lkaWFuIGZvciB0aGlzIGNoYW5nZSB0byB0YWtlIGVmZmVjdC4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VIb21lSWNvbik7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZUhvbWVJY29uID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YXBwZWFyYW5jZUdyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlOyBcIkdJRnNcIiBpcyBhIHByb3BlciBub3VuL2Fjcm9ueW1cclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0LnNldE5hbWUoJ0ZvcmNlIHN0YXRpYyBpbWFnZSBmb3IgYW5pbWF0ZWQgR0lGcycpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IEFscmVhZHkgaW4gc2VudGVuY2UgY2FzZTsgXCJHSUZzXCIgaXMgYSBwcm9wZXIgbm91bi9hY3JvbnltXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIGVuYWJsZWQsIGFuaW1hdGVkIEdJRnMgd2lsbCBkaXNwbGF5IG9ubHkgdGhlIGZpcnN0IGZyYW1lIHdoZW4gdXNlZCBhcyBjYXJkIGNvdmVycyBvciB0aHVtYm5haWxzLicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvcmNlU3RhdGljR2lmSW1hZ2VzKTtcclxuXHRcdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9yY2VTdGF0aWNHaWZJbWFnZXMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0XHQvLyBSZWZyZXNoIGFsbCBhY3RpdmUgdmlld3MgdG8gYXBwbHkgdGhlIGNoYW5nZVxyXG5cdFx0XHRcdFx0XHRjb25zdCBwbHVnaW5XaXRoTWV0aG9kID0gdGhpcy5wbHVnaW4gYXMgeyBhY3RpdmVWaWV3cz86IFNldDx7IG9uRGF0YVVwZGF0ZWQ/OiAoKSA9PiB2b2lkIH0+IH07XHJcblx0XHRcdFx0XHRcdGlmIChwbHVnaW5XaXRoTWV0aG9kLmFjdGl2ZVZpZXdzKSB7XHJcblx0XHRcdFx0XHRcdFx0cGx1Z2luV2l0aE1ldGhvZC5hY3RpdmVWaWV3cy5mb3JFYWNoKHZpZXcgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHZpZXcub25EYXRhVXBkYXRlZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2aWV3Lm9uRGF0YVVwZGF0ZWQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBQcm9wZXJ0aWVzIGluZm8gbW9kYWwgc2V0dGluZ1xyXG5cdFx0Ly8gUXVpY2sgZWRpdCBzZXR0aW5nc1xyXG5cdFx0Y29uc3QgcXVpY2tFZGl0R3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnUXVpY2sgZWRpdCcsICdiYXNlcy1jbXMnKTtcclxuXHJcblx0XHQvLyBEZWZpbmUgcXVpY2sgZWRpdCBzZXR0aW5ncyBmaXJzdCAobmVlZGVkIGZvciB2aXNpYmlsaXR5IHRvZ2dsaW5nKVxyXG5cdFx0bGV0IHF1aWNrRWRpdENvbW1hbmRTZXR0aW5nOiBTZXR0aW5nO1xyXG5cdFx0bGV0IHF1aWNrRWRpdEljb25TZXR0aW5nOiBTZXR0aW5nO1xyXG5cdFx0bGV0IHF1aWNrRWRpdE9wZW5GaWxlU2V0dGluZzogU2V0dGluZztcclxuXHJcblx0XHRxdWlja0VkaXRHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBxdWljayBlZGl0JylcclxuXHRcdFx0XHQuc2V0RGVzYygnU2hvdyBhbiBpY29uIG9uIGNhcmQgdGl0bGVzIHRoYXQgbGF1bmNoZXMgYSBjb21tYW5kIHdoZW4gY2xpY2tlZC4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVF1aWNrRWRpdClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVF1aWNrRWRpdCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0XHQvLyBTaG93L2hpZGUgY29tbWFuZCBzZWxlY3RvciBhbmQgcmVsYXRlZCBzZXR0aW5ncyBiYXNlZCBvbiB0b2dnbGVcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzaG91bGRIaWRlID0gIXZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdC8vIEV4dHJhY3Qgc2V0dGluZ0VsIHByb3BlcnRpZXMgdG8gYXZvaWQgcHJvbWlzZSBtaXN1c2UgZXJyb3JzXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29tbWFuZEVsID0gcXVpY2tFZGl0Q29tbWFuZFNldHRpbmc/LnNldHRpbmdFbDtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBxdWlja0VkaXRJY29uU2V0dGluZz8uc2V0dGluZ0VsO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG9wZW5GaWxlRWwgPSBxdWlja0VkaXRPcGVuRmlsZVNldHRpbmc/LnNldHRpbmdFbDtcclxuXHRcdFx0XHRcdFx0XHRpZiAoY29tbWFuZEVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb21tYW5kRWwudG9nZ2xlQ2xhc3MoJ2Jhc2VzLWNtcy1zZXR0aW5nLWhpZGRlbicsIHNob3VsZEhpZGUpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRpZiAoaWNvbkVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpY29uRWwudG9nZ2xlQ2xhc3MoJ2Jhc2VzLWNtcy1zZXR0aW5nLWhpZGRlbicsIHNob3VsZEhpZGUpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRpZiAob3BlbkZpbGVFbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0b3BlbkZpbGVFbC50b2dnbGVDbGFzcygnYmFzZXMtY21zLXNldHRpbmctaGlkZGVuJywgc2hvdWxkSGlkZSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ29tbWFuZCBwaWNrZXIgc2V0dGluZ1xyXG5cdFx0cXVpY2tFZGl0R3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0cXVpY2tFZGl0Q29tbWFuZFNldHRpbmcgPSBzZXR0aW5nO1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1F1aWNrIGVkaXQgY29tbWFuZCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ1RoZSBjb21tYW5kIHRvIGV4ZWN1dGUgd2hlbiBjbGlja2luZyB0aGUgcXVpY2sgZWRpdCBpY29uIG9uIGEgY2FyZCB0aXRsZS4nKVxyXG5cdFx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRDb21tYW5kTmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdENvbW1hbmROYW1lIHx8IFxyXG5cdFx0XHRcdFx0XHQodGhpcy5wbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0Q29tbWFuZCA/ICdTZWxlY3QgY29tbWFuZC4uLicgOiAnTm8gY29tbWFuZCBzZWxlY3RlZCcpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoY3VycmVudENvbW1hbmROYW1lKVxyXG5cdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgQ29tbWFuZFBpY2tlck1vZGFsKHRoaXMuYXBwLCAoY29tbWFuZElkOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gR2V0IGNvbW1hbmQgbmFtZSBieSBsb29raW5nIGl0IHVwXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbW1hbmRSZWdpc3RyeSA9ICh0aGlzLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBsaXN0Q29tbWFuZHM/OiAoKSA9PiBBcnJheTx7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB9PjsgY29tbWFuZHM/OiBSZWNvcmQ8c3RyaW5nLCB7IG5hbWU/OiBzdHJpbmcgfT4gfSB9KS5jb21tYW5kcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0bGV0IGNvbW1hbmROYW1lID0gJyc7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBUcnkgdG8gZmluZCB0aGUgY29tbWFuZCBuYW1lXHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChjb21tYW5kUmVnaXN0cnkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUcnkgbGlzdENvbW1hbmRzKClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZW9mIGNvbW1hbmRSZWdpc3RyeS5saXN0Q29tbWFuZHMgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbW1hbmRzID0gY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgY29tbWFuZCA9IGNvbW1hbmRzLmZpbmQoKGNtZCkgPT4gY21kLmlkID09PSBjb21tYW5kSWQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNvbW1hbmQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZE5hbWUgPSBjb21tYW5kLm5hbWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrOiB0cnkgZGlyZWN0IHJlZ2lzdHJ5IGFjY2Vzc1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICghY29tbWFuZE5hbWUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHJlZ2lzdHJ5ID0gY29tbWFuZFJlZ2lzdHJ5LmNvbW1hbmRzO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHJlZ2lzdHJ5ICYmIHJlZ2lzdHJ5W2NvbW1hbmRJZF0pIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZE5hbWUgPSByZWdpc3RyeVtjb21tYW5kSWRdLm5hbWUgfHwgJyc7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5xdWlja0VkaXRDb21tYW5kID0gY29tbWFuZElkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5xdWlja0VkaXRDb21tYW5kTmFtZSA9IGNvbW1hbmROYW1lO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gdXBkYXRlIHRoZSBVSVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQWRkIGEgY2xlYXIgYnV0dG9uIGlmIGEgY29tbWFuZCBpcyBzZWxlY3RlZFxyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdENvbW1hbmQpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgY2xlYXJCdXR0b24gPSBidXR0b24uYnV0dG9uRWwucGFyZW50RWxlbWVudD8uY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuXHRcdFx0XHRcdFx0XHR0ZXh0OiAnQ2xlYXInLFxyXG5cdFx0XHRcdFx0XHRcdGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tbGVmdDogOHB4OycgfVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0Y2xlYXJCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdENvbW1hbmQgPSAnJztcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdENvbW1hbmROYW1lID0gJyc7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gdXBkYXRlIHRoZSBVSVxyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdC8vIEhpZGUgY29tbWFuZCBzZWxlY3RvciBpZiBxdWljayBlZGl0IGlzIGRpc2FibGVkXHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLnRvZ2dsZUNsYXNzKCdiYXNlcy1jbXMtc2V0dGluZy1oaWRkZW4nLCAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUXVpY2tFZGl0KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEljb24gcGlja2VyIHNldHRpbmdcclxuXHRcdHF1aWNrRWRpdEdyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHF1aWNrRWRpdEljb25TZXR0aW5nID0gc2V0dGluZztcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdRdWljayBlZGl0IGljb24nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGljb24gdG8gZGlzcGxheSBmb3IgdGhlIHF1aWNrIGVkaXQgYnV0dG9uIG9uIGNhcmQgdGl0bGVzLicpXHJcblx0XHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgaWNvbk5hbWUgPSB0aGlzLmdldEljb25OYW1lKHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdEljb24gfHwgJ3BlbmNpbC1saW5lJyk7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChpY29uTmFtZSB8fCAnU2VsZWN0IGljb24uLi4nKVxyXG5cdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdEljb24gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cgdXBkYXRlZCBpY29uIG5hbWVcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdC8vIEhpZGUgaWNvbiBzZWxlY3RvciBpZiBxdWljayBlZGl0IGlzIGRpc2FibGVkXHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLnRvZ2dsZUNsYXNzKCdiYXNlcy1jbXMtc2V0dGluZy1oaWRkZW4nLCAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUXVpY2tFZGl0KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFF1aWNrIGVkaXQgb3BlbiBmaWxlIHNldHRpbmdcclxuXHRcdHF1aWNrRWRpdEdyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHF1aWNrRWRpdE9wZW5GaWxlU2V0dGluZyA9IHNldHRpbmc7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQXR0ZW1wdCB0byBvcGVuIGZpbGUgYW5kIGV4ZWN1dGUgcXVpY2sgZWRpdCBjb21tYW5kJylcclxuXHRcdFx0XHQuc2V0RGVzYygnRm9yIGNvbW1hbmRzIHRoYXQgZG9uXFwndCBoYXZlIHNwZWNpYWwgaGFuZGxpbmcsIGF0dGVtcHQgdG8gb3BlbiB0aGUgZmlsZSBhbmQgZXhlY3V0ZSB0aGUgY29tbWFuZC4gU29tZSBjb21tYW5kcyBtYXkgbm90IHdvcmsgcHJvcGVybHkgdGhpcyB3YXkuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5xdWlja0VkaXRPcGVuRmlsZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdE9wZW5GaWxlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0XHQvLyBIaWRlIHRoaXMgc2V0dGluZyBpZiBxdWljayBlZGl0IGlzIGRpc2FibGVkXHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLnRvZ2dsZUNsYXNzKCdiYXNlcy1jbXMtc2V0dGluZy1oaWRkZW4nLCAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUXVpY2tFZGl0KTtcclxuXHRcdH0pO1xyXG5cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0SWNvbk5hbWUoaWNvbklkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0aWYgKCFpY29uSWQpIHJldHVybiAnJztcclxuXHRcdC8vIENvbnZlcnQgaWNvbiBJRCB0byBhIHJlYWRhYmxlIG5hbWUsIHJlbW92aW5nIGx1Y2lkZS0gcHJlZml4IGlmIHByZXNlbnRcclxuXHRcdHJldHVybiBpY29uSWRcclxuXHRcdFx0LnJlcGxhY2UoL15sdWNpZGUtLywgJycpIC8vIFJlbW92ZSBsdWNpZGUtIHByZWZpeFxyXG5cdFx0XHQuc3BsaXQoJy0nKVxyXG5cdFx0XHQubWFwKHdvcmQgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkpXHJcblx0XHRcdC5qb2luKCcgJyk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBDb21tYW5kIFBpY2tlciBNb2RhbFxyXG4gKiBTZWFyY2hhYmxlIG1vZGFsIGZvciBzZWxlY3RpbmcgYW4gT2JzaWRpYW4gY29tbWFuZFxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgRnV6enlTdWdnZXN0TW9kYWwgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbnRlcmZhY2UgQ29tbWFuZE9wdGlvbiB7XHJcblx0aWQ6IHN0cmluZztcclxuXHRuYW1lOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb21tYW5kUGlja2VyTW9kYWwgZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxDb21tYW5kT3B0aW9uPiB7XHJcblx0cHJpdmF0ZSBvblNlbGVjdDogKGNvbW1hbmRJZDogc3RyaW5nKSA9PiB2b2lkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25TZWxlY3Q6IChjb21tYW5kSWQ6IHN0cmluZykgPT4gdm9pZCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMub25TZWxlY3QgPSBvblNlbGVjdDtcclxuXHR9XHJcblxyXG5cdGdldEl0ZW1zKCk6IENvbW1hbmRPcHRpb25bXSB7XHJcblx0XHQvLyBHZXQgYWxsIGF2YWlsYWJsZSBjb21tYW5kc1xyXG5cdFx0Ly8gVHJ5IG11bHRpcGxlIG1ldGhvZHMgdG8gZW5zdXJlIHdlIGdldCBBTEwgY29tbWFuZHMsIG5vdCBqdXN0IGNvbnRleHQtZmlsdGVyZWQgb25lc1xyXG5cdFx0Y29uc3QgY29tbWFuZFJlZ2lzdHJ5ID0gKHRoaXMuYXBwIGFzIHsgY29tbWFuZHM/OiB7IGxpc3RDb21tYW5kcz86ICgpID0+IENvbW1hbmRPcHRpb25bXTsgY29tbWFuZHM/OiBSZWNvcmQ8c3RyaW5nLCBDb21tYW5kT3B0aW9uPjsgY29tbWFuZFJlZ2lzdHJ5PzogUmVjb3JkPHN0cmluZywgQ29tbWFuZE9wdGlvbj4gfSB9KS5jb21tYW5kcztcclxuXHRcdFxyXG5cdFx0Ly8gVXNlIGEgU2V0IHRvIGRlZHVwbGljYXRlIGJ5IGNvbW1hbmQgSURcclxuXHRcdGNvbnN0IGNvbW1hbmRNYXAgPSBuZXcgTWFwPHN0cmluZywgQ29tbWFuZE9wdGlvbj4oKTtcclxuXHRcdFxyXG5cdFx0Ly8gTWV0aG9kIDE6IFRyeSBsaXN0Q29tbWFuZHMoKSAtIGJ1dCB0aGlzIG1pZ2h0IGJlIGNvbnRleHQtZmlsdGVyZWRcclxuXHRcdGlmIChjb21tYW5kUmVnaXN0cnkgJiYgdHlwZW9mIGNvbW1hbmRSZWdpc3RyeS5saXN0Q29tbWFuZHMgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBjb21tYW5kcyA9IGNvbW1hbmRSZWdpc3RyeS5saXN0Q29tbWFuZHMoKTtcclxuXHRcdFx0XHRmb3IgKGNvbnN0IGNvbW1hbmQgb2YgY29tbWFuZHMpIHtcclxuXHRcdFx0XHRcdGlmIChjb21tYW5kICYmIGNvbW1hbmQuaWQgJiYgY29tbWFuZC5uYW1lICYmICFjb21tYW5kTWFwLmhhcyhjb21tYW5kLmlkKSkge1xyXG5cdFx0XHRcdFx0XHRjb21tYW5kTWFwLnNldChjb21tYW5kLmlkLCB7XHJcblx0XHRcdFx0XHRcdFx0aWQ6IGNvbW1hbmQuaWQsXHJcblx0XHRcdFx0XHRcdFx0bmFtZTogY29tbWFuZC5uYW1lXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybignW0Jhc2VzIENNU10gRXJyb3IgZ2V0dGluZyBjb21tYW5kcyB2aWEgbGlzdENvbW1hbmRzKCk6JywgZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gTWV0aG9kIDI6IFRyeSBhY2Nlc3NpbmcgdGhlIGludGVybmFsIGNvbW1hbmRzIHJlZ2lzdHJ5IGRpcmVjdGx5XHJcblx0XHQvLyBUaGlzIHNob3VsZCBnaXZlIHVzIEFMTCBjb21tYW5kcyByZWdhcmRsZXNzIG9mIGNvbnRleHRcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHJlZ2lzdHJ5ID0gY29tbWFuZFJlZ2lzdHJ5Py5jb21tYW5kcztcclxuXHRcdFx0aWYgKHJlZ2lzdHJ5ICYmIHR5cGVvZiByZWdpc3RyeSA9PT0gJ29iamVjdCcpIHtcclxuXHRcdFx0XHRjb25zdCBhbGxDb21tYW5kcyA9IE9iamVjdC52YWx1ZXMocmVnaXN0cnkpO1xyXG5cdFx0XHRcdGZvciAoY29uc3QgY29tbWFuZCBvZiBhbGxDb21tYW5kcykge1xyXG5cdFx0XHRcdFx0aWYgKGNvbW1hbmQgJiYgY29tbWFuZC5pZCAmJiBjb21tYW5kLm5hbWUgJiYgIWNvbW1hbmRNYXAuaGFzKGNvbW1hbmQuaWQpKSB7XHJcblx0XHRcdFx0XHRcdGNvbW1hbmRNYXAuc2V0KGNvbW1hbmQuaWQsIHtcclxuXHRcdFx0XHRcdFx0XHRpZDogY29tbWFuZC5pZCxcclxuXHRcdFx0XHRcdFx0XHRuYW1lOiBjb21tYW5kLm5hbWVcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdGNvbnNvbGUud2FybignW0Jhc2VzIENNU10gRXJyb3IgZ2V0dGluZyBjb21tYW5kcyB2aWEgcmVnaXN0cnk6JywgZSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIE1ldGhvZCAzOiBUcnkgYWNjZXNzaW5nIHZpYSBpbnRlcm5hbCBzdHJ1Y3R1cmUgKGZhbGxiYWNrKVxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgaW50ZXJuYWxSZWdpc3RyeSA9IGNvbW1hbmRSZWdpc3RyeT8uY29tbWFuZFJlZ2lzdHJ5O1xyXG5cdFx0XHRpZiAoaW50ZXJuYWxSZWdpc3RyeSAmJiB0eXBlb2YgaW50ZXJuYWxSZWdpc3RyeSA9PT0gJ29iamVjdCcpIHtcclxuXHRcdFx0XHRjb25zdCBhbGxDb21tYW5kcyA9IE9iamVjdC52YWx1ZXMoaW50ZXJuYWxSZWdpc3RyeSk7XHJcblx0XHRcdFx0Zm9yIChjb25zdCBjb21tYW5kIG9mIGFsbENvbW1hbmRzKSB7XHJcblx0XHRcdFx0XHRpZiAoY29tbWFuZCAmJiBjb21tYW5kLmlkICYmIGNvbW1hbmQubmFtZSAmJiAhY29tbWFuZE1hcC5oYXMoY29tbWFuZC5pZCkpIHtcclxuXHRcdFx0XHRcdFx0Y29tbWFuZE1hcC5zZXQoY29tbWFuZC5pZCwge1xyXG5cdFx0XHRcdFx0XHRcdGlkOiBjb21tYW5kLmlkLFxyXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGNvbW1hbmQubmFtZVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbQmFzZXMgQ01TXSBFcnJvciBnZXR0aW5nIGNvbW1hbmRzIHZpYSBpbnRlcm5hbCByZWdpc3RyeTonLCBlKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Y29uc3QgY29tbWFuZE9wdGlvbnMgPSBBcnJheS5mcm9tKGNvbW1hbmRNYXAudmFsdWVzKCkpO1xyXG5cdFx0XHJcblx0XHQvLyBTb3J0IGFscGhhYmV0aWNhbGx5IGJ5IG5hbWVcclxuXHRcdGNvbW1hbmRPcHRpb25zLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gY29tbWFuZE9wdGlvbnM7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtVGV4dChpdGVtOiBDb21tYW5kT3B0aW9uKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBpdGVtLm5hbWU7XHJcblx0fVxyXG5cclxuXHRvbkNob29zZUl0ZW0oaXRlbTogQ29tbWFuZE9wdGlvbiwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy5vblNlbGVjdChpdGVtLmlkKTtcclxuXHR9XHJcblxyXG5cdC8vIE92ZXJyaWRlIHRvIHNob3cgY29tbWFuZCBuYW1lIG9ubHlcclxuXHRyZW5kZXJTdWdnZXN0aW9uKG1hdGNoOiB7IGl0ZW06IENvbW1hbmRPcHRpb24gfSwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBpdGVtID0gbWF0Y2guaXRlbTtcclxuXHRcdGVsLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24tdGl0bGUnLCB0ZXh0OiBpdGVtLm5hbWUgfSk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBJY29uIFBpY2tlciBNb2RhbFxyXG4gKiBTZWFyY2hhYmxlIG1vZGFsIGZvciBzZWxlY3RpbmcgYSBMdWNpZGUgaWNvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgRnV6enlTdWdnZXN0TW9kYWwsIHNldEljb24sIGdldEljb25JZHMsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW50ZXJmYWNlIEljb25PcHRpb24ge1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0bmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG4vLyBHZXQgaWNvbiBsaXN0IGZyb20gT2JzaWRpYW4gQVBJIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBmYWxsYmFjayBsaXN0XHJcbmNvbnN0IGdldEljb25MaXN0ID0gKCk6IHN0cmluZ1tdID0+IHtcclxuXHRpZiAocmVxdWlyZUFwaVZlcnNpb24gJiYgcmVxdWlyZUFwaVZlcnNpb24oJzEuNy4zJykgJiYgZ2V0SWNvbklkcykge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0cmV0dXJuIGdldEljb25JZHMoKTtcclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbQmFzZXMgQ01TXSBFcnJvciBnZXR0aW5nIGljb24gSURzIGZyb20gT2JzaWRpYW46JywgZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdC8vIEZhbGxiYWNrIHRvIGEgYmFzaWMgbGlzdCBpZiBBUEkgaXMgbm90IGF2YWlsYWJsZVxyXG5cdHJldHVybiBbXHJcblx0XHQnc2V0dGluZ3MtMicsICdzZXR0aW5ncycsICdoZWxwLWNpcmNsZScsICdpbmZvJywgJ3N0YXInLCAnaGVhcnQnLCAnYm9va21hcmsnLFxyXG5cdFx0J2hvbWUnLCAnc2VhcmNoJywgJ2JlbGwnLCAnbWFpbCcsICd1c2VyJywgJ3VzZXJzJywgJ2ZvbGRlcicsICdmaWxlJywgJ2ZpbGUtdGV4dCcsXHJcblx0XHQnaW1hZ2UnLCAndmlkZW8nLCAnbXVzaWMnLCAnY2FsZW5kYXInLCAnY2xvY2snLCAnZWRpdCcsICdwZW5jaWwnLCAndHJhc2gnLFxyXG5cdFx0J2NvcHknLCAnY3V0JywgJ3Bhc3RlJywgJ2Rvd25sb2FkJywgJ3VwbG9hZCcsICdzYXZlJywgJ3NoYXJlJywgJ2xpbmsnLFxyXG5cdFx0J2V4dGVybmFsLWxpbmsnLCAnbG9jaycsICd1bmxvY2snLCAnZXllJywgJ2V5ZS1vZmYnLCAna2V5JywgJ3NoaWVsZCcsXHJcblx0XHQnY2hlY2snLCAneCcsICdwbHVzJywgJ21pbnVzJywgJ2Fycm93LWxlZnQnLCAnYXJyb3ctcmlnaHQnLCAnYXJyb3ctdXAnLFxyXG5cdFx0J2Fycm93LWRvd24nLCAnY2hldnJvbi1sZWZ0JywgJ2NoZXZyb24tcmlnaHQnLCAnY2hldnJvbi11cCcsICdjaGV2cm9uLWRvd24nLFxyXG5cdFx0J21lbnUnLCAnbW9yZS1ob3Jpem9udGFsJywgJ21vcmUtdmVydGljYWwnLCAnZ3JpZCcsICdsaXN0JywgJ2xheW91dCcsXHJcblx0XHQnY29sdW1ucycsICdyb3dzJywgJ21heGltaXplJywgJ21pbmltaXplJywgJ3pvb20taW4nLCAnem9vbS1vdXQnLFxyXG5cdFx0J3JlZnJlc2gtY3cnLCAncGxheScsICdwYXVzZScsICdzdG9wJywgJ3N1bicsICdtb29uJywgJ2Nsb3VkJywgJ3phcCcsXHJcblx0XHQnd2FuZC0yJywgJ3dhbmQnLCAnd2FuZC1zcGFya2xlcycsICdwYWxldHRlJywgJ2JydXNoJywgJ3NsaWRlcnMnLFxyXG5cdFx0J3Bvd2VyJywgJ3dpZmknLCAnYmx1ZXRvb3RoJywgJ21vbml0b3InLCAnbGFwdG9wJywgJ3NtYXJ0cGhvbmUnLFxyXG5cdFx0J2NhbWVyYScsICdtaWMnLCAnaGVhZHBob25lcycsICdjb2RlJywgJ3Rlcm1pbmFsJywgJ3Rlcm1pbmFsLXNxdWFyZScsXHJcblx0XHQnZ2l0aHViJywgJ2dpdGxhYicsICdnaXQtYnJhbmNoJywgJ2dpdC1jb21taXQnLCAnZGF0YWJhc2UnLCAnc2VydmVyJyxcclxuXHRcdCdjbG91ZC1kb3dubG9hZCcsICdjbG91ZC11cGxvYWQnLCAndGFnJywgJ3RhZ3MnLCAnZmxhZycsICdwaW4nLFxyXG5cdFx0J21hcC1waW4nLCAnY29tcGFzcycsICdnbG9iZScsICdyb2NrZXQnLCAnY2FyJywgJ2Jpa2UnLCAncm9ib3QnLFxyXG5cdFx0J2FwcGxlJywgJ3dpbmRvd3MnLCAnbGludXgnLCAnY2hyb21lJywgJ2ZpcmVmb3gnLCAnc2FmYXJpJyxcclxuXHRcdCdjcmVkaXQtY2FyZCcsICd3YWxsZXQnLCAnY29pbnMnLCAnYm9vaycsICdib29rLW9wZW4nLCAnYXdhcmQnLFxyXG5cdFx0J3Ryb3BoeScsICdiYWRnZScsICd3cmVuY2gnLCAndG9vbCcsICdwYWNrYWdlJywgJ2JveCcsICdhcmNoaXZlJyxcclxuXHRcdCdzZW5kJywgJ3JlcGx5JywgJ2ZvcndhcmQnLCAnbWFpbC1vcGVuJywgJ3RhZy1wbHVzJywgJ3RhZy1taW51cycsXHJcblx0XHQnZmxhZy1vZmYnLCAncGluLW9mZicsICdtYXAtcGluLW9mZicsICduYXZpZ2F0aW9uJywgJ21hcCcsICdlYXJ0aCcsXHJcblx0XHQncGxhbmUnLCAnc2hpcCcsICdhbmNob3InLCAnaGVsaWNvcHRlcicsICdkcm9uZScsICdhbmRyb2lkJyxcclxuXHRcdCdrZXlob2xlJywgJ2tleXMnLCAnZmluZ2VycHJpbnQnLCAnc2NhbicsICdxci1jb2RlJywgJ2JhcmNvZGUnLFxyXG5cdFx0J3JlY2VpcHQnLCAncGlnZ3ktYmFuaycsICdiYW5rbm90ZScsICdwZW5jaWwtbGluZScsICdlZGl0LTInLCAnZWRpdC0zJ1xyXG5cdF07XHJcbn07XHJcblxyXG4vLyBDb252ZXJ0IGljb24gSURzIHRvIEljb25PcHRpb24gZm9ybWF0XHJcbmNvbnN0IExVQ0lERV9JQ09OUzogSWNvbk9wdGlvbltdID0gZ2V0SWNvbkxpc3QoKS5tYXAoaWQgPT4gKHtcclxuXHRpZDogaWQsXHJcblx0bmFtZTogaWRcclxuXHRcdC5yZXBsYWNlKC9ebHVjaWRlLS8sICcnKSAvLyBSZW1vdmUgbHVjaWRlLSBwcmVmaXggZm9yIGRpc3BsYXlcclxuXHRcdC5yZXBsYWNlKC8tL2csICcgJylcclxuXHRcdC5yZXBsYWNlKC8oXlxcd3sxfSl8KFxccytcXHd7MX0pL2csIChsZXR0ZXIpID0+IGxldHRlci50b1VwcGVyQ2FzZSgpKVxyXG59KSkuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7XHJcblxyXG5leHBvcnQgY2xhc3MgSWNvblBpY2tlck1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8SWNvbk9wdGlvbj4ge1xyXG5cdHByaXZhdGUgb25TZWxlY3Q6IChpY29uSWQ6IHN0cmluZykgPT4gdm9pZDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU2VsZWN0OiAoaWNvbklkOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLm9uU2VsZWN0ID0gb25TZWxlY3Q7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtcygpOiBJY29uT3B0aW9uW10ge1xyXG5cdFx0cmV0dXJuIExVQ0lERV9JQ09OUztcclxuXHR9XHJcblxyXG5cdGdldEl0ZW1UZXh0KGl0ZW06IEljb25PcHRpb24pOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIGl0ZW0ubmFtZTtcclxuXHR9XHJcblxyXG5cdG9uQ2hvb3NlSXRlbShpdGVtOiBJY29uT3B0aW9uLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLm9uU2VsZWN0KGl0ZW0uaWQpO1xyXG5cdH1cclxuXHJcblx0Ly8gT3ZlcnJpZGUgdG8gc2hvdyBpY29uIHByZXZpZXdcclxuXHRyZW5kZXJTdWdnZXN0aW9uKG1hdGNoOiB7IGl0ZW06IEljb25PcHRpb24gfSwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBpdGVtID0gbWF0Y2guaXRlbTtcclxuXHRcdGVsLmFkZENsYXNzKCdtb2QtY29tcGxleCcpO1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGVsLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24tY29udGVudCcgfSk7XHJcblx0XHRjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24tdGl0bGUnLCB0ZXh0OiBpdGVtLm5hbWUgfSk7XHJcblx0XHRcclxuXHRcdC8vIENyZWF0ZSBpY29uIHByZXZpZXcgdXNpbmcgT2JzaWRpYW4ncyBzZXRJY29uXHJcblx0XHRjb25zdCBhdXggPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWF1eCcgfSk7XHJcblx0XHRzZXRJY29uKGF1eC5jcmVhdGVTcGFuKHsgY2xzOiAnc3VnZ2VzdGlvbi1mbGFpcicgfSksIGl0ZW0uaWQpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbiIsICIvKipcclxuICogQ29tcGF0aWJpbGl0eSB1dGlsaXRpZXMgZm9yIHNldHRpbmdzXHJcbiAqIFByb3ZpZGVzIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgZm9yIFNldHRpbmdHcm91cCAocmVxdWlyZXMgQVBJIDEuMTEuMCspXHJcbiAqL1xyXG5pbXBvcnQgeyBTZXR0aW5nLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8vIFR5cGUgZGVmaW5pdGlvbiBmb3IgU2V0dGluZ0dyb3VwIChtYXkgbm90IGJlIGluIHR5cGUgZGVmaW5pdGlvbnMgZm9yIG9sZGVyIHZlcnNpb25zKVxyXG50eXBlIFNldHRpbmdHcm91cENvbnN0cnVjdG9yID0gbmV3IChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpID0+IHtcclxuXHRzZXRIZWFkaW5nKGhlYWRpbmc6IHN0cmluZyk6IHtcclxuXHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxuXHR9O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHdvcmtzIHdpdGggYm90aCBTZXR0aW5nR3JvdXAgYW5kIGZhbGxiYWNrIGNvbnRhaW5lclxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nc0NvbnRhaW5lciB7XHJcblx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIHNldHRpbmdzIGNvbnRhaW5lciB0aGF0IHVzZXMgU2V0dGluZ0dyb3VwIGlmIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspLFxyXG4gKiBvdGhlcndpc2UgZmFsbHMgYmFjayB0byBjcmVhdGluZyBhIGhlYWRpbmcgYW5kIHVzaW5nIHRoZSBjb250YWluZXIgZGlyZWN0bHkuXHJcbiAqIFxyXG4gKiBVc2VzIHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSB0byBjaGVjayBpZiBTZXR0aW5nR3JvdXAgaXMgYXZhaWxhYmxlLlxyXG4gKiBUaGlzIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nLlxyXG4gKiBcclxuICogQHBhcmFtIGNvbnRhaW5lckVsIC0gVGhlIGNvbnRhaW5lciBlbGVtZW50IGZvciBzZXR0aW5nc1xyXG4gKiBAcGFyYW0gaGVhZGluZyAtIFRoZSBoZWFkaW5nIHRleHQgZm9yIHRoZSBzZXR0aW5ncyBncm91cFxyXG4gKiBAcGFyYW0gbWFuaWZlc3RJZCAtIFRoZSBwbHVnaW4ncyBtYW5pZmVzdCBJRCBmb3IgQ1NTIHNjb3BpbmcgKHJlcXVpcmVkIGZvciBmYWxsYmFjayBtb2RlKVxyXG4gKiBAcmV0dXJucyBBIGNvbnRhaW5lciB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNldHRpbmdzR3JvdXAoXHJcblx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxyXG5cdGhlYWRpbmc6IHN0cmluZyxcclxuXHRtYW5pZmVzdElkPzogc3RyaW5nXHJcbik6IFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHQvLyBDaGVjayBpZiBTZXR0aW5nR3JvdXAgaXMgYXZhaWxhYmxlIChBUEkgMS4xMS4wKylcclxuXHQvLyByZXF1aXJlQXBpVmVyc2lvbiBpcyB0aGUgb2ZmaWNpYWwgT2JzaWRpYW4gQVBJIG1ldGhvZCBmb3IgdmVyc2lvbiBjaGVja2luZ1xyXG5cdGlmIChyZXF1aXJlQXBpVmVyc2lvbignMS4xMS4wJykpIHtcclxuXHRcdC8vIFVzZSBTZXR0aW5nR3JvdXAgLSBpdCdzIGd1YXJhbnRlZWQgdG8gZXhpc3QgaWYgcmVxdWlyZUFwaVZlcnNpb24gcmV0dXJucyB0cnVlXHJcblx0XHQvLyBBY2Nlc3MgU2V0dGluZ0dyb3VwIGZyb20gdGhlIG9ic2lkaWFuIG1vZHVsZSBkeW5hbWljYWxseSB0byBhdm9pZCB0eXBlIGVycm9yc1xyXG5cdFx0Ly8gV2UgbmVlZCB0byB1c2UgcmVxdWlyZSBoZXJlIGJlY2F1c2UgU2V0dGluZ0dyb3VwIG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9ucyBmb3Igb2xkZXIgdmVyc2lvbnNcclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tcmVxdWlyZS1pbXBvcnRzLCBuby11bmRlZlxyXG5cdFx0Y29uc3Qgb2JzaWRpYW5Nb2R1bGUgPSByZXF1aXJlKCdvYnNpZGlhbicpIGFzIHsgU2V0dGluZ0dyb3VwPzogU2V0dGluZ0dyb3VwQ29uc3RydWN0b3IgfTtcclxuXHRcdGNvbnN0IFNldHRpbmdHcm91cCA9IG9ic2lkaWFuTW9kdWxlLlNldHRpbmdHcm91cDtcclxuXHRcdGlmIChTZXR0aW5nR3JvdXApIHtcclxuXHRcdFx0Y29uc3QgZ3JvdXAgPSBuZXcgU2V0dGluZ0dyb3VwKGNvbnRhaW5lckVsKS5zZXRIZWFkaW5nKGhlYWRpbmcpO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKSB7XHJcblx0XHRcdFx0XHRncm91cC5hZGRTZXR0aW5nKGNiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0XHQvLyBGYWxsYmFjayBpZiBTZXR0aW5nR3JvdXAgaXMgbm90IGZvdW5kIChzaG91bGRuJ3QgaGFwcGVuIGlmIHJlcXVpcmVBcGlWZXJzaW9uIGlzIGNvcnJlY3QpXHJcblx0fVxyXG5cdFxyXG5cdC8vIEZhbGxiYWNrIHBhdGggKGVpdGhlciBBUEkgPCAxLjExLjAgb3IgU2V0dGluZ0dyb3VwIG5vdCBmb3VuZClcclxuXHQvLyBBZGQgc2NvcGluZyBjbGFzcyB0byBjb250YWluZXJFbCB0byBzY29wZSBDU1MgdG8gb25seSB0aGlzIHBsdWdpbidzIHNldHRpbmdzXHJcblx0aWYgKG1hbmlmZXN0SWQpIHtcclxuXHRcdGNvbnRhaW5lckVsLmFkZENsYXNzKGAke21hbmlmZXN0SWR9LXNldHRpbmdzLWNvbXBhdGApO1xyXG5cdH1cclxuXHRcclxuXHQvLyBGYWxsYmFjazogQ3JlYXRlIGEgaGVhZGluZyBtYW51YWxseSBhbmQgdXNlIGNvbnRhaW5lciBkaXJlY3RseVxyXG5cdGNvbnN0IGhlYWRpbmdFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignc2V0dGluZy1ncm91cC1oZWFkaW5nJyk7XHJcblx0aGVhZGluZ0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogaGVhZGluZyB9KTtcclxuXHRcclxuXHRyZXR1cm4ge1xyXG5cdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpIHtcclxuXHRcdFx0Y29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0Y2Ioc2V0dGluZyk7XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG4iLCAiLyoqXG4gKiBUeXBlU2NyaXB0IHR5cGVzIGZvciBCYXNlcyBDTVMgcGx1Z2luXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBCYXNlc0NNU1NldHRpbmdzIHtcblx0Ly8gQnVsayBvcGVyYXRpb24gc2V0dGluZ3Ncblx0Y29uZmlybUJ1bGtPcGVyYXRpb25zOiBib29sZWFuO1xuXHRcblx0Ly8gRGVsZXRpb24gc2V0dGluZ3Ncblx0ZGVsZXRlUGFyZW50Rm9sZGVyOiBib29sZWFuO1xuXHRkZWxldGVQYXJlbnRGb2xkZXJGaWxlbmFtZTogc3RyaW5nO1xuXHRkZWxldGVVbmlxdWVBdHRhY2htZW50czogYm9vbGVhbjtcblx0XG5cdC8vIENvbmZpcm1hdGlvbiBkaWFsb2cgc2V0dGluZ3Ncblx0Y29uZmlybURlbGV0aW9uczogYm9vbGVhbjtcblx0XG5cdC8vIEljb24gc2V0dGluZ3Ncblx0dXNlSG9tZUljb246IGJvb2xlYW47XG5cdFxuXHQvLyBRdWljayBlZGl0IHNldHRpbmdzXG5cdGVuYWJsZVF1aWNrRWRpdDogYm9vbGVhbjtcblx0cXVpY2tFZGl0Q29tbWFuZDogc3RyaW5nO1xuXHRxdWlja0VkaXRDb21tYW5kTmFtZTogc3RyaW5nOyAvLyBTdG9yZSBjb21tYW5kIG5hbWUgZm9yIGRpc3BsYXlcblx0cXVpY2tFZGl0SWNvbjogc3RyaW5nOyAvLyBJY29uIElEIGZvciB0aGUgcXVpY2sgZWRpdCBpY29uXG5cdHF1aWNrRWRpdE9wZW5GaWxlOiBib29sZWFuOyAvLyBBdHRlbXB0IHRvIG9wZW4gZmlsZSBhbmQgZXhlY3V0ZSBjb21tYW5kIGZvciB1bnN1cHBvcnRlZCBjb21tYW5kc1xuXHRcblx0Ly8gVG9vbGJhciBidXR0b24gdmlzaWJpbGl0eSBzZXR0aW5nc1xuXHRzaG93VG9vbGJhclNlbGVjdEFsbDogYm9vbGVhbjtcblx0c2hvd1Rvb2xiYXJDbGVhcjogYm9vbGVhbjtcblx0c2hvd1Rvb2xiYXJEcmFmdDogYm9vbGVhbjtcblx0c2hvd1Rvb2xiYXJQdWJsaXNoOiBib29sZWFuO1xuXHRzaG93VG9vbGJhclRhZ3M6IGJvb2xlYW47XG5cdHNob3dUb29sYmFyU2V0OiBib29sZWFuO1xuXHRzaG93VG9vbGJhclJlbW92ZTogYm9vbGVhbjtcblx0c2hvd1Rvb2xiYXJEZWxldGU6IGJvb2xlYW47XG5cdFxuXHQvLyBBcHBlYXJhbmNlIHNldHRpbmdzXG5cdGZvcmNlU3RhdGljR2lmSW1hZ2VzOiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogQmFzZXNDTVNTZXR0aW5ncyA9IHtcblx0Y29uZmlybUJ1bGtPcGVyYXRpb25zOiB0cnVlLFxuXHRkZWxldGVQYXJlbnRGb2xkZXI6IGZhbHNlLFxuXHRkZWxldGVQYXJlbnRGb2xkZXJGaWxlbmFtZTogJ2luZGV4Jyxcblx0ZGVsZXRlVW5pcXVlQXR0YWNobWVudHM6IGZhbHNlLFxuXHRjb25maXJtRGVsZXRpb25zOiB0cnVlLFxuXHR1c2VIb21lSWNvbjogZmFsc2UsXG5cdGVuYWJsZVF1aWNrRWRpdDogZmFsc2UsXG5cdHF1aWNrRWRpdENvbW1hbmQ6ICcnLFxuXHRxdWlja0VkaXRDb21tYW5kTmFtZTogJycsXG5cdHF1aWNrRWRpdEljb246ICdwZW5jaWwtbGluZScsXG5cdHF1aWNrRWRpdE9wZW5GaWxlOiBmYWxzZSxcblx0c2hvd1Rvb2xiYXJTZWxlY3RBbGw6IHRydWUsXG5cdHNob3dUb29sYmFyQ2xlYXI6IHRydWUsXG5cdHNob3dUb29sYmFyRHJhZnQ6IHRydWUsXG5cdHNob3dUb29sYmFyUHVibGlzaDogdHJ1ZSxcblx0c2hvd1Rvb2xiYXJUYWdzOiB0cnVlLFxuXHRzaG93VG9vbGJhclNldDogdHJ1ZSxcblx0c2hvd1Rvb2xiYXJSZW1vdmU6IHRydWUsXG5cdHNob3dUb29sYmFyRGVsZXRlOiB0cnVlLFxuXHRmb3JjZVN0YXRpY0dpZkltYWdlczogZmFsc2UsXG59O1xuXG4vKipcbiAqIENhcmQgZGF0YSBzdHJ1Y3R1cmUgZm9yIHJlbmRlcmluZ1xuICovXG5leHBvcnQgaW50ZXJmYWNlIENhcmREYXRhIHtcblx0cGF0aDogc3RyaW5nO1xuXHRuYW1lOiBzdHJpbmc7XG5cdHRpdGxlOiBzdHJpbmc7XG5cdHRhZ3M6IHN0cmluZ1tdO1xuXHR5YW1sVGFnczogc3RyaW5nW107XG5cdGN0aW1lOiBudW1iZXI7XG5cdG10aW1lOiBudW1iZXI7XG5cdGZvbGRlclBhdGg6IHN0cmluZztcblx0c25pcHBldD86IHN0cmluZztcblx0aW1hZ2VVcmw/OiBzdHJpbmcgfCBzdHJpbmdbXTtcblx0aGFzSW1hZ2VBdmFpbGFibGU6IGJvb2xlYW47XG5cdHByb3BlcnRpZXM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xufVxuXG4vKipcbiAqIEJ1bGsgb3BlcmF0aW9uIHR5cGVzXG4gKi9cbmV4cG9ydCB0eXBlIEJ1bGtPcGVyYXRpb24gPSBcblx0fCAnc2V0LWRyYWZ0J1xuXHR8ICdwdWJsaXNoJ1xuXHR8ICdtYW5hZ2UtdGFncydcblx0fCAnc2V0LXByb3BlcnR5J1xuXHR8ICdyZW1vdmUtcHJvcGVydHknXG5cdHwgJ2RlbGV0ZSc7XG4iLCAiLyoqXHJcbiAqIEJhc2VzIENNUyBWaWV3XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQmFzZXNWaWV3LCBCYXNlc0VudHJ5LCBRdWVyeUNvbnRyb2xsZXIsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4uL3V0aWxzL2Nzcy1wcm9wcyc7XHJcbmltcG9ydCB0eXBlIEJhc2VzQ01TUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyB0cmFuc2Zvcm1CYXNlc0VudHJpZXMsIHR5cGUgQ2FyZERhdGEsIHR5cGUgQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvZGF0YS10cmFuc2Zvcm0nO1xyXG5pbXBvcnQgeyByZWFkQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvc2V0dGluZ3Mtc2NoZW1hJztcclxuaW1wb3J0IHsgZ2V0Rmlyc3RCYXNlc1Byb3BlcnR5VmFsdWUsIGdldEFsbEJhc2VzSW1hZ2VQcm9wZXJ0eVZhbHVlcyB9IGZyb20gJy4uL3V0aWxzL3Byb3BlcnR5JztcclxuaW1wb3J0IHsgbG9hZFNuaXBwZXRzRm9yRW50cmllcywgbG9hZEltYWdlc0ZvckVudHJpZXMgfSBmcm9tICcuLi9zaGFyZWQvY29udGVudC1sb2FkZXInO1xyXG5pbXBvcnQgeyBTaGFyZWRDYXJkUmVuZGVyZXIgfSBmcm9tICcuL3NoYXJlZC1yZW5kZXJlcic7XHJcbmltcG9ydCB7IEJ1bGtUb29sYmFyIH0gZnJvbSAnLi4vY29tcG9uZW50cy9idWxrLXRvb2xiYXInO1xyXG5pbXBvcnQgeyBzZXR1cE5ld05vdGVJbnRlcmNlcHRvciB9IGZyb20gJy4uL3V0aWxzL25ldy1ub3RlLWludGVyY2VwdG9yJztcclxuaW1wb3J0IHsgUHJvcGVydHlUb2dnbGVIYW5kbGVyIH0gZnJvbSAnLi4vdXRpbHMvcHJvcGVydHktdG9nZ2xlLWhhbmRsZXInO1xyXG5pbXBvcnQgeyBTY3JvbGxMYXlvdXRNYW5hZ2VyIH0gZnJvbSAnLi4vdXRpbHMvc2Nyb2xsLWxheW91dC1tYW5hZ2VyJztcclxuaW1wb3J0IHsgVmlld1N3aXRjaExpc3RlbmVyIH0gZnJvbSAnLi4vdXRpbHMvdmlldy1zd2l0Y2gtbGlzdGVuZXInO1xyXG5pbXBvcnQgeyBjb252ZXJ0R2lmVG9TdGF0aWMgfSBmcm9tICcuLi91dGlscy9pbWFnZSc7XHJcbmltcG9ydCB7IGdldEZpbGVGcm9udG1hdHRlciB9IGZyb20gJy4uL3V0aWxzL2Zyb250bWF0dGVyLWhlbHBlcic7XHJcblxyXG5leHBvcnQgY29uc3QgQ01TX1ZJRVdfVFlQRSA9ICdiYXNlcy1jbXMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJhc2VzQ01TVmlldyBleHRlbmRzIEJhc2VzVmlldyB7XHJcblx0cmVhZG9ubHkgdHlwZSA9IENNU19WSUVXX1RZUEU7XHJcblx0cHJpdmF0ZSBjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBwbHVnaW46IEJhc2VzQ01TUGx1Z2luO1xyXG5cdHByaXZhdGUgc2VsZWN0ZWRGaWxlczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XHJcblx0cHJpdmF0ZSBzbmlwcGV0czogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xyXG5cdHByaXZhdGUgaW1hZ2VzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXT4gPSB7fTtcclxuXHRwcml2YXRlIGhhc0ltYWdlQXZhaWxhYmxlOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IHt9O1xyXG5cdHByaXZhdGUgbWR4RnJvbnRtYXR0ZXJDYWNoZTogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPiA9IHt9O1xyXG5cdHByaXZhdGUgdXBkYXRlTGF5b3V0UmVmOiB7IGN1cnJlbnQ6ICgoKSA9PiB2b2lkKSB8IG51bGwgfSA9IHsgY3VycmVudDogbnVsbCB9O1xyXG5cdHByaXZhdGUgcHJvcGVydHlPYnNlcnZlcnM6IFJlc2l6ZU9ic2VydmVyW10gPSBbXTtcclxuXHRwcml2YXRlIGNhcmRSZW5kZXJlcjogU2hhcmVkQ2FyZFJlbmRlcmVyO1xyXG5cdHByaXZhdGUgYnVsa1Rvb2xiYXI6IEJ1bGtUb29sYmFyIHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBpc1JlZnJlc2hpbmdXaXRoU2VsZWN0aW9uOiBib29sZWFuID0gZmFsc2U7XHJcblx0cHJpdmF0ZSBwcm9wZXJ0eVRvZ2dsZUhhbmRsZXI6IFByb3BlcnR5VG9nZ2xlSGFuZGxlciB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgc2Nyb2xsTGF5b3V0TWFuYWdlcjogU2Nyb2xsTGF5b3V0TWFuYWdlcjtcclxuXHRwcml2YXRlIHZpZXdTd2l0Y2hMaXN0ZW5lcjogVmlld1N3aXRjaExpc3RlbmVyIHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBzZXR0aW5nc1BvbGxJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBsYXN0U2V0dGluZ3M6IFBhcnRpYWw8Q01TU2V0dGluZ3M+IHwgbnVsbCA9IG51bGw7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGNvbnRyb2xsZXI6IFF1ZXJ5Q29udHJvbGxlciwgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IEJhc2VzQ01TUGx1Z2luKSB7XHJcblx0XHRzdXBlcihjb250cm9sbGVyKTtcclxuXHRcdHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0XHJcblx0XHQvLyBJbml0aWFsaXplIHNoYXJlZCBjYXJkIHJlbmRlcmVyIChjb25maWcgd2lsbCBiZSBzZXQgbGF0ZXIgaW4gb25EYXRhVXBkYXRlZClcclxuXHRcdHRoaXMuY2FyZFJlbmRlcmVyID0gbmV3IFNoYXJlZENhcmRSZW5kZXJlcihcclxuXHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdHRoaXMucGx1Z2luLFxyXG5cdFx0XHR0aGlzLnByb3BlcnR5T2JzZXJ2ZXJzLFxyXG5cdFx0XHR0aGlzLnVwZGF0ZUxheW91dFJlZixcclxuXHRcdFx0dW5kZWZpbmVkLCAvLyBDb25maWcgbm90IGF2YWlsYWJsZSBpbiBjb25zdHJ1Y3RvclxyXG5cdFx0XHRjb250cm9sbGVyXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0XHQvLyBBZGQgQ01TIGNvbnRhaW5lciBjbGFzc2VzXHJcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKCdiYXNlcy1jbXMnKTtcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1jb250YWluZXInKTtcclxuXHRcdFxyXG5cdFx0Ly8gSW5pdGlhbGl6ZSBtYW5hZ2VycyB3aXRoIGVycm9yIGhhbmRsaW5nXHJcblx0XHR0cnkge1xyXG5cdFx0dGhpcy5wcm9wZXJ0eVRvZ2dsZUhhbmRsZXIgPSBuZXcgUHJvcGVydHlUb2dnbGVIYW5kbGVyKFxyXG5cdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0dGhpcy5jb25maWcgYXMgeyBnZXQ6IChrZXk6IHN0cmluZykgPT4gdW5rbm93biB9LFxyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncyxcclxuXHRcdFx0KCkgPT4gdGhpcy5vbkRhdGFVcGRhdGVkKClcclxuXHRcdCk7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0dGhpcy5wcm9wZXJ0eVRvZ2dsZUhhbmRsZXIgPSBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdC8vIENoZWNrIGlmIGNvbmZpZyBpcyBhdmFpbGFibGUsIG90aGVyd2lzZSB1c2UgYSBzYWZlIGZhbGxiYWNrXHJcblx0XHRcdGNvbnN0IGNvbmZpZ1RvVXNlID0gKHRoaXMuY29uZmlnICYmIHR5cGVvZiAodGhpcy5jb25maWcgYXMgeyBnZXQ/OiAoa2V5OiBzdHJpbmcpID0+IHVua25vd24gfSkuZ2V0ID09PSAnZnVuY3Rpb24nKVxyXG5cdFx0XHRcdD8gKHRoaXMuY29uZmlnIGFzIHsgZ2V0OiAoa2V5OiBzdHJpbmcpID0+IHVua25vd24gfSlcclxuXHRcdFx0XHQ6IHsgZ2V0OiAoKSA9PiB1bmRlZmluZWQgfTtcclxuXHRcdFx0XHJcblx0XHRcdHRoaXMuc2Nyb2xsTGF5b3V0TWFuYWdlciA9IG5ldyBTY3JvbGxMYXlvdXRNYW5hZ2VyKFxyXG5cdFx0XHRcdHRoaXMuY29udGFpbmVyRWwsXHJcblx0XHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdFx0Y29uZmlnVG9Vc2UsXHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MsXHJcblx0XHRcdFx0KCkgPT4gdGhpcy5vbkRhdGFVcGRhdGVkKCksXHJcblx0XHRcdFx0KGNsZWFudXApID0+IHRoaXMucmVnaXN0ZXIoY2xlYW51cClcclxuXHRcdFx0KTtcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHQvLyBDcmVhdGUgYSBtaW5pbWFsIGZhbGxiYWNrIHdpdGggYSBkdW1teSBjb25maWdcclxuXHRcdFx0Y29uc3QgZHVtbXlDb25maWcgPSB7IGdldDogKCkgPT4gdW5kZWZpbmVkIH07XHJcblx0XHRcdHRoaXMuc2Nyb2xsTGF5b3V0TWFuYWdlciA9IG5ldyBTY3JvbGxMYXlvdXRNYW5hZ2VyKFxyXG5cdFx0XHRcdHRoaXMuY29udGFpbmVyRWwsXHJcblx0XHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdFx0ZHVtbXlDb25maWcsXHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MsXHJcblx0XHRcdFx0KCkgPT4gdGhpcy5vbkRhdGFVcGRhdGVkKCksXHJcblx0XHRcdFx0KGNsZWFudXApID0+IHRoaXMucmVnaXN0ZXIoY2xlYW51cClcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHR0cnkge1xyXG5cdFx0dGhpcy52aWV3U3dpdGNoTGlzdGVuZXIgPSBuZXcgVmlld1N3aXRjaExpc3RlbmVyKFxyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLFxyXG5cdFx0XHR0aGlzLnBsdWdpbixcclxuXHRcdFx0dGhpcy5jb25maWcgYXMgeyBnZXROYW1lPzogKCkgPT4gc3RyaW5nOyBuYW1lPzogc3RyaW5nIH0sXHJcblx0XHRcdCh0aGlzIGFzIHVua25vd24gYXMgeyBjb250cm9sbGVyPzogeyBnZXRCYXNlTmFtZT86ICgpID0+IHN0cmluZzsgYmFzZU5hbWU/OiBzdHJpbmcgfSB9KS5jb250cm9sbGVyLFxyXG5cdFx0XHR0aGlzLmRhdGEgYXMgeyBiYXNlTmFtZT86IHN0cmluZyB9IHwgdW5kZWZpbmVkLFxyXG5cdFx0XHR0aGlzLnNlbGVjdGVkRmlsZXMsXHJcblx0XHRcdCgpID0+IHRoaXMudXBkYXRlU2VsZWN0aW9uVUkoKSxcclxuXHRcdFx0KGNsZWFudXApID0+IHRoaXMucmVnaXN0ZXIoY2xlYW51cClcclxuXHRcdCk7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0dGhpcy52aWV3U3dpdGNoTGlzdGVuZXIgPSBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldHVwIHZpZXcgc3dpdGNoIGxpc3RlbmVyIC0gd3JhcHMgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlXHJcblx0XHRpZiAodGhpcy52aWV3U3dpdGNoTGlzdGVuZXIpIHtcclxuXHRcdGNvbnN0IG9yaWdpbmFsSGFuZGxlU2VsZWN0aW9uQ2hhbmdlID0gdGhpcy5oYW5kbGVTZWxlY3Rpb25DaGFuZ2UuYmluZCh0aGlzKTtcclxuXHRcdHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlID0gdGhpcy52aWV3U3dpdGNoTGlzdGVuZXIuc2V0dXAob3JpZ2luYWxIYW5kbGVTZWxlY3Rpb25DaGFuZ2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHJcblx0b25EYXRhVXBkYXRlZCgpOiB2b2lkIHtcclxuXHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHQvLyBHdWFyZDogd2FpdCBmb3IgZGF0YSB0byBiZSByZWFkeSAtIE5FVkVSIHJldHVybiBlYXJseSBhbmQgbGVhdmUgYmxhbmsgc2NyZWVuXHJcblx0XHRcdFx0aWYgKCF0aGlzLmRhdGEpIHtcclxuXHRcdFx0XHRcdC8vIFNob3cgbG9hZGluZyBzdGF0ZSBpbnN0ZWFkIG9mIGJsYW5rIHNjcmVlblxyXG5cdFx0XHRcdFx0aWYgKHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGxvYWRpbmdFbCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdiYXNlcy1jbXMtbG9hZGluZycpO1xyXG5cdFx0XHRcdFx0XHRsb2FkaW5nRWwuc2V0VGV4dCgnTG9hZGluZy4uLicpO1xyXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhsb2FkaW5nRWwsIHtcclxuXHRcdFx0XHRcdFx0XHRwYWRkaW5nOiAnMjBweCcsXHJcblx0XHRcdFx0XHRcdFx0dGV4dEFsaWduOiAnY2VudGVyJ1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIFJldHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXlcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5kYXRhKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5vbkRhdGFVcGRhdGVkKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0sIDEwMCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBFbnN1cmUgd2UgaGF2ZSB2YWxpZCBkYXRhIHN0cnVjdHVyZXNcclxuXHRcdFx0XHRpZiAoIXRoaXMuZGF0YS5ncm91cGVkRGF0YSB8fCAhdGhpcy5kYXRhLmRhdGEpIHtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5kYXRhICYmIHRoaXMuZGF0YS5ncm91cGVkRGF0YSAmJiB0aGlzLmRhdGEuZGF0YSkge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMub25EYXRhVXBkYXRlZCgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9LCAxMDApO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IGdyb3VwZWREYXRhID0gdGhpcy5kYXRhLmdyb3VwZWREYXRhO1xyXG5cdFx0XHRjb25zdCBhbGxFbnRyaWVzID0gdGhpcy5kYXRhLmRhdGE7XHJcblxyXG5cdFx0XHQvLyBSZWFkIHNldHRpbmdzIGZyb20gQmFzZXMgY29uZmlnXHJcblx0XHRcdGNvbnN0IHNldHRpbmdzID0gcmVhZENNU1NldHRpbmdzKFxyXG5cdFx0XHRcdHRoaXMuY29uZmlnLFxyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHQvLyBVcGRhdGUgY29uZmlnIHJlZmVyZW5jZSBpbiBzY3JvbGwgbGF5b3V0IG1hbmFnZXIgaWYgaXQncyBub3cgYXZhaWxhYmxlXHJcblx0XHRcdGlmICh0aGlzLmNvbmZpZyAmJiB0eXBlb2YgKHRoaXMuY29uZmlnIGFzIHsgZ2V0PzogKGtleTogc3RyaW5nKSA9PiB1bmtub3duIH0pLmdldCA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHR0aGlzLnNjcm9sbExheW91dE1hbmFnZXIudXBkYXRlQ29uZmlnKHRoaXMuY29uZmlnIGFzIHsgZ2V0OiAoa2V5OiBzdHJpbmcpID0+IHVua25vd24gfSk7XHJcblx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHQvLyBJZ25vcmUgLSBjb25maWcgdXBkYXRlIGlzIG9wdGlvbmFsXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBVcGRhdGUgZ3JpZCBsYXlvdXQgdXNpbmcgc2Nyb2xsIGxheW91dCBtYW5hZ2VyXHJcblx0XHRcdHRoaXMuc2Nyb2xsTGF5b3V0TWFuYWdlci51cGRhdGVHcmlkTGF5b3V0KHNldHRpbmdzKTtcclxuXHJcblx0XHRcdC8vIFNhdmUgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSByZS1yZW5kZXJpbmdcclxuXHRcdFx0Y29uc3Qgc2F2ZWRTY3JvbGxUb3AgPSB0aGlzLmNvbnRhaW5lckVsLnNjcm9sbFRvcDtcclxuXHJcblx0XHRcdC8vIEdldCBzb3J0IG1ldGhvZFxyXG5cdFx0XHRjb25zdCBzb3J0TWV0aG9kID0gdGhpcy5nZXRTb3J0TWV0aG9kKCk7XHJcblxyXG5cdFx0XHQvLyBQcm9jZXNzIGdyb3Vwc1xyXG5cdFx0XHRjb25zdCBwcm9jZXNzZWRHcm91cHMgPSBncm91cGVkRGF0YS5tYXAoZ3JvdXAgPT4gKHtcclxuXHRcdFx0XHRncm91cCxcclxuXHRcdFx0XHRlbnRyaWVzOiBbLi4uZ3JvdXAuZW50cmllc11cclxuXHRcdFx0fSkpO1xyXG5cclxuXHRcdFx0Ly8gQ29sbGVjdCB2aXNpYmxlIGVudHJpZXMgYWNyb3NzIGFsbCBncm91cHMgKHVwIHRvIGRpc3BsYXllZENvdW50KVxyXG5cdFx0XHRjb25zdCB2aXNpYmxlRW50cmllczogQmFzZXNFbnRyeVtdID0gW107XHJcblx0XHRcdGxldCByZW1haW5pbmdDb3VudCA9IHRoaXMuc2Nyb2xsTGF5b3V0TWFuYWdlci5nZXREaXNwbGF5ZWRDb3VudCgpO1xyXG5cclxuXHRcdFx0Zm9yIChjb25zdCBwcm9jZXNzZWRHcm91cCBvZiBwcm9jZXNzZWRHcm91cHMpIHtcclxuXHRcdFx0XHRpZiAocmVtYWluaW5nQ291bnQgPD0gMCkgYnJlYWs7XHJcblx0XHRcdFx0Y29uc3QgZW50cmllc1RvVGFrZSA9IE1hdGgubWluKHByb2Nlc3NlZEdyb3VwLmVudHJpZXMubGVuZ3RoLCByZW1haW5pbmdDb3VudCk7XHJcblx0XHRcdFx0dmlzaWJsZUVudHJpZXMucHVzaCguLi5wcm9jZXNzZWRHcm91cC5lbnRyaWVzLnNsaWNlKDAsIGVudHJpZXNUb1Rha2UpKTtcclxuXHRcdFx0XHRyZW1haW5pbmdDb3VudCAtPSBlbnRyaWVzVG9UYWtlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBMb2FkIHNuaXBwZXRzIGFuZCBpbWFnZXMgT05MWSBmb3IgZGlzcGxheWVkIGVudHJpZXNcclxuXHRcdFx0YXdhaXQgdGhpcy5sb2FkQ29udGVudEZvckVudHJpZXModmlzaWJsZUVudHJpZXMsIHNldHRpbmdzKTtcclxuXHJcblx0XHRcdC8vIFNldCB1cCBpbnRlcmNlcHRvciBvbmNlIGNvbmZpZyBpcyBhdmFpbGFibGUgKG9ubHkgb24gZmlyc3QgY2FsbClcclxuXHRcdFx0aWYgKHRoaXMuY29uZmlnICYmICEodGhpcy5jb250YWluZXJFbCBhcyB1bmtub3duIGFzIHsgX19jbXNJbnRlcmNlcHRvclNldHVwPzogYm9vbGVhbiB9KS5fX2Ntc0ludGVyY2VwdG9yU2V0dXApIHtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0KHRoaXMuY29udGFpbmVyRWwgYXMgdW5rbm93biBhcyB7IF9fY21zSW50ZXJjZXB0b3JTZXR1cD86IGJvb2xlYW4gfSkuX19jbXNJbnRlcmNlcHRvclNldHVwID0gdHJ1ZTtcclxuXHRcdFx0XHRcdGNvbnN0IGNvbnRhaW5lcldpdGhDb25maWcgPSB0aGlzLmNvbnRhaW5lckVsIGFzIHVua25vd24gYXMgeyBcclxuXHRcdFx0XHRcdFx0X19jbXNDb25maWc/OiB7IGdldDogKGtleTogc3RyaW5nKSA9PiB1bmtub3duIH07XHJcblx0XHRcdFx0XHRcdF9fY21zVmlldz86IEJhc2VzQ01TVmlldztcclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRjb250YWluZXJXaXRoQ29uZmlnLl9fY21zQ29uZmlnID0gdGhpcy5jb25maWc7XHJcblx0XHRcdFx0XHRjb250YWluZXJXaXRoQ29uZmlnLl9fY21zVmlldyA9IHRoaXM7XHJcblx0XHRcdFx0XHRzZXR1cE5ld05vdGVJbnRlcmNlcHRvcihcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0XHRcdFx0dGhpcy5jb250YWluZXJFbCxcclxuXHRcdFx0XHRcdFx0dGhpcy5jb25maWcsXHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLFxyXG5cdFx0XHRcdFx0XHQoY2xlYW51cCkgPT4gdGhpcy5yZWdpc3RlcihjbGVhbnVwKVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdC8vIEZhaWxlZCB0byBzZXR1cCBpbnRlcmNlcHRvciAtIGNvbnRpbnVlIGFueXdheVxyXG5cdFx0XHRcdFx0KHRoaXMuY29udGFpbmVyRWwgYXMgdW5rbm93biBhcyB7IF9fY21zSW50ZXJjZXB0b3JTZXR1cD86IGJvb2xlYW4gfSkuX19jbXNJbnRlcmNlcHRvclNldHVwID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFVwZGF0ZSBjYXJkIHJlbmRlcmVyIHdpdGggY29uZmlnIChub3cgYXZhaWxhYmxlKVxyXG5cdFx0XHQodGhpcy5jYXJkUmVuZGVyZXIgYXMgdW5rbm93biBhcyB7IGJhc2VzQ29uZmlnPzogeyBnZXQ/OiAoa2V5OiBzdHJpbmcpID0+IHVua25vd24gfSB9KS5iYXNlc0NvbmZpZyA9IHRoaXMuY29uZmlnO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gVXBkYXRlIGNhcmQgcmVuZGVyZXIgd2l0aCBNRFggZnJvbnRtYXR0ZXIgY2FjaGUgZm9yIHN5bmNocm9ub3VzIHJlbmRlcmluZ1xyXG5cdFx0XHRpZiAodGhpcy5jYXJkUmVuZGVyZXIgJiYgdHlwZW9mICh0aGlzLmNhcmRSZW5kZXJlciBhcyB7IHNldE1keEZyb250bWF0dGVyQ2FjaGU/OiAoY2FjaGU6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbD4pID0+IHZvaWQgfSkuc2V0TWR4RnJvbnRtYXR0ZXJDYWNoZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdCh0aGlzLmNhcmRSZW5kZXJlciBhcyB7IHNldE1keEZyb250bWF0dGVyQ2FjaGU6IChjYWNoZTogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPikgPT4gdm9pZCB9KS5zZXRNZHhGcm9udG1hdHRlckNhY2hlKHRoaXMubWR4RnJvbnRtYXR0ZXJDYWNoZSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENsZWFyIGFuZCByZS1yZW5kZXIgYWZ0ZXIgY29udGVudCBpcyBsb2FkZWRcclxuXHRcdFx0dGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdFx0Ly8gQ2xlYXIgTURYIGZyb250bWF0dGVyIGNhY2hlIHdoZW4gcmUtcmVuZGVyaW5nXHJcblx0XHRcdHRoaXMubWR4RnJvbnRtYXR0ZXJDYWNoZSA9IHt9O1xyXG5cclxuXHRcdFx0Ly8gRGlzY29ubmVjdCBvbGQgcHJvcGVydHkgb2JzZXJ2ZXJzIGJlZm9yZSByZS1yZW5kZXJpbmdcclxuXHRcdFx0dGhpcy5wcm9wZXJ0eU9ic2VydmVycy5mb3JFYWNoKG9icyA9PiBvYnMuZGlzY29ubmVjdCgpKTtcclxuXHRcdFx0dGhpcy5wcm9wZXJ0eU9ic2VydmVycyA9IFtdO1xyXG5cclxuXHRcdFx0Ly8gQ3JlYXRlIGNhcmRzIGZlZWQgY29udGFpbmVyXHJcblx0XHRcdGNvbnN0IGZlZWRFbCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdiYXNlcy1jbXMtZ3JpZCcpO1xyXG5cclxuXHRcdFx0Ly8gUmVuZGVyIGdyb3VwcyB3aXRoIGhlYWRlcnNcclxuXHRcdFx0bGV0IGRpc3BsYXllZFNvRmFyID0gMDtcclxuXHRcdFx0XHJcblx0XHRcdGxldCB0b3RhbENhcmRzUmVuZGVyZWQgPSAwO1xyXG5cdFx0XHRcclxuXHRcdFx0Zm9yIChjb25zdCBwcm9jZXNzZWRHcm91cCBvZiBwcm9jZXNzZWRHcm91cHMpIHtcclxuXHRcdFx0XHRpZiAoZGlzcGxheWVkU29GYXIgPj0gdGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyLmdldERpc3BsYXllZENvdW50KCkpIGJyZWFrO1xyXG5cclxuXHRcdFx0XHRjb25zdCBlbnRyaWVzVG9EaXNwbGF5ID0gTWF0aC5taW4ocHJvY2Vzc2VkR3JvdXAuZW50cmllcy5sZW5ndGgsIHRoaXMuc2Nyb2xsTGF5b3V0TWFuYWdlci5nZXREaXNwbGF5ZWRDb3VudCgpIC0gZGlzcGxheWVkU29GYXIpO1xyXG5cdFx0XHRcdGlmIChlbnRyaWVzVG9EaXNwbGF5ID09PSAwKSBjb250aW51ZTtcclxuXHJcblx0XHRcdFx0Y29uc3QgZ3JvdXBFbnRyaWVzID0gcHJvY2Vzc2VkR3JvdXAuZW50cmllcy5zbGljZSgwLCBlbnRyaWVzVG9EaXNwbGF5KTtcclxuXHJcblx0XHRcdFx0Ly8gQ3JlYXRlIGdyb3VwIGNvbnRhaW5lclxyXG5cdFx0XHRcdGNvbnN0IGdyb3VwRWwgPSBmZWVkRWwuY3JlYXRlRGl2KCdiYXNlcy1jbXMtZ3JvdXAnKTtcclxuXHJcblx0XHRcdFx0Ly8gUmVuZGVyIGdyb3VwIGhlYWRlciBpZiBrZXkgZXhpc3RzXHJcblx0XHRcdFx0aWYgKHByb2Nlc3NlZEdyb3VwLmdyb3VwLmhhc0tleSgpKSB7XHJcblx0XHRcdFx0XHRjb25zdCBoZWFkZXJFbCA9IGdyb3VwRWwuY3JlYXRlRGl2KCdiYXNlcy1jbXMtZ3JvdXAtaGVhZGluZycpO1xyXG5cdFx0XHRcdFx0Y29uc3QgdmFsdWVFbCA9IGhlYWRlckVsLmNyZWF0ZURpdignYmFzZXMtY21zLWdyb3VwLXZhbHVlJyk7XHJcblx0XHRcdFx0XHRjb25zdCBrZXlWYWx1ZSA9IHByb2Nlc3NlZEdyb3VwLmdyb3VwLmtleT8udG9TdHJpbmcoKSB8fCAnJztcclxuXHRcdFx0XHRcdHZhbHVlRWwuc2V0VGV4dChrZXlWYWx1ZSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBSZW5kZXIgY2FyZHMgaW4gdGhpcyBncm91cFxyXG5cdFx0XHRcdGNvbnN0IGNhcmRzID0gYXdhaXQgdHJhbnNmb3JtQmFzZXNFbnRyaWVzKFxyXG5cdFx0XHRcdFx0Z3JvdXBFbnRyaWVzLFxyXG5cdFx0XHRcdFx0c2V0dGluZ3MsXHJcblx0XHRcdFx0XHRzb3J0TWV0aG9kLFxyXG5cdFx0XHRcdFx0ZmFsc2UsXHJcblx0XHRcdFx0XHR0aGlzLnNuaXBwZXRzLFxyXG5cdFx0XHRcdFx0dGhpcy5pbWFnZXMsXHJcblx0XHRcdFx0XHR0aGlzLmhhc0ltYWdlQXZhaWxhYmxlLFxyXG5cdFx0XHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdFx0XHR0aGlzLm1keEZyb250bWF0dGVyQ2FjaGVcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNhcmRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRjb25zdCBjYXJkID0gY2FyZHNbaV07XHJcblx0XHRcdFx0XHRjb25zdCBlbnRyeSA9IGdyb3VwRW50cmllc1tpXTtcclxuXHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ2FyZChncm91cEVsLCBjYXJkLCBlbnRyeSwgZGlzcGxheWVkU29GYXIgKyBpLCBzZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdHRvdGFsQ2FyZHNSZW5kZXJlZCsrO1xyXG5cdFx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHRcdC8vIENvbnRpbnVlIHJlbmRlcmluZyBvdGhlciBjYXJkcyBldmVuIGlmIG9uZSBmYWlsc1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZGlzcGxheWVkU29GYXIgKz0gZW50cmllc1RvRGlzcGxheTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ1JJVElDQUw6IElmIG5vIGNhcmRzIHdlcmUgcmVuZGVyZWQsIHNob3cgZXJyb3IgaW5zdGVhZCBvZiBibGFuayBzY3JlZW5cclxuXHRcdFx0aWYgKHRvdGFsQ2FyZHNSZW5kZXJlZCA9PT0gMCAmJiBhbGxFbnRyaWVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ05vIGNhcmRzIHdlcmUgcmVuZGVyZWQgZGVzcGl0ZSBoYXZpbmcgZW50cmllcy4gQ2hlY2sgY2FyZCByZW5kZXJpbmcgbG9naWMuJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIEltYWdlcyBhcmUgbm93IHNldCB2aWEgYmFja2dyb3VuZC1pbWFnZSBpbiByZW5kZXJDYXJkLCBzbyBubyBiYXRjaCBsb2FkaW5nIG5lZWRlZFxyXG5cdFx0XHQvLyBJbWFnZXMgd2lsbCBiZSB1cGRhdGVkIGJ5IHVwZGF0ZUNhcmRJbWFnZSB3aGVuIHRoZXkgbG9hZFxyXG5cclxuXHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyaW5nXHJcblx0XHRcdGlmIChzYXZlZFNjcm9sbFRvcCA+IDApIHtcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW5lckVsLnNjcm9sbFRvcCA9IHNhdmVkU2Nyb2xsVG9wO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTZXR1cCBpbmZpbml0ZSBzY3JvbGwgYW5kIHJlc2l6ZSBvYnNlcnZlclxyXG5cdFx0XHR0aGlzLnNjcm9sbExheW91dE1hbmFnZXIuc2V0dXBJbmZpbml0ZVNjcm9sbChhbGxFbnRyaWVzLmxlbmd0aCk7XHJcblx0XHRcdHRoaXMuc2Nyb2xsTGF5b3V0TWFuYWdlci5zZXR1cFJlc2l6ZU9ic2VydmVyKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBTZXR1cCBzZXR0aW5ncyBwb2xsaW5nIHRvIGRldGVjdCBjaGFuZ2VzIGFuZCByZWZyZXNoIHZpZXdcclxuXHRcdFx0dGhpcy5zZXR1cFNldHRpbmdzUG9sbGluZyhzZXR0aW5ncyk7XHJcblxyXG5cdFx0XHQvLyBVcGRhdGUgc2VsZWN0aW9uIFVJXHJcblx0XHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uVUkoKTtcclxuXHJcblx0XHRcdFx0Ly8gQ2xlYXIgbG9hZGluZyBmbGFnIGFmdGVyIGFzeW5jIHdvcmsgY29tcGxldGVzXHJcblx0XHRcdFx0dGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyLnNldElzTG9hZGluZyhmYWxzZSk7XHJcblx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdC8vIEVuc3VyZSBsb2FkaW5nIGZsYWcgaXMgY2xlYXJlZCBldmVuIG9uIGVycm9yXHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdHRoaXMuc2Nyb2xsTGF5b3V0TWFuYWdlci5zZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG5cdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0Ly8gSWdub3JlIGNsZWFudXAgZXJyb3JzXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIElmIGNvbnRhaW5lciBpcyBlbXB0eSBkdWUgdG8gZXJyb3IsIHNob3cgZXJyb3IgbWVzc2FnZVxyXG5cdFx0XHRcdGlmICh0aGlzLmNvbnRhaW5lckVsICYmIHRoaXMuY29udGFpbmVyRWwuaXNDb25uZWN0ZWQpIHtcclxuXHRcdFx0XHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdFx0XHRcdGNvbnN0IGVycm9yRWwgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdignYmFzZXMtY21zLWVycm9yJyk7XHJcblx0XHRcdFx0XHRlcnJvckVsLnNldFRleHQoJ0Vycm9yIGxvYWRpbmcgdmlldy4gQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcclxuXHRcdFx0XHRcdHNldENzc1Byb3BzKGVycm9yRWwsIHtcclxuXHRcdFx0XHRcdFx0cGFkZGluZzogJzIwcHgnLFxyXG5cdFx0XHRcdFx0XHR0ZXh0QWxpZ246ICdjZW50ZXInLFxyXG5cdFx0XHRcdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtZXJyb3IpJyxcclxuXHRcdFx0XHRcdFx0bWFyZ2luOiAnMjBweCdcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSkoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHVwIHBvbGxpbmcgdG8gZGV0ZWN0IHNldHRpbmdzIGNoYW5nZXMgYW5kIHJlZnJlc2ggdmlld1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgc2V0dXBTZXR0aW5nc1BvbGxpbmcoaW5pdGlhbFNldHRpbmdzOiBDTVNTZXR0aW5ncyk6IHZvaWQge1xyXG5cdFx0Ly8gT25seSBzZXQgdXAgb25jZVxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3NQb2xsSW50ZXJ2YWwgIT09IG51bGwpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFN0b3JlIGluaXRpYWwgc2V0dGluZ3MgZm9yIGNvbXBhcmlzb25cclxuXHRcdHRoaXMubGFzdFNldHRpbmdzID0ge1xyXG5cdFx0XHRkZXNjcmlwdGlvblByb3BlcnR5OiBpbml0aWFsU2V0dGluZ3MuZGVzY3JpcHRpb25Qcm9wZXJ0eSxcclxuXHRcdFx0c2hvd1RleHRQcmV2aWV3OiBpbml0aWFsU2V0dGluZ3Muc2hvd1RleHRQcmV2aWV3LFxyXG5cdFx0XHRmYWxsYmFja1RvQ29udGVudDogaW5pdGlhbFNldHRpbmdzLmZhbGxiYWNrVG9Db250ZW50LFxyXG5cdFx0XHR0cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eTogaW5pdGlhbFNldHRpbmdzLnRydW5jYXRlUHJldmlld1Byb3BlcnR5LFxyXG5cdFx0XHRpbWFnZVByb3BlcnR5OiBpbml0aWFsU2V0dGluZ3MuaW1hZ2VQcm9wZXJ0eSxcclxuXHRcdFx0aW1hZ2VGb3JtYXQ6IGluaXRpYWxTZXR0aW5ncy5pbWFnZUZvcm1hdCxcclxuXHRcdFx0ZmFsbGJhY2tUb0VtYmVkczogaW5pdGlhbFNldHRpbmdzLmZhbGxiYWNrVG9FbWJlZHMsXHJcblx0XHRcdHByb3BlcnR5RGlzcGxheTE6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxLFxyXG5cdFx0XHRwcm9wZXJ0eURpc3BsYXkyOiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MixcclxuXHRcdFx0cHJvcGVydHlEaXNwbGF5MzogaW5pdGlhbFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTMsXHJcblx0XHRcdHByb3BlcnR5RGlzcGxheTQ6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk0LFxyXG5cdFx0XHRwcm9wZXJ0eURpc3BsYXk1OiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NSxcclxuXHRcdFx0cHJvcGVydHlEaXNwbGF5NjogaW5pdGlhbFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTYsXHJcblx0XHRcdHByb3BlcnR5RGlzcGxheTc6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk3LFxyXG5cdFx0XHRwcm9wZXJ0eURpc3BsYXk4OiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OCxcclxuXHRcdFx0cHJvcGVydHlEaXNwbGF5OTogaW5pdGlhbFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTksXHJcblx0XHRcdHByb3BlcnR5RGlzcGxheTEwOiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTAsXHJcblx0XHRcdHByb3BlcnR5RGlzcGxheTExOiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTEsXHJcblx0XHRcdHByb3BlcnR5RGlzcGxheTEyOiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTIsXHJcblx0XHRcdHByb3BlcnR5RGlzcGxheTEzOiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTMsXHJcblx0XHRcdHByb3BlcnR5RGlzcGxheTE0OiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTQsXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFBvbGwgZXZlcnkgMTAwbXMgdG8gY2hlY2sgZm9yIHNldHRpbmdzIGNoYW5nZXNcclxuXHRcdHRoaXMuc2V0dGluZ3NQb2xsSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHRpZiAoIXRoaXMuY29uZmlnIHx8IHR5cGVvZiB0aGlzLmNvbmZpZy5nZXQgIT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRyZXR1cm47IC8vIENvbmZpZyBub3QgcmVhZHkgeWV0XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IHJlYWRDTVNTZXR0aW5ncyhcclxuXHRcdFx0XHR0aGlzLmNvbmZpZyxcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc1xyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0Ly8gU2tpcCBpZiBsYXN0U2V0dGluZ3MgaXMgbm90IGluaXRpYWxpemVkIHlldFxyXG5cdFx0XHRpZiAoIXRoaXMubGFzdFNldHRpbmdzKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiBhbnkgcmVsZXZhbnQgc2V0dGluZ3MgaGF2ZSBjaGFuZ2VkXHJcblx0XHRcdGNvbnN0IHNldHRpbmdzQ2hhbmdlZCA9IFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHkgIT09IGN1cnJlbnRTZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5IHx8XHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3Muc2hvd1RleHRQcmV2aWV3ICE9PSBjdXJyZW50U2V0dGluZ3Muc2hvd1RleHRQcmV2aWV3IHx8XHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MuZmFsbGJhY2tUb0NvbnRlbnQgIT09IGN1cnJlbnRTZXR0aW5ncy5mYWxsYmFja1RvQ29udGVudCB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLnRydW5jYXRlUHJldmlld1Byb3BlcnR5ICE9PSBjdXJyZW50U2V0dGluZ3MudHJ1bmNhdGVQcmV2aWV3UHJvcGVydHkgfHxcclxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5pbWFnZVByb3BlcnR5ICE9PSBjdXJyZW50U2V0dGluZ3MuaW1hZ2VQcm9wZXJ0eSB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLmltYWdlRm9ybWF0ICE9PSBjdXJyZW50U2V0dGluZ3MuaW1hZ2VGb3JtYXQgfHxcclxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5mYWxsYmFja1RvRW1iZWRzICE9PSBjdXJyZW50U2V0dGluZ3MuZmFsbGJhY2tUb0VtYmVkcyB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEgIT09IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxIHx8XHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MiAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTIgfHxcclxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkzICE9PSBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MyB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTQgIT09IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk0IHx8XHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NSAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTUgfHxcclxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk2ICE9PSBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NiB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTcgIT09IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk3IHx8XHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OCAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTggfHxcclxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk5ICE9PSBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OSB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEwICE9PSBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTAgfHxcclxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMSAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTExIHx8XHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTIgIT09IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMiB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEzICE9PSBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTMgfHxcclxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxNCAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTE0O1xyXG5cclxuXHRcdFx0aWYgKHNldHRpbmdzQ2hhbmdlZCkge1xyXG5cdFx0XHRcdC8vIENsZWFyIGNhY2hlcyB3aGVuIHJlbGV2YW50IHNldHRpbmdzIGNoYW5nZVxyXG5cdFx0XHRcdGlmICh0aGlzLmxhc3RTZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5ICE9PSBjdXJyZW50U2V0dGluZ3MuZGVzY3JpcHRpb25Qcm9wZXJ0eSB8fFxyXG5cdFx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3Muc2hvd1RleHRQcmV2aWV3ICE9PSBjdXJyZW50U2V0dGluZ3Muc2hvd1RleHRQcmV2aWV3IHx8XHJcblx0XHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5mYWxsYmFja1RvQ29udGVudCAhPT0gY3VycmVudFNldHRpbmdzLmZhbGxiYWNrVG9Db250ZW50IHx8XHJcblx0XHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy50cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eSAhPT0gY3VycmVudFNldHRpbmdzLnRydW5jYXRlUHJldmlld1Byb3BlcnR5KSB7XHJcblx0XHRcdFx0XHQvLyBDbGVhciBzbmlwcGV0IGNhY2hlIHdoZW4gdGV4dCBwcmV2aWV3IHNldHRpbmdzIGNoYW5nZVxyXG5cdFx0XHRcdFx0dGhpcy5zbmlwcGV0cyA9IHt9O1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKHRoaXMubGFzdFNldHRpbmdzLmltYWdlUHJvcGVydHkgIT09IGN1cnJlbnRTZXR0aW5ncy5pbWFnZVByb3BlcnR5IHx8XHJcblx0XHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5pbWFnZUZvcm1hdCAhPT0gY3VycmVudFNldHRpbmdzLmltYWdlRm9ybWF0IHx8XHJcblx0XHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5mYWxsYmFja1RvRW1iZWRzICE9PSBjdXJyZW50U2V0dGluZ3MuZmFsbGJhY2tUb0VtYmVkcykge1xyXG5cdFx0XHRcdFx0Ly8gQ2xlYXIgaW1hZ2UgY2FjaGUgd2hlbiBpbWFnZSBzZXR0aW5ncyBjaGFuZ2VcclxuXHRcdFx0XHRcdHRoaXMuaW1hZ2VzID0ge307XHJcblx0XHRcdFx0XHR0aGlzLmhhc0ltYWdlQXZhaWxhYmxlID0ge307XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBVcGRhdGUgbGFzdCBzZXR0aW5nc1xyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzID0ge1xyXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb25Qcm9wZXJ0eTogY3VycmVudFNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHksXHJcblx0XHRcdFx0XHRzaG93VGV4dFByZXZpZXc6IGN1cnJlbnRTZXR0aW5ncy5zaG93VGV4dFByZXZpZXcsXHJcblx0XHRcdFx0XHRmYWxsYmFja1RvQ29udGVudDogY3VycmVudFNldHRpbmdzLmZhbGxiYWNrVG9Db250ZW50LFxyXG5cdFx0XHRcdFx0dHJ1bmNhdGVQcmV2aWV3UHJvcGVydHk6IGN1cnJlbnRTZXR0aW5ncy50cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eSxcclxuXHRcdFx0XHRcdGltYWdlUHJvcGVydHk6IGN1cnJlbnRTZXR0aW5ncy5pbWFnZVByb3BlcnR5LFxyXG5cdFx0XHRcdFx0aW1hZ2VGb3JtYXQ6IGN1cnJlbnRTZXR0aW5ncy5pbWFnZUZvcm1hdCxcclxuXHRcdFx0XHRcdGZhbGxiYWNrVG9FbWJlZHM6IGN1cnJlbnRTZXR0aW5ncy5mYWxsYmFja1RvRW1iZWRzLFxyXG5cdFx0XHRcdFx0cHJvcGVydHlEaXNwbGF5MTogY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEsXHJcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXkyOiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MixcclxuXHRcdFx0XHRcdHByb3BlcnR5RGlzcGxheTM6IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkzLFxyXG5cdFx0XHRcdFx0cHJvcGVydHlEaXNwbGF5NDogY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTQsXHJcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXk1OiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NSxcclxuXHRcdFx0XHRcdHByb3BlcnR5RGlzcGxheTY6IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk2LFxyXG5cdFx0XHRcdFx0cHJvcGVydHlEaXNwbGF5NzogY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTcsXHJcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXk4OiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OCxcclxuXHRcdFx0XHRcdHByb3BlcnR5RGlzcGxheTk6IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk5LFxyXG5cdFx0XHRcdFx0cHJvcGVydHlEaXNwbGF5MTA6IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMCxcclxuXHRcdFx0XHRcdHByb3BlcnR5RGlzcGxheTExOiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTEsXHJcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXkxMjogY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEyLFxyXG5cdFx0XHRcdFx0cHJvcGVydHlEaXNwbGF5MTM6IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMyxcclxuXHRcdFx0XHRcdHByb3BlcnR5RGlzcGxheTE0OiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTQsXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0Ly8gVHJpZ2dlciB2aWV3IHJlZnJlc2hcclxuXHRcdFx0XHR0aGlzLm9uRGF0YVVwZGF0ZWQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgMTAwKTtcclxuXHJcblx0XHQvLyBSZWdpc3RlciBjbGVhbnVwXHJcblx0XHR0aGlzLnJlZ2lzdGVyKCgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3NQb2xsSW50ZXJ2YWwgIT09IG51bGwpIHtcclxuXHRcdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnNldHRpbmdzUG9sbEludGVydmFsKTtcclxuXHRcdFx0XHR0aGlzLnNldHRpbmdzUG9sbEludGVydmFsID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBQcmVsb2FkIE1EWCBmcm9udG1hdHRlciBmb3IgYWxsIHZpc2libGUgZW50cmllcyB0byBwcmV2ZW50IGZsYXNoaW5nXHJcblx0ICogVGhpcyBlbnN1cmVzIGFsbCBNRFggZGF0YSBpcyBhdmFpbGFibGUgc3luY2hyb25vdXNseSBkdXJpbmcgY2FyZCB0cmFuc2Zvcm1hdGlvblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgcHJlbG9hZE1keEZyb250bWF0dGVyKGVudHJpZXM6IEJhc2VzRW50cnlbXSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gRmlsdGVyIHRvIG9ubHkgTURYIGZpbGVzIHRoYXQgYXJlbid0IGFscmVhZHkgY2FjaGVkXHJcblx0XHRjb25zdCBtZHhFbnRyaWVzID0gZW50cmllcy5maWx0ZXIoZW50cnkgPT4ge1xyXG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XHJcblx0XHRcdHJldHVybiBmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnICYmICEoZW50cnkuZmlsZS5wYXRoIGluIHRoaXMubWR4RnJvbnRtYXR0ZXJDYWNoZSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAobWR4RW50cmllcy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIExvYWQgYWxsIE1EWCBmcm9udG1hdHRlciBpbiBwYXJhbGxlbFxyXG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwoXHJcblx0XHRcdG1keEVudHJpZXMubWFwKGFzeW5jIChlbnRyeSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcih0aGlzLmFwcCwgZmlsZSk7XHJcblx0XHRcdFx0XHRcdHRoaXMubWR4RnJvbnRtYXR0ZXJDYWNoZVtlbnRyeS5maWxlLnBhdGhdID0gZnJvbnRtYXR0ZXI7XHJcblx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGBCYXNlcyBDTVM6IEVycm9yIHByZWxvYWRpbmcgZnJvbnRtYXR0ZXIgZm9yICR7ZW50cnkuZmlsZS5wYXRofTpgLCBlcnJvcik7XHJcblx0XHRcdFx0XHRcdHRoaXMubWR4RnJvbnRtYXR0ZXJDYWNoZVtlbnRyeS5maWxlLnBhdGhdID0gbnVsbDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBsb2FkQ29udGVudEZvckVudHJpZXMoXHJcblx0XHRlbnRyaWVzOiBCYXNlc0VudHJ5W10sXHJcblx0XHRzZXR0aW5nczogQ01TU2V0dGluZ3NcclxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdC8vIExvYWQgc25pcHBldHMgZm9yIHRleHQgcHJldmlld1xyXG5cdFx0aWYgKHNldHRpbmdzLnNob3dUZXh0UHJldmlldykge1xyXG5cdFx0XHRjb25zdCBzbmlwcGV0RW50cmllc1Byb21pc2VzID0gZW50cmllc1xyXG5cdFx0XHRcdC5maWx0ZXIoZW50cnkgPT4gIShlbnRyeS5maWxlLnBhdGggaW4gdGhpcy5zbmlwcGV0cykpXHJcblx0XHRcdFx0Lm1hcChhc3luYyBlbnRyeSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm4gbnVsbDtcclxuXHRcdFx0XHRcdGNvbnN0IGRlc2NWYWx1ZSA9IGF3YWl0IGdldEZpcnN0QmFzZXNQcm9wZXJ0eVZhbHVlKGVudHJ5LCBzZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5LCB0aGlzLmFwcCkgYXMgeyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcclxuXHRcdFx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHRcdHBhdGg6IGVudHJ5LmZpbGUucGF0aCxcclxuXHRcdFx0XHRcdFx0ZmlsZSxcclxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb25EYXRhOiBkZXNjVmFsdWU/LmRhdGFcclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdGNvbnN0IHNuaXBwZXRFbnRyaWVzID0gKGF3YWl0IFByb21pc2UuYWxsKHNuaXBwZXRFbnRyaWVzUHJvbWlzZXMpKVxyXG5cdFx0XHRcdC5maWx0ZXIoKGUpOiBlIGlzIHsgcGF0aDogc3RyaW5nOyBmaWxlOiBURmlsZTsgZGVzY3JpcHRpb25EYXRhOiB1bmtub3duIH0gPT4gZSAhPT0gbnVsbCk7XHJcblxyXG5cdFx0XHRpZiAoc25pcHBldEVudHJpZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdGF3YWl0IGxvYWRTbmlwcGV0c0ZvckVudHJpZXMoXHJcblx0XHRcdFx0XHRzbmlwcGV0RW50cmllcyxcclxuXHRcdFx0XHRcdHNldHRpbmdzLmZhbGxiYWNrVG9Db250ZW50LFxyXG5cdFx0XHRcdFx0ZmFsc2UsXHJcblx0XHRcdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0XHRcdHRoaXMuc25pcHBldHMsXHJcblx0XHRcdFx0XHRzZXR0aW5ncy50cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBMb2FkIGltYWdlcyBmb3IgdGh1bWJuYWlsc1xyXG5cdFx0aWYgKHNldHRpbmdzLmltYWdlRm9ybWF0ICE9PSAnbm9uZScpIHtcclxuXHRcdFx0Y29uc3QgaW1hZ2VFbnRyaWVzUHJvbWlzZXMgPSBlbnRyaWVzXHJcblx0XHRcdFx0LmZpbHRlcihlbnRyeSA9PiAhKGVudHJ5LmZpbGUucGF0aCBpbiB0aGlzLmltYWdlcykpXHJcblx0XHRcdFx0Lm1hcChhc3luYyBlbnRyeSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm4gbnVsbDtcclxuXHRcdFx0XHRcdGNvbnN0IGltYWdlUHJvcGVydHlWYWx1ZXMgPSBhd2FpdCBnZXRBbGxCYXNlc0ltYWdlUHJvcGVydHlWYWx1ZXMoZW50cnksIHNldHRpbmdzLmltYWdlUHJvcGVydHksIHRoaXMuYXBwKTtcclxuXHRcdFx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHRcdHBhdGg6IGVudHJ5LmZpbGUucGF0aCxcclxuXHRcdFx0XHRcdFx0ZmlsZSxcclxuXHRcdFx0XHRcdFx0aW1hZ2VQcm9wZXJ0eVZhbHVlczogaW1hZ2VQcm9wZXJ0eVZhbHVlcyBhcyB1bmtub3duW11cclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdGNvbnN0IGltYWdlRW50cmllcyA9IChhd2FpdCBQcm9taXNlLmFsbChpbWFnZUVudHJpZXNQcm9taXNlcykpXHJcblx0XHRcdFx0LmZpbHRlcigoZSk6IGUgaXMgTm9uTnVsbGFibGU8dHlwZW9mIGU+ID0+IGUgIT09IG51bGwpO1xyXG5cclxuXHRcdFx0aWYgKGltYWdlRW50cmllcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0YXdhaXQgbG9hZEltYWdlc0ZvckVudHJpZXMoXHJcblx0XHRcdFx0XHRpbWFnZUVudHJpZXMsXHJcblx0XHRcdFx0XHRzZXR0aW5ncy5mYWxsYmFja1RvRW1iZWRzLFxyXG5cdFx0XHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdFx0XHR0aGlzLmltYWdlcyxcclxuXHRcdFx0XHRcdHRoaXMuaGFzSW1hZ2VBdmFpbGFibGVcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBEaXJlY3QgZGVsZXRlIGhhbmRsZXIgZm9yIGNvbnRleHQgbWVudSAtIGRlbGV0ZXMgYSBzaW5nbGUgZmlsZSB3aXRob3V0IHNlbGVjdGlvblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgZ2V0RGlyZWN0RGVsZXRlSGFuZGxlcihmaWxlUGF0aDogc3RyaW5nKTogKCkgPT4gUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRyZXR1cm4gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCB7IHByZXBhcmVEZWxldGlvblByZXZpZXcsIGV4ZWN1dGVTbWFydERlbGV0aW9uIH0gPSBhd2FpdCBpbXBvcnQoJy4uL3V0aWxzL3NtYXJ0LWRlbGV0aW9uJyk7XHJcblx0XHRcdGNvbnN0IHsgRGVsZXRpb25QcmV2aWV3TW9kYWwgfSA9IGF3YWl0IGltcG9ydCgnLi4vY29tcG9uZW50cy9kZWxldGlvbi1wcmV2aWV3Jyk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybURlbGV0aW9ucykge1xyXG5cdFx0XHRcdGNvbnN0IHByZXZpZXcgPSBhd2FpdCBwcmVwYXJlRGVsZXRpb25QcmV2aWV3KFxyXG5cdFx0XHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdFx0XHRbZmlsZVBhdGhdLFxyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3NcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBEZWxldGlvblByZXZpZXdNb2RhbChcclxuXHRcdFx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRcdFx0cHJldmlldyxcclxuXHRcdFx0XHRcdCgpID0+IHtcclxuXHRcdFx0XHRcdFx0Ly8gUmVmcmVzaCB2aWV3IGFmdGVyIGRlbGV0aW9uXHJcblx0XHRcdFx0XHRcdHRoaXMub25EYXRhVXBkYXRlZCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIERpcmVjdCBkZWxldGlvbiB3aXRob3V0IGNvbmZpcm1hdGlvblxyXG5cdFx0XHRcdGNvbnN0IHByZXZpZXcgPSBhd2FpdCBwcmVwYXJlRGVsZXRpb25QcmV2aWV3KFxyXG5cdFx0XHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdFx0XHRbZmlsZVBhdGhdLFxyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3NcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHRcdGF3YWl0IGV4ZWN1dGVTbWFydERlbGV0aW9uKHRoaXMuYXBwLCBwcmV2aWV3KTtcclxuXHRcdFx0XHQvLyBSZWZyZXNoIHZpZXcgYWZ0ZXIgZGVsZXRpb25cclxuXHRcdFx0XHR0aGlzLm9uRGF0YVVwZGF0ZWQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyQ2FyZChcclxuXHRcdGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcblx0XHRjYXJkOiBDYXJkRGF0YSxcclxuXHRcdGVudHJ5OiBCYXNlc0VudHJ5LFxyXG5cdFx0aW5kZXg6IG51bWJlcixcclxuXHRcdHNldHRpbmdzOiBDTVNTZXR0aW5nc1xyXG5cdCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgaXNTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRGaWxlcy5oYXMoY2FyZC5wYXRoKTtcclxuXHRcdHJldHVybiB0aGlzLmNhcmRSZW5kZXJlci5yZW5kZXJDYXJkKFxyXG5cdFx0XHRjb250YWluZXIsXHJcblx0XHRcdGNhcmQsXHJcblx0XHRcdGVudHJ5LFxyXG5cdFx0XHRzZXR0aW5ncyxcclxuXHRcdFx0dGhpcyxcclxuXHRcdFx0aXNTZWxlY3RlZCxcclxuXHRcdFx0KHBhdGg6IHN0cmluZywgc2VsZWN0ZWQ6IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0XHR0aGlzLmhhbmRsZVNlbGVjdGlvbkNoYW5nZShwYXRoLCBzZWxlY3RlZCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdChwYXRoOiBzdHJpbmcsIHByb3BlcnR5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKSA9PiB7XHJcblx0XHRcdFx0dm9pZCB0aGlzLmhhbmRsZVByb3BlcnR5VG9nZ2xlKHBhdGgsIHByb3BlcnR5LCB2YWx1ZSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHsgaGFuZGxlRGVsZXRlOiB0aGlzLmdldERpcmVjdERlbGV0ZUhhbmRsZXIoY2FyZC5wYXRoKSB9XHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIGNhcmQgaW1hZ2Ugd2hlbiBpdCBiZWNvbWVzIGF2YWlsYWJsZVxyXG5cdCAqIENhbGxlZCBhc3luY2hyb25vdXNseSBhZnRlciBpbWFnZXMgbG9hZFxyXG5cdCAqL1xyXG5cdHByaXZhdGUgdXBkYXRlQ2FyZEltYWdlKHBhdGg6IHN0cmluZywgaW1hZ2VVcmw6IHN0cmluZyB8IHN0cmluZ1tdKTogdm9pZCB7XHJcblx0XHRjb25zdCBjYXJkRWwgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoYC5jYXJkW2RhdGEtcGF0aD1cIiR7cGF0aH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGlmICghY2FyZEVsKSByZXR1cm47XHJcblxyXG5cdFx0Y29uc3QgdXJsID0gQXJyYXkuaXNBcnJheShpbWFnZVVybCkgPyBpbWFnZVVybFswXSA6IGltYWdlVXJsO1xyXG5cdFx0aWYgKCF1cmwpIHJldHVybjtcclxuXHJcblx0XHQvLyBDaGVjayBpZiBpbWFnZS1lbWJlZCBjb250YWluZXIgZXhpc3RzXHJcblx0XHRsZXQgaW1hZ2VFbWJlZENvbnRhaW5lciA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UtZW1iZWQnKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGlmICghaW1hZ2VFbWJlZENvbnRhaW5lcikge1xyXG5cdFx0XHQvLyBObyBpbWFnZSBjb250YWluZXIgLSBuZWVkIHRvIGNyZWF0ZSBpdFxyXG5cdFx0XHRjb25zdCBwbGFjZWhvbGRlciA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb3Zlci1wbGFjZWhvbGRlciwgLmNhcmQtdGh1bWJuYWlsLXBsYWNlaG9sZGVyJyk7XHJcblx0XHRcdGNvbnN0IGlzVGh1bWJuYWlsID0gY2FyZEVsLmNsYXNzTGlzdC5jb250YWlucygnaW1hZ2UtZm9ybWF0LXRodW1ibmFpbCcpO1xyXG5cdFx0XHRjb25zdCBpc0NvdmVyID0gY2FyZEVsLmNsYXNzTGlzdC5jb250YWlucygnaW1hZ2UtZm9ybWF0LWNvdmVyJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAocGxhY2Vob2xkZXIpIHtcclxuXHRcdFx0XHQvLyBSZXBsYWNlIHBsYWNlaG9sZGVyXHJcblx0XHRcdFx0Y29uc3QgZXhpc3RpbmdCYWRnZSA9IHBsYWNlaG9sZGVyLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLXN0YXR1cy1iYWRnZScpO1xyXG5cdFx0XHRcdGNvbnN0IGltYWdlQ2xhc3NOYW1lID0gcGxhY2Vob2xkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJkLWNvdmVyLXBsYWNlaG9sZGVyJykgPyAnY2FyZC1jb3ZlcicgOiAnY2FyZC10aHVtYm5haWwnO1xyXG5cdFx0XHRcdGNvbnN0IGltYWdlRWwgPSBwbGFjZWhvbGRlci5wYXJlbnRFbGVtZW50Py5jcmVhdGVEaXYoaW1hZ2VDbGFzc05hbWUpO1xyXG5cdFx0XHRcdGlmIChpbWFnZUVsKSB7XHJcblx0XHRcdFx0XHRpbWFnZUVtYmVkQ29udGFpbmVyID0gaW1hZ2VFbC5jcmVhdGVEaXYoJ2ltYWdlLWVtYmVkJyk7XHJcblx0XHRcdFx0XHRpZiAoZXhpc3RpbmdCYWRnZSkge1xyXG5cdFx0XHRcdFx0XHRpbWFnZUVsLmFwcGVuZENoaWxkKGV4aXN0aW5nQmFkZ2UpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXIucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2UgaWYgKGlzVGh1bWJuYWlsKSB7XHJcblx0XHRcdFx0Ly8gRm9yIHRodW1ibmFpbHMsIGNyZWF0ZSBlbGVtZW50IGRpcmVjdGx5IGluIGNvbnRlbnRDb250YWluZXIgKG5vIHBsYWNlaG9sZGVycylcclxuXHRcdFx0XHRjb25zdCBjb250ZW50Q29udGFpbmVyID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQnKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRpZiAoY29udGVudENvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0Ly8gSW5zZXJ0IHRodW1ibmFpbCBCRUZPUkUgdGV4dC13cmFwcGVyIGZvciBwcm9wZXIgcG9zaXRpb25pbmdcclxuXHRcdFx0XHRcdGNvbnN0IHRleHRXcmFwcGVyID0gY29udGVudENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY2FyZC10ZXh0LXdyYXBwZXInKTtcclxuXHRcdFx0XHRcdGNvbnN0IGltYWdlRWwgPSB0ZXh0V3JhcHBlclxyXG5cdFx0XHRcdFx0XHQ/IGNvbnRlbnRDb250YWluZXIuaW5zZXJ0QmVmb3JlKGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCdjYXJkLXRodW1ibmFpbCcpLCB0ZXh0V3JhcHBlcilcclxuXHRcdFx0XHRcdFx0OiBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignY2FyZC10aHVtYm5haWwnKTtcclxuXHRcdFx0XHRcdGltYWdlRW1iZWRDb250YWluZXIgPSBpbWFnZUVsLmNyZWF0ZURpdignaW1hZ2UtZW1iZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAoaXNDb3Zlcikge1xyXG5cdFx0XHRcdC8vIEZvciBjb3ZlciwgY3JlYXRlIGluIGNvbnRlbnRDb250YWluZXJcclxuXHRcdFx0XHRjb25zdCBjb250ZW50Q29udGFpbmVyID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQnKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRpZiAoY29udGVudENvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0Y29uc3QgaW1hZ2VFbCA9IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCdjYXJkLWNvdmVyJyk7XHJcblx0XHRcdFx0XHRpbWFnZUVtYmVkQ29udGFpbmVyID0gaW1hZ2VFbC5jcmVhdGVEaXYoJ2ltYWdlLWVtYmVkJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFVwZGF0ZSBiYWNrZ3JvdW5kLWltYWdlIG9uIHRoZSBjb250YWluZXJcclxuXHRcdGlmIChpbWFnZUVtYmVkQ29udGFpbmVyKSB7XHJcblx0XHRcdC8vIENvbnZlcnQgR0lGIHRvIHN0YXRpYyBpZiBzZXR0aW5nIGlzIGVuYWJsZWRcclxuXHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGZpbmFsVXJsID0gYXdhaXQgY29udmVydEdpZlRvU3RhdGljKHVybCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9yY2VTdGF0aWNHaWZJbWFnZXMpO1xyXG5cdFx0XHRcdGltYWdlRW1iZWRDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybChcIiR7ZmluYWxVcmx9XCIpYDtcclxuXHRcdFx0fSkoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFNldCBpbml0aWFsIGJhY2tncm91bmQgaW1hZ2UgKHdpbGwgYmUgdXBkYXRlZCBpZiBHSUYgY29udmVyc2lvbiBpcyBuZWVkZWQpXHJcblx0XHRpbWFnZUVtYmVkQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCIke3VybH1cIilgO1xyXG5cdFx0c2V0Q3NzUHJvcHMoaW1hZ2VFbWJlZENvbnRhaW5lciwge1xyXG5cdFx0XHRcdGJhY2tncm91bmRTaXplOiAnY292ZXInLFxyXG5cdFx0XHRcdGJhY2tncm91bmRQb3NpdGlvbjogJ2NlbnRlciBjZW50ZXInLFxyXG5cdFx0XHRcdGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXRTb3J0TWV0aG9kKCk6IHN0cmluZyB7XHJcblx0XHRjb25zdCBzb3J0Q29uZmlncyA9IHRoaXMuY29uZmlnLmdldFNvcnQoKTtcclxuXHRcdGlmIChzb3J0Q29uZmlncyAmJiBzb3J0Q29uZmlncy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGNvbnN0IGZpcnN0U29ydCA9IHNvcnRDb25maWdzWzBdO1xyXG5cdFx0XHRjb25zdCBwcm9wZXJ0eSA9IGZpcnN0U29ydC5wcm9wZXJ0eTtcclxuXHRcdFx0Y29uc3QgZGlyZWN0aW9uID0gZmlyc3RTb3J0LmRpcmVjdGlvbi50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHRpZiAocHJvcGVydHkuaW5jbHVkZXMoJ2N0aW1lJykpIHtcclxuXHRcdFx0XHRyZXR1cm4gYGN0aW1lLSR7ZGlyZWN0aW9ufWA7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHByb3BlcnR5LmluY2x1ZGVzKCdtdGltZScpKSB7XHJcblx0XHRcdFx0cmV0dXJuIGBtdGltZS0ke2RpcmVjdGlvbn1gO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gJ210aW1lLWRlc2MnO1xyXG5cdH1cclxuXHJcblxyXG5cclxuXHRwcml2YXRlIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShwYXRoOiBzdHJpbmcsIHNlbGVjdGVkOiBib29sZWFuKTogdm9pZCB7XHJcblx0XHRpZiAoc2VsZWN0ZWQpIHtcclxuXHRcdFx0dGhpcy5zZWxlY3RlZEZpbGVzLmFkZChwYXRoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuc2VsZWN0ZWRGaWxlcy5kZWxldGUocGF0aCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEFsd2F5cyB1cGRhdGUgVUkgd2hlbiBzZWxlY3Rpb24gY2hhbmdlcyAtIHRoaXMgd2lsbCBoaWRlIHRvb2xiYXIgaWYgc2VsZWN0aW9uIGlzIGVtcHR5XHJcblx0XHR0aGlzLnVwZGF0ZVNlbGVjdGlvblVJKCk7XHJcblx0XHRcclxuXHRcdC8vIEZvcmNlIGhpZGUgdG9vbGJhciBpbW1lZGlhdGVseSBpZiBzZWxlY3Rpb24gaXMgZW1wdHlcclxuXHRcdC8vIERvIHRoaXMgYWZ0ZXIgdXBkYXRlU2VsZWN0aW9uVUkgdG8gZW5zdXJlIGl0IHRha2VzIHByZWNlZGVuY2VcclxuXHRcdGlmICh0aGlzLnNlbGVjdGVkRmlsZXMuc2l6ZSA9PT0gMCkge1xyXG5cdFx0XHRpZiAodGhpcy5idWxrVG9vbGJhcikge1xyXG5cdFx0XHRcdC8vIEZvcmNlIGltbWVkaWF0ZSBoaWRlIHdpdGhvdXQgd2FpdGluZyBmb3IgdHJhbnNpdGlvbnNcclxuXHRcdFx0XHR0aGlzLmJ1bGtUb29sYmFyLmhpZGUoKTtcclxuXHRcdFx0XHQvLyBBbHNvIGRpcmVjdGx5IGhpZGUgdGhlIGVsZW1lbnQgYXMgYSBiYWNrdXBcclxuXHRcdFx0XHRjb25zdCB0b29sYmFyRWwgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5iYXNlcy1jbXMtYnVsay10b29sYmFyJyk7XHJcblx0XHRcdFx0aWYgKHRvb2xiYXJFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcblx0XHRcdFx0XHR0b29sYmFyRWwucmVtb3ZlQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItdmlzaWJsZScpO1xyXG5cdFx0XHRcdFx0dG9vbGJhckVsLmFkZENsYXNzKCdiYXNlcy1jbXMtYnVsay10b29sYmFyLWhpZGRlbicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBoYW5kbGVQcm9wZXJ0eVRvZ2dsZShwYXRoOiBzdHJpbmcsIHByb3BlcnR5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRpZiAodGhpcy5wcm9wZXJ0eVRvZ2dsZUhhbmRsZXIpIHtcclxuXHRcdGF3YWl0IHRoaXMucHJvcGVydHlUb2dnbGVIYW5kbGVyLmhhbmRsZVByb3BlcnR5VG9nZ2xlKHBhdGgsIHByb3BlcnR5LCB2YWx1ZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNlbGVjdEFsbCgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGNhcmRzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuYmFzZXMtY21zLWNhcmQnKTtcclxuXHRcdGNhcmRzLmZvckVhY2goKGNhcmRFbCkgPT4ge1xyXG5cdFx0XHRjb25zdCBwYXRoID0gY2FyZEVsLmdldEF0dHJpYnV0ZSgnZGF0YS1wYXRoJyk7XHJcblx0XHRcdGlmIChwYXRoKSB7XHJcblx0XHRcdFx0dGhpcy5zZWxlY3RlZEZpbGVzLmFkZChwYXRoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLnVwZGF0ZVNlbGVjdGlvblVJKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGRlc2VsZWN0QWxsKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zZWxlY3RlZEZpbGVzLmNsZWFyKCk7XHJcblx0XHR0aGlzLnVwZGF0ZVNlbGVjdGlvblVJKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZWZyZXNoIHRoZSB0b29sYmFyIHdoZW4gc2V0dGluZ3MgY2hhbmdlXHJcblx0ICogQ2FsbGVkIGZyb20gc2V0dGluZ3MgdGFiIHdoZW4gdG9vbGJhciBidXR0b24gdmlzaWJpbGl0eSBzZXR0aW5ncyBhcmUgdXBkYXRlZFxyXG5cdCAqL1xyXG5cdHJlZnJlc2hUb29sYmFyKCk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMuYnVsa1Rvb2xiYXIpIHtcclxuXHRcdFx0Y29uc3QgY3VycmVudENvdW50ID0gdGhpcy5zZWxlY3RlZEZpbGVzLnNpemU7XHJcblx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIucmVjcmVhdGUoKTtcclxuXHRcdFx0Ly8gVXBkYXRlIGNvdW50IGFmdGVyIHJlY3JlYXRpb25cclxuXHRcdFx0aWYgKGN1cnJlbnRDb3VudCA+IDApIHtcclxuXHRcdFx0XHR0aGlzLmJ1bGtUb29sYmFyLnVwZGF0ZUNvdW50KGN1cnJlbnRDb3VudCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdXBkYXRlU2VsZWN0aW9uVUkoKTogdm9pZCB7XHJcblx0XHQvLyBVcGRhdGUgY2FyZCB2aXN1YWwgc3RhdGVzXHJcblx0XHRjb25zdCBjYXJkcyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLmNhcmQnKTtcclxuXHRcdGNhcmRzLmZvckVhY2goKGNhcmRFbCkgPT4ge1xyXG5cdFx0XHRjb25zdCBwYXRoID0gY2FyZEVsLmdldEF0dHJpYnV0ZSgnZGF0YS1wYXRoJyk7XHJcblx0XHRcdGNvbnN0IGNoZWNrYm94ID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXS5zZWxlY3Rpb24tY2hlY2tib3gnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdFx0XHRpZiAocGF0aCkge1xyXG5cdFx0XHRcdGNvbnN0IGlzU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkRmlsZXMuaGFzKHBhdGgpO1xyXG5cdFx0XHRcdGlmIChpc1NlbGVjdGVkKSB7XHJcblx0XHRcdFx0XHRjYXJkRWwuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGNhcmRFbC5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKGNoZWNrYm94KSB7XHJcblx0XHRcdFx0XHRjaGVja2JveC5jaGVja2VkID0gaXNTZWxlY3RlZDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNob3cvaGlkZSBidWxrIHRvb2xiYXIgLSBoaWRlIHdoZW4gc2VsZWN0aW9uIGlzIGVtcHR5XHJcblx0XHQvLyBEb24ndCBoaWRlIGlmIHdlJ3JlIGluIHRoZSBtaWRkbGUgb2YgYSByZWZyZXNoIHRoYXQgd2lsbCByZXN0b3JlIHNlbGVjdGlvblxyXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRGaWxlcy5zaXplID4gMCkge1xyXG5cdFx0XHQvLyBDaGVjayBpZiB0b29sYmFyIGVsZW1lbnQgYWxyZWFkeSBleGlzdHMgaW4gRE9NIChmcm9tIHByZXZpb3VzIHZpZXcgc3dpdGNoKVxyXG5cdFx0XHQvLyBSZW1vdmUgYW55IG9ycGhhbmVkIHRvb2xiYXIgZWxlbWVudHMgdGhhdCBtaWdodCBiZSBsZWZ0IG92ZXJcclxuXHRcdFx0Y29uc3Qgb3JwaGFuZWRUb29sYmFycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXNlcy1jbXMtYnVsay10b29sYmFyJyk7XHJcblx0XHRcdG9ycGhhbmVkVG9vbGJhcnMuZm9yRWFjaCh0b29sYmFyID0+IHtcclxuXHRcdFx0XHQvLyBPbmx5IHJlbW92ZSBpZiBpdCdzIG5vdCBvdXIgY3VycmVudCB0b29sYmFyXHJcblx0XHRcdFx0Y29uc3QgdG9vbGJhckluc3RhbmNlID0gKHRvb2xiYXIgYXMgdW5rbm93biBhcyB7IF9fYnVsa1Rvb2xiYXJJbnN0YW5jZT86IEJ1bGtUb29sYmFyIH0pLl9fYnVsa1Rvb2xiYXJJbnN0YW5jZTtcclxuXHRcdFx0XHRpZiAoIXRvb2xiYXJJbnN0YW5jZSB8fCB0b29sYmFySW5zdGFuY2UgIT09IHRoaXMuYnVsa1Rvb2xiYXIpIHtcclxuXHRcdFx0XHRcdHRvb2xiYXIucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIElmIHRvb2xiYXIgZG9lc24ndCBleGlzdCwgY3JlYXRlIGl0XHJcblx0XHRcdGlmICghdGhpcy5idWxrVG9vbGJhcikge1xyXG5cdFx0XHRcdGNvbnN0IHNldHRpbmdzID0gcmVhZENNU1NldHRpbmdzKFxyXG5cdFx0XHRcdFx0dGhpcy5jb25maWcsXHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc1xyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0dGhpcy5idWxrVG9vbGJhciA9IG5ldyBCdWxrVG9vbGJhcihcclxuXHRcdFx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4sXHJcblx0XHRcdFx0XHR0aGlzLmNvbnRhaW5lckVsLFxyXG5cdFx0XHRcdFx0KCkgPT4gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkRmlsZXMpLFxyXG5cdFx0XHRcdFx0KCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuY2xlYXIoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy51cGRhdGVTZWxlY3Rpb25VSSgpO1xyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdCgpID0+IHtcclxuXHRcdFx0XHRcdFx0Ly8gUmVmcmVzaCB2aWV3IGJ1dCBwcmVzZXJ2ZSBzZWxlY3Rpb25cclxuXHRcdFx0XHRcdFx0Y29uc3Qgc2VsZWN0ZWRQYXRocyA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZEZpbGVzKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIFNldCBmbGFnIHRvIHByZXZlbnQgdG9vbGJhciBmcm9tIGJlaW5nIGhpZGRlbiBkdXJpbmcgcmVmcmVzaFxyXG5cdFx0XHRcdFx0XHR0aGlzLmlzUmVmcmVzaGluZ1dpdGhTZWxlY3Rpb24gPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gS2VlcCB0b29sYmFyIHZpc2libGUgZHVyaW5nIHJlZnJlc2ggLSBjcml0aWNhbCB0byBwcmV2ZW50IGl0IGZyb20gZGlzYXBwZWFyaW5nXHJcblx0XHRcdFx0XHRcdGlmICh0aGlzLmJ1bGtUb29sYmFyICYmIHNlbGVjdGVkUGF0aHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIuc2hvdygpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBSZWZyZXNoIHRoZSB2aWV3XHJcblx0XHRcdFx0XHRcdHRoaXMub25EYXRhVXBkYXRlZCgpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzZWxlY3Rpb24gYWZ0ZXIgcmVmcmVzaCBjb21wbGV0ZXNcclxuXHRcdFx0XHRcdFx0Ly8gVXNlIG11bHRpcGxlIHRpbWVvdXRzIHRvIGVuc3VyZSBpdCB3b3JrcyBldmVuIGlmIHRoZSBmaXJzdCBvbmUgaXMgdG9vIGVhcmx5XHJcblx0XHRcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNlbGVjdGlvblxyXG5cdFx0XHRcdFx0XHRcdHNlbGVjdGVkUGF0aHMuZm9yRWFjaChwYXRoID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5zZWxlY3RlZEZpbGVzLmFkZChwYXRoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBDbGVhciB0aGUgZmxhZyBhbmQgdXBkYXRlIFVJXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5pc1JlZnJlc2hpbmdXaXRoU2VsZWN0aW9uID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy51cGRhdGVTZWxlY3Rpb25VSSgpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIEVuc3VyZSB0b29sYmFyIGlzIHZpc2libGUgYW5kIHVwZGF0ZWRcclxuXHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zZWxlY3RlZEZpbGVzLnNpemUgPiAwICYmIHRoaXMuYnVsa1Rvb2xiYXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIuc2hvdygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5idWxrVG9vbGJhci51cGRhdGVDb3VudCh0aGlzLnNlbGVjdGVkRmlsZXMuc2l6ZSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIERvdWJsZS1jaGVjayBhZnRlciBhIGJpdCBtb3JlIHRpbWVcclxuXHRcdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zZWxlY3RlZEZpbGVzLnNpemUgPiAwICYmIHRoaXMuYnVsa1Rvb2xiYXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5idWxrVG9vbGJhci5zaG93KCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIudXBkYXRlQ291bnQodGhpcy5zZWxlY3RlZEZpbGVzLnNpemUpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0sIDEwMCk7XHJcblx0XHRcdFx0XHRcdH0sIDI1MCk7XHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0KCkgPT4ge1xyXG5cdFx0XHRcdFx0XHQvLyBTZWxlY3QgYWxsIGNhbGxiYWNrXHJcblx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0QWxsKCk7XHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0c2V0dGluZ3NcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSBzZXR0aW5ncyBpZiB0b29sYmFyIGFscmVhZHkgZXhpc3RzXHJcblx0XHRcdFx0Y29uc3Qgc2V0dGluZ3MgPSByZWFkQ01TU2V0dGluZ3MoXHJcblx0XHRcdFx0XHR0aGlzLmNvbmZpZyxcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHR0aGlzLmJ1bGtUb29sYmFyLnVwZGF0ZVNldHRpbmdzKHNldHRpbmdzKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmJ1bGtUb29sYmFyLnVwZGF0ZUNvdW50KHRoaXMuc2VsZWN0ZWRGaWxlcy5zaXplKTtcclxuXHRcdFx0dGhpcy5idWxrVG9vbGJhci5zaG93KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBTZWxlY3Rpb24gaXMgZW1wdHkgLSBmb3JjZSBoaWRlIHRvb2xiYXIgaW1tZWRpYXRlbHlcclxuXHRcdFx0aWYgKHRoaXMuYnVsa1Rvb2xiYXIgJiYgIXRoaXMuaXNSZWZyZXNoaW5nV2l0aFNlbGVjdGlvbikge1xyXG5cdFx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIuaGlkZSgpO1xyXG5cdFx0XHRcdC8vIEZvcmNlIGltbWVkaWF0ZSBoaWRlIGFzIGJhY2t1cFxyXG5cdFx0XHRcdGNvbnN0IHRvb2xiYXJFbCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLmJhc2VzLWNtcy1idWxrLXRvb2xiYXInKTtcclxuXHRcdFx0XHRpZiAodG9vbGJhckVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdHRvb2xiYXJFbC5yZW1vdmVDbGFzcygnYmFzZXMtY21zLWJ1bGstdG9vbGJhci12aXNpYmxlJyk7XHJcblx0XHRcdFx0XHR0b29sYmFyRWwuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItaGlkZGVuJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyLmNsZWFudXAoKTtcclxuXHRcdGlmICh0aGlzLnZpZXdTd2l0Y2hMaXN0ZW5lcikge1xyXG5cdFx0dGhpcy52aWV3U3dpdGNoTGlzdGVuZXIuY2xlYW51cCgpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3NQb2xsSW50ZXJ2YWwgIT09IG51bGwpIHtcclxuXHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5zZXR0aW5nc1BvbGxJbnRlcnZhbCk7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3NQb2xsSW50ZXJ2YWwgPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5wcm9wZXJ0eU9ic2VydmVycy5mb3JFYWNoKG9icyA9PiBvYnMuZGlzY29ubmVjdCgpKTtcclxuXHRcdHRoaXMucHJvcGVydHlPYnNlcnZlcnMgPSBbXTtcclxuXHRcdGlmICh0aGlzLmJ1bGtUb29sYmFyKSB7XHJcblx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIuZGVzdHJveSgpO1xyXG5cdFx0fVxyXG5cdFx0Ly8gQ2xlYW4gdXAgc2VsZWN0aW9uIGFuZCB0b29sYmFyIHdoZW4gdmlldyBjbG9zZXNcclxuXHRcdHRoaXMuc2VsZWN0ZWRGaWxlcy5jbGVhcigpO1xyXG5cdFx0Y29uc3Qgb3JwaGFuZWRUb29sYmFycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXNlcy1jbXMtYnVsay10b29sYmFyJyk7XHJcblx0XHRvcnBoYW5lZFRvb2xiYXJzLmZvckVhY2godG9vbGJhciA9PiB0b29sYmFyLnJlbW92ZSgpKTtcclxuXHRcdFxyXG5cdFx0Ly8gUmVtb3ZlIGZyb20gcGx1Z2luIHRyYWNraW5nXHJcblx0XHRjb25zdCBwbHVnaW5XaXRoTWV0aG9kID0gdGhpcy5wbHVnaW4gYXMgeyByZW1vdmVWaWV3PzogKHZpZXc6IEJhc2VzQ01TVmlldykgPT4gdm9pZCB9O1xyXG5cdFx0aWYgKHBsdWdpbldpdGhNZXRob2QgJiYgdHlwZW9mIHBsdWdpbldpdGhNZXRob2QucmVtb3ZlVmlldyA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRwbHVnaW5XaXRoTWV0aG9kLnJlbW92ZVZpZXcodGhpcyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBPdmVycmlkZSBuZXcgbm90ZSBjcmVhdGlvbiB0byB1c2UgY3VzdG9tIGxvY2F0aW9uIGlmIGNvbmZpZ3VyZWRcclxuXHQgKi9cclxuXHRhc3luYyBvbk5ldygpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gcmVhZENNU1NldHRpbmdzKFxyXG5cdFx0XHR0aGlzLmNvbmZpZyxcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3NcclxuXHRcdCk7XHJcblxyXG5cdFx0aWYgKHNldHRpbmdzLmN1c3RvbWl6ZU5ld0J1dHRvbikge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IGxvY2F0aW9uSW5wdXQgPSBzZXR0aW5ncy5uZXdOb3RlTG9jYXRpb24/LnRyaW0oKSB8fCAnJztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBJZiBsb2NhdGlvbiBpcyBlbXB0eSwgdXNlIE9ic2lkaWFuJ3MgZGVmYXVsdCBuZXcgbm90ZSBsb2NhdGlvblxyXG5cdFx0XHRcdGlmIChsb2NhdGlvbklucHV0ID09PSAnJykge1xyXG5cdFx0XHRcdFx0Ly8gVXNlIE9ic2lkaWFuJ3MgZGVmYXVsdCBuZXcgbm90ZSBjcmVhdGlvbiBiZWhhdmlvclxyXG5cdFx0XHRcdFx0Y29uc3QgdmF1bHRDb25maWcgPSAodGhpcy5hcHAudmF1bHQgYXMgeyBjb25maWc/OiB7IG5ld0ZpbGVMb2NhdGlvbj86IHN0cmluZzsgbmV3RmlsZUZvbGRlclBhdGg/OiBzdHJpbmcgfSB9KS5jb25maWc7XHJcblx0XHRcdFx0XHRjb25zdCBuZXdGaWxlTG9jYXRpb24gPSB2YXVsdENvbmZpZz8ubmV3RmlsZUxvY2F0aW9uIHx8ICdmb2xkZXInO1xyXG5cdFx0XHRcdFx0Y29uc3QgbmV3RmlsZUZvbGRlclBhdGggPSB2YXVsdENvbmZpZz8ubmV3RmlsZUZvbGRlclBhdGggfHwgJyc7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGxldCBmaWxlUGF0aCA9ICdVbnRpdGxlZC5tZCc7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEhhbmRsZSBPYnNpZGlhbidzIG5ldyBmaWxlIGxvY2F0aW9uIHNldHRpbmdzXHJcblx0XHRcdFx0XHRpZiAobmV3RmlsZUxvY2F0aW9uID09PSAnZm9sZGVyJyAmJiBuZXdGaWxlRm9sZGVyUGF0aCkge1xyXG5cdFx0XHRcdFx0XHRmaWxlUGF0aCA9IGAke25ld0ZpbGVGb2xkZXJQYXRofS9VbnRpdGxlZC5tZGA7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKG5ld0ZpbGVMb2NhdGlvbiA9PT0gJ2N1cnJlbnQnKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0XHRcdFx0XHRpZiAoYWN0aXZlRmlsZSAmJiBhY3RpdmVGaWxlLnBhcmVudCkge1xyXG5cdFx0XHRcdFx0XHRcdGZpbGVQYXRoID0gYCR7YWN0aXZlRmlsZS5wYXJlbnQucGF0aH0vVW50aXRsZWQubWRgO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKG5ld0ZpbGVMb2NhdGlvbiA9PT0gJ3Jvb3QnKSB7XHJcblx0XHRcdFx0XHRcdGZpbGVQYXRoID0gJ1VudGl0bGVkLm1kJztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgJycpO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChmaWxlLnBhdGgsICcnLCBmYWxzZSk7XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSWYgbG9jYXRpb24gaXMgXCIvXCIgb3IganVzdCBzbGFzaGVzLCB1c2UgdmF1bHQgcm9vdFxyXG5cdFx0XHRcdGlmIChsb2NhdGlvbklucHV0ID09PSAnLycgfHwgbG9jYXRpb25JbnB1dC5yZXBsYWNlKC9cXC8vZywgJycpID09PSAnJykge1xyXG5cdFx0XHRcdFx0Y29uc3QgbmV3RmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZSgnVW50aXRsZWQubWQnLCAnJyk7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KG5ld0ZpbGUucGF0aCwgJycsIGZhbHNlKTtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBPdGhlcndpc2UsIHVzZSB0aGUgc3BlY2lmaWVkIGZvbGRlclxyXG5cdFx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSBsb2NhdGlvbklucHV0LnJlcGxhY2UoL15cXC8rfFxcLyskL2csICcnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRsZXQgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICghZm9sZGVyIHx8ICEoJ2NoaWxkcmVuJyBpbiBmb2xkZXIpKSB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XHJcblx0XHRcdFx0XHRmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChmb2xkZXIgJiYgJ2NoaWxkcmVuJyBpbiBmb2xkZXIpIHtcclxuXHRcdFx0XHRcdGNvbnN0IG5ld0ZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoYCR7Zm9sZGVyUGF0aH0vVW50aXRsZWQubWRgLCAnJyk7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KG5ld0ZpbGUucGF0aCwgJycsIGZhbHNlKTtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0Ly8gRXJyb3IgY3JlYXRpbmcgbmV3IG5vdGUgLSBzaWxlbnRseSBmYWlsXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gRGVmYXVsdCBiZWhhdmlvciAtIGxldCBCYXNlcyBoYW5kbGUgaXRcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBVdGlsaXR5IGZ1bmN0aW9uIHRvIHNldCBDU1MgcHJvcGVydGllcyBvbiBhbiBlbGVtZW50XHJcbiAqIFJlcGxhY2VzIHRoZSBub24tZXhpc3RlbnQgc2V0Q3NzUHJvcHMgZnJvbSBvYnNpZGlhblxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBTZXRzIENTUyBwcm9wZXJ0aWVzIG9uIGFuIGVsZW1lbnQgZnJvbSBhbiBvYmplY3RcclxuICogQHBhcmFtIGVsZW1lbnQgLSBUaGUgZWxlbWVudCB0byBhcHBseSBzdHlsZXMgdG8gKEhUTUxFbGVtZW50IG9yIFNWR0VsZW1lbnQpXHJcbiAqIEBwYXJhbSBwcm9wcyAtIE9iamVjdCB3aXRoIENTUyBwcm9wZXJ0aWVzIGluIGNhbWVsQ2FzZSBvciBrZWJhYi1jYXNlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0Q3NzUHJvcHMoZWxlbWVudDogSFRNTEVsZW1lbnQgfCBTVkdFbGVtZW50LCBwcm9wczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyPik6IHZvaWQge1xyXG5cdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BzKSkge1xyXG5cdFx0Ly8gQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzICh2YXJpYWJsZXMpIHN0YXJ0IHdpdGggLS1cclxuXHRcdGlmIChrZXkuc3RhcnRzV2l0aCgnLS0nKSkge1xyXG5cdFx0XHRlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGtleSwgU3RyaW5nKHZhbHVlKSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBDb252ZXJ0IGNhbWVsQ2FzZSB0byBrZWJhYi1jYXNlIGZvciBDU1MgcHJvcGVydGllc1xyXG5cdFx0XHRjb25zdCBjc3NLZXkgPSBrZXkucmVwbGFjZSgvKFtBLVpdKS9nLCAnLSQxJykudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0ZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShjc3NLZXksIFN0cmluZyh2YWx1ZSkpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIERhdGEgdHJhbnNmb3JtYXRpb24gdXRpbGl0aWVzXHJcbiAqIENvbnZlcnRzIEJhc2VzIGVudHJpZXMgaW50byBub3JtYWxpemVkIENhcmREYXRhIGZvcm1hdFxyXG4gKiBVcGRhdGVkIHRvIHN1cHBvcnQgTURYIGZpbGVzIHZpYSBtYW51YWwgZnJvbnRtYXR0ZXIgcGFyc2luZ1xyXG4gKi9cclxuXHJcbmltcG9ydCB0eXBlIHsgQXBwLCBCYXNlc0VudHJ5IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgZ2V0Rmlyc3RCYXNlc1Byb3BlcnR5VmFsdWUgfSBmcm9tICcuLi91dGlscy9wcm9wZXJ0eSc7XHJcbmltcG9ydCB7IGdldExpc3RTZXBhcmF0b3IgfSBmcm9tICcuLi91dGlscy9zdHlsZS1zZXR0aW5ncyc7XHJcbmltcG9ydCB7IGdldEZpbGVGcm9udG1hdHRlciB9IGZyb20gJy4uL3V0aWxzL2Zyb250bWF0dGVyLWhlbHBlcic7XHJcblxyXG4vKipcclxuICogUmVtb3ZlIGR1cGxpY2F0aW9uIGZyb20gYSBzdHJpbmcgKGUuZy4sIFwidmFsdWV2YWx1ZVwiIC0+IFwidmFsdWVcIilcclxuICogSGFuZGxlcyBtdWx0aXBsZSByZXBldGl0aW9ucyAtIGZpbmRzIHRoZSBzaG9ydGVzdCByZXBlYXRpbmcgcGF0dGVyblxyXG4gKi9cclxuZnVuY3Rpb24gcmVtb3ZlRHVwbGljYXRpb24oc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdGlmIChzdHIubGVuZ3RoID09PSAwKSByZXR1cm4gc3RyO1xyXG5cdFxyXG5cdC8vIEZpbmQgdGhlIHNob3J0ZXN0IHJlcGVhdGluZyBwYXR0ZXJuIGJ5IGNoZWNraW5nIGFsbCBwb3NzaWJsZSBwcmVmaXggbGVuZ3Roc1xyXG5cdC8vIFN0YXJ0IGZyb20gMSBhbmQgZ28gdXAgdG8gaGFsZiB0aGUgc3RyaW5nIGxlbmd0aFxyXG5cdGZvciAobGV0IGxlbiA9IDE7IGxlbiA8PSBNYXRoLmZsb29yKHN0ci5sZW5ndGggLyAyKTsgbGVuKyspIHtcclxuXHRcdGNvbnN0IHByZWZpeCA9IHN0ci5zdWJzdHJpbmcoMCwgbGVuKTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2hlY2sgaWYgc3RyaW5nIGlzIGV4YWN0bHkgbWFkZSBvZiByZXBldGl0aW9ucyBvZiB0aGlzIHByZWZpeFxyXG5cdFx0Y29uc3QgcmVwZWF0Q291bnQgPSBNYXRoLmZsb29yKHN0ci5sZW5ndGggLyBsZW4pO1xyXG5cdFx0aWYgKHJlcGVhdENvdW50IDwgMikgY29udGludWU7IC8vIE5lZWQgYXQgbGVhc3QgMiByZXBldGl0aW9uc1xyXG5cdFx0XHJcblx0XHRsZXQgaXNDb21wbGV0ZUR1cGxpY2F0aW9uID0gdHJ1ZTtcclxuXHRcdFxyXG5cdFx0Ly8gVmVyaWZ5IGFsbCBmdWxsIHNlZ21lbnRzIG1hdGNoIHRoZSBwcmVmaXhcclxuXHRcdGZvciAobGV0IGkgPSAxOyBpIDwgcmVwZWF0Q291bnQ7IGkrKykge1xyXG5cdFx0XHRjb25zdCBzZWdtZW50ID0gc3RyLnN1YnN0cmluZyhpICogbGVuLCAoaSArIDEpICogbGVuKTtcclxuXHRcdFx0aWYgKHNlZ21lbnQgIT09IHByZWZpeCkge1xyXG5cdFx0XHRcdGlzQ29tcGxldGVEdXBsaWNhdGlvbiA9IGZhbHNlO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIElmIHRoZXJlJ3MgYSByZW1haW5kZXIsIGNoZWNrIGlmIGl0IG1hdGNoZXMgdGhlIHN0YXJ0IG9mIHRoZSBwcmVmaXhcclxuXHRcdGNvbnN0IHJlbWFpbmRlciA9IHN0ci5sZW5ndGggJSBsZW47XHJcblx0XHRpZiAocmVtYWluZGVyID4gMCkge1xyXG5cdFx0XHRjb25zdCBsYXN0U2VnbWVudCA9IHN0ci5zdWJzdHJpbmcocmVwZWF0Q291bnQgKiBsZW4pO1xyXG5cdFx0XHRpZiAobGFzdFNlZ21lbnQgIT09IHByZWZpeC5zdWJzdHJpbmcoMCwgcmVtYWluZGVyKSkge1xyXG5cdFx0XHRcdGlzQ29tcGxldGVEdXBsaWNhdGlvbiA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChpc0NvbXBsZXRlRHVwbGljYXRpb24pIHtcclxuXHRcdFx0XHRyZXR1cm4gcHJlZml4O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gc3RyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhcmREYXRhIHtcclxuXHRwYXRoOiBzdHJpbmc7XHJcblx0bmFtZTogc3RyaW5nO1xyXG5cdHRpdGxlOiBzdHJpbmc7XHJcblx0dGFnczogc3RyaW5nW107XHJcblx0eWFtbFRhZ3M6IHN0cmluZ1tdO1xyXG5cdGN0aW1lOiBudW1iZXI7XHJcblx0bXRpbWU6IG51bWJlcjtcclxuXHRmb2xkZXJQYXRoOiBzdHJpbmc7XHJcblx0c25pcHBldD86IHN0cmluZztcclxuXHRpbWFnZVVybD86IHN0cmluZyB8IHN0cmluZ1tdO1xyXG5cdGhhc0ltYWdlQXZhaWxhYmxlPzogYm9vbGVhbjtcclxuXHRkaXNwbGF5VGFncz86IHN0cmluZ1tdO1xyXG5cdHByb3BlcnR5TmFtZTE/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lMj86IHN0cmluZztcclxuXHRwcm9wZXJ0eU5hbWUzPzogc3RyaW5nO1xyXG5cdHByb3BlcnR5TmFtZTQ/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lNT86IHN0cmluZztcclxuXHRwcm9wZXJ0eU5hbWU2Pzogc3RyaW5nO1xyXG5cdHByb3BlcnR5TmFtZTc/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lOD86IHN0cmluZztcclxuXHRwcm9wZXJ0eU5hbWU5Pzogc3RyaW5nO1xyXG5cdHByb3BlcnR5TmFtZTEwPzogc3RyaW5nO1xyXG5cdHByb3BlcnR5TmFtZTExPzogc3RyaW5nO1xyXG5cdHByb3BlcnR5TmFtZTEyPzogc3RyaW5nO1xyXG5cdHByb3BlcnR5TmFtZTEzPzogc3RyaW5nO1xyXG5cdHByb3BlcnR5TmFtZTE0Pzogc3RyaW5nO1xyXG5cdHByb3BlcnR5MT86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHkyPzogc3RyaW5nIHwgbnVsbDtcclxuXHRwcm9wZXJ0eTM/OiBzdHJpbmcgfCBudWxsO1xyXG5cdHByb3BlcnR5ND86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHk1Pzogc3RyaW5nIHwgbnVsbDtcclxuXHRwcm9wZXJ0eTY/OiBzdHJpbmcgfCBudWxsO1xyXG5cdHByb3BlcnR5Nz86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHk4Pzogc3RyaW5nIHwgbnVsbDtcclxuXHRwcm9wZXJ0eTk/OiBzdHJpbmcgfCBudWxsO1xyXG5cdHByb3BlcnR5MTA/OiBzdHJpbmcgfCBudWxsO1xyXG5cdHByb3BlcnR5MTE/OiBzdHJpbmcgfCBudWxsO1xyXG5cdHByb3BlcnR5MTI/OiBzdHJpbmcgfCBudWxsO1xyXG5cdHByb3BlcnR5MTM/OiBzdHJpbmcgfCBudWxsO1xyXG5cdHByb3BlcnR5MTQ/OiBzdHJpbmcgfCBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENNU1NldHRpbmdzIHtcclxuXHR0aXRsZVByb3BlcnR5OiBzdHJpbmc7XHJcblx0ZGVzY3JpcHRpb25Qcm9wZXJ0eTogc3RyaW5nO1xyXG5cdGltYWdlUHJvcGVydHk6IHN0cmluZztcclxuXHRzaG93VGl0bGU6IGJvb2xlYW47XHJcblx0c2hvd0RhdGU6IGJvb2xlYW47XHJcblx0ZGF0ZVByb3BlcnR5OiBzdHJpbmc7XHJcblx0ZGF0ZUluY2x1ZGVUaW1lOiBib29sZWFuO1xyXG5cdHNob3dUZXh0UHJldmlldzogYm9vbGVhbjtcclxuXHRmYWxsYmFja1RvQ29udGVudDogYm9vbGVhbjtcclxuXHR0cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eTogYm9vbGVhbjtcclxuXHRmYWxsYmFja1RvRW1iZWRzOiBib29sZWFuIHwgJ2Fsd2F5cycgfCAnaWYtZW1wdHknIHwgJ25ldmVyJztcclxuXHRwcm9wZXJ0eURpc3BsYXkxOiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5Mjogc3RyaW5nO1xyXG5cdHByb3BlcnR5RGlzcGxheTM6IHN0cmluZztcclxuXHRwcm9wZXJ0eURpc3BsYXk0OiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5NTogc3RyaW5nO1xyXG5cdHByb3BlcnR5RGlzcGxheTY6IHN0cmluZztcclxuXHRwcm9wZXJ0eURpc3BsYXk3OiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5ODogc3RyaW5nO1xyXG5cdHByb3BlcnR5RGlzcGxheTk6IHN0cmluZztcclxuXHRwcm9wZXJ0eURpc3BsYXkxMDogc3RyaW5nO1xyXG5cdHByb3BlcnR5RGlzcGxheTExOiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5MTI6IHN0cmluZztcclxuXHRwcm9wZXJ0eURpc3BsYXkxMzogc3RyaW5nO1xyXG5cdHByb3BlcnR5RGlzcGxheTE0OiBzdHJpbmc7XHJcblx0cHJvcGVydHlMYXlvdXQxMlNpZGVCeVNpZGU6IGJvb2xlYW47XHJcblx0cHJvcGVydHlMYXlvdXQzNFNpZGVCeVNpZGU6IGJvb2xlYW47XHJcblx0cHJvcGVydHlMYXlvdXQ1NlNpZGVCeVNpZGU6IGJvb2xlYW47XHJcblx0cHJvcGVydHlMYXlvdXQ3OFNpZGVCeVNpZGU6IGJvb2xlYW47XHJcblx0cHJvcGVydHlMYXlvdXQ5MTBTaWRlQnlTaWRlOiBib29sZWFuO1xyXG5cdHByb3BlcnR5TGF5b3V0MTExMlNpZGVCeVNpZGU6IGJvb2xlYW47XHJcblx0cHJvcGVydHlMYXlvdXQxMzE0U2lkZUJ5U2lkZTogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eUdyb3VwMVBvc2l0aW9uOiAndG9wJyB8ICdib3R0b20nO1xyXG5cdHByb3BlcnR5R3JvdXAyUG9zaXRpb246ICd0b3AnIHwgJ2JvdHRvbSc7XHJcblx0cHJvcGVydHlHcm91cDNQb3NpdGlvbjogJ3RvcCcgfCAnYm90dG9tJztcclxuXHRwcm9wZXJ0eUdyb3VwNFBvc2l0aW9uOiAndG9wJyB8ICdib3R0b20nO1xyXG5cdHByb3BlcnR5R3JvdXA1UG9zaXRpb246ICd0b3AnIHwgJ2JvdHRvbSc7XHJcblx0cHJvcGVydHlHcm91cDZQb3NpdGlvbjogJ3RvcCcgfCAnYm90dG9tJztcclxuXHRwcm9wZXJ0eUdyb3VwN1Bvc2l0aW9uOiAndG9wJyB8ICdib3R0b20nO1xyXG5cdGltYWdlRm9ybWF0OiAnbm9uZScgfCAndGh1bWJuYWlsJyB8ICdjb3Zlcic7XHJcblx0aW1hZ2VQb3NpdGlvbjogJ2xlZnQnIHwgJ3JpZ2h0JyB8ICd0b3AnIHwgJ2JvdHRvbSc7XHJcblx0cHJvcGVydHlMYWJlbHM6ICdoaWRlJyB8ICdpbmxpbmUnIHwgJ2Fib3ZlJztcclxuXHRzaG93RHJhZnRTdGF0dXM6IGJvb2xlYW47XHJcblx0ZHJhZnRTdGF0dXNQcm9wZXJ0eTogc3RyaW5nO1xyXG5cdGRyYWZ0U3RhdHVzUmV2ZXJzZTogYm9vbGVhbjtcclxuXHRkcmFmdFN0YXR1c1VzZUZpbGVuYW1lUHJlZml4OiBib29sZWFuO1xyXG5cdHNob3dUYWdzOiBib29sZWFuO1xyXG5cdHRhZ3NQcm9wZXJ0eTogc3RyaW5nO1xyXG5cdG1heFRhZ3NUb1Nob3c6IG51bWJlcjtcclxuXHRjdXN0b21pemVOZXdCdXR0b246IGJvb2xlYW47XHJcblx0bmV3Tm90ZUxvY2F0aW9uOiBzdHJpbmc7XHJcblx0aGlkZVF1aWNrRWRpdEljb246IGJvb2xlYW47XHJcblx0Y2FyZFNpemU6IG51bWJlcjtcclxuXHRpbWFnZUFzcGVjdFJhdGlvOiBudW1iZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUcmFuc2Zvcm0gQmFzZXMgZW50cnkgaW50byBDYXJkRGF0YVxyXG4gKiBTdXBwb3J0cyBNRFggZmlsZXMgdmlhIG1hbnVhbCBmcm9udG1hdHRlciBwYXJzaW5nXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYmFzZXNFbnRyeVRvQ2FyZERhdGEoXHJcblx0ZW50cnk6IEJhc2VzRW50cnksXHJcblx0c2V0dGluZ3M6IENNU1NldHRpbmdzLFxyXG5cdHNvcnRNZXRob2Q6IHN0cmluZyxcclxuXHRpc1NodWZmbGVkOiBib29sZWFuLFxyXG5cdHNuaXBwZXQ/OiBzdHJpbmcsXHJcblx0aW1hZ2VVcmw/OiBzdHJpbmcgfCBzdHJpbmdbXSxcclxuXHRoYXNJbWFnZUF2YWlsYWJsZT86IGJvb2xlYW4sXHJcblx0YXBwPzogQXBwLFxyXG5cdG1keEZyb250bWF0dGVyQ2FjaGU/OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw+XHJcbik6IFByb21pc2U8Q2FyZERhdGE+IHtcclxuXHRjb25zdCBmaWxlTmFtZSA9IGVudHJ5LmZpbGUuYmFzZW5hbWUgfHwgZW50cnkuZmlsZS5uYW1lO1xyXG5cclxuXHQvLyBHZXQgdGl0bGUgZnJvbSBwcm9wZXJ0eSBvciBmYWxsYmFjayB0byBmaWxlbmFtZVxyXG5cdC8vIEZvciBNRFggZmlsZXMsIGNoZWNrIGNhY2hlIGZpcnN0IHRvIGF2b2lkIGFzeW5jIGxvYWRpbmdcclxuXHRsZXQgdGl0bGVWYWx1ZTogeyBkYXRhPzogdW5rbm93biB9IHwgbnVsbCA9IG51bGw7XHJcblx0aWYgKGFwcCkge1xyXG5cdFx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcclxuXHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnICYmIG1keEZyb250bWF0dGVyQ2FjaGUpIHtcclxuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBtZHhGcm9udG1hdHRlckNhY2hlW2VudHJ5LmZpbGUucGF0aF07XHJcblx0XHRcdGlmIChmcm9udG1hdHRlcikge1xyXG5cdFx0XHRcdC8vIFN0cmlwIFwibm90ZS5cIiBwcmVmaXggaWYgcHJlc2VudFxyXG5cdFx0XHRcdGNvbnN0IGNsZWFuUHJvcCA9IHNldHRpbmdzLnRpdGxlUHJvcGVydHkuc3RhcnRzV2l0aCgnbm90ZS4nKSA/IHNldHRpbmdzLnRpdGxlUHJvcGVydHkuc3Vic3RyaW5nKDUpIDogc2V0dGluZ3MudGl0bGVQcm9wZXJ0eTtcclxuXHRcdFx0XHRjb25zdCBmcm9udG1hdHRlclZhbHVlID0gZnJvbnRtYXR0ZXJbY2xlYW5Qcm9wXTtcclxuXHRcdFx0XHRpZiAoZnJvbnRtYXR0ZXJWYWx1ZSAhPSBudWxsKSB7XHJcblx0XHRcdFx0XHR0aXRsZVZhbHVlID0geyBkYXRhOiBmcm9udG1hdHRlclZhbHVlIH07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIElmIGNhY2hlIGRpZG4ndCBoYXZlIGl0LCB1c2UgdGhlIGFzeW5jIG1ldGhvZFxyXG5cdGlmICghdGl0bGVWYWx1ZSkge1xyXG5cdFx0dGl0bGVWYWx1ZSA9IGF3YWl0IGdldEZpcnN0QmFzZXNQcm9wZXJ0eVZhbHVlKGVudHJ5LCBzZXR0aW5ncy50aXRsZVByb3BlcnR5LCBhcHApIGFzIHsgZGF0YT86IHVua25vd24gfSB8IG51bGw7XHJcblx0fVxyXG5cdGNvbnN0IHRpdGxlRGF0YSA9IHRpdGxlVmFsdWU/LmRhdGE7XHJcblx0XHJcblx0Ly8gSGFuZGxlIGFycmF5cyAoZS5nLiwgYWxpYXNlcykgYnkgam9pbmluZyB0aGVtXHJcblx0bGV0IHRpdGxlOiBzdHJpbmc7XHJcblx0aWYgKHRpdGxlRGF0YSAhPSBudWxsICYmIHRpdGxlRGF0YSAhPT0gJycpIHtcclxuXHRcdGlmIChBcnJheS5pc0FycmF5KHRpdGxlRGF0YSkpIHtcclxuXHRcdFx0Ly8gSm9pbiBhcnJheSBpdGVtcyBpbnRvIGEgc3RyaW5nXHJcblx0XHRcdGNvbnN0IGl0ZW1zID0gdGl0bGVEYXRhLm1hcCgoaXRlbTogdW5rbm93bikgPT4ge1xyXG5cdFx0XHRcdGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiAnZGF0YScgaW4gaXRlbSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIFN0cmluZygoaXRlbSBhcyB7IGRhdGE6IHVua25vd24gfSkuZGF0YSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBTdHJpbmcoaXRlbSk7XHJcblx0XHRcdH0pLmZpbHRlcigoczogc3RyaW5nKSA9PiBzLnRyaW0oKS5sZW5ndGggPiAwKTtcclxuXHRcdFx0dGl0bGUgPSBpdGVtcy5sZW5ndGggPiAwID8gaXRlbXMuam9pbignLCAnKSA6IGZpbGVOYW1lO1xyXG5cdFx0fSBlbHNlIGlmICh0eXBlb2YgdGl0bGVEYXRhID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdGl0bGVEYXRhID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHR0aXRsZSA9IFN0cmluZyh0aXRsZURhdGEpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGl0bGUgPSBmaWxlTmFtZTtcclxuXHRcdH1cclxuXHR9IGVsc2Uge1xyXG5cdFx0dGl0bGUgPSBmaWxlTmFtZTtcclxuXHR9XHJcblxyXG5cdC8vIEdldCBmb2xkZXIgcGF0aFxyXG5cdGNvbnN0IHBhdGggPSBlbnRyeS5maWxlLnBhdGg7XHJcblx0Y29uc3QgZm9sZGVyUGF0aCA9IHBhdGguc3BsaXQoJy8nKS5zbGljZSgwLCAtMSkuam9pbignLycpO1xyXG5cclxuXHQvLyBHZXQgWUFNTCB0YWdzIG9ubHlcclxuXHRsZXQgeWFtbFRhZ3NWYWx1ZSA9IGVudHJ5LmdldFZhbHVlKCdub3RlLnRhZ3MnKSBhcyB7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsO1xyXG5cdGxldCB5YW1sVGFnczogc3RyaW5nW10gPSBbXTtcclxuXHJcblx0Ly8gRm9yIE1EWCBmaWxlcywgZmFsbGJhY2sgdG8gbWFudWFsIGZyb250bWF0dGVyIHBhcnNpbmcgaWYgQmFzZXMgQVBJIHJldHVybnMgbnVsbFxyXG5cdGlmICgheWFtbFRhZ3NWYWx1ZSAmJiBhcHApIHtcclxuXHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XHJcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWR4Jykge1xyXG5cdFx0XHQvLyBDaGVjayBjYWNoZSBmaXJzdCwgdGhlbiBmYWxsYmFjayB0byBhc3luYyBsb2FkaW5nXHJcblx0XHRcdGxldCBmcm9udG1hdHRlciA9IG1keEZyb250bWF0dGVyQ2FjaGU/LltlbnRyeS5maWxlLnBhdGhdID8/IG51bGw7XHJcblx0XHRcdGlmIChmcm9udG1hdHRlciA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0ZnJvbnRtYXR0ZXIgPSBhd2FpdCBnZXRGaWxlRnJvbnRtYXR0ZXIoYXBwLCBmaWxlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXI/LnRhZ3MpIHtcclxuXHRcdFx0XHRjb25zdCB0YWdEYXRhID0gZnJvbnRtYXR0ZXIudGFncztcclxuXHRcdFx0XHRjb25zdCByYXdUYWdzID0gQXJyYXkuaXNBcnJheSh0YWdEYXRhKVxyXG5cdFx0XHRcdFx0PyB0YWdEYXRhLm1hcCgodDogdW5rbm93bikgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAodCAmJiB0eXBlb2YgdCA9PT0gJ29iamVjdCcgJiYgdCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSh0KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIHQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0ID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBTdHJpbmcodCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cmV0dXJuIHQgPyBKU09OLnN0cmluZ2lmeSh0KSA6ICcnO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdDogKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKHRhZ0RhdGEgJiYgdHlwZW9mIHRhZ0RhdGEgPT09ICdvYmplY3QnICYmIHRhZ0RhdGEgIT09IG51bGwpIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gW0pTT04uc3RyaW5naWZ5KHRhZ0RhdGEpXTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIHRhZ0RhdGEgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0YWdEYXRhID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBbU3RyaW5nKHRhZ0RhdGEpXTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdGFnRGF0YSA/IFtKU09OLnN0cmluZ2lmeSh0YWdEYXRhKV0gOiBbJyddO1xyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHR5YW1sVGFncyA9IHJhd1RhZ3MubWFwKHRhZyA9PiB0YWcucmVwbGFjZSgvXiMvLCAnJykpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpZiAoeWFtbFRhZ3NWYWx1ZSAmJiB5YW1sVGFnc1ZhbHVlLmRhdGEgIT0gbnVsbCkge1xyXG5cdFx0Y29uc3QgdGFnRGF0YSA9IHlhbWxUYWdzVmFsdWUuZGF0YTtcclxuXHRcdGNvbnN0IHJhd1RhZ3MgPSBBcnJheS5pc0FycmF5KHRhZ0RhdGEpXHJcblx0XHRcdD8gdGFnRGF0YS5tYXAoKHQ6IHVua25vd24pID0+IHtcclxuXHRcdFx0XHRpZiAodCAmJiB0eXBlb2YgdCA9PT0gJ29iamVjdCcgJiYgJ2RhdGEnIGluIHQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBTdHJpbmcoKHQgYXMgeyBkYXRhOiB1bmtub3duIH0pLmRhdGEpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gKHR5cGVvZiB0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdCA9PT0gJ251bWJlcicpID8gU3RyaW5nKHQpIDogJyc7XHJcblx0XHRcdH0pLmZpbHRlcih0ID0+IHQpXHJcblx0XHRcdDogKHR5cGVvZiB0YWdEYXRhID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdGFnRGF0YSA9PT0gJ251bWJlcicpID8gW1N0cmluZyh0YWdEYXRhKV0gOiBbXTtcclxuXHRcdHlhbWxUYWdzID0gcmF3VGFncy5tYXAodGFnID0+IHRhZy5yZXBsYWNlKC9eIy8sICcnKSk7XHJcblx0fVxyXG5cclxuXHQvLyBHZXQgdGFncyBpbiBZQU1MICsgbm90ZSBib2R5XHJcblx0bGV0IGFsbFRhZ3NWYWx1ZSA9IGVudHJ5LmdldFZhbHVlKCdmaWxlLnRhZ3MnKSBhcyB7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsO1xyXG5cdGxldCB0YWdzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuXHRcdGlmIChhbGxUYWdzVmFsdWUgJiYgYWxsVGFnc1ZhbHVlLmRhdGEgIT0gbnVsbCkge1xyXG5cdFx0XHRjb25zdCB0YWdEYXRhID0gYWxsVGFnc1ZhbHVlLmRhdGE7XHJcblx0XHRcdGNvbnN0IHJhd1RhZ3MgPSBBcnJheS5pc0FycmF5KHRhZ0RhdGEpXHJcblx0XHRcdFx0PyB0YWdEYXRhLm1hcCgodDogdW5rbm93bikgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHQgJiYgdHlwZW9mIHQgPT09ICdvYmplY3QnICYmIHQgIT09IG51bGwgJiYgJ2RhdGEnIGluIHQpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgaXRlbURhdGEgPSAodCBhcyB7IGRhdGE6IHVua25vd24gfSkuZGF0YTtcclxuXHRcdFx0XHRcdFx0aWYgKGl0ZW1EYXRhICYmIHR5cGVvZiBpdGVtRGF0YSA9PT0gJ29iamVjdCcgJiYgaXRlbURhdGEgIT09IG51bGwpIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoaXRlbURhdGEpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHJldHVybiBTdHJpbmcoaXRlbURhdGEpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKHQgJiYgdHlwZW9mIHQgPT09ICdvYmplY3QnICYmIHQgIT09IG51bGwpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuICh0eXBlb2YgdCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHQgPT09ICdudW1iZXInKSA/IFN0cmluZyh0KSA6ICcnO1xyXG5cdFx0XHRcdH0pLmZpbHRlcigodCk6IHQgaXMgc3RyaW5nID0+IHR5cGVvZiB0ID09PSAnc3RyaW5nJyAmJiB0Lmxlbmd0aCA+IDApXHJcblx0XHRcdFx0OiAoKCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRhZ0RhdGEgJiYgdHlwZW9mIHRhZ0RhdGEgPT09ICdvYmplY3QnICYmIHRhZ0RhdGEgIT09IG51bGwpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIFtKU09OLnN0cmluZ2lmeSh0YWdEYXRhKV07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZXR1cm4gKHR5cGVvZiB0YWdEYXRhID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdGFnRGF0YSA9PT0gJ251bWJlcicpID8gW1N0cmluZyh0YWdEYXRhKV0gOiBbXTtcclxuXHRcdFx0XHR9KSgpO1xyXG5cdFx0XHR0YWdzID0gcmF3VGFncy5tYXAodGFnID0+IHRhZy5yZXBsYWNlKC9eIy8sICcnKSk7XHJcblx0XHR9IGVsc2UgaWYgKCFhbGxUYWdzVmFsdWUgJiYgYXBwKSB7XHJcblx0XHRcdC8vIEZvciBNRFggZmlsZXMsIHVzZSBZQU1MIHRhZ3MgKG5vIGJvZHkgdGFncyBzaW5jZSBtZXRhZGF0YSBjYWNoZSBkb2Vzbid0IHdvcmspXHJcblx0XHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdFx0Ly8gRm9yIE1EWCwgZmlsZS50YWdzIGlzIHNhbWUgYXMgbm90ZS50YWdzIChubyBib2R5IHBhcnNpbmcpXHJcblx0XHRcdFx0Ly8gRnJvbnRtYXR0ZXIgYWxyZWFkeSBsb2FkZWQgYWJvdmUgaWYgbmVlZGVkXHJcblx0XHRcdFx0dGFncyA9IFsuLi55YW1sVGFnc107XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0Ly8gR2V0IHRpbWVzdGFtcHNcclxuXHRjb25zdCBjdGltZSA9IGVudHJ5LmZpbGUuc3RhdC5jdGltZTtcclxuXHRjb25zdCBtdGltZSA9IGVudHJ5LmZpbGUuc3RhdC5tdGltZTtcclxuXHJcblx0Ly8gR2V0IHRhZ3MgZnJvbSBzcGVjaWZpZWQgcHJvcGVydHkgaWYgZW5hYmxlZFxyXG5cdGxldCBkaXNwbGF5VGFnczogc3RyaW5nW10gPSBbXTtcclxuXHRpZiAoc2V0dGluZ3Muc2hvd1RhZ3MgJiYgc2V0dGluZ3MudGFnc1Byb3BlcnR5KSB7XHJcblx0XHRjb25zdCB0YWdzVmFsdWUgPSBhd2FpdCBnZXRGaXJzdEJhc2VzUHJvcGVydHlWYWx1ZShlbnRyeSwgc2V0dGluZ3MudGFnc1Byb3BlcnR5LCBhcHApIGFzIHsgZGF0YT86IHVua25vd24gfSB8IG51bGw7XHJcblx0XHRpZiAodGFnc1ZhbHVlICYmIHRhZ3NWYWx1ZS5kYXRhICE9IG51bGwpIHtcclxuXHRcdFx0Y29uc3QgdGFnRGF0YSA9IHRhZ3NWYWx1ZS5kYXRhO1xyXG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheSh0YWdEYXRhKSkge1xyXG5cdFx0XHRcdGRpc3BsYXlUYWdzID0gdGFnRGF0YS5tYXAoKHQ6IHVua25vd24pID0+IHtcclxuXHRcdFx0XHRcdGlmICh0ICYmIHR5cGVvZiB0ID09PSAnb2JqZWN0JyAmJiAnZGF0YScgaW4gdCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gU3RyaW5nKCh0IGFzIHsgZGF0YTogdW5rbm93biB9KS5kYXRhKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiAodHlwZW9mIHQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0ID09PSAnbnVtYmVyJykgPyBTdHJpbmcodCkgOiAnJztcclxuXHRcdFx0XHR9KS5maWx0ZXIoKHQpOiB0IGlzIHN0cmluZyA9PiB0eXBlb2YgdCA9PT0gJ3N0cmluZycgJiYgdC5sZW5ndGggPiAwKTtcclxuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgdGFnRGF0YSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHRhZ0RhdGEgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0ZGlzcGxheVRhZ3MgPSBbU3RyaW5nKHRhZ0RhdGEpXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gQ3JlYXRlIGJhc2UgY2FyZCBkYXRhXHJcblx0Y29uc3QgY2FyZERhdGE6IENhcmREYXRhID0ge1xyXG5cdFx0cGF0aCxcclxuXHRcdG5hbWU6IGZpbGVOYW1lLFxyXG5cdFx0dGl0bGUsXHJcblx0XHR0YWdzLFxyXG5cdFx0eWFtbFRhZ3MsXHJcblx0XHRjdGltZSxcclxuXHRcdG10aW1lLFxyXG5cdFx0Zm9sZGVyUGF0aCxcclxuXHRcdHNuaXBwZXQsXHJcblx0XHRpbWFnZVVybCxcclxuXHRcdGhhc0ltYWdlQXZhaWxhYmxlOiBoYXNJbWFnZUF2YWlsYWJsZSB8fCBmYWxzZSxcclxuXHRcdGRpc3BsYXlUYWdzOiBkaXNwbGF5VGFncy5sZW5ndGggPiAwID8gZGlzcGxheVRhZ3MgOiB1bmRlZmluZWRcclxuXHR9O1xyXG5cclxuXHQvLyBSZXNvbHZlIHByb3BlcnRpZXNcclxuXHRjb25zdCBwcm9wcyA9IFtcclxuXHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkyLFxyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MyxcclxuXHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTQsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk1LFxyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NixcclxuXHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTcsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk4LFxyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OSxcclxuXHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEwLFxyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTEsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMixcclxuXHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEzLFxyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTRcclxuXHRdO1xyXG5cclxuXHQvLyBEZXRlY3QgZHVwbGljYXRlc1xyXG5cdGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHRjb25zdCBlZmZlY3RpdmVQcm9wcyA9IHByb3BzLm1hcChwcm9wID0+IHtcclxuXHRcdGlmICghcHJvcCB8fCBwcm9wID09PSAnJykgcmV0dXJuICcnO1xyXG5cdFx0aWYgKHNlZW4uaGFzKHByb3ApKSByZXR1cm4gJyc7XHJcblx0XHRzZWVuLmFkZChwcm9wKTtcclxuXHRcdHJldHVybiBwcm9wO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBTdG9yZSBwcm9wZXJ0eSBuYW1lc1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTEgPSBlZmZlY3RpdmVQcm9wc1swXSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lMiA9IGVmZmVjdGl2ZVByb3BzWzFdIHx8IHVuZGVmaW5lZDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eU5hbWUzID0gZWZmZWN0aXZlUHJvcHNbMl0gfHwgdW5kZWZpbmVkO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTQgPSBlZmZlY3RpdmVQcm9wc1szXSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lNSA9IGVmZmVjdGl2ZVByb3BzWzRdIHx8IHVuZGVmaW5lZDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eU5hbWU2ID0gZWZmZWN0aXZlUHJvcHNbNV0gfHwgdW5kZWZpbmVkO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTcgPSBlZmZlY3RpdmVQcm9wc1s2XSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lOCA9IGVmZmVjdGl2ZVByb3BzWzddIHx8IHVuZGVmaW5lZDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eU5hbWU5ID0gZWZmZWN0aXZlUHJvcHNbOF0gfHwgdW5kZWZpbmVkO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTEwID0gZWZmZWN0aXZlUHJvcHNbOV0gfHwgdW5kZWZpbmVkO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTExID0gZWZmZWN0aXZlUHJvcHNbMTBdIHx8IHVuZGVmaW5lZDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eU5hbWUxMiA9IGVmZmVjdGl2ZVByb3BzWzExXSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lMTMgPSBlZmZlY3RpdmVQcm9wc1sxMl0gfHwgdW5kZWZpbmVkO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTE0ID0gZWZmZWN0aXZlUHJvcHNbMTNdIHx8IHVuZGVmaW5lZDtcclxuXHJcblx0Ly8gUmVzb2x2ZSBwcm9wZXJ0eSB2YWx1ZXNcclxuXHQvLyBSZXNvbHZlIHByb3BlcnR5IHZhbHVlcyAoYXN5bmMgZm9yIE1EWCBzdXBwb3J0LCBidXQgdXNlcyBjYWNoZSB3aGVuIGF2YWlsYWJsZSlcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTEgPSBlZmZlY3RpdmVQcm9wc1swXSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbMF0sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5MiA9IGVmZmVjdGl2ZVByb3BzWzFdID8gYXdhaXQgcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhlZmZlY3RpdmVQcm9wc1sxXSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblx0Y2FyZERhdGEucHJvcGVydHkzID0gZWZmZWN0aXZlUHJvcHNbMl0gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzJdLCBlbnRyeSwgY2FyZERhdGEsIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpIDogbnVsbDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTQgPSBlZmZlY3RpdmVQcm9wc1szXSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbM10sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5NSA9IGVmZmVjdGl2ZVByb3BzWzRdID8gYXdhaXQgcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhlZmZlY3RpdmVQcm9wc1s0XSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblx0Y2FyZERhdGEucHJvcGVydHk2ID0gZWZmZWN0aXZlUHJvcHNbNV0gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzVdLCBlbnRyeSwgY2FyZERhdGEsIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpIDogbnVsbDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTcgPSBlZmZlY3RpdmVQcm9wc1s2XSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbNl0sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5OCA9IGVmZmVjdGl2ZVByb3BzWzddID8gYXdhaXQgcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhlZmZlY3RpdmVQcm9wc1s3XSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblx0Y2FyZERhdGEucHJvcGVydHk5ID0gZWZmZWN0aXZlUHJvcHNbOF0gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzhdLCBlbnRyeSwgY2FyZERhdGEsIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpIDogbnVsbDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTEwID0gZWZmZWN0aXZlUHJvcHNbOV0gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzldLCBlbnRyeSwgY2FyZERhdGEsIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpIDogbnVsbDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTExID0gZWZmZWN0aXZlUHJvcHNbMTBdID8gYXdhaXQgcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhlZmZlY3RpdmVQcm9wc1sxMF0sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5MTIgPSBlZmZlY3RpdmVQcm9wc1sxMV0gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzExXSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblx0Y2FyZERhdGEucHJvcGVydHkxMyA9IGVmZmVjdGl2ZVByb3BzWzEyXSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbMTJdLCBlbnRyeSwgY2FyZERhdGEsIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpIDogbnVsbDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTE0ID0gZWZmZWN0aXZlUHJvcHNbMTNdID8gYXdhaXQgcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhlZmZlY3RpdmVQcm9wc1sxM10sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cclxuXHRyZXR1cm4gY2FyZERhdGE7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCYXRjaCB0cmFuc2Zvcm0gQmFzZXMgZW50cmllcyB0byBDYXJkRGF0YSBhcnJheVxyXG4gKiBTdXBwb3J0cyBNRFggZmlsZXMgdmlhIG1hbnVhbCBmcm9udG1hdHRlciBwYXJzaW5nXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdHJhbnNmb3JtQmFzZXNFbnRyaWVzKFxyXG5cdGVudHJpZXM6IEJhc2VzRW50cnlbXSxcclxuXHRzZXR0aW5nczogQ01TU2V0dGluZ3MsXHJcblx0c29ydE1ldGhvZDogc3RyaW5nLFxyXG5cdGlzU2h1ZmZsZWQ6IGJvb2xlYW4sXHJcblx0c25pcHBldHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sXHJcblx0aW1hZ2VzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXT4sXHJcblx0aGFzSW1hZ2VBdmFpbGFibGU6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+LFxyXG5cdGFwcD86IEFwcCxcclxuXHRtZHhGcm9udG1hdHRlckNhY2hlPzogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPlxyXG4pOiBQcm9taXNlPENhcmREYXRhW10+IHtcclxuXHRyZXR1cm4gUHJvbWlzZS5hbGwoZW50cmllcy5tYXAoZW50cnkgPT4gYmFzZXNFbnRyeVRvQ2FyZERhdGEoXHJcblx0XHRlbnRyeSxcclxuXHRcdHNldHRpbmdzLFxyXG5cdFx0c29ydE1ldGhvZCxcclxuXHRcdGlzU2h1ZmZsZWQsXHJcblx0XHRzbmlwcGV0c1tlbnRyeS5maWxlLnBhdGhdLFxyXG5cdFx0aW1hZ2VzW2VudHJ5LmZpbGUucGF0aF0sXHJcblx0XHRoYXNJbWFnZUF2YWlsYWJsZVtlbnRyeS5maWxlLnBhdGhdLFxyXG5cdFx0YXBwLFxyXG5cdFx0bWR4RnJvbnRtYXR0ZXJDYWNoZVxyXG5cdCkpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlc29sdmUgcHJvcGVydHkgdmFsdWUgZm9yIEJhc2VzIGVudHJ5IChhc3luYyB2ZXJzaW9uIHdpdGggTURYIHN1cHBvcnQpXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhcclxuXHRwcm9wZXJ0eU5hbWU6IHN0cmluZyxcclxuXHRlbnRyeTogQmFzZXNFbnRyeSxcclxuXHRjYXJkRGF0YTogQ2FyZERhdGEsXHJcblx0c2V0dGluZ3M6IENNU1NldHRpbmdzLFxyXG5cdGFwcD86IEFwcCxcclxuXHRtZHhGcm9udG1hdHRlckNhY2hlPzogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPlxyXG4pOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuXHRpZiAoIXByb3BlcnR5TmFtZSB8fCBwcm9wZXJ0eU5hbWUgPT09ICcnKSB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8vIEhhbmRsZSBzcGVjaWFsIHByb3BlcnRpZXNcclxuXHRpZiAocHJvcGVydHlOYW1lID09PSAnZmlsZS5wYXRoJyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdmaWxlIHBhdGgnKSB7XHJcblx0XHRyZXR1cm4gY2FyZERhdGEuZm9sZGVyUGF0aCB8fCBudWxsO1xyXG5cdH1cclxuXHJcblx0aWYgKHByb3BlcnR5TmFtZSA9PT0gJ3RhZ3MnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ25vdGUudGFncycpIHtcclxuXHRcdHJldHVybiBjYXJkRGF0YS55YW1sVGFncy5sZW5ndGggPiAwID8gJ3RhZ3MnIDogbnVsbDtcclxuXHR9XHJcblxyXG5cdGlmIChwcm9wZXJ0eU5hbWUgPT09ICdmaWxlLnRhZ3MnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUgdGFncycpIHtcclxuXHRcdHJldHVybiBjYXJkRGF0YS50YWdzLmxlbmd0aCA+IDAgPyAndGFncycgOiBudWxsO1xyXG5cdH1cclxuXHJcblx0aWYgKHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUuY3RpbWUnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ2NyZWF0ZWQgdGltZScpIHtcclxuXHRcdHJldHVybiBuZXcgRGF0ZShjYXJkRGF0YS5jdGltZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcblx0fVxyXG5cclxuXHRpZiAocHJvcGVydHlOYW1lID09PSAnZmlsZS5tdGltZScgfHwgcHJvcGVydHlOYW1lID09PSAnbW9kaWZpZWQgdGltZScpIHtcclxuXHRcdHJldHVybiBuZXcgRGF0ZShjYXJkRGF0YS5tdGltZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcblx0fVxyXG5cclxuXHQvLyBHZW5lcmljIHByb3BlcnR5OiByZWFkIGZyb20gZnJvbnRtYXR0ZXJcclxuXHQvLyBGb3IgTURYIGZpbGVzLCBjaGVjayBjYWNoZSBmaXJzdCB0byBhdm9pZCBhc3luYyBsb2FkaW5nXHJcblx0bGV0IHZhbHVlOiB1bmtub3duID0gbnVsbDtcclxuXHRpZiAoYXBwKSB7XHJcblx0XHRjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChlbnRyeS5maWxlLnBhdGgpO1xyXG5cdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21keCcgJiYgbWR4RnJvbnRtYXR0ZXJDYWNoZSkge1xyXG5cdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IG1keEZyb250bWF0dGVyQ2FjaGVbZW50cnkuZmlsZS5wYXRoXTtcclxuXHRcdFx0aWYgKGZyb250bWF0dGVyKSB7XHJcblx0XHRcdFx0Ly8gU3RyaXAgXCJub3RlLlwiIHByZWZpeCBpZiBwcmVzZW50XHJcblx0XHRcdFx0Y29uc3QgY2xlYW5Qcm9wID0gcHJvcGVydHlOYW1lLnN0YXJ0c1dpdGgoJ25vdGUuJykgPyBwcm9wZXJ0eU5hbWUuc3Vic3RyaW5nKDUpIDogcHJvcGVydHlOYW1lO1xyXG5cdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyVmFsdWUgPSBmcm9udG1hdHRlcltjbGVhblByb3BdO1xyXG5cdFx0XHRcdGlmIChmcm9udG1hdHRlclZhbHVlICE9IG51bGwpIHtcclxuXHRcdFx0XHRcdC8vIFJldHVybiBpbiBCYXNlcyBBUEkgZm9ybWF0OiB7IGRhdGE6IHZhbHVlIH1cclxuXHRcdFx0XHRcdHZhbHVlID0geyBkYXRhOiBmcm9udG1hdHRlclZhbHVlIH07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIElmIGNhY2hlIGRpZG4ndCBoYXZlIGl0LCB1c2UgdGhlIGFzeW5jIG1ldGhvZFxyXG5cdGlmICghdmFsdWUpIHtcclxuXHRcdHZhbHVlID0gYXdhaXQgZ2V0Rmlyc3RCYXNlc1Byb3BlcnR5VmFsdWUoZW50cnksIHByb3BlcnR5TmFtZSwgYXBwKTtcclxuXHR9XHJcblx0aWYgKCF2YWx1ZSkgcmV0dXJuIG51bGw7XHJcblxyXG5cdC8vIFR5cGUgZ3VhcmQgZm9yIHZhbHVlXHJcblx0Y29uc3QgdmFsdWVPYmogPSB2YWx1ZSBhcyB7IGRhdGU/OiBEYXRlOyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcclxuXHRpZiAoIXZhbHVlT2JqKSByZXR1cm4gbnVsbDtcclxuXHJcblx0Ly8gQ2hlY2sgaWYgaXQncyBhIGRhdGUvZGF0ZXRpbWUgdmFsdWVcclxuXHRpZiAoJ2RhdGUnIGluIHZhbHVlT2JqICYmIHZhbHVlT2JqLmRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcblx0XHRyZXR1cm4gdmFsdWVPYmouZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuXHR9XHJcblxyXG5cdC8vIEZvciBub24tZGF0ZSBwcm9wZXJ0aWVzLCBleHRyYWN0IC5kYXRhXHJcblx0Y29uc3QgZGF0YSA9IHZhbHVlT2JqLmRhdGE7XHJcblx0XHJcblx0Ly8gSU1QT1JUQU5UOiBSZXR1cm4gXCJcIiBmb3IgZW1wdHkgKHByb3BlcnR5IGV4aXN0cyBidXQgaXMgZW1wdHkpLCBudWxsIGZvciBtaXNzaW5nIChwcm9wZXJ0eSBkb2Vzbid0IGV4aXN0KVxyXG5cdC8vIFRoaXMgbWF0Y2hlcyBEeW5hbWljIFZpZXdzIGJlaGF2aW9yIGZvciBoaWRlIG1pc3NpbmcvZW1wdHkgcHJvcGVydGllc1xyXG5cdGlmIChkYXRhID09IG51bGwpIHtcclxuXHRcdHJldHVybiBudWxsOyAvLyBQcm9wZXJ0eSBkb2Vzbid0IGV4aXN0XHJcblx0fVxyXG5cdFxyXG5cdGlmIChkYXRhID09PSAnJykge1xyXG5cdFx0cmV0dXJuIFwiXCI7IC8vIFByb3BlcnR5IGV4aXN0cyBidXQgaXMgZW1wdHlcclxuXHR9XHJcblxyXG5cdC8vIEhhbmRsZSBhcnJheXMgKGUuZy4sIGFsaWFzZXMsIGxpc3RzKVxyXG5cdC8vIENoZWNrIGlmIGRhdGEgaXMgYWxyZWFkeSBhIHN0cmluZyB0aGF0IG1pZ2h0IGJlIGR1cGxpY2F0ZWRcclxuXHRpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XHJcblx0XHRjb25zdCB0cmltbWVkID0gZGF0YS50cmltKCk7XHJcblx0XHRpZiAodHJpbW1lZC5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIFwiXCI7IC8vIEVtcHR5IHN0cmluZ1xyXG5cdFx0fVxyXG5cdFx0Ly8gUmVtb3ZlIGR1cGxpY2F0aW9uIGlmIHByZXNlbnQgKGhhbmRsZXMgY2FzZXMgd2hlcmUgQmFzZXMgcmV0dXJucyBkdXBsaWNhdGVkIHN0cmluZ3MpXHJcblx0XHRyZXR1cm4gcmVtb3ZlRHVwbGljYXRpb24odHJpbW1lZCk7XHJcblx0fVxyXG5cdFxyXG5cdGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcblx0XHRpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIFwiXCI7IC8vIEVtcHR5IGFycmF5XHJcblx0XHR9XHJcblx0XHQvLyBDb252ZXJ0IGFycmF5IGl0ZW1zIHRvIHN0cmluZ3MgYW5kIGpvaW4sIHJlbW92aW5nIGR1cGxpY2F0ZXNcclxuXHRcdGNvbnN0IHVuaXF1ZUl0ZW1zID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblx0XHRjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XHJcblx0XHRcclxuXHRcdGZvciAoY29uc3QgaXRlbSBvZiBkYXRhKSB7XHJcblx0XHRcdGxldCBzdHI6IHN0cmluZztcclxuXHRcdFx0aWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICdkYXRhJyBpbiBpdGVtKSB7XHJcblx0XHRcdFx0Y29uc3QgaXRlbURhdGEgPSAoaXRlbSBhcyB7IGRhdGE6IHVua25vd24gfSkuZGF0YTtcclxuXHRcdFx0XHQvLyBIYW5kbGUgbmVzdGVkIGRhdGEgc3RydWN0dXJlcyAtIGlmIGRhdGEgaXRzZWxmIGlzIGFuIG9iamVjdCB3aXRoIGRhdGEsIGV4dHJhY3QgcmVjdXJzaXZlbHlcclxuXHRcdFx0XHRpZiAoaXRlbURhdGEgJiYgdHlwZW9mIGl0ZW1EYXRhID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShpdGVtRGF0YSkgJiYgJ2RhdGEnIGluIGl0ZW1EYXRhKSB7XHJcblx0XHRcdFx0XHRzdHIgPSBTdHJpbmcoKGl0ZW1EYXRhIGFzIHsgZGF0YTogdW5rbm93biB9KS5kYXRhKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0c3RyID0gU3RyaW5nKGl0ZW1EYXRhKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgaXRlbSAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdC8vIElmIGl0ZW0gaXMgYW4gb2JqZWN0IGJ1dCBkb2Vzbid0IGhhdmUgJ2RhdGEnLCB0cnkgdG8gZXh0cmFjdCB2YWx1ZSBkaXJlY3RseVxyXG5cdFx0XHRcdC8vIFRoaXMgaGFuZGxlcyBjYXNlcyB3aGVyZSBCYXNlcyBtaWdodCByZXR1cm4ge3ZhbHVlOiBcIi4uLlwifSBvciBzaW1pbGFyXHJcblx0XHRcdFx0c3RyID0gU3RyaW5nKGl0ZW0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHN0ciA9IFN0cmluZyhpdGVtKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gUmVtb3ZlIGR1cGxpY2F0aW9uIEJFRk9SRSBjaGVja2luZyB1bmlxdWVuZXNzIChoYW5kbGVzIGNhc2VzIHdoZXJlIEJhc2VzIHJldHVybnMgZHVwbGljYXRlZCBzdHJpbmdzKVxyXG5cdFx0XHRjb25zdCB0cmltbWVkID0gc3RyLnRyaW0oKTtcclxuXHRcdFx0aWYgKHRyaW1tZWQgJiYgdHJpbW1lZCAhPT0gJycpIHtcclxuXHRcdFx0XHRjb25zdCBkZWR1cGxpY2F0ZWQgPSByZW1vdmVEdXBsaWNhdGlvbih0cmltbWVkKTtcclxuXHRcdFx0XHRpZiAoZGVkdXBsaWNhdGVkICYmIGRlZHVwbGljYXRlZCAhPT0gJycgJiYgIXVuaXF1ZUl0ZW1zLmhhcyhkZWR1cGxpY2F0ZWQpKSB7XHJcblx0XHRcdFx0XHR1bmlxdWVJdGVtcy5hZGQoZGVkdXBsaWNhdGVkKTtcclxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGRlZHVwbGljYXRlZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oZ2V0TGlzdFNlcGFyYXRvcigpKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0Ly8gQ29udmVydCB0byBzdHJpbmdcclxuXHRpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XHJcblx0XHRsZXQgc3RyID0gZGF0YS50cmltKCk7XHJcblx0XHRpZiAoc3RyLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gUmVtb3ZlIGFueSBkdXBsaWNhdGlvblxyXG5cdFx0cmV0dXJuIHJlbW92ZUR1cGxpY2F0aW9uKHN0cik7XHJcblx0fVxyXG5cdFxyXG5cdGlmICh0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGRhdGEgPT09ICdib29sZWFuJykge1xyXG5cdFx0cmV0dXJuIFN0cmluZyhkYXRhKTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBudWxsO1xyXG59XHJcblxyXG4iLCAiLyoqXG4gKiBQcm9wZXJ0eSB1dGlsaXR5IGZ1bmN0aW9uc1xuICogUG9ydGVkIGZyb20gRHluYW1pYyBWaWV3c1xuICogVXBkYXRlZCB0byBzdXBwb3J0IE1EWCBmaWxlcyB2aWEgbWFudWFsIGZyb250bWF0dGVyIHBhcnNpbmdcbiAqL1xuXG5pbXBvcnQgdHlwZSB7IEFwcCwgQmFzZXNFbnRyeSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgZ2V0RmlsZUZyb250bWF0dGVyIH0gZnJvbSAnLi9mcm9udG1hdHRlci1oZWxwZXInO1xuXG4vKipcbiAqIEdldCBmaXJzdCBub24tZW1wdHkgcHJvcGVydHkgdmFsdWUgZnJvbSBjb21tYS1zZXBhcmF0ZWQgbGlzdCAoQmFzZXMpXG4gKiBTdXBwb3J0cyBNRFggZmlsZXMgdmlhIG1hbnVhbCBmcm9udG1hdHRlciBwYXJzaW5nIHdoZW4gQmFzZXMgQVBJIGZhaWxzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGaXJzdEJhc2VzUHJvcGVydHlWYWx1ZShcblx0ZW50cnk6IEJhc2VzRW50cnksIFxuXHRwcm9wZXJ0eVN0cmluZzogc3RyaW5nLFxuXHRhcHA/OiBBcHBcbik6IFByb21pc2U8dW5rbm93bj4ge1xuXHRpZiAoIXByb3BlcnR5U3RyaW5nIHx8ICFwcm9wZXJ0eVN0cmluZy50cmltKCkpIHJldHVybiBudWxsO1xuXG5cdGNvbnN0IHByb3BlcnRpZXMgPSBwcm9wZXJ0eVN0cmluZy5zcGxpdCgnLCcpLm1hcChwID0+IHAudHJpbSgpKS5maWx0ZXIocCA9PiBwKTtcblxuXHRmb3IgKGNvbnN0IHByb3Agb2YgcHJvcGVydGllcykge1xuXHRcdGNvbnN0IHZhbHVlID0gZW50cnkuZ2V0VmFsdWUocHJvcCBhcyBgbm90ZS4ke3N0cmluZ31gIHwgYGZvcm11bGEuJHtzdHJpbmd9YCB8IGBmaWxlLiR7c3RyaW5nfWApO1xuXG5cdFx0Ly8gQ2hlY2sgaWYgcHJvcGVydHkgZXhpc3RzIGFuZCBoYXMgYSB2YWx1ZVxuXHRcdGNvbnN0IHZhbHVlT2JqID0gdmFsdWUgYXMgeyBkYXRlPzogRGF0ZTsgZGF0YT86IHVua25vd24gfSB8IG51bGw7XG5cdFx0Y29uc3QgcHJvcGVydHlFeGlzdHMgPSB2YWx1ZU9iaiAmJiAoXG5cdFx0XHQoJ2RhdGUnIGluIHZhbHVlT2JqICYmIHZhbHVlT2JqLmRhdGUgaW5zdGFuY2VvZiBEYXRlKSB8fFxuXHRcdFx0KCdkYXRhJyBpbiB2YWx1ZU9iaiAmJiB2YWx1ZU9iai5kYXRhICE9IG51bGwpXG5cdFx0KTtcblxuXHRcdGlmIChwcm9wZXJ0eUV4aXN0cykge1xuXHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdH1cblxuXHRcdC8vIEZvciBNRFggZmlsZXMsIGZhbGxiYWNrIHRvIG1hbnVhbCBmcm9udG1hdHRlciBwYXJzaW5nIGlmIEJhc2VzIEFQSSByZXR1cm5lZCBudWxsXG5cdFx0aWYgKCFwcm9wZXJ0eUV4aXN0cyAmJiBhcHApIHtcblx0XHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWR4Jykge1xuXHRcdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcihhcHAsIGZpbGUpO1xuXHRcdFx0XHRpZiAoZnJvbnRtYXR0ZXIpIHtcblx0XHRcdFx0XHQvLyBTdHJpcCBcIm5vdGUuXCIgcHJlZml4IGlmIHByZXNlbnRcblx0XHRcdFx0XHRjb25zdCBjbGVhblByb3AgPSBwcm9wLnN0YXJ0c1dpdGgoJ25vdGUuJykgPyBwcm9wLnN1YnN0cmluZyg1KSA6IHByb3A7XG5cdFx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJWYWx1ZSA9IGZyb250bWF0dGVyW2NsZWFuUHJvcF07XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGZyb250bWF0dGVyVmFsdWUgIT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0Ly8gUmV0dXJuIGluIEJhc2VzIEFQSSBmb3JtYXQ6IHsgZGF0YTogdmFsdWUgfVxuXHRcdFx0XHRcdFx0cmV0dXJuIHsgZGF0YTogZnJvbnRtYXR0ZXJWYWx1ZSB9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEdldCBmaXJzdCBpbWFnZSB2YWx1ZSBmcm9tIHByb3BlcnR5IChCYXNlcylcbiAqIE9ubHkgYWNjZXB0cyB0ZXh0IGFuZCBsaXN0IHByb3BlcnR5IHR5cGVzIGNvbnRhaW5pbmcgaW1hZ2UgcGF0aHMvVVJMc1xuICogUmV0dXJucyBmaXJzdCBpbWFnZSBwYXRoL1VSTCBmb3VuZCwgb3IgZW1wdHkgYXJyYXkgaWYgbm9uZVxuICogU3VwcG9ydHMgTURYIGZpbGVzIHZpYSBtYW51YWwgZnJvbnRtYXR0ZXIgcGFyc2luZyB3aGVuIEJhc2VzIEFQSSBmYWlsc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsQmFzZXNJbWFnZVByb3BlcnR5VmFsdWVzKFxuXHRlbnRyeTogQmFzZXNFbnRyeSwgXG5cdHByb3BlcnR5U3RyaW5nOiBzdHJpbmcsXG5cdGFwcD86IEFwcFxuKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRpZiAoIXByb3BlcnR5U3RyaW5nIHx8ICFwcm9wZXJ0eVN0cmluZy50cmltKCkpIHJldHVybiBbXTtcblxuXHQvLyBVc2UgZmlyc3QgcHJvcGVydHkgb25seSAobm90IGNvbW1hLXNlcGFyYXRlZClcblx0Y29uc3QgcHJvcCA9IHByb3BlcnR5U3RyaW5nLnNwbGl0KCcsJylbMF0udHJpbSgpO1xuXHRpZiAoIXByb3ApIHJldHVybiBbXTtcblxuXHRjb25zdCB2YWx1ZSA9IGVudHJ5LmdldFZhbHVlKHByb3AgYXMgYG5vdGUuJHtzdHJpbmd9YCB8IGBmb3JtdWxhLiR7c3RyaW5nfWAgfCBgZmlsZS4ke3N0cmluZ31gKSBhcyB7IGRhdGE/OiB1bmtub3duOyBkYXRlPzogRGF0ZSB9IHwgbnVsbDtcblxuXHRsZXQgZGF0YTogdW5rbm93biA9IG51bGw7XG5cblx0Ly8gSWYgQmFzZXMgQVBJIHJldHVybmVkIGEgdmFsdWUsIHVzZSBpdFxuXHRpZiAodmFsdWUgJiYgJ2RhdGEnIGluIHZhbHVlKSB7XG5cdFx0ZGF0YSA9IHZhbHVlLmRhdGE7XG5cdH0gZWxzZSBpZiAoYXBwKSB7XG5cdFx0Ly8gRm9yIE1EWCBmaWxlcywgZmFsbGJhY2sgdG8gbWFudWFsIGZyb250bWF0dGVyIHBhcnNpbmdcblx0XHRjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChlbnRyeS5maWxlLnBhdGgpO1xuXHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XG5cdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcihhcHAsIGZpbGUpO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyKSB7XG5cdFx0XHRcdC8vIFN0cmlwIFwibm90ZS5cIiBwcmVmaXggaWYgcHJlc2VudFxuXHRcdFx0XHRjb25zdCBjbGVhblByb3AgPSBwcm9wLnN0YXJ0c1dpdGgoJ25vdGUuJykgPyBwcm9wLnN1YnN0cmluZyg1KSA6IHByb3A7XG5cdFx0XHRcdGRhdGEgPSBmcm9udG1hdHRlcltjbGVhblByb3BdO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFNraXAgaWYgcHJvcGVydHkgZG9lc24ndCBleGlzdFxuXHRpZiAoZGF0YSA9PSBudWxsKSByZXR1cm4gW107XG5cblx0Y29uc3QgaW1hZ2VzOiBzdHJpbmdbXSA9IFtdO1xuXG5cdGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG5cdFx0Ly8gTGlzdCBwcm9wZXJ0eSAtIGdldCBhbGwgdmFsdWVzXG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIGRhdGEpIHtcblx0XHRcdGlmICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGl0ZW0gPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNvbnN0IHN0ciA9IFN0cmluZyhpdGVtKTtcblx0XHRcdFx0aWYgKHN0ciAmJiBzdHIudHJpbSgpKSB7XG5cdFx0XHRcdFx0aW1hZ2VzLnB1c2goc3RyKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIGlmIChkYXRhICE9PSAnJykge1xuXHRcdC8vIFRleHQgcHJvcGVydHkgLSBzaW5nbGUgdmFsdWVcblx0XHRpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJykge1xuXHRcdFx0Y29uc3Qgc3RyID0gU3RyaW5nKGRhdGEpO1xuXHRcdFx0aWYgKHN0ci50cmltKCkpIHtcblx0XHRcdFx0aW1hZ2VzLnB1c2goc3RyKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gaW1hZ2VzO1xufVxuXG4vKipcbiAqIFJlc29sdmUgYSBCYXNlcyBwcm9wZXJ0eSB2YWx1ZSB0byBhIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUJhc2VzUHJvcGVydHkoXG5cdHByb3BlcnR5TmFtZTogc3RyaW5nLFxuXHRlbnRyeTogQmFzZXNFbnRyeSxcblx0Y2FyZDogeyBwYXRoOiBzdHJpbmc7IHByb3BlcnRpZXM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IH1cbik6IHN0cmluZyB8IG51bGwge1xuXHRpZiAoIXByb3BlcnR5TmFtZSB8fCBwcm9wZXJ0eU5hbWUgPT09ICcnKSByZXR1cm4gbnVsbDtcblxuXHQvLyBIYW5kbGUgc3BlY2lhbCBwcm9wZXJ0aWVzXG5cdGlmIChwcm9wZXJ0eU5hbWUgPT09ICdmaWxlLnBhdGgnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ3BhdGgnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUgcGF0aCcpIHtcblx0XHRyZXR1cm4gY2FyZC5wYXRoO1xuXHR9XG5cblx0aWYgKHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUudGFncycgfHwgcHJvcGVydHlOYW1lID09PSAnZmlsZSB0YWdzJykge1xuXHRcdC8vIFJldHVybiB0YWdzIGFzIGNvbW1hLXNlcGFyYXRlZCBzdHJpbmdcblx0XHRjb25zdCB0YWdzID0gY2FyZC5wcm9wZXJ0aWVzLnRhZ3M7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkodGFncykpIHtcblx0XHRcdHJldHVybiB0YWdzLmpvaW4oJywgJyk7XG5cdFx0fVxuXHRcdGlmICh0YWdzICYmIHR5cGVvZiB0YWdzID09PSAnb2JqZWN0JyAmJiB0YWdzICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KHRhZ3MpKSB7XG5cdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodGFncyk7XG5cdFx0fVxuXHRcdGlmICh0YWdzICE9PSBudWxsICYmIHRhZ3MgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIHRhZ3MgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0YWdzID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdGFncyA9PT0gJ2Jvb2xlYW4nKSkge1xuXHRcdFx0cmV0dXJuIFN0cmluZyh0YWdzKTtcblx0XHR9XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRpZiAocHJvcGVydHlOYW1lID09PSAndGFncycgfHwgcHJvcGVydHlOYW1lID09PSAnbm90ZS50YWdzJykge1xuXHRcdGNvbnN0IHRhZ3MgPSBjYXJkLnByb3BlcnRpZXMudGFncztcblx0XHRpZiAoQXJyYXkuaXNBcnJheSh0YWdzKSkge1xuXHRcdFx0cmV0dXJuIHRhZ3Muam9pbignLCAnKTtcblx0XHR9XG5cdFx0aWYgKHRhZ3MgJiYgdHlwZW9mIHRhZ3MgPT09ICdvYmplY3QnICYmIHRhZ3MgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkodGFncykpIHtcblx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSh0YWdzKTtcblx0XHR9XG5cdFx0aWYgKHRhZ3MgIT09IG51bGwgJiYgdGFncyAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgdGFncyA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHRhZ3MgPT09ICdudW1iZXInIHx8IHR5cGVvZiB0YWdzID09PSAnYm9vbGVhbicpKSB7XG5cdFx0XHRyZXR1cm4gU3RyaW5nKHRhZ3MpO1xuXHRcdH1cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIEdldCB2YWx1ZSBmcm9tIEJhc2VzRW50cnlcblx0dHJ5IHtcblx0XHRjb25zdCB2YWx1ZSA9IGVudHJ5LmdldFZhbHVlKHByb3BlcnR5TmFtZSBhcyBgbm90ZS4ke3N0cmluZ31gIHwgYGZvcm11bGEuJHtzdHJpbmd9YCB8IGBmaWxlLiR7c3RyaW5nfWApIGFzIHsgZGF0YT86IHVua25vd247IGRhdGU/OiBEYXRlIH0gfCBudWxsO1xuXHRcdFxuXHRcdGlmICghdmFsdWUpIHJldHVybiBudWxsO1xuXG5cdFx0Ly8gSGFuZGxlIGRhdGUgdmFsdWVzXG5cdFx0aWYgKCdkYXRlJyBpbiB2YWx1ZSAmJiB2YWx1ZS5kYXRlIGluc3RhbmNlb2YgRGF0ZSkge1xuXHRcdFx0cmV0dXJuIHZhbHVlLmRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIGRhdGEgdmFsdWVzXG5cdFx0aWYgKCdkYXRhJyBpbiB2YWx1ZSkge1xuXHRcdFx0Y29uc3QgZGF0YSA9IHZhbHVlLmRhdGE7XG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuXHRcdFx0XHRyZXR1cm4gZGF0YS5tYXAoU3RyaW5nKS5qb2luKCcsICcpO1xuXHRcdFx0fVxuXHRcdGlmIChkYXRhICE9IG51bGwgJiYgZGF0YSAhPT0gJycpIHtcblx0XHRcdGlmICh0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgZGF0YSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShkYXRhKSkge1xuXHRcdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgZGF0YSA9PT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHRcdHJldHVybiBTdHJpbmcoZGF0YSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG5cdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9IGNhdGNoIHtcblx0XHQvLyBGYWxsYmFjayB0byBjYXJkIHByb3BlcnRpZXNcblx0XHRjb25zdCBwcm9wVmFsdWUgPSBjYXJkLnByb3BlcnRpZXNbcHJvcGVydHlOYW1lXTtcblx0XHRpZiAocHJvcFZhbHVlICE9PSB1bmRlZmluZWQgJiYgcHJvcFZhbHVlICE9PSBudWxsKSB7XG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7XG5cdFx0XHRcdHJldHVybiBwcm9wVmFsdWUubWFwKFN0cmluZykuam9pbignLCAnKTtcblx0XHRcdH1cblx0XHRcdGlmICh0eXBlb2YgcHJvcFZhbHVlID09PSAnYm9vbGVhbicpIHtcblx0XHRcdFx0cmV0dXJuIHByb3BWYWx1ZSA/ICdZZXMnIDogJ05vJztcblx0XHRcdH1cblx0XHRcdGlmICh0eXBlb2YgcHJvcFZhbHVlID09PSAnb2JqZWN0JyAmJiBwcm9wVmFsdWUgIT09IG51bGwpIHtcblx0XHRcdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHByb3BWYWx1ZSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodHlwZW9mIHByb3BWYWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHByb3BWYWx1ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHByb3BWYWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHRcdHJldHVybiBTdHJpbmcocHJvcFZhbHVlKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShwcm9wVmFsdWUpO1xuXHRcdH1cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4vKipcbiAqIENvbnZlcnQgcHJvcGVydHkgbmFtZSB0byByZWFkYWJsZSBsYWJlbFxuICogVXNlcyBCYXNlcyBjb25maWcuZ2V0RGlzcGxheU5hbWUoKSBtZXRob2QgKHNhbWUgYXMgRHluYW1pYyBWaWV3cylcbiAqIFxuICogQHBhcmFtIHByb3BlcnR5TmFtZSAtIFRoZSBwcm9wZXJ0eSBuYW1lIChlLmcuLCBcImZvcm11bGEuU2x1Z1wiKVxuICogQHBhcmFtIGFwcCAtIE9ic2lkaWFuIGFwcCBpbnN0YW5jZSAodW51c2VkLCBrZXB0IGZvciBjb21wYXRpYmlsaXR5KVxuICogQHBhcmFtIGJhc2VzQ29uZmlnIC0gQmFzZXMgY29uZmlnIG9iamVjdCB0aGF0IGhhcyBnZXREaXNwbGF5TmFtZSBtZXRob2RcbiAqIEBwYXJhbSBiYXNlc0NvbnRyb2xsZXIgLSBPcHRpb25hbCBCYXNlcyBjb250cm9sbGVyICh1bnVzZWQsIGtlcHQgZm9yIGNvbXBhdGliaWxpdHkpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9wZXJ0eUxhYmVsKFxuXHRwcm9wZXJ0eU5hbWU6IHN0cmluZywgXG5cdGFwcD86IEFwcCwgXG5cdGJhc2VzQ29uZmlnPzogeyBnZXQ/OiAoa2V5OiBzdHJpbmcpID0+IHVua25vd24gfSxcblx0YmFzZXNDb250cm9sbGVyPzogeyBnZXRQcm9wZXJ0eURpc3BsYXlOYW1lPzogKG5hbWU6IHN0cmluZykgPT4gc3RyaW5nIH1cbik6IHN0cmluZyB7XG5cdGlmICghcHJvcGVydHlOYW1lIHx8IHByb3BlcnR5TmFtZSA9PT0gJycpIHJldHVybiAnJztcblxuXHQvLyBVc2UgQmFzZXMgY29uZmlnLmdldERpc3BsYXlOYW1lKCkgbWV0aG9kIChzYW1lIGFzIER5bmFtaWMgVmlld3MpXG5cdGlmIChiYXNlc0NvbmZpZykge1xuXHRcdGNvbnN0IGNvbmZpZ1dpdGhEaXNwbGF5TmFtZSA9IGJhc2VzQ29uZmlnIGFzIHsgZ2V0RGlzcGxheU5hbWU/OiAobmFtZTogc3RyaW5nKSA9PiBzdHJpbmcgfTtcblx0XHRpZiAodHlwZW9mIGNvbmZpZ1dpdGhEaXNwbGF5TmFtZS5nZXREaXNwbGF5TmFtZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgZGlzcGxheU5hbWUgPSBjb25maWdXaXRoRGlzcGxheU5hbWUuZ2V0RGlzcGxheU5hbWUocHJvcGVydHlOYW1lKTtcblx0XHRcdFx0aWYgKGRpc3BsYXlOYW1lICYmIHR5cGVvZiBkaXNwbGF5TmFtZSA9PT0gJ3N0cmluZycgJiYgZGlzcGxheU5hbWUudHJpbSgpICE9PSAnJykge1xuXHRcdFx0XHRcdHJldHVybiBkaXNwbGF5TmFtZTtcblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdC8vIEZhbGwgdGhyb3VnaCB0byByZXR1cm4gcHJvcGVydHkgbmFtZVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIEZhbGxiYWNrOiByZXR1cm4gcHJvcGVydHkgbmFtZSBhcy1pcyAoc2FtZSBhcyBEeW5hbWljIFZpZXdzKVxuXHRyZXR1cm4gcHJvcGVydHlOYW1lO1xufVxuXG5cbiIsICIvKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIHRvIHJlYWQgU3R5bGUgU2V0dGluZ3MgdmFsdWVzIGZyb20gQ1NTIHZhcmlhYmxlcyBhbmQgYm9keSBjbGFzc2VzXG4gKiBCYXNlZCBvbiBEeW5hbWljIFZpZXdzIHN0eWxlLXNldHRpbmdzLnRzXG4gKi9cblxuLyoqXG4gKiBSZWFkIGEgQ1NTIHZhcmlhYmxlIHZhbHVlIGZyb20gdGhlIGRvY3VtZW50IGJvZHlcbiAqL1xuZnVuY3Rpb24gZ2V0Q1NTVmFyaWFibGUobmFtZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG5cdGNvbnN0IHZhbHVlID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpLnRyaW0oKTtcblx0cmV0dXJuIHZhbHVlIHx8IGRlZmF1bHRWYWx1ZTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIENTUyB2YXJpYWJsZSBhcyBhIG51bWJlciAocmVtb3ZpbmcgdW5pdHMgbGlrZSAncHgnKVxuICovXG5mdW5jdGlvbiBnZXRDU1NWYXJpYWJsZUFzTnVtYmVyKG5hbWU6IHN0cmluZywgZGVmYXVsdFZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xuXHRjb25zdCB2YWx1ZSA9IGdldENTU1ZhcmlhYmxlKG5hbWUsIFwiXCIpO1xuXHRpZiAoIXZhbHVlKSByZXR1cm4gZGVmYXVsdFZhbHVlO1xuXHRjb25zdCBwYXJzZWQgPSBwYXJzZUZsb2F0KHZhbHVlKTtcblx0cmV0dXJuIGlzTmFOKHBhcnNlZCkgPyBkZWZhdWx0VmFsdWUgOiBwYXJzZWQ7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYm9keSBoYXMgYSBzcGVjaWZpYyBjbGFzc1xuICovXG5mdW5jdGlvbiBoYXNCb2R5Q2xhc3MoY2xhc3NOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcblx0cmV0dXJuIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XG59XG5cbi8qKlxuICogR2V0IG1pbmltdW0gZ3JpZCBjb2x1bW5zIGZyb20gQ1NTIHZhcmlhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNaW5HcmlkQ29sdW1ucygpOiBudW1iZXIge1xuXHRyZXR1cm4gZ2V0Q1NTVmFyaWFibGVBc051bWJlcihcIi0tYmFzZXMtY21zLW1pbi1ncmlkLWNvbHVtbnNcIiwgMSk7XG59XG5cbi8qKlxuICogR2V0IGNhcmQgc3BhY2luZyBmcm9tIENTUyB2YXJpYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FyZFNwYWNpbmcoKTogbnVtYmVyIHtcblx0cmV0dXJuIGdldENTU1ZhcmlhYmxlQXNOdW1iZXIoXCItLWJhc2VzLWNtcy1jYXJkLXNwYWNpbmdcIiwgOCk7XG59XG5cbi8qKlxuICogR2V0IGNhcmQgcGFkZGluZyBjb250YWluZXIgZnJvbSBDU1MgdmFyaWFibGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENhcmRQYWRkaW5nQ29udGFpbmVyKCk6IG51bWJlciB7XG5cdHJldHVybiBnZXRDU1NWYXJpYWJsZUFzTnVtYmVyKFwiLS1iYXNlcy1jbXMtY2FyZC1wYWRkaW5nLWNvbnRhaW5lclwiLCAxMik7XG59XG5cbi8qKlxuICogR2V0IGNhcmQgZWxlbWVudCBzcGFjaW5nIGZyb20gQ1NTIHZhcmlhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50U3BhY2luZygpOiBudW1iZXIge1xuXHRyZXR1cm4gZ2V0Q1NTVmFyaWFibGVBc051bWJlcihcIi0tYmFzZXMtY21zLWVsZW1lbnQtc3BhY2luZ1wiLCA4KTtcbn1cblxuLyoqXG4gKiBHZXQgY2FyZCBwYWRkaW5nIGZyb20gQ1NTIHZhcmlhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXJkUGFkZGluZygpOiBudW1iZXIge1xuXHRyZXR1cm4gZ2V0Q1NTVmFyaWFibGVBc051bWJlcihcIi0tYmFzZXMtY21zLWNhcmQtcGFkZGluZ1wiLCAxMik7XG59XG5cbi8qKlxuICogR2V0IGNhcmQgYm9yZGVyIHJhZGl1cyBmcm9tIENTUyB2YXJpYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FyZEJvcmRlclJhZGl1cygpOiBudW1iZXIge1xuXHRyZXR1cm4gZ2V0Q1NTVmFyaWFibGVBc051bWJlcihcIi0tYmFzZXMtY21zLWNhcmQtYm9yZGVyLXJhZGl1c1wiLCA4KTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBjYXJkIGJhY2tncm91bmQgaXMgZW5hYmxlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzQ2FyZEJhY2tncm91bmQoKTogYm9vbGVhbiB7XG5cdHJldHVybiBoYXNCb2R5Q2xhc3MoXCJiYXNlcy1jbXMtY2FyZC1iYWNrZ3JvdW5kXCIpO1xufVxuXG5cbi8qKlxuICogR2V0IGxpc3Qgc2VwYXJhdG9yIGZyb20gQ1NTIHZhcmlhYmxlXG4gKiBSZXR1cm5zIHRoZSBzZXBhcmF0b3IgZm9yIGxpc3QtdHlwZSBwcm9wZXJ0aWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMaXN0U2VwYXJhdG9yKCk6IHN0cmluZyB7XG5cdC8vIFJlYWQgd2l0aG91dCB0cmltIHRvIHByZXNlcnZlIHdoaXRlc3BhY2Vcblx0bGV0IHZhbHVlID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFxuXHRcdFwiLS1iYXNlcy1jbXMtbGlzdC1zZXBhcmF0b3JcIixcblx0KTtcblxuXHQvLyBTdHJpcCBzdXJyb3VuZGluZyBxdW90ZXMgaWYgcHJlc2VudCAoU3R5bGUgU2V0dGluZ3Mgb3IgQ1NTIGRlZmF1bHQgYWRkcyB0aGVtKVxuXHRpZiAoXG5cdFx0KHZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgdmFsdWUuZW5kc1dpdGgoJ1wiJykpIHx8XG5cdFx0KHZhbHVlLnN0YXJ0c1dpdGgoXCInXCIpICYmIHZhbHVlLmVuZHNXaXRoKFwiJ1wiKSlcblx0KSB7XG5cdFx0dmFsdWUgPSB2YWx1ZS5zbGljZSgxLCAtMSk7XG5cdH1cblxuXHQvLyBGYWxsYmFjayB0byBkZWZhdWx0IGlmIGVtcHR5IChTdHlsZSBTZXR0aW5ncyBzaG93cyBwbGFjZWhvbGRlciBidXQgZG9lc24ndCBzZXQgdmFyaWFibGUpXG5cdHJldHVybiB2YWx1ZSB8fCBcIiwgXCI7XG59XG5cbi8qKlxuICogR2V0IGVtcHR5IHZhbHVlIG1hcmtlciBmcm9tIENTUyB2YXJpYWJsZVxuICogUmV0dXJucyB0aGUgc3ltYm9sIGZvciBlbXB0eSBwcm9wZXJ0eSB2YWx1ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVtcHR5VmFsdWVNYXJrZXIoKTogc3RyaW5nIHtcblx0Ly8gUmVhZCB3aXRob3V0IHRyaW0gdG8gcHJlc2VydmUgd2hpdGVzcGFjZVxuXHRsZXQgdmFsdWUgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXG5cdFx0XCItLWJhc2VzLWNtcy1lbXB0eS12YWx1ZS1tYXJrZXJcIixcblx0KTtcblxuXHQvLyBTdHJpcCBzdXJyb3VuZGluZyBxdW90ZXMgaWYgcHJlc2VudCAoU3R5bGUgU2V0dGluZ3Mgb3IgQ1NTIGRlZmF1bHQgYWRkcyB0aGVtKVxuXHRpZiAoXG5cdFx0KHZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgdmFsdWUuZW5kc1dpdGgoJ1wiJykpIHx8XG5cdFx0KHZhbHVlLnN0YXJ0c1dpdGgoXCInXCIpICYmIHZhbHVlLmVuZHNXaXRoKFwiJ1wiKSlcblx0KSB7XG5cdFx0dmFsdWUgPSB2YWx1ZS5zbGljZSgxLCAtMSk7XG5cdH1cblxuXHQvLyBGYWxsYmFjayB0byBkZWZhdWx0IGlmIGVtcHR5IChTdHlsZSBTZXR0aW5ncyBzaG93cyBwbGFjZWhvbGRlciBidXQgZG9lc24ndCBzZXQgdmFyaWFibGUpXG5cdHJldHVybiB2YWx1ZSB8fCBcIlx1MjAxNFwiO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIG1pc3NpbmcgcHJvcGVydGllcyBzaG91bGQgYmUgaGlkZGVuXG4gKiBSZXR1cm5zIHRydWUgaWYgcHJvcGVydGllcyB0aGF0IGRvbid0IGV4aXN0IG9uIGEgZmlsZSBzaG91bGQgbm90IGJlIGRpc3BsYXllZFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkSGlkZU1pc3NpbmdQcm9wZXJ0aWVzKCk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gaGFzQm9keUNsYXNzKFwiYmFzZXMtY21zLWhpZGUtbWlzc2luZy1wcm9wZXJ0aWVzXCIpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGVtcHR5IHByb3BlcnRpZXMgc2hvdWxkIGJlIGhpZGRlblxuICogUmV0dXJucyB0cnVlIGlmIHByb3BlcnRpZXMgd2l0aCBlbXB0eSB2YWx1ZXMgc2hvdWxkIG5vdCBiZSBkaXNwbGF5ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZEhpZGVFbXB0eVByb3BlcnRpZXMoKTogYm9vbGVhbiB7XG5cdC8vIENoZWNrIGJvdGggdGhlIGJvZHkgY2xhc3MgYW5kIGFsc28gY2hlY2sgaWYgdGhlIENTUyB2YXJpYWJsZSBpcyBzZXQgKGFzIGEgZmFsbGJhY2spXG5cdGNvbnN0IGhhc0NsYXNzID0gaGFzQm9keUNsYXNzKFwiYmFzZXMtY21zLWhpZGUtZW1wdHktcHJvcGVydGllc1wiKTtcblx0aWYgKGhhc0NsYXNzKSByZXR1cm4gdHJ1ZTtcblx0XG5cdC8vIEZhbGxiYWNrOiBjaGVjayBpZiB0aGUgc2V0dGluZyBpcyBlbmFibGVkIHZpYSBDU1MgdmFyaWFibGUgb3Igb3RoZXIgbWVhbnNcblx0Ly8gVGhpcyBlbnN1cmVzIHdlIGNhdGNoIHRoZSBzZXR0aW5nIGV2ZW4gaWYgdGhlIGNsYXNzIGlzbid0IGFwcGxpZWQgeWV0XG5cdHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBHZXQgdGFnIHN0eWxlIGZyb20gYm9keSBjbGFzc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFnU3R5bGUoKTogXCJwbGFpblwiIHwgXCJ0aGVtZVwiIHwgXCJtaW5pbWFsXCIge1xuXHRpZiAoaGFzQm9keUNsYXNzKFwiYmFzZXMtY21zLXRhZy1zdHlsZS1taW5pbWFsXCIpKSByZXR1cm4gXCJtaW5pbWFsXCI7XG5cdGlmIChoYXNCb2R5Q2xhc3MoXCJiYXNlcy1jbXMtdGFnLXN0eWxlLXRoZW1lXCIpKSByZXR1cm4gXCJ0aGVtZVwiO1xuXHRyZXR1cm4gXCJwbGFpblwiO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHRhZyBoYXNoICgjKSBwcmVmaXggc2hvdWxkIGJlIHNob3duXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG93VGFnSGFzaFByZWZpeCgpOiBib29sZWFuIHtcblx0cmV0dXJuIGhhc0JvZHlDbGFzcyhcImJhc2VzLWNtcy1zaG93LXRhZy1oYXNoXCIpO1xufVxuXG4vKipcbiAqIFR5cGUgZm9yIFN0eWxlIFNldHRpbmdzIGNvbG9yIGNhY2hlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3R5bGVTZXR0aW5nc0NvbG9yQ2FjaGUge1xuXHR0aXRsZUNvbG9yPzogeyBsaWdodD86IHN0cmluZzsgZGFyaz86IHN0cmluZyB9O1xuXHRzbmlwcGV0Q29sb3I/OiB7IGxpZ2h0Pzogc3RyaW5nOyBkYXJrPzogc3RyaW5nIH07XG5cdHRhZ3NDb2xvcj86IHsgbGlnaHQ/OiBzdHJpbmc7IGRhcms/OiBzdHJpbmcgfTtcblx0dGltZXN0YW1wQ29sb3I/OiB7IGxpZ2h0Pzogc3RyaW5nOyBkYXJrPzogc3RyaW5nIH07XG5cdG1ldGFkYXRhQ29sb3I/OiB7IGxpZ2h0Pzogc3RyaW5nOyBkYXJrPzogc3RyaW5nIH07XG59XG5cbi8qKlxuICogQXBwbHkgY3VzdG9tIGNvbG9ycyBmcm9tIFN0eWxlIFNldHRpbmdzIHRvIGEgY2FyZCBlbGVtZW50XG4gKiBVc2VkIGZvciBhbWJpZW50IGNhcmQgYmFja2dyb3VuZHMgdG8gYXBwbHkgdGhlbWVkIHRleHQgY29sb3JzXG4gKiBAcGFyYW0gY2FyZEVsIC0gQ2FyZCBlbGVtZW50IHRvIGFwcGx5IGNvbG9ycyB0b1xuICogQHBhcmFtIHRoZW1lIC0gJ2xpZ2h0JyBvciAnZGFyaycgdGhlbWUgYmFzZWQgb24gYW1iaWVudCBjb2xvclxuICogQHBhcmFtIGNhY2hlIC0gU3R5bGUgU2V0dGluZ3MgY29sb3IgY2FjaGUgd2l0aCBjdXN0b20gY29sb3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUN1c3RvbUNvbG9ycyhcblx0Y2FyZEVsOiBIVE1MRWxlbWVudCxcblx0dGhlbWU6IFwibGlnaHRcIiB8IFwiZGFya1wiLFxuXHRjYWNoZTogU3R5bGVTZXR0aW5nc0NvbG9yQ2FjaGUsXG4pOiB2b2lkIHtcblx0aWYgKGNhY2hlLnRpdGxlQ29sb3I/Llt0aGVtZV0pIHtcblx0XHRjYXJkRWwuc3R5bGUuc2V0UHJvcGVydHkoXG5cdFx0XHRcIi0tYmFzZXMtY21zLXRpdGxlLWNvbG9yXCIsXG5cdFx0XHRjYWNoZS50aXRsZUNvbG9yW3RoZW1lXSB8fCBudWxsLFxuXHRcdCk7XG5cdH1cblx0aWYgKGNhY2hlLnNuaXBwZXRDb2xvcj8uW3RoZW1lXSkge1xuXHRcdGNhcmRFbC5zdHlsZS5zZXRQcm9wZXJ0eShcblx0XHRcdFwiLS1iYXNlcy1jbXMtc25pcHBldC1jb2xvclwiLFxuXHRcdFx0Y2FjaGUuc25pcHBldENvbG9yW3RoZW1lXSB8fCBudWxsLFxuXHRcdCk7XG5cdH1cblx0aWYgKGNhY2hlLnRhZ3NDb2xvcj8uW3RoZW1lXSkge1xuXHRcdGNhcmRFbC5zdHlsZS5zZXRQcm9wZXJ0eShcblx0XHRcdFwiLS1iYXNlcy1jbXMtdGFncy1jb2xvclwiLFxuXHRcdFx0Y2FjaGUudGFnc0NvbG9yW3RoZW1lXSB8fCBudWxsLFxuXHRcdCk7XG5cdH1cblx0aWYgKGNhY2hlLnRpbWVzdGFtcENvbG9yPy5bdGhlbWVdKSB7XG5cdFx0Y2FyZEVsLnN0eWxlLnNldFByb3BlcnR5KFxuXHRcdFx0XCItLWJhc2VzLWNtcy10aW1lc3RhbXAtY29sb3JcIixcblx0XHRcdGNhY2hlLnRpbWVzdGFtcENvbG9yW3RoZW1lXSB8fCBudWxsLFxuXHRcdCk7XG5cdH1cblx0aWYgKGNhY2hlLm1ldGFkYXRhQ29sb3I/Llt0aGVtZV0pIHtcblx0XHRjYXJkRWwuc3R5bGUuc2V0UHJvcGVydHkoXG5cdFx0XHRcIi0tYmFzZXMtY21zLW1ldGFkYXRhLWNvbG9yXCIsXG5cdFx0XHRjYWNoZS5tZXRhZGF0YUNvbG9yW3RoZW1lXSB8fCBudWxsLFxuXHRcdCk7XG5cdH1cbn1cblxuIiwgImltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBVUkwgaXMgYW4gZXh0ZXJuYWwgSFRUUC9IVFRQUyBVUkxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRXh0ZXJuYWxVcmwodXJsOiBzdHJpbmcpOiBib29sZWFuIHtcblx0cmV0dXJuIC9eaHR0cHM/OlxcL1xcLy9pLnRlc3QodXJsKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHBhdGggaGFzIGEgdmFsaWQgaW1hZ2UgZmlsZSBleHRlbnNpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1ZhbGlkSW1hZ2VFeHRlbnNpb24ocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG5cdHJldHVybiAvXFwuKGF2aWZ8Ym1wfGdpZnxqcGU/Z3xwbmd8c3ZnfHdlYnApJC9pLnRlc3QocGF0aCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgaWYgYSBVUkwgcG9pbnRzIHRvIGEgdmFsaWQsIGxvYWRhYmxlIGltYWdlXG4gKiBOT1RFOiBUaGlzIGlzIHNsb3cgYW5kIHNob3VsZCBiZSBhdm9pZGVkIGZvciBwZXJmb3JtYW5jZS4gT25seSB1c2Ugd2hlbiBhYnNvbHV0ZWx5IG5lY2Vzc2FyeS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW1hZ2VVcmwodXJsOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0Y29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG5cdFx0aW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUodHJ1ZSk7XG5cdFx0aW1nLm9uZXJyb3IgPSAoKSA9PiByZXNvbHZlKGZhbHNlKTtcblx0XHRzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoZmFsc2UpLCA1MDAwKTtcblx0XHRpbWcuc3JjID0gdXJsO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBTdHJpcCB3aWtpbGluayBzeW50YXggZnJvbSBpbWFnZSBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpcFdpa2lsaW5rU3ludGF4KHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG5cdGNvbnN0IHdpa2lsaW5rTWF0Y2ggPSBwYXRoLm1hdGNoKC9eIT9cXFtcXFsoW15cXF18XSspKD86XFx8W15cXF1dKik/XFxdXFxdJC8pO1xuXHRyZXR1cm4gd2lraWxpbmtNYXRjaCA/IHdpa2lsaW5rTWF0Y2hbMV0udHJpbSgpIDogcGF0aDtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIGFuZCB2YWxpZGF0ZSBpbWFnZSBwYXRocyBmcm9tIHByb3BlcnR5IHZhbHVlc1xuICogSGFuZGxlcyB3aWtpbGluayBzdHJpcHBpbmcsIFVSTCB2YWxpZGF0aW9uLCBhbmQgcGF0aCBzZXBhcmF0aW9uXG4gKiBCYXNlZCBvbiBEeW5hbWljIFZpZXdzJyBhcHByb2FjaCB3aXRoIHBhcmFsbGVsIHZhbGlkYXRpb24gZm9yIHBlcmZvcm1hbmNlXG4gKiBcbiAqIEBwYXJhbSBpbWFnZVBhdGhzIC0gUmF3IGltYWdlIHBhdGhzIGZyb20gcHJvcGVydGllcyAobWF5IGNvbnRhaW4gd2lraWxpbmtzKVxuICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gb2JqZWN0IHdpdGggdmFsaWRhdGVkIGludGVybmFsIHBhdGhzIGFuZCBleHRlcm5hbCBVUkxzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzSW1hZ2VQYXRocyhcblx0aW1hZ2VQYXRoczogc3RyaW5nW11cbik6IFByb21pc2U8eyBpbnRlcm5hbFBhdGhzOiBzdHJpbmdbXTsgZXh0ZXJuYWxVcmxzOiBzdHJpbmdbXSB9PiB7XG5cdGNvbnN0IGludGVybmFsUGF0aHM6IHN0cmluZ1tdID0gW107XG5cdGNvbnN0IGV4dGVybmFsVXJsQ2FuZGlkYXRlczogc3RyaW5nW10gPSBbXTtcblxuXHQvLyBGaXJzdCBwYXNzOiBzZXBhcmF0ZSBpbnRlcm5hbCBwYXRocyBhbmQgZXh0ZXJuYWwgVVJMIGNhbmRpZGF0ZXNcblx0Zm9yIChjb25zdCBpbWdQYXRoIG9mIGltYWdlUGF0aHMpIHtcblx0XHQvLyBTdHJpcCB3aWtpbGluayBzeW50YXhcblx0XHRjb25zdCBjbGVhblBhdGggPSBzdHJpcFdpa2lsaW5rU3ludGF4KGltZ1BhdGgpO1xuXG5cdFx0aWYgKGNsZWFuUGF0aC5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuXG5cdFx0aWYgKGlzRXh0ZXJuYWxVcmwoY2xlYW5QYXRoKSkge1xuXHRcdFx0Ly8gRXh0ZXJuYWwgVVJMIC0gYWNjZXB0IGFsbCBleHRlcm5hbCBVUkxzIGFuZCB2YWxpZGF0ZSBieSBhY3R1YWxseSBsb2FkaW5nIHRoZW1cblx0XHRcdC8vIFRoaXMgaGFuZGxlcyBPcGVuIEdyYXBoIFVSTHMgYW5kIG90aGVyIGltYWdlIFVSTHMgdGhhdCBkb24ndCBoYXZlIGZpbGUgZXh0ZW5zaW9uc1xuXHRcdFx0ZXh0ZXJuYWxVcmxDYW5kaWRhdGVzLnB1c2goY2xlYW5QYXRoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gSW50ZXJuYWwgcGF0aCAtIHZhbGlkYXRlIGV4dGVuc2lvblxuXHRcdFx0aWYgKGhhc1ZhbGlkSW1hZ2VFeHRlbnNpb24oY2xlYW5QYXRoKSkge1xuXHRcdFx0XHRpbnRlcm5hbFBhdGhzLnB1c2goY2xlYW5QYXRoKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBTZWNvbmQgcGFzczogdmFsaWRhdGUgZXh0ZXJuYWwgVVJMcyBpbiBwYXJhbGxlbCAobXVjaCBmYXN0ZXIpXG5cdGNvbnN0IHZhbGlkYXRpb25Qcm9taXNlcyA9IGV4dGVybmFsVXJsQ2FuZGlkYXRlcy5tYXAodXJsID0+IFxuXHRcdHZhbGlkYXRlSW1hZ2VVcmwodXJsKS50aGVuKGlzVmFsaWQgPT4gaXNWYWxpZCA/IHVybCA6IG51bGwpXG5cdCk7XG5cdGNvbnN0IHZhbGlkYXRlZFVybHMgPSBhd2FpdCBQcm9taXNlLmFsbCh2YWxpZGF0aW9uUHJvbWlzZXMpO1xuXHRjb25zdCBleHRlcm5hbFVybHMgPSB2YWxpZGF0ZWRVcmxzLmZpbHRlcigodXJsKTogdXJsIGlzIHN0cmluZyA9PiB1cmwgIT09IG51bGwpO1xuXG5cdHJldHVybiB7IGludGVybmFsUGF0aHMsIGV4dGVybmFsVXJscyB9O1xufVxuXG4vKipcbiAqIENvbnZlcnQgaW50ZXJuYWwgaW1hZ2UgcGF0aHMgdG8gcmVzb3VyY2UgVVJMc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUludGVybmFsSW1hZ2VQYXRocyhcblx0aW50ZXJuYWxQYXRoczogc3RyaW5nW10sXG5cdHNvdXJjZVBhdGg6IHN0cmluZyxcblx0YXBwOiBBcHBcbik6IHN0cmluZ1tdIHtcblx0Y29uc3QgdmFsaWRJbWFnZUV4dGVuc2lvbnMgPSBbJ2F2aWYnLCAnYm1wJywgJ2dpZicsICdqcGVnJywgJ2pwZycsICdwbmcnLCAnc3ZnJywgJ3dlYnAnXTtcblx0Y29uc3QgcmVzb3VyY2VQYXRoczogc3RyaW5nW10gPSBbXTtcblxuXHRmb3IgKGNvbnN0IHByb3BQYXRoIG9mIGludGVybmFsUGF0aHMpIHtcblx0XHQvLyBUcnkgcmVzb2x2aW5nIHdpdGggbWV0YWRhdGEgY2FjaGUgZmlyc3QgKGhhbmRsZXMgcmVsYXRpdmUgcGF0aHMsIHdpa2lsaW5rcywgZXRjLilcblx0XHRsZXQgaW1hZ2VGaWxlOiBURmlsZSB8IG51bGwgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChwcm9wUGF0aCwgc291cmNlUGF0aCk7XG5cdFx0XG5cdFx0Ly8gSWYgbm90IGZvdW5kIGFuZCBwYXRoIHN0YXJ0cyB3aXRoIC4vLCB0cnkgcmVzb2x2aW5nIHJlbGF0aXZlIHRvIHNvdXJjZSBmaWxlJ3MgZGlyZWN0b3J5XG5cdFx0aWYgKCFpbWFnZUZpbGUgJiYgcHJvcFBhdGguc3RhcnRzV2l0aCgnLi8nKSkge1xuXHRcdFx0Y29uc3Qgc291cmNlRmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc291cmNlUGF0aCk7XG5cdFx0XHRpZiAoc291cmNlRmlsZSAmJiBzb3VyY2VGaWxlLnBhcmVudCkge1xuXHRcdFx0XHQvLyBSZW1vdmUgLi8gcHJlZml4IGFuZCByZXNvbHZlIHJlbGF0aXZlIHRvIHBhcmVudCBkaXJlY3Rvcnlcblx0XHRcdFx0Y29uc3QgcmVsYXRpdmVQYXRoID0gcHJvcFBhdGguc3Vic3RyaW5nKDIpOyAvLyBSZW1vdmUgLi9cblx0XHRcdFx0Y29uc3QgZnVsbFBhdGggPSBzb3VyY2VGaWxlLnBhcmVudC5wYXRoID8gYCR7c291cmNlRmlsZS5wYXJlbnQucGF0aH0vJHtyZWxhdGl2ZVBhdGh9YCA6IHJlbGF0aXZlUGF0aDtcblx0XHRcdFx0Y29uc3QgcmVzb2x2ZWRGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmdWxsUGF0aCk7XG5cdFx0XHRcdGlmIChyZXNvbHZlZEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRcdGltYWdlRmlsZSA9IHJlc29sdmVkRmlsZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHQvLyBJZiBzdGlsbCBub3QgZm91bmQsIHRyeSBhcyBhYnNvbHV0ZSBwYXRoXG5cdFx0aWYgKCFpbWFnZUZpbGUpIHtcblx0XHRcdGNvbnN0IGFic29sdXRlRmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocHJvcFBhdGgpO1xuXHRcdFx0aWYgKGFic29sdXRlRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdGltYWdlRmlsZSA9IGFic29sdXRlRmlsZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0aWYgKGltYWdlRmlsZSAmJiB2YWxpZEltYWdlRXh0ZW5zaW9ucy5pbmNsdWRlcyhpbWFnZUZpbGUuZXh0ZW5zaW9uKSkge1xuXHRcdFx0Y29uc3QgcmVzb3VyY2VQYXRoID0gYXBwLnZhdWx0LmdldFJlc291cmNlUGF0aChpbWFnZUZpbGUpO1xuXHRcdFx0cmVzb3VyY2VQYXRocy5wdXNoKHJlc291cmNlUGF0aCk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJlc291cmNlUGF0aHM7XG59XG5cbi8qKlxuICogRXh0cmFjdCBpbWFnZSBVUkxzIGZyb20gZmlsZSBlbWJlZHNcbiAqIFZhbGlkYXRlcyBleHRlcm5hbCBVUkxzIGluIHBhcmFsbGVsIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAqIEFsc28gcGFyc2VzIGZpbGUgY29udGVudCBmb3IgZXh0ZXJuYWwgaW1hZ2VzIGluIG1hcmtkb3duIGFuZCBIVE1MXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleHRyYWN0RW1iZWRJbWFnZXMoXG5cdGZpbGU6IFRGaWxlLFxuXHRhcHA6IEFwcFxuKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRjb25zdCB2YWxpZEltYWdlRXh0ZW5zaW9ucyA9IFsnYXZpZicsICdibXAnLCAnZ2lmJywgJ2pwZWcnLCAnanBnJywgJ3BuZycsICdzdmcnLCAnd2VicCddO1xuXHRjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcblxuXHRjb25zdCBib2R5UmVzb3VyY2VQYXRoczogc3RyaW5nW10gPSBbXTtcblx0Y29uc3QgYm9keUV4dGVybmFsVXJsQ2FuZGlkYXRlczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG5cblx0Ly8gRmlyc3QgcGFzczogY2hlY2sgbWV0YWRhdGEgZW1iZWRzIChmYXN0LCBmcm9tIGNhY2hlKVxuXHRpZiAobWV0YWRhdGE/LmVtYmVkcykge1xuXHRcdGZvciAoY29uc3QgZW1iZWQgb2YgbWV0YWRhdGEuZW1iZWRzKSB7XG5cdFx0XHRjb25zdCBlbWJlZExpbmsgPSBlbWJlZC5saW5rO1xuXHRcdFx0aWYgKGlzRXh0ZXJuYWxVcmwoZW1iZWRMaW5rKSkge1xuXHRcdFx0XHRpZiAoaGFzVmFsaWRJbWFnZUV4dGVuc2lvbihlbWJlZExpbmspIHx8ICFlbWJlZExpbmsuaW5jbHVkZXMoJy4nKSkge1xuXHRcdFx0XHRcdGJvZHlFeHRlcm5hbFVybENhbmRpZGF0ZXMuYWRkKGVtYmVkTGluayk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnN0IHRhcmdldEZpbGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChlbWJlZExpbmssIGZpbGUucGF0aCk7XG5cdFx0XHRcdGlmICh0YXJnZXRGaWxlICYmIHZhbGlkSW1hZ2VFeHRlbnNpb25zLmluY2x1ZGVzKHRhcmdldEZpbGUuZXh0ZW5zaW9uKSkge1xuXHRcdFx0XHRcdGNvbnN0IHJlc291cmNlUGF0aCA9IGFwcC52YXVsdC5nZXRSZXNvdXJjZVBhdGgodGFyZ2V0RmlsZSk7XG5cdFx0XHRcdFx0Ym9keVJlc291cmNlUGF0aHMucHVzaChyZXNvdXJjZVBhdGgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gU2Vjb25kIHBhc3M6IHBhcnNlIGZpbGUgY29udGVudCBmb3IgZXh0ZXJuYWwgaW1hZ2VzIChtYXJrZG93biBhbmQgSFRNTClcblx0Ly8gVGhpcyBjYXRjaGVzIGV4dGVybmFsIGltYWdlcyB0aGF0IG1pZ2h0IG5vdCBiZSBpbiBtZXRhZGF0YS5lbWJlZHNcblx0Ly8gTm90ZTogRm9yIE1EWCBmaWxlcywgbWV0YWRhdGEgY2FjaGUgd29uJ3Qgd29yaywgc28gd2Ugc2tpcCBlbWJlZCBleHRyYWN0aW9uXG5cdGlmIChmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJyB8fCBmaWxlLmV4dGVuc2lvbiA9PT0gJ21keCcpIHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xuXHRcdFx0XG5cdFx0XHQvLyBFeHRyYWN0IG1hcmtkb3duIGltYWdlIHN5bnRheDogIVthbHRdKHVybCkgb3IgIVthbHRdKHVybCBcInRpdGxlXCIpXG5cdFx0XHRjb25zdCBtYXJrZG93bkltYWdlUmVnZXggPSAvIVxcWyhbXlxcXV0qKVxcXVxcKChodHRwcz86XFwvXFwvW15cXHMpXSspL2dpO1xuXHRcdFx0bGV0IG1hdGNoO1xuXHRcdFx0d2hpbGUgKChtYXRjaCA9IG1hcmtkb3duSW1hZ2VSZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xuXHRcdFx0XHRjb25zdCB1cmwgPSBtYXRjaFsyXS50cmltKCk7XG5cdFx0XHRcdC8vIFJlbW92ZSB0cmFpbGluZyBxdW90ZXMsIHBhcmVudGhlc2VzLCBvciB3aGl0ZXNwYWNlIHRoYXQgbWlnaHQgYmUgcGFydCBvZiB0aXRsZVxuXHRcdFx0XHRjb25zdCBjbGVhblVybCA9IHVybC5yZXBsYWNlKC9bXCInKVxcc10rJC8sICcnKTtcblx0XHRcdFx0aWYgKGlzRXh0ZXJuYWxVcmwoY2xlYW5VcmwpICYmIChoYXNWYWxpZEltYWdlRXh0ZW5zaW9uKGNsZWFuVXJsKSB8fCAhY2xlYW5VcmwuaW5jbHVkZXMoJy4nKSkpIHtcblx0XHRcdFx0XHRib2R5RXh0ZXJuYWxVcmxDYW5kaWRhdGVzLmFkZChjbGVhblVybCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gRXh0cmFjdCBIVE1MIGltZyB0YWdzOiA8aW1nIHNyYz1cInVybFwiPiBvciA8aW1nIHNyYz0ndXJsJz4gb3IgPGltZyBzcmM9dXJsPlxuXHRcdFx0Y29uc3QgaHRtbEltZ1JlZ2V4ID0gLzxpbWdbXj5dK3NyY1xccyo9XFxzKltcIiddPyhodHRwcz86XFwvXFwvW15cXHNcIic8Pl0rKS9naTtcblx0XHRcdHdoaWxlICgobWF0Y2ggPSBodG1sSW1nUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcblx0XHRcdFx0Y29uc3QgdXJsID0gbWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0XHQvLyBSZW1vdmUgdHJhaWxpbmcgcXVvdGVzIG9yIHdoaXRlc3BhY2Vcblx0XHRcdFx0Y29uc3QgY2xlYW5VcmwgPSB1cmwucmVwbGFjZSgvW1wiJ1xccz5dKyQvLCAnJyk7XG5cdFx0XHRcdGlmIChpc0V4dGVybmFsVXJsKGNsZWFuVXJsKSAmJiAoaGFzVmFsaWRJbWFnZUV4dGVuc2lvbihjbGVhblVybCkgfHwgIWNsZWFuVXJsLmluY2x1ZGVzKCcuJykpKSB7XG5cdFx0XHRcdFx0Ym9keUV4dGVybmFsVXJsQ2FuZGlkYXRlcy5hZGQoY2xlYW5VcmwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdC8vIElmIGZpbGUgcmVhZCBmYWlscywganVzdCBjb250aW51ZSB3aXRoIHdoYXQgd2UgZm91bmQgaW4gbWV0YWRhdGFcblx0XHRcdGNvbnNvbGUud2FybihgRmFpbGVkIHRvIHJlYWQgZmlsZSBjb250ZW50IGZvciBpbWFnZSBleHRyYWN0aW9uOiAke2ZpbGUucGF0aH1gLCBlcnJvcik7XG5cdFx0fVxuXHR9XG5cblx0Ly8gVGhpcmQgcGFzczogdmFsaWRhdGUgZXh0ZXJuYWwgVVJMcyBpbiBwYXJhbGxlbCAobXVjaCBmYXN0ZXIpXG5cdGNvbnN0IGV4dGVybmFsVXJsQXJyYXkgPSBBcnJheS5mcm9tKGJvZHlFeHRlcm5hbFVybENhbmRpZGF0ZXMpO1xuXHRjb25zdCB2YWxpZGF0aW9uUHJvbWlzZXMgPSBleHRlcm5hbFVybEFycmF5Lm1hcCh1cmwgPT4gXG5cdFx0dmFsaWRhdGVJbWFnZVVybCh1cmwpLnRoZW4oaXNWYWxpZCA9PiBpc1ZhbGlkID8gdXJsIDogbnVsbClcblx0KTtcblx0Y29uc3QgdmFsaWRhdGVkVXJscyA9IGF3YWl0IFByb21pc2UuYWxsKHZhbGlkYXRpb25Qcm9taXNlcyk7XG5cdGNvbnN0IGJvZHlFeHRlcm5hbFVybHMgPSB2YWxpZGF0ZWRVcmxzLmZpbHRlcigodXJsKTogdXJsIGlzIHN0cmluZyA9PiB1cmwgIT09IG51bGwpO1xuXG5cdHJldHVybiBbLi4uYm9keVJlc291cmNlUGF0aHMsIC4uLmJvZHlFeHRlcm5hbFVybHNdO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgVVJMIHBvaW50cyB0byBhIEdJRiBpbWFnZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNHaWZVcmwodXJsOiBzdHJpbmcpOiBib29sZWFuIHtcblx0Ly8gQ2hlY2sgZm9yIC5naWYgZXh0ZW5zaW9uIChjYXNlLWluc2Vuc2l0aXZlKVxuXHQvLyBNYXRjaCAuZ2lmIGF0IHRoZSBlbmQgb2YgdGhlIHBhdGgsIG9wdGlvbmFsbHkgZm9sbG93ZWQgYnkgcXVlcnkgc3RyaW5nIG9yIGZyYWdtZW50XG5cdHJldHVybiAvXFwuZ2lmKFxcP3wjfCQpL2kudGVzdCh1cmwpIHx8IC9cXC5naWYkL2kudGVzdCh1cmwpO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYW4gYW5pbWF0ZWQgR0lGIHRvIGEgc3RhdGljIGltYWdlIChmaXJzdCBmcmFtZSlcbiAqIFJldHVybnMgYSBkYXRhIFVSTCBvZiB0aGUgZmlyc3QgZnJhbWUsIG9yIHRoZSBvcmlnaW5hbCBVUkwgaWYgY29udmVyc2lvbiBmYWlsc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29udmVydEdpZlRvU3RhdGljKFxuXHR1cmw6IHN0cmluZyxcblx0Zm9yY2VTdGF0aWM6IGJvb2xlYW5cbik6IFByb21pc2U8c3RyaW5nPiB7XG5cdC8vIElmIG5vdCBmb3JjaW5nIHN0YXRpYyBvciBub3QgYSBHSUYsIHJldHVybiBvcmlnaW5hbCBVUkxcblx0aWYgKCFmb3JjZVN0YXRpYyB8fCAhaXNHaWZVcmwodXJsKSkge1xuXHRcdHJldHVybiB1cmw7XG5cdH1cblxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcblx0XHRpbWcuY3Jvc3NPcmlnaW4gPSAnYW5vbnltb3VzJzsgLy8gSGFuZGxlIENPUlMgaWYgbmVlZGVkXG5cdFx0XG5cdFx0aW1nLm9ubG9hZCA9ICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdC8vIENyZWF0ZSBjYW52YXMgYW5kIGRyYXcgZmlyc3QgZnJhbWVcblx0XHRcdFx0Y29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cdFx0XHRcdGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDtcblx0XHRcdFx0Y2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7XG5cdFx0XHRcdGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKGN0eCkge1xuXHRcdFx0XHRcdGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcblx0XHRcdFx0XHQvLyBDb252ZXJ0IHRvIFBORyBkYXRhIFVSTFxuXHRcdFx0XHRcdGNvbnN0IGRhdGFVcmwgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcblx0XHRcdFx0XHRyZXNvbHZlKGRhdGFVcmwpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIENhbnZhcyBjb250ZXh0IG5vdCBhdmFpbGFibGUsIHJldHVybiBvcmlnaW5hbFxuXHRcdFx0XHRcdHJlc29sdmUodXJsKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKCdGYWlsZWQgdG8gY29udmVydCBHSUYgdG8gc3RhdGljIGltYWdlOicsIGVycm9yKTtcblx0XHRcdFx0Ly8gT24gZXJyb3IsIHJldHVybiBvcmlnaW5hbCBVUkxcblx0XHRcdFx0cmVzb2x2ZSh1cmwpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0aW1nLm9uZXJyb3IgPSAoKSA9PiB7XG5cdFx0XHQvLyBJZiBpbWFnZSBmYWlscyB0byBsb2FkLCByZXR1cm4gb3JpZ2luYWwgVVJMXG5cdFx0XHRyZXNvbHZlKHVybCk7XG5cdFx0fTtcblx0XHRcblx0XHQvLyBTZXQgdGltZW91dCB0byBwcmV2ZW50IGhhbmdpbmdcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdHJlc29sdmUodXJsKTtcblx0XHR9LCA1MDAwKTtcblx0XHRcblx0XHRpbWcuc3JjID0gdXJsO1xuXHR9KTtcbn1cblxuIiwgIi8qKlxyXG4gKiBQcmV2aWV3IGFuZCBzbmlwcGV0IHV0aWxpdGllc1xyXG4gKiBFeHRyYWN0cyBhbmQgc2FuaXRpemVzIGNvbnRlbnQgZm9yIGNhcmQgcHJldmlld3NcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuY29uc3QgbWFya2Rvd25QYXR0ZXJucyA9IFtcclxuXHQvYChbXmBdKylgL2csXHJcblx0L1xcKlxcKlxcKigoPzooPyFcXCpcXCpcXCopLikrKVxcKlxcKlxcKi9nLFxyXG5cdC9fX18oKD86KD8hX19fKS4pKylfX18vZyxcclxuXHQvXFwqXFwqKCg/Oig/IVxcKlxcKikuKSspXFwqXFwqL2csXHJcblx0L19fKCg/Oig/IV9fKS4pKylfXy9nLFxyXG5cdC9cXCooKD86KD8hXFwqKS4pKylcXCovZyxcclxuXHQvXygoPzooPyFfKS4pKylfL2csXHJcblx0L35+KCg/Oig/IX5+KS4pKyl+fi9nLFxyXG5cdC89PSgoPzooPyE9PSkuKSspPT0vZyxcclxuXHQvXFxbKFteXFxdXSspXFxdXFwoW14pXStcXCkvZyxcclxuXHQvIVxcW1xcW1teXFxdXStcXF1cXF0vZyxcclxuXHQvXFxbXFxbW15cXF18XStcXHxbXlxcXV0rXFxdXFxdL2csXHJcblx0L1xcW1xcW1teXFxdXStcXF1cXF0vZyxcclxuXHQvI1thLXpBLVowLTlfXFwtL10rL2csXHJcblx0L15bLSorXVxccypcXFtbIHhYXVxcXVxccysvZ20sXHJcblx0L14oXFxkK1xcLlxccyopXFxbWyB4WF1cXF1cXHMrL2dtLFxyXG5cdC9eKFxcZCtcXClcXHMqKVxcW1sgeFhdXFxdXFxzKy9nbSxcclxuXHQvXlstKitdXFxzKy9nbSxcclxuXHQvXiN7MSw2fVxccysuKyQvZ20sXHJcblx0L15cXHMqKD86Wy1fKl0pXFxzKig/OlstXypdKVxccyooPzpbLV8qXSlbXFxzXFwtXypdKiQvZ20sXHJcblx0L15cXHMqXFx8LipcXHwuKiQvZ20sXHJcblx0L1xcXlxcW1teXFxdXSo/XS9nLFxyXG5cdC9cXFtcXF5bXlxcXV0rXS9nLFxyXG5cdC9eXFxzKlxcW1xcXlteXFxdXStdOi4qJC9nbSxcclxuXHQvPChbYS16XVthLXowLTldKilcXGJbXj5dKj4oLio/KTxcXC9cXDE+L2dpLFxyXG5cdC88W14+XSs+L2dcclxuXTtcclxuXHJcbmZ1bmN0aW9uIHByb3RlY3RFc2NhcGVkQ2hhcnModGV4dDogc3RyaW5nKTogeyB0ZXh0OiBzdHJpbmc7IG1hcDogTWFwPHN0cmluZywgc3RyaW5nPiB9IHtcclxuXHRjb25zdCBtYXAgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpO1xyXG5cdGxldCBjb3VudGVyID0gMDtcclxuXHRjb25zdCByZXN1bHQgPSB0ZXh0LnJlcGxhY2UoL1xcXFwoLikvZywgKG1hdGNoOiBzdHJpbmcsIGNoYXI6IHN0cmluZykgPT4ge1xyXG5cdFx0Y29uc3QgcGxhY2Vob2xkZXIgPSBgXHUwMEE3XHUwMEE3RVNDQVBFRCR7Y291bnRlcn1cdTAwQTdcdTAwQTdgO1xyXG5cdFx0bWFwLnNldChwbGFjZWhvbGRlciwgY2hhcik7XHJcblx0XHRjb3VudGVyKys7XHJcblx0XHRyZXR1cm4gcGxhY2Vob2xkZXI7XHJcblx0fSk7XHJcblx0cmV0dXJuIHsgdGV4dDogcmVzdWx0LCBtYXAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVzdG9yZUVzY2FwZWRDaGFycyh0ZXh0OiBzdHJpbmcsIG1hcDogTWFwPHN0cmluZywgc3RyaW5nPik6IHN0cmluZyB7XHJcblx0bGV0IHJlc3VsdCA9IHRleHQ7XHJcblx0bWFwLmZvckVhY2goKGNoYXIsIHBsYWNlaG9sZGVyKSA9PiB7XHJcblx0XHRyZXN1bHQgPSByZXN1bHQuc3BsaXQocGxhY2Vob2xkZXIpLmpvaW4oY2hhcik7XHJcblx0fSk7XHJcblx0cmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlQ29kZUJsb2Nrcyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdGxldCByZXN1bHQgPSB0ZXh0O1xyXG5cdGxldCBjaGFuZ2VkID0gdHJ1ZTtcclxuXHR3aGlsZSAoY2hhbmdlZCkge1xyXG5cdFx0Y2hhbmdlZCA9IGZhbHNlO1xyXG5cdFx0Y29uc3Qgb3Blbk1hdGNoID0gcmVzdWx0Lm1hdGNoKC9eKFtgfl17Myx9KS9tKTtcclxuXHRcdGlmICghb3Blbk1hdGNoKSBicmVhaztcclxuXHRcdGNvbnN0IGZlbmNlQ2hhciA9IG9wZW5NYXRjaFsxXVswXTtcclxuXHRcdGNvbnN0IGZlbmNlTGVuZ3RoID0gb3Blbk1hdGNoWzFdLmxlbmd0aDtcclxuXHRcdGNvbnN0IG9wZW5JbmRleCA9IG9wZW5NYXRjaC5pbmRleCE7XHJcblx0XHRjb25zdCBlc2NhcGVkQ2hhciA9IGZlbmNlQ2hhci5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpO1xyXG5cdFx0Y29uc3QgY2xvc2VQYXR0ZXJuID0gbmV3IFJlZ0V4cChgXiR7ZXNjYXBlZENoYXJ9eyR7ZmVuY2VMZW5ndGh9fVxcXFxzKiRgLCAnbScpO1xyXG5cdFx0Y29uc3QgYWZ0ZXJPcGVuID0gcmVzdWx0LnN1YnN0cmluZyhvcGVuSW5kZXggKyBvcGVuTWF0Y2hbMV0ubGVuZ3RoKTtcclxuXHRcdGNvbnN0IGNsb3NlTWF0Y2ggPSBhZnRlck9wZW4ubWF0Y2goY2xvc2VQYXR0ZXJuKTtcclxuXHRcdGlmIChjbG9zZU1hdGNoKSB7XHJcblx0XHRcdGNvbnN0IGNsb3NlSW5kZXggPSBvcGVuSW5kZXggKyBvcGVuTWF0Y2hbMV0ubGVuZ3RoICsgY2xvc2VNYXRjaC5pbmRleCE7XHJcblx0XHRcdGNvbnN0IGJsb2NrRW5kID0gY2xvc2VJbmRleCArIGNsb3NlTWF0Y2hbMF0ubGVuZ3RoO1xyXG5cdFx0XHRyZXN1bHQgPSByZXN1bHQuc3Vic3RyaW5nKDAsIG9wZW5JbmRleCkgKyByZXN1bHQuc3Vic3RyaW5nKGJsb2NrRW5kKTtcclxuXHRcdFx0Y2hhbmdlZCA9IHRydWU7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zdCBsaW5lRW5kID0gcmVzdWx0LmluZGV4T2YoJ1xcbicsIG9wZW5JbmRleCk7XHJcblx0XHRcdGlmIChsaW5lRW5kID09PSAtMSkge1xyXG5cdFx0XHRcdHJlc3VsdCA9IHJlc3VsdC5zdWJzdHJpbmcoMCwgb3BlbkluZGV4KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXN1bHQgPSByZXN1bHQuc3Vic3RyaW5nKDAsIG9wZW5JbmRleCkgKyByZXN1bHQuc3Vic3RyaW5nKGxpbmVFbmQgKyAxKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RyaXBNYXJrZG93blN5bnRheCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdGlmICghdGV4dCB8fCB0ZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHJldHVybiAnJztcclxuXHR0ZXh0ID0gdGV4dC5yZXBsYWNlKC9ePlxccypcXFshW1xcdy1dK1xcXVsrLV0/LiokL2dtLCAnJyk7XHJcblx0dGV4dCA9IHRleHQucmVwbGFjZSgvXj5cXHM/L2dtLCAnJyk7XHJcblx0Y29uc3QgeyB0ZXh0OiBwcm90ZWN0ZWRUZXh0LCBtYXA6IGVzY2FwZWRDaGFyc01hcCB9ID0gcHJvdGVjdEVzY2FwZWRDaGFycyh0ZXh0KTtcclxuXHRsZXQgcmVzdWx0ID0gcmVtb3ZlQ29kZUJsb2Nrcyhwcm90ZWN0ZWRUZXh0KTtcclxuXHRtYXJrZG93blBhdHRlcm5zLmZvckVhY2goKHBhdHRlcm4pID0+IHtcclxuXHRcdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKHBhdHRlcm4sIChtYXRjaDogc3RyaW5nLCAuLi5ncm91cHM6IHN0cmluZ1tdKSA9PiB7XHJcblx0XHRcdGlmIChtYXRjaC5tYXRjaCgvPFthLXpdW2EtejAtOV0qXFxiW14+XSo+Lio/PFxcLy9pKSkge1xyXG5cdFx0XHRcdHJldHVybiBncm91cHNbMV0gfHwgJyc7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGdyb3Vwcy5sZW5ndGggPiAwICYmIGdyb3Vwc1swXSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBncm91cHMubGVuZ3RoIC0gMjsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZiAodHlwZW9mIGdyb3Vwc1tpXSA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGdyb3Vwc1tpXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuICcnO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcblx0cmVzdWx0ID0gcmVzdG9yZUVzY2FwZWRDaGFycyhyZXN1bHQsIGVzY2FwZWRDaGFyc01hcCk7XHJcblx0cmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplRm9yUHJldmlldyhcclxuXHRjb250ZW50OiBzdHJpbmcsXHJcblx0b21pdEZpcnN0TGluZTogYm9vbGVhbiA9IGZhbHNlLFxyXG5cdGZpbGVuYW1lPzogc3RyaW5nLFxyXG5cdHRpdGxlVmFsdWU/OiBzdHJpbmdcclxuKTogc3RyaW5nIHtcclxuXHRjb25zdCBjbGVhbmVkID0gY29udGVudC5yZXBsYWNlKC9eLS0tW1xcc1xcU10qPy0tLS8sIFwiXCIpLnRyaW0oKTtcclxuXHRsZXQgc3RyaXBwZWQgPSBzdHJpcE1hcmtkb3duU3ludGF4KGNsZWFuZWQpO1xyXG5cdGNvbnN0IGZpcnN0TGluZUVuZCA9IHN0cmlwcGVkLmluZGV4T2YoJ1xcbicpO1xyXG5cdGNvbnN0IGZpcnN0TGluZSA9IChmaXJzdExpbmVFbmQgIT09IC0xID8gc3RyaXBwZWQuc3Vic3RyaW5nKDAsIGZpcnN0TGluZUVuZCkgOiBzdHJpcHBlZCkudHJpbSgpO1xyXG5cdGlmIChvbWl0Rmlyc3RMaW5lIHx8XHJcblx0XHQoZmlsZW5hbWUgJiYgZmlyc3RMaW5lID09PSBmaWxlbmFtZSkgfHxcclxuXHRcdCh0aXRsZVZhbHVlICYmIGZpcnN0TGluZSA9PT0gdGl0bGVWYWx1ZSkpIHtcclxuXHRcdHN0cmlwcGVkID0gZmlyc3RMaW5lRW5kICE9PSAtMSA/IHN0cmlwcGVkLnN1YnN0cmluZyhmaXJzdExpbmVFbmQgKyAxKS50cmltKCkgOiAnJztcclxuXHR9XHJcblx0Y29uc3Qgbm9ybWFsaXplZCA9IHN0cmlwcGVkXHJcblx0XHQucmVwbGFjZSgvXFxeW2EtekEtWjAtOS1dKy9nLCAnJylcclxuXHRcdC5zcGxpdCgvXFxzKy8pXHJcblx0XHQuZmlsdGVyKHdvcmQgPT4gd29yZClcclxuXHRcdC5qb2luKCcgJylcclxuXHRcdC50cmltKClcclxuXHRcdC5yZXBsYWNlKC9cXC57Mix9L2csIG1hdGNoID0+IG1hdGNoLnJlcGxhY2UoL1xcLi9nLCAnXFx1MjAyNCcpKTtcclxuXHRjb25zdCB3YXNUcnVuY2F0ZWQgPSBub3JtYWxpemVkLmxlbmd0aCA+IDUwMDtcclxuXHRsZXQgcHJldmlldyA9IG5vcm1hbGl6ZWQuc3Vic3RyaW5nKDAsIDUwMCk7XHJcblx0aWYgKHdhc1RydW5jYXRlZCkge1xyXG5cdFx0cHJldmlldyArPSAnXHUyMDI2JztcclxuXHR9XHJcblx0cmV0dXJuIHByZXZpZXc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkRmlsZVByZXZpZXcoXHJcblx0ZmlsZTogVEZpbGUsXHJcblx0YXBwOiBBcHAsXHJcblx0cHJvcGVydHlWYWx1ZTogdW5rbm93bixcclxuXHRzZXR0aW5nczoge1xyXG5cdFx0ZmFsbGJhY2tUb0NvbnRlbnQ6IGJvb2xlYW47XHJcblx0XHRvbWl0Rmlyc3RMaW5lOiBib29sZWFuO1xyXG5cdFx0dHJ1bmNhdGVQcmV2aWV3UHJvcGVydHk/OiBib29sZWFuO1xyXG5cdH0sXHJcblx0ZmlsZU5hbWU/OiBzdHJpbmcsXHJcblx0dGl0bGVWYWx1ZT86IHN0cmluZ1xyXG4pOiBQcm9taXNlPHN0cmluZz4ge1xyXG5cdC8vIEhhbmRsZSBhcnJheXMgKGUuZy4sIGFsaWFzZXMsIHRhZ3MpIGJ5IGpvaW5pbmcgdGhlbVxyXG5cdGxldCByZXN1bHQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG5cdFxyXG5cdGlmIChwcm9wZXJ0eVZhbHVlICE9IG51bGwpIHtcclxuXHRcdGlmIChBcnJheS5pc0FycmF5KHByb3BlcnR5VmFsdWUpKSB7XHJcblx0XHRcdC8vIEpvaW4gYXJyYXkgaXRlbXMgaW50byBhIHN0cmluZ1xyXG5cdFx0XHRjb25zdCBpdGVtcyA9IHByb3BlcnR5VmFsdWUubWFwKChpdGVtOiB1bmtub3duKSA9PiB7XHJcblx0XHRcdFx0aWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICdkYXRhJyBpbiBpdGVtKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gU3RyaW5nKChpdGVtIGFzIHsgZGF0YTogdW5rbm93biB9KS5kYXRhKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIFN0cmluZyhpdGVtKTtcclxuXHRcdFx0fSkuZmlsdGVyKChzOiBzdHJpbmcpID0+IHMudHJpbSgpLmxlbmd0aCA+IDApO1xyXG5cdFx0XHRyZXN1bHQgPSBpdGVtcy5sZW5ndGggPiAwID8gaXRlbXMuam9pbignLCAnKSA6IG51bGw7XHJcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiBwcm9wZXJ0eVZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgcHJvcGVydHlWYWx1ZSA9PT0gJ251bWJlcicpIHtcclxuXHRcdFx0Y29uc3Qgc3RyID0gU3RyaW5nKHByb3BlcnR5VmFsdWUpLnRyaW0oKTtcclxuXHRcdFx0cmVzdWx0ID0gc3RyLmxlbmd0aCA+IDAgPyBzdHIgOiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKHJlc3VsdCkge1xyXG5cdFx0Ly8gVHJ1bmNhdGUgaWYgc2V0dGluZyBpcyBlbmFibGVkXHJcblx0XHRpZiAoc2V0dGluZ3MudHJ1bmNhdGVQcmV2aWV3UHJvcGVydHkpIHtcclxuXHRcdFx0Y29uc3Qgd2FzVHJ1bmNhdGVkID0gcmVzdWx0Lmxlbmd0aCA+IDUwMDtcclxuXHRcdFx0cmVzdWx0ID0gcmVzdWx0LnN1YnN0cmluZygwLCA1MDApO1xyXG5cdFx0XHRpZiAod2FzVHJ1bmNhdGVkKSB7XHJcblx0XHRcdFx0cmVzdWx0ICs9ICdcdTIwMjYnO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH1cclxuXHJcblx0aWYgKHNldHRpbmdzLmZhbGxiYWNrVG9Db250ZW50KSB7XHJcblx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XHJcblx0XHRyZXR1cm4gc2FuaXRpemVGb3JQcmV2aWV3KFxyXG5cdFx0XHRjb250ZW50LFxyXG5cdFx0XHRzZXR0aW5ncy5vbWl0Rmlyc3RMaW5lLFxyXG5cdFx0XHRmaWxlTmFtZSxcclxuXHRcdFx0dGl0bGVWYWx1ZVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdHJldHVybiAnJztcclxufVxyXG5cclxuIiwgIi8qKlxuICogQ29udGVudCBsb2FkaW5nIHV0aWxpdGllc1xuICogSGFuZGxlcyBsb2FkaW5nIGltYWdlcyBhbmQgc25pcHBldHMgZm9yIGVudHJpZXNcbiAqIE9wdGltaXplZCBmb3IgcGVyZm9ybWFuY2Ugd2l0aCBwYXJhbGxlbCBsb2FkaW5nIGFuZCBjYWNoaW5nXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgcHJvY2Vzc0ltYWdlUGF0aHMsIHJlc29sdmVJbnRlcm5hbEltYWdlUGF0aHMsIGV4dHJhY3RFbWJlZEltYWdlcyB9IGZyb20gJy4uL3V0aWxzL2ltYWdlJztcbmltcG9ydCB7IGxvYWRGaWxlUHJldmlldyB9IGZyb20gJy4uL3V0aWxzL3ByZXZpZXcnO1xuXG4vKipcbiAqIExvYWRzIGltYWdlcyBmb3IgYW4gZW50cnlcbiAqIEhhbmRsZXMgcHJvcGVydHkgaW1hZ2VzLCBmYWxsYmFjayB0byBlbWJlZHMsIGFuZCBjYWNoaW5nXG4gKiBCYXNlZCBvbiBEeW5hbWljIFZpZXdzJyBmYXN0IHBhcmFsbGVsIGxvYWRpbmcgYXBwcm9hY2hcbiAqXG4gKiBAcGFyYW0gcGF0aCAtIEZpbGUgcGF0aCBmb3IgdGhlIGVudHJ5XG4gKiBAcGFyYW0gZmlsZSAtIFRGaWxlIG9iamVjdFxuICogQHBhcmFtIGFwcCAtIE9ic2lkaWFuIGFwcCBpbnN0YW5jZVxuICogQHBhcmFtIGltYWdlUHJvcGVydHlWYWx1ZXMgLSBBcnJheSBvZiBpbWFnZSBwcm9wZXJ0eSB2YWx1ZXNcbiAqIEBwYXJhbSBmYWxsYmFja1RvRW1iZWRzIC0gV2hldGhlciB0byBleHRyYWN0IGVtYmVkZGVkIGltYWdlcyBpZiBubyBwcm9wZXJ0eSBpbWFnZXMgKCdhbHdheXMnIHwgJ2lmLWVtcHR5JyB8ICduZXZlcicgfCBib29sZWFuIGZvciBsZWdhY3kpXG4gKiBAcGFyYW0gaW1hZ2VDYWNoZSAtIENhY2hlIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgaW1hZ2VzXG4gKiBAcGFyYW0gaGFzSW1hZ2VDYWNoZSAtIENhY2hlIG9iamVjdCB0byB0cmFjayBpbWFnZSBhdmFpbGFiaWxpdHlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRJbWFnZUZvckVudHJ5KFxuXHRwYXRoOiBzdHJpbmcsXG5cdGZpbGU6IFRGaWxlLFxuXHRhcHA6IEFwcCxcblx0aW1hZ2VQcm9wZXJ0eVZhbHVlczogdW5rbm93bltdLFxuXHRmYWxsYmFja1RvRW1iZWRzOiBib29sZWFuIHwgJ2Fsd2F5cycgfCAnaWYtZW1wdHknIHwgJ25ldmVyJyxcblx0aW1hZ2VDYWNoZTogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgc3RyaW5nW10+LFxuXHRoYXNJbWFnZUNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPlxuKTogUHJvbWlzZTx2b2lkPiB7XG5cdC8vIENoZWNrIGlmIGltYWdlIHByb3BlcnR5IGhhcyBhbnkgdmFsdWVzIGF0IGFsbCAoZXZlbiBpZiB0aGV5IGZhaWwgdG8gcmVzb2x2ZSlcblx0Y29uc3QgaGFzUHJvcGVydHlWYWx1ZXMgPSBpbWFnZVByb3BlcnR5VmFsdWVzICYmIEFycmF5LmlzQXJyYXkoaW1hZ2VQcm9wZXJ0eVZhbHVlcykgJiYgaW1hZ2VQcm9wZXJ0eVZhbHVlcy5sZW5ndGggPiAwO1xuXHRcblx0Ly8gQ29udmVydCBmYWxsYmFja1RvRW1iZWRzIHRvIGJvb2xlYW4gZm9yIGxvZ2ljXG5cdGNvbnN0IHNob3VsZEZhbGxiYWNrID0gZmFsbGJhY2tUb0VtYmVkcyA9PT0gdHJ1ZSB8fCBmYWxsYmFja1RvRW1iZWRzID09PSAnYWx3YXlzJyB8fCBcblx0XHQoZmFsbGJhY2tUb0VtYmVkcyA9PT0gJ2lmLWVtcHR5JyAmJiAhaGFzUHJvcGVydHlWYWx1ZXMpO1xuXHRcblx0Ly8gSWYgZmFsbGJhY2sgaXMgZGlzYWJsZWQgYW5kIHdlIGhhdmUgY2FjaGVkIGltYWdlcywgY2xlYXIgdGhlbSB0byBmb3JjZSByZS1ldmFsdWF0aW9uXG5cdC8vIFRoaXMgZW5zdXJlcyBjYWNoZWQgZW1iZWQgaW1hZ2VzIGFyZSByZW1vdmVkIHdoZW4gc2V0dGluZyBpcyB0dXJuZWQgb2ZmXG5cdGlmICghc2hvdWxkRmFsbGJhY2sgJiYgcGF0aCBpbiBpbWFnZUNhY2hlKSB7XG5cdFx0ZGVsZXRlIGltYWdlQ2FjaGVbcGF0aF07XG5cdFx0ZGVsZXRlIGhhc0ltYWdlQ2FjaGVbcGF0aF07XG5cdH1cblx0XG5cdC8vIElmIGFscmVhZHkgaW4gY2FjaGUgYW5kIG5vIHByb3BlcnR5IHZhbHVlcywgc2tpcCAob25seSBpZiBmYWxsYmFjayBpcyBlbmFibGVkKVxuXHRpZiAocGF0aCBpbiBpbWFnZUNhY2hlICYmICFoYXNQcm9wZXJ0eVZhbHVlcyAmJiBzaG91bGRGYWxsYmFjaykge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHRyeSB7XG5cdFx0Ly8gUHJvY2VzcyBhbmQgdmFsaWRhdGUgaW1hZ2UgcGF0aHMgdXNpbmcgc2hhcmVkIHV0aWxpdHlcblx0XHRjb25zdCB7IGludGVybmFsUGF0aHMsIGV4dGVybmFsVXJscyB9ID0gYXdhaXQgcHJvY2Vzc0ltYWdlUGF0aHMoaW1hZ2VQcm9wZXJ0eVZhbHVlcyBhcyBzdHJpbmdbXSk7XG5cblx0XHQvLyBDb252ZXJ0IGludGVybmFsIHBhdGhzIHRvIHJlc291cmNlIFVSTHMgdXNpbmcgc2hhcmVkIHV0aWxpdHlcblx0XHRsZXQgdmFsaWRJbWFnZXM6IHN0cmluZ1tdID0gW1xuXHRcdFx0Li4ucmVzb2x2ZUludGVybmFsSW1hZ2VQYXRocyhpbnRlcm5hbFBhdGhzLCBwYXRoLCBhcHApLFxuXHRcdFx0Li4uZXh0ZXJuYWxVcmxzICAvLyBFeHRlcm5hbCBVUkxzIGFscmVhZHkgdmFsaWRhdGVkIGJ5IHByb2Nlc3NJbWFnZVBhdGhzXG5cdFx0XTtcblxuXHRcdC8vIE9ubHkgZmFsbCBiYWNrIHRvIGVtYmVkIGltYWdlcyBpZjpcblx0XHQvLyAxLiBObyBwcm9wZXJ0eSB2YWx1ZXMgd2VyZSBzZXQgYXQgYWxsIChub3Qgd2hlbiB0aGV5IGV4aXN0IGJ1dCBmYWlsIHRvIHJlc29sdmUpXG5cdFx0Ly8gMi4gTm8gdmFsaWQgaW1hZ2VzIHdlcmUgZm91bmQgZnJvbSBwcm9wZXJ0eVxuXHRcdC8vIDMuIEZhbGxiYWNrIGlzIGVuYWJsZWRcblx0XHRpZiAodmFsaWRJbWFnZXMubGVuZ3RoID09PSAwICYmICFoYXNQcm9wZXJ0eVZhbHVlcyAmJiBzaG91bGRGYWxsYmFjaykge1xuXHRcdFx0dmFsaWRJbWFnZXMgPSBhd2FpdCBleHRyYWN0RW1iZWRJbWFnZXMoZmlsZSwgYXBwKTtcblx0XHR9XG5cblx0XHRpZiAodmFsaWRJbWFnZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0Ly8gU3RvcmUgYXMgYXJyYXkgaWYgbXVsdGlwbGUsIHN0cmluZyBpZiBzaW5nbGVcblx0XHRcdC8vIFRoaXMgd2lsbCBvdmVyd3JpdGUgYW55IGNhY2hlZCBlbWJlZCBpbWFnZXMgaWYgcHJvcGVydHkgaW1hZ2VzIGFyZSBmb3VuZFxuXHRcdFx0aW1hZ2VDYWNoZVtwYXRoXSA9IHZhbGlkSW1hZ2VzLmxlbmd0aCA+IDEgPyB2YWxpZEltYWdlcyA6IHZhbGlkSW1hZ2VzWzBdO1xuXHRcdFx0aGFzSW1hZ2VDYWNoZVtwYXRoXSA9IHRydWU7XG5cdFx0fSBlbHNlIGlmIChoYXNQcm9wZXJ0eVZhbHVlcykge1xuXHRcdFx0Ly8gSWYgcHJvcGVydHkgdmFsdWVzIGV4aXN0IGJ1dCBmYWlsZWQgdG8gcmVzb2x2ZSwgbWFyayBhcyBhdHRlbXB0ZWRcblx0XHRcdC8vIFRoaXMgcHJldmVudHMgZW1iZWQgaW1hZ2VzIGZyb20gYmVpbmcgbG9hZGVkIGxhdGVyXG5cdFx0XHQvLyBBbHNvIGNsZWFyIGFueSBjYWNoZWQgZW1iZWQgaW1hZ2VzXG5cdFx0XHRkZWxldGUgaW1hZ2VDYWNoZVtwYXRoXTtcblx0XHRcdGhhc0ltYWdlQ2FjaGVbcGF0aF0gPSB0cnVlO1xuXHRcdH0gZWxzZSBpZiAoIXNob3VsZEZhbGxiYWNrKSB7XG5cdFx0XHQvLyBJZiBmYWxsYmFjayBpcyBkaXNhYmxlZCBhbmQgbm8gcHJvcGVydHkgaW1hZ2VzLCBjbGVhciBjYWNoZVxuXHRcdFx0ZGVsZXRlIGltYWdlQ2FjaGVbcGF0aF07XG5cdFx0XHRkZWxldGUgaGFzSW1hZ2VDYWNoZVtwYXRoXTtcblx0XHR9XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGxvYWQgaW1hZ2UgZm9yICR7cGF0aH06YCwgZXJyb3IpO1xuXHR9XG59XG5cbi8qKlxuICogTG9hZHMgaW1hZ2VzIGZvciBtdWx0aXBsZSBlbnRyaWVzIGluIHBhcmFsbGVsIGJhdGNoZXNcbiAqIFVzZXMgYmF0Y2hpbmcgdG8gYXZvaWQgb3ZlcndoZWxtaW5nIHRoZSBicm93c2VyIHdpdGggdG9vIG1hbnkgY29uY3VycmVudCByZXF1ZXN0c1xuICogQmFzZWQgb24gRHluYW1pYyBWaWV3cycgYXBwcm9hY2ggYnV0IHdpdGggYmF0Y2hpbmcgZm9yIGxhcmdlIGRhdGFzZXRzXG4gKlxuICogQHBhcmFtIGVudHJpZXMgLSBBcnJheSBvZiBlbnRyaWVzIHdpdGggcGF0aCwgZmlsZSwgYW5kIGltYWdlUHJvcGVydHlWYWx1ZXNcbiAqIEBwYXJhbSBmYWxsYmFja1RvRW1iZWRzIC0gV2hldGhlciB0byBleHRyYWN0IGVtYmVkZGVkIGltYWdlcyBpZiBubyBwcm9wZXJ0eSBpbWFnZXNcbiAqIEBwYXJhbSBhcHAgLSBPYnNpZGlhbiBhcHAgaW5zdGFuY2VcbiAqIEBwYXJhbSBpbWFnZUNhY2hlIC0gQ2FjaGUgb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBpbWFnZXNcbiAqIEBwYXJhbSBoYXNJbWFnZUNhY2hlIC0gQ2FjaGUgb2JqZWN0IHRvIHRyYWNrIGltYWdlIGF2YWlsYWJpbGl0eVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZEltYWdlc0ZvckVudHJpZXMoXG5cdGVudHJpZXM6IEFycmF5PHtcblx0XHRwYXRoOiBzdHJpbmc7XG5cdFx0ZmlsZTogVEZpbGU7XG5cdFx0aW1hZ2VQcm9wZXJ0eVZhbHVlczogdW5rbm93bltdO1xuXHR9Pixcblx0ZmFsbGJhY2tUb0VtYmVkczogYm9vbGVhbiB8ICdhbHdheXMnIHwgJ2lmLWVtcHR5JyB8ICduZXZlcicsXG5cdGFwcDogQXBwLFxuXHRpbWFnZUNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXT4sXG5cdGhhc0ltYWdlQ2FjaGU6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+XG4pOiBQcm9taXNlPHZvaWQ+IHtcblx0Ly8gRmlsdGVyIGVudHJpZXM6IG9ubHkgc2tpcCBpZiBjYWNoZWQgQU5EIG5vIHByb3BlcnR5IHZhbHVlcyBleGlzdFxuXHQvLyBJZiBwcm9wZXJ0eSB2YWx1ZXMgZXhpc3QsIHdlIE1VU1QgcmUtZXZhbHVhdGUgdG8gZW5zdXJlIHByb3BlcnR5IGltYWdlcyB0YWtlIHByaW9yaXR5XG5cdGNvbnN0IGVudHJpZXNUb1Byb2Nlc3MgPSBlbnRyaWVzLmZpbHRlcihlbnRyeSA9PiB7XG5cdFx0Y29uc3QgaGFzUHJvcGVydHlWYWx1ZXMgPSBlbnRyeS5pbWFnZVByb3BlcnR5VmFsdWVzICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaW1hZ2VQcm9wZXJ0eVZhbHVlcykgJiYgZW50cnkuaW1hZ2VQcm9wZXJ0eVZhbHVlcy5sZW5ndGggPiAwO1xuXHRcdC8vIFByb2Nlc3MgaWY6IG5vdCBjYWNoZWQsIE9SIGhhcyBwcm9wZXJ0eSB2YWx1ZXMgKHRvIGVuc3VyZSBwcm9wZXJ0eSBpbWFnZXMgb3ZlcnJpZGUgY2FjaGVkIGVtYmVkcylcblx0XHRyZXR1cm4gIShlbnRyeS5wYXRoIGluIGltYWdlQ2FjaGUpIHx8IGhhc1Byb3BlcnR5VmFsdWVzO1xuXHR9KTtcblx0XG5cdC8vIEJhdGNoIHNpemU6IHByb2Nlc3MgNTAgaW1hZ2VzIGF0IGEgdGltZSB0byBhdm9pZCBvdmVyd2hlbG1pbmcgdGhlIGJyb3dzZXJcblx0Ly8gVGhpcyBiYWxhbmNlcyBwZXJmb3JtYW5jZSAocGFyYWxsZWwgbG9hZGluZykgd2l0aCBicm93c2VyIGxpbWl0c1xuXHRjb25zdCBCQVRDSF9TSVpFID0gNTA7XG5cdFxuXHQvLyBQcm9jZXNzIGluIGJhdGNoZXNcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzVG9Qcm9jZXNzLmxlbmd0aDsgaSArPSBCQVRDSF9TSVpFKSB7XG5cdFx0Y29uc3QgYmF0Y2ggPSBlbnRyaWVzVG9Qcm9jZXNzLnNsaWNlKGksIGkgKyBCQVRDSF9TSVpFKTtcblx0XHRcblx0XHQvLyBMb2FkIGJhdGNoIGluIHBhcmFsbGVsXG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0XHRiYXRjaC5tYXAoYXN5bmMgKGVudHJ5KSA9PiB7XG5cdFx0XHRcdGF3YWl0IGxvYWRJbWFnZUZvckVudHJ5KFxuXHRcdFx0XHRcdGVudHJ5LnBhdGgsXG5cdFx0XHRcdFx0ZW50cnkuZmlsZSxcblx0XHRcdFx0XHRhcHAsXG5cdFx0XHRcdFx0ZW50cnkuaW1hZ2VQcm9wZXJ0eVZhbHVlcyxcblx0XHRcdFx0XHRmYWxsYmFja1RvRW1iZWRzLFxuXHRcdFx0XHRcdGltYWdlQ2FjaGUsXG5cdFx0XHRcdFx0aGFzSW1hZ2VDYWNoZVxuXHRcdFx0XHQpO1xuXHRcdFx0fSlcblx0XHQpO1xuXHR9XG59XG5cbi8qKlxuICogTG9hZHMgaW1hZ2VzIGZvciBtdWx0aXBsZSBlbnRyaWVzIHN5bmNocm9ub3VzbHkgKGZhc3QgcGF0aClcbiAqIFJlc29sdmVzIGltYWdlIGZpbGUgcmVmZXJlbmNlcyBpbW1lZGlhdGVseSBmb3IgaW5zdGFudCByZW5kZXJpbmdcbiAqIFVzZXMgcGFyYWxsZWwgbG9hZGluZyBsaWtlIER5bmFtaWMgVmlld3MgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICogXG4gKiBAZGVwcmVjYXRlZCBVc2UgbG9hZEltYWdlc0ZvckVudHJpZXMgaW5zdGVhZCAtIGl0J3MgZmFzdGVyIHdpdGggcGFyYWxsZWwgbG9hZGluZ1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZEltYWdlc0ZvckVudHJpZXNTeW5jKFxuXHRlbnRyaWVzOiBBcnJheTx7XG5cdFx0cGF0aDogc3RyaW5nO1xuXHRcdGZpbGU6IFRGaWxlO1xuXHRcdGltYWdlUHJvcGVydHlWYWx1ZXM6IHVua25vd25bXTtcblx0fT4sXG5cdGZhbGxiYWNrVG9FbWJlZHM6IGJvb2xlYW4gfCAnYWx3YXlzJyB8ICdpZi1lbXB0eScgfCAnbmV2ZXInLFxuXHRhcHA6IEFwcCxcblx0aW1hZ2VDYWNoZTogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgc3RyaW5nW10+LFxuXHRoYXNJbWFnZUNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPlxuKTogUHJvbWlzZTx2b2lkPiB7XG5cdC8vIFVzZSB0aGUgcGFyYWxsZWwgbG9hZGluZyBhcHByb2FjaCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG5cdGF3YWl0IGxvYWRJbWFnZXNGb3JFbnRyaWVzKGVudHJpZXMsIGZhbGxiYWNrVG9FbWJlZHMsIGFwcCwgaW1hZ2VDYWNoZSwgaGFzSW1hZ2VDYWNoZSk7XG59XG5cbi8qKlxuICogTG9hZHMgZW1iZWQgaW1hZ2VzIGFzeW5jaHJvbm91c2x5IChmYWxsYmFjayBvbmx5KVxuICogQ2FsbGVkIGluIGJhY2tncm91bmQgYWZ0ZXIgaW5pdGlhbCByZW5kZXIgZm9yIGVudHJpZXMgd2l0aG91dCBwcm9wZXJ0eSBpbWFnZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRFbWJlZEltYWdlc0ZvckVudHJpZXMoXG5cdGVudHJpZXM6IEFycmF5PHtcblx0XHRwYXRoOiBzdHJpbmc7XG5cdFx0ZmlsZTogVEZpbGU7XG5cdH0+LFxuXHRhcHA6IEFwcCxcblx0aW1hZ2VDYWNoZTogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgc3RyaW5nW10+LFxuXHRoYXNJbWFnZUNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPlxuKTogUHJvbWlzZTx2b2lkPiB7XG5cdGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdGVudHJpZXMubWFwKGFzeW5jIChlbnRyeSkgPT4ge1xuXHRcdFx0Ly8gT25seSBwcm9jZXNzIGVudHJpZXMgdGhhdCBkb24ndCBoYXZlIGltYWdlcyB5ZXRcblx0XHRcdGlmIChlbnRyeS5wYXRoIGluIGltYWdlQ2FjaGUgfHwgaGFzSW1hZ2VDYWNoZVtlbnRyeS5wYXRoXSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHZhbGlkSW1hZ2VzID0gYXdhaXQgZXh0cmFjdEVtYmVkSW1hZ2VzKGVudHJ5LmZpbGUsIGFwcCk7XG5cdFx0XHRcdGlmICh2YWxpZEltYWdlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0aW1hZ2VDYWNoZVtlbnRyeS5wYXRoXSA9IHZhbGlkSW1hZ2VzLmxlbmd0aCA+IDEgPyB2YWxpZEltYWdlcyA6IHZhbGlkSW1hZ2VzWzBdO1xuXHRcdFx0XHRcdGhhc0ltYWdlQ2FjaGVbZW50cnkucGF0aF0gPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBlbWJlZCBpbWFnZXMgZm9yICR7ZW50cnkucGF0aH06YCwgZXJyb3IpO1xuXHRcdFx0fVxuXHRcdH0pXG5cdCk7XG59XG5cbi8qKlxuICogTG9hZHMgc25pcHBldHMgZm9yIG11bHRpcGxlIGVudHJpZXMgaW4gcGFyYWxsZWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRTbmlwcGV0c0ZvckVudHJpZXMoXG5cdGVudHJpZXM6IEFycmF5PHtcblx0XHRwYXRoOiBzdHJpbmc7XG5cdFx0ZmlsZTogVEZpbGU7XG5cdFx0ZGVzY3JpcHRpb25EYXRhOiB1bmtub3duO1xuXHRcdGZpbGVOYW1lPzogc3RyaW5nO1xuXHRcdHRpdGxlU3RyaW5nPzogc3RyaW5nO1xuXHR9Pixcblx0ZmFsbGJhY2tUb0NvbnRlbnQ6IGJvb2xlYW4sXG5cdG9taXRGaXJzdExpbmU6IGJvb2xlYW4sXG5cdGFwcDogQXBwLFxuXHRzbmlwcGV0Q2FjaGU6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sXG5cdHRydW5jYXRlUHJldmlld1Byb3BlcnR5PzogYm9vbGVhblxuKTogUHJvbWlzZTx2b2lkPiB7XG5cdGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdGVudHJpZXMubWFwKGFzeW5jIChlbnRyeSkgPT4ge1xuXHRcdFx0Ly8gU2tpcCBpZiBhbHJlYWR5IGluIGNhY2hlXG5cdFx0XHRpZiAoZW50cnkucGF0aCBpbiBzbmlwcGV0Q2FjaGUpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRpZiAoZW50cnkuZmlsZS5leHRlbnNpb24gPT09ICdtZCcgfHwgZW50cnkuZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XG5cdFx0XHRcdFx0c25pcHBldENhY2hlW2VudHJ5LnBhdGhdID0gYXdhaXQgbG9hZEZpbGVQcmV2aWV3KFxuXHRcdFx0XHRcdFx0ZW50cnkuZmlsZSxcblx0XHRcdFx0XHRcdGFwcCxcblx0XHRcdFx0XHRcdGVudHJ5LmRlc2NyaXB0aW9uRGF0YSxcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0ZmFsbGJhY2tUb0NvbnRlbnQsXG5cdFx0XHRcdFx0XHRcdG9taXRGaXJzdExpbmUsXG5cdFx0XHRcdFx0XHRcdHRydW5jYXRlUHJldmlld1Byb3BlcnR5XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0ZW50cnkuZmlsZU5hbWUsXG5cdFx0XHRcdFx0XHRlbnRyeS50aXRsZVN0cmluZ1xuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c25pcHBldENhY2hlW2VudHJ5LnBhdGhdID0gJyc7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIHNuaXBwZXQgZm9yICR7ZW50cnkucGF0aH06YCwgZXJyb3IpO1xuXHRcdFx0XHRzbmlwcGV0Q2FjaGVbZW50cnkucGF0aF0gPSAnJztcblx0XHRcdH1cblx0XHR9KVxuXHQpO1xufVxuXG4iLCAiLyoqXHJcbiAqIFNoYXJlZCBDYXJkIFJlbmRlcmVyIGZvciBDTVMgVmlld3NcclxuICogQmFzZWQgb24gRHluYW1pYyBWaWV3cyBidXQgd2l0aCBDTVMtc3BlY2lmaWMgZmVhdHVyZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIEJhc2VzRW50cnksIFRGaWxlLCBNZW51IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4uL3V0aWxzL2Nzcy1wcm9wcyc7XHJcbmltcG9ydCB0eXBlIEJhc2VzQ01TUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgdHlwZSB7IENhcmREYXRhIH0gZnJvbSAnLi4vc2hhcmVkL2RhdGEtdHJhbnNmb3JtJztcclxuaW1wb3J0IHR5cGUgeyBDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3NoYXJlZC9kYXRhLXRyYW5zZm9ybSc7XHJcbmltcG9ydCB7IHJlbmRlckRyYWZ0U3RhdHVzQmFkZ2UgfSBmcm9tICcuLi91dGlscy9kcmFmdC1zdGF0dXMtYmFkZ2UnO1xyXG5pbXBvcnQgeyBzZXR1cFF1aWNrRWRpdEljb24gfSBmcm9tICcuLi91dGlscy9xdWljay1lZGl0LWljb24nO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eVJlbmRlcmVyIH0gZnJvbSAnLi4vdXRpbHMvcHJvcGVydHktcmVuZGVyZXInO1xyXG5pbXBvcnQgeyBjb252ZXJ0R2lmVG9TdGF0aWMgfSBmcm9tICcuLi91dGlscy9pbWFnZSc7XHJcbmltcG9ydCB7IGdldFRhZ1N0eWxlLCBzaG93VGFnSGFzaFByZWZpeCB9IGZyb20gJy4uL3V0aWxzL3N0eWxlLXNldHRpbmdzJztcclxuaW1wb3J0IHsgZ2V0RmlsZUZyb250bWF0dGVyIH0gZnJvbSAnLi4vdXRpbHMvZnJvbnRtYXR0ZXItaGVscGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTaGFyZWRDYXJkUmVuZGVyZXIge1xyXG5cdHByb3RlY3RlZCBiYXNlc0NvbmZpZz86IHsgZ2V0PzogKGtleTogc3RyaW5nKSA9PiB1bmtub3duIH07XHJcblx0cHJvdGVjdGVkIGJhc2VzQ29udHJvbGxlcj86IHsgZ2V0UHJvcGVydHlEaXNwbGF5TmFtZT86IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZyB9O1xyXG5cdHByaXZhdGUgcHJvcGVydHlSZW5kZXJlcjogUHJvcGVydHlSZW5kZXJlcjtcclxuXHRwcm90ZWN0ZWQgbWR4RnJvbnRtYXR0ZXJDYWNoZT86IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbD47XHJcblx0XHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcm90ZWN0ZWQgYXBwOiBBcHAsXHJcblx0XHRwcm90ZWN0ZWQgcGx1Z2luOiBCYXNlc0NNU1BsdWdpbixcclxuXHRcdHByb3RlY3RlZCBwcm9wZXJ0eU9ic2VydmVyczogUmVzaXplT2JzZXJ2ZXJbXSxcclxuXHRcdHByb3RlY3RlZCB1cGRhdGVMYXlvdXRSZWY6IHsgY3VycmVudDogKCgpID0+IHZvaWQpIHwgbnVsbCB9LFxyXG5cdFx0YmFzZXNDb25maWc/OiB7IGdldD86IChrZXk6IHN0cmluZykgPT4gdW5rbm93biB9LFxyXG5cdFx0YmFzZXNDb250cm9sbGVyPzogdW5rbm93blxyXG5cdCkge1xyXG5cdFx0dGhpcy5iYXNlc0NvbmZpZyA9IGJhc2VzQ29uZmlnO1xyXG5cdFx0dGhpcy5iYXNlc0NvbnRyb2xsZXIgPSBiYXNlc0NvbnRyb2xsZXIgYXMgeyBnZXRQcm9wZXJ0eURpc3BsYXlOYW1lPzogKG5hbWU6IHN0cmluZykgPT4gc3RyaW5nIH07XHJcblx0XHR0aGlzLnByb3BlcnR5UmVuZGVyZXIgPSBuZXcgUHJvcGVydHlSZW5kZXJlcihcclxuXHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdCgpID0+IHRoaXMuYmFzZXNDb25maWcsIC8vIFBhc3MgYSBnZXR0ZXIgZnVuY3Rpb24gc28gaXQgYWx3YXlzIGdldHMgdGhlIGxhdGVzdCBjb25maWdcclxuXHRcdFx0KCkgPT4gdGhpcy5iYXNlc0NvbnRyb2xsZXIgLy8gUGFzcyBhIGdldHRlciBmdW5jdGlvbiBzbyBpdCBhbHdheXMgZ2V0cyB0aGUgbGF0ZXN0IGNvbnRyb2xsZXJcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgTURYIGZyb250bWF0dGVyIGNhY2hlIGZvciBzeW5jaHJvbm91cyBhY2Nlc3MgZHVyaW5nIHJlbmRlcmluZ1xyXG5cdCAqL1xyXG5cdHNldE1keEZyb250bWF0dGVyQ2FjaGUoY2FjaGU6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbD4pOiB2b2lkIHtcclxuXHRcdHRoaXMubWR4RnJvbnRtYXR0ZXJDYWNoZSA9IGNhY2hlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVuZGVycyBhIGNvbXBsZXRlIGNhcmQgd2l0aCBDTVMgZmVhdHVyZXNcclxuXHQgKi9cclxuXHRyZW5kZXJDYXJkKFxyXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdGNhcmQ6IENhcmREYXRhLFxyXG5cdFx0ZW50cnk6IEJhc2VzRW50cnksXHJcblx0XHRzZXR0aW5nczogQ01TU2V0dGluZ3MsXHJcblx0XHRob3ZlclBhcmVudDogdW5rbm93bixcclxuXHRcdGlzU2VsZWN0ZWQ6IGJvb2xlYW4sXHJcblx0XHRvblNlbGVjdDogKHBhdGg6IHN0cmluZywgc2VsZWN0ZWQ6IGJvb2xlYW4pID0+IHZvaWQsXHJcblx0XHRvblByb3BlcnR5VG9nZ2xlPzogKHBhdGg6IHN0cmluZywgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHVua25vd24pID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+LFxyXG5cdFx0dG9vbGJhckFjdGlvbnM/OiB7IGhhbmRsZURlbGV0ZTogKCkgPT4gUHJvbWlzZTx2b2lkPiB9XHJcblx0KTogdm9pZCB7XHJcblx0XHQvLyBDcmVhdGUgY2FyZCBlbGVtZW50XHJcblx0XHRjb25zdCBjYXJkRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KCdjYXJkIGJhc2VzLWNtcy1jYXJkJyk7XHJcblx0XHRcclxuXHRcdC8vIENSSVRJQ0FMOiBGb3JjZSBpbW1lZGlhdGUgbGF5b3V0IHJlZmxvdyB0byBwcmV2ZW50IEZvbGRlciBOb3RlcyBwbHVnaW4gaW50ZXJmZXJlbmNlXHJcblx0XHQvLyBJbmxpbmUgc3R5bGVzIHRyaWdnZXIgbGF5b3V0IGNhbGN1bGF0aW9uIGJlZm9yZSBGb2xkZXIgTm90ZXMnIE11dGF0aW9uT2JzZXJ2ZXIgcHJvY2Vzc2VzIHRoZSBlbGVtZW50XHJcblx0XHRzZXRDc3NQcm9wcyhjYXJkRWwsIHtcclxuXHRcdFx0ZGlzcGxheTogJ2Jsb2NrJyxcclxuXHRcdFx0cG9zaXRpb246ICdyZWxhdGl2ZSdcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRpZiAoc2V0dGluZ3MuaW1hZ2VGb3JtYXQgPT09ICdjb3ZlcicpIHtcclxuXHRcdFx0Y2FyZEVsLmNsYXNzTGlzdC5hZGQoJ2ltYWdlLWZvcm1hdC1jb3ZlcicpO1xyXG5cdFx0fSBlbHNlIGlmIChzZXR0aW5ncy5pbWFnZUZvcm1hdCA9PT0gJ3RodW1ibmFpbCcpIHtcclxuXHRcdFx0Y2FyZEVsLmNsYXNzTGlzdC5hZGQoJ2ltYWdlLWZvcm1hdC10aHVtYm5haWwnKTtcclxuXHRcdFx0Ly8gQWRkIHBvc2l0aW9uIGNsYXNzIGZvciB0aHVtYm5haWxcclxuXHRcdFx0Y2FyZEVsLmNsYXNzTGlzdC5hZGQoYHRodW1ibmFpbC0ke3NldHRpbmdzLmltYWdlUG9zaXRpb259YCk7XHJcblx0XHR9XHJcblx0XHRjYXJkRWwuc2V0QXR0cmlidXRlKCdkYXRhLXBhdGgnLCBjYXJkLnBhdGgpO1xyXG5cdFx0Y2FyZEVsLnNldEF0dHJpYnV0ZSgnZGF0YS1ocmVmJywgY2FyZC5wYXRoKTtcclxuXHRcdGNhcmRFbC5hZGRDbGFzcygnYmFzZXMtY21zLWN1cnNvci1wb2ludGVyJyk7XHJcblxyXG5cdFx0Ly8gU2VsZWN0aW9uIGNoZWNrYm94XHJcblx0XHRjb25zdCBjaGVja2JveEVsID0gY2FyZEVsLmNyZWF0ZURpdignYmFzZXMtY21zLXNlbGVjdC1jaGVja2JveCcpO1xyXG5cdFx0Y29uc3QgY2hlY2tib3ggPSBjaGVja2JveEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JywgY2xzOiAnc2VsZWN0aW9uLWNoZWNrYm94JyB9KTtcclxuXHRcdGNoZWNrYm94LmNoZWNrZWQgPSBpc1NlbGVjdGVkO1xyXG5cdFx0Y2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0b25TZWxlY3QoY2FyZC5wYXRoLCBjaGVja2JveC5jaGVja2VkKTtcclxuXHRcdH0pO1xyXG5cdFx0Ly8gQWxzbyBoYW5kbGUgY2xpY2sgb24gY2hlY2tib3ggdG8gZW5zdXJlIGl0IHdvcmtzXHJcblx0XHRjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBEcmFmdCBzdGF0dXMgYmFkZ2UgZm9yIG5vbi1jb3ZlciBmb3JtYXRzIChwb3NpdGlvbmVkIGFic29sdXRlbHksIGFsaWduZWQgd2l0aCBjaGVja2JveClcclxuXHRcdGlmIChzZXR0aW5ncy5zaG93RHJhZnRTdGF0dXMgJiYgc2V0dGluZ3MuaW1hZ2VGb3JtYXQgIT09ICdjb3ZlcicpIHtcclxuXHRcdFx0cmVuZGVyRHJhZnRTdGF0dXNCYWRnZShjYXJkRWwsIGVudHJ5LCBjYXJkLnBhdGgsIHNldHRpbmdzLCBvblByb3BlcnR5VG9nZ2xlLCB0aGlzLmFwcCwgdGhpcy5tZHhGcm9udG1hdHRlckNhY2hlKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBIYW5kbGUgY2FyZCBjbGljayB0byBvcGVuIGZpbGUgKGJ1dCBub3Qgd2hlbiBjbGlja2luZyBjaGVja2JveCBvciBwcm9wZXJ0eSBjaGVja2JveGVzKVxyXG5cdFx0Y2FyZEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdC8vIENoZWNrIGlmIGNsaWNrIGlzIG9uIHF1aWNrIGVkaXQgaWNvbiBvciBhbnkgb2YgaXRzIGNoaWxkcmVuIChsaWtlIFNWRylcclxuXHRcdFx0Y29uc3QgcXVpY2tFZGl0SWNvbiA9IHRhcmdldC5jbG9zZXN0KCcuYmFzZXMtY21zLXF1aWNrLWVkaXQtaWNvbicpO1xyXG5cdFx0XHRpZiAocXVpY2tFZGl0SWNvbikge1xyXG5cdFx0XHRcdC8vIEV4cGxpY2l0bHkgcHJldmVudCBjYXJkIGNsaWNrIHdoZW4gaWNvbiBpcyBjbGlja2VkXHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKFxyXG5cdFx0XHRcdGNoZWNrYm94RWwuY29udGFpbnModGFyZ2V0KSB8fFxyXG5cdFx0XHRcdHRhcmdldC50YWdOYW1lID09PSAnSU5QVVQnIHx8XHJcblx0XHRcdFx0dGFyZ2V0LmNsb3Nlc3QoJ2lucHV0JykgfHxcclxuXHRcdFx0XHR0YXJnZXQuY2xvc2VzdCgnLmJhc2VzLWNtcy1wcm9wZXJ0eScpIHx8XHJcblx0XHRcdFx0dGFyZ2V0LmNsb3Nlc3QoJy5jYXJkLXN0YXR1cy1iYWRnZScpXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRjb25zdCBuZXdMZWFmID0gZS5tZXRhS2V5IHx8IGUuY3RybEtleTtcclxuXHRcdFx0dm9pZCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGNhcmQucGF0aCwgJycsIG5ld0xlYWYpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gSGFuZGxlIHJpZ2h0LWNsaWNrIHRvIHNob3cgY29udGV4dCBtZW51XHJcblx0XHQvLyBVc2UgT2JzaWRpYW4ncyBzdGFuZGFyZCBmaWxlLW1lbnUgZXZlbnQgc3Vic2NyaXB0aW9uIHBhdHRlcm5cclxuXHRcdGNhcmRFbC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiB7XHJcblx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHQvLyBEb24ndCBzaG93IGNvbnRleHQgbWVudSBmb3IgY2hlY2tib3hlcywgcHJvcGVydHkgY2hlY2tib3hlcywgc3RhdHVzIGJhZGdlcywgb3IgcXVpY2sgZWRpdCBpY29uXHJcblx0XHRcdGlmIChcclxuXHRcdFx0XHRjaGVja2JveEVsLmNvbnRhaW5zKHRhcmdldCkgfHxcclxuXHRcdFx0XHR0YXJnZXQudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fFxyXG5cdFx0XHRcdHRhcmdldC5jbG9zZXN0KCdpbnB1dCcpIHx8XHJcblx0XHRcdFx0dGFyZ2V0LmNsb3Nlc3QoJy5iYXNlcy1jbXMtcHJvcGVydHknKSB8fFxyXG5cdFx0XHRcdHRhcmdldC5jbG9zZXN0KCcuY2FyZC1zdGF0dXMtYmFkZ2UnKSB8fFxyXG5cdFx0XHRcdHRhcmdldC5jbG9zZXN0KCcuYmFzZXMtY21zLXF1aWNrLWVkaXQtaWNvbicpXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gR2V0IHRoZSBmaWxlXHJcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY2FyZC5wYXRoKTtcclxuXHRcdFx0aWYgKGZpbGUgJiYgZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0Ly8gUHJldmVudCB0aGUgY2FyZCBjbGljayBoYW5kbGVyIGZyb20gZmlyaW5nXHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHQvLyBEb24ndCBwcmV2ZW50IGRlZmF1bHQgLSBPYnNpZGlhbidzIG1lbnUgc3lzdGVtIG5lZWRzIGRlZmF1bHQgYmVoYXZpb3JcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBDaGVjayBjdXJyZW50IHNlbGVjdGlvbiBzdGF0ZSBkeW5hbWljYWxseSBieSBjaGVja2luZyB0aGUgY2hlY2tib3hcclxuXHRcdFx0XHRjb25zdCBjdXJyZW50bHlTZWxlY3RlZCA9IGNoZWNrYm94LmNoZWNrZWQ7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQWRkIFNlbGVjdC9VbnNlbGVjdCBpdGVtXHJcblx0XHRcdFx0aWYgKGN1cnJlbnRseVNlbGVjdGVkKSB7XHJcblx0XHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnVW5zZWxlY3QnKTtcclxuXHRcdFx0XHRcdFx0aXRlbS5zZXRJY29uKCdzcXVhcmUnKTtcclxuXHRcdFx0XHRcdFx0aXRlbS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRvblNlbGVjdChjYXJkLnBhdGgsIGZhbHNlKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ1NlbGVjdCcpO1xyXG5cdFx0XHRcdFx0XHRpdGVtLnNldEljb24oJ2NvcHktY2hlY2snKTtcclxuXHRcdFx0XHRcdFx0aXRlbS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRvblNlbGVjdChjYXJkLnBhdGgsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRtZW51LmFkZFNlcGFyYXRvcigpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFRyaWdnZXIgZmlsZS1tZW51IGV2ZW50IC0gdGhpcyBhbGxvd3Mgb3RoZXIgcGx1Z2lucyB0byBhZGQgdGhlaXIgaXRlbXNcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignZmlsZS1tZW51JywgbWVudSwgZmlsZSwgJ2Jhc2VzJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQWRkIERlbGV0ZSBhdCB0aGUgYm90dG9tIChhZnRlciBhbGwgZmlsZS1tZW51IHN1YnNjcmlwdGlvbnMgaGF2ZSBydW4pXHJcblx0XHRcdFx0Ly8gQWx3YXlzIHNob3cgRGVsZXRlIG9wdGlvbiAtIHRvb2xiYXJBY3Rpb25zIHNob3VsZCBhbHdheXMgYmUgcHJvdmlkZWRcclxuXHRcdFx0XHRtZW51LmFkZFNlcGFyYXRvcigpO1xyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnRGVsZXRlJyk7XHJcblx0XHRcdFx0XHRpdGVtLnNldEljb24oJ3RyYXNoLTInKTtcclxuXHRcdFx0XHRcdGl0ZW0ub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdC8vIERlbGV0ZSBkaXJlY3RseSB3aXRob3V0IHNlbGVjdGluZ1xyXG5cdFx0XHRcdFx0XHRpZiAodG9vbGJhckFjdGlvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0b29sYmFyQWN0aW9ucy5oYW5kbGVEZWxldGUoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0bWVudS5zaG93QXRNb3VzZUV2ZW50KGUpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFN0eWxlIERlbGV0ZSBtZW51IGl0ZW0gYXMgZGVzdHJ1Y3RpdmUgKHJlZC93YXJuaW5nIGNvbG9yKVxyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgbWVudUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUnKTtcclxuXHRcdFx0XHRcdGlmICghbWVudUVsKSByZXR1cm47XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnN0IG1lbnVJdGVtcyA9IEFycmF5LmZyb20obWVudUVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW0nKSk7XHJcblx0XHRcdFx0XHRjb25zdCBkZWxldGVJdGVtID0gbWVudUl0ZW1zLmZpbmQoaXRlbSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHRpdGxlID0gaXRlbS50ZXh0Q29udGVudD8udHJpbSgpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdGl0bGUgPT09ICdEZWxldGUnO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChkZWxldGVJdGVtKSB7XHJcblx0XHRcdFx0XHRcdGRlbGV0ZUl0ZW0uYWRkQ2xhc3MoJ2lzLWRhbmdlcicpO1xyXG5cdFx0XHRcdFx0XHQvLyBTdHlsZSB0aGUgaWNvbiBhbmQgdGV4dCB3aXRoIGVycm9yIGNvbG9yXHJcblx0XHRcdFx0XHRcdGNvbnN0IGljb24gPSBkZWxldGVJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xyXG5cdFx0XHRcdFx0XHRpZiAoaWNvbikge1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb24sIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbG9yOiAndmFyKC0tdGV4dC1lcnJvciknLFxyXG5cdFx0XHRcdFx0XHRcdFx0c3Ryb2tlOiAndmFyKC0tdGV4dC1lcnJvciknXHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Y29uc3QgdGl0bGUgPSBkZWxldGVJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWl0ZW0tdGl0bGUnKTtcclxuXHRcdFx0XHRcdGlmICh0aXRsZSkge1xyXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyh0aXRsZSBhcyBIVE1MRWxlbWVudCwge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKSdcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIDApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUaXRsZSAtIGFsd2F5cyByZW5kZXIgKGRlZmF1bHRzIHRvIGZpbGUgbmFtZSBpZiBubyB0aXRsZSBwcm9wZXJ0eSBpcyBzZXQpXHJcblx0XHRjb25zdCB0aXRsZUVsID0gY2FyZEVsLmNyZWF0ZURpdignY2FyZC10aXRsZScpO1xyXG5cdFx0dGl0bGVFbC5hcHBlbmRUZXh0KGNhcmQudGl0bGUpO1xyXG5cdFx0XHRcclxuXHRcdC8vIFF1aWNrIGVkaXQgaWNvbiAtIGF0dGFjaCB0byB0aXRsZUVsXHJcblx0XHRzZXR1cFF1aWNrRWRpdEljb24odGhpcy5hcHAsIHRoaXMucGx1Z2luLCB0aXRsZUVsLCBjYXJkRWwsIGNhcmQucGF0aCwgc2V0dGluZ3MpO1xyXG5cclxuXHRcdC8vIERhdGUgKGJlbG93IHRpdGxlKVxyXG5cdFx0aWYgKHNldHRpbmdzLnNob3dEYXRlICYmIHNldHRpbmdzLmRhdGVQcm9wZXJ0eSkge1xyXG5cdFx0XHQvLyBUcnkgc3luY2hyb25vdXMgQmFzZXMgQVBJIGZpcnN0ICh3b3JrcyBmb3IgLm1kIGZpbGVzKVxyXG5cdFx0XHRsZXQgZGF0ZVZhbHVlID0gZW50cnkuZ2V0VmFsdWUoc2V0dGluZ3MuZGF0ZVByb3BlcnR5IGFzIGBub3RlLiR7c3RyaW5nfWAgfCBgZm9ybXVsYS4ke3N0cmluZ31gIHwgYGZpbGUuJHtzdHJpbmd9YCkgYXMgeyBkYXRlPzogRGF0ZTsgZGF0YT86IHVua25vd247IGljb24/OiBzdHJpbmcgfSB8IG51bGw7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDaGVjayBpZiB3ZSBhY3R1YWxseSBoYXZlIGEgdmFsaWQgZGF0ZSB2YWx1ZVxyXG5cdFx0XHQvLyBGb3IgTURYIGZpbGVzLCBCYXNlcyBBUEkgbWlnaHQgcmV0dXJuIHtpY29uOiAnbHVjaWRlLWZpbGUtcXVlc3Rpb24nfSB3aGljaCBpcyB0cnV0aHkgYnV0IGhhcyBubyBkYXRlXHJcblx0XHRcdGNvbnN0IGhhc1ZhbGlkRGF0ZSA9IGRhdGVWYWx1ZSAmJiAoXHJcblx0XHRcdFx0KCdkYXRlJyBpbiBkYXRlVmFsdWUgJiYgZGF0ZVZhbHVlLmRhdGUgaW5zdGFuY2VvZiBEYXRlKSB8fFxyXG5cdFx0XHRcdCgnZGF0YScgaW4gZGF0ZVZhbHVlICYmIGRhdGVWYWx1ZS5kYXRhICE9IG51bGwpXHJcblx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBGb3IgTURYIGZpbGVzLCBmYWxsYmFjayB0byBtYW51YWwgZnJvbnRtYXR0ZXIgcGFyc2luZyBpZiBubyB2YWxpZCBkYXRlXHJcblx0XHRcdGlmICghaGFzVmFsaWREYXRlKSB7XHJcblx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChlbnRyeS5maWxlLnBhdGgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdFx0XHQvLyBMb2FkIGRhdGUgYXN5bmNocm9ub3VzbHkgZm9yIE1EWCBmaWxlc1xyXG5cdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcih0aGlzLmFwcCwgZmlsZSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAoZnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBTdHJpcCBcIm5vdGUuXCIgcHJlZml4IGlmIHByZXNlbnRcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBjbGVhblByb3AgPSBzZXR0aW5ncy5kYXRlUHJvcGVydHkuc3RhcnRzV2l0aCgnbm90ZS4nKSBcclxuXHRcdFx0XHRcdFx0XHRcdD8gc2V0dGluZ3MuZGF0ZVByb3BlcnR5LnN1YnN0cmluZyg1KSBcclxuXHRcdFx0XHRcdFx0XHRcdDogc2V0dGluZ3MuZGF0ZVByb3BlcnR5O1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyVmFsdWUgPSBmcm9udG1hdHRlcltjbGVhblByb3BdO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChmcm9udG1hdHRlclZhbHVlICE9IG51bGwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFBhcnNlIGRhdGUgZnJvbSBmcm9udG1hdHRlciB2YWx1ZVxyXG5cdFx0XHRcdFx0XHRcdFx0bGV0IGRhdGU6IERhdGUgfCBudWxsID0gbnVsbDtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIERhdGUgb2JqZWN0cyAoaW5jbHVkaW5nIHRob3NlIGZyb20gWUFNTCBwYXJzaW5nKVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGZyb250bWF0dGVyVmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGUgPSBmcm9udG1hdHRlclZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSBcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEhhbmRsZSBkYXRlLWxpa2Ugb2JqZWN0cyAoWUFNTCBwYXJzZXJzIHNvbWV0aW1lcyByZXR1cm4gY3VzdG9tIERhdGUgb2JqZWN0cylcclxuXHRcdFx0XHRcdFx0XHRcdGVsc2UgaWYgKGZyb250bWF0dGVyVmFsdWUgJiYgdHlwZW9mIGZyb250bWF0dGVyVmFsdWUgPT09ICdvYmplY3QnICYmICdnZXRUaW1lJyBpbiBmcm9udG1hdHRlclZhbHVlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGRhdGVMaWtlID0gZnJvbnRtYXR0ZXJWYWx1ZSBhcyB7IGdldFRpbWU6ICgpID0+IG51bWJlciB9O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRpbWVzdGFtcCA9IGRhdGVMaWtlLmdldFRpbWUoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZW9mIHRpbWVzdGFtcCA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHRpbWVzdGFtcCkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmFsbCB0aHJvdWdoIHRvIHN0cmluZy9udW1iZXIgaGFuZGxpbmdcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIHN0cmluZ3MgLSBlc3BlY2lhbGx5IElTTyBkYXRlIHN0cmluZ3MgbGlrZSBcIjIwMjUtMTItMjlcIlxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFkYXRlICYmIHR5cGVvZiBmcm9udG1hdHRlclZhbHVlID09PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBkYXRlU3RyID0gZnJvbnRtYXR0ZXJWYWx1ZS50cmltKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFRyeSBwYXJzaW5nIGFzIElTTyBkYXRlIChZWVlZLU1NLUREKSAtIHRoaXMgaXMgd2hhdCBPYnNpZGlhbiB1c2VzXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCB0aW1lIGNvbXBvbmVudCB0byBhdm9pZCB0aW1lem9uZSBpc3N1ZXM6IFwiMjAyNS0xMi0yOVwiIC0+IFwiMjAyNS0xMi0yOVQwMDowMDowMFwiXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGlzb0RhdGVTdHIgPSBkYXRlU3RyLmluY2x1ZGVzKCdUJykgPyBkYXRlU3RyIDogYCR7ZGF0ZVN0cn1UMDA6MDA6MDBgO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYXJzZWREYXRlID0gbmV3IERhdGUoaXNvRGF0ZVN0cik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghaXNOYU4ocGFyc2VkRGF0ZS5nZXRUaW1lKCkpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0ZSA9IHBhcnNlZERhdGU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gZGlyZWN0IERhdGUgY29uc3RydWN0b3JcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBmYWxsYmFja0RhdGUgPSBuZXcgRGF0ZShkYXRlU3RyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIWlzTmFOKGZhbGxiYWNrRGF0ZS5nZXRUaW1lKCkpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRlID0gZmFsbGJhY2tEYXRlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIG51bWJlcnMgKHRpbWVzdGFtcHMpXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIWRhdGUgJiYgdHlwZW9mIGZyb250bWF0dGVyVmFsdWUgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZERhdGUgPSBuZXcgRGF0ZShmcm9udG1hdHRlclZhbHVlKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFpc05hTihwYXJzZWREYXRlLmdldFRpbWUoKSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRlID0gcGFyc2VkRGF0ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBBbHdheXMgdHJ5IHRvIHJlbmRlciB0aGUgZGF0ZSwgZXZlbiBpZiBjYXJkRWwgbWlnaHQgbm90IGJlIGNvbm5lY3RlZCB5ZXRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFRoZSBkYXRlIGVsZW1lbnQgd2lsbCBiZSBjcmVhdGVkL3VwZGF0ZWQgd2hlbiB0aGUgY2FyZCBpcyByZW5kZXJlZFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGRhdGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXNlIHJlcXVlc3RBbmltYXRpb25GcmFtZSB0byBlbnN1cmUgRE9NIGlzIHJlYWR5XHJcblx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNhcmRFbC5pc0Nvbm5lY3RlZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRm9ybWF0IGRhdGUgYmFzZWQgb24gc2V0dGluZ3NcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGxldCBkYXRlU3RyaW5nOiBzdHJpbmc7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuZGF0ZUluY2x1ZGVUaW1lKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEZvcm1hdCBkYXRlIGFuZCB0aW1lIHNlcGFyYXRlbHksIHRoZW4gY29tYmluZSAocmVzcGVjdHMgdXNlcidzIHN5c3RlbSBsb2NhbGUpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFVzZSBvcHRpb25zIHRvIGV4Y2x1ZGUgc2Vjb25kcyBhbmQgbWF0Y2ggdXNlcidzIGV4cGVjdGVkIGZvcm1hdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBkYXRlUGFydCA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRpbWVQYXJ0ID0gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcodW5kZWZpbmVkLCB7IFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhvdXI6ICdudW1lcmljJywgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWludXRlOiAnMi1kaWdpdCcsIFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhvdXIxMjogdHJ1ZSBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGVTdHJpbmcgPSBgJHtkYXRlUGFydH0sICR7dGltZVBhcnR9YDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFdoZW4gdGltZSBpcyBub3QgaW5jbHVkZWQsIHVzZSBkYXRlLW9ubHkgZm9ybWF0IChyZXNwZWN0cyB1c2VyJ3Mgc3lzdGVtIGxvY2FsZSlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0ZVN0cmluZyA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEZpbmQgb3IgY3JlYXRlIGRhdGUgZWxlbWVudFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IGRhdGVFbCA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1kYXRlJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIWRhdGVFbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGaW5kIHRoZSB0aXRsZSBlbGVtZW50IHRvIGluc2VydCBkYXRlIGFmdGVyIGl0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRpdGxlRWwgPSBjYXJkRWwucXVlcnlTZWxlY3RvcignLmNhcmQtdGl0bGUnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRpdGxlRWwgJiYgdGl0bGVFbC5wYXJlbnRFbGVtZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0ZUVsID0gdGl0bGVFbC5wYXJlbnRFbGVtZW50LmNyZWF0ZURpdignY2FyZC1kYXRlJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gSW5zZXJ0IGFmdGVyIHRpdGxlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGl0bGVFbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShkYXRlRWwsIHRpdGxlRWwubmV4dFNpYmxpbmcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGVFbCA9IGNhcmRFbC5jcmVhdGVEaXYoJ2NhcmQtZGF0ZScpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRlRWwuc2V0VGV4dChkYXRlU3RyaW5nKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGlmIChoYXNWYWxpZERhdGUgJiYgZGF0ZVZhbHVlKSB7XHJcblx0XHRcdFx0Y29uc3QgZGF0ZU9iaiA9IGRhdGVWYWx1ZSBhcyB7IGRhdGU/OiBEYXRlOyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcclxuXHRcdFx0XHRsZXQgZGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChkYXRlT2JqICYmICdkYXRlJyBpbiBkYXRlT2JqICYmIGRhdGVPYmouZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuXHRcdFx0XHRcdGRhdGUgPSBkYXRlT2JqLmRhdGU7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChkYXRlT2JqICYmICdkYXRhJyBpbiBkYXRlT2JqICYmIGRhdGVPYmouZGF0YSkge1xyXG5cdFx0XHRcdFx0Y29uc3QgZGF0YSA9IGRhdGVPYmouZGF0YTtcclxuXHRcdFx0XHRcdGlmIChkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xyXG5cdFx0XHRcdFx0XHRkYXRlID0gZGF0YTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBwYXJzZWREYXRlID0gbmV3IERhdGUoZGF0YSk7XHJcblx0XHRcdFx0XHRcdGlmICghaXNOYU4ocGFyc2VkRGF0ZS5nZXRUaW1lKCkpKSB7XHJcblx0XHRcdFx0XHRcdFx0ZGF0ZSA9IHBhcnNlZERhdGU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGRhdGUpIHtcclxuXHRcdFx0XHRcdC8vIEZvcm1hdCBkYXRlIGJhc2VkIG9uIHNldHRpbmdzXHJcblx0XHRcdFx0XHRsZXQgZGF0ZVN0cmluZzogc3RyaW5nO1xyXG5cdFx0XHRcdFx0aWYgKHNldHRpbmdzLmRhdGVJbmNsdWRlVGltZSkge1xyXG5cdFx0XHRcdFx0XHQvLyBGb3JtYXQgZGF0ZSBhbmQgdGltZSBzZXBhcmF0ZWx5LCB0aGVuIGNvbWJpbmUgKHJlc3BlY3RzIHVzZXIncyBzeXN0ZW0gbG9jYWxlKVxyXG5cdFx0XHRcdFx0XHQvLyBVc2Ugb3B0aW9ucyB0byBleGNsdWRlIHNlY29uZHMgYW5kIG1hdGNoIHVzZXIncyBleHBlY3RlZCBmb3JtYXRcclxuXHRcdFx0XHRcdFx0Y29uc3QgZGF0ZVBhcnQgPSBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG5cdFx0XHRcdFx0XHRjb25zdCB0aW1lUGFydCA9IGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKHVuZGVmaW5lZCwgeyBcclxuXHRcdFx0XHRcdFx0XHRob3VyOiAnbnVtZXJpYycsIFxyXG5cdFx0XHRcdFx0XHRcdG1pbnV0ZTogJzItZGlnaXQnLCBcclxuXHRcdFx0XHRcdFx0XHRob3VyMTI6IHRydWUgXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRkYXRlU3RyaW5nID0gYCR7ZGF0ZVBhcnR9LCAke3RpbWVQYXJ0fWA7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBXaGVuIHRpbWUgaXMgbm90IGluY2x1ZGVkLCB1c2UgZGF0ZS1vbmx5IGZvcm1hdCAocmVzcGVjdHMgdXNlcidzIHN5c3RlbSBsb2NhbGUpXHJcblx0XHRcdFx0XHRcdGRhdGVTdHJpbmcgPSBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb25zdCBkYXRlRWwgPSBjYXJkRWwuY3JlYXRlRGl2KCdjYXJkLWRhdGUnKTtcclxuXHRcdFx0XHRcdGRhdGVFbC5hcHBlbmRUZXh0KGRhdGVTdHJpbmcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFRvcCBwcm9wZXJ0eSBncm91cHMgKHJlbmRlcmVkIGJlZm9yZSBjb250ZW50KVxyXG5cdFx0dGhpcy5wcm9wZXJ0eVJlbmRlcmVyLnJlbmRlclByb3BlcnRpZXMoY2FyZEVsLCBjYXJkLCBlbnRyeSwgc2V0dGluZ3MsIG9uUHJvcGVydHlUb2dnbGUsICd0b3AnKTtcclxuXHJcblx0XHQvLyBDb250ZW50IGNvbnRhaW5lciAtIGFsd2F5cyBjcmVhdGUgaWYgc2hvd1RleHRQcmV2aWV3IGlzIGVuYWJsZWQsIG9yIGlmIHRoZXJlIGFyZSBvdGhlciBjb250ZW50IGVsZW1lbnRzXHJcblx0XHQvLyBGb3IgdGh1bWJuYWlsIGFuZCBjb3ZlciBmb3JtYXRzLCBhbHdheXMgY3JlYXRlIGNvbnRhaW5lclxyXG5cdFx0aWYgKHNldHRpbmdzLnNob3dUZXh0UHJldmlldyB8fFxyXG5cdFx0XHQoc2V0dGluZ3Muc2hvd1RhZ3MgJiYgY2FyZC5kaXNwbGF5VGFncyAmJiBjYXJkLmRpc3BsYXlUYWdzLmxlbmd0aCA+IDApIHx8XHJcblx0XHRcdChzZXR0aW5ncy5pbWFnZUZvcm1hdCA9PT0gJ3RodW1ibmFpbCcpIHx8XHJcblx0XHRcdChzZXR0aW5ncy5pbWFnZUZvcm1hdCA9PT0gJ2NvdmVyJykgfHxcclxuXHRcdFx0KHNldHRpbmdzLmltYWdlRm9ybWF0ICE9PSAnbm9uZScgJiYgKGNhcmQuaW1hZ2VVcmwgfHwgY2FyZC5oYXNJbWFnZUF2YWlsYWJsZSkpKSB7XHJcblx0XHRcdGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBjYXJkRWwuY3JlYXRlRGl2KCdjYXJkLWNvbnRlbnQnKTtcclxuXHJcblx0XHRcdC8vIEZvciB0aHVtYm5haWwgZm9ybWF0LCBjcmVhdGUgdGh1bWJuYWlsIEZJUlNUIChiZWZvcmUgdGV4dC13cmFwcGVyKSBmb3IgcHJvcGVyIHBvc2l0aW9uaW5nXHJcblx0XHRcdGlmIChzZXR0aW5ncy5pbWFnZUZvcm1hdCA9PT0gJ3RodW1ibmFpbCcgJiYgY2FyZC5pbWFnZVVybCkge1xyXG5cdFx0XHRcdGNvbnN0IHJhd1VybHMgPSBBcnJheS5pc0FycmF5KGNhcmQuaW1hZ2VVcmwpID8gY2FyZC5pbWFnZVVybCA6IFtjYXJkLmltYWdlVXJsXTtcclxuXHRcdFx0XHRjb25zdCBpbWFnZVVybHMgPSByYXdVcmxzLmZpbHRlcih1cmwgPT4gdXJsICYmIHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnICYmIHVybC50cmltKCkubGVuZ3RoID4gMCk7XHJcblxyXG5cdFx0XHRcdGlmIChpbWFnZVVybHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgaW1hZ2VFbCA9IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCdjYXJkLXRodW1ibmFpbCcpO1xyXG5cdFx0XHRcdFx0Y29uc3QgaW1hZ2VFbWJlZENvbnRhaW5lciA9IGltYWdlRWwuY3JlYXRlRGl2KCdpbWFnZS1lbWJlZCcpO1xyXG5cdFx0XHRcdFx0Y29uc3Qgb3JpZ2luYWxVcmwgPSBpbWFnZVVybHNbMF07XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIENvbnZlcnQgR0lGIHRvIHN0YXRpYyBpZiBzZXR0aW5nIGlzIGVuYWJsZWRcclxuXHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZmluYWxVcmwgPSBhd2FpdCBjb252ZXJ0R2lmVG9TdGF0aWMob3JpZ2luYWxVcmwsIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvcmNlU3RhdGljR2lmSW1hZ2VzKTtcclxuXHRcdFx0XHRcdFx0aW1hZ2VFbWJlZENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtmaW5hbFVybH1cIilgO1xyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFNldCBpbml0aWFsIGJhY2tncm91bmQgaW1hZ2UgKHdpbGwgYmUgdXBkYXRlZCBpZiBHSUYgY29udmVyc2lvbiBpcyBuZWVkZWQpXHJcblx0XHRcdFx0aW1hZ2VFbWJlZENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtvcmlnaW5hbFVybH1cIilgO1xyXG5cdFx0XHRcdHNldENzc1Byb3BzKGltYWdlRW1iZWRDb250YWluZXIsIHtcclxuXHRcdFx0XHRcdGJhY2tncm91bmRTaXplOiAnY292ZXInLFxyXG5cdFx0XHRcdFx0YmFja2dyb3VuZFBvc2l0aW9uOiAnY2VudGVyIGNlbnRlcicsXHJcblx0XHRcdFx0XHRiYWNrZ3JvdW5kUmVwZWF0OiAnbm8tcmVwZWF0J1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRm9yIHRodW1ibmFpbCBmb3JtYXQsIGhhbmRsZSBwb3NpdGlvbmluZ1xyXG5cdFx0XHRpZiAoc2V0dGluZ3MuaW1hZ2VGb3JtYXQgPT09ICd0aHVtYm5haWwnKSB7XHJcblx0XHRcdFx0Ly8gQ3JlYXRlIHRleHQgd3JhcHBlclxyXG5cdFx0XHRcdGNvbnN0IHRleHRXcmFwcGVyID0gY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtdGV4dC13cmFwcGVyJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gVGV4dCBwcmV2aWV3IC0gYWx3YXlzIGNyZWF0ZSBpZiBzaG93VGV4dFByZXZpZXcgaXMgZW5hYmxlZCwgZXZlbiBpZiBzbmlwcGV0IGlzbid0IGxvYWRlZCB5ZXRcclxuXHRcdFx0XHRpZiAoc2V0dGluZ3Muc2hvd1RleHRQcmV2aWV3KSB7XHJcblx0XHRcdFx0XHRjb25zdCB0ZXh0UHJldmlld0VsID0gdGV4dFdyYXBwZXIuY3JlYXRlRGl2KCdjYXJkLXRleHQtcHJldmlldycpO1xyXG5cdFx0XHRcdFx0aWYgKGNhcmQuc25pcHBldCkge1xyXG5cdFx0XHRcdFx0XHR0ZXh0UHJldmlld0VsLnNldFRleHQoY2FyZC5zbmlwcGV0KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIFN0b3JlIHJlZmVyZW5jZSB0byB1cGRhdGUgbGF0ZXIgd2hlbiBzbmlwcGV0IGxvYWRzXHJcblx0XHRcdFx0XHQoY2FyZEVsIGFzIHsgX190ZXh0UHJldmlld0VsPzogSFRNTEVsZW1lbnQ7IF9fY2FyZFBhdGg/OiBzdHJpbmcgfSkuX190ZXh0UHJldmlld0VsID0gdGV4dFByZXZpZXdFbDtcclxuXHRcdFx0XHRcdChjYXJkRWwgYXMgeyBfX3RleHRQcmV2aWV3RWw/OiBIVE1MRWxlbWVudDsgX19jYXJkUGF0aD86IHN0cmluZyB9KS5fX2NhcmRQYXRoID0gY2FyZC5wYXRoO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gVGFncyBhcyBwaWxscyAodW5kZXIgdGV4dCBwcmV2aWV3KVxyXG5cdFx0XHRcdGlmIChzZXR0aW5ncy5zaG93VGFncyAmJiBjYXJkLmRpc3BsYXlUYWdzICYmIGNhcmQuZGlzcGxheVRhZ3MubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgdGFnc0NvbnRhaW5lciA9IHRleHRXcmFwcGVyLmNyZWF0ZURpdignY2FyZC10YWdzJyk7XHJcblx0XHRcdFx0XHRjb25zdCB0YWdTdHlsZSA9IGdldFRhZ1N0eWxlKCk7XHJcblx0XHRcdFx0XHRpZiAodGFnU3R5bGUgIT09ICdwbGFpbicpIHtcclxuXHRcdFx0XHRcdFx0dGFnc0NvbnRhaW5lci5hZGRDbGFzcyhgdGFnLXN0eWxlLSR7dGFnU3R5bGV9YCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnN0IG1heFRhZ3MgPSBzZXR0aW5ncy5tYXhUYWdzVG9TaG93O1xyXG5cdFx0XHRcdFx0Y29uc3QgdGFnc1RvU2hvdyA9IGNhcmQuZGlzcGxheVRhZ3Muc2xpY2UoMCwgbWF4VGFncyk7XHJcblx0XHRcdFx0XHRjb25zdCByZW1haW5pbmdDb3VudCA9IGNhcmQuZGlzcGxheVRhZ3MubGVuZ3RoIC0gbWF4VGFncztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dGFnc1RvU2hvdy5mb3JFYWNoKHRhZyA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHRhZ0VsID0gdGFnc0NvbnRhaW5lci5jcmVhdGVTcGFuKCdjYXJkLXRhZycpO1xyXG5cdFx0XHRcdFx0XHR0YWdFbC5hcHBlbmRUZXh0KHNob3dUYWdIYXNoUHJlZml4KCkgPyBgIyR7dGFnfWAgOiB0YWcpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChyZW1haW5pbmdDb3VudCA+IDApIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbW9yZUVsID0gdGFnc0NvbnRhaW5lci5jcmVhdGVTcGFuKCdjYXJkLXRhZy1tb3JlJyk7XHJcblx0XHRcdFx0XHRcdG1vcmVFbC5hcHBlbmRUZXh0KGArJHtyZW1haW5pbmdDb3VudH0gbW9yZWApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBGb3IgY292ZXIvbm8taW1hZ2UgZm9ybWF0LCBzdGFjayB2ZXJ0aWNhbGx5XHJcblx0XHRcdFx0Ly8gVGV4dCBwcmV2aWV3IC0gYWx3YXlzIGNyZWF0ZSBpZiBzaG93VGV4dFByZXZpZXcgaXMgZW5hYmxlZCwgZXZlbiBpZiBzbmlwcGV0IGlzbid0IGxvYWRlZCB5ZXRcclxuXHRcdFx0XHRpZiAoc2V0dGluZ3Muc2hvd1RleHRQcmV2aWV3KSB7XHJcblx0XHRcdFx0XHRjb25zdCB0ZXh0UHJldmlld0VsID0gY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtdGV4dC1wcmV2aWV3Jyk7XHJcblx0XHRcdFx0XHRpZiAoY2FyZC5zbmlwcGV0KSB7XHJcblx0XHRcdFx0XHRcdHRleHRQcmV2aWV3RWwuc2V0VGV4dChjYXJkLnNuaXBwZXQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gU3RvcmUgcmVmZXJlbmNlIHRvIHVwZGF0ZSBsYXRlciB3aGVuIHNuaXBwZXQgbG9hZHNcclxuXHRcdFx0XHRcdChjYXJkRWwgYXMgeyBfX3RleHRQcmV2aWV3RWw/OiBIVE1MRWxlbWVudDsgX19jYXJkUGF0aD86IHN0cmluZyB9KS5fX3RleHRQcmV2aWV3RWwgPSB0ZXh0UHJldmlld0VsO1xyXG5cdFx0XHRcdFx0KGNhcmRFbCBhcyB7IF9fdGV4dFByZXZpZXdFbD86IEhUTUxFbGVtZW50OyBfX2NhcmRQYXRoPzogc3RyaW5nIH0pLl9fY2FyZFBhdGggPSBjYXJkLnBhdGg7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBUYWdzIGFzIHBpbGxzICh1bmRlciB0ZXh0IHByZXZpZXcpXHJcblx0XHRcdFx0aWYgKHNldHRpbmdzLnNob3dUYWdzICYmIGNhcmQuZGlzcGxheVRhZ3MgJiYgY2FyZC5kaXNwbGF5VGFncy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRjb25zdCB0YWdzQ29udGFpbmVyID0gY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtdGFncycpO1xyXG5cdFx0XHRcdFx0Y29uc3QgdGFnU3R5bGUgPSBnZXRUYWdTdHlsZSgpO1xyXG5cdFx0XHRcdFx0aWYgKHRhZ1N0eWxlICE9PSAncGxhaW4nKSB7XHJcblx0XHRcdFx0XHRcdHRhZ3NDb250YWluZXIuYWRkQ2xhc3MoYHRhZy1zdHlsZS0ke3RhZ1N0eWxlfWApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb25zdCBtYXhUYWdzID0gc2V0dGluZ3MubWF4VGFnc1RvU2hvdztcclxuXHRcdFx0XHRcdGNvbnN0IHRhZ3NUb1Nob3cgPSBjYXJkLmRpc3BsYXlUYWdzLnNsaWNlKDAsIG1heFRhZ3MpO1xyXG5cdFx0XHRcdFx0Y29uc3QgcmVtYWluaW5nQ291bnQgPSBjYXJkLmRpc3BsYXlUYWdzLmxlbmd0aCAtIG1heFRhZ3M7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHRhZ3NUb1Nob3cuZm9yRWFjaCh0YWcgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCB0YWdFbCA9IHRhZ3NDb250YWluZXIuY3JlYXRlU3BhbignY2FyZC10YWcnKTtcclxuXHRcdFx0XHRcdFx0dGFnRWwuYXBwZW5kVGV4dChzaG93VGFnSGFzaFByZWZpeCgpID8gYCMke3RhZ31gIDogdGFnKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAocmVtYWluaW5nQ291bnQgPiAwKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG1vcmVFbCA9IHRhZ3NDb250YWluZXIuY3JlYXRlU3BhbignY2FyZC10YWctbW9yZScpO1xyXG5cdFx0XHRcdFx0XHRtb3JlRWwuYXBwZW5kVGV4dChgKyR7cmVtYWluaW5nQ291bnR9IG1vcmVgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENvdmVyIGltYWdlXHJcblx0XHRcdGlmIChzZXR0aW5ncy5pbWFnZUZvcm1hdCA9PT0gJ2NvdmVyJykge1xyXG5cdFx0XHRcdGlmIChjYXJkLmltYWdlVXJsKSB7XHJcblx0XHRcdFx0Y29uc3QgcmF3VXJscyA9IEFycmF5LmlzQXJyYXkoY2FyZC5pbWFnZVVybCkgPyBjYXJkLmltYWdlVXJsIDogW2NhcmQuaW1hZ2VVcmxdO1xyXG5cdFx0XHRcdGNvbnN0IGltYWdlVXJscyA9IHJhd1VybHMuZmlsdGVyKHVybCA9PiB1cmwgJiYgdHlwZW9mIHVybCA9PT0gJ3N0cmluZycgJiYgdXJsLnRyaW0oKS5sZW5ndGggPiAwKTtcclxuXHJcblx0XHRcdFx0aWYgKGltYWdlVXJscy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGltYWdlRWwgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignY2FyZC1jb3ZlcicpO1xyXG5cdFx0XHRcdFx0Y29uc3QgaW1hZ2VFbWJlZENvbnRhaW5lciA9IGltYWdlRWwuY3JlYXRlRGl2KCdpbWFnZS1lbWJlZCcpO1xyXG5cdFx0XHRcdFx0Y29uc3Qgb3JpZ2luYWxVcmwgPSBpbWFnZVVybHNbMF07XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIENvbnZlcnQgR0lGIHRvIHN0YXRpYyBpZiBzZXR0aW5nIGlzIGVuYWJsZWRcclxuXHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZmluYWxVcmwgPSBhd2FpdCBjb252ZXJ0R2lmVG9TdGF0aWMob3JpZ2luYWxVcmwsIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvcmNlU3RhdGljR2lmSW1hZ2VzKTtcclxuXHRcdFx0XHRcdFx0aW1hZ2VFbWJlZENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtmaW5hbFVybH1cIilgO1xyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gU2V0IGluaXRpYWwgYmFja2dyb3VuZCBpbWFnZSAod2lsbCBiZSB1cGRhdGVkIGlmIEdJRiBjb252ZXJzaW9uIGlzIG5lZWRlZClcclxuXHRcdFx0XHRpbWFnZUVtYmVkQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCIke29yaWdpbmFsVXJsfVwiKWA7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoaW1hZ2VFbWJlZENvbnRhaW5lciwge1xyXG5cdFx0XHRcdFx0YmFja2dyb3VuZFNpemU6ICdjb3ZlcicsXHJcblx0XHRcdFx0XHRiYWNrZ3JvdW5kUG9zaXRpb246ICdjZW50ZXIgY2VudGVyJyxcclxuXHRcdFx0XHRcdGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRHJhZnQgc3RhdHVzIGJhZGdlICh0b3AtbGVmdCwgY2xpY2thYmxlIHRvIHRvZ2dsZSlcclxuXHRcdFx0XHRcdFx0aWYgKHNldHRpbmdzLnNob3dEcmFmdFN0YXR1cykge1xyXG5cdFx0XHRcdFx0XHRyZW5kZXJEcmFmdFN0YXR1c0JhZGdlKGltYWdlRWwsIGVudHJ5LCBjYXJkLnBhdGgsIHNldHRpbmdzLCBvblByb3BlcnR5VG9nZ2xlLCB0aGlzLmFwcCwgdGhpcy5tZHhGcm9udG1hdHRlckNhY2hlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQm90dG9tIHByb3BlcnRpZXMgLSBNVVNUIGJlIGNhbGxlZCBiZWZvcmUgcmV0dXJuaW5nIChmb3IgaW1hZ2VzKVxyXG5cdFx0XHRcdFx0dGhpcy5wcm9wZXJ0eVJlbmRlcmVyLnJlbmRlclByb3BlcnRpZXMoY2FyZEVsLCBjYXJkLCBlbnRyeSwgc2V0dGluZ3MsIG9uUHJvcGVydHlUb2dnbGUsICdib3R0b20nKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gSW1hZ2VzIGFyZSBzZXQgdmlhIGJhY2tncm91bmQtaW1hZ2UsIG5vIHJldHVybiB2YWx1ZSBuZWVkZWRcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEZvciBjb3ZlciBmb3JtYXQsIHJlbmRlciBwbGFjZWhvbGRlciBpZiBpbWFnZSBpcyBleHBlY3RlZCBidXQgbm90IGxvYWRlZCB5ZXQsIG9yIGFsd2F5c1xyXG5cdFx0XHRcdGlmIChjYXJkLmhhc0ltYWdlQXZhaWxhYmxlICYmICFjYXJkLmltYWdlVXJsKSB7XHJcblx0XHRcdFx0XHRjb25zdCBwbGFjZWhvbGRlckVsID0gY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtY292ZXItcGxhY2Vob2xkZXInKTtcclxuXHRcdFx0XHQvLyBEcmFmdCBzdGF0dXMgYmFkZ2Ugb24gcGxhY2Vob2xkZXIgKHRvcC1sZWZ0LCBjbGlja2FibGUgdG8gdG9nZ2xlKVxyXG5cdFx0XHRcdHJlbmRlckRyYWZ0U3RhdHVzQmFkZ2UocGxhY2Vob2xkZXJFbCwgZW50cnksIGNhcmQucGF0aCwgc2V0dGluZ3MsIG9uUHJvcGVydHlUb2dnbGUsIHRoaXMuYXBwLCB0aGlzLm1keEZyb250bWF0dGVyQ2FjaGUpO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIWNhcmQuaW1hZ2VVcmwpIHtcclxuXHRcdFx0XHRcdC8vIE5vIGltYWdlIGFuZCBub3QgZXhwZWN0ZWQgLSBjcmVhdGUgcGxhY2Vob2xkZXIgYW55d2F5IGZvciBjb3ZlciBmb3JtYXRcclxuXHRcdFx0XHRcdGNvbnN0IHBsYWNlaG9sZGVyRWwgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignY2FyZC1jb3Zlci1wbGFjZWhvbGRlcicpO1xyXG5cdFx0XHRcdFx0cmVuZGVyRHJhZnRTdGF0dXNCYWRnZShwbGFjZWhvbGRlckVsLCBlbnRyeSwgY2FyZC5wYXRoLCBzZXR0aW5ncywgb25Qcm9wZXJ0eVRvZ2dsZSwgdGhpcy5hcHAsIHRoaXMubWR4RnJvbnRtYXR0ZXJDYWNoZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdC8vIEJvdHRvbSBwcm9wZXJ0aWVzIChmb3IgY2FyZHMgd2l0aG91dCBpbWFnZXMpXHJcblx0XHR0aGlzLnByb3BlcnR5UmVuZGVyZXIucmVuZGVyUHJvcGVydGllcyhjYXJkRWwsIGNhcmQsIGVudHJ5LCBzZXR0aW5ncywgb25Qcm9wZXJ0eVRvZ2dsZSwgJ2JvdHRvbScpO1xyXG5cdFx0XHJcblx0XHRyZXR1cm47IC8vIE5vIGltYWdlIGZvciB0aGlzIGNhcmRcclxuXHR9XHJcbn1cclxuXHJcbiIsICJpbXBvcnQgeyBBcHAsIEJhc2VzRW50cnksIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgdHlwZSB7IENNU1NldHRpbmdzIH0gZnJvbSAnLi4vc2hhcmVkL2RhdGEtdHJhbnNmb3JtJztcclxuaW1wb3J0IHsgZ2V0RmlsZUZyb250bWF0dGVyIH0gZnJvbSAnLi9mcm9udG1hdHRlci1oZWxwZXInO1xyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBkcmFmdCBzdGF0dXMgZnJvbSBlbnRyeSBhbmQgc2V0dGluZ3NcclxuICogU3VwcG9ydHMgYm90aCAubWQgZmlsZXMgKHZpYSBCYXNlcyBBUEkpIGFuZCAubWR4IGZpbGVzICh2aWEgbWFudWFsIGZyb250bWF0dGVyIHBhcnNpbmcpXHJcbiAqIFVzZXMgY2FjaGVkIGZyb250bWF0dGVyIHdoZW4gYXZhaWxhYmxlIHRvIGF2b2lkIGFzeW5jIGxvYWRpbmdcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVEcmFmdFN0YXR1c0FzeW5jKFxyXG5cdGVudHJ5OiBCYXNlc0VudHJ5LFxyXG5cdHNldHRpbmdzOiBDTVNTZXR0aW5ncyxcclxuXHRhcHA6IEFwcCxcclxuXHRtZHhGcm9udG1hdHRlckNhY2hlPzogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPlxyXG4pOiBQcm9taXNlPHsgYm9vbGVhblZhbHVlOiBib29sZWFuIHwgbnVsbDsgaXNEcmFmdDogYm9vbGVhbiB9PiB7XHJcblx0bGV0IGJvb2xlYW5WYWx1ZTogYm9vbGVhbiB8IG51bGwgPSBudWxsO1xyXG5cdGxldCBpc0RyYWZ0ID0gZmFsc2U7XHJcblx0XHJcblx0Ly8gQ2hlY2sgaWYgdXNpbmcgZmlsZW5hbWUgcHJlZml4IG1vZGUgLSB0aGlzIGFsd2F5cyBwcm92aWRlcyBhIHZhbHVlXHJcblx0aWYgKHNldHRpbmdzLmRyYWZ0U3RhdHVzVXNlRmlsZW5hbWVQcmVmaXggJiYgZW50cnkuZmlsZSAmJiBlbnRyeS5maWxlLm5hbWUpIHtcclxuXHRcdGNvbnN0IGZpbGVOYW1lID0gZW50cnkuZmlsZS5uYW1lO1xyXG5cdFx0Y29uc3Qgc3RhcnRzV2l0aFVuZGVyc2NvcmUgPSBmaWxlTmFtZS5zdGFydHNXaXRoKCdfJyk7XHJcblx0XHRib29sZWFuVmFsdWUgPSBzdGFydHNXaXRoVW5kZXJzY29yZTtcclxuXHRcdGlzRHJhZnQgPSBzZXR0aW5ncy5kcmFmdFN0YXR1c1JldmVyc2UgPyAhYm9vbGVhblZhbHVlIDogYm9vbGVhblZhbHVlO1xyXG5cdH0gZWxzZSBpZiAoc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eSkge1xyXG5cdFx0Ly8gVHJ5IHN5bmNocm9ub3VzIEJhc2VzIEFQSSBmaXJzdCAod29ya3MgZm9yIC5tZCBmaWxlcylcclxuXHRcdGNvbnN0IGRyYWZ0VmFsdWUgPSBlbnRyeS5nZXRWYWx1ZShzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5IGFzIGBub3RlLiR7c3RyaW5nfWAgfCBgZm9ybXVsYS4ke3N0cmluZ31gIHwgYGZpbGUuJHtzdHJpbmd9YCkgYXMgeyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcclxuXHRcdGlmIChkcmFmdFZhbHVlICYmICdkYXRhJyBpbiBkcmFmdFZhbHVlICYmIHR5cGVvZiBkcmFmdFZhbHVlLmRhdGEgPT09ICdib29sZWFuJykge1xyXG5cdFx0XHRib29sZWFuVmFsdWUgPSBkcmFmdFZhbHVlLmRhdGE7XHJcblx0XHRcdGlzRHJhZnQgPSBzZXR0aW5ncy5kcmFmdFN0YXR1c1JldmVyc2UgPyAhYm9vbGVhblZhbHVlIDogYm9vbGVhblZhbHVlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gRm9yIE1EWCBmaWxlcywgdXNlIGNhY2hlZCBmcm9udG1hdHRlciBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBmYWxsYmFjayB0byBhc3luYyBsb2FkaW5nXHJcblx0XHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgY2FjaGUgZmlyc3RcclxuXHRcdFx0XHRsZXQgZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdFx0aWYgKG1keEZyb250bWF0dGVyQ2FjaGUpIHtcclxuXHRcdFx0XHRcdGZyb250bWF0dGVyID0gbWR4RnJvbnRtYXR0ZXJDYWNoZVtlbnRyeS5maWxlLnBhdGhdID8/IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIElmIG5vdCBpbiBjYWNoZSwgbG9hZCBhc3luY2hyb25vdXNseVxyXG5cdFx0XHRcdGlmIChmcm9udG1hdHRlciA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcihhcHAsIGZpbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0XHRcdC8vIFN0cmlwIFwibm90ZS5cIiBwcmVmaXggaWYgcHJlc2VudFxyXG5cdFx0XHRcdFx0Y29uc3QgY2xlYW5Qcm9wID0gc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS5zdGFydHNXaXRoKCdub3RlLicpIFxyXG5cdFx0XHRcdFx0XHQ/IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHkuc3Vic3RyaW5nKDUpIFxyXG5cdFx0XHRcdFx0XHQ6IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHk7XHJcblx0XHRcdFx0XHRjb25zdCBmcm9udG1hdHRlclZhbHVlID0gZnJvbnRtYXR0ZXJbY2xlYW5Qcm9wXTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gSGFuZGxlIGJvb2xlYW4gdmFsdWVzIChZQU1MIHBhcnNlciByZXR1cm5zIGJvb2xlYW5zIGRpcmVjdGx5KVxyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBmcm9udG1hdHRlclZhbHVlID09PSAnYm9vbGVhbicpIHtcclxuXHRcdFx0XHRcdFx0Ym9vbGVhblZhbHVlID0gZnJvbnRtYXR0ZXJWYWx1ZTtcclxuXHRcdFx0XHRcdFx0aXNEcmFmdCA9IHNldHRpbmdzLmRyYWZ0U3RhdHVzUmV2ZXJzZSA/ICFib29sZWFuVmFsdWUgOiBib29sZWFuVmFsdWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiB7IGJvb2xlYW5WYWx1ZSwgaXNEcmFmdCB9O1xyXG59XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlIGRyYWZ0IHN0YXR1cyBmcm9tIGVudHJ5IGFuZCBzZXR0aW5ncyAoc3luY2hyb25vdXMgdmVyc2lvbiBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkpXHJcbiAqIE5vdGU6IFRoaXMgb25seSB3b3JrcyBmb3IgLm1kIGZpbGVzLiBGb3IgTURYIGZpbGVzLCB1c2UgY2FsY3VsYXRlRHJhZnRTdGF0dXNBc3luYyBpbnN0ZWFkLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZURyYWZ0U3RhdHVzKFxyXG5cdGVudHJ5OiBCYXNlc0VudHJ5LFxyXG5cdHNldHRpbmdzOiBDTVNTZXR0aW5nc1xyXG4pOiB7IGJvb2xlYW5WYWx1ZTogYm9vbGVhbiB8IG51bGw7IGlzRHJhZnQ6IGJvb2xlYW4gfSB7XHJcblx0bGV0IGJvb2xlYW5WYWx1ZTogYm9vbGVhbiB8IG51bGwgPSBudWxsO1xyXG5cdGxldCBpc0RyYWZ0ID0gZmFsc2U7XHJcblx0XHJcblx0Ly8gQ2hlY2sgaWYgdXNpbmcgZmlsZW5hbWUgcHJlZml4IG1vZGUgLSB0aGlzIGFsd2F5cyBwcm92aWRlcyBhIHZhbHVlXHJcblx0aWYgKHNldHRpbmdzLmRyYWZ0U3RhdHVzVXNlRmlsZW5hbWVQcmVmaXggJiYgZW50cnkuZmlsZSAmJiBlbnRyeS5maWxlLm5hbWUpIHtcclxuXHRcdGNvbnN0IGZpbGVOYW1lID0gZW50cnkuZmlsZS5uYW1lO1xyXG5cdFx0Y29uc3Qgc3RhcnRzV2l0aFVuZGVyc2NvcmUgPSBmaWxlTmFtZS5zdGFydHNXaXRoKCdfJyk7XHJcblx0XHRib29sZWFuVmFsdWUgPSBzdGFydHNXaXRoVW5kZXJzY29yZTtcclxuXHRcdGlzRHJhZnQgPSBzZXR0aW5ncy5kcmFmdFN0YXR1c1JldmVyc2UgPyAhYm9vbGVhblZhbHVlIDogYm9vbGVhblZhbHVlO1xyXG5cdH0gZWxzZSBpZiAoc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eSkge1xyXG5cdFx0Ly8gVXNlIHByb3BlcnR5LWJhc2VkIGRldGVjdGlvbiAoc3luY2hyb25vdXMgQmFzZXMgQVBJIC0gd29ya3MgZm9yIC5tZCBmaWxlcyBvbmx5KVxyXG5cdFx0Y29uc3QgZHJhZnRWYWx1ZSA9IGVudHJ5LmdldFZhbHVlKHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHkgYXMgYG5vdGUuJHtzdHJpbmd9YCB8IGBmb3JtdWxhLiR7c3RyaW5nfWAgfCBgZmlsZS4ke3N0cmluZ31gKSBhcyB7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsO1xyXG5cdFx0aWYgKGRyYWZ0VmFsdWUgJiYgJ2RhdGEnIGluIGRyYWZ0VmFsdWUgJiYgdHlwZW9mIGRyYWZ0VmFsdWUuZGF0YSA9PT0gJ2Jvb2xlYW4nKSB7XHJcblx0XHRcdGJvb2xlYW5WYWx1ZSA9IGRyYWZ0VmFsdWUuZGF0YTtcclxuXHRcdFx0aXNEcmFmdCA9IHNldHRpbmdzLmRyYWZ0U3RhdHVzUmV2ZXJzZSA/ICFib29sZWFuVmFsdWUgOiBib29sZWFuVmFsdWU7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiB7IGJvb2xlYW5WYWx1ZSwgaXNEcmFmdCB9O1xyXG59XHJcblxyXG4vKipcclxuICogUmVuZGVyIGRyYWZ0IHN0YXR1cyBiYWRnZSBvbiBhIGNvbnRhaW5lciBlbGVtZW50XHJcbiAqIFN1cHBvcnRzIGJvdGggLm1kIGZpbGVzIChzeW5jaHJvbm91cykgYW5kIC5tZHggZmlsZXMgKHVzZXMgY2FjaGUgd2hlbiBhdmFpbGFibGUpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyRHJhZnRTdGF0dXNCYWRnZShcclxuXHRjb250YWluZXI6IEhUTUxFbGVtZW50LFxyXG5cdGVudHJ5OiBCYXNlc0VudHJ5LFxyXG5cdGNhcmRQYXRoOiBzdHJpbmcsXHJcblx0c2V0dGluZ3M6IENNU1NldHRpbmdzLFxyXG5cdG9uUHJvcGVydHlUb2dnbGU/OiAocGF0aDogc3RyaW5nLCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bikgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4sXHJcblx0YXBwPzogQXBwLFxyXG5cdG1keEZyb250bWF0dGVyQ2FjaGU/OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw+XHJcbik6IHZvaWQge1xyXG5cdGlmICghc2V0dGluZ3Muc2hvd0RyYWZ0U3RhdHVzKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdFxyXG5cdC8vIFRyeSBzeW5jaHJvbm91cyBmaXJzdCAod29ya3MgZm9yIC5tZCBmaWxlcylcclxuXHRjb25zdCB7IGJvb2xlYW5WYWx1ZTogc3luY1ZhbHVlLCBpc0RyYWZ0OiBzeW5jSXNEcmFmdCB9ID0gY2FsY3VsYXRlRHJhZnRTdGF0dXMoZW50cnksIHNldHRpbmdzKTtcclxuXHRcclxuXHRpZiAoc3luY1ZhbHVlICE9PSBudWxsKSB7XHJcblx0XHQvLyBTeW5jaHJvbm91cyByZXN1bHQgYXZhaWxhYmxlIChmcm9tIEJhc2VzIEFQSSBvciBmaWxlbmFtZSBwcmVmaXgpXHJcblx0XHRyZW5kZXJCYWRnZShjb250YWluZXIsIHN5bmNWYWx1ZSwgc3luY0lzRHJhZnQsIG9uUHJvcGVydHlUb2dnbGUsIGNhcmRQYXRoKTtcclxuXHR9IGVsc2UgaWYgKGFwcCkge1xyXG5cdFx0Ly8gRm9yIE1EWCBmaWxlcywgY2hlY2sgY2FjaGUgZmlyc3QgdG8gcmVuZGVyIHN5bmNocm9ub3VzbHlcclxuXHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XHJcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWR4JyAmJiBtZHhGcm9udG1hdHRlckNhY2hlKSB7XHJcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gbWR4RnJvbnRtYXR0ZXJDYWNoZVtlbnRyeS5maWxlLnBhdGhdO1xyXG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIgJiYgc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eSkge1xyXG5cdFx0XHRcdC8vIFN0cmlwIFwibm90ZS5cIiBwcmVmaXggaWYgcHJlc2VudFxyXG5cdFx0XHRcdGNvbnN0IGNsZWFuUHJvcCA9IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHkuc3RhcnRzV2l0aCgnbm90ZS4nKSBcclxuXHRcdFx0XHRcdD8gc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS5zdWJzdHJpbmcoNSkgXHJcblx0XHRcdFx0XHQ6IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHk7XHJcblx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJWYWx1ZSA9IGZyb250bWF0dGVyW2NsZWFuUHJvcF07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSGFuZGxlIGJvb2xlYW4gdmFsdWVzIHN5bmNocm9ub3VzbHlcclxuXHRcdFx0XHRpZiAodHlwZW9mIGZyb250bWF0dGVyVmFsdWUgPT09ICdib29sZWFuJykge1xyXG5cdFx0XHRcdFx0Y29uc3QgYm9vbGVhblZhbHVlID0gZnJvbnRtYXR0ZXJWYWx1ZTtcclxuXHRcdFx0XHRcdGNvbnN0IGlzRHJhZnQgPSBzZXR0aW5ncy5kcmFmdFN0YXR1c1JldmVyc2UgPyAhYm9vbGVhblZhbHVlIDogYm9vbGVhblZhbHVlO1xyXG5cdFx0XHRcdFx0cmVuZGVyQmFkZ2UoY29udGFpbmVyLCBib29sZWFuVmFsdWUsIGlzRHJhZnQsIG9uUHJvcGVydHlUb2dnbGUsIGNhcmRQYXRoKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gTm8gc3luY2hyb25vdXMgcmVzdWx0IC0gdHJ5IGFzeW5jIGZvciBNRFggZmlsZXMgKGZhbGxiYWNrIGlmIGNhY2hlIG1pc3MpXHJcblx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHsgYm9vbGVhblZhbHVlLCBpc0RyYWZ0IH0gPSBhd2FpdCBjYWxjdWxhdGVEcmFmdFN0YXR1c0FzeW5jKGVudHJ5LCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKTtcclxuXHRcdFx0aWYgKGJvb2xlYW5WYWx1ZSAhPT0gbnVsbCAmJiBjb250YWluZXIuaXNDb25uZWN0ZWQpIHtcclxuXHRcdFx0XHRyZW5kZXJCYWRnZShjb250YWluZXIsIGJvb2xlYW5WYWx1ZSwgaXNEcmFmdCwgb25Qcm9wZXJ0eVRvZ2dsZSwgY2FyZFBhdGgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KSgpO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEhlbHBlciBmdW5jdGlvbiB0byByZW5kZXIgdGhlIGJhZGdlIGVsZW1lbnRcclxuICovXHJcbmZ1bmN0aW9uIHJlbmRlckJhZGdlKFxyXG5cdGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcblx0Ym9vbGVhblZhbHVlOiBib29sZWFuLFxyXG5cdGlzRHJhZnQ6IGJvb2xlYW4sXHJcblx0b25Qcm9wZXJ0eVRvZ2dsZTogKChwYXRoOiBzdHJpbmcsIHByb3BlcnR5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPikgfCB1bmRlZmluZWQsXHJcblx0Y2FyZFBhdGg6IHN0cmluZ1xyXG4pOiB2b2lkIHtcclxuXHQvLyBDaGVjayBpZiBiYWRnZSBhbHJlYWR5IGV4aXN0cyB0byBhdm9pZCBkdXBsaWNhdGVzXHJcblx0aWYgKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY2FyZC1zdGF0dXMtYmFkZ2UnKSkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRcclxuXHRjb25zdCBzdGF0dXNCYWRnZSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtc3RhdHVzLWJhZGdlJyk7XHJcblx0aWYgKGlzRHJhZnQpIHtcclxuXHRcdHN0YXR1c0JhZGdlLmFkZENsYXNzKCdzdGF0dXMtZHJhZnQnKTtcclxuXHRcdHN0YXR1c0JhZGdlLmFwcGVuZFRleHQoJ0RyYWZ0Jyk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHN0YXR1c0JhZGdlLmFkZENsYXNzKCdzdGF0dXMtcHVibGlzaGVkJyk7XHJcblx0XHRzdGF0dXNCYWRnZS5hcHBlbmRUZXh0KCdQdWJsaXNoZWQnKTtcclxuXHR9XHJcblx0XHJcblx0aWYgKG9uUHJvcGVydHlUb2dnbGUpIHtcclxuXHRcdHN0YXR1c0JhZGdlLmFkZENsYXNzKCdiYXNlcy1jbXMtY3Vyc29yLXBvaW50ZXInKTtcclxuXHRcdHN0YXR1c0JhZGdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0Y29uc3QgbmV3VmFsdWUgPSAhYm9vbGVhblZhbHVlO1xyXG5cdFx0XHR2b2lkIG9uUHJvcGVydHlUb2dnbGUoY2FyZFBhdGgsICdkcmFmdCcsIG5ld1ZhbHVlKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlLCBzZXRJY29uLCBNb2RhbCwgVGV4dENvbXBvbmVudCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgc2V0Q3NzUHJvcHMgfSBmcm9tICcuL2Nzcy1wcm9wcyc7XG5pbXBvcnQgdHlwZSBCYXNlc0NNU1BsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB0eXBlIHsgQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvZGF0YS10cmFuc2Zvcm0nO1xuXG4vKipcbiAqIFNob3cgcmVuYW1lIGRpYWxvZyBmb3IgYSBmaWxlIHdpdGhvdXQgb3BlbmluZyBpdFxuICogU2ltaWxhciB0byBob3cgQXN0cm8gQ29tcG9zZXIncyByZW5hbWVDb250ZW50QnlQYXRoIHdvcmtzXG4gKi9cbmZ1bmN0aW9uIHNob3dSZW5hbWVEaWFsb2coYXBwOiBBcHAsIGZpbGU6IFRGaWxlKTogdm9pZCB7XG5cdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKGFwcCk7XG5cdG1vZGFsLnRpdGxlRWwuc2V0VGV4dCgnUmVuYW1lIGZpbGUnKTtcblx0XG5cdGNvbnN0IGlucHV0Q29udGFpbmVyID0gbW9kYWwuY29udGVudEVsLmNyZWF0ZURpdigpO1xuXHQvLyBNYWtlIGlucHV0IGNvbnRhaW5lciBmdWxsIHdpZHRoXG5cdHNldENzc1Byb3BzKGlucHV0Q29udGFpbmVyLCB7XG5cdFx0d2lkdGg6ICcxMDAlJ1xuXHR9KTtcblx0Y29uc3QgaW5wdXQgPSBuZXcgVGV4dENvbXBvbmVudChpbnB1dENvbnRhaW5lcik7XG5cdGlucHV0LnNldFZhbHVlKGZpbGUuYmFzZW5hbWUpO1xuXHQvLyBNYWtlIGlucHV0IGZpZWxkIGZ1bGwgd2lkdGggdG8gbWF0Y2ggT2JzaWRpYW4ncyBuYXRpdmUgZGlhbG9nXG5cdHNldENzc1Byb3BzKGlucHV0LmlucHV0RWwsIHtcblx0XHR3aWR0aDogJzEwMCUnLFxuXHRcdGJveFNpemluZzogJ2JvcmRlci1ib3gnXG5cdH0pO1xuXHRpbnB1dC5pbnB1dEVsLmZvY3VzKCk7XG5cdGlucHV0LmlucHV0RWwuc2VsZWN0KCk7XG5cdFxuXHRjb25zdCBidXR0b25Db250YWluZXIgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcblx0Y2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gbW9kYWwuY2xvc2UoKSk7XG5cdFxuXHRjb25zdCByZW5hbWVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG5cdFx0dGV4dDogJ1JlbmFtZScsXG5cdFx0Y2xzOiAnbW9kLWN0YSdcblx0fSk7XG5cdFxuXHRjb25zdCBoYW5kbGVSZW5hbWUgPSBhc3luYyAoKSA9PiB7XG5cdFx0Y29uc3QgbmV3TmFtZSA9IGlucHV0LmdldFZhbHVlKCkudHJpbSgpO1xuXHRcdGlmICghbmV3TmFtZSB8fCBuZXdOYW1lID09PSBmaWxlLmJhc2VuYW1lKSB7XG5cdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHQvLyBDb25zdHJ1Y3QgbmV3IHBhdGggd2l0aCBleHRlbnNpb25cblx0XHRjb25zdCBwYXRoUGFydHMgPSBmaWxlLnBhdGguc3BsaXQoJy8nKTtcblx0XHRwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdID0gbmV3TmFtZSArIChmaWxlLmV4dGVuc2lvbiA/IGAuJHtmaWxlLmV4dGVuc2lvbn1gIDogJycpO1xuXHRcdGNvbnN0IG5ld1BhdGggPSBwYXRoUGFydHMuam9pbignLycpO1xuXHRcdFxuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCBhcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLCBuZXdQYXRoKTtcblx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdC8vIEVycm9yIGhhbmRsaW5nIC0gdGhlIHJlbmFtZSBtaWdodCBmYWlsIGlmIGZpbGUgYWxyZWFkeSBleGlzdHMsIGV0Yy5cblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1tCYXNlcyBDTVNdIEVycm9yIHJlbmFtaW5nIGZpbGU6JywgZXJyb3IpO1xuXHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHR9XG5cdH07XG5cdFxuXHRyZW5hbWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0dm9pZCBoYW5kbGVSZW5hbWUoKTtcblx0fSk7XG5cdFxuXHRpbnB1dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuXHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dm9pZCBoYW5kbGVSZW5hbWUoKTtcblx0XHR9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHR9XG5cdH0pO1xuXHRcblx0bW9kYWwub3BlbigpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgY29tbWFuZCBpcyBPYnNpZGlhbidzIGRlZmF1bHQgXCJSZW5hbWUgZmlsZVwiIGNvbW1hbmRcbiAqL1xuZnVuY3Rpb24gaXNPYnNpZGlhblJlbmFtZUNvbW1hbmQoY29tbWFuZElkOiBzdHJpbmcpOiBib29sZWFuIHtcblx0Ly8gT2JzaWRpYW4ncyByZW5hbWUgZmlsZSBjb21tYW5kIElEcyAobWF5IHZhcnkgYnkgdmVyc2lvbilcblx0Y29uc3QgbG93ZXJJZCA9IGNvbW1hbmRJZC50b0xvd2VyQ2FzZSgpO1xuXHRyZXR1cm4gY29tbWFuZElkID09PSAnZmlsZS1leHBsb3JlcjpyZW5hbWUtZmlsZScgfHwgXG5cdFx0ICAgY29tbWFuZElkID09PSAncmVuYW1lLWZpbGUnIHx8XG5cdFx0ICAgY29tbWFuZElkID09PSAnZmlsZTpyZW5hbWUtZmlsZScgfHxcblx0XHQgICAobG93ZXJJZC5pbmNsdWRlcygncmVuYW1lJykgJiYgbG93ZXJJZC5pbmNsdWRlcygnZmlsZScpICYmICFsb3dlcklkLmluY2x1ZGVzKCc6JykpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgY29tbWFuZCBpcyBrbm93biB0byBub3Qgd29yayB3ZWxsIHdpdGhvdXQgdGhlIGZpbGUgYmVpbmcgcHJvcGVybHkgb3BlbmVkXG4gKiBUaGVzZSBjb21tYW5kcyB0eXBpY2FsbHkgbmVlZCBlZGl0b3IgY29udGV4dCBvciBzcGVjaWZpYyBVSSBzdGF0ZSB0aGF0IGNhbid0IGJlIGZha2VkXG4gKi9cbmZ1bmN0aW9uIGlzUHJvYmxlbWF0aWNDb21tYW5kKGNvbW1hbmRJZDogc3RyaW5nLCBjb21tYW5kTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG5cdGNvbnN0IGxvd2VySWQgPSBjb21tYW5kSWQudG9Mb3dlckNhc2UoKTtcblx0Y29uc3QgbG93ZXJOYW1lID0gY29tbWFuZE5hbWUudG9Mb3dlckNhc2UoKTtcblx0XG5cdC8vIENvbW1hbmRzIHRoYXQgbmVlZCBlZGl0b3IgY29udGV4dCBhbmQgdHlwaWNhbGx5IGRvbid0IHdvcmsgd2VsbCBwcm9ncmFtbWF0aWNhbGx5XG5cdGNvbnN0IHByb2JsZW1hdGljUGF0dGVybnMgPSBbXG5cdFx0J2FkZCB0YWcnLFxuXHRcdCdhZGQtdGFnJyxcblx0XHQnaW5zZXJ0LXRlbXBsYXRlJyxcblx0XHQnaW5zZXJ0LXRlbXBsYXRlJyxcblx0XHQnZWRpdG9yOicsXG5cdFx0J21hcmtkb3duOicsXG5cdF07XG5cdFxuXHRyZXR1cm4gcHJvYmxlbWF0aWNQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gXG5cdFx0bG93ZXJJZC5pbmNsdWRlcyhwYXR0ZXJuKSB8fCBsb3dlck5hbWUuaW5jbHVkZXMocGF0dGVybilcblx0KTtcbn1cblxuLyoqXG4gKiBTZXR1cCBxdWljayBlZGl0IGljb24gb24gdGl0bGUgZWxlbWVudCAob3IgY2FyZCBpZiB0aXRsZSBpcyBoaWRkZW4pXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFF1aWNrRWRpdEljb24oXG5cdGFwcDogQXBwLFxuXHRwbHVnaW46IEJhc2VzQ01TUGx1Z2luLFxuXHR0aXRsZUVsOiBIVE1MRWxlbWVudCxcblx0Y2FyZEVsOiBIVE1MRWxlbWVudCxcblx0Y2FyZFBhdGg6IHN0cmluZyxcblx0c2V0dGluZ3M6IENNU1NldHRpbmdzXG4pOiB2b2lkIHtcblx0Ly8gUXVpY2sgZWRpdCBpY29uIChvbmx5IGlmIGVuYWJsZWQsIGNvbW1hbmQgaXMgc2V0LCBhbmQgbm90IGhpZGRlbiBpbiB0aGlzIHZpZXcpXG5cdGlmICghcGx1Z2luLnNldHRpbmdzLmVuYWJsZVF1aWNrRWRpdCB8fCBcblx0XHQhcGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdENvbW1hbmQgfHwgXG5cdFx0cGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdENvbW1hbmQgPT09ICcnIHx8XG5cdFx0c2V0dGluZ3MuaGlkZVF1aWNrRWRpdEljb24pIHtcblx0XHRyZXR1cm47XG5cdH1cblx0XG5cdC8vIEF0dGFjaCB0byB0aXRsZUVsICh0aXRsZSBpcyBhbHdheXMgc2hvd24gbm93KVxuXHRjb25zdCBxdWlja0VkaXRJY29uID0gdGl0bGVFbC5jcmVhdGVTcGFuKCdiYXNlcy1jbXMtcXVpY2stZWRpdC1pY29uJyk7XG5cdHF1aWNrRWRpdEljb24uYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1jdXJzb3ItZGVmYXVsdCcpO1xuXHRzZXRJY29uKHF1aWNrRWRpdEljb24sIHBsdWdpbi5zZXR0aW5ncy5xdWlja0VkaXRJY29uIHx8ICdwZW5jaWwtbGluZScpO1xuXHRcblx0Ly8gUHJldmVudCB0aXRsZSBmcm9tIGJlaW5nIGNsaWNrYWJsZSB3aGVuIGNsaWNraW5nIGljb25cblx0dGl0bGVFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0aWYgKHF1aWNrRWRpdEljb24uY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkpIHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdH1cblx0fSwgdHJ1ZSk7XG5cdFxuXHQvLyBFeGVjdXRlIGNvbW1hbmQgd2hlbiBpY29uIGlzIGNsaWNrZWRcblx0Ly8gUmVnaXN0ZXIgd2l0aCBjYXB0dXJlIHBoYXNlIEJFRk9SRSBjYXJkIGNsaWNrIGhhbmRsZXIgY2FuIHNlZSBpdFxuXHRjYXJkRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0aWYgKCFxdWlja0VkaXRJY29uLmNvbnRhaW5zKHRhcmdldCkgJiYgIXRhcmdldC5jbG9zZXN0KCcuYmFzZXMtY21zLXF1aWNrLWVkaXQtaWNvbicpKSB7XG5cdFx0XHRcdHJldHVybjsgLy8gTm90IGNsaWNraW5nIG9uIGljb25cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcblx0XHRcdC8vIFRyeSB0byBleGVjdXRlIGNvbW1hbmQgd2l0aG91dCBvcGVuaW5nIGZpbGUgZmlyc3Rcblx0XHRcdC8vIEZvciBjb21tYW5kcyB0aGF0IG5lZWQgZmlsZSBjb250ZXh0LCB0cnkgdG8gY2FsbCBoZWxwZXIgZnVuY3Rpb25zIGRpcmVjdGx5IGlmIGF2YWlsYWJsZVxuXHRcdFx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY2FyZFBhdGgpO1xuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRjb25zdCBjb21tYW5kSWQgPSBwbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0Q29tbWFuZDtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEZJUlNUOiBDaGVjayBpZiB0aGlzIGlzIE9ic2lkaWFuJ3MgXCJSZW5hbWUgZmlsZVwiIGNvbW1hbmRcblx0XHRcdFx0Ly8gU2hvdyByZW5hbWUgZGlhbG9nIHdpdGhvdXQgb3BlbmluZyB0aGUgZmlsZSwgc2ltaWxhciB0byBBc3RybyBDb21wb3NlclxuXHRcdFx0XHRjb25zdCBjb21tYW5kUmVnaXN0cnkgPSAoYXBwIGFzIHsgY29tbWFuZHM/OiB7IGNvbW1hbmRzPzogUmVjb3JkPHN0cmluZywgeyBuYW1lPzogc3RyaW5nIH0+IH0gfSkuY29tbWFuZHM7XG5cdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kUmVnaXN0cnk/LmNvbW1hbmRzPy5bY29tbWFuZElkXTtcblx0XHRcdFx0Y29uc3QgY29tbWFuZE5hbWUgPSBjb21tYW5kPy5uYW1lIHx8ICcnO1xuXHRcdFx0XHRjb25zdCBsb3dlckNvbW1hbmROYW1lID0gY29tbWFuZE5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYSByZW5hbWUgZmlsZSBjb21tYW5kIGJ5IElEIG9yIG5hbWVcblx0XHRcdFx0aWYgKGlzT2JzaWRpYW5SZW5hbWVDb21tYW5kKGNvbW1hbmRJZCkgfHwgXG5cdFx0XHRcdFx0KGxvd2VyQ29tbWFuZE5hbWUuaW5jbHVkZXMoJ3JlbmFtZScpICYmIGxvd2VyQ29tbWFuZE5hbWUuaW5jbHVkZXMoJ2ZpbGUnKSkpIHtcblx0XHRcdFx0XHRzaG93UmVuYW1lRGlhbG9nKGFwcCwgZmlsZSk7XG5cdFx0XHRcdFx0cmV0dXJuOyAvLyBTdWNjZXNzLCBleGl0IGVhcmx5IC0gZG8gTk9UIG9wZW4gdGhlIGZpbGVcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBhIGtub3duIHByb2JsZW1hdGljIGNvbW1hbmQgdGhhdCB3b24ndCB3b3JrIHdlbGxcblx0XHRcdFx0aWYgKGlzUHJvYmxlbWF0aWNDb21tYW5kKGNvbW1hbmRJZCwgY29tbWFuZE5hbWUpKSB7XG5cdFx0XHRcdFx0aWYgKHBsdWdpbi5zZXR0aW5ncy5xdWlja0VkaXRPcGVuRmlsZSkge1xuXHRcdFx0XHRcdFx0Ly8gVXNlciBoYXMgZW5hYmxlZCB0aGUgc2V0dGluZywgc28gdHJ5IHRvIG9wZW4gYW5kIGV4ZWN1dGUgYW55d2F5XG5cdFx0XHRcdFx0XHQvLyBGYWxsIHRocm91Z2ggdG8gdGhlIGZpbGUgb3BlbmluZyBsb2dpYyBiZWxvd1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBUaGUgXCIke2NvbW1hbmROYW1lfVwiIGNvbW1hbmQgcmVxdWlyZXMgdGhlIGZpbGUgdG8gYmUgb3BlbiBpbiBhbiBlZGl0b3IuIEVuYWJsZSBcIkF0dGVtcHQgdG8gb3BlbiBmaWxlIGFuZCBleGVjdXRlIHF1aWNrIGVkaXQgY29tbWFuZFwiIGluIHNldHRpbmdzIHRvIHRyeSBhbnl3YXkuYCwgNTAwMCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47IC8vIERvbid0IHRyeSB0byBleGVjdXRlIC0gaXQgd29uJ3Qgd29yayBwcm9wZXJseVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Ly8gVHJ5IHRvIGZpbmQgYW5kIGNhbGwgYSBoZWxwZXIgZnVuY3Rpb24gZnJvbSB0aGUgcGx1Z2luIHRoYXQgcmVnaXN0ZXJlZCB0aGlzIGNvbW1hbmRcblx0XHRcdFx0Ly8gUGF0dGVybjogTG9vayBmb3IgW2NvbW1hbmRJZF1CeVBhdGggbWV0aG9kIG9uIHRoZSBzb3VyY2UgcGx1Z2luXG5cdFx0XHRcdGxldCBoZWxwZXJDYWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyBFeHRyYWN0IHBsdWdpbiBJRCBmcm9tIGNvbW1hbmQgSUQgaWYgaXQgaGFzIHRoZSBmb3JtYXQgXCJwbHVnaW4taWQ6Y29tbWFuZC1pZFwiXG5cdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCB0cnkgdG8gZ2V0IGl0IGZyb20gdGhlIGNvbW1hbmQgcmVnaXN0cnlcblx0XHRcdFx0XHRsZXQgcGx1Z2luSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXHRcdFx0XHRcdGxldCBiYXNlQ29tbWFuZElkID0gY29tbWFuZElkO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjb21tYW5kSWQuaW5jbHVkZXMoJzonKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBjb21tYW5kSWQuc3BsaXQoJzonKTtcblx0XHRcdFx0XHRcdHBsdWdpbklkID0gcGFydHNbMF07XG5cdFx0XHRcdFx0XHRiYXNlQ29tbWFuZElkID0gcGFydHMuc2xpY2UoMSkuam9pbignOicpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBUcnkgdG8gZ2V0IHBsdWdpbiBmcm9tIGNvbW1hbmQgcmVnaXN0cnlcblx0XHRcdFx0XHRcdGNvbnN0IGFwcFdpdGhDb21tYW5kcyA9IGFwcCBhcyB7IGNvbW1hbmRzPzogeyBjb21tYW5kcz86IFJlY29yZDxzdHJpbmcsIHVua25vd24+IH0gfTtcblx0XHRcdFx0XHRcdGNvbnN0IGNvbW1hbmRSZWdpc3RyeSA9IGFwcFdpdGhDb21tYW5kcy5jb21tYW5kcztcblx0XHRcdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kUmVnaXN0cnk/LmNvbW1hbmRzPy5bY29tbWFuZElkXSBhcyB7IHBsdWdpbj86IHsgbWFuaWZlc3Q/OiB7IGlkPzogc3RyaW5nIH07IHBsdWdpbklkPzogc3RyaW5nIH07IHNvdXJjZVBsdWdpbj86IHsgbWFuaWZlc3Q/OiB7IGlkPzogc3RyaW5nIH07IHBsdWdpbklkPzogc3RyaW5nIH0gfSB8IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdGlmIChjb21tYW5kKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFRyeSBtdWx0aXBsZSB3YXlzIHRvIGdldCB0aGUgcGx1Z2luXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNvdXJjZVBsdWdpbiA9IGNvbW1hbmQucGx1Z2luIHx8IGNvbW1hbmQuc291cmNlUGx1Z2luO1xuXHRcdFx0XHRcdFx0XHRpZiAoc291cmNlUGx1Z2luKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gVHJ5IHRvIGdldCBwbHVnaW4gSUQgZnJvbSBwbHVnaW4gaW5zdGFuY2Vcblx0XHRcdFx0XHRcdFx0XHRwbHVnaW5JZCA9IHNvdXJjZVBsdWdpbi5tYW5pZmVzdD8uaWQgfHwgc291cmNlUGx1Z2luLnBsdWdpbklkIHx8IG51bGw7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBhIHBsdWdpbiBJRCwgdHJ5IHRvIGdldCB0aGUgcGx1Z2luIGluc3RhbmNlXG5cdFx0XHRcdFx0aWYgKHBsdWdpbklkKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBwbHVnaW5zID0gKGFwcCBhcyB7IHBsdWdpbnM/OiB7IHBsdWdpbnM/OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4gfSB9KS5wbHVnaW5zO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc291cmNlUGx1Z2luID0gcGx1Z2lucz8ucGx1Z2lucz8uW3BsdWdpbklkXTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0aWYgKHNvdXJjZVBsdWdpbikge1xuXHRcdFx0XHRcdFx0XHQvLyBDb252ZXJ0IGNvbW1hbmQgSUQgdG8gY2FtZWxDYXNlIG1ldGhvZCBuYW1lXG5cdFx0XHRcdFx0XHRcdC8vIGUuZy4sIFwicmVuYW1lLWNvbnRlbnRcIiAtPiBcInJlbmFtZUNvbnRlbnRCeVBhdGhcIlxuXHRcdFx0XHRcdFx0XHRjb25zdCBtZXRob2ROYW1lID0gYmFzZUNvbW1hbmRJZFxuXHRcdFx0XHRcdFx0XHRcdC5zcGxpdCgnLScpXG5cdFx0XHRcdFx0XHRcdFx0Lm1hcCgocGFydCwgaW5kZXgpID0+IFxuXHRcdFx0XHRcdFx0XHRcdFx0aW5kZXggPT09IDAgPyBwYXJ0IDogcGFydC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBhcnQuc2xpY2UoMSlcblx0XHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRcdFx0LmpvaW4oJycpICsgJ0J5UGF0aCc7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQvLyBDaGVjayBpZiB0aGUgcGx1Z2luIGV4cG9zZXMgdGhpcyBoZWxwZXIgZnVuY3Rpb25cblx0XHRcdFx0XHRcdFx0aWYgKHNvdXJjZVBsdWdpbiAmJiB0eXBlb2Ygc291cmNlUGx1Z2luW21ldGhvZE5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gQ2FsbCB0aGUgaGVscGVyIGZ1bmN0aW9uIGRpcmVjdGx5IC0gbm8gbmVlZCB0byBvcGVuIGZpbGUhXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgKHNvdXJjZVBsdWdpblttZXRob2ROYW1lXSBhcyAocGF0aDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+KShjYXJkUGF0aCk7XG5cdFx0XHRcdFx0XHRcdFx0aGVscGVyQ2FsbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm47IC8vIFN1Y2Nlc3MsIGV4aXQgZWFybHlcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0Ly8gRmFsbCB0aHJvdWdoIHRvIHRyeSByZWd1bGFyIGNvbW1hbmQgZXhlY3V0aW9uXG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIEZvciBvdGhlciBjb21tYW5kcyBvciBpZiBoZWxwZXIgbm90IGF2YWlsYWJsZSwgY2hlY2sgaWYgdXNlciB3YW50cyB0byB0cnkgb3BlbmluZyB0aGUgZmlsZVxuXHRcdFx0XHRpZiAoIWhlbHBlckNhbGxlZCkge1xuXHRcdFx0XHRcdC8vIE9ubHkgYXR0ZW1wdCB0byBvcGVuIGZpbGUgYW5kIGV4ZWN1dGUgaWYgdGhlIHNldHRpbmcgaXMgZW5hYmxlZFxuXHRcdFx0XHRcdGlmICghcGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdE9wZW5GaWxlKSB7XG5cdFx0XHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlOyBxdW90ZWQgdGV4dCBpcyBhIHNldHRpbmcgbmFtZSByZWZlcmVuY2Vcblx0XHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2Vcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFRoaXMgY29tbWFuZCBkb2Vzbid0IGhhdmUgc3BlY2lhbCBoYW5kbGluZy4gRW5hYmxlIFwiQXR0ZW1wdCB0byBvcGVuIGZpbGUgYW5kIGV4ZWN1dGUgcXVpY2sgZWRpdCBjb21tYW5kXCIgaW4gc2V0dGluZ3MgdG8gdHJ5IGV4ZWN1dGluZyBpdC5gLCA1MDAwKTtcblx0XHRcdFx0XHRcdHJldHVybjsgLy8gRG9uJ3QgdHJ5IHRvIGV4ZWN1dGVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gVXNlciBoYXMgZW5hYmxlZCB0aGUgc2V0dGluZywgc28gdHJ5IHRvIG9wZW4gdGhlIGZpbGUgZmlyc3Rcblx0XHRcdFx0XHQvLyBhbmQgbWFrZSBpdCBhY3RpdmUgc28gY29tbWFuZHMgbGlrZSBcIlJlbmFtZSBmaWxlXCIgdGFyZ2V0IHRoZSBjb3JyZWN0IGZpbGVcblx0XHRcdFx0XHQvLyBBbHdheXMgb3BlbiB0aGUgZmlsZSBmaXJzdCBhbmQgbWFrZSBpdCBhY3RpdmUgYmVmb3JlIGV4ZWN1dGluZyB0aGUgY29tbWFuZFxuXHRcdFx0XHRcdC8vIFRoaXMgZW5zdXJlcyBjb21tYW5kcyB0aGF0IHVzZSBnZXRBY3RpdmVGaWxlKCkgdGFyZ2V0IHRoZSBjb3JyZWN0IGZpbGVcblx0XHRcdFx0XHRjb25zdCBsZWFmID0gYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKTtcblx0XHRcdFx0XHRhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIENSSVRJQ0FMOiBTZXQgdGhpcyBsZWFmIGFzIGFjdGl2ZSBzbyBjb21tYW5kcyB0YXJnZXQgdGhlIGNvcnJlY3QgZmlsZVxuXHRcdFx0XHRcdC8vIENvbW1hbmRzIGxpa2UgXCJSZW5hbWUgZmlsZVwiIHVzZSBnZXRBY3RpdmVGaWxlKCkgdG8gZGV0ZXJtaW5lIHdoaWNoIGZpbGUgdG8gb3BlcmF0ZSBvblxuXHRcdFx0XHRcdGFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihsZWFmLCB7IGZvY3VzOiB0cnVlIH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFdhaXQgZm9yIHRoZSBlZGl0b3IgdG8gYmUgcmVhZHkgYW5kIHRoZSBmaWxlIHRvIGJlIGFjdGl2ZVxuXHRcdFx0XHRcdC8vIFVzZSBtdWx0aXBsZSBjaGVja3MgdG8gZW5zdXJlIHRoZSB3b3Jrc3BhY2Ugc3RhdGUgaGFzIGZ1bGx5IHVwZGF0ZWRcblx0XHRcdFx0XHRsZXQgYXR0ZW1wdHMgPSAwO1xuXHRcdFx0XHRcdGNvbnN0IG1heEF0dGVtcHRzID0gMzA7IC8vIE1heGltdW0gMS41IHNlY29uZHMgb2Ygd2FpdGluZyAoMzAgKiA1MG1zKVxuXHRcdFx0XHRcdGNvbnN0IGV4ZWN1dGVDb21tYW5kID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0Ly8gRmluYWwgY2hlY2sgcmlnaHQgYmVmb3JlIGV4ZWN1dGluZ1xuXHRcdFx0XHRcdFx0Y29uc3QgZmluYWxBY3RpdmVGaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0XHRcdFx0XHRpZiAoZmluYWxBY3RpdmVGaWxlID09PSBmaWxlKSB7XG5cdFx0XHRcdFx0XHRcdC8vIEZpbGUgaXMgY29uZmlybWVkIGFjdGl2ZSwgZXhlY3V0ZSB0aGUgY29tbWFuZFxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IChhcHAgYXMgeyBjb21tYW5kcz86IHsgZXhlY3V0ZUNvbW1hbmRCeUlkPzogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4gfSB9KS5jb21tYW5kcz8uZXhlY3V0ZUNvbW1hbmRCeUlkPy4ocGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdENvbW1hbmQpO1xuXHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ29tbWFuZCBleGVjdXRpb24gZmFpbGVkXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc3QgY2hlY2tFZGl0b3JSZWFkeSA9ICgpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXc7XG5cdFx0XHRcdFx0XHRjb25zdCB2aWV3V2l0aEVkaXRvciA9IHZpZXcgYXMgeyBlZGl0b3I/OiB1bmtub3duIH07XG5cdFx0XHRcdFx0XHRjb25zdCBhY3RpdmVGaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIENoZWNrIHRoYXQgYm90aCB0aGUgZWRpdG9yIGlzIHJlYWR5IEFORCB0aGUgZmlsZSBpcyBhY3RpdmVcblx0XHRcdFx0XHRcdGlmICh2aWV3ICYmICdlZGl0b3InIGluIHZpZXcgJiYgdmlld1dpdGhFZGl0b3IuZWRpdG9yICYmIGFjdGl2ZUZpbGUgPT09IGZpbGUpIHtcblx0XHRcdFx0XHRcdFx0Ly8gRWRpdG9yIGlzIHJlYWR5IGFuZCBmaWxlIGlzIGFjdGl2ZVxuXHRcdFx0XHRcdFx0XHQvLyBXYWl0IGEgYml0IG1vcmUgdG8gZW5zdXJlIHdvcmtzcGFjZSBzdGF0ZSBpcyBmdWxseSBwcm9wYWdhdGVkXG5cdFx0XHRcdFx0XHRcdC8vIFVzZSBtdWx0aXBsZSBhbmltYXRpb24gZnJhbWVzIGFuZCB0aW1lb3V0cyB0byBlbnN1cmUgZXZlcnl0aGluZyBpcyBzZXR0bGVkXG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRleGVjdXRlQ29tbWFuZCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSwgMjAwKTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGF0dGVtcHRzIDwgbWF4QXR0ZW1wdHMpIHtcblx0XHRcdFx0XHRcdFx0Ly8gRWRpdG9yIG5vdCByZWFkeSB5ZXQgb3IgZmlsZSBub3QgYWN0aXZlLCBjaGVjayBhZ2FpblxuXHRcdFx0XHRcdFx0XHRhdHRlbXB0cysrO1xuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGNoZWNrRWRpdG9yUmVhZHksIDUwKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFN0YXJ0IGNoZWNraW5nIGZvciBlZGl0b3IgcmVhZGluZXNzXG5cdFx0XHRcdFx0Y2hlY2tFZGl0b3JSZWFkeSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSkoKTtcblx0fSwgdHJ1ZSk7IC8vIENhcHR1cmUgcGhhc2UgLSBydW5zIEJFRk9SRSB0aGUgcmVndWxhciBjYXJkIGNsaWNrIGhhbmRsZXJcblx0XG5cdC8vIEFsc28gYWRkIGEgbW91c2Vkb3duIGhhbmRsZXIgdG8gY2F0Y2ggaXQgZXZlbiBlYXJsaWVyXG5cdHF1aWNrRWRpdEljb24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHR9LCB0cnVlKTtcbn1cblxuIiwgIi8qKlxyXG4gKiBQcm9wZXJ0eSBSZW5kZXJlclxyXG4gKiBIYW5kbGVzIHJlbmRlcmluZyBwcm9wZXJ0eSBmaWVsZHMgYW5kIGNvbnRlbnQgZm9yIGNhcmRzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBCYXNlc0VudHJ5LCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHR5cGUgeyBDYXJkRGF0YSwgQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvZGF0YS10cmFuc2Zvcm0nO1xyXG5pbXBvcnQgeyBnZXRQcm9wZXJ0eUxhYmVsIH0gZnJvbSAnLi9wcm9wZXJ0eSc7XHJcbmltcG9ydCB7IFxyXG5cdHNob3VsZEhpZGVNaXNzaW5nUHJvcGVydGllcywgXHJcblx0c2hvdWxkSGlkZUVtcHR5UHJvcGVydGllcyxcclxuXHRnZXRFbXB0eVZhbHVlTWFya2VyLFxyXG5cdGdldFRhZ1N0eWxlLFxyXG5cdHNob3dUYWdIYXNoUHJlZml4XHJcbn0gZnJvbSAnLi9zdHlsZS1zZXR0aW5ncyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvcGVydHlSZW5kZXJlciB7XHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcml2YXRlIGFwcDogQXBwLFxyXG5cdFx0cHJpdmF0ZSBnZXRCYXNlc0NvbmZpZz86ICgpID0+IHsgZ2V0PzogKGtleTogc3RyaW5nKSA9PiB1bmtub3duIH0gfCB1bmRlZmluZWQsXHJcblx0XHRwcml2YXRlIGdldEJhc2VzQ29udHJvbGxlcj86ICgpID0+IHsgZ2V0UHJvcGVydHlEaXNwbGF5TmFtZT86IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZyB9IHwgdW5kZWZpbmVkXHJcblx0KSB7fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZW5kZXJzIHByb3BlcnR5IGZpZWxkcyBmb3IgYSBjYXJkXHJcblx0ICogQHBhcmFtIHBvc2l0aW9uIC0gJ3RvcCcgdG8gcmVuZGVyIG9ubHkgdG9wLXBvc2l0aW9uZWQgZ3JvdXBzLCAnYm90dG9tJyB0byByZW5kZXIgb25seSBib3R0b20tcG9zaXRpb25lZCBncm91cHMsIHVuZGVmaW5lZCB0byByZW5kZXIgYWxsXHJcblx0ICovXHJcblx0cmVuZGVyUHJvcGVydGllcyhcclxuXHRcdGNhcmRFbDogSFRNTEVsZW1lbnQsXHJcblx0XHRjYXJkOiBDYXJkRGF0YSxcclxuXHRcdGVudHJ5OiBCYXNlc0VudHJ5LFxyXG5cdFx0c2V0dGluZ3M6IENNU1NldHRpbmdzLFxyXG5cdFx0b25Qcm9wZXJ0eVRvZ2dsZT86IChwYXRoOiBzdHJpbmcsIHByb3BlcnR5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPixcclxuXHRcdHBvc2l0aW9uPzogJ3RvcCcgfCAnYm90dG9tJ1xyXG5cdCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgcHJvcHMgPSBbXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEsXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTIsXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTMsXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTQsXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTUsXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTYsXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTcsXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTgsXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTksXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEwLFxyXG5cdFx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMSxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTIsXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEzLFxyXG5cdFx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxNFxyXG5cdFx0XTtcclxuXHJcblx0XHQvLyBEZXRlY3QgZHVwbGljYXRlc1xyXG5cdFx0Y29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG5cdFx0Y29uc3QgZWZmZWN0aXZlUHJvcHMgPSBwcm9wcy5tYXAocHJvcCA9PiB7XHJcblx0XHRcdGlmICghcHJvcCB8fCBwcm9wID09PSAnJykgcmV0dXJuICcnO1xyXG5cdFx0XHRpZiAoc2Vlbi5oYXMocHJvcCkpIHJldHVybiAnJztcclxuXHRcdFx0c2Vlbi5hZGQocHJvcCk7XHJcblx0XHRcdHJldHVybiBwcm9wO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUmVzb2x2ZSBwcm9wZXJ0eSB2YWx1ZXNcclxuXHRcdC8vIFVzZSBjYXJkRGF0YSBwcm9wZXJ0aWVzIHRoYXQgd2VyZSBhbHJlYWR5IHJlc29sdmVkIGR1cmluZyB0cmFuc2Zvcm1hdGlvblxyXG5cdFx0Ly8gRm9yIE1EWCBmaWxlcywgcHJvcGVydGllcyBhcmUgcmVzb2x2ZWQgYXN5bmMgZHVyaW5nIHRyYW5zZm9ybUJhc2VzRW50cmllc1xyXG5cdFx0Y29uc3QgdmFsdWVzID0gZWZmZWN0aXZlUHJvcHMubWFwKChwcm9wLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRpZiAoIXByb3ApIHJldHVybiBudWxsO1xyXG5cdFx0XHQvLyBVc2UgcHJlLXJlc29sdmVkIHByb3BlcnRpZXMgZnJvbSBjYXJkRGF0YSAocHJvcGVydHkxLCBwcm9wZXJ0eTIsIGV0Yy4pXHJcblx0XHRcdGNvbnN0IGNhcmRQcm9wZXJ0eSA9IGBwcm9wZXJ0eSR7aW5kZXggKyAxfWAgYXMga2V5b2YgQ2FyZERhdGE7XHJcblx0XHRcdGNvbnN0IGNhcmRWYWx1ZSA9IGNhcmRbY2FyZFByb3BlcnR5XTtcclxuXHRcdFx0aWYgKGNhcmRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmIGNhcmRWYWx1ZSAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdHJldHVybiBjYXJkVmFsdWUgYXMgc3RyaW5nIHwgbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBGYWxsYmFjazogRm9yIC5tZCBmaWxlcywgdHJ5IHN5bmNocm9ub3VzIHJlc29sdXRpb24gdmlhIEJhc2VzIEFQSVxyXG5cdFx0XHQvLyBGb3IgTURYIGZpbGVzLCBwcm9wZXJ0aWVzIHNob3VsZCBhbHJlYWR5IGJlIGluIGNhcmREYXRhIGZyb20gYXN5bmMgdHJhbnNmb3JtYXRpb25cclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCB2YWx1ZSA9IGVudHJ5LmdldFZhbHVlKHByb3AgYXMgYG5vdGUuJHtzdHJpbmd9YCB8IGBmb3JtdWxhLiR7c3RyaW5nfWAgfCBgZmlsZS4ke3N0cmluZ31gKSBhcyB7IGRhdGE/OiB1bmtub3duOyBkYXRlPzogRGF0ZSB9IHwgbnVsbDtcclxuXHRcdFx0XHRpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDtcclxuXHRcdFx0XHRpZiAoJ2RhdGUnIGluIHZhbHVlICYmIHZhbHVlLmRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdmFsdWUuZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCdkYXRhJyBpbiB2YWx1ZSAmJiB2YWx1ZS5kYXRhICE9IG51bGwpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGRhdGEgPSB2YWx1ZS5kYXRhO1xyXG5cdFx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGEubWFwKGl0ZW0gPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiBpdGVtICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KGl0ZW0pKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoaXRlbSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBTdHJpbmcoaXRlbSk7XHJcblx0XHRcdFx0XHRcdH0pLmpvaW4oJywgJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgZGF0YSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShkYXRhKSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgZGF0YSA9PT0gJ2Jvb2xlYW4nKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBTdHJpbmcoZGF0YSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBGYWxsYmFjayBmb3Igb3RoZXIgdHlwZXNcclxuXHRcdFx0XHRcdHJldHVybiBkYXRhID8gSlNPTi5zdHJpbmdpZnkoZGF0YSkgOiAnJztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdC8vIElnbm9yZSBlcnJvcnMgLSBwcm9wZXJ0eSBkb2Vzbid0IGV4aXN0IG9yIGNhbid0IGJlIHJlc29sdmVkXHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBEZWZpbmUgcHJvcGVydHkgZ3JvdXBzXHJcblx0XHRjb25zdCBwcm9wZXJ0eUdyb3VwcyA9IFtcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHByb3BzOiBbZWZmZWN0aXZlUHJvcHNbMF0sIGVmZmVjdGl2ZVByb3BzWzFdXSxcclxuXHRcdFx0XHR2YWx1ZXM6IFt2YWx1ZXNbMF0sIHZhbHVlc1sxXV0sXHJcblx0XHRcdFx0c2lkZUJ5U2lkZTogc2V0dGluZ3MucHJvcGVydHlMYXlvdXQxMlNpZGVCeVNpZGUsXHJcblx0XHRcdFx0cG9zaXRpb246IHNldHRpbmdzLnByb3BlcnR5R3JvdXAxUG9zaXRpb25cclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHByb3BzOiBbZWZmZWN0aXZlUHJvcHNbMl0sIGVmZmVjdGl2ZVByb3BzWzNdXSxcclxuXHRcdFx0XHR2YWx1ZXM6IFt2YWx1ZXNbMl0sIHZhbHVlc1szXV0sXHJcblx0XHRcdFx0c2lkZUJ5U2lkZTogc2V0dGluZ3MucHJvcGVydHlMYXlvdXQzNFNpZGVCeVNpZGUsXHJcblx0XHRcdFx0cG9zaXRpb246IHNldHRpbmdzLnByb3BlcnR5R3JvdXAyUG9zaXRpb25cclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHByb3BzOiBbZWZmZWN0aXZlUHJvcHNbNF0sIGVmZmVjdGl2ZVByb3BzWzVdXSxcclxuXHRcdFx0XHR2YWx1ZXM6IFt2YWx1ZXNbNF0sIHZhbHVlc1s1XV0sXHJcblx0XHRcdFx0c2lkZUJ5U2lkZTogc2V0dGluZ3MucHJvcGVydHlMYXlvdXQ1NlNpZGVCeVNpZGUsXHJcblx0XHRcdFx0cG9zaXRpb246IHNldHRpbmdzLnByb3BlcnR5R3JvdXAzUG9zaXRpb25cclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHByb3BzOiBbZWZmZWN0aXZlUHJvcHNbNl0sIGVmZmVjdGl2ZVByb3BzWzddXSxcclxuXHRcdFx0XHR2YWx1ZXM6IFt2YWx1ZXNbNl0sIHZhbHVlc1s3XV0sXHJcblx0XHRcdFx0c2lkZUJ5U2lkZTogc2V0dGluZ3MucHJvcGVydHlMYXlvdXQ3OFNpZGVCeVNpZGUsXHJcblx0XHRcdFx0cG9zaXRpb246IHNldHRpbmdzLnByb3BlcnR5R3JvdXA0UG9zaXRpb25cclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHByb3BzOiBbZWZmZWN0aXZlUHJvcHNbOF0sIGVmZmVjdGl2ZVByb3BzWzldXSxcclxuXHRcdFx0XHR2YWx1ZXM6IFt2YWx1ZXNbOF0sIHZhbHVlc1s5XV0sXHJcblx0XHRcdFx0c2lkZUJ5U2lkZTogc2V0dGluZ3MucHJvcGVydHlMYXlvdXQ5MTBTaWRlQnlTaWRlLFxyXG5cdFx0XHRcdHBvc2l0aW9uOiBzZXR0aW5ncy5wcm9wZXJ0eUdyb3VwNVBvc2l0aW9uXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRwcm9wczogW2VmZmVjdGl2ZVByb3BzWzEwXSwgZWZmZWN0aXZlUHJvcHNbMTFdXSxcclxuXHRcdFx0XHR2YWx1ZXM6IFt2YWx1ZXNbMTBdLCB2YWx1ZXNbMTFdXSxcclxuXHRcdFx0XHRzaWRlQnlTaWRlOiBzZXR0aW5ncy5wcm9wZXJ0eUxheW91dDExMTJTaWRlQnlTaWRlLFxyXG5cdFx0XHRcdHBvc2l0aW9uOiBzZXR0aW5ncy5wcm9wZXJ0eUdyb3VwNlBvc2l0aW9uXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRwcm9wczogW2VmZmVjdGl2ZVByb3BzWzEyXSwgZWZmZWN0aXZlUHJvcHNbMTNdXSxcclxuXHRcdFx0XHR2YWx1ZXM6IFt2YWx1ZXNbMTJdLCB2YWx1ZXNbMTNdXSxcclxuXHRcdFx0XHRzaWRlQnlTaWRlOiBzZXR0aW5ncy5wcm9wZXJ0eUxheW91dDEzMTRTaWRlQnlTaWRlLFxyXG5cdFx0XHRcdHBvc2l0aW9uOiBzZXR0aW5ncy5wcm9wZXJ0eUdyb3VwN1Bvc2l0aW9uXHJcblx0XHRcdH1cclxuXHRcdF07XHJcblxyXG5cdFx0Ly8gU2VwYXJhdGUgZ3JvdXBzIGJ5IHBvc2l0aW9uXHJcblx0XHRjb25zdCB0b3BHcm91cHM6IHR5cGVvZiBwcm9wZXJ0eUdyb3VwcyA9IFtdO1xyXG5cdFx0Y29uc3QgYm90dG9tR3JvdXBzOiB0eXBlb2YgcHJvcGVydHlHcm91cHMgPSBbXTtcclxuXHJcblx0XHRwcm9wZXJ0eUdyb3Vwcy5mb3JFYWNoKChncm91cCwgaW5kZXgpID0+IHtcclxuXHRcdFx0Y29uc3QgaGFzQ29udGVudCA9IGdyb3VwLnByb3BzWzBdICE9PSAnJyB8fCBncm91cC5wcm9wc1sxXSAhPT0gJyc7XHJcblx0XHRcdGlmIChoYXNDb250ZW50KSB7XHJcblx0XHRcdFx0aWYgKGdyb3VwLnBvc2l0aW9uID09PSAndG9wJykge1xyXG5cdFx0XHRcdFx0dG9wR3JvdXBzLnB1c2goZ3JvdXApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRib3R0b21Hcm91cHMucHVzaChncm91cCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY2hlY2sgaWYgcHJvcGVydHkgc2hvdWxkIGJlIGhpZGRlblxyXG5cdFx0Y29uc3Qgc2hvdWxkSGlkZVByb3BlcnR5ID0gKHByb3BOYW1lOiBzdHJpbmcsIHByb3BWYWx1ZTogc3RyaW5nIHwgbnVsbCk6IGJvb2xlYW4gPT4ge1xyXG5cdFx0XHRpZiAoIXByb3BOYW1lIHx8IHByb3BOYW1lID09PSAnJykgcmV0dXJuIHRydWU7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBpc0VtcHR5VmFsdWUgPSBwcm9wVmFsdWUgPT09IG51bGwgfHwgXHJcblx0XHRcdFx0cHJvcFZhbHVlID09PSAnJyB8fCBcclxuXHRcdFx0XHQodHlwZW9mIHByb3BWYWx1ZSA9PT0gJ3N0cmluZycgJiYgcHJvcFZhbHVlLnRyaW0oKSA9PT0gJycpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgcHJvcGVydHkgZXhpc3RzIGluIGZyb250bWF0dGVyXHJcblx0XHRcdGxldCBwcm9wZXJ0eUV4aXN0cyA9IGZhbHNlO1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdC8vIEdldCBmaWxlIGZyb20gdmF1bHQgdG8gZW5zdXJlIGl0J3MgYSBwcm9wZXIgVEZpbGUgKGxpa2Ugb3RoZXIgcGFydHMgb2YgdGhlIGNvZGViYXNlKVxyXG5cdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gZW50cnk/LmZpbGU/LnBhdGg7XHJcblx0XHRcdFx0aWYgKGZpbGVQYXRoICYmIHRoaXMuYXBwPy52YXVsdCAmJiB0aGlzLmFwcD8ubWV0YWRhdGFDYWNoZSkge1xyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcblx0XHRcdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0XHRcdC8vIEZvciBNRFggZmlsZXMsIG1ldGFkYXRhIGNhY2hlIHdvbid0IHdvcmssIHNvIHNraXAgdGhpcyBjaGVja1xyXG5cdFx0XHRcdFx0XHQvLyBUaGUgQmFzZXMgQVBJIHNob3VsZCBoYW5kbGUgcHJvcGVydHkgZXhpc3RlbmNlIGZvciBNRFggZmlsZXNcclxuXHRcdFx0XHRcdFx0aWYgKGZpbGUuZXh0ZW5zaW9uID09PSAnbWR4Jykge1xyXG5cdFx0XHRcdFx0XHRcdC8vIEZvciBNRFgsIGFzc3VtZSBwcm9wZXJ0eSBleGlzdHMgaWYgQmFzZXMgQVBJIHJldHVybmVkIGEgdmFsdWVcclxuXHRcdFx0XHRcdFx0XHRwcm9wZXJ0eUV4aXN0cyA9ICFpc0VtcHR5VmFsdWU7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbWV0YWRhdGEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcclxuXHRcdFx0XHRcdFx0XHRpZiAobWV0YWRhdGEgJiYgbWV0YWRhdGEuZnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHByb3BlcnR5TmFtZXMgPSBwcm9wTmFtZS5zcGxpdCgnLCcpLm1hcChwID0+IHAudHJpbSgpKS5maWx0ZXIocCA9PiBwKTtcclxuXHRcdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgcHJvcCBvZiBwcm9wZXJ0eU5hbWVzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHByb3BLZXkgPSBwcm9wLnJlcGxhY2UoL14obm90ZXxmb3JtdWxhfGZpbGUpXFwuLywgJycpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAocHJvcEtleSBpbiBtZXRhZGF0YS5mcm9udG1hdHRlcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHByb3BlcnR5RXhpc3RzID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0Ly8gU2lsZW50bHkgaWdub3JlIGVycm9ycyB3aGVuIGNoZWNraW5nIHByb3BlcnR5IGV4aXN0ZW5jZVxyXG5cdFx0XHRcdC8vIFRoaXMgY2FuIGhhcHBlbiBpZiBtZXRhZGF0YUNhY2hlIGlzbid0IHJlYWR5IHlldFxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBIaWRlIG1pc3NpbmcgcHJvcGVydGllc1xyXG5cdFx0XHRpZiAoc2hvdWxkSGlkZU1pc3NpbmdQcm9wZXJ0aWVzKCkgJiYgIXByb3BlcnR5RXhpc3RzKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIEhpZGUgZW1wdHkgcHJvcGVydGllc1xyXG5cdFx0XHRpZiAoc2hvdWxkSGlkZUVtcHR5UHJvcGVydGllcygpICYmIHByb3BlcnR5RXhpc3RzICYmIGlzRW1wdHlWYWx1ZSkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBbHNvIGhpZGUgaWYgZW1wdHkgYW5kIGhpZGUgZW1wdHkgaXMgZW5hYmxlZCAoZmFsbGJhY2sgZm9yIGZvcm11bGEgcHJvcGVydGllcylcclxuXHRcdFx0aWYgKHNob3VsZEhpZGVFbXB0eVByb3BlcnRpZXMoKSAmJiBpc0VtcHR5VmFsdWUpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBSZW5kZXIgdG9wIGdyb3VwcyAob25seSBpZiBwb3NpdGlvbiBpcyAndG9wJyBvciB1bmRlZmluZWQpXHJcblx0XHRpZiAoKHBvc2l0aW9uID09PSAndG9wJyB8fCBwb3NpdGlvbiA9PT0gdW5kZWZpbmVkKSAmJiB0b3BHcm91cHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRjb25zdCB0b3BNZXRhRWwgPSBjYXJkRWwuY3JlYXRlRGl2KCdjYXJkLXByb3BlcnRpZXMgcHJvcGVydGllcy10b3AnKTtcclxuXHRcdFx0dG9wR3JvdXBzLmZvckVhY2goKGdyb3VwLCBncm91cEluZGV4KSA9PiB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgZWl0aGVyIHByb3BlcnR5IHNob3VsZCBiZSByZW5kZXJlZFxyXG5cdFx0XHRcdGNvbnN0IHByb3AxU2hvdWxkUmVuZGVyID0gZ3JvdXAucHJvcHNbMF0gJiYgIXNob3VsZEhpZGVQcm9wZXJ0eShncm91cC5wcm9wc1swXSwgZ3JvdXAudmFsdWVzWzBdKTtcclxuXHRcdFx0XHRjb25zdCBwcm9wMlNob3VsZFJlbmRlciA9IGdyb3VwLnByb3BzWzFdICYmICFzaG91bGRIaWRlUHJvcGVydHkoZ3JvdXAucHJvcHNbMV0sIGdyb3VwLnZhbHVlc1sxXSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCFwcm9wMVNob3VsZFJlbmRlciAmJiAhcHJvcDJTaG91bGRSZW5kZXIpIHtcclxuXHRcdFx0XHRcdHJldHVybjsgLy8gU2tpcCB0aGlzIGdyb3VwIGVudGlyZWx5IGlmIGJvdGggcHJvcGVydGllcyBhcmUgaGlkZGVuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnN0IHJvd0VsID0gdG9wTWV0YUVsLmNyZWF0ZURpdihgcHJvcGVydHktcm93IHByb3BlcnR5LXJvdy1ncm91cC0ke2dyb3VwSW5kZXggKyAxfWApO1xyXG5cdFx0XHRcdGlmIChncm91cC5zaWRlQnlTaWRlKSB7XHJcblx0XHRcdFx0XHRyb3dFbC5hZGRDbGFzcygncHJvcGVydHktcm93LXNpZGUtYnktc2lkZScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjb25zdCBmaWVsZDFFbCA9IHJvd0VsLmNyZWF0ZURpdigncHJvcGVydHktZmllbGQgcHJvcGVydHktZmllbGQtMScpO1xyXG5cdFx0XHRcdGlmIChwcm9wMVNob3VsZFJlbmRlcikge1xyXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJQcm9wZXJ0eUNvbnRlbnQoZmllbGQxRWwsIGdyb3VwLnByb3BzWzBdLCBncm91cC52YWx1ZXNbMF0sIGNhcmQsIGVudHJ5LCBzZXR0aW5ncywgb25Qcm9wZXJ0eVRvZ2dsZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNvbnN0IGZpZWxkMkVsID0gcm93RWwuY3JlYXRlRGl2KCdwcm9wZXJ0eS1maWVsZCBwcm9wZXJ0eS1maWVsZC0yJyk7XHJcblx0XHRcdFx0aWYgKHByb3AyU2hvdWxkUmVuZGVyKSB7XHJcblx0XHRcdFx0XHR0aGlzLnJlbmRlclByb3BlcnR5Q29udGVudChmaWVsZDJFbCwgZ3JvdXAucHJvcHNbMV0sIGdyb3VwLnZhbHVlc1sxXSwgY2FyZCwgZW50cnksIHNldHRpbmdzLCBvblByb3BlcnR5VG9nZ2xlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJlbmRlciBib3R0b20gZ3JvdXBzIChvbmx5IGlmIHBvc2l0aW9uIGlzICdib3R0b20nIG9yIHVuZGVmaW5lZClcclxuXHRcdGlmICgocG9zaXRpb24gPT09ICdib3R0b20nIHx8IHBvc2l0aW9uID09PSB1bmRlZmluZWQpICYmIGJvdHRvbUdyb3Vwcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGNvbnN0IGJvdHRvbU1ldGFFbCA9IGNhcmRFbC5jcmVhdGVEaXYoJ2NhcmQtcHJvcGVydGllcyBwcm9wZXJ0aWVzLWJvdHRvbScpO1xyXG5cdFx0XHRib3R0b21Hcm91cHMuZm9yRWFjaCgoZ3JvdXAsIGdyb3VwSW5kZXgpID0+IHtcclxuXHRcdFx0XHQvLyBDaGVjayBpZiBlaXRoZXIgcHJvcGVydHkgc2hvdWxkIGJlIHJlbmRlcmVkXHJcblx0XHRcdFx0Y29uc3QgcHJvcDFTaG91bGRSZW5kZXIgPSBncm91cC5wcm9wc1swXSAmJiAhc2hvdWxkSGlkZVByb3BlcnR5KGdyb3VwLnByb3BzWzBdLCBncm91cC52YWx1ZXNbMF0pO1xyXG5cdFx0XHRcdGNvbnN0IHByb3AyU2hvdWxkUmVuZGVyID0gZ3JvdXAucHJvcHNbMV0gJiYgIXNob3VsZEhpZGVQcm9wZXJ0eShncm91cC5wcm9wc1sxXSwgZ3JvdXAudmFsdWVzWzFdKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoIXByb3AxU2hvdWxkUmVuZGVyICYmICFwcm9wMlNob3VsZFJlbmRlcikge1xyXG5cdFx0XHRcdFx0cmV0dXJuOyAvLyBTa2lwIHRoaXMgZ3JvdXAgZW50aXJlbHkgaWYgYm90aCBwcm9wZXJ0aWVzIGFyZSBoaWRkZW5cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc3Qgcm93RWwgPSBib3R0b21NZXRhRWwuY3JlYXRlRGl2KGBwcm9wZXJ0eS1yb3cgcHJvcGVydHktcm93LWdyb3VwLSR7Z3JvdXBJbmRleCArIDF9YCk7XHJcblx0XHRcdFx0aWYgKGdyb3VwLnNpZGVCeVNpZGUpIHtcclxuXHRcdFx0XHRcdHJvd0VsLmFkZENsYXNzKCdwcm9wZXJ0eS1yb3ctc2lkZS1ieS1zaWRlJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNvbnN0IGZpZWxkMUVsID0gcm93RWwuY3JlYXRlRGl2KCdwcm9wZXJ0eS1maWVsZCBwcm9wZXJ0eS1maWVsZC0xJyk7XHJcblx0XHRcdFx0aWYgKHByb3AxU2hvdWxkUmVuZGVyKSB7XHJcblx0XHRcdFx0XHR0aGlzLnJlbmRlclByb3BlcnR5Q29udGVudChmaWVsZDFFbCwgZ3JvdXAucHJvcHNbMF0sIGdyb3VwLnZhbHVlc1swXSwgY2FyZCwgZW50cnksIHNldHRpbmdzLCBvblByb3BlcnR5VG9nZ2xlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y29uc3QgZmllbGQyRWwgPSByb3dFbC5jcmVhdGVEaXYoJ3Byb3BlcnR5LWZpZWxkIHByb3BlcnR5LWZpZWxkLTInKTtcclxuXHRcdFx0XHRpZiAocHJvcDJTaG91bGRSZW5kZXIpIHtcclxuXHRcdFx0XHRcdHRoaXMucmVuZGVyUHJvcGVydHlDb250ZW50KGZpZWxkMkVsLCBncm91cC5wcm9wc1sxXSwgZ3JvdXAudmFsdWVzWzFdLCBjYXJkLCBlbnRyeSwgc2V0dGluZ3MsIG9uUHJvcGVydHlUb2dnbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZW5kZXJzIGluZGl2aWR1YWwgcHJvcGVydHkgY29udGVudFxyXG5cdCAqL1xyXG5cdHByaXZhdGUgcmVuZGVyUHJvcGVydHlDb250ZW50KFxyXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdHByb3BlcnR5TmFtZTogc3RyaW5nLFxyXG5cdFx0cmVzb2x2ZWRWYWx1ZTogc3RyaW5nIHwgbnVsbCxcclxuXHRcdGNhcmQ6IENhcmREYXRhLFxyXG5cdFx0ZW50cnk6IEJhc2VzRW50cnksXHJcblx0XHRzZXR0aW5nczogQ01TU2V0dGluZ3MsXHJcblx0XHRvblByb3BlcnR5VG9nZ2xlPzogKHBhdGg6IHN0cmluZywgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHVua25vd24pID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+XHJcblx0KTogdm9pZCB7XHJcblx0XHRpZiAocHJvcGVydHlOYW1lID09PSAnJykgcmV0dXJuO1xyXG5cclxuXHRcdC8vIE1hdGNoIER5bmFtaWMgVmlld3MgYmVoYXZpb3I6XHJcblx0XHQvLyAtIHJlc29sdmVkVmFsdWUgPT09IG51bGwgbWVhbnMgcHJvcGVydHkgZG9lc24ndCBleGlzdCAobWlzc2luZylcclxuXHRcdC8vIC0gcmVzb2x2ZWRWYWx1ZSA9PT0gXCJcIiBtZWFucyBwcm9wZXJ0eSBleGlzdHMgYnV0IGlzIGVtcHR5XHJcblx0XHQvLyBUaGlzIG1hdGNoZXMgaG93IHJlc29sdmVCYXNlc1Byb3BlcnR5IHdvcmtzXHJcblx0XHRcclxuXHRcdC8vIEhpZGUgbWlzc2luZyBwcm9wZXJ0aWVzIGlmIHRvZ2dsZSBlbmFibGVkIChyZXNvbHZlZFZhbHVlIGlzIG51bGwgZm9yIG1pc3NpbmcgcHJvcGVydGllcylcclxuXHRcdGlmIChyZXNvbHZlZFZhbHVlID09PSBudWxsICYmIHNob3VsZEhpZGVNaXNzaW5nUHJvcGVydGllcygpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gSGlkZSBlbXB0eSBwcm9wZXJ0aWVzIGlmIHRvZ2dsZSBlbmFibGVkIChyZXNvbHZlZFZhbHVlIGlzICcnIGZvciBlbXB0eSBwcm9wZXJ0aWVzKVxyXG5cdFx0aWYgKHJlc29sdmVkVmFsdWUgPT09IFwiXCIgJiYgc2hvdWxkSGlkZUVtcHR5UHJvcGVydGllcygpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiBubyB2YWx1ZSBhbmQgbGFiZWxzIGFyZSBoaWRkZW4sIHJlbmRlciBub3RoaW5nXHJcblx0XHRpZiAoIXJlc29sdmVkVmFsdWUgJiYgc2V0dGluZ3MucHJvcGVydHlMYWJlbHMgPT09ICdoaWRlJykge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRWFybHkgcmV0dXJuIGZvciBlbXB0eSBzcGVjaWFsIHByb3BlcnRpZXMgd2hlbiBsYWJlbHMgYXJlIGhpZGRlblxyXG5cdFx0aWYgKHNldHRpbmdzLnByb3BlcnR5TGFiZWxzID09PSAnaGlkZScpIHtcclxuXHRcdFx0aWYgKChwcm9wZXJ0eU5hbWUgPT09ICd0YWdzJyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdub3RlLnRhZ3MnKSAmJiBjYXJkLnlhbWxUYWdzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoKHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUudGFncycgfHwgcHJvcGVydHlOYW1lID09PSAnZmlsZSB0YWdzJykgJiYgY2FyZC50YWdzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEdldCBwcm9wZXJ0eSBsYWJlbCBmcm9tIEJhc2VzIGlmIGF2YWlsYWJsZVxyXG5cdFx0Y29uc3QgYmFzZXNDb25maWcgPSB0aGlzLmdldEJhc2VzQ29uZmlnID8gdGhpcy5nZXRCYXNlc0NvbmZpZygpIDogdW5kZWZpbmVkO1xyXG5cdFx0Y29uc3QgYmFzZXNDb250cm9sbGVyID0gdGhpcy5nZXRCYXNlc0NvbnRyb2xsZXIgPyB0aGlzLmdldEJhc2VzQ29udHJvbGxlcigpIDogdW5kZWZpbmVkO1xyXG5cdFx0Y29uc3QgcHJvcGVydHlMYWJlbCA9IGdldFByb3BlcnR5TGFiZWwocHJvcGVydHlOYW1lLCB0aGlzLmFwcCwgYmFzZXNDb25maWcsIGJhc2VzQ29udHJvbGxlcik7XHJcblx0XHQvLyBDaGVjayBpZiB3ZSBnb3QgYSBjdXN0b20gZGlzcGxheSBuYW1lIChkaWZmZXJlbnQgZnJvbSBwcm9wZXJ0eSBuYW1lKVxyXG5cdFx0Y29uc3QgaXNDdXN0b21MYWJlbCA9IHByb3BlcnR5TGFiZWwudG9Mb3dlckNhc2UoKSAhPT0gcHJvcGVydHlOYW1lLnRvTG93ZXJDYXNlKCk7XHJcblxyXG5cdFx0Ly8gUmVuZGVyIGxhYmVsIGlmIHByb3BlcnR5IGxhYmVscyBhcmUgZW5hYmxlZFxyXG5cdFx0aWYgKHNldHRpbmdzLnByb3BlcnR5TGFiZWxzID09PSAnYWJvdmUnKSB7XHJcblx0XHRcdGNvbnN0IGxhYmVsRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KCdwcm9wZXJ0eS1sYWJlbCcpO1xyXG5cdFx0XHRpZiAoaXNDdXN0b21MYWJlbCkge1xyXG5cdFx0XHRcdGxhYmVsRWwuYWRkQ2xhc3MoJ3Byb3BlcnR5LWxhYmVsLWN1c3RvbScpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGxhYmVsRWwudGV4dENvbnRlbnQgPSBwcm9wZXJ0eUxhYmVsO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFVuaXZlcnNhbCB3cmFwcGVyIGZvciBhbGwgY29udGVudCB0eXBlc1xyXG5cdFx0Y29uc3QgbWV0YUNvbnRlbnQgPSBjb250YWluZXIuY3JlYXRlRGl2KCdwcm9wZXJ0eS1jb250ZW50Jyk7XHJcblx0XHRcclxuXHRcdC8vIEFkZCBjbGFzcyBmb3IgaW5saW5lIGxhYmVscyB0byBlbmFibGUgcHJvcGVyIENTUyBzdHlsaW5nXHJcblx0XHRpZiAoc2V0dGluZ3MucHJvcGVydHlMYWJlbHMgPT09ICdpbmxpbmUnKSB7XHJcblx0XHRcdG1ldGFDb250ZW50LmFkZENsYXNzKCdwcm9wZXJ0eS1jb250ZW50LWlubGluZScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFkZCBpbmxpbmUgbGFiZWwgaWYgZW5hYmxlZCAoaW5zaWRlIG1ldGFDb250ZW50KVxyXG5cdFx0aWYgKHNldHRpbmdzLnByb3BlcnR5TGFiZWxzID09PSAnaW5saW5lJykge1xyXG5cdFx0XHRjb25zdCBsYWJlbFNwYW4gPSBtZXRhQ29udGVudC5jcmVhdGVTcGFuKCdwcm9wZXJ0eS1sYWJlbC1pbmxpbmUnKTtcclxuXHRcdFx0bGFiZWxTcGFuLnRleHRDb250ZW50ID0gcHJvcGVydHlMYWJlbCArICc6ICc7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgbm8gdmFsdWUgYnV0IGxhYmVscyBhcmUgZW5hYmxlZCwgc2hvdyBwbGFjZWhvbGRlclxyXG5cdFx0aWYgKCFyZXNvbHZlZFZhbHVlKSB7XHJcblx0XHRcdGNvbnN0IGVtcHR5TWFya2VyID0gbWV0YUNvbnRlbnQuY3JlYXRlU3BhbigncHJvcGVydHktZW1wdHktbWFya2VyJyk7XHJcblx0XHRcdGVtcHR5TWFya2VyLnRleHRDb250ZW50ID0gZ2V0RW1wdHlWYWx1ZU1hcmtlcigpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSGFuZGxlIHRpbWVzdGFtcCBwcm9wZXJ0aWVzIC0gcmVuZGVyIGFzLWlzIHdpdGhvdXQgU3R5bGUgU2V0dGluZ3MgbG9naWNcclxuXHRcdGNvbnN0IGlzS25vd25UaW1lc3RhbXBQcm9wZXJ0eSA9IHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUubXRpbWUnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUuY3RpbWUnIHx8XHJcblx0XHRcdHByb3BlcnR5TmFtZSA9PT0gJ21vZGlmaWVkIHRpbWUnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ2NyZWF0ZWQgdGltZSc7XHJcblxyXG5cdFx0aWYgKGlzS25vd25UaW1lc3RhbXBQcm9wZXJ0eSkge1xyXG5cdFx0XHRjb25zdCB0aW1lc3RhbXBXcmFwcGVyID0gbWV0YUNvbnRlbnQuY3JlYXRlU3BhbigpO1xyXG5cdFx0XHR0aW1lc3RhbXBXcmFwcGVyLmFwcGVuZFRleHQocmVzb2x2ZWRWYWx1ZSk7XHJcblx0XHR9IGVsc2UgaWYgKChwcm9wZXJ0eU5hbWUgPT09ICd0YWdzJyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdub3RlLnRhZ3MnKSAmJiBjYXJkLnlhbWxUYWdzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Ly8gWUFNTCB0YWdzIG9ubHlcclxuXHRcdFx0Y29uc3QgdGFnc1dyYXBwZXIgPSBtZXRhQ29udGVudC5jcmVhdGVEaXYoJ3RhZ3Mtd3JhcHBlcicpO1xyXG5cdFx0XHRjb25zdCB0YWdTdHlsZSA9IGdldFRhZ1N0eWxlKCk7XHJcblx0XHRcdGlmICh0YWdTdHlsZSAhPT0gJ3BsYWluJykge1xyXG5cdFx0XHRcdHRhZ3NXcmFwcGVyLmFkZENsYXNzKGB0YWctc3R5bGUtJHt0YWdTdHlsZX1gKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Y2FyZC55YW1sVGFncy5mb3JFYWNoKHRhZyA9PiB7XHJcblx0XHRcdFx0Y29uc3QgdGFnRWwgPSB0YWdzV3JhcHBlci5jcmVhdGVFbCgnYScsIHtcclxuXHRcdFx0XHRcdGNsczogJ3RhZycsXHJcblx0XHRcdFx0XHR0ZXh0OiBzaG93VGFnSGFzaFByZWZpeCgpID8gYCMke3RhZ31gIDogdGFnLFxyXG5cdFx0XHRcdFx0aHJlZjogJyMnXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0dGFnRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0Y29uc3Qgc2VhcmNoUGx1Z2luID0gKHRoaXMuYXBwIGFzIHsgaW50ZXJuYWxQbHVnaW5zPzogeyBwbHVnaW5zPzogUmVjb3JkPHN0cmluZywgeyBpbnN0YW5jZT86IHsgb3Blbkdsb2JhbFNlYXJjaD86IChxdWVyeTogc3RyaW5nKSA9PiB2b2lkIH0gfT4gfSB9KS5pbnRlcm5hbFBsdWdpbnM/LnBsdWdpbnM/LltcImdsb2JhbC1zZWFyY2hcIl07XHJcblx0XHRcdFx0XHRpZiAoc2VhcmNoUGx1Z2luPy5pbnN0YW5jZT8ub3Blbkdsb2JhbFNlYXJjaCkge1xyXG5cdFx0XHRcdFx0XHRzZWFyY2hQbHVnaW4uaW5zdGFuY2Uub3Blbkdsb2JhbFNlYXJjaChcInRhZzpcIiArIHRhZyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIGlmICgocHJvcGVydHlOYW1lID09PSAnZmlsZS50YWdzJyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdmaWxlIHRhZ3MnKSAmJiBjYXJkLnRhZ3MubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyB0YWdzIGluIFlBTUwgKyBub3RlIGJvZHlcclxuXHRcdFx0Y29uc3QgdGFnc1dyYXBwZXIgPSBtZXRhQ29udGVudC5jcmVhdGVEaXYoJ3RhZ3Mtd3JhcHBlcicpO1xyXG5cdFx0XHRjb25zdCB0YWdTdHlsZSA9IGdldFRhZ1N0eWxlKCk7XHJcblx0XHRcdGlmICh0YWdTdHlsZSAhPT0gJ3BsYWluJykge1xyXG5cdFx0XHRcdHRhZ3NXcmFwcGVyLmFkZENsYXNzKGB0YWctc3R5bGUtJHt0YWdTdHlsZX1gKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Y2FyZC50YWdzLmZvckVhY2godGFnID0+IHtcclxuXHRcdFx0XHRjb25zdCB0YWdFbCA9IHRhZ3NXcmFwcGVyLmNyZWF0ZUVsKCdhJywge1xyXG5cdFx0XHRcdFx0Y2xzOiAndGFnJyxcclxuXHRcdFx0XHRcdHRleHQ6IHNob3dUYWdIYXNoUHJlZml4KCkgPyBgIyR7dGFnfWAgOiB0YWcsXHJcblx0XHRcdFx0XHRocmVmOiAnIydcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHR0YWdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRjb25zdCBzZWFyY2hQbHVnaW4gPSAodGhpcy5hcHAgYXMgeyBpbnRlcm5hbFBsdWdpbnM/OiB7IHBsdWdpbnM/OiBSZWNvcmQ8c3RyaW5nLCB7IGluc3RhbmNlPzogeyBvcGVuR2xvYmFsU2VhcmNoPzogKHF1ZXJ5OiBzdHJpbmcpID0+IHZvaWQgfSB9PiB9IH0pLmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8uW1wiZ2xvYmFsLXNlYXJjaFwiXTtcclxuXHRcdFx0XHRcdGlmIChzZWFyY2hQbHVnaW4/Lmluc3RhbmNlPy5vcGVuR2xvYmFsU2VhcmNoKSB7XHJcblx0XHRcdFx0XHRcdHNlYXJjaFBsdWdpbi5pbnN0YW5jZS5vcGVuR2xvYmFsU2VhcmNoKFwidGFnOlwiICsgdGFnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIGEgY2hlY2tib3ggcHJvcGVydHlcclxuXHRcdFx0Ly8gR3VhcmQ6IGVuc3VyZSBhcHAgYW5kIG1ldGFkYXRhQ2FjaGUgZXhpc3RcclxuXHRcdFx0aWYgKCF0aGlzLmFwcCB8fCAhdGhpcy5hcHAubWV0YWRhdGFDYWNoZSkge1xyXG5cdFx0XHRcdC8vIEZhbGxiYWNrIHRvIHJlZ3VsYXIgcHJvcGVydHkgcmVuZGVyaW5nXHJcblx0XHRcdFx0Y29uc3QgdGV4dFdyYXBwZXIgPSBtZXRhQ29udGVudC5jcmVhdGVEaXYoJ3RleHQtd3JhcHBlcicpO1xyXG5cdFx0XHRcdHRoaXMucmVuZGVyUHJvcGVydHlWYWx1ZVdpdGhMaW5rcyh0ZXh0V3JhcHBlciwgcmVzb2x2ZWRWYWx1ZSwgY2FyZC5wYXRoLCBwcm9wZXJ0eU5hbWUpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gVHJ5IHRvIGdldCBwcm9wZXJ0eSBpbmZvIC0gd3JhcCBpbiB0cnktY2F0Y2ggYXMgZ2V0QWxsUHJvcGVydHlJbmZvcyBtaWdodCBmYWlsXHJcblx0XHRcdC8vIFRoaXMgaXMgb3B0aW9uYWwgLSB3ZSBjYW4gZGV0ZWN0IGNoZWNrYm94ZXMgZnJvbSBlbnRyeSB2YWx1ZSBhbG9uZVxyXG5cdFx0XHRsZXQgcHJvcEluZm86IHsgd2lkZ2V0Pzogc3RyaW5nIH0gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y29uc3QgbWV0YWRhdGFDYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcclxuXHRcdFx0XHRjb25zdCBnZXRBbGxQcm9wZXJ0eUluZm9zID0gbWV0YWRhdGFDYWNoZS5nZXRBbGxQcm9wZXJ0eUluZm9zIGFzICgoKSA9PiBSZWNvcmQ8c3RyaW5nLCB7IHdpZGdldD86IHN0cmluZyB9PikgfCB1bmRlZmluZWQ7XHJcblx0XHRcdFx0aWYgKHR5cGVvZiBnZXRBbGxQcm9wZXJ0eUluZm9zID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHRjb25zdCBwcm9wZXJ0eUluZm9zID0gZ2V0QWxsUHJvcGVydHlJbmZvcygpIGFzIFJlY29yZDxzdHJpbmcsIHsgd2lkZ2V0Pzogc3RyaW5nIH0+O1xyXG5cdFx0XHRcdFx0cHJvcEluZm8gPSBwcm9wZXJ0eUluZm9zW3Byb3BlcnR5TmFtZS50b0xvd2VyQ2FzZSgpXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdC8vIFNpbGVudGx5IGZhaWwgLSBnZXRBbGxQcm9wZXJ0eUluZm9zIG1heSBub3QgYmUgYXZhaWxhYmxlIG9yIG1heSBmYWlsXHJcblx0XHRcdFx0Ly8gV2UgY2FuIHN0aWxsIGRldGVjdCBjaGVja2JveGVzIGZyb20gZW50cnkgdmFsdWVcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gVHJ5IHRvIGdldCB2YWx1ZSBmcm9tIGVudHJ5IHRvIGNoZWNrIGlmIGl0J3MgYm9vbGVhblxyXG5cdFx0XHQvLyBHdWFyZDogZW5zdXJlIGVudHJ5IGV4aXN0cyBhbmQgaGFzIGdldFZhbHVlIG1ldGhvZFxyXG5cdFx0XHRsZXQgZW50cnlWYWx1ZTogeyBkYXRhPzogdW5rbm93biB9IHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0aWYgKGVudHJ5ICYmIHR5cGVvZiBlbnRyeS5nZXRWYWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdFx0ZW50cnlWYWx1ZSA9IGVudHJ5LmdldFZhbHVlKHByb3BlcnR5TmFtZSBhcyBgbm90ZS4ke3N0cmluZ31gIHwgYGZvcm11bGEuJHtzdHJpbmd9YCB8IGBmaWxlLiR7c3RyaW5nfWApIGFzIHsgZGF0YT86IHVua25vd24gfSB8IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBTaWxlbnRseSBmYWlsIC0gZW50cnkgbWlnaHQgbm90IGhhdmUgdGhpcyBwcm9wZXJ0eVxyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IGlzQ2hlY2tib3ggPSBwcm9wSW5mbz8ud2lkZ2V0ID09PSAnY2hlY2tib3gnIHx8IFxyXG5cdFx0XHRcdChlbnRyeVZhbHVlICYmICdkYXRhJyBpbiBlbnRyeVZhbHVlICYmIHR5cGVvZiBlbnRyeVZhbHVlLmRhdGEgPT09ICdib29sZWFuJyk7XHJcblxyXG5cdFx0XHRpZiAoaXNDaGVja2JveCAmJiBvblByb3BlcnR5VG9nZ2xlKSB7XHJcblx0XHRcdFx0Ly8gUmVuZGVyIGFzIG5hdGl2ZSBPYnNpZGlhbiBjaGVja2JveCAtIHNpbXBsZSBpbnB1dCBjaGVja2JveFxyXG5cdFx0XHRcdGNvbnN0IGNoZWNrYm94ID0gbWV0YUNvbnRlbnQuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xyXG5cdFx0XHRcdGNoZWNrYm94LmNoZWNrZWQgPSBlbnRyeVZhbHVlICYmICdkYXRhJyBpbiBlbnRyeVZhbHVlID8gQm9vbGVhbihlbnRyeVZhbHVlLmRhdGEpIDogZmFsc2U7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gVXNlIHRoZSBwcm9wZXJ0eSBsYWJlbCAod2hpY2ggdXNlcyBnZXREaXNwbGF5TmFtZSkgaW5zdGVhZCBvZiByYXcgcHJvcGVydHkgbmFtZVxyXG5cdFx0XHRcdG1ldGFDb250ZW50LmNyZWF0ZVNwYW4oeyB0ZXh0OiBwcm9wZXJ0eUxhYmVsIH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0Y29uc3QgY2hlY2tlZCA9IGNoZWNrYm94LmNoZWNrZWQ7XHJcblx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gU3RyaXAgXCJub3RlLlwiIHByZWZpeCBiZWZvcmUgdG9nZ2xpbmdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBjbGVhblByb3BlcnR5ID0gcHJvcGVydHlOYW1lLnN0YXJ0c1dpdGgoJ25vdGUuJykgPyBwcm9wZXJ0eU5hbWUuc3Vic3RyaW5nKDUpIDogcHJvcGVydHlOYW1lO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IG9uUHJvcGVydHlUb2dnbGUoY2FyZC5wYXRoLCBjbGVhblByb3BlcnR5LCBjaGVja2VkKTtcclxuXHRcdFx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gUmV2ZXJ0IGNoZWNrYm94IG9uIGVycm9yXHJcblx0XHRcdFx0XHRcdFx0Y2hlY2tib3guY2hlY2tlZCA9ICFjaGVja2VkO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gR2VuZXJpYyBwcm9wZXJ0eSAtIHBhcnNlIGFuZCByZW5kZXIgbGlua3NcclxuXHRcdFx0XHRjb25zdCB0ZXh0V3JhcHBlciA9IG1ldGFDb250ZW50LmNyZWF0ZURpdigndGV4dC13cmFwcGVyJyk7XHJcblx0XHRcdFx0dGhpcy5yZW5kZXJQcm9wZXJ0eVZhbHVlV2l0aExpbmtzKHRleHRXcmFwcGVyLCByZXNvbHZlZFZhbHVlLCBjYXJkLnBhdGgsIHByb3BlcnR5TmFtZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZW1vdmUgbWV0YUNvbnRlbnQgd3JhcHBlciBpZiBpdCBlbmRlZCB1cCBlbXB0eVxyXG5cdFx0aWYgKCFtZXRhQ29udGVudC50ZXh0Q29udGVudCB8fCBtZXRhQ29udGVudC50ZXh0Q29udGVudC50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdG1ldGFDb250ZW50LnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVuZGVycyBwcm9wZXJ0eSB2YWx1ZSB3aXRoIGNsaWNrYWJsZSBsaW5rc1xyXG5cdCAqIERldGVjdHMgd2lraWxpbmtzIFtbLi4uXV0sIG1hcmtkb3duIGxpbmtzIFsuLi5dKC4uLiksIGFuZCBVUkxzXHJcblx0ICogRm9yIGltYWdlIHByb3BlcnRpZXMsIGFsc28gbWFrZXMgZmlsZSBwYXRocyBjbGlja2FibGUgKGxpa2UgT2JzaWRpYW4gZG9lcylcclxuXHQgKi9cclxuXHRwcml2YXRlIHJlbmRlclByb3BlcnR5VmFsdWVXaXRoTGlua3MoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdmFsdWU6IHN0cmluZyB8IG51bGwsIHNvdXJjZVBhdGg6IHN0cmluZywgcHJvcGVydHlOYW1lPzogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRpZiAoIXZhbHVlKSB7XHJcblx0XHRcdGNvbnRhaW5lci5hcHBlbmRUZXh0KGdldEVtcHR5VmFsdWVNYXJrZXIoKSk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCB0cmltbWVkVmFsdWUgPSB2YWx1ZS50cmltKCk7XHJcblx0XHRcclxuXHRcdC8vIENoZWNrIGlmIGVudGlyZSB2YWx1ZSBpcyBhIFVSTCAoaHR0cC9odHRwcykgLSBtYWtlIGl0IGNsaWNrYWJsZVxyXG5cdFx0aWYgKCh0cmltbWVkVmFsdWUuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IHRyaW1tZWRWYWx1ZS5zdGFydHNXaXRoKCdodHRwczovLycpKSAmJiAhdHJpbW1lZFZhbHVlLmluY2x1ZGVzKCcgJykpIHtcclxuXHRcdFx0Y29uc3QgbGlua0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdhJywge1xyXG5cdFx0XHRcdGNsczogJ2V4dGVybmFsLWxpbmsnLFxyXG5cdFx0XHRcdGhyZWY6IHRyaW1tZWRWYWx1ZVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0bGlua0VsLnRleHRDb250ZW50ID0gdHJpbW1lZFZhbHVlO1xyXG5cdFx0XHRsaW5rRWwuc2V0QXR0cigndGFyZ2V0JywgJ19ibGFuaycpO1xyXG5cdFx0XHRsaW5rRWwuc2V0QXR0cigncmVsJywgJ25vb3BlbmVyJyk7XHJcblx0XHRcdGxpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gRm9yIGltYWdlIHByb3BlcnRpZXMsIG1ha2UgZmlsZSBwYXRocyBjbGlja2FibGUgKGxpa2UgT2JzaWRpYW4gZG9lcyBpbiBwcm9wZXJ0eSBlZGl0b3IpXHJcblx0XHRjb25zdCBpc0ltYWdlUHJvcGVydHkgPSBwcm9wZXJ0eU5hbWUgJiYgKFxyXG5cdFx0XHRwcm9wZXJ0eU5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnaW1hZ2UnKSB8fCBcclxuXHRcdFx0cHJvcGVydHlOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdjb3ZlcicgfHxcclxuXHRcdFx0cHJvcGVydHlOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0aHVtYm5haWwnXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0XHRpZiAoaXNJbWFnZVByb3BlcnR5ICYmICF0cmltbWVkVmFsdWUuaW5jbHVkZXMoJyAnKSAmJiBcclxuXHRcdFx0IXRyaW1tZWRWYWx1ZS5zdGFydHNXaXRoKCdodHRwOi8vJykgJiYgXHJcblx0XHRcdCF0cmltbWVkVmFsdWUuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSAmJlxyXG5cdFx0XHQodHJpbW1lZFZhbHVlLmluY2x1ZGVzKCcvJykgfHwgdHJpbW1lZFZhbHVlLmluY2x1ZGVzKCdcXFxcJykgfHwgXHJcblx0XHRcdCB0cmltbWVkVmFsdWUubWF0Y2goL1xcLihwbmd8anBnfGpwZWd8Z2lmfHN2Z3x3ZWJwfG1wNHxtb3Z8YXZpKSQvaSkpKSB7XHJcblx0XHRcdC8vIE1ha2UgaXQgY2xpY2thYmxlIGFzIGFuIGludGVybmFsIGxpbmsgKGxpa2UgT2JzaWRpYW4gZG9lcyBmb3IgaW1hZ2UgcHJvcGVydGllcylcclxuXHRcdFx0Y29uc3QgbGlua0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdhJywge1xyXG5cdFx0XHRcdGNsczogJ2ludGVybmFsLWxpbmsnLFxyXG5cdFx0XHRcdGhyZWY6IHRyaW1tZWRWYWx1ZVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0bGlua0VsLnRleHRDb250ZW50ID0gdHJpbW1lZFZhbHVlO1xyXG5cdFx0XHRsaW5rRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZTogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGNvbnN0IG5ld0xlYWYgPSBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5O1xyXG5cdFx0XHRcdHZvaWQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dCh0cmltbWVkVmFsdWUsIHNvdXJjZVBhdGgsIG5ld0xlYWYpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBQYXJzZSBmb3Igd2lraWxpbmtzIFtbLi4uXV0gYW5kIG1hcmtkb3duIGxpbmtzIFsuLi5dKC4uLilcclxuXHRcdGNvbnN0IHdpa2lsaW5rUmVnZXggPSAvXFxbXFxbKFteXFxdXSspXFxdXFxdL2c7XHJcblx0XHRjb25zdCBtYXJrZG93bkxpbmtSZWdleCA9IC9cXFsoW15cXF1dKylcXF1cXCgoW14pXSspXFwpL2c7XHJcblx0XHRcclxuXHRcdGNvbnN0IG1hdGNoZXM6IEFycmF5PHsgaW5kZXg6IG51bWJlcjsgdHlwZTogJ3dpa2lsaW5rJyB8ICdtYXJrZG93bic7IG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5IH0+ID0gW107XHJcblx0XHRcclxuXHRcdC8vIEZpbmQgd2lraWxpbmtzXHJcblx0XHRmb3IgKGNvbnN0IG0gb2YgdmFsdWUubWF0Y2hBbGwod2lraWxpbmtSZWdleCkpIHtcclxuXHRcdFx0aWYgKG0uaW5kZXggIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdG1hdGNoZXMucHVzaCh7IGluZGV4OiBtLmluZGV4LCB0eXBlOiAnd2lraWxpbmsnLCBtYXRjaDogbSB9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBGaW5kIG1hcmtkb3duIGxpbmtzXHJcblx0XHRmb3IgKGNvbnN0IG0gb2YgdmFsdWUubWF0Y2hBbGwobWFya2Rvd25MaW5rUmVnZXgpKSB7XHJcblx0XHRcdGlmIChtLmluZGV4ICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRtYXRjaGVzLnB1c2goeyBpbmRleDogbS5pbmRleCwgdHlwZTogJ21hcmtkb3duJywgbWF0Y2g6IG0gfSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gU29ydCBieSBpbmRleFxyXG5cdFx0bWF0Y2hlcy5zb3J0KChhLCBiKSA9PiBhLmluZGV4IC0gYi5pbmRleCk7XHJcblx0XHRcclxuXHRcdGxldCBsYXN0SW5kZXggPSAwO1xyXG5cdFx0XHJcblx0XHQvLyBSZW5kZXIgdGV4dCBhbmQgbGlua3NcclxuXHRcdGZvciAoY29uc3QgeyBpbmRleCwgdHlwZSwgbWF0Y2ggfSBvZiBtYXRjaGVzKSB7XHJcblx0XHRcdC8vIEFkZCB0ZXh0IGJlZm9yZSB0aGUgbGlua1xyXG5cdFx0XHRpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcclxuXHRcdFx0XHRjb250YWluZXIuYXBwZW5kVGV4dCh2YWx1ZS5zdWJzdHJpbmcobGFzdEluZGV4LCBpbmRleCkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAodHlwZSA9PT0gJ3dpa2lsaW5rJykge1xyXG5cdFx0XHRcdGNvbnN0IGxpbmtDb250ZW50ID0gbWF0Y2hbMV07XHJcblx0XHRcdFx0Y29uc3QgcGFydHMgPSBsaW5rQ29udGVudC5zcGxpdCgnfCcpO1xyXG5cdFx0XHRcdGNvbnN0IGxpbmtQYXRoID0gcGFydHNbMF0udHJpbSgpO1xyXG5cdFx0XHRcdGNvbnN0IGRpc3BsYXlUZXh0ID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzWzFdLnRyaW0oKSA6IGxpbmtQYXRoO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnN0IGxpbmtFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYScsIHtcclxuXHRcdFx0XHRcdGNsczogJ2ludGVybmFsLWxpbmsnLFxyXG5cdFx0XHRcdFx0aHJlZjogbGlua1BhdGhcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRsaW5rRWwudGV4dENvbnRlbnQgPSBkaXNwbGF5VGV4dDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRsaW5rRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZTogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGNvbnN0IG5ld0xlYWYgPSBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5O1xyXG5cdFx0XHRcdFx0dm9pZCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGxpbmtQYXRoLCBzb3VyY2VQYXRoLCBuZXdMZWFmKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSAnbWFya2Rvd24nKSB7XHJcblx0XHRcdFx0Y29uc3QgbGlua1RleHQgPSBtYXRjaFsxXTtcclxuXHRcdFx0XHRjb25zdCBsaW5rVXJsID0gbWF0Y2hbMl07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGxpbmtVcmwuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IGxpbmtVcmwuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSkge1xyXG5cdFx0XHRcdFx0Ly8gRXh0ZXJuYWwgbGlua1xyXG5cdFx0XHRcdFx0Y29uc3QgbGlua0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdhJywge1xyXG5cdFx0XHRcdFx0XHRjbHM6ICdleHRlcm5hbC1saW5rJyxcclxuXHRcdFx0XHRcdFx0aHJlZjogbGlua1VybFxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRsaW5rRWwudGV4dENvbnRlbnQgPSBsaW5rVGV4dDtcclxuXHRcdFx0XHRcdGxpbmtFbC5zZXRBdHRyKCd0YXJnZXQnLCAnX2JsYW5rJyk7XHJcblx0XHRcdFx0XHRsaW5rRWwuc2V0QXR0cigncmVsJywgJ25vb3BlbmVyJyk7XHJcblx0XHRcdFx0XHRsaW5rRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIEludGVybmFsIGxpbmsgKGZpbGUgcGF0aCBvciB3aWtpbGluayBpbiBtYXJrZG93biBmb3JtYXQpXHJcblx0XHRcdFx0XHRjb25zdCBsaW5rRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2EnLCB7XHJcblx0XHRcdFx0XHRcdGNsczogJ2ludGVybmFsLWxpbmsnLFxyXG5cdFx0XHRcdFx0XHRocmVmOiBsaW5rVXJsXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdGxpbmtFbC50ZXh0Q29udGVudCA9IGxpbmtUZXh0O1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRsaW5rRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZTogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG5ld0xlYWYgPSBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5O1xyXG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQobGlua1VybCwgc291cmNlUGF0aCwgbmV3TGVhZik7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGxhc3RJbmRleCA9IGluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBBZGQgcmVtYWluaW5nIHRleHRcclxuXHRcdGlmIChsYXN0SW5kZXggPCB2YWx1ZS5sZW5ndGgpIHtcclxuXHRcdFx0Y29udGFpbmVyLmFwcGVuZFRleHQodmFsdWUuc3Vic3RyaW5nKGxhc3RJbmRleCkpO1xyXG5cdFx0fSBlbHNlIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHQvLyBObyBsaW5rcyBmb3VuZCwganVzdCBhZGQgdGhlIHRleHQgYXMgcGxhaW4gdGV4dFxyXG5cdFx0XHRjb250YWluZXIuYXBwZW5kVGV4dCh2YWx1ZSk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxuICogQnVsayBPcGVyYXRpb25zIFRvb2xiYXJcbiAqIFRvb2xiYXIgdGhhdCBhcHBlYXJzIHdoZW4gaXRlbXMgYXJlIHNlbGVjdGVkXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgQmFzZXNDTVNQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgdHlwZSB7IENNU1NldHRpbmdzIH0gZnJvbSAnLi4vc2hhcmVkL2RhdGEtdHJhbnNmb3JtJztcbmltcG9ydCB7IFRvb2xiYXJBY3Rpb25zIH0gZnJvbSAnLi4vdXRpbHMvdG9vbGJhci1hY3Rpb25zJztcblxuZXhwb3J0IGNsYXNzIEJ1bGtUb29sYmFyIHtcblx0cHJpdmF0ZSB0b29sYmFyRWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgY291bnRFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBzZWxlY3RBbGxDYWxsYmFjaz86ICgpID0+IHZvaWQ7XG5cdHByaXZhdGUgcmVzaXplT2JzZXJ2ZXI6IFJlc2l6ZU9ic2VydmVyIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgc2V0dGluZ3M/OiBDTVNTZXR0aW5ncztcblx0cHJpdmF0ZSBhY3Rpb25zOiBUb29sYmFyQWN0aW9ucztcblx0cHJpdmF0ZSB0aW1lb3V0SWRzOiBudW1iZXJbXSA9IFtdO1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdHByaXZhdGUgYXBwOiBBcHAsXG5cdFx0cHJpdmF0ZSBwbHVnaW46IEJhc2VzQ01TUGx1Z2luLFxuXHRcdHByaXZhdGUgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcblx0XHRwcml2YXRlIGdldFNlbGVjdGVkRmlsZXM6ICgpID0+IHN0cmluZ1tdLFxuXHRcdHByaXZhdGUgY2xlYXJTZWxlY3Rpb246ICgpID0+IHZvaWQsXG5cdFx0cHJpdmF0ZSByZWZyZXNoVmlldzogKCkgPT4gdm9pZCxcblx0XHRzZWxlY3RBbGxDYWxsYmFjaz86ICgpID0+IHZvaWQsXG5cdFx0c2V0dGluZ3M/OiBDTVNTZXR0aW5nc1xuXHQpIHtcblx0XHR0aGlzLnNlbGVjdEFsbENhbGxiYWNrID0gc2VsZWN0QWxsQ2FsbGJhY2s7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuXHRcdHRoaXMuYWN0aW9ucyA9IG5ldyBUb29sYmFyQWN0aW9ucyhcblx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0dGhpcy5wbHVnaW4sXG5cdFx0XHR0aGlzLmdldFNlbGVjdGVkRmlsZXMsXG5cdFx0XHR0aGlzLmNsZWFyU2VsZWN0aW9uLFxuXHRcdFx0dGhpcy5yZWZyZXNoVmlldyxcblx0XHRcdCgpID0+IHRoaXMuc2hvdygpXG5cdFx0KTtcblx0XHR0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgc2V0dGluZ3MgKGNhbGxlZCB3aGVuIHZpZXcgc2V0dGluZ3MgY2hhbmdlKVxuXHQgKi9cblx0dXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IENNU1NldHRpbmdzKTogdm9pZCB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0b29sYmFyIGFjdGlvbnMgKGZvciB1c2UgaW4gY29udGV4dCBtZW51cylcblx0ICovXG5cdGdldEFjdGlvbnMoKTogVG9vbGJhckFjdGlvbnMge1xuXHRcdHJldHVybiB0aGlzLmFjdGlvbnM7XG5cdH1cblxuXHRwcml2YXRlIGNyZWF0ZVRvb2xiYXIoKTogdm9pZCB7XG5cdFx0Ly8gQ3JlYXRlIHRvb2xiYXIgZWxlbWVudCBtYXRjaGluZyBCYXNlcyBzdHJ1Y3R1cmVcblx0XHR0aGlzLnRvb2xiYXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHRoaXMudG9vbGJhckVsLmNsYXNzTmFtZSA9ICdiYXNlcy10b29sYmFyIGJhc2VzLWNtcy1idWxrLXRvb2xiYXIgYmFzZXMtY21zLWJ1bGstdG9vbGJhci1oaWRkZW4nO1xuXHRcdC8vIFN0b3JlIHJlZmVyZW5jZSB0byB0aGlzIGluc3RhbmNlIG9uIHRoZSBlbGVtZW50IGZvciBjbGVhbnVwIGNoZWNrc1xuXHRcdCh0aGlzLnRvb2xiYXJFbCBhcyB1bmtub3duIGFzIHsgX19idWxrVG9vbGJhckluc3RhbmNlPzogQnVsa1Rvb2xiYXIgfSkuX19idWxrVG9vbGJhckluc3RhbmNlID0gdGhpcztcblxuXHRcdC8vIENyZWF0ZSB0aGUgdG9vbGJhciBjb250ZW50XG5cdFx0dGhpcy5jcmVhdGVUb29sYmFyQ29udGVudCgpO1xuXG5cdFx0Ly8gVHJ5IHRvIGZpbmQgYW5kIHBvc2l0aW9uIHRoZSB0b29sYmFyIC0gdXNlIGEgc21hbGwgZGVsYXkgdG8gZW5zdXJlIERPTSBpcyByZWFkeVxuXHRcdHRoaXMucG9zaXRpb25Ub29sYmFyKCk7XG5cdFx0XG5cdFx0Ly8gQWxzbyB0cnkgcG9zaXRpb25pbmcgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpbiBjYXNlIERPTSBpc24ndCByZWFkeSB5ZXRcblx0XHRjb25zdCB0aW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLnBvc2l0aW9uVG9vbGJhcigpLCAxMDApO1xuXHRcdHRoaXMudGltZW91dElkcy5wdXNoKHRpbWVvdXRJZCk7XG5cdH1cblxuXHRwcml2YXRlIHBvc2l0aW9uVG9vbGJhcigpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMudG9vbGJhckVsKSByZXR1cm47XG5cblx0XHQvLyBGaW5kIHRoZSBiYXNlcy1oZWFkZXIgLSBpdCBzaG91bGQgYmUgYSBzaWJsaW5nIG9mIG91ciBjb250YWluZXJcblx0XHQvLyBUaGUgc3RydWN0dXJlIHNob3VsZCBiZTogYmFzZXMtaGVhZGVyLCB0aGVuIGJ1bGsgdG9vbGJhciwgdGhlbiBiYXNlcy12aWV3IGJhc2VzLWNtcyBiYXNlcy1jbXMtY29udGFpbmVyXG5cdFx0bGV0IGJhc2VzSGVhZGVyID0gdGhpcy5jb250YWluZXIuY2xvc2VzdCgnLmJhc2VzLWhlYWRlcicpO1xuXHRcdGlmICghYmFzZXNIZWFkZXIpIHtcblx0XHRcdC8vIFRyeSBmaW5kaW5nIGl0IGluIHRoZSBwYXJlbnQgaGllcmFyY2h5XG5cdFx0XHRsZXQgcGFyZW50ID0gdGhpcy5jb250YWluZXIucGFyZW50RWxlbWVudDtcblx0XHRcdHdoaWxlIChwYXJlbnQgJiYgIWJhc2VzSGVhZGVyKSB7XG5cdFx0XHRcdGlmIChwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiYXNlcy1oZWFkZXInKSkge1xuXHRcdFx0XHRcdGJhc2VzSGVhZGVyID0gcGFyZW50O1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIWJhc2VzSGVhZGVyKSB7XG5cdFx0XHQvLyBUcnkgcXVlcnlpbmcgZnJvbSBkb2N1bWVudCAtIGxvb2sgZm9yIG9uZSB0aGF0IGNvbnRhaW5zIG91ciBjb250YWluZXJcblx0XHRcdGNvbnN0IGFsbEhlYWRlcnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXNlcy1oZWFkZXInKSk7XG5cdFx0XHRmb3IgKGNvbnN0IGhlYWRlciBvZiBhbGxIZWFkZXJzKSB7XG5cdFx0XHRcdGlmIChoZWFkZXIuY29udGFpbnModGhpcy5jb250YWluZXIpKSB7XG5cdFx0XHRcdFx0YmFzZXNIZWFkZXIgPSBoZWFkZXI7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Ly8gRmluZCB0aGUgdmlldy1jb250ZW50IGNvbnRhaW5lciB0aGF0IHNob3VsZCBjb250YWluIGJvdGggYmFzZXMtaGVhZGVyIGFuZCBvdXIgY29udGFpbmVyXG5cdFx0Ly8gVGhlIHN0cnVjdHVyZSBzaG91bGQgYmU6IHZpZXctY29udGVudCA+IGJhc2VzLWhlYWRlciA+IGJhc2VzLXRvb2xiYXIsIHRoZW4gb3VyIGJ1bGsgdG9vbGJhciwgdGhlbiBiYXNlcy12aWV3XG5cdFx0Y29uc3Qgdmlld0NvbnRlbnQgPSB0aGlzLmNvbnRhaW5lci5jbG9zZXN0KCcudmlldy1jb250ZW50Jyk7XG5cdFx0XG5cdFx0aWYgKHZpZXdDb250ZW50KSB7XG5cdFx0XHQvLyBQb3NpdGlvbiB0b29sYmFyIGFzIGEgc2libGluZyBvZiBiYXNlcy1oZWFkZXIsIHJpZ2h0IGFmdGVyIGl0LCBiZWZvcmUgYmFzZXMtdmlldyBjb250YWluZXJcblx0XHRcdC8vIEZpbmQgd2hlcmUgdG8gaW5zZXJ0IC0gc2hvdWxkIGJlIGFmdGVyIGJhc2VzLWhlYWRlciwgYmVmb3JlIG91ciBjb250YWluZXJcblx0XHRcdGlmICh0aGlzLnRvb2xiYXJFbC5wYXJlbnRFbGVtZW50ICE9PSB2aWV3Q29udGVudCkge1xuXHRcdFx0XHRpZiAodGhpcy50b29sYmFyRWwucGFyZW50RWxlbWVudCkge1xuXHRcdFx0XHRcdHRoaXMudG9vbGJhckVsLnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIEluc2VydCBhZnRlciBiYXNlcy1oZWFkZXIsIGJlZm9yZSB0aGUgYmFzZXMtdmlldyBjb250YWluZXJcblx0XHRcdFx0dmlld0NvbnRlbnQuaW5zZXJ0QmVmb3JlKHRoaXMudG9vbGJhckVsLCB0aGlzLmNvbnRhaW5lcik7XG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMudG9vbGJhckVsLm5leHRTaWJsaW5nICE9PSB0aGlzLmNvbnRhaW5lcikge1xuXHRcdFx0XHQvLyBSZXBvc2l0aW9uIGlmIGl0J3Mgbm90IHJpZ2h0IGJlZm9yZSB0aGUgY29udGFpbmVyXG5cdFx0XHRcdGlmICh0aGlzLnRvb2xiYXJFbC5wYXJlbnRFbGVtZW50KSB7XG5cdFx0XHRcdFx0dGhpcy50b29sYmFyRWwucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dmlld0NvbnRlbnQuaW5zZXJ0QmVmb3JlKHRoaXMudG9vbGJhckVsLCB0aGlzLmNvbnRhaW5lcik7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChiYXNlc0hlYWRlciAmJiBiYXNlc0hlYWRlci5wYXJlbnRFbGVtZW50KSB7XG5cdFx0XHQvLyBGYWxsYmFjazogaW5zZXJ0IGFmdGVyIGJhc2VzLWhlYWRlciBpbiBpdHMgcGFyZW50XG5cdFx0XHRpZiAodGhpcy50b29sYmFyRWwucGFyZW50RWxlbWVudCAhPT0gYmFzZXNIZWFkZXIucGFyZW50RWxlbWVudCkge1xuXHRcdFx0XHRpZiAodGhpcy50b29sYmFyRWwucGFyZW50RWxlbWVudCkge1xuXHRcdFx0XHRcdHRoaXMudG9vbGJhckVsLnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJhc2VzSGVhZGVyLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMudG9vbGJhckVsLCBiYXNlc0hlYWRlci5uZXh0U2libGluZyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIExhc3QgcmVzb3J0OiBpbnNlcnQgYmVmb3JlIGNvbnRhaW5lclxuXHRcdFx0Y29uc3QgcGFyZW50ID0gdGhpcy5jb250YWluZXIucGFyZW50RWxlbWVudDtcblx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0aWYgKHRoaXMudG9vbGJhckVsLnBhcmVudEVsZW1lbnQgIT09IHBhcmVudCB8fCB0aGlzLnRvb2xiYXJFbC5uZXh0U2libGluZyAhPT0gdGhpcy5jb250YWluZXIpIHtcblx0XHRcdFx0XHRpZiAodGhpcy50b29sYmFyRWwucGFyZW50RWxlbWVudCkge1xuXHRcdFx0XHRcdFx0dGhpcy50b29sYmFyRWwucmVtb3ZlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHBhcmVudC5pbnNlcnRCZWZvcmUodGhpcy50b29sYmFyRWwsIHRoaXMuY29udGFpbmVyKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgY3JlYXRlVG9vbGJhckNvbnRlbnQoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLnRvb2xiYXJFbCkgcmV0dXJuO1xuXHRcdFxuXHRcdC8vIExlZnQgc2lkZSBjb250YWluZXIgKFNlbGVjdCBhbGwsIENsZWFyIHNlbGVjdGlvbiwgQ291bnQpXG5cdFx0Y29uc3QgbGVmdENvbnRhaW5lciA9IHRoaXMudG9vbGJhckVsLmNyZWF0ZURpdignYmFzZXMtY21zLWJ1bGstdG9vbGJhci1sZWZ0Jyk7XG5cdFx0XG5cdFx0Ly8gSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBCYXNlcy1zdHlsZSBpY29uK3RleHQgYnV0dG9uXG5cdFx0Y29uc3QgY3JlYXRlQmFzZXNCdXR0b24gPSAoaWNvbk5hbWU6IHN0cmluZywgdGV4dDogc3RyaW5nLCBvbkNsaWNrOiAoKSA9PiB2b2lkLCBjb250YWluZXI6IEhUTUxFbGVtZW50LCBpc0Rlc3RydWN0aXZlID0gZmFsc2UpOiBIVE1MRWxlbWVudCA9PiB7XG5cdFx0XHRjb25zdCB0b29sYmFySXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2Jhc2VzLXRvb2xiYXItaXRlbScpO1xuXHRcdFx0Y29uc3QgYnV0dG9uID0gdG9vbGJhckl0ZW0uY3JlYXRlRGl2KCd0ZXh0LWljb24tYnV0dG9uJyk7XG5cdFx0XHRpZiAoaXNEZXN0cnVjdGl2ZSkge1xuXHRcdFx0XHRidXR0b24uYWRkQ2xhc3MoJ2Rlc3RydWN0aXZlJyk7XG5cdFx0XHR9XG5cdFx0XHRidXR0b24uc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IGljb25FbCA9IGJ1dHRvbi5jcmVhdGVTcGFuKCd0ZXh0LWJ1dHRvbi1pY29uJyk7XG5cdFx0XHRzZXRJY29uKGljb25FbCwgaWNvbk5hbWUpO1xuXHRcdFx0XG5cdFx0XHRjb25zdCB0ZXh0RWwgPSBidXR0b24uY3JlYXRlU3BhbigndGV4dC1idXR0b24tbGFiZWwnKTtcblx0XHRcdHRleHRFbC5zZXRUZXh0KHRleHQpO1xuXHRcdFx0XG5cdFx0XHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrKTtcblx0XHRcdHJldHVybiBidXR0b247XG5cdFx0fTtcblxuXHRcdC8vIExlZnQgc2lkZTogU2VsZWN0IGFsbFxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclNlbGVjdEFsbCkge1xuXHRcdFx0Y3JlYXRlQmFzZXNCdXR0b24oJ2NvcHktY2hlY2snLCAnU2VsZWN0IGFsbCcsICgpID0+IHRoaXMuaGFuZGxlU2VsZWN0QWxsKCksIGxlZnRDb250YWluZXIpO1xuXHRcdH1cblxuXHRcdC8vIExlZnQgc2lkZTogQ2xlYXJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJDbGVhcikge1xuXHRcdFx0Y3JlYXRlQmFzZXNCdXR0b24oJ3NxdWFyZS14JywgJ0NsZWFyJywgKCkgPT4gdGhpcy5jbGVhclNlbGVjdGlvbigpLCBsZWZ0Q29udGFpbmVyKTtcblx0XHR9XG5cblx0XHQvLyBMZWZ0IHNpZGU6IFNlbGVjdGVkIGNvdW50IChub3QgYSBidXR0b24sIGp1c3QgdGV4dClcblx0XHRjb25zdCBjb3VudEl0ZW0gPSBsZWZ0Q29udGFpbmVyLmNyZWF0ZURpdignYmFzZXMtdG9vbGJhci1pdGVtIGJhc2VzLWNtcy1zZWxlY3RlZC1jb3VudCcpO1xuXHRcdHRoaXMuY291bnRFbCA9IGNvdW50SXRlbS5jcmVhdGVTcGFuKCd0ZXh0LWJ1dHRvbi1sYWJlbCcpO1xuXHRcdHRoaXMuY291bnRFbC5zZXRUZXh0KCcwIHNlbGVjdGVkJyk7XG5cblx0XHQvLyBSaWdodCBzaWRlIGNvbnRhaW5lciAoYWxsIGFjdGlvbiBidXR0b25zKVxuXHRcdGNvbnN0IHJpZ2h0Q29udGFpbmVyID0gdGhpcy50b29sYmFyRWwuY3JlYXRlRGl2KCdiYXNlcy1jbXMtYnVsay10b29sYmFyLXJpZ2h0Jyk7XG5cblx0XHQvLyBSaWdodCBzaWRlOiBQdWJsaXNoXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyUHVibGlzaCkge1xuXHRcdFx0Y3JlYXRlQmFzZXNCdXR0b24oJ2Jvb2stY2hlY2snLCAnUHVibGlzaCcsICgpID0+IHtcblx0XHRcdFx0dm9pZCB0aGlzLmFjdGlvbnMuaGFuZGxlUHVibGlzaCh0aGlzLnNldHRpbmdzKTtcblx0XHRcdH0sIHJpZ2h0Q29udGFpbmVyKTtcblx0XHR9XG5cblx0XHQvLyBSaWdodCBzaWRlOiBEcmFmdFxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhckRyYWZ0KSB7XG5cdFx0XHRjcmVhdGVCYXNlc0J1dHRvbignYm9vay1kYXNoZWQnLCAnRHJhZnQnLCAoKSA9PiB7XG5cdFx0XHRcdHZvaWQgdGhpcy5hY3Rpb25zLmhhbmRsZVNldERyYWZ0KHRoaXMuc2V0dGluZ3MpO1xuXHRcdFx0fSwgcmlnaHRDb250YWluZXIpO1xuXHRcdH1cblxuXHRcdC8vIFJpZ2h0IHNpZGU6IFRhZ3Ncblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJUYWdzKSB7XG5cdFx0XHRjcmVhdGVCYXNlc0J1dHRvbigndGFncycsICdUYWdzJywgKCkgPT4gdGhpcy5hY3Rpb25zLmhhbmRsZU1hbmFnZVRhZ3MoKSwgcmlnaHRDb250YWluZXIpO1xuXHRcdH1cblxuXHRcdC8vIFJpZ2h0IHNpZGU6IFNldFxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclNldCkge1xuXHRcdFx0Y3JlYXRlQmFzZXNCdXR0b24oJ2xpc3QtY2hlY2snLCAnU2V0JywgKCkgPT4gdGhpcy5hY3Rpb25zLmhhbmRsZVNldFByb3BlcnR5KCksIHJpZ2h0Q29udGFpbmVyKTtcblx0XHR9XG5cblx0XHQvLyBSaWdodCBzaWRlOiBSZW1vdmVcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJSZW1vdmUpIHtcblx0XHRcdGNyZWF0ZUJhc2VzQnV0dG9uKCdsaXN0LXgnLCAnUmVtb3ZlJywgKCkgPT4gdGhpcy5hY3Rpb25zLmhhbmRsZVJlbW92ZVByb3BlcnR5KCksIHJpZ2h0Q29udGFpbmVyKTtcblx0XHR9XG5cblx0XHQvLyBSaWdodCBzaWRlOiBEZWxldGVcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJEZWxldGUpIHtcblx0XHRcdGNyZWF0ZUJhc2VzQnV0dG9uKCd0cmFzaC0yJywgJ0RlbGV0ZScsICgpID0+IHtcblx0XHRcdFx0dm9pZCB0aGlzLmFjdGlvbnMuaGFuZGxlRGVsZXRlKCk7XG5cdFx0XHR9LCByaWdodENvbnRhaW5lciwgdHJ1ZSk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHVwIHJlc3BvbnNpdmUgYmVoYXZpb3IgLSBkZXRlY3QgY29sbGFwc2VkIHN0YXRlXG5cdFx0dGhpcy5zZXR1cFJlc3BvbnNpdmVCZWhhdmlvcigpO1xuXHR9XG5cblx0cHJpdmF0ZSBzZXR1cFJlc3BvbnNpdmVCZWhhdmlvcigpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMudG9vbGJhckVsKSByZXR1cm47XG5cblx0XHQvLyBDaGVjayBpbml0aWFsIHN0YXRlIGFmdGVyIGEgc2hvcnQgZGVsYXkgdG8gZW5zdXJlIHRvb2xiYXIgaXMgcmVuZGVyZWRcblx0XHRjb25zdCB0aW1lb3V0SWQxID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0dGhpcy51cGRhdGVDb2xsYXBzZWRTdGF0ZSgpO1xuXHRcdH0sIDEwMCk7XG5cdFx0dGhpcy50aW1lb3V0SWRzLnB1c2godGltZW91dElkMSk7XG5cblx0XHQvLyBPYnNlcnZlIHRvb2xiYXIgd2lkdGggY2hhbmdlcyAobW9yZSBhY2N1cmF0ZSB0aGFuIGNvbnRhaW5lcilcblx0XHRpZiAodGhpcy50b29sYmFyRWwpIHtcblx0XHRcdHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnVwZGF0ZUNvbGxhcHNlZFN0YXRlKCk7XG5cdFx0XHR9KTtcblx0XHRcdHRoaXMucmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnRvb2xiYXJFbCk7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIEFsc28gb2JzZXJ2ZSBjb250YWluZXIgYXMgZmFsbGJhY2tcblx0XHRjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcjtcblx0XHRpZiAoY29udGFpbmVyKSB7XG5cdFx0XHQvLyBVc2UgYSBzZXBhcmF0ZSBvYnNlcnZlciBmb3IgY29udGFpbmVyIHRvIGNhdGNoIHdpbmRvdyByZXNpemVcblx0XHRcdGNvbnN0IGNvbnRhaW5lck9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHtcblx0XHRcdFx0Ly8gU21hbGwgZGVsYXkgdG8gbGV0IHRvb2xiYXIgcmVzaXplIGZpcnN0XG5cdFx0XHRcdGNvbnN0IHRpbWVvdXRJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUNvbGxhcHNlZFN0YXRlKCk7XG5cdFx0XHRcdH0sIDEwKTtcblx0XHRcdFx0dGhpcy50aW1lb3V0SWRzLnB1c2godGltZW91dElkKTtcblx0XHRcdH0pO1xuXHRcdFx0Y29udGFpbmVyT2JzZXJ2ZXIub2JzZXJ2ZShjb250YWluZXIpO1xuXHRcdFx0XG5cdFx0XHQvLyBTdG9yZSBmb3IgY2xlYW51cFxuXHRcdFx0KHRoaXMgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lck9ic2VydmVyPzogUmVzaXplT2JzZXJ2ZXIgfSkuY29udGFpbmVyT2JzZXJ2ZXIgPSBjb250YWluZXJPYnNlcnZlcjtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHVwZGF0ZUNvbGxhcHNlZFN0YXRlKCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy50b29sYmFyRWwpIHJldHVybjtcblxuXHRcdC8vIENoZWNrIGlmIHRvb2xiYXIgaXRzZWxmIGlzIG5hcnJvdyAoY29sbGFwc2VkKVxuXHRcdC8vIFVzZSB0aGUgdG9vbGJhcidzIGFjdHVhbCB3aWR0aCwgbm90IHRoZSBjb250YWluZXJcblx0XHRjb25zdCB0b29sYmFyV2lkdGggPSB0aGlzLnRvb2xiYXJFbC5vZmZzZXRXaWR0aDtcblx0XHRjb25zdCBpc0NvbGxhcHNlZCA9IHRvb2xiYXJXaWR0aCA8IDY4MDsgLy8gVGhyZXNob2xkIGZvciBjb2xsYXBzaW5nXG5cblx0XHRpZiAoaXNDb2xsYXBzZWQpIHtcblx0XHRcdHRoaXMudG9vbGJhckVsLmFkZENsYXNzKCdjb2xsYXBzZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy50b29sYmFyRWwucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlZCcpO1xuXHRcdH1cblx0fVxuXG5cdHVwZGF0ZUNvdW50KGNvdW50OiBudW1iZXIpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5jb3VudEVsKSB7XG5cdFx0XHR0aGlzLmNvdW50RWwuc2V0VGV4dChgJHtjb3VudH0gc2VsZWN0ZWRgKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGhhbmRsZVNlbGVjdEFsbCgpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5zZWxlY3RBbGxDYWxsYmFjaykge1xuXHRcdFx0dGhpcy5zZWxlY3RBbGxDYWxsYmFjaygpO1xuXHRcdH1cblx0fVxuXG5cdHNob3coKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLnRvb2xiYXJFbCkge1xuXHRcdFx0Y29uc29sZS53YXJuKCdbQmFzZXMgQ01TXSBUb29sYmFyIGVsZW1lbnQgbm90IGZvdW5kLCByZWNyZWF0aW5nLi4uJyk7XG5cdFx0XHR0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcblx0XHR9XG5cdFx0XG5cdFx0aWYgKHRoaXMudG9vbGJhckVsKSB7XG5cdFx0XHQvLyBNYWtlIHN1cmUgaXQncyBwb3NpdGlvbmVkIGNvcnJlY3RseSBmaXJzdFxuXHRcdFx0dGhpcy5wb3NpdGlvblRvb2xiYXIoKTtcblx0XHRcdFxuXHRcdFx0Ly8gRW5zdXJlIGl0J3MgaW4gdGhlIERPTVxuXHRcdFx0aWYgKCF0aGlzLnRvb2xiYXJFbC5wYXJlbnRFbGVtZW50KSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybignW0Jhc2VzIENNU10gVG9vbGJhciBub3QgaW4gRE9NLCByZXBvc2l0aW9uaW5nLi4uJyk7XG5cdFx0XHRcdHRoaXMucG9zaXRpb25Ub29sYmFyKCk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIFNob3cgaXQgd2l0aCBmbGV4IGRpc3BsYXlcblx0XHRcdHRoaXMudG9vbGJhckVsLnJlbW92ZUNsYXNzKCdiYXNlcy1jbXMtYnVsay10b29sYmFyLWhpZGRlbicpO1xuXHRcdFx0dGhpcy50b29sYmFyRWwuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItdmlzaWJsZScpO1xuXHRcdFx0XG5cdFx0XHQvLyBGb3JjZSByZWZsb3cgdG8gZW5zdXJlIHRyYW5zaXRpb24gd29ya3Ncblx0XHRcdHZvaWQgdGhpcy50b29sYmFyRWwub2Zmc2V0SGVpZ2h0O1xuXHRcdFx0XG5cdFx0XHQvLyBBbmltYXRlIGluIC0gdXNlIHNldFRpbWVvdXQgaW5zdGVhZCBvZiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgZm9yIG1vcmUgcmVsaWFiaWxpdHlcblx0XHRcdGNvbnN0IHRpbWVvdXRJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMudG9vbGJhckVsKSB7XG5cdFx0XHRcdFx0dGhpcy50b29sYmFyRWwucmVtb3ZlQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItYW5pbWF0aW5nLW91dCcpO1xuXHRcdFx0XHRcdHRoaXMudG9vbGJhckVsLmFkZENsYXNzKCdiYXNlcy1jbXMtYnVsay10b29sYmFyLWFuaW1hdGluZy1pbicpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAxMCk7XG5cdFx0XHR0aGlzLnRpbWVvdXRJZHMucHVzaCh0aW1lb3V0SWQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdbQmFzZXMgQ01TXSBGYWlsZWQgdG8gc2hvdyB0b29sYmFyIC0gZWxlbWVudCBpcyBudWxsJyk7XG5cdFx0fVxuXHR9XG5cblx0aGlkZSgpOiB2b2lkIHtcblx0XHRpZiAodGhpcy50b29sYmFyRWwpIHtcblx0XHRcdC8vIEFuaW1hdGUgb3V0XG5cdFx0XHR0aGlzLnRvb2xiYXJFbC5yZW1vdmVDbGFzcygnYmFzZXMtY21zLWJ1bGstdG9vbGJhci1hbmltYXRpbmctaW4nKTtcblx0XHRcdHRoaXMudG9vbGJhckVsLmFkZENsYXNzKCdiYXNlcy1jbXMtYnVsay10b29sYmFyLWFuaW1hdGluZy1vdXQnKTtcblx0XHRcdC8vIFdhaXQgZm9yIHRyYW5zaXRpb24gdG8gY29tcGxldGUgYmVmb3JlIGhpZGluZ1xuXHRcdFx0Y29uc3QgdGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy50b29sYmFyRWwpIHtcblx0XHRcdFx0XHR0aGlzLnRvb2xiYXJFbC5yZW1vdmVDbGFzcygnYmFzZXMtY21zLWJ1bGstdG9vbGJhci12aXNpYmxlJyk7XG5cdFx0XHRcdFx0dGhpcy50b29sYmFyRWwuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItaGlkZGVuJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIDIwMCk7XG5cdFx0XHR0aGlzLnRpbWVvdXRJZHMucHVzaCh0aW1lb3V0SWQpO1xuXHRcdH1cblx0fVxuXG5cblx0LyoqXG5cdCAqIFJlY3JlYXRlIHRoZSB0b29sYmFyIHdpdGggdXBkYXRlZCBzZXR0aW5nc1xuXHQgKiBQcmVzZXJ2ZXMgdmlzaWJpbGl0eSBzdGF0ZSBhbmQgY291bnRcblx0ICovXG5cdHJlY3JlYXRlKCk6IHZvaWQge1xuXHRcdGNvbnN0IHdhc1Zpc2libGUgPSB0aGlzLnRvb2xiYXJFbCAmJiAhdGhpcy50b29sYmFyRWwuaGFzQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItaGlkZGVuJyk7XG5cdFx0bGV0IGN1cnJlbnRDb3VudCA9IDA7XG5cdFx0XG5cdFx0Ly8gR2V0IGN1cnJlbnQgY291bnQgYmVmb3JlIGRlc3Ryb3lpbmdcblx0XHRpZiAodGhpcy5jb3VudEVsICYmIHRoaXMuY291bnRFbC50ZXh0Q29udGVudCkge1xuXHRcdFx0Y29uc3QgbWF0Y2ggPSB0aGlzLmNvdW50RWwudGV4dENvbnRlbnQubWF0Y2goL1xcZCsvKTtcblx0XHRcdGlmIChtYXRjaCkge1xuXHRcdFx0XHRjdXJyZW50Q291bnQgPSBwYXJzZUludChtYXRjaFswXSwgMTApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHQvLyBEZXN0cm95IGV4aXN0aW5nIHRvb2xiYXJcblx0XHR0aGlzLmRlc3Ryb3koKTtcblx0XHRcblx0XHQvLyBSZWNyZWF0ZSB0b29sYmFyXG5cdFx0dGhpcy5jcmVhdGVUb29sYmFyKCk7XG5cdFx0XG5cdFx0Ly8gUmVzdG9yZSB2aXNpYmlsaXR5IGFuZCBjb3VudCBpZiBpdCB3YXMgdmlzaWJsZVxuXHRcdGlmICh3YXNWaXNpYmxlICYmIHRoaXMudG9vbGJhckVsICYmIGN1cnJlbnRDb3VudCA+IDApIHtcblx0XHRcdHRoaXMudXBkYXRlQ291bnQoY3VycmVudENvdW50KTtcblx0XHRcdHRoaXMuc2hvdygpO1xuXHRcdH1cblx0fVxuXG5cdGRlc3Ryb3koKTogdm9pZCB7XG5cdFx0Ly8gQ2xlYXIgYWxsIHRpbWVvdXRzXG5cdFx0dGhpcy50aW1lb3V0SWRzLmZvckVhY2goaWQgPT4gd2luZG93LmNsZWFyVGltZW91dChpZCkpO1xuXHRcdHRoaXMudGltZW91dElkcyA9IFtdO1xuXHRcdFxuXHRcdGlmICh0aGlzLnJlc2l6ZU9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLnJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHRcdHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBudWxsO1xuXHRcdH1cblx0XHQvLyBDbGVhbiB1cCBjb250YWluZXIgb2JzZXJ2ZXIgaWYgaXQgZXhpc3RzXG5cdFx0Y29uc3QgY29udGFpbmVyT2JzZXJ2ZXIgPSAodGhpcyBhcyB1bmtub3duIGFzIHsgY29udGFpbmVyT2JzZXJ2ZXI/OiBSZXNpemVPYnNlcnZlciB9KS5jb250YWluZXJPYnNlcnZlcjtcblx0XHRpZiAoY29udGFpbmVyT2JzZXJ2ZXIpIHtcblx0XHRcdGNvbnRhaW5lck9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHRcdCh0aGlzIGFzIHVua25vd24gYXMgeyBjb250YWluZXJPYnNlcnZlcj86IFJlc2l6ZU9ic2VydmVyIH0pLmNvbnRhaW5lck9ic2VydmVyID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAodGhpcy50b29sYmFyRWwpIHtcblx0XHRcdHRoaXMudG9vbGJhckVsLnJlbW92ZSgpO1xuXHRcdFx0dGhpcy50b29sYmFyRWwgPSBudWxsO1xuXHRcdH1cblx0fVxufVxuXG4iLCAiLyoqXHJcbiAqIEJ1bGsgb3BlcmF0aW9uIGhhbmRsZXJzXHJcbiAqIFVwZGF0ZWQgdG8gc3VwcG9ydCBNRFggZmlsZXMgdmlhIHVuaWZpZWQgZnJvbnRtYXR0ZXIgaGVscGVyXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBhZGRQcm9wZXJ0aWVzLCByZW1vdmVQcm9wZXJ0aWVzIH0gZnJvbSAnLi9mcm9udG1hdHRlcic7XHJcbmltcG9ydCB7IE5ld1Byb3BEYXRhIH0gZnJvbSAnLi9mcm9udG1hdHRlcic7XHJcbmltcG9ydCB0eXBlIHsgQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvZGF0YS10cmFuc2Zvcm0nO1xyXG5pbXBvcnQgeyBnZXRGaWxlRnJvbnRtYXR0ZXIsIHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIgfSBmcm9tICcuL2Zyb250bWF0dGVyLWhlbHBlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgQnVsa09wZXJhdGlvbnMge1xyXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHApIHt9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCBkcmFmdCBzdGF0dXMgZm9yIG11bHRpcGxlIGZpbGVzXHJcblx0ICogUmVzcGVjdHMgZmlsZW5hbWUgcHJlZml4IG1vZGUgYW5kIHJldmVyc2UgbG9naWMgc2V0dGluZ3NcclxuXHQgKi9cclxuXHRhc3luYyBzZXREcmFmdChmaWxlczogc3RyaW5nW10sIGRyYWZ0OiBib29sZWFuLCBzZXR0aW5ncz86IENNU1NldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRhd2FpdCB0aGlzLmJhdGNoUHJvY2Vzc0ZpbGVzKGZpbGVzLCBhc3luYyAoZmlsZSkgPT4ge1xyXG5cdFx0XHQvLyBJZiBzZXR0aW5ncyBwcm92aWRlZCwgdXNlIHRoZSBzYW1lIGxvZ2ljIGFzIGhhbmRsZVByb3BlcnR5VG9nZ2xlXHJcblx0XHRcdGlmIChzZXR0aW5ncykge1xyXG5cdFx0XHRcdC8vIENoZWNrIGlmIHVzaW5nIGZpbGVuYW1lIHByZWZpeCBtb2RlXHJcblx0XHRcdFx0aWYgKHNldHRpbmdzLmRyYWZ0U3RhdHVzVXNlRmlsZW5hbWVQcmVmaXgpIHtcclxuXHRcdFx0XHRcdC8vIEFsd2F5cyB1c2UgZmlsZW5hbWUtYmFzZWQgZGV0ZWN0aW9uIHdoZW4gdGhpcyBzZXR0aW5nIGlzIGVuYWJsZWRcclxuXHRcdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gZmlsZS5iYXNlbmFtZTsgLy8gYmFzZW5hbWUgZXhjbHVkZXMgZXh0ZW5zaW9uXHJcblx0XHRcdFx0XHRjb25zdCBzdGFydHNXaXRoVW5kZXJzY29yZSA9IGZpbGVOYW1lLnN0YXJ0c1dpdGgoJ18nKTtcclxuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRQYXRoID0gZmlsZS5wYXRoO1xyXG5cdFx0XHRcdFx0Y29uc3QgcGF0aFBhcnRzID0gY3VycmVudFBhdGguc3BsaXQoJy8nKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQXBwbHkgcmV2ZXJzZSBsb2dpYyBpZiBlbmFibGVkXHJcblx0XHRcdFx0XHRsZXQgdGFyZ2V0VmFsdWUgPSBkcmFmdDtcclxuXHRcdFx0XHRcdGlmIChzZXR0aW5ncy5kcmFmdFN0YXR1c1JldmVyc2UpIHtcclxuXHRcdFx0XHRcdFx0dGFyZ2V0VmFsdWUgPSAhZHJhZnQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFRvZ2dsZSBiYXNlZCBvbiBkZXNpcmVkIHN0YXRlOiBpZiB0YXJnZXRWYWx1ZSBpcyB0cnVlIChkcmFmdCksIGVuc3VyZSB1bmRlcnNjb3JlOyBpZiBmYWxzZSAocHVibGlzaGVkKSwgcmVtb3ZlIGl0XHJcblx0XHRcdFx0XHRpZiAodGFyZ2V0VmFsdWUgPT09IHRydWUpIHtcclxuXHRcdFx0XHRcdFx0Ly8gU2V0dGluZyB0byBkcmFmdCAtIGFkZCB1bmRlcnNjb3JlIGlmIG5vdCBwcmVzZW50XHJcblx0XHRcdFx0XHRcdGlmICghc3RhcnRzV2l0aFVuZGVyc2NvcmUpIHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBuZXdOYW1lID0gYF8ke2ZpbGVOYW1lfSR7ZmlsZS5leHRlbnNpb24gPyBgLiR7ZmlsZS5leHRlbnNpb259YCA6ICcnfWA7XHJcblx0XHRcdFx0XHRcdFx0cGF0aFBhcnRzW3BhdGhQYXJ0cy5sZW5ndGggLSAxXSA9IG5ld05hbWU7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3UGF0aCA9IHBhdGhQYXJ0cy5qb2luKCcvJyk7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLCBuZXdQYXRoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gU2V0dGluZyB0byBwdWJsaXNoZWQgLSByZW1vdmUgdW5kZXJzY29yZSBpZiBwcmVzZW50XHJcblx0XHRcdFx0XHRcdGlmIChzdGFydHNXaXRoVW5kZXJzY29yZSkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld05hbWUgPSBmaWxlTmFtZS5zdWJzdHJpbmcoMSkgKyAoZmlsZS5leHRlbnNpb24gPyBgLiR7ZmlsZS5leHRlbnNpb259YCA6ICcnKTtcclxuXHRcdFx0XHRcdFx0XHRwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdID0gbmV3TmFtZTtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBuZXdQYXRoID0gcGF0aFBhcnRzLmpvaW4oJy8nKTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFVzZSBwcm9wZXJ0eS1iYXNlZCBkZXRlY3Rpb24gKGZyb250bWF0dGVyKVxyXG5cdFx0XHRcdFx0Y29uc3QgY2xlYW5Db25maWdQcm9wZXJ0eSA9IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHkgJiYgc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS50cmltKClcclxuXHRcdFx0XHRcdFx0PyAoc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS5zdGFydHNXaXRoKCdub3RlLicpIFxyXG5cdFx0XHRcdFx0XHRcdD8gc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS5zdWJzdHJpbmcoNSkgXHJcblx0XHRcdFx0XHRcdFx0OiBzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5KVxyXG5cdFx0XHRcdFx0XHQ6ICdkcmFmdCc7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEFwcGx5IHJldmVyc2UgbG9naWMgaWYgZW5hYmxlZFxyXG5cdFx0XHRcdFx0bGV0IHRhcmdldFZhbHVlID0gZHJhZnQ7XHJcblx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuZHJhZnRTdGF0dXNSZXZlcnNlKSB7XHJcblx0XHRcdFx0XHRcdHRhcmdldFZhbHVlID0gIWRyYWZ0O1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRhd2FpdCBwcm9jZXNzRmlsZUZyb250TWF0dGVyKHRoaXMuYXBwLCBmaWxlLCAoZnJvbnRtYXR0ZXIpID0+IHtcclxuXHRcdFx0XHRcdFx0ZnJvbnRtYXR0ZXJbY2xlYW5Db25maWdQcm9wZXJ0eV0gPSB0YXJnZXRWYWx1ZTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBGYWxsYmFjazogdXNlIGRlZmF1bHQgYmVoYXZpb3IgKHNldCBkcmFmdCBwcm9wZXJ0eSlcclxuXHRcdFx0XHRhd2FpdCBwcm9jZXNzRmlsZUZyb250TWF0dGVyKHRoaXMuYXBwLCBmaWxlLCAoZnJvbnRtYXR0ZXIpID0+IHtcclxuXHRcdFx0XHRcdGZyb250bWF0dGVyLmRyYWZ0ID0gZHJhZnQ7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBOb3RpY2UoYFNldCAke2ZpbGVzLmxlbmd0aH0gZmlsZSR7ZmlsZXMubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9IHRvICR7ZHJhZnQgPyAnZHJhZnQnIDogJ3B1Ymxpc2hlZCd9YCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBBZGQgdGFncyB0byBtdWx0aXBsZSBmaWxlc1xyXG5cdCAqL1xyXG5cdGFzeW5jIGFkZFRhZ3MoZmlsZXM6IHN0cmluZ1tdLCB0YWdzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3QgcHJvcHMgPSBuZXcgTWFwPHN0cmluZywgTmV3UHJvcERhdGE+KCk7XHJcblx0XHRwcm9wcy5zZXQoJ3RhZ3MnLCB7XHJcblx0XHRcdHR5cGU6ICd0YWdzJyxcclxuXHRcdFx0ZGF0YTogdGFncyxcclxuXHRcdFx0b3ZlcndyaXRlOiBmYWxzZSxcclxuXHRcdFx0ZGVsaW1pdGVyOiAnLCcsXHJcblx0XHR9KTtcclxuXHJcblx0XHRhd2FpdCB0aGlzLmJhdGNoUHJvY2Vzc0ZpbGVzKGZpbGVzLCBhc3luYyAoZmlsZSkgPT4ge1xyXG5cdFx0XHRhd2FpdCBhZGRQcm9wZXJ0aWVzKHRoaXMuYXBwLCBmaWxlLCBwcm9wcywgZmFsc2UpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IE5vdGljZShgQWRkZWQgdGFncyB0byAke2ZpbGVzLmxlbmd0aH0gZmlsZSR7ZmlsZXMubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9YCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZW1vdmUgdGFncyBmcm9tIG11bHRpcGxlIGZpbGVzXHJcblx0ICovXHJcblx0YXN5bmMgcmVtb3ZlVGFncyhmaWxlczogc3RyaW5nW10sIHRhZ3NUb1JlbW92ZTogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGF3YWl0IHRoaXMuYmF0Y2hQcm9jZXNzRmlsZXMoZmlsZXMsIGFzeW5jIChmaWxlKSA9PiB7XHJcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gYXdhaXQgZ2V0RmlsZUZyb250bWF0dGVyKHRoaXMuYXBwLCBmaWxlKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChmcm9udG1hdHRlcj8udGFncykge1xyXG5cdFx0XHRcdGNvbnN0IGZtVGFncyA9IGZyb250bWF0dGVyLnRhZ3MgYXMgc3RyaW5nIHwgc3RyaW5nW107XHJcblx0XHRcdFx0Y29uc3QgY3VycmVudFRhZ3MgPSBBcnJheS5pc0FycmF5KGZtVGFncykgXHJcblx0XHRcdFx0XHQ/IGZtVGFncyBcclxuXHRcdFx0XHRcdDogW2ZtVGFnc107XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc3QgdXBkYXRlZFRhZ3MgPSBjdXJyZW50VGFncy5maWx0ZXIoKHRhZzogc3RyaW5nKSA9PiBcclxuXHRcdFx0XHRcdCF0YWdzVG9SZW1vdmUuaW5jbHVkZXModGFnKVxyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdGF3YWl0IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIodGhpcy5hcHAsIGZpbGUsIChmbSkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHVwZGF0ZWRUYWdzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdFx0Zm0udGFncyA9IHVwZGF0ZWRUYWdzO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Zm0udGFncyA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IE5vdGljZShgUmVtb3ZlZCB0YWdzIGZyb20gJHtmaWxlcy5sZW5ndGh9IGZpbGUke2ZpbGVzLmxlbmd0aCAhPT0gMSA/ICdzJyA6ICcnfWApO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IGEgcHJvcGVydHkgdmFsdWUgZm9yIG11bHRpcGxlIGZpbGVzXHJcblx0ICovXHJcblx0YXN5bmMgc2V0UHJvcGVydHkoZmlsZXM6IHN0cmluZ1tdLCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogdW5rbm93biwgcHJvcGVydHlUeXBlOiBzdHJpbmcgPSAndGV4dCcpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdC8vIFN0cmlwIFwibm90ZS5cIiBwcmVmaXggaWYgcHJlc2VudCAoQmFzZXMgdXNlcyBcIm5vdGUucHJvcGVydHlcIiBidXQgZnJvbnRtYXR0ZXIgdXNlcyBqdXN0IFwicHJvcGVydHlcIilcclxuXHRcdGNvbnN0IGNsZWFuUHJvcGVydHkgPSBwcm9wZXJ0eS5zdGFydHNXaXRoKCdub3RlLicpID8gcHJvcGVydHkuc3Vic3RyaW5nKDUpIDogcHJvcGVydHk7XHJcblx0XHRcclxuXHRcdGNvbnN0IHByb3BzID0gbmV3IE1hcDxzdHJpbmcsIE5ld1Byb3BEYXRhPigpO1xyXG5cdFx0cHJvcHMuc2V0KGNsZWFuUHJvcGVydHksIHtcclxuXHRcdFx0dHlwZTogcHJvcGVydHlUeXBlLFxyXG5cdFx0XHRkYXRhOiB2YWx1ZSBhcyBzdHJpbmcgfCBzdHJpbmdbXSB8IG51bGwsXHJcblx0XHRcdG92ZXJ3cml0ZTogdHJ1ZSxcclxuXHRcdFx0ZGVsaW1pdGVyOiAnLCcsXHJcblx0XHR9KTtcclxuXHJcblx0XHRhd2FpdCB0aGlzLmJhdGNoUHJvY2Vzc0ZpbGVzKGZpbGVzLCBhc3luYyAoZmlsZSkgPT4ge1xyXG5cdFx0XHRhd2FpdCBhZGRQcm9wZXJ0aWVzKHRoaXMuYXBwLCBmaWxlLCBwcm9wcywgdHJ1ZSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgTm90aWNlKGBTZXQgJHtjbGVhblByb3BlcnR5fSBvbiAke2ZpbGVzLmxlbmd0aH0gZmlsZSR7ZmlsZXMubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9YCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZW1vdmUgYSBwcm9wZXJ0eSBmcm9tIG11bHRpcGxlIGZpbGVzXHJcblx0ICovXHJcblx0YXN5bmMgcmVtb3ZlUHJvcGVydHkoZmlsZXM6IHN0cmluZ1tdLCBwcm9wZXJ0eTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHQvLyBTdHJpcCBcIm5vdGUuXCIgcHJlZml4IGlmIHByZXNlbnRcclxuXHRcdGNvbnN0IGNsZWFuUHJvcGVydHkgPSBwcm9wZXJ0eS5zdGFydHNXaXRoKCdub3RlLicpID8gcHJvcGVydHkuc3Vic3RyaW5nKDUpIDogcHJvcGVydHk7XHJcblx0XHRcclxuXHRcdGF3YWl0IHRoaXMuYmF0Y2hQcm9jZXNzRmlsZXMoZmlsZXMsIGFzeW5jIChmaWxlKSA9PiB7XHJcblx0XHRcdGF3YWl0IHJlbW92ZVByb3BlcnRpZXModGhpcy5hcHAsIGZpbGUsIFtjbGVhblByb3BlcnR5XSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgTm90aWNlKGBSZW1vdmVkICR7Y2xlYW5Qcm9wZXJ0eX0gZnJvbSAke2ZpbGVzLmxlbmd0aH0gZmlsZSR7ZmlsZXMubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9YCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBCYXRjaCBwcm9jZXNzIGZpbGVzIHdpdGggcHJvZ3Jlc3MgaW5kaWNhdGlvblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgYmF0Y2hQcm9jZXNzRmlsZXMoXHJcblx0XHRmaWxlczogc3RyaW5nW10sXHJcblx0XHRwcm9jZXNzb3I6IChmaWxlOiBURmlsZSkgPT4gUHJvbWlzZTx2b2lkPlxyXG5cdCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0bGV0IHByb2Nlc3NlZCA9IDA7XHJcblx0XHRjb25zdCB0b3RhbCA9IGZpbGVzLmxlbmd0aDtcclxuXHJcblx0XHRmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIGZpbGVzKSB7XHJcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGF3YWl0IHByb2Nlc3NvcihmaWxlKTtcclxuXHRcdFx0XHRcdHByb2Nlc3NlZCsrO1xyXG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nICR7ZmlsZVBhdGh9OmAsIGVycm9yKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAocHJvY2Vzc2VkIDwgdG90YWwpIHtcclxuXHRcdFx0bmV3IE5vdGljZShgUHJvY2Vzc2VkICR7cHJvY2Vzc2VkfSBvZiAke3RvdGFsfSBmaWxlc2ApO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuXHJcbiIsICIvKipcclxuICogRnJvbnRtYXR0ZXIgbWFuaXB1bGF0aW9uIHV0aWxpdGllc1xyXG4gKiBQb3J0ZWQgZnJvbSBNdWx0aS1Qcm9wZXJ0aWVzIHBsdWdpblxyXG4gKiBVcGRhdGVkIHRvIHN1cHBvcnQgTURYIGZpbGVzIHZpYSB1bmlmaWVkIGZyb250bWF0dGVyIGhlbHBlclxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIgfSBmcm9tICcuL2Zyb250bWF0dGVyLWhlbHBlcic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE5ld1Byb3BEYXRhIHtcclxuXHR0eXBlOiBzdHJpbmc7XHJcblx0ZGF0YTogc3RyaW5nIHwgc3RyaW5nW10gfCBudWxsO1xyXG5cdG92ZXJ3cml0ZTogYm9vbGVhbjtcclxuXHRkZWxpbWl0ZXI6IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCBwcm9wZXJ0aWVzIGZyb20gYSBNYXAgdG8gYSBub3RlLlxyXG4gKiBXb3JrcyBmb3IgYm90aCAubWQgYW5kIC5tZHggZmlsZXMuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkUHJvcGVydGllcyhcclxuXHRhcHA6IEFwcCxcclxuXHRmaWxlOiBURmlsZSxcclxuXHRwcm9wczogTWFwPHN0cmluZywgTmV3UHJvcERhdGE+LFxyXG5cdG92ZXJ3cml0ZTogYm9vbGVhblxyXG4pOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRhd2FpdCBwcm9jZXNzRmlsZUZyb250TWF0dGVyKGFwcCwgZmlsZSwgKGZyb250bWF0dGVyKSA9PiB7XHJcblx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBwcm9wcykge1xyXG5cdFx0XHQvLyBUYWdzIHNob3VsZCBhbHdheXMgYmUgYSBMaXN0LCBldmVuIGlmIHRoZXJlIGlzIGp1c3Qgb25lIHRhZy5cclxuXHRcdFx0aWYgKFxyXG5cdFx0XHRcdGtleSA9PT0gJ3RhZ3MnICYmXHJcblx0XHRcdFx0IU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChmcm9udG1hdHRlciwgJ3RhZ3MnKSAmJlxyXG5cdFx0XHRcdCFBcnJheS5pc0FycmF5KHZhbHVlLmRhdGEpXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdGZyb250bWF0dGVyW2tleV0gPSBbdmFsdWUuZGF0YV07XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICghZnJvbnRtYXR0ZXJba2V5XSB8fCBvdmVyd3JpdGUpIHtcclxuXHRcdFx0XHRmcm9udG1hdHRlcltrZXldID0gdmFsdWUuZGF0YTtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ29tcGFyZSB0eXBlcyB0byBzZWUgaWYgdGhleSBjYW4gYmUgYXBwZW5kZWQuXHJcblx0XHRcdGNvbnN0IHR5cGUxID0gdmFsdWUudHlwZTtcclxuXHRcdFx0Y29uc3QgZXhpc3RpbmdWYWx1ZSA9IGZyb250bWF0dGVyW2tleV07XHJcblx0XHRcdGNvbnN0IHR5cGUyID0gQXJyYXkuaXNBcnJheShleGlzdGluZ1ZhbHVlKSA/ICdsaXN0JyA6IHR5cGVvZiBleGlzdGluZ1ZhbHVlID09PSAnbnVtYmVyJyA/ICdudW1iZXInIDogdHlwZW9mIGV4aXN0aW5nVmFsdWUgPT09ICdib29sZWFuJyA/ICdjaGVja2JveCcgOiAndGV4dCc7XHJcblxyXG5cdFx0XHRpZiAoY2FuQmVBcHBlbmRlZCh0eXBlMSwgdHlwZTIpKSB7XHJcblx0XHRcdFx0aWYgKGZyb250bWF0dGVyW2tleV0gPT09IHZhbHVlLmRhdGEpIGNvbnRpbnVlOyAvLyBMZWF2ZSBpZGVudGljYWwgdmFsdWVzIGFsb25lLlxyXG5cdFx0XHRcdGlmICghdmFsdWUuZGF0YSkgY29udGludWU7IC8vIERvIG5vdCBtZXJnZSBlbXB0eSB2YWx1ZXMuXHJcblxyXG5cdFx0XHRcdGNvbnN0IGFyciA9IG1lcmdlSW50b0FycmF5cyhmcm9udG1hdHRlcltrZXldIGFzIHN0cmluZyB8IHN0cmluZ1tdLCB2YWx1ZS5kYXRhKTtcclxuXHRcdFx0XHRmcm9udG1hdHRlcltrZXldID0gYXJyO1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGZyb250bWF0dGVyW2tleV0gPSB2YWx1ZS5kYXRhO1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgcHJvcGVydGllcyBmcm9tIGEgbm90ZS5cclxuICogV29ya3MgZm9yIGJvdGggLm1kIGFuZCAubWR4IGZpbGVzLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZVByb3BlcnRpZXMoYXBwOiBBcHAsIGZpbGU6IFRGaWxlLCBwcm9wczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRhd2FpdCBwcm9jZXNzRmlsZUZyb250TWF0dGVyKGFwcCwgZmlsZSwgKGZyb250bWF0dGVyKSA9PiB7XHJcblx0XHRmb3IgKGNvbnN0IHByb3Agb2YgcHJvcHMpIHtcclxuXHRcdFx0ZnJvbnRtYXR0ZXJbcHJvcF0gPSB1bmRlZmluZWQ7IC8vIFwiSGFja3lcIiB3b3JrYXJvdW5kLCBjb21tZW50ZWQgY29kZSB3aWxsIHdvcmsgaW4gbGF0ZXIgdmVyc2lvbi5cIlxyXG5cdFx0fVxyXG5cdH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdHdvIHR5cGVzIGNhbiBiZSBhcHBlbmRlZCB0byBlYWNoIG90aGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gY2FuQmVBcHBlbmRlZChzdHIxOiBzdHJpbmcsIHN0cjI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IGFyciA9IFsnbnVtYmVyJywgJ2RhdGUnLCAnZGF0ZXRpbWUnLCAnY2hlY2tib3gnXTsgLy8gVGhlc2UgdmFsdWVzIHNob3VsZCBub3QgYmUgYXBwZW5kZWQuXHJcblx0aWYgKGFyci5pbmNsdWRlcyhzdHIxKSB8fCBhcnIuaW5jbHVkZXMoc3RyMikpIHJldHVybiBmYWxzZTtcclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbnZlcnQgc3RyaW5ncyBhbmQgYXJyYXlzIGludG8gc2luZ2xlIGFycmF5LlxyXG4gKi9cclxuZnVuY3Rpb24gbWVyZ2VJbnRvQXJyYXlzKC4uLmFyZ3M6IChzdHJpbmcgfCBzdHJpbmdbXSlbXSk6IHN0cmluZ1tdIHtcclxuXHRjb25zdCBhcnJheXMgPSBhcmdzLm1hcCgoYXJnKSA9PiAoQXJyYXkuaXNBcnJheShhcmcpID8gYXJnIDogW2FyZ10pKTtcclxuXHJcblx0Ly8gRmxhdHRlbiB0aGUgYXJyYXlcclxuXHRjb25zdCBmbGF0dGVuZWQgPSBhcnJheXMuZmxhdCgpO1xyXG5cclxuXHQvLyBSZW1vdmUgZHVwbGljYXRlcyB1c2luZyBTZXQgYW5kIHNwcmVhZCBpdCBpbnRvIGFuIGFycmF5XHJcblx0Y29uc3QgdW5pcXVlID0gWy4uLm5ldyBTZXQoZmxhdHRlbmVkKV07XHJcblxyXG5cdHJldHVybiB1bmlxdWU7XHJcbn1cclxuXHJcblxyXG4iLCAiLyoqXHJcbiAqIE1hbmFnZSBUYWdzIE1vZGFsXHJcbiAqIE1vZGFsIGZvciBhZGRpbmcvcmVtb3ZpbmcgdGFncyBmcm9tIHNlbGVjdGVkIGZpbGVzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTW9kYWwsIEFwcCwgU2V0dGluZywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEJ1bGtPcGVyYXRpb25zIH0gZnJvbSAnLi4vdXRpbHMvYnVsay1vcGVyYXRpb25zJztcclxuaW1wb3J0IHsgZ2V0RmlsZUZyb250bWF0dGVyIH0gZnJvbSAnLi4vdXRpbHMvZnJvbnRtYXR0ZXItaGVscGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBNYW5hZ2VUYWdzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cHJpdmF0ZSBmaWxlczogc3RyaW5nW107XHJcblx0cHJpdmF0ZSB0YWdzVG9BZGQ6IHN0cmluZyA9ICcnO1xyXG5cdHByaXZhdGUgdGFnc1RvUmVtb3ZlOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcclxuXHRwcml2YXRlIGJ1bGtPcHM6IEJ1bGtPcGVyYXRpb25zO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZmlsZXM6IHN0cmluZ1tdKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5maWxlcyA9IGZpbGVzO1xyXG5cdFx0dGhpcy5idWxrT3BzID0gbmV3IEJ1bGtPcGVyYXRpb25zKGFwcCk7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZSgnTWFuYWdlIHRhZ3MnKS5zZXRIZWFkaW5nKCk7XHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBNYW5hZ2luZyB0YWdzIGZvciAke3RoaXMuZmlsZXMubGVuZ3RofSBmaWxlJHt0aGlzLmZpbGVzLmxlbmd0aCAhPT0gMSA/ICdzJyA6ICcnfWAgfSk7XHJcblxyXG5cdFx0Ly8gQWRkIHRhZ3MgaW5wdXRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuXHRcdFx0LnNldE5hbWUoJ0FkZCB0YWdzJylcclxuXHRcdFx0LnNldERlc2MoJ0VudGVyIHRhZ3MgdG8gYWRkIChjb21tYS1zZXBhcmF0ZWQpLicpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4ge1xyXG5cdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBQbGFjZWhvbGRlciB0ZXh0IHdpdGggY29kZSBleGFtcGxlcywgbm90IFVJIHRleHRcclxuXHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcigndGFnMSwgdGFnMiwgdGFnMycpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UodmFsdWUgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnRhZ3NUb0FkZCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIFJlbW92ZSB0YWdzIHNlY3Rpb25cclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdSZW1vdmUgdGFncycgfSk7IC8vIEtlZXAgaDMgZm9yIHNlY3Rpb24gaGVhZGluZ1xyXG5cdFx0Y29uc3QgcmVtb3ZlQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xyXG5cclxuXHRcdC8vIEdldCBhbGwgdW5pcXVlIHRhZ3MgZnJvbSBzZWxlY3RlZCBmaWxlc1xyXG5cdFx0Y29uc3QgYWxsVGFncyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG5cdFx0Zm9yIChjb25zdCBmaWxlUGF0aCBvZiB0aGlzLmZpbGVzKSB7XHJcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0Ly8gRm9yIE1EWCBmaWxlcywgd2UnbGwgbG9hZCB0YWdzIGFzeW5jaHJvbm91c2x5XHJcblx0XHRcdFx0aWYgKGZpbGUuZXh0ZW5zaW9uID09PSAnbWR4Jykge1xyXG5cdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcih0aGlzLmFwcCwgZmlsZSk7XHJcblx0XHRcdFx0XHRcdGlmIChmcm9udG1hdHRlcj8udGFncykge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHRhZ3MgPSBBcnJheS5pc0FycmF5KGZyb250bWF0dGVyLnRhZ3MpIFxyXG5cdFx0XHRcdFx0XHRcdFx0PyAoZnJvbnRtYXR0ZXIudGFncyBhcyBzdHJpbmdbXSlcclxuXHRcdFx0XHRcdFx0XHRcdDogW2Zyb250bWF0dGVyLnRhZ3MgYXMgc3RyaW5nXTtcclxuXHRcdFx0XHRcdFx0XHR0YWdzLmZvckVhY2godGFnID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmICghYWxsVGFncy5oYXModGFnKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhbGxUYWdzLmFkZCh0YWcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgY2hlY2tib3ggZm9yIHRoaXMgdGFnIGlmIG1vZGFsIGlzIHN0aWxsIG9wZW5cclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuY29udGVudEVsICYmIHRoaXMuY29udGVudEVsLmlzQ29ubmVjdGVkICYmIHJlbW92ZUNvbnRhaW5lci5pc0Nvbm5lY3RlZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuYWRkVGFnQ2hlY2tib3gocmVtb3ZlQ29udGFpbmVyLCB0YWcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIEZvciAubWQgZmlsZXMsIHVzZSBtZXRhZGF0YSBjYWNoZSAoc3luY2hyb25vdXMpXHJcblx0XHRcdFx0XHRjb25zdCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xyXG5cdFx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI7XHJcblx0XHRcdFx0XHRpZiAoZnJvbnRtYXR0ZXI/LnRhZ3MpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgdGFncyA9IEFycmF5LmlzQXJyYXkoZnJvbnRtYXR0ZXIudGFncykgXHJcblx0XHRcdFx0XHRcdFx0PyAoZnJvbnRtYXR0ZXIudGFncyBhcyBzdHJpbmdbXSlcclxuXHRcdFx0XHRcdFx0XHQ6IFtmcm9udG1hdHRlci50YWdzIGFzIHN0cmluZ107XHJcblx0XHRcdFx0XHRcdHRhZ3MuZm9yRWFjaCh0YWcgPT4gYWxsVGFncy5hZGQodGFnKSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGNoZWNrYm94ZXMgZm9yIGVhY2ggdGFnXHJcblx0XHRmb3IgKGNvbnN0IHRhZyBvZiBBcnJheS5mcm9tKGFsbFRhZ3MpLnNvcnQoKSkge1xyXG5cdFx0XHRuZXcgU2V0dGluZyhyZW1vdmVDb250YWluZXIpXHJcblx0XHRcdFx0LnNldE5hbWUodGFnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy50YWdzVG9SZW1vdmUuaGFzKHRhZykpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKHZhbHVlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnRhZ3NUb1JlbW92ZS5hZGQodGFnKTtcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy50YWdzVG9SZW1vdmUuZGVsZXRlKHRhZyk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBCdXR0b25zXHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcblx0XHRidXR0b25Db250YWluZXIuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1tb2RhbC1idXR0b24tY29udGFpbmVyJyk7XHJcblxyXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuXHRcdGNhbmNlbEJ0bi5zZXRUZXh0KCdDYW5jZWwnKTtcclxuXHRcdGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblxyXG5cdFx0Y29uc3QgYXBwbHlCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG5cdFx0YXBwbHlCdG4uc2V0VGV4dCgnQXBwbHknKTtcclxuXHRcdGFwcGx5QnRuLmFkZENsYXNzKCdtb2QtY3RhJyk7XHJcblx0XHRhcHBseUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuYXBwbHlDaGFuZ2VzKCk7XHJcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHR9KSgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZFRhZ0NoZWNrYm94KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHRhZzogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXIpXHJcblx0XHRcdC5zZXROYW1lKHRhZylcclxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMudGFnc1RvUmVtb3ZlLmhhcyh0YWcpKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKHZhbHVlKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy50YWdzVG9SZW1vdmUuYWRkKHRhZyk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy50YWdzVG9SZW1vdmUuZGVsZXRlKHRhZyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgYXBwbHlDaGFuZ2VzKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gQWRkIHRhZ3NcclxuXHRcdGlmICh0aGlzLnRhZ3NUb0FkZC50cmltKCkpIHtcclxuXHRcdFx0Y29uc3QgdGFnc1RvQWRkID0gdGhpcy50YWdzVG9BZGRcclxuXHRcdFx0XHQuc3BsaXQoJywnKVxyXG5cdFx0XHRcdC5tYXAodCA9PiB0LnRyaW0oKSlcclxuXHRcdFx0XHQuZmlsdGVyKHQgPT4gdC5sZW5ndGggPiAwKTtcclxuXHRcdFx0aWYgKHRhZ3NUb0FkZC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5idWxrT3BzLmFkZFRhZ3ModGhpcy5maWxlcywgdGFnc1RvQWRkKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJlbW92ZSB0YWdzXHJcblx0XHRpZiAodGhpcy50YWdzVG9SZW1vdmUuc2l6ZSA+IDApIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5idWxrT3BzLnJlbW92ZVRhZ3ModGhpcy5maWxlcywgQXJyYXkuZnJvbSh0aGlzLnRhZ3NUb1JlbW92ZSkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBTZXQgUHJvcGVydHkgTW9kYWxcclxuICogTW9kYWwgZm9yIHNldHRpbmcgYSBwcm9wZXJ0eSB2YWx1ZSBvbiBzZWxlY3RlZCBmaWxlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEJ1bGtPcGVyYXRpb25zIH0gZnJvbSAnLi4vdXRpbHMvYnVsay1vcGVyYXRpb25zJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTZXRQcm9wZXJ0eU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgZmlsZXM6IHN0cmluZ1tdO1xyXG5cdHByaXZhdGUgcHJvcGVydHlOYW1lOiBzdHJpbmcgPSAnJztcclxuXHRwcml2YXRlIHByb3BlcnR5VmFsdWU6IHN0cmluZyA9ICcnO1xyXG5cdHByaXZhdGUgcHJvcGVydHlUeXBlOiBzdHJpbmcgPSAndGV4dCc7XHJcblx0cHJpdmF0ZSBidWxrT3BzOiBCdWxrT3BlcmF0aW9ucztcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGZpbGVzOiBzdHJpbmdbXSkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMuZmlsZXMgPSBmaWxlcztcclxuXHRcdHRoaXMuYnVsa09wcyA9IG5ldyBCdWxrT3BlcmF0aW9ucyhhcHApO1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpLnNldE5hbWUoJ1NldCBwcm9wZXJ0eScpLnNldEhlYWRpbmcoKTtcclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFNldHRpbmcgcHJvcGVydHkgb24gJHt0aGlzLmZpbGVzLmxlbmd0aH0gZmlsZSR7dGhpcy5maWxlcy5sZW5ndGggIT09IDEgPyAncycgOiAnJ31gIH0pO1xyXG5cclxuXHRcdC8vIFByb3BlcnR5IG5hbWVcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuXHRcdFx0LnNldE5hbWUoJ1Byb3BlcnR5IG5hbWUnKVxyXG5cdFx0XHQuc2V0RGVzYygnRW50ZXIgdGhlIHByb3BlcnR5IG5hbWUgdG8gc2V0LicpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4ge1xyXG5cdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgbmFtZScpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UodmFsdWUgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnByb3BlcnR5TmFtZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIFByb3BlcnR5IHR5cGVcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuXHRcdFx0LnNldE5hbWUoJ1Byb3BlcnR5IHR5cGUnKVxyXG5cdFx0XHQuc2V0RGVzYygnU2VsZWN0IHRoZSBwcm9wZXJ0eSB0eXBlLicpXHJcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcblx0XHRcdFx0ZHJvcGRvd25cclxuXHRcdFx0XHRcdC5hZGRPcHRpb24oJ3RleHQnLCAnVGV4dCcpXHJcblx0XHRcdFx0XHQuYWRkT3B0aW9uKCdudW1iZXInLCAnTnVtYmVyJylcclxuXHRcdFx0XHRcdC5hZGRPcHRpb24oJ2NoZWNrYm94JywgJ0NoZWNrYm94JylcclxuXHRcdFx0XHRcdC5hZGRPcHRpb24oJ2RhdGUnLCAnRGF0ZScpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wcm9wZXJ0eVR5cGUpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UodmFsdWUgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnByb3BlcnR5VHlwZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIFByb3BlcnR5IHZhbHVlXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKCdQcm9wZXJ0eSB2YWx1ZScpXHJcblx0XHRcdC5zZXREZXNjKCdFbnRlciB0aGUgcHJvcGVydHkgdmFsdWUuJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciB2YWx1ZScpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UodmFsdWUgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnByb3BlcnR5VmFsdWUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHQvLyBCdXR0b25zXHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcblx0XHRidXR0b25Db250YWluZXIuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1tb2RhbC1idXR0b24tY29udGFpbmVyJyk7XHJcblxyXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuXHRcdGNhbmNlbEJ0bi5zZXRUZXh0KCdDYW5jZWwnKTtcclxuXHRcdGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblxyXG5cdFx0Y29uc3QgYXBwbHlCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG5cdFx0YXBwbHlCdG4uc2V0VGV4dCgnQXBwbHknKTtcclxuXHRcdGFwcGx5QnRuLmFkZENsYXNzKCdtb2QtY3RhJyk7XHJcblx0XHRhcHBseUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGlmICh0aGlzLnByb3BlcnR5TmFtZSAmJiB0aGlzLnByb3BlcnR5VmFsdWUpIHtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwbHlDaGFuZ2VzKCk7XHJcblx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KSgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIGFwcGx5Q2hhbmdlcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGxldCB2YWx1ZTogdW5rbm93biA9IHRoaXMucHJvcGVydHlWYWx1ZTtcclxuXHJcblx0XHQvLyBDb252ZXJ0IHZhbHVlIGJhc2VkIG9uIHR5cGVcclxuXHRcdGlmICh0aGlzLnByb3BlcnR5VHlwZSA9PT0gJ251bWJlcicpIHtcclxuXHRcdFx0dmFsdWUgPSBOdW1iZXIodGhpcy5wcm9wZXJ0eVZhbHVlKTtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5wcm9wZXJ0eVR5cGUgPT09ICdjaGVja2JveCcpIHtcclxuXHRcdFx0dmFsdWUgPSB0aGlzLnByb3BlcnR5VmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnIHx8IHRoaXMucHJvcGVydHlWYWx1ZSA9PT0gJzEnO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLnByb3BlcnR5VHlwZSA9PT0gJ2RhdGUnKSB7XHJcblx0XHRcdHZhbHVlID0gdGhpcy5wcm9wZXJ0eVZhbHVlOyAvLyBLZWVwIGFzIHN0cmluZyBmb3IgZGF0ZVxyXG5cdFx0fVxyXG5cclxuXHRcdGF3YWl0IHRoaXMuYnVsa09wcy5zZXRQcm9wZXJ0eSh0aGlzLmZpbGVzLCB0aGlzLnByb3BlcnR5TmFtZSwgdmFsdWUsIHRoaXMucHJvcGVydHlUeXBlKTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbiIsICIvKipcclxuICogUmVtb3ZlIFByb3BlcnR5IE1vZGFsXHJcbiAqIE1vZGFsIGZvciByZW1vdmluZyBwcm9wZXJ0aWVzIGZyb20gc2VsZWN0ZWQgZmlsZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQnVsa09wZXJhdGlvbnMgfSBmcm9tICcuLi91dGlscy9idWxrLW9wZXJhdGlvbnMnO1xyXG5pbXBvcnQgeyBnZXRGaWxlRnJvbnRtYXR0ZXIgfSBmcm9tICcuLi91dGlscy9mcm9udG1hdHRlci1oZWxwZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlbW92ZVByb3BlcnR5TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cHJpdmF0ZSBmaWxlczogc3RyaW5nW107XHJcblx0cHJpdmF0ZSBwcm9wZXJ0aWVzVG9SZW1vdmU6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xyXG5cdHByaXZhdGUgYnVsa09wczogQnVsa09wZXJhdGlvbnM7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlczogc3RyaW5nW10pIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLmZpbGVzID0gZmlsZXM7XHJcblx0XHR0aGlzLmJ1bGtPcHMgPSBuZXcgQnVsa09wZXJhdGlvbnMoYXBwKTtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKS5zZXROYW1lKCdSZW1vdmUgcHJvcGVydHknKS5zZXRIZWFkaW5nKCk7XHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBSZW1vdmluZyBwcm9wZXJ0aWVzIGZyb20gJHt0aGlzLmZpbGVzLmxlbmd0aH0gZmlsZSR7dGhpcy5maWxlcy5sZW5ndGggIT09IDEgPyAncycgOiAnJ31gIH0pO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBjaGVja2JveGVzIGNvbnRhaW5lciBmaXJzdFxyXG5cdFx0Y29uc3QgcHJvcGVydGllc0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuXHRcdFxyXG5cdFx0Ly8gR2V0IGFsbCB1bmlxdWUgcHJvcGVydGllcyBmcm9tIHNlbGVjdGVkIGZpbGVzXHJcblx0XHRjb25zdCBhbGxQcm9wZXJ0aWVzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblx0XHRcclxuXHRcdC8vIExvYWQgcHJvcGVydGllcyBzeW5jaHJvbm91c2x5IGZvciAubWQgZmlsZXMgZmlyc3RcclxuXHRcdGZvciAoY29uc3QgZmlsZVBhdGggb2YgdGhpcy5maWxlcykge1xyXG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiAhPT0gJ21keCcpIHtcclxuXHRcdFx0XHRjb25zdCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xyXG5cdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gbWV0YWRhdGE/LmZyb250bWF0dGVyO1xyXG5cdFx0XHRcdGlmIChmcm9udG1hdHRlcikge1xyXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBrZXkgaW4gZnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGtleSAhPT0gJ3RhZ3MnICYmIGtleSAhPT0gJ3RpdGxlJykge1xyXG5cdFx0XHRcdFx0XHRcdGFsbFByb3BlcnRpZXMuYWRkKGtleSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gUmVuZGVyIGNoZWNrYm94ZXMgZm9yIC5tZCBmaWxlIHByb3BlcnRpZXNcclxuXHRcdGZvciAoY29uc3QgcHJvcCBvZiBBcnJheS5mcm9tKGFsbFByb3BlcnRpZXMpLnNvcnQoKSkge1xyXG5cdFx0XHR0aGlzLmFkZFByb3BlcnR5Q2hlY2tib3gocHJvcGVydGllc0NvbnRhaW5lciwgcHJvcCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIExvYWQgTURYIGZpbGUgcHJvcGVydGllcyBhc3luY2hyb25vdXNseVxyXG5cdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIHRoaXMuZmlsZXMpIHtcclxuXHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuXHRcdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWR4Jykge1xyXG5cdFx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBhd2FpdCBnZXRGaWxlRnJvbnRtYXR0ZXIodGhpcy5hcHAsIGZpbGUpO1xyXG5cdFx0XHRcdFx0aWYgKGZyb250bWF0dGVyKSB7XHJcblx0XHRcdFx0XHRcdGZvciAoY29uc3Qga2V5IGluIGZyb250bWF0dGVyKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGtleSAhPT0gJ3RhZ3MnICYmIGtleSAhPT0gJ3RpdGxlJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFhbGxQcm9wZXJ0aWVzLmhhcyhrZXkpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGFsbFByb3BlcnRpZXMuYWRkKGtleSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCBjaGVja2JveCBmb3IgdGhpcyBwcm9wZXJ0eSBkeW5hbWljYWxseVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5jb250ZW50RWwgJiYgdGhpcy5jb250ZW50RWwuaXNDb25uZWN0ZWQgJiYgcHJvcGVydGllc0NvbnRhaW5lci5pc0Nvbm5lY3RlZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuYWRkUHJvcGVydHlDaGVja2JveChwcm9wZXJ0aWVzQ29udGFpbmVyLCBrZXkpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KSgpO1xyXG5cclxuXHRcdGlmIChhbGxQcm9wZXJ0aWVzLnNpemUgPT09IDApIHtcclxuXHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnTm8gcHJvcGVydGllcyBmb3VuZCBpbiBzZWxlY3RlZCBmaWxlcy4nIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEJ1dHRvbnNcclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuXHRcdGJ1dHRvbkNvbnRhaW5lci5hZGRDbGFzcygnYmFzZXMtY21zLW1vZGFsLWJ1dHRvbi1jb250YWluZXInKTtcclxuXHJcblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG5cdFx0Y2FuY2VsQnRuLnNldFRleHQoJ0NhbmNlbCcpO1xyXG5cdFx0Y2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcblx0XHRjb25zdCBhcHBseUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRhcHBseUJ0bi5zZXRUZXh0KCdBcHBseScpO1xyXG5cdFx0YXBwbHlCdG4uYWRkQ2xhc3MoJ21vZC1jdGEnKTtcclxuXHRcdGFwcGx5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0aWYgKHRoaXMucHJvcGVydGllc1RvUmVtb3ZlLnNpemUgPiAwKSB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcGx5Q2hhbmdlcygpO1xyXG5cdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSkoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhZGRQcm9wZXJ0eUNoZWNrYm94KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHByb3A6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyKVxyXG5cdFx0XHQuc2V0TmFtZShwcm9wKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wcm9wZXJ0aWVzVG9SZW1vdmUuaGFzKHByb3ApKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKHZhbHVlKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wcm9wZXJ0aWVzVG9SZW1vdmUuYWRkKHByb3ApO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucHJvcGVydGllc1RvUmVtb3ZlLmRlbGV0ZShwcm9wKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBhcHBseUNoYW5nZXMoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRmb3IgKGNvbnN0IHByb3Agb2YgdGhpcy5wcm9wZXJ0aWVzVG9SZW1vdmUpIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5idWxrT3BzLnJlbW92ZVByb3BlcnR5KHRoaXMuZmlsZXMsIHByb3ApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxuICogVG9vbGJhciBBY3Rpb25zXG4gKiBIYW5kbGVzIGFsbCBidWxrIG9wZXJhdGlvbiBhY3Rpb25zIGZyb20gdGhlIHRvb2xiYXJcbiAqL1xuXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBCYXNlc0NNU1BsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IEJ1bGtPcGVyYXRpb25zIH0gZnJvbSAnLi9idWxrLW9wZXJhdGlvbnMnO1xuaW1wb3J0IHsgTWFuYWdlVGFnc01vZGFsIH0gZnJvbSAnLi4vY29tcG9uZW50cy9tYW5hZ2UtdGFncy1tb2RhbCc7XG5pbXBvcnQgeyBTZXRQcm9wZXJ0eU1vZGFsIH0gZnJvbSAnLi4vY29tcG9uZW50cy9zZXQtcHJvcGVydHktbW9kYWwnO1xuaW1wb3J0IHsgUmVtb3ZlUHJvcGVydHlNb2RhbCB9IGZyb20gJy4uL2NvbXBvbmVudHMvcmVtb3ZlLXByb3BlcnR5LW1vZGFsJztcbmltcG9ydCB7IERlbGV0aW9uUHJldmlld01vZGFsIH0gZnJvbSAnLi4vY29tcG9uZW50cy9kZWxldGlvbi1wcmV2aWV3JztcbmltcG9ydCB7IEJ1bGtPcGVyYXRpb25Db25maXJtTW9kYWwgfSBmcm9tICcuLi9jb21wb25lbnRzL2J1bGstb3BlcmF0aW9uLWNvbmZpcm0nO1xuaW1wb3J0IHsgcHJlcGFyZURlbGV0aW9uUHJldmlldywgZXhlY3V0ZVNtYXJ0RGVsZXRpb24gfSBmcm9tICcuL3NtYXJ0LWRlbGV0aW9uJztcbmltcG9ydCB0eXBlIHsgQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvZGF0YS10cmFuc2Zvcm0nO1xuXG5leHBvcnQgY2xhc3MgVG9vbGJhckFjdGlvbnMge1xuXHRwcml2YXRlIGJ1bGtPcHM6IEJ1bGtPcGVyYXRpb25zO1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdHByaXZhdGUgYXBwOiBBcHAsXG5cdFx0cHJpdmF0ZSBwbHVnaW46IEJhc2VzQ01TUGx1Z2luLFxuXHRcdHByaXZhdGUgZ2V0U2VsZWN0ZWRGaWxlczogKCkgPT4gc3RyaW5nW10sXG5cdFx0cHJpdmF0ZSBjbGVhclNlbGVjdGlvbjogKCkgPT4gdm9pZCxcblx0XHRwcml2YXRlIHJlZnJlc2hWaWV3OiAoKSA9PiB2b2lkLFxuXHRcdHByaXZhdGUgc2hvd1Rvb2xiYXI6ICgpID0+IHZvaWRcblx0KSB7XG5cdFx0dGhpcy5idWxrT3BzID0gbmV3IEJ1bGtPcGVyYXRpb25zKGFwcCk7XG5cdH1cblxuXHRhc3luYyBoYW5kbGVTZXREcmFmdChzZXR0aW5ncz86IENNU1NldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgZmlsZXMgPSB0aGlzLmdldFNlbGVjdGVkRmlsZXMoKTtcblx0XHRpZiAoZmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybUJ1bGtPcGVyYXRpb25zKSB7XG5cdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBCdWxrT3BlcmF0aW9uQ29uZmlybU1vZGFsKFxuXHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0ZmlsZXMsXG5cdFx0XHRcdCdkcmFmdCcsXG5cdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmJ1bGtPcHMuc2V0RHJhZnQoZmlsZXMsIHRydWUsIHNldHRpbmdzKTtcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaFZpZXcoKTtcblx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhd2FpdCB0aGlzLmJ1bGtPcHMuc2V0RHJhZnQoZmlsZXMsIHRydWUsIHNldHRpbmdzKTtcblx0XHRcdHRoaXMucmVmcmVzaFZpZXcoKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBoYW5kbGVQdWJsaXNoKHNldHRpbmdzPzogQ01TU2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBmaWxlcyA9IHRoaXMuZ2V0U2VsZWN0ZWRGaWxlcygpO1xuXHRcdGlmIChmaWxlcy5sZW5ndGggPT09IDApIHJldHVybjtcblxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtQnVsa09wZXJhdGlvbnMpIHtcblx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEJ1bGtPcGVyYXRpb25Db25maXJtTW9kYWwoXG5cdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRmaWxlcyxcblx0XHRcdFx0J3B1Ymxpc2gnLFxuXHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5idWxrT3BzLnNldERyYWZ0KGZpbGVzLCBmYWxzZSwgc2V0dGluZ3MpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoVmlldygpO1xuXHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGF3YWl0IHRoaXMuYnVsa09wcy5zZXREcmFmdChmaWxlcywgZmFsc2UsIHNldHRpbmdzKTtcblx0XHRcdHRoaXMucmVmcmVzaFZpZXcoKTtcblx0XHR9XG5cdH1cblxuXHRoYW5kbGVNYW5hZ2VUYWdzKCk6IHZvaWQge1xuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5nZXRTZWxlY3RlZEZpbGVzKCk7XG5cdFx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTWFuYWdlVGFnc01vZGFsKHRoaXMuYXBwLCBmaWxlcyk7XG5cdFx0bW9kYWwub25DbG9zZSA9ICgpID0+IHtcblx0XHRcdC8vIEtlZXAgdG9vbGJhciB2aXNpYmxlIC0gZG9uJ3QgbGV0IGl0IGNsb3NlXG5cdFx0XHR0aGlzLnNob3dUb29sYmFyKCk7XG5cdFx0XHQvLyBSZWZyZXNoIHZpZXcgLSB0aGUgcmVmcmVzaFZpZXcgY2FsbGJhY2sgd2lsbCBwcmVzZXJ2ZSBzZWxlY3Rpb25cblx0XHRcdHRoaXMucmVmcmVzaFZpZXcoKTtcblx0XHR9O1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdGhhbmRsZVNldFByb3BlcnR5KCk6IHZvaWQge1xuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5nZXRTZWxlY3RlZEZpbGVzKCk7XG5cdFx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgU2V0UHJvcGVydHlNb2RhbCh0aGlzLmFwcCwgZmlsZXMpO1xuXHRcdG1vZGFsLm9uQ2xvc2UgPSAoKSA9PiB7XG5cdFx0XHQvLyBLZWVwIHRvb2xiYXIgdmlzaWJsZSAtIGRvbid0IGxldCBpdCBjbG9zZVxuXHRcdFx0dGhpcy5zaG93VG9vbGJhcigpO1xuXHRcdFx0Ly8gUmVmcmVzaCB2aWV3IC0gdGhlIHJlZnJlc2hWaWV3IGNhbGxiYWNrIHdpbGwgcHJlc2VydmUgc2VsZWN0aW9uXG5cdFx0XHR0aGlzLnJlZnJlc2hWaWV3KCk7XG5cdFx0fTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRoYW5kbGVSZW1vdmVQcm9wZXJ0eSgpOiB2b2lkIHtcblx0XHRjb25zdCBmaWxlcyA9IHRoaXMuZ2V0U2VsZWN0ZWRGaWxlcygpO1xuXHRcdGlmIChmaWxlcy5sZW5ndGggPT09IDApIHJldHVybjtcblxuXHRcdGNvbnN0IG1vZGFsID0gbmV3IFJlbW92ZVByb3BlcnR5TW9kYWwodGhpcy5hcHAsIGZpbGVzKTtcblx0XHRtb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xuXHRcdFx0Ly8gS2VlcCB0b29sYmFyIHZpc2libGUgLSBkb24ndCBsZXQgaXQgY2xvc2Vcblx0XHRcdHRoaXMuc2hvd1Rvb2xiYXIoKTtcblx0XHRcdC8vIFJlZnJlc2ggdmlldyAtIHRoZSByZWZyZXNoVmlldyBjYWxsYmFjayB3aWxsIHByZXNlcnZlIHNlbGVjdGlvblxuXHRcdFx0dGhpcy5yZWZyZXNoVmlldygpO1xuXHRcdH07XG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0YXN5bmMgaGFuZGxlRGVsZXRlKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5nZXRTZWxlY3RlZEZpbGVzKCk7XG5cdFx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1EZWxldGlvbnMpIHtcblx0XHRcdGNvbnN0IHByZXZpZXcgPSBhd2FpdCBwcmVwYXJlRGVsZXRpb25QcmV2aWV3KFxuXHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0ZmlsZXMsXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzXG5cdFx0XHQpO1xuXG5cdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBEZWxldGlvblByZXZpZXdNb2RhbChcblx0XHRcdFx0dGhpcy5hcHAsXG5cdFx0XHRcdHByZXZpZXcsXG5cdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG5cdFx0XHRcdFx0dGhpcy5yZWZyZXNoVmlldygpO1xuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBEaXJlY3QgZGVsZXRpb24gd2l0aG91dCBjb25maXJtYXRpb25cblx0XHRcdGNvbnN0IHByZXZpZXcgPSBhd2FpdCBwcmVwYXJlRGVsZXRpb25QcmV2aWV3KFxuXHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0ZmlsZXMsXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzXG5cdFx0XHQpO1xuXHRcdFx0YXdhaXQgZXhlY3V0ZVNtYXJ0RGVsZXRpb24odGhpcy5hcHAsIHByZXZpZXcpO1xuXHRcdFx0dGhpcy5jbGVhclNlbGVjdGlvbigpO1xuXHRcdFx0dGhpcy5yZWZyZXNoVmlldygpO1xuXHRcdH1cblx0fVxufVxuXG4iLCAiLyoqXHJcbiAqIEJ1bGsgT3BlcmF0aW9uIENvbmZpcm1hdGlvbiBNb2RhbFxyXG4gKiBTaG93cyBjb25maXJtYXRpb24gZGlhbG9nIGJlZm9yZSBwZXJmb3JtaW5nIGJ1bGsgb3BlcmF0aW9uc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY2xhc3MgQnVsa09wZXJhdGlvbkNvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRwcml2YXRlIGZpbGVzOiBzdHJpbmdbXTtcclxuXHRwcml2YXRlIG9wZXJhdGlvbjogJ2RyYWZ0JyB8ICdwdWJsaXNoJztcclxuXHRwcml2YXRlIG9uQ29uZmlybTogKCkgPT4gdm9pZDtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRhcHA6IEFwcCxcclxuXHRcdGZpbGVzOiBzdHJpbmdbXSxcclxuXHRcdG9wZXJhdGlvbjogJ2RyYWZ0JyB8ICdwdWJsaXNoJyxcclxuXHRcdG9uQ29uZmlybTogKCkgPT4gdm9pZFxyXG5cdCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMuZmlsZXMgPSBmaWxlcztcclxuXHRcdHRoaXMub3BlcmF0aW9uID0gb3BlcmF0aW9uO1xyXG5cdFx0dGhpcy5vbkNvbmZpcm0gPSBvbkNvbmZpcm07XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHJcblx0XHRjb25zdCBvcGVyYXRpb25OYW1lID0gdGhpcy5vcGVyYXRpb24gPT09ICdkcmFmdCcgPyAnbWFyayBhcyBkcmFmdCcgOiAnbWFyayBhcyBwdWJsaXNoZWQnO1xyXG5cdFx0Y29uc3QgaGVhZGluZ1RleHQgPSBvcGVyYXRpb25OYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgb3BlcmF0aW9uTmFtZS5zbGljZSgxKTtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZShgQ29uZmlybSAke2hlYWRpbmdUZXh0fWApLnNldEhlYWRpbmcoKTtcclxuXHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XHJcblx0XHRcdHRleHQ6IGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gJHtvcGVyYXRpb25OYW1lfSAke3RoaXMuZmlsZXMubGVuZ3RofSBmaWxlJHt0aGlzLmZpbGVzLmxlbmd0aCAhPT0gMSA/ICdzJyA6ICcnfT9gXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBTaG93IGZpbGUgbGlzdCAobGltaXRlZCB0byAyMClcclxuXHRcdGlmICh0aGlzLmZpbGVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Y29uc3QgZmlsZXNMaXN0ID0gY29udGVudEVsLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnYmFzZXMtY21zLWRlbGV0aW9uLWxpc3QnIH0pO1xyXG5cdFx0XHRmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIHRoaXMuZmlsZXMuc2xpY2UoMCwgMjApKSB7XHJcblx0XHRcdFx0Y29uc3QgbGkgPSBmaWxlc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XHJcblx0XHRcdFx0bGkuc2V0VGV4dChmaWxlUGF0aCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMuZmlsZXMubGVuZ3RoID4gMjApIHtcclxuXHRcdFx0XHRmaWxlc0xpc3QuY3JlYXRlRWwoJ2xpJywge1xyXG5cdFx0XHRcdFx0dGV4dDogYC4uLiBhbmQgJHt0aGlzLmZpbGVzLmxlbmd0aCAtIDIwfSBtb3JlIGZpbGUke3RoaXMuZmlsZXMubGVuZ3RoIC0gMjAgIT09IDEgPyAncycgOiAnJ31gXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBCdXR0b25zXHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcblx0XHRidXR0b25Db250YWluZXIuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1tb2RhbC1idXR0b24tY29udGFpbmVyJyk7XHJcblxyXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuXHRcdGNhbmNlbEJ0bi5zZXRUZXh0KCdDYW5jZWwnKTtcclxuXHRcdGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblxyXG5cdFx0Y29uc3QgY29uZmlybUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRjb25maXJtQnRuLnNldFRleHQoJ0NvbmZpcm0nKTtcclxuXHRcdGNvbmZpcm1CdG4uYWRkQ2xhc3MoJ21vZC1jdGEnKTtcclxuXHRcdGNvbmZpcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMub25Db25maXJtKCk7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgcmVhZENNU1NldHRpbmdzIH0gZnJvbSAnLi4vc2hhcmVkL3NldHRpbmdzLXNjaGVtYSc7XHJcbmltcG9ydCB0eXBlIHsgQmFzZXNDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbi8vIEJhc2VzIGNvbmZpZyBvYmplY3QgaW50ZXJmYWNlXHJcbmludGVyZmFjZSBCYXNlc0NvbmZpZyB7XHJcblx0Z2V0KGtleTogc3RyaW5nKTogdW5rbm93bjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldHVwIGludGVyY2VwdG9yIGZvciBuZXcgbm90ZSBidXR0b24gY2xpY2tzXHJcbiAqIEhhbmRsZXMgY3VzdG9tIG5ldyBub3RlIGxvY2F0aW9uIHNldHRpbmdzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBOZXdOb3RlSW50ZXJjZXB0b3IoXHJcblx0YXBwOiBBcHAsXHJcblx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxyXG5cdGNvbmZpZzogQmFzZXNDb25maWcsXHJcblx0cGx1Z2luU2V0dGluZ3M6IEJhc2VzQ01TU2V0dGluZ3MsXHJcblx0cmVnaXN0ZXJDbGVhbnVwOiAoY2xlYW51cDogKCkgPT4gdm9pZCkgPT4gdm9pZFxyXG4pOiB2b2lkIHtcclxuXHQvLyBJbnRlcmNlcHQgY2xpY2tzIG9uIHRoZSBuZXcgYnV0dG9uIC0gdXNlIGNhcHR1cmUgcGhhc2UgdG8gY2F0Y2ggYmVmb3JlIEJhc2VzXHJcblx0Y29uc3QgaW50ZXJjZXB0TmV3QnV0dG9uID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHJcblx0XHQvLyBUcnkgbXVsdGlwbGUgc2VsZWN0b3JzIGZvciB0aGUgbmV3IGJ1dHRvbiAtIEJhc2VzIG1pZ2h0IHVzZSBkaWZmZXJlbnQgc3RydWN0dXJlc1xyXG5cdFx0Y29uc3QgYnV0dG9uRWwgPSB0YXJnZXQuY2xvc2VzdCgnLmJhc2VzLXRvb2xiYXItbmV3LWl0ZW0tbWVudSwgLmJhc2VzLXRvb2xiYXItbmV3LWl0ZW0tbWVudSAudGV4dC1pY29uLWJ1dHRvbiwgW2RhdGEtYWN0aW9uPVwibmV3LWl0ZW1cIl0sIGJ1dHRvblthcmlhLWxhYmVsKj1cIm5ld1wiXSwgYnV0dG9uW2FyaWEtbGFiZWwqPVwiTmV3XCJdLCAuYmFzZXMtdG9vbGJhciBidXR0b24nKTtcclxuXHRcdFxyXG5cdFx0aWYgKCFidXR0b25FbCkge1xyXG5cdFx0XHRyZXR1cm47IC8vIE5vdCB0aGUgbmV3IGJ1dHRvblxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBEb24ndCBpbnRlcmZlcmUgd2l0aCBjbGlja3MgaW5zaWRlIHRoZSBidWxrIHRvb2xiYXIgb3Igb3RoZXIgQ01TIGVsZW1lbnRzXHJcblx0XHRpZiAodGFyZ2V0LmNsb3Nlc3QoJy5iYXNlcy1jbXMtYnVsay10b29sYmFyLCAuYmFzZXMtY21zLWNvbnRhaW5lciAuY2FyZCcpKSB7XHJcblx0XHRcdHJldHVybjsgLy8gTGV0IHRoZXNlIGNsaWNrcyB3b3JrIG5vcm1hbGx5XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIENoZWNrIGlmIHRoaXMgY2xpY2sgaXMgZm9yIE9VUiBzcGVjaWZpYyB2aWV3IGluc3RhbmNlXHJcblx0XHQvLyBHZXQgdGhlIGFjdGl2ZSB2aWV3IHRvIHNlZSB3aGljaCBvbmUgaXMgYWN0dWFsbHkgYWN0aXZlXHJcblx0XHRjb25zdCBhY3RpdmVMZWFmID0gKGFwcC53b3Jrc3BhY2UgYXMgdW5rbm93biBhcyB7IGFjdGl2ZUxlYWY/OiB7IHZpZXc/OiB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQ7IHJlYWRvbmx5IHR5cGU/OiBzdHJpbmcgfSB9IH0pLmFjdGl2ZUxlYWY7XHJcblx0XHRjb25zdCBhY3RpdmVWaWV3ID0gYWN0aXZlTGVhZj8udmlldztcclxuXHRcdGNvbnN0IGFjdGl2ZVZpZXdDb250YWluZXIgPSBhY3RpdmVWaWV3Py5jb250YWluZXJFbDtcclxuXHRcdFxyXG5cdFx0Ly8gRklSU1Q6IE9ubHkgaW50ZXJjZXB0IGlmIHRoZSBhY3RpdmUgdmlldyBpcyBhIENNUyB2aWV3ICh0eXBlID09PSAnYmFzZXMtY21zJylcclxuXHRcdC8vIFRoaXMgcHJldmVudHMgaW50ZXJjZXB0aW5nIHdoZW4gdXNlciBzd2l0Y2hlcyB0byB0YWJsZS9jYXJkcyB2aWV3XHJcblx0XHQvLyBDaGVjayB0aGUgY29udGFpbmVyIGZvciB0aGUgQ01TIGNsYXNzIGFzIGEgZmFsbGJhY2sgaWYgdHlwZSBpc24ndCBhdmFpbGFibGVcclxuXHRcdGNvbnN0IGlzQ01TVmlldyA9IGFjdGl2ZVZpZXc/LnR5cGUgPT09ICdiYXNlcy1jbXMnIHx8IFxyXG5cdFx0XHQoYWN0aXZlVmlld0NvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignLmJhc2VzLWNtcy1jb250YWluZXInKSAhPT0gbnVsbCk7XHJcblx0XHRcclxuXHRcdGlmICghaXNDTVNWaWV3KSB7XHJcblx0XHRcdHJldHVybjsgLy8gTm90IGEgQ01TIHZpZXcsIGxldCBCYXNlcyBoYW5kbGUgaXQgbm9ybWFsbHkgKGRvbid0IHByZXZlbnQgZGVmYXVsdClcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gU0VDT05EOiBDaGVjayBpZiBvdXIgY29udGFpbmVyIGlzIHdpdGhpbiB0aGUgYWN0aXZlIHZpZXcncyBjb250YWluZXIsIG9yIGlmIHRoZXkncmUgdGhlIHNhbWVcclxuXHRcdC8vIFRoZSBhY3RpdmUgdmlldydzIGNvbnRhaW5lckVsIGlzIHVzdWFsbHkgd29ya3NwYWNlLWxlYWYtY29udGVudCwgYW5kIG91ciBjb250YWluZXIgaXMgaW5zaWRlIGl0XHJcblx0XHRjb25zdCBpc091clZpZXcgPSBhY3RpdmVWaWV3Q29udGFpbmVyICYmIChcclxuXHRcdFx0YWN0aXZlVmlld0NvbnRhaW5lciA9PT0gY29udGFpbmVyRWwgfHwgXHJcblx0XHRcdGFjdGl2ZVZpZXdDb250YWluZXIuY29udGFpbnMoY29udGFpbmVyRWwpIHx8XHJcblx0XHRcdGNvbnRhaW5lckVsLmNvbnRhaW5zKGFjdGl2ZVZpZXdDb250YWluZXIpXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0XHRpZiAoIWlzT3VyVmlldykge1xyXG5cdFx0XHRyZXR1cm47IC8vIE5vdCBvdXIgdmlld1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBHZXQgdGhlIGNvbmZpZyBmcm9tIHRoZSB2aWV3IGluc3RhbmNlIHN0b3JlZCBvbiB0aGUgY29udGFpbmVyIC0gdGhpcyBlbnN1cmVzIHdlIGdldCB0aGUgY3VycmVudCBjb25maWdcclxuXHRcdGNvbnN0IGNvbnRhaW5lcldpdGhWaWV3ID0gY29udGFpbmVyRWwgYXMgdW5rbm93biBhcyB7IFxyXG5cdFx0XHRfX2Ntc0NvbmZpZz86IEJhc2VzQ29uZmlnO1xyXG5cdFx0XHRfX2Ntc1ZpZXc/OiB7IGNvbmZpZz86IEJhc2VzQ29uZmlnIH07XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHQvLyBUcnkgdG8gZ2V0IGNvbmZpZyBmcm9tIHRoZSB2aWV3IGluc3RhbmNlIGZpcnN0IChtb3N0IHJlbGlhYmxlKVxyXG5cdFx0Y29uc3Qgdmlld0luc3RhbmNlID0gY29udGFpbmVyV2l0aFZpZXcuX19jbXNWaWV3O1xyXG5cdFx0Y29uc3Qgdmlld0NvbmZpZyA9IHZpZXdJbnN0YW5jZT8uY29uZmlnIHx8IGNvbnRhaW5lcldpdGhWaWV3Ll9fY21zQ29uZmlnIHx8IGNvbmZpZztcclxuXHRcdFxyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSByZWFkQ01TU2V0dGluZ3Modmlld0NvbmZpZywgcGx1Z2luU2V0dGluZ3MpO1xyXG5cclxuXHRcdC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gaW50ZXJjZXB0OiBlaXRoZXIgXCJPcGVuIG5ldyBub3RlcyBkaXJlY3RseVwiIGlzIGVuYWJsZWQsIG9yIGEgbG9jYXRpb24gaXMgc3BlY2lmaWVkXHJcblx0XHRjb25zdCBoYXNDdXN0b21Mb2NhdGlvbiA9IHNldHRpbmdzLm5ld05vdGVMb2NhdGlvbiAmJiBzZXR0aW5ncy5uZXdOb3RlTG9jYXRpb24udHJpbSgpICE9PSAnJztcclxuXHRcdFxyXG5cdFx0aWYgKHNldHRpbmdzLmN1c3RvbWl6ZU5ld0J1dHRvbiB8fCBoYXNDdXN0b21Mb2NhdGlvbikge1xyXG5cdFx0XHQvLyBQcmV2ZW50IGRlZmF1bHQgdG8gaGFuZGxlIG5vdGUgY3JlYXRpb24gb3Vyc2VsdmVzXHJcblx0XHRcdC8vIChXZSBtdXN0IGludGVyY2VwdCBpZiBsb2NhdGlvbiBpcyBzZXQsIGV2ZW4gaWYgXCJPcGVuIG5ldyBub3RlcyBkaXJlY3RseVwiIGlzIG9mZixcclxuXHRcdFx0Ly8gYmVjYXVzZSBCYXNlcyBtb2RhbCBkb2Vzbid0IHN1cHBvcnQgY3VzdG9tIGxvY2F0aW9ucylcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSGFuZGxlIHRoZSBub3RlIGNyZWF0aW9uIGFzeW5jaHJvbm91c2x5XHJcblx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBsb2NhdGlvbklucHV0ID0gc2V0dGluZ3MubmV3Tm90ZUxvY2F0aW9uPy50cmltKCkgfHwgJyc7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSWYgbG9jYXRpb24gaXMgZW1wdHkgYW5kIFwiT3BlbiBuZXcgbm90ZXMgZGlyZWN0bHlcIiBpcyBvZmYsIHVzZSBPYnNpZGlhbidzIGRlZmF1bHRcclxuXHRcdFx0XHQvLyAoVGhpcyBjYXNlIHNob3VsZCBiZSByYXJlIHNpbmNlIHdlIG9ubHkgaW50ZXJjZXB0IGlmIGxvY2F0aW9uIGlzIHNldCBvciBvcHRpb24gaXMgb24pXHJcblx0XHRcdFx0aWYgKGxvY2F0aW9uSW5wdXQgPT09ICcnICYmICFzZXR0aW5ncy5jdXN0b21pemVOZXdCdXR0b24pIHtcclxuXHRcdFx0XHRcdC8vIFVzZSBPYnNpZGlhbidzIGRlZmF1bHQgbmV3IG5vdGUgbG9jYXRpb25cclxuXHRcdFx0XHRcdGNvbnN0IHZhdWx0Q29uZmlnID0gKGFwcC52YXVsdCBhcyB7IGNvbmZpZz86IHsgbmV3RmlsZUxvY2F0aW9uPzogc3RyaW5nOyBuZXdGaWxlRm9sZGVyUGF0aD86IHN0cmluZyB9IH0pLmNvbmZpZztcclxuXHRcdFx0XHRcdGNvbnN0IG5ld0ZpbGVMb2NhdGlvbiA9IHZhdWx0Q29uZmlnPy5uZXdGaWxlTG9jYXRpb24gfHwgJ2ZvbGRlcic7XHJcblx0XHRcdFx0XHRjb25zdCBuZXdGaWxlRm9sZGVyUGF0aCA9IHZhdWx0Q29uZmlnPy5uZXdGaWxlRm9sZGVyUGF0aCB8fCAnJztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0bGV0IGZpbGVQYXRoID0gJ1VudGl0bGVkLm1kJztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKG5ld0ZpbGVMb2NhdGlvbiA9PT0gJ2ZvbGRlcicgJiYgbmV3RmlsZUZvbGRlclBhdGgpIHtcclxuXHRcdFx0XHRcdFx0ZmlsZVBhdGggPSBgJHtuZXdGaWxlRm9sZGVyUGF0aH0vVW50aXRsZWQubWRgO1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChuZXdGaWxlTG9jYXRpb24gPT09ICdjdXJyZW50Jykge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBhY3RpdmVGaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0XHRcdGlmIChhY3RpdmVGaWxlICYmIGFjdGl2ZUZpbGUucGFyZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0ZmlsZVBhdGggPSBgJHthY3RpdmVGaWxlLnBhcmVudC5wYXRofS9VbnRpdGxlZC5tZGA7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAobmV3RmlsZUxvY2F0aW9uID09PSAncm9vdCcpIHtcclxuXHRcdFx0XHRcdFx0ZmlsZVBhdGggPSAnVW50aXRsZWQubWQnO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgJycpO1xyXG5cdFx0XHRcdFx0Ly8gT25seSBvcGVuIGRpcmVjdGx5IGlmIFwiT3BlbiBuZXcgbm90ZXMgZGlyZWN0bHlcIiBpcyBlbmFibGVkXHJcblx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuY3VzdG9taXplTmV3QnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IGFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGUucGF0aCwgJycsIGZhbHNlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSWYgbG9jYXRpb24gaXMgXCIvXCIgb3IganVzdCBzbGFzaGVzLCB1c2UgdmF1bHQgcm9vdFxyXG5cdFx0XHRcdGlmIChsb2NhdGlvbklucHV0ID09PSAnLycgfHwgbG9jYXRpb25JbnB1dC5yZXBsYWNlKC9cXC8vZywgJycpID09PSAnJykge1xyXG5cdFx0XHRcdFx0Y29uc3QgbmV3RmlsZSA9IGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoJ1VudGl0bGVkLm1kJywgJycpO1xyXG5cdFx0XHRcdFx0Ly8gT25seSBvcGVuIGRpcmVjdGx5IGlmIFwiT3BlbiBuZXcgbm90ZXMgZGlyZWN0bHlcIiBpcyBlbmFibGVkXHJcblx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuY3VzdG9taXplTmV3QnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IGFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KG5ld0ZpbGUucGF0aCwgJycsIGZhbHNlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCB1c2UgdGhlIHNwZWNpZmllZCBmb2xkZXJcclxuXHRcdFx0XHRjb25zdCBmb2xkZXJQYXRoID0gbG9jYXRpb25JbnB1dC5yZXBsYWNlKC9eXFwvK3xcXC8rJC9nLCAnJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0bGV0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCFmb2xkZXIgfHwgISgnY2hpbGRyZW4nIGluIGZvbGRlcikpIHtcclxuXHRcdFx0XHRcdGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XHJcblx0XHRcdFx0XHRmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZm9sZGVyICYmICdjaGlsZHJlbicgaW4gZm9sZGVyKSB7XHJcblx0XHRcdFx0XHRjb25zdCBuZXdGaWxlID0gYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShgJHtmb2xkZXJQYXRofS9VbnRpdGxlZC5tZGAsICcnKTtcclxuXHRcdFx0XHRcdC8vIE9ubHkgb3BlbiBkaXJlY3RseSBpZiBcIk9wZW4gbmV3IG5vdGVzIGRpcmVjdGx5XCIgaXMgZW5hYmxlZFxyXG5cdFx0XHRcdFx0aWYgKHNldHRpbmdzLmN1c3RvbWl6ZU5ld0J1dHRvbikge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCBhcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChuZXdGaWxlLnBhdGgsICcnLCBmYWxzZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KSgpLmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1tDTVNdIEVycm9yIGNyZWF0aW5nIG5ldyBub3RlOicsIGVycm9yKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gQWRkIGV2ZW50IGxpc3RlbmVyIHRvIGRvY3VtZW50IHdpdGggY2FwdHVyZSBwaGFzZSB0byBpbnRlcmNlcHQgYmVmb3JlIEJhc2VzXHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnRlcmNlcHROZXdCdXR0b24gYXMgRXZlbnRMaXN0ZW5lciwgdHJ1ZSk7XHJcblx0XHJcblx0Ly8gQWxzbyB0cnkgdG8gaW50ZXJjZXB0IG9uIHRoZSBidXR0b24gZGlyZWN0bHkgd2hlbiBpdCBhcHBlYXJzXHJcblx0Y29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XHJcblx0XHRjb25zdCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhc2VzLXRvb2xiYXItbmV3LWl0ZW0tbWVudSwgLmJhc2VzLXRvb2xiYXItbmV3LWl0ZW0tbWVudSAudGV4dC1pY29uLWJ1dHRvbiwgW2RhdGEtYWN0aW9uPVwibmV3LWl0ZW1cIl0nKTtcclxuXHRcdGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uRWwpID0+IHtcclxuXHRcdFx0Y29uc3QgYnV0dG9uV2l0aEZsYWcgPSBidXR0b25FbCBhcyB1bmtub3duIGFzIHsgX19jbXNJbnRlcmNlcHRlZD86IGJvb2xlYW4gfTtcclxuXHRcdFx0aWYgKCFidXR0b25XaXRoRmxhZy5fX2Ntc0ludGVyY2VwdGVkKSB7XHJcblx0XHRcdFx0YnV0dG9uV2l0aEZsYWcuX19jbXNJbnRlcmNlcHRlZCA9IHRydWU7XHJcblx0XHRcdFx0YnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnRlcmNlcHROZXdCdXR0b24gYXMgRXZlbnRMaXN0ZW5lciwgdHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0pO1xyXG5cclxuXHRvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xyXG5cdFxyXG5cdC8vIENoZWNrIGltbWVkaWF0ZWx5XHJcblx0Y29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXNlcy10b29sYmFyLW5ldy1pdGVtLW1lbnUsIC5iYXNlcy10b29sYmFyLW5ldy1pdGVtLW1lbnUgLnRleHQtaWNvbi1idXR0b24sIFtkYXRhLWFjdGlvbj1cIm5ldy1pdGVtXCJdJyk7XHJcblx0YnV0dG9ucy5mb3JFYWNoKChidXR0b25FbCkgPT4ge1xyXG5cdFx0Y29uc3QgYnV0dG9uV2l0aEZsYWcgPSBidXR0b25FbCBhcyB1bmtub3duIGFzIHsgX19jbXNJbnRlcmNlcHRlZD86IGJvb2xlYW4gfTtcclxuXHRcdGlmICghYnV0dG9uV2l0aEZsYWcuX19jbXNJbnRlcmNlcHRlZCkge1xyXG5cdFx0XHRidXR0b25XaXRoRmxhZy5fX2Ntc0ludGVyY2VwdGVkID0gdHJ1ZTtcclxuXHRcdFx0YnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnRlcmNlcHROZXdCdXR0b24gYXMgRXZlbnRMaXN0ZW5lciwgdHJ1ZSk7XHJcblx0XHR9XHJcblx0fSk7XHJcblx0XHJcblx0Ly8gUmVnaXN0ZXIgY2xlYW51cFxyXG5cdHJlZ2lzdGVyQ2xlYW51cCgoKSA9PiB7XHJcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGludGVyY2VwdE5ld0J1dHRvbiBhcyBFdmVudExpc3RlbmVyLCB0cnVlKTtcclxuXHRcdG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHR9KTtcclxufVxyXG5cclxuXHJcbiIsICIvKipcclxuICogUHJvcGVydHkgVG9nZ2xlIEhhbmRsZXJcclxuICogSGFuZGxlcyB0b2dnbGluZyBwcm9wZXJ0aWVzIG9uIGZpbGVzIChpbmNsdWRpbmcgZHJhZnQgc3RhdHVzKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IHJlYWRDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3NoYXJlZC9zZXR0aW5ncy1zY2hlbWEnO1xyXG5pbXBvcnQgdHlwZSB7IEJhc2VzQ01TU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIgfSBmcm9tICcuL2Zyb250bWF0dGVyLWhlbHBlcic7XHJcblxyXG5pbnRlcmZhY2UgQmFzZXNDb25maWcge1xyXG5cdGdldChrZXk6IHN0cmluZyk6IHVua25vd247XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eVRvZ2dsZUhhbmRsZXIge1xyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0cHJpdmF0ZSBhcHA6IEFwcCxcclxuXHRcdHByaXZhdGUgY29uZmlnOiBCYXNlc0NvbmZpZyxcclxuXHRcdHByaXZhdGUgcGx1Z2luU2V0dGluZ3M6IEJhc2VzQ01TU2V0dGluZ3MsXHJcblx0XHRwcml2YXRlIG9uUmVmcmVzaDogKCkgPT4gdm9pZFxyXG5cdCkge31cclxuXHJcblx0YXN5bmMgaGFuZGxlUHJvcGVydHlUb2dnbGUocGF0aDogc3RyaW5nLCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bik6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcclxuXHRcdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0Ly8gU3RyaXAgXCJub3RlLlwiIHByZWZpeCBpZiBwcmVzZW50IChCYXNlcyB1c2VzIFwibm90ZS5wcm9wZXJ0eVwiIGJ1dCBmcm9udG1hdHRlciB1c2VzIGp1c3QgXCJwcm9wZXJ0eVwiKVxyXG5cdFx0XHRjb25zdCBjbGVhblByb3BlcnR5ID0gcHJvcGVydHkuc3RhcnRzV2l0aCgnbm90ZS4nKSA/IHByb3BlcnR5LnN1YnN0cmluZyg1KSA6IHByb3BlcnR5O1xyXG5cclxuXHRcdFx0Ly8gUmVhZCBzZXR0aW5ncyB0byBjaGVjayBpZiB0aGlzIGlzIHRoZSBkcmFmdCBwcm9wZXJ0eVxyXG5cdFx0XHRjb25zdCBzZXR0aW5ncyA9IHJlYWRDTVNTZXR0aW5ncyhcclxuXHRcdFx0XHR0aGlzLmNvbmZpZyxcclxuXHRcdFx0XHR0aGlzLnBsdWdpblNldHRpbmdzXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIHRoZSBkcmFmdCBzdGF0dXMgcHJvcGVydHlcclxuXHRcdFx0Y29uc3QgaXNEcmFmdFByb3BlcnR5ID0gc2V0dGluZ3Muc2hvd0RyYWZ0U3RhdHVzICYmIGNsZWFuUHJvcGVydHkgPT09ICdkcmFmdCc7XHJcblx0XHRcdGxldCBzaG91bGRSZWZyZXNoID0gZmFsc2U7XHJcblxyXG5cdFx0XHRpZiAoaXNEcmFmdFByb3BlcnR5KSB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdXNpbmcgZmlsZW5hbWUgcHJlZml4IG1vZGVcclxuXHRcdFx0XHRpZiAoc2V0dGluZ3MuZHJhZnRTdGF0dXNVc2VGaWxlbmFtZVByZWZpeCkge1xyXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHVzZSBmaWxlbmFtZS1iYXNlZCBkZXRlY3Rpb24gd2hlbiB0aGlzIHNldHRpbmcgaXMgZW5hYmxlZFxyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBmaWxlLmJhc2VuYW1lOyAvLyBiYXNlbmFtZSBleGNsdWRlcyBleHRlbnNpb25cclxuXHRcdFx0XHRcdGNvbnN0IHN0YXJ0c1dpdGhVbmRlcnNjb3JlID0gZmlsZU5hbWUuc3RhcnRzV2l0aCgnXycpO1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFBhdGggPSBmaWxlLnBhdGg7XHJcblx0XHRcdFx0XHRjb25zdCBwYXRoUGFydHMgPSBjdXJyZW50UGF0aC5zcGxpdCgnLycpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBUb2dnbGUgYmFzZWQgb24gZGVzaXJlZCBzdGF0ZTogaWYgdmFsdWUgaXMgdHJ1ZSAoZHJhZnQpLCBlbnN1cmUgdW5kZXJzY29yZTsgaWYgZmFsc2UgKHB1Ymxpc2hlZCksIHJlbW92ZSBpdFxyXG5cdFx0XHRcdFx0aWYgKHZhbHVlID09PSB0cnVlKSB7XHJcblx0XHRcdFx0XHRcdC8vIFRvZ2dsaW5nIHRvIGRyYWZ0IC0gYWRkIHVuZGVyc2NvcmUgaWYgbm90IHByZXNlbnRcclxuXHRcdFx0XHRcdFx0aWYgKCFzdGFydHNXaXRoVW5kZXJzY29yZSkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld05hbWUgPSBgXyR7ZmlsZU5hbWV9JHtmaWxlLmV4dGVuc2lvbiA/IGAuJHtmaWxlLmV4dGVuc2lvbn1gIDogJyd9YDtcclxuXHRcdFx0XHRcdFx0XHRwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdID0gbmV3TmFtZTtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBuZXdQYXRoID0gcGF0aFBhcnRzLmpvaW4oJy8nKTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xyXG5cdFx0XHRcdFx0XHRcdHNob3VsZFJlZnJlc2ggPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBUb2dnbGluZyB0byBwdWJsaXNoZWQgLSByZW1vdmUgdW5kZXJzY29yZSBpZiBwcmVzZW50XHJcblx0XHRcdFx0XHRcdGlmIChzdGFydHNXaXRoVW5kZXJzY29yZSkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld05hbWUgPSBmaWxlTmFtZS5zdWJzdHJpbmcoMSkgKyAoZmlsZS5leHRlbnNpb24gPyBgLiR7ZmlsZS5leHRlbnNpb259YCA6ICcnKTtcclxuXHRcdFx0XHRcdFx0XHRwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdID0gbmV3TmFtZTtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBuZXdQYXRoID0gcGF0aFBhcnRzLmpvaW4oJy8nKTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xyXG5cdFx0XHRcdFx0XHRcdHNob3VsZFJlZnJlc2ggPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFVzZSBwcm9wZXJ0eS1iYXNlZCBkZXRlY3Rpb24gKGZyb250bWF0dGVyKVxyXG5cdFx0XHRcdFx0Y29uc3QgY2xlYW5Db25maWdQcm9wZXJ0eSA9IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHkgJiYgc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS50cmltKClcclxuXHRcdFx0XHRcdFx0PyAoc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS5zdGFydHNXaXRoKCdub3RlLicpIFxyXG5cdFx0XHRcdFx0XHRcdD8gc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS5zdWJzdHJpbmcoNSkgXHJcblx0XHRcdFx0XHRcdFx0OiBzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5KVxyXG5cdFx0XHRcdFx0XHQ6ICdkcmFmdCc7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGF3YWl0IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIodGhpcy5hcHAsIGZpbGUsIChmcm9udG1hdHRlcikgPT4ge1xyXG5cdFx0XHRcdFx0XHRmcm9udG1hdHRlcltjbGVhbkNvbmZpZ1Byb3BlcnR5XSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRzaG91bGRSZWZyZXNoID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gTm9ybWFsIHByb3BlcnR5IHRvZ2dsZSAtIHVwZGF0ZSBmcm9udG1hdHRlclxyXG5cdFx0XHRcdGF3YWl0IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIodGhpcy5hcHAsIGZpbGUsIChmcm9udG1hdHRlcikgPT4ge1xyXG5cdFx0XHRcdFx0ZnJvbnRtYXR0ZXJbY2xlYW5Qcm9wZXJ0eV0gPSB2YWx1ZTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRzaG91bGRSZWZyZXNoID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gT25seSByZWZyZXNoIGlmIHdlIGFjdHVhbGx5IG1hZGUgYSBjaGFuZ2VcclxuXHRcdFx0aWYgKHNob3VsZFJlZnJlc2gpIHtcclxuXHRcdFx0XHQvLyBXYWl0IGZvciBtZXRhZGF0YSBjYWNoZSB0byB1cGRhdGUsIHRoZW4gcmVmcmVzaCB2aWV3XHJcblx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLm9uUmVmcmVzaCgpO1xyXG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlZnJlc2hpbmcgdmlldyBhZnRlciBwcm9wZXJ0eSB0b2dnbGU6JywgZXJyb3IpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9LCAxMDApO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciB0b2dnbGluZyBwcm9wZXJ0eTonLCBlcnJvcik7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBTY3JvbGwgYW5kIExheW91dCBNYW5hZ2VyXHJcbiAqIEhhbmRsZXMgaW5maW5pdGUgc2Nyb2xsIGFuZCByZXNwb25zaXZlIGdyaWQgbGF5b3V0XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgdHlwZSB7IENNU1NldHRpbmdzIH0gZnJvbSAnLi4vc2hhcmVkL2RhdGEtdHJhbnNmb3JtJztcclxuaW1wb3J0IHsgcmVhZENNU1NldHRpbmdzIH0gZnJvbSAnLi4vc2hhcmVkL3NldHRpbmdzLXNjaGVtYSc7XHJcbmltcG9ydCB0eXBlIHsgQmFzZXNDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbmludGVyZmFjZSBCYXNlc0NvbmZpZyB7XHJcblx0Z2V0KGtleTogc3RyaW5nKTogdW5rbm93bjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNjcm9sbExheW91dE1hbmFnZXIge1xyXG5cdHByaXZhdGUgc2Nyb2xsTGlzdGVuZXI6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgc2Nyb2xsVGhyb3R0bGVUaW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIHJlc2l6ZU9ic2VydmVyOiBSZXNpemVPYnNlcnZlciB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgd2luZG93UmVzaXplSGFuZGxlcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBpc0xvYWRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRwcml2YXRlIGRpc3BsYXllZENvdW50OiBudW1iZXIgPSA1MDtcclxuXHRwcml2YXRlIHRvdGFsRW50cmllczogbnVtYmVyID0gMDtcclxuXHRwcml2YXRlIGNvbmZpZzogQmFzZXNDb25maWc7XHJcblx0cHJpdmF0ZSBjb25maWdQb2xsSW50ZXJ2YWw6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgbGFzdENhcmRTaXplOiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIGxhc3RJbWFnZUFzcGVjdFJhdGlvOiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcml2YXRlIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuXHRcdHByaXZhdGUgYXBwOiBBcHAsXHJcblx0XHRjb25maWc6IEJhc2VzQ29uZmlnLFxyXG5cdFx0cHJpdmF0ZSBwbHVnaW5TZXR0aW5nczogQmFzZXNDTVNTZXR0aW5ncyxcclxuXHRcdHByaXZhdGUgb25Mb2FkTW9yZTogKCkgPT4gdm9pZCxcclxuXHRcdHByaXZhdGUgcmVnaXN0ZXJDbGVhbnVwOiAoY2xlYW51cDogKCkgPT4gdm9pZCkgPT4gdm9pZFxyXG5cdCkge1xyXG5cdFx0dGhpcy5jb25maWcgPSBjb25maWc7XHJcblx0XHRjb25zdCBpc01vYmlsZSA9ICh0aGlzLmFwcCBhcyB7IGlzTW9iaWxlPzogYm9vbGVhbiB9KS5pc01vYmlsZSA/PyBmYWxzZTtcclxuXHRcdHRoaXMuZGlzcGxheWVkQ291bnQgPSBpc01vYmlsZSA/IDI1IDogNTA7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgdGhlIGNvbmZpZyByZWZlcmVuY2UgKHVzZWZ1bCB3aGVuIGNvbmZpZyBiZWNvbWVzIGF2YWlsYWJsZSBhZnRlciBjb25zdHJ1Y3Rpb24pXHJcblx0ICovXHJcblx0dXBkYXRlQ29uZmlnKGNvbmZpZzogQmFzZXNDb25maWcpOiB2b2lkIHtcclxuXHRcdHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG5cdH1cclxuXHJcblx0c2V0RGlzcGxheWVkQ291bnQoY291bnQ6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0dGhpcy5kaXNwbGF5ZWRDb3VudCA9IGNvdW50O1xyXG5cdH1cclxuXHJcblx0Z2V0RGlzcGxheWVkQ291bnQoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLmRpc3BsYXllZENvdW50O1xyXG5cdH1cclxuXHJcblx0c2V0SXNMb2FkaW5nKGxvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdHRoaXMuaXNMb2FkaW5nID0gbG9hZGluZztcclxuXHR9XHJcblxyXG5cdHNldHVwSW5maW5pdGVTY3JvbGwodG90YWxFbnRyaWVzOiBudW1iZXIpOiB2b2lkIHtcclxuXHRcdHRoaXMudG90YWxFbnRyaWVzID0gdG90YWxFbnRyaWVzO1xyXG5cdFx0XHJcblx0XHQvLyBDbGVhbiB1cCBleGlzdGluZyBsaXN0ZW5lclxyXG5cdFx0aWYgKHRoaXMuc2Nyb2xsTGlzdGVuZXIpIHtcclxuXHRcdFx0dGhpcy5jb250YWluZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnNjcm9sbExpc3RlbmVyKTtcclxuXHRcdFx0dGhpcy5zY3JvbGxMaXN0ZW5lciA9IG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2tpcCBpZiBhbGwgaXRlbXMgYWxyZWFkeSBkaXNwbGF5ZWRcclxuXHRcdGlmICh0aGlzLmRpc3BsYXllZENvdW50ID49IHRvdGFsRW50cmllcykge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIHNjcm9sbCBoYW5kbGVyIHdpdGggdGhyb3R0bGluZ1xyXG5cdFx0dGhpcy5zY3JvbGxMaXN0ZW5lciA9ICgpID0+IHtcclxuXHRcdFx0Ly8gVGhyb3R0bGU6IHNraXAgaWYgY29vbGRvd24gYWN0aXZlXHJcblx0XHRcdGlmICh0aGlzLnNjcm9sbFRocm90dGxlVGltZW91dCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU2tpcCBpZiBhbHJlYWR5IGxvYWRpbmdcclxuXHRcdFx0aWYgKHRoaXMuaXNMb2FkaW5nKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDYWxjdWxhdGUgZGlzdGFuY2UgZnJvbSBib3R0b21cclxuXHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gdGhpcy5jb250YWluZXJFbC5zY3JvbGxUb3A7XHJcblx0XHRcdGNvbnN0IHNjcm9sbEhlaWdodCA9IHRoaXMuY29udGFpbmVyRWwuc2Nyb2xsSGVpZ2h0O1xyXG5cdFx0XHRjb25zdCBjbGllbnRIZWlnaHQgPSB0aGlzLmNvbnRhaW5lckVsLmNsaWVudEhlaWdodDtcclxuXHRcdFx0Y29uc3QgZGlzdGFuY2VGcm9tQm90dG9tID0gc2Nyb2xsSGVpZ2h0IC0gKHNjcm9sbFRvcCArIGNsaWVudEhlaWdodCk7XHJcblxyXG5cdFx0XHQvLyBEeW5hbWljIHRocmVzaG9sZCBiYXNlZCBvbiB2aWV3cG9ydCBhbmQgZGV2aWNlXHJcblx0XHRcdGNvbnN0IGlzTW9iaWxlID0gKHRoaXMuYXBwIGFzIHsgaXNNb2JpbGU/OiBib29sZWFuIH0pLmlzTW9iaWxlID8/IGZhbHNlO1xyXG5cdFx0XHRjb25zdCB2aWV3cG9ydE11bHRpcGxpZXIgPSBpc01vYmlsZSA/IDEgOiAyO1xyXG5cdFx0XHRjb25zdCB0aHJlc2hvbGQgPSBjbGllbnRIZWlnaHQgKiB2aWV3cG9ydE11bHRpcGxpZXI7XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiBzaG91bGQgbG9hZCBtb3JlXHJcblx0XHRcdGlmIChkaXN0YW5jZUZyb21Cb3R0b20gPCB0aHJlc2hvbGQgJiYgdGhpcy5kaXNwbGF5ZWRDb3VudCA8IHRvdGFsRW50cmllcykge1xyXG5cdFx0XHRcdHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcclxuXHRcdFx0XHRjb25zdCBiYXRjaFNpemUgPSA1MDtcclxuXHRcdFx0XHR0aGlzLmRpc3BsYXllZENvdW50ID0gTWF0aC5taW4odGhpcy5kaXNwbGF5ZWRDb3VudCArIGJhdGNoU2l6ZSwgdG90YWxFbnRyaWVzKTtcclxuXHRcdFx0XHQvLyBDYWxsIG9uTG9hZE1vcmUgd2hpY2ggd2lsbCB0cmlnZ2VyIG9uRGF0YVVwZGF0ZWRcclxuXHRcdFx0XHQvLyBvbkRhdGFVcGRhdGVkIHdpbGwgdGhlbiBjYWxsIHNldHVwSW5maW5pdGVTY3JvbGwgYWdhaW4gd2l0aCB1cGRhdGVkIGNvdW50XHJcblx0XHRcdFx0dGhpcy5vbkxvYWRNb3JlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFN0YXJ0IHRocm90dGxlIGNvb2xkb3duXHJcblx0XHRcdHRoaXMuc2Nyb2xsVGhyb3R0bGVUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuc2Nyb2xsVGhyb3R0bGVUaW1lb3V0ID0gbnVsbDtcclxuXHRcdFx0fSwgMTAwKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gQXR0YWNoIGxpc3RlbmVyXHJcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsTGlzdGVuZXIpO1xyXG5cclxuXHRcdC8vIFJlZ2lzdGVyIGNsZWFudXBcclxuXHRcdHRoaXMucmVnaXN0ZXJDbGVhbnVwKCgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuc2Nyb2xsTGlzdGVuZXIpIHtcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW5lckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsTGlzdGVuZXIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLnNjcm9sbFRocm90dGxlVGltZW91dCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zY3JvbGxUaHJvdHRsZVRpbWVvdXQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHNldHVwUmVzaXplT2JzZXJ2ZXIoKTogdm9pZCB7XHJcblx0XHQvLyBPbmx5IHNldCB1cCBvbmNlIC0gYnV0IG5vdyB3ZSBqdXN0IG5lZWQgdG8gc2V0IHRoZSBjYXJkIG1pbiB3aWR0aFxyXG5cdFx0Ly8gQ1NTIEdyaWQncyBhdXRvLWZpbGwgd2lsbCBoYW5kbGUgY29sdW1uIHNuYXBwaW5nIGF1dG9tYXRpY2FsbHlcclxuXHRcdGlmICh0aGlzLnJlc2l6ZU9ic2VydmVyKSB7XHJcblx0XHRcdHJldHVybjsgLy8gQWxyZWFkeSBzZXQgdXBcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDcmVhdGUgdGhlIHVwZGF0ZSBmdW5jdGlvbiAtIGp1c3Qgc2V0IGNhcmQgbWluIHdpZHRoLCBDU1MgR3JpZCBoYW5kbGVzIHRoZSByZXN0XHJcblx0XHRjb25zdCB1cGRhdGVHcmlkID0gKCkgPT4ge1xyXG5cdFx0XHQvLyBHdWFyZDogZW5zdXJlIGNvbmZpZyBleGlzdHMgYW5kIGhhcyBnZXQgbWV0aG9kIGJlZm9yZSB1c2luZyBpdFxyXG5cdFx0XHRpZiAoIXRoaXMuY29uZmlnIHx8IHR5cGVvZiB0aGlzLmNvbmZpZy5nZXQgIT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRyZXR1cm47IC8vIENvbmZpZyBub3QgcmVhZHkgeWV0LCBza2lwIHVwZGF0ZVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBjdXJyZW50U2V0dGluZ3MgPSByZWFkQ01TU2V0dGluZ3MoXHJcblx0XHRcdFx0dGhpcy5jb25maWcsXHJcblx0XHRcdFx0dGhpcy5wbHVnaW5TZXR0aW5nc1xyXG5cdFx0XHQpO1xyXG5cdFx0XHRjb25zdCBjYXJkTWluV2lkdGggPSBjdXJyZW50U2V0dGluZ3MuY2FyZFNpemU7XHJcblx0XHRcdGNvbnN0IGltYWdlQXNwZWN0UmF0aW8gPSBjdXJyZW50U2V0dGluZ3MuaW1hZ2VBc3BlY3RSYXRpbztcclxuXHJcblx0XHRcdC8vIFNldCBDU1MgdmFyaWFibGVzIG9uIGNvbnRhaW5lciAtIENTUyBHcmlkIGF1dG8tZmlsbCBoYW5kbGVzIGNvbHVtbiBzbmFwcGluZ1xyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhcmQtbWluLXdpZHRoJywgYCR7Y2FyZE1pbldpZHRofXB4YCk7XHJcblx0XHRcdHRoaXMuY29udGFpbmVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tYmFzZXMtY21zLWltYWdlLWFzcGVjdC1yYXRpbycsIFN0cmluZyhpbWFnZUFzcGVjdFJhdGlvKSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBUcmFjayBsYXN0IHZhbHVlcyBmb3IgcG9sbGluZ1xyXG5cdFx0XHR0aGlzLmxhc3RDYXJkU2l6ZSA9IGNhcmRNaW5XaWR0aDtcclxuXHRcdFx0dGhpcy5sYXN0SW1hZ2VBc3BlY3RSYXRpbyA9IGltYWdlQXNwZWN0UmF0aW87XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFNldCB1cCBSZXNpemVPYnNlcnZlciB0byBjYWxsIHVwZGF0ZUdyaWQgd2hlbiBjb250YWluZXIgcmVzaXplc1xyXG5cdFx0dGhpcy5yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcih1cGRhdGVHcmlkKTtcclxuXHRcdHRoaXMucmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmNvbnRhaW5lckVsKTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2FsbCB1cGRhdGVHcmlkIGltbWVkaWF0ZWx5IHRvIHNldCBpbml0aWFsIHZhbHVlc1xyXG5cdFx0dXBkYXRlR3JpZCgpO1xyXG5cdFx0XHJcblx0XHQvLyBTZXQgdXAgcG9sbGluZyB0byBkZXRlY3QgY29uZmlnIGNoYW5nZXMgKGZvciByZWFsLXRpbWUgdXBkYXRlcyB3aGVuIGNhcmQgc2l6ZSBjaGFuZ2VzKVxyXG5cdFx0Ly8gUG9sbCBldmVyeSAxMDBtcyB0byBjaGVjayBpZiBjYXJkU2l6ZSBvciBpbWFnZUFzcGVjdFJhdGlvIGhhcyBjaGFuZ2VkXHJcblx0XHR0aGlzLmNvbmZpZ1BvbGxJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdGlmICghdGhpcy5jb25maWcgfHwgdHlwZW9mIHRoaXMuY29uZmlnLmdldCAhPT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdHJldHVybjsgLy8gQ29uZmlnIG5vdCByZWFkeSB5ZXQsIHNraXAgY2hlY2tcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgY3VycmVudFNldHRpbmdzID0gcmVhZENNU1NldHRpbmdzKFxyXG5cdFx0XHRcdHRoaXMuY29uZmlnLFxyXG5cdFx0XHRcdHRoaXMucGx1Z2luU2V0dGluZ3NcclxuXHRcdFx0KTtcclxuXHRcdFx0Y29uc3QgY3VycmVudENhcmRTaXplID0gY3VycmVudFNldHRpbmdzLmNhcmRTaXplO1xyXG5cdFx0XHRjb25zdCBjdXJyZW50SW1hZ2VBc3BlY3RSYXRpbyA9IGN1cnJlbnRTZXR0aW5ncy5pbWFnZUFzcGVjdFJhdGlvO1xyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgY2FyZFNpemUgb3IgaW1hZ2VBc3BlY3RSYXRpbyBoYXMgY2hhbmdlZFxyXG5cdFx0XHRpZiAodGhpcy5sYXN0Q2FyZFNpemUgIT09IGN1cnJlbnRDYXJkU2l6ZSB8fCB0aGlzLmxhc3RJbWFnZUFzcGVjdFJhdGlvICE9PSBjdXJyZW50SW1hZ2VBc3BlY3RSYXRpbykge1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSBncmlkIGxheW91dCBpbW1lZGlhdGVseSB3aGVuIHNldHRpbmdzIGNoYW5nZVxyXG5cdFx0XHRcdHRoaXMuY29udGFpbmVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FyZC1taW4td2lkdGgnLCBgJHtjdXJyZW50Q2FyZFNpemV9cHhgKTtcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW5lckVsLnN0eWxlLnNldFByb3BlcnR5KCctLWJhc2VzLWNtcy1pbWFnZS1hc3BlY3QtcmF0aW8nLCBTdHJpbmcoY3VycmVudEltYWdlQXNwZWN0UmF0aW8pKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBVcGRhdGUgdHJhY2tlZCB2YWx1ZXNcclxuXHRcdFx0XHR0aGlzLmxhc3RDYXJkU2l6ZSA9IGN1cnJlbnRDYXJkU2l6ZTtcclxuXHRcdFx0XHR0aGlzLmxhc3RJbWFnZUFzcGVjdFJhdGlvID0gY3VycmVudEltYWdlQXNwZWN0UmF0aW87XHJcblx0XHRcdH1cclxuXHRcdH0sIDEwMCk7XHJcblx0XHRcclxuXHRcdC8vIFJlZ2lzdGVyIGNsZWFudXAgZm9yIHBvbGxpbmcgaW50ZXJ2YWxcclxuXHRcdHRoaXMucmVnaXN0ZXJDbGVhbnVwKCgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuY29uZmlnUG9sbEludGVydmFsICE9PSBudWxsKSB7XHJcblx0XHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5jb25maWdQb2xsSW50ZXJ2YWwpO1xyXG5cdFx0XHRcdHRoaXMuY29uZmlnUG9sbEludGVydmFsID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVHcmlkTGF5b3V0KHNldHRpbmdzOiBDTVNTZXR0aW5ncyk6IHZvaWQge1xyXG5cdFx0Ly8gSnVzdCBzZXQgdGhlIGNhcmQgbWluIHdpZHRoIC0gQ1NTIEdyaWQgYXV0by1maWxsIGhhbmRsZXMgY29sdW1uIHNuYXBwaW5nIGF1dG9tYXRpY2FsbHlcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FyZC1taW4td2lkdGgnLCBgJHtzZXR0aW5ncy5jYXJkU2l6ZX1weGApO1xyXG5cdFx0dGhpcy5jb250YWluZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1iYXNlcy1jbXMtaW1hZ2UtYXNwZWN0LXJhdGlvJywgU3RyaW5nKHNldHRpbmdzLmltYWdlQXNwZWN0UmF0aW8pKTtcclxuXHRcdFxyXG5cdFx0Ly8gVXBkYXRlIHRyYWNrZWQgdmFsdWVzIHRvIHByZXZlbnQgdW5uZWNlc3NhcnkgcG9sbGluZyB0cmlnZ2Vyc1xyXG5cdFx0dGhpcy5sYXN0Q2FyZFNpemUgPSBzZXR0aW5ncy5jYXJkU2l6ZTtcclxuXHRcdHRoaXMubGFzdEltYWdlQXNwZWN0UmF0aW8gPSBzZXR0aW5ncy5pbWFnZUFzcGVjdFJhdGlvO1xyXG5cdH1cclxuXHJcblx0Y2xlYW51cCgpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLnJlc2l6ZU9ic2VydmVyKSB7XHJcblx0XHRcdHRoaXMucmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0XHR0aGlzLnJlc2l6ZU9ic2VydmVyID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLndpbmRvd1Jlc2l6ZUhhbmRsZXIpIHtcclxuXHRcdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMud2luZG93UmVzaXplSGFuZGxlcik7XHJcblx0XHRcdHRoaXMud2luZG93UmVzaXplSGFuZGxlciA9IG51bGw7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5zY3JvbGxMaXN0ZW5lcikge1xyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsTGlzdGVuZXIpO1xyXG5cdFx0XHR0aGlzLnNjcm9sbExpc3RlbmVyID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLnNjcm9sbFRocm90dGxlVGltZW91dCAhPT0gbnVsbCkge1xyXG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2Nyb2xsVGhyb3R0bGVUaW1lb3V0KTtcclxuXHRcdFx0dGhpcy5zY3JvbGxUaHJvdHRsZVRpbWVvdXQgPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuY29uZmlnUG9sbEludGVydmFsICE9PSBudWxsKSB7XHJcblx0XHRcdHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuY29uZmlnUG9sbEludGVydmFsKTtcclxuXHRcdFx0dGhpcy5jb25maWdQb2xsSW50ZXJ2YWwgPSBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuXHJcbiIsICIvKipcbiAqIFZpZXcgU3dpdGNoIExpc3RlbmVyXG4gKiBEZXRlY3RzIHdoZW4gdGhlIHZpZXcgaXMgc3dpdGNoZWQgYXdheSBhbmQgY2xlYXJzIHNlbGVjdGlvblxuICovXG5cbmltcG9ydCB0eXBlIEJhc2VzQ01TUGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG5leHBvcnQgY2xhc3MgVmlld1N3aXRjaExpc3RlbmVyIHtcblx0cHJpdmF0ZSBtdXRhdGlvbk9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgYmFja3VwSW50ZXJ2YWw6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGN1cnJlbnRCYXNlSWRlbnRpZmllcjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXG5cdFx0cHJpdmF0ZSBwbHVnaW46IEJhc2VzQ01TUGx1Z2luLFxuXHRcdHByaXZhdGUgY29uZmlnOiB7IGdldE5hbWU/OiAoKSA9PiBzdHJpbmc7IG5hbWU/OiBzdHJpbmcgfSxcblx0XHRwcml2YXRlIGNvbnRyb2xsZXI6IHsgZ2V0QmFzZU5hbWU/OiAoKSA9PiBzdHJpbmc7IGJhc2VOYW1lPzogc3RyaW5nIH0gfCB1bmRlZmluZWQsXG5cdFx0cHJpdmF0ZSBkYXRhOiB7IGJhc2VOYW1lPzogc3RyaW5nIH0gfCB1bmRlZmluZWQsXG5cdFx0cHJpdmF0ZSBzZWxlY3RlZEZpbGVzOiBTZXQ8c3RyaW5nPixcblx0XHRwcml2YXRlIG9uU2VsZWN0aW9uQ2xlYXJlZDogKCkgPT4gdm9pZCxcblx0XHRwcml2YXRlIHJlZ2lzdGVyQ2xlYW51cDogKGNsZWFudXA6ICgpID0+IHZvaWQpID0+IHZvaWRcblx0KSB7fVxuXG5cdHNldHVwKGhhbmRsZVNlbGVjdGlvbkNoYW5nZTogKHBhdGg6IHN0cmluZywgc2VsZWN0ZWQ6IGJvb2xlYW4pID0+IHZvaWQpOiAocGF0aDogc3RyaW5nLCBzZWxlY3RlZDogYm9vbGVhbikgPT4gdm9pZCB7XG5cdFx0Y29uc3Qgc3RhcnRPYnNlcnZpbmcgPSAoKSA9PiB7XG5cdFx0XHRpZiAodGhpcy5tdXRhdGlvbk9ic2VydmVyKSByZXR1cm47IC8vIEFscmVhZHkgb2JzZXJ2aW5nXG5cdFx0XHRcblx0XHRcdHRoaXMubXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcblx0XHRcdFx0Ly8gT25seSBjaGVjayBpZiB3ZSBoYXZlIHNlbGVjdGlvblxuXHRcdFx0XHRpZiAodGhpcy5zZWxlY3RlZEZpbGVzLnNpemUgPT09IDApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIGFueSBjYXJkcyB3ZXJlIHJlbW92ZWRcblx0XHRcdFx0Zm9yIChjb25zdCBtdXRhdGlvbiBvZiBtdXRhdGlvbnMpIHtcblx0XHRcdFx0XHRpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcgJiYgbXV0YXRpb24ucmVtb3ZlZE5vZGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdC8vIENhcmRzIHdlcmUgcmVtb3ZlZCAtIGNoZWNrIGlmIG91ciBzZWxlY3RlZCBjYXJkcyBhcmUgZ29uZVxuXHRcdFx0XHRcdFx0bGV0IGZvdW5kU2VsZWN0ZWRDYXJkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHBhdGggb2YgdGhpcy5zZWxlY3RlZEZpbGVzKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNhcmQgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXBhdGg9XCIke3BhdGh9XCJdYCk7XG5cdFx0XHRcdFx0XHRcdGlmIChjYXJkKSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm91bmRTZWxlY3RlZENhcmQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIEFsc28gY2hlY2sgaWYgY29udGFpbmVyIGhhcyBhbnkgY2FyZHMgYXQgYWxsXG5cdFx0XHRcdFx0XHRjb25zdCBhbGxDYXJkcyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLmNhcmRbZGF0YS1wYXRoXScpO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZiAoIWZvdW5kU2VsZWN0ZWRDYXJkIHx8IGFsbENhcmRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuY2xlYXIoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5vblNlbGVjdGlvbkNsZWFyZWQoKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Ly8gT2JzZXJ2ZSB0aGUgY29udGFpbmVyIGZvciBjaGlsZCByZW1vdmFsc1xuXHRcdFx0aWYgKHRoaXMuY29udGFpbmVyRWwpIHtcblx0XHRcdFx0dGhpcy5tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy5jb250YWluZXJFbCwge1xuXHRcdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0XHRzdWJ0cmVlOiB0cnVlXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0Y29uc3Qgc3RvcE9ic2VydmluZyA9ICgpID0+IHtcblx0XHRcdGlmICh0aGlzLm11dGF0aW9uT2JzZXJ2ZXIpIHtcblx0XHRcdFx0dGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHRcdFx0dGhpcy5tdXRhdGlvbk9ic2VydmVyID0gbnVsbDtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIFdoZW4gb2JzZXJ2ZXIgc3RvcHMsIGl0IG1lYW5zIHNlbGVjdGlvbiBpcyBlbXB0eSBvciB2aWV3IHN3aXRjaGVkXG5cdFx0XHRcdC8vIEZvcmNlIGNsZWFyIHNlbGVjdGlvbiBhbmQgaGlkZSB0b29sYmFyXG5cdFx0XHRcdGlmICh0aGlzLnNlbGVjdGVkRmlsZXMuc2l6ZSA+IDApIHtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuY2xlYXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLm9uU2VsZWN0aW9uQ2xlYXJlZCgpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0Ly8gR2V0IGJhc2UgaWRlbnRpZmllciAtIHRyeSBtdWx0aXBsZSBtZXRob2RzXG5cdFx0Y29uc3QgZ2V0QmFzZUlkZW50aWZpZXIgPSAoKTogc3RyaW5nIHwgbnVsbCA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHQvLyBUcnkgdG8gZ2V0IGJhc2UgbmFtZSBmcm9tIGNvbmZpZ1xuXHRcdFx0XHRpZiAodGhpcy5jb25maWc/LmdldE5hbWUpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5jb25maWcuZ2V0TmFtZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0aGlzLmNvbmZpZz8ubmFtZSkge1xuXHRcdFx0XHRcdHJldHVybiBTdHJpbmcodGhpcy5jb25maWcubmFtZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gVHJ5IHRvIGFjY2VzcyBjb250cm9sbGVyXG5cdFx0XHRcdGlmICh0aGlzLmNvbnRyb2xsZXIpIHtcblx0XHRcdFx0XHRpZiAodGhpcy5jb250cm9sbGVyPy5nZXRCYXNlTmFtZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMuY29udHJvbGxlci5nZXRCYXNlTmFtZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodGhpcy5jb250cm9sbGVyPy5iYXNlTmFtZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFN0cmluZyh0aGlzLmNvbnRyb2xsZXIuYmFzZU5hbWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBUcnkgdG8gZ2V0IGZyb20gZGF0YVxuXHRcdFx0XHRpZiAodGhpcy5kYXRhKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuZGF0YS5iYXNlTmFtZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFN0cmluZyh0aGlzLmRhdGEuYmFzZU5hbWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdC8vIElnbm9yZSBlcnJvcnNcblx0XHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH07XG5cdFx0XG5cdFx0Ly8gQWxzbyBjaGVjayBwZXJpb2RpY2FsbHkgYXMgYmFja3VwIChzbG93ZXIsIDUwMG1zKVxuXHRcdGNvbnN0IGJhY2t1cENoZWNrID0gKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuc2VsZWN0ZWRGaWxlcy5zaXplID09PSAwKSB7XG5cdFx0XHRcdGlmICh0aGlzLmJhY2t1cEludGVydmFsICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5iYWNrdXBJbnRlcnZhbCk7XG5cdFx0XHRcdFx0dGhpcy5iYWNrdXBJbnRlcnZhbCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBDaGVjayBpZiBiYXNlIGlkZW50aWZpZXIgY2hhbmdlZFxuXHRcdFx0Y29uc3QgY3VycmVudEJhc2VJZCA9IGdldEJhc2VJZGVudGlmaWVyKCk7XG5cdFx0XHRpZiAodGhpcy5jdXJyZW50QmFzZUlkZW50aWZpZXIgIT09IG51bGwgJiYgY3VycmVudEJhc2VJZCAhPT0gbnVsbCAmJiBcblx0XHRcdFx0dGhpcy5jdXJyZW50QmFzZUlkZW50aWZpZXIgIT09IGN1cnJlbnRCYXNlSWQpIHtcblx0XHRcdFx0dGhpcy5zZWxlY3RlZEZpbGVzLmNsZWFyKCk7XG5cdFx0XHRcdHRoaXMub25TZWxlY3Rpb25DbGVhcmVkKCk7XG5cdFx0XHRcdHN0b3BPYnNlcnZpbmcoKTtcblx0XHRcdFx0aWYgKHRoaXMuYmFja3VwSW50ZXJ2YWwgIT09IG51bGwpIHtcblx0XHRcdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmJhY2t1cEludGVydmFsKTtcblx0XHRcdFx0XHR0aGlzLmJhY2t1cEludGVydmFsID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIENoZWNrIGlmIGNvbnRhaW5lciBoYXMgY2FyZHNcblx0XHRcdGNvbnN0IGFsbENhcmRzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZFtkYXRhLXBhdGhdJyk7XG5cdFx0XHRpZiAoYWxsQ2FyZHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWRGaWxlcy5jbGVhcigpO1xuXHRcdFx0XHR0aGlzLm9uU2VsZWN0aW9uQ2xlYXJlZCgpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0Ly8gU3RhcnQgb2JzZXJ2aW5nIHdoZW4gc2VsZWN0aW9uIGlzIG1hZGVcblx0XHRjb25zdCBvcmlnaW5hbEhhbmRsZVNlbGVjdGlvbkNoYW5nZSA9IGhhbmRsZVNlbGVjdGlvbkNoYW5nZS5iaW5kKHRoaXMpO1xuXHRcdGNvbnN0IHdyYXBwZWRIYW5kbGVTZWxlY3Rpb25DaGFuZ2UgPSAocGF0aDogc3RyaW5nLCBzZWxlY3RlZDogYm9vbGVhbikgPT4ge1xuXHRcdFx0b3JpZ2luYWxIYW5kbGVTZWxlY3Rpb25DaGFuZ2UocGF0aCwgc2VsZWN0ZWQpO1xuXHRcdFx0XG5cdFx0XHQvLyBTdGFydCBvYnNlcnZpbmcgaWYgd2UgaGF2ZSBzZWxlY3Rpb24sIHN0b3AgaWYgd2UgZG9uJ3Rcblx0XHRcdGlmICh0aGlzLnNlbGVjdGVkRmlsZXMuc2l6ZSA+IDApIHtcblx0XHRcdFx0Ly8gU3RvcmUgY3VycmVudCBiYXNlIGlkZW50aWZpZXIgd2hlbiBzZWxlY3Rpb24gc3RhcnRzXG5cdFx0XHRcdGlmICh0aGlzLmN1cnJlbnRCYXNlSWRlbnRpZmllciA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdHRoaXMuY3VycmVudEJhc2VJZGVudGlmaWVyID0gZ2V0QmFzZUlkZW50aWZpZXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzdGFydE9ic2VydmluZygpO1xuXHRcdFx0XHQvLyBBbHNvIHN0YXJ0IGJhY2t1cCBpbnRlcnZhbCAtIHVzZSBwbHVnaW4ncyByZWdpc3RlckludGVydmFsIGZvciBwcm9wZXIgY2xlYW51cFxuXHRcdFx0XHRpZiAodGhpcy5iYWNrdXBJbnRlcnZhbCA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdHRoaXMuYmFja3VwSW50ZXJ2YWwgPSB0aGlzLnBsdWdpbi5yZWdpc3RlckludGVydmFsKHdpbmRvdy5zZXRJbnRlcnZhbChiYWNrdXBDaGVjaywgNTAwKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIENsZWFyIGJhc2UgaWRlbnRpZmllciB3aGVuIHNlbGVjdGlvbiBpcyBlbXB0eVxuXHRcdFx0XHR0aGlzLmN1cnJlbnRCYXNlSWRlbnRpZmllciA9IG51bGw7XG5cdFx0XHRcdC8vIFNlbGVjdGlvbiBiZWNhbWUgZW1wdHkgLSBzdG9wIG9ic2VydmluZ1xuXHRcdFx0XHRzdG9wT2JzZXJ2aW5nKCk7XG5cdFx0XHRcdGlmICh0aGlzLmJhY2t1cEludGVydmFsICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5iYWNrdXBJbnRlcnZhbCk7XG5cdFx0XHRcdFx0dGhpcy5iYWNrdXBJbnRlcnZhbCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHRcdFxuXHRcdC8vIFJlZ2lzdGVyIGNsZWFudXBcblx0XHR0aGlzLnJlZ2lzdGVyQ2xlYW51cCgoKSA9PiB7XG5cdFx0XHRzdG9wT2JzZXJ2aW5nKCk7XG5cdFx0XHRpZiAodGhpcy5iYWNrdXBJbnRlcnZhbCAhPT0gbnVsbCkge1xuXHRcdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmJhY2t1cEludGVydmFsKTtcblx0XHRcdFx0dGhpcy5iYWNrdXBJbnRlcnZhbCA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gd3JhcHBlZEhhbmRsZVNlbGVjdGlvbkNoYW5nZTtcblx0fVxuXG5cdGNsZWFudXAoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMubXV0YXRpb25PYnNlcnZlcikge1xuXHRcdFx0dGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHRcdHRoaXMubXV0YXRpb25PYnNlcnZlciA9IG51bGw7XG5cdFx0fVxuXHRcdGlmICh0aGlzLmJhY2t1cEludGVydmFsICE9PSBudWxsKSB7XG5cdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmJhY2t1cEludGVydmFsKTtcblx0XHRcdHRoaXMuYmFja3VwSW50ZXJ2YWwgPSBudWxsO1xuXHRcdH1cblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgUXVlcnlDb250cm9sbGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgQmFzZXNDTVNQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBCYXNlc0NNU1ZpZXcsIENNU19WSUVXX1RZUEUgfSBmcm9tICcuLi92aWV3cy9jbXMtdmlldyc7XG5cbi8qKlxuICogUmVnaXN0ZXIgdGhlIENNUyB2aWV3IHdpdGggdGhlIEJhc2VzIHBsdWdpblxuICogSGFuZGxlcyBncmFjZWZ1bCBkZWdyYWRhdGlvbiBpZiBCYXNlcyBwbHVnaW4gaXMgbm90IGluc3RhbGxlZFxuICogSW5jbHVkZXMgcmV0cnkgbG9naWMgZm9yIG1vYmlsZSB3aGVyZSBCYXNlcyBwbHVnaW4gbWF5IGxvYWQgbGF0ZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQmFzZXNDTVNWaWV3KHBsdWdpbjogQmFzZXNDTVNQbHVnaW4sIHJldHJpZXMgPSA1KTogdm9pZCB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgYmFzZXNQbHVnaW4gPSBwbHVnaW4gYXMgeyByZWdpc3RlckJhc2VzVmlldz86ICh0eXBlOiBzdHJpbmcsIGNvbmZpZzogeyBuYW1lOiBzdHJpbmc7IGljb246IHN0cmluZzsgZmFjdG9yeTogKGNvbnRyb2xsZXI6IFF1ZXJ5Q29udHJvbGxlciwgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSA9PiBCYXNlc0NNU1ZpZXc7IG9wdGlvbnM6ICgpID0+IHVua25vd25bXSB9KSA9PiB2b2lkIH07XG5cdFx0aWYgKHR5cGVvZiBiYXNlc1BsdWdpbi5yZWdpc3RlckJhc2VzVmlldyA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0YmFzZXNQbHVnaW4ucmVnaXN0ZXJCYXNlc1ZpZXcoQ01TX1ZJRVdfVFlQRSwge1xuXHRcdFx0XHRuYW1lOiAnQ01TJyxcblx0XHRcdFx0aWNvbjogcGx1Z2luLnNldHRpbmdzLnVzZUhvbWVJY29uID8gJ2x1Y2lkZS1ob21lJyA6ICdsdWNpZGUtYmxvY2tzJyxcblx0XHRcdFx0ZmFjdG9yeTogKGNvbnRyb2xsZXI6IFF1ZXJ5Q29udHJvbGxlciwgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdmlldyA9IG5ldyBCYXNlc0NNU1ZpZXcoY29udHJvbGxlciwgY29udGFpbmVyRWwsIHBsdWdpbik7XG5cdFx0XHRcdFx0Ly8gQWRkIHZpZXcgdG8gcGx1Z2luJ3MgYWN0aXZlIHZpZXdzIHRyYWNraW5nXG5cdFx0XHRcdFx0Y29uc3QgcGx1Z2luV2l0aFZpZXdzID0gcGx1Z2luIGFzIHsgYWN0aXZlVmlld3M/OiBTZXQ8QmFzZXNDTVNWaWV3PiB9O1xuXHRcdFx0XHRcdGlmIChwbHVnaW5XaXRoVmlld3MuYWN0aXZlVmlld3MpIHtcblx0XHRcdFx0XHRcdHBsdWdpbldpdGhWaWV3cy5hY3RpdmVWaWV3cy5hZGQodmlldyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB2aWV3O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRvcHRpb25zOiBnZXRDTVNWaWV3T3B0aW9ucygpXG5cdFx0XHR9KTtcblx0XHR9IGVsc2UgaWYgKHJldHJpZXMgPiAwKSB7XG5cdFx0XHQvLyBNZXRob2Qgbm90IGF2YWlsYWJsZSB5ZXQsIHJldHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgKGNvbW1vbiBvbiBtb2JpbGUpXG5cdFx0XHQvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZW91dCBiZWZvcmUgc2V0dGluZyBhIG5ldyBvbmVcblx0XHRcdGNvbnN0IHBsdWdpbldpdGhUaW1lb3V0ID0gcGx1Z2luIGFzIHsgcmVnaXN0cmF0aW9uVGltZW91dD86IG51bWJlciB8IG51bGwgfTtcblx0XHRcdGNvbnN0IHJlZ2lzdHJhdGlvblRpbWVvdXQgPSBwbHVnaW5XaXRoVGltZW91dC5yZWdpc3RyYXRpb25UaW1lb3V0O1xuXHRcdFx0aWYgKHJlZ2lzdHJhdGlvblRpbWVvdXQgIT09IG51bGwgJiYgcmVnaXN0cmF0aW9uVGltZW91dCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQocmVnaXN0cmF0aW9uVGltZW91dCk7XG5cdFx0XHR9XG5cdFx0XHRwbHVnaW5XaXRoVGltZW91dC5yZWdpc3RyYXRpb25UaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRwbHVnaW5XaXRoVGltZW91dC5yZWdpc3RyYXRpb25UaW1lb3V0ID0gbnVsbDtcblx0XHRcdFx0cmVnaXN0ZXJCYXNlc0NNU1ZpZXcocGx1Z2luLCByZXRyaWVzIC0gMSk7XG5cdFx0XHR9LCAyMDApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLndhcm4oJ0Jhc2VzIENNUzogcmVnaXN0ZXJCYXNlc1ZpZXcgbm90IGF2YWlsYWJsZS4gSXMgQmFzZXMgcGx1Z2luIGluc3RhbGxlZD8nKTtcblx0XHR9XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcignQmFzZXMgQ01TOiBFcnJvciByZWdpc3RlcmluZyB2aWV3OicsIGVycm9yKTtcblx0fVxufVxuXG4vKipcbiAqIEdldCBDTVMgdmlldyBvcHRpb25zIGZvciBCYXNlIHBsdWdpbiBjb25maWd1cmF0aW9uXG4gKi9cbmZ1bmN0aW9uIGdldENNU1ZpZXdPcHRpb25zKCk6ICgpID0+IHVua25vd25bXSB7XG5cdC8vIER5bmFtaWMgaW1wb3J0IHRvIGF2b2lkIGNpcmN1bGFyIGRlcGVuZGVuY3lcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHMsIG5vLXVuZGVmIC0tIE5lZWQgZHluYW1pYyBpbXBvcnQgZm9yIGNpcmN1bGFyIGRlcGVuZGVuY3lcblx0Y29uc3QgeyBnZXRDTVNWaWV3T3B0aW9ucyB9ID0gcmVxdWlyZSgnLi4vc2hhcmVkL3NldHRpbmdzLXNjaGVtYScpIGFzIHsgZ2V0Q01TVmlld09wdGlvbnM6ICgpID0+IHVua25vd25bXSB9O1xuXHRyZXR1cm4gZ2V0Q01TVmlld09wdGlvbnM7XG59XG5cbiJdLAogICJtYXBwaW5ncyI6ICI7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QSxRQUNOO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUE7QUFBQSxJQUVBO0FBQUEsTUFDQyxNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsTUFDYixPQUFPO0FBQUEsUUFDTjtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFlBQ1IsUUFBUTtBQUFBLFlBQ1IsYUFBYTtBQUFBLFlBQ2IsU0FBUztBQUFBLFVBQ1Y7QUFBQSxVQUNBLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsWUFDUixVQUFVO0FBQUEsWUFDVixZQUFZO0FBQUEsWUFDWixTQUFTO0FBQUEsVUFDVjtBQUFBLFVBQ0EsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxNQUFNO0FBQUEsVUFDTixTQUFTO0FBQUEsVUFDVCxVQUFVO0FBQUEsWUFDVCxLQUFLO0FBQUEsWUFDTCxPQUFPO0FBQUEsVUFDUjtBQUFBLFFBQ0Q7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBO0FBQUEsSUFFQTtBQUFBLE1BQ0MsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLE1BQ2IsT0FBTztBQUFBLFFBQ047QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUE7QUFBQSxJQUVBO0FBQUEsTUFDQyxNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsTUFDYixPQUFPO0FBQUEsUUFDTjtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBO0FBQUEsSUFFQTtBQUFBLE1BQ0MsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLE1BQ2IsT0FBTztBQUFBLFFBQ047QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxNQUFNO0FBQUEsVUFDTixTQUFTO0FBQUEsVUFDVCxVQUFVO0FBQUEsWUFDVCxLQUFLO0FBQUEsWUFDTCxPQUFPO0FBQUEsVUFDUjtBQUFBLFFBQ0Q7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBO0FBQUEsSUFFQTtBQUFBLE1BQ0MsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLE1BQ2IsT0FBTztBQUFBLFFBQ047QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxZQUNSLFFBQVE7QUFBQSxZQUNSLFVBQVU7QUFBQSxZQUNWLFNBQVM7QUFBQSxVQUNWO0FBQUEsVUFDQSxTQUFTO0FBQUEsUUFDVjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUE7QUFBQSxJQUVBO0FBQUEsTUFDQyxNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsTUFDYixPQUFPO0FBQUEsUUFDTjtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFlBQ1IsT0FBTztBQUFBLFlBQ1AsVUFBVTtBQUFBLFVBQ1g7QUFBQSxVQUNBLFNBQVM7QUFBQSxRQUNWO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQTtBQUFBLElBRUE7QUFBQSxNQUNDLE1BQU07QUFBQSxNQUNOLGFBQWE7QUFBQSxNQUNiLE9BQU87QUFBQSxRQUNOO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsWUFDUixPQUFPO0FBQUEsWUFDUCxVQUFVO0FBQUEsVUFDWDtBQUFBLFVBQ0EsU0FBUztBQUFBLFFBQ1Y7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBO0FBQUEsSUFFQTtBQUFBLE1BQ0MsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLE1BQ2IsT0FBTztBQUFBLFFBQ047QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxZQUNSLE9BQU87QUFBQSxZQUNQLFVBQVU7QUFBQSxVQUNYO0FBQUEsVUFDQSxTQUFTO0FBQUEsUUFDVjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUE7QUFBQSxJQUVBO0FBQUEsTUFDQyxNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsTUFDYixPQUFPO0FBQUEsUUFDTjtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFlBQ1IsT0FBTztBQUFBLFlBQ1AsVUFBVTtBQUFBLFVBQ1g7QUFBQSxVQUNBLFNBQVM7QUFBQSxRQUNWO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQTtBQUFBLElBRUE7QUFBQSxNQUNDLE1BQU07QUFBQSxNQUNOLGFBQWE7QUFBQSxNQUNiLE9BQU87QUFBQSxRQUNOO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsWUFDUixPQUFPO0FBQUEsWUFDUCxVQUFVO0FBQUEsVUFDWDtBQUFBLFVBQ0EsU0FBUztBQUFBLFFBQ1Y7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBO0FBQUEsSUFFQTtBQUFBLE1BQ0MsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLE1BQ2IsT0FBTztBQUFBLFFBQ047QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxZQUNSLE9BQU87QUFBQSxZQUNQLFVBQVU7QUFBQSxVQUNYO0FBQUEsVUFDQSxTQUFTO0FBQUEsUUFDVjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUE7QUFBQSxJQUVBO0FBQUEsTUFDQyxNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsTUFD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UyxnQkFBZ0IsZUFBZSxDQUFDLEtBQUs7QUFDOUMsV0FBUyxnQkFBZ0IsZUFBZSxDQUFDLEtBQUs7QUFDOUMsV0FBUyxnQkFBZ0IsZUFBZSxDQUFDLEtBQUs7QUFDOUMsV0FBUyxnQkFBZ0IsZUFBZSxDQUFDLEtBQUs7QUFDOUMsV0FBUyxnQkFBZ0IsZUFBZSxDQUFDLEtBQUs7QUFDOUMsV0FBUyxnQkFBZ0IsZUFBZSxDQUFDLEtBQUs7QUFDOUMsV0FBUyxnQkFBZ0IsZUFBZSxDQUFDLEtBQUs7QUFDOUMsV0FBUyxnQkFBZ0IsZUFBZSxDQUFDLEtBQUs7QUFDOUMsV0FBUyxpQkFBaUIsZUFBZSxDQUFDLEtBQUs7QUFDL0MsV0FBUyxpQkFBaUIsZUFBZSxFQUFFLEtBQUs7QUFDaEQsV0FBUyxpQkFBaUIsZUFBZSxFQUFFLEtBQUs7QUFDaEQsV0FBUyxpQkFBaUIsZUFBZSxFQUFFLEtBQUs7QUFDaEQsV0FBUyxpQkFBaUIsZUFBZSxFQUFFLEtBQUs7QUFJaEQsV0FBUyxZQUFZLGVBQWUsQ0FBQyxJQUFJLE1BQU0sMEJBQTBCLGVBQWUsQ0FBQyxHQUFHLE9BQU8sVUFBVSxVQUFVLEtBQUssbUJBQW1CLElBQUk7QUFDbkosV0FBUyxZQUFZLGVBQWUsQ0FBQyxJQUFJLE1BQU0sMEJBQTBCLGVBQWUsQ0FBQyxHQUFHLE9BQU8sVUFBVSxVQUFVLEtBQUssbUJBQW1CLElBQUk7QUFDbkosV0FBUyxZQUFZLGVBQWUsQ0FBQyxJQUFJLE1BQU0sMEJBQTBCLGVBQWUsQ0FBQyxHQUFHLE9BQU8sVUFBVSxVQUFVLEtBQUssbUJBQW1CLElBQUk7QUFDbkosV0FBUyxZQUFZLGVBQWUsQ0FBQyxJQUFJLE1BQU0sMEJBQTBCLGVBQWUsQ0FBQyxHQUFHLE9BQU8sVUFBVSxVQUFVLEtBQUssbUJBQW1CLElBQUk7QUFDbkosV0FBUyxZQUFZLGVBQWUsQ0FBQyxJQUFJLE1BQU0sMEJBQTBCLGVBQWUsQ0FBQyxHQUFHLE9BQU8sVUFBVSxVQUFVLEtBQUssbUJBQW1CLElBQUk7QUFDbkosV0FBUyxZQUFZLGVBQWUsQ0FBQyxJQUFJ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RWhDLFlBQU0sY0FBZSxLQUFrRDtBQUN2RSxVQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksZUFBZTtBQUMvQyxzQkFBYyxLQUFLLElBQUk7QUFBQSxNQUN4QjtBQUFBLElBQ0QsQ0FBQztBQUdELGtCQUFjLFFBQVEsVUFBUSxLQUFLLFlBQVksT0FBTyxJQUFJLENBQUM7QUFHM0QsU0FBSyxZQUFZLFFBQVEsVUFBUTtBQUNoQyxVQUFJLFFBQVEsT0FBTyxLQUFLLG1CQUFtQixZQUFZO0FBQ3RELGFBQUssZUFBZTtBQUFBLE1BQ3JCO0FBQUEsSUFDRCxDQUFDO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsV0FBVyxNQUEwQjtBQUNwQyxTQUFLLFlBQVksT0FBTyxJQUFJO0FBQUEsRUFDN0I7QUFFRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgImltcG9ydF9vYnNpZGlhbiIsICJ1bmlxdWVBdHRhY2htZW50cyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiY29tbWFuZFJlZ2lzdHJ5IiwgImNvbW1hbmQiLCAiZSIsICJfYSIsICJfYiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZSIsICJ0aXRsZUVsIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImJ1dHRvbnMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImUiLCAicHJlcGFyZURlbGV0aW9uUHJldmlldyIsICJleGVjdXRlU21hcnREZWxldGlvbiIsICJEZWxldGlvblByZXZpZXdNb2RhbCIsICJnZXRDTVNWaWV3T3B0aW9ucyJdCn0K
