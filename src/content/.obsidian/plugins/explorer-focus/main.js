/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  ExplorerFocusPlugin: () => ExplorerFocusPlugin,
  default: () => main_default
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// lang/en.ts
var lang = {
  focus: "Focus",
  enterFocus: "Enter focus",
  exitFocus: "Exit focus",
  toggleFocus: "Toggle focus",
  settings: "Explorer focus settings",
  showRightClickMenu: "Show right-click menu option",
  showFileExplorerIcon: "Show file explorer icon",
  focusLevel: "Command focus level",
  focusLevelFile: "Current file only",
  focusLevelParent: "Parent folder",
  focusLevelGrandparent: "Grandparent folder",
  focusLevelGreatGrandparent: "Great grandparent folder",
  focusLevelCustom: "Specific folder",
  focusLevelDesc: "Determines what to focus when using the toggle command or file explorer icon. Right-click menu always focuses the clicked file/folder.",
  customFolderPath: "Custom folder path",
  customFolderPathDesc: "Enter a folder path (folder/subfolder). This folder will be focused regardless of which file is open.",
  hideAncestorFolders: "Hide ancestral indents",
  hideAncestorFoldersDesc: "When enabled, hides parent folder indentation when focusing, making the focused folder appear at root level."
};
var en_default = lang;

// lang/zh.ts
var lang2 = {
  focus: "\u4E13\u6CE8",
  enterFocus: "\u4E13\u6CE8",
  exitFocus: "\u9000\u51FA\u4E13\u6CE8",
  toggleFocus: "\u5207\u6362\u4E13\u6CE8",
  settings: "\u8D44\u6E90\u7BA1\u7406\u5668\u4E13\u6CE8\u8BBE\u7F6E",
  showRightClickMenu: "\u663E\u793A\u53F3\u952E\u83DC\u5355\u9009\u9879",
  showFileExplorerIcon: "\u663E\u793A\u6587\u4EF6\u6D4F\u89C8\u5668\u56FE\u6807",
  focusLevel: "\u547D\u4EE4\u4E13\u6CE8\u7EA7\u522B",
  focusLevelFile: "\u4EC5\u5F53\u524D\u6587\u4EF6",
  focusLevelParent: "\u7236\u6587\u4EF6\u5939",
  focusLevelGrandparent: "\u7956\u7236\u6587\u4EF6\u5939",
  focusLevelGreatGrandparent: "\u66FE\u7956\u7236\u6587\u4EF6\u5939",
  focusLevelCustom: "\u7279\u5B9A\u6587\u4EF6\u5939",
  focusLevelDesc: "\u786E\u5B9A\u4F7F\u7528\u5207\u6362\u547D\u4EE4\u6216\u6587\u4EF6\u6D4F\u89C8\u5668\u56FE\u6807\u65F6\u8981\u805A\u7126\u7684\u5185\u5BB9\u3002\u53F3\u952E\u83DC\u5355\u59CB\u7EC8\u805A\u7126\u5355\u51FB\u7684\u6587\u4EF6/\u6587\u4EF6\u5939\u3002",
  customFolderPath: "\u81EA\u5B9A\u4E49\u6587\u4EF6\u5939\u8DEF\u5F84",
  customFolderPathDesc: "\u8F93\u5165\u6587\u4EF6\u5939\u8DEF\u5F84\uFF08\u6587\u4EF6\u5939/\u5B50\u6587\u4EF6\u5939\uFF09\u3002\u65E0\u8BBA\u6253\u5F00\u54EA\u4E2A\u6587\u4EF6\uFF0C\u90FD\u4F1A\u805A\u7126\u6B64\u6587\u4EF6\u5939\u3002",
  hideAncestorFolders: "\u9690\u85CF\u7956\u5148\u7F29\u8FDB",
  hideAncestorFoldersDesc: "\u542F\u7528\u540E\uFF0C\u805A\u7126\u65F6\u9690\u85CF\u7236\u6587\u4EF6\u5939\u7F29\u8FDB\uFF0C\u4F7F\u805A\u7126\u7684\u6587\u4EF6\u5939\u663E\u793A\u5728\u6839\u7EA7\u522B\u3002"
};
var zh_default = lang2;

// lang/index.ts
var langs = {
  en: en_default,
  zh: zh_default
};
var lang_default = langs;

// src/types.ts
var DEFAULT_SETTINGS = {
  showRightClickMenu: true,
  showFileExplorerIcon: true,
  focusLevel: "parent",
  customFolderPath: "",
  hideAncestorFolders: false
};

// src/ui/settings-tab.ts
var import_obsidian2 = require("obsidian");

// node_modules/.pnpm/monkey-around@3.0.0/node_modules/monkey-around/dist/index.mjs
function around(obj, factories) {
  const removers = Object.keys(factories).map((key) => around1(obj, key, factories[key]));
  return removers.length === 1 ? removers[0] : function() {
    removers.forEach((r) => r());
  };
}
function around1(obj, method, createWrapper) {
  const inherited = obj[method], hadOwn = obj.hasOwnProperty(method), original = hadOwn ? inherited : function() {
    return Object.getPrototypeOf(obj)[method].apply(this, arguments);
  };
  let current = createWrapper(original);
  if (inherited)
    Object.setPrototypeOf(current, inherited);
  Object.setPrototypeOf(wrapper, current);
  obj[method] = wrapper;
  return remove;
  function wrapper(...args) {
    if (current === original && obj[method] === wrapper)
      remove();
    return current.apply(this, args);
  }
  function remove() {
    if (obj[method] === wrapper) {
      if (hadOwn)
        obj[method] = original;
      else
        delete obj[method];
    }
    if (current === original)
      return;
    current = original;
    Object.setPrototypeOf(wrapper, inherited || Function);
  }
}

// src/utils/file-explorer-patch.ts
var prototypePatched = false;
function patchFileExplorer(plugin) {
  const fileExplorer = getFileExplorer(plugin);
  if (!fileExplorer) {
    return;
  }
  if (!prototypePatched) {
    const leaf = plugin.app.workspace.getLeaf(true);
    plugin.register(
      around(Object.getPrototypeOf(fileExplorer), {
        getSortedFolderItems(old) {
          return function(folder) {
            let sortedChildren = old.call(this, folder);
            if (plugin.isFocus && plugin.focusedPath) {
              const focusedPath = plugin.focusedPath;
              sortedChildren = sortedChildren.filter((vEl) => {
                const filePath = vEl.file.path;
                if (filePath === focusedPath) {
                  vEl.info.hidden = false;
                  return true;
                }
                if (filePath.startsWith(focusedPath + "/")) {
                  vEl.info.hidden = false;
                  return true;
                }
                if (focusedPath.startsWith(filePath + "/")) {
                  vEl.info.hidden = false;
                  return true;
                }
                vEl.info.hidden = true;
                return false;
              });
            } else {
              sortedChildren.forEach((vEl) => {
                vEl.info.hidden = false;
              });
            }
            return sortedChildren;
          };
        }
      })
    );
    leaf.detach();
    prototypePatched = true;
  }
  fileExplorer.fileExplorerPlusPatched = true;
}
function getFileExplorer(plugin) {
  var _a;
  const fileExplorerContainer = (_a = plugin.app.workspace.getLeavesOfType("file-explorer")) == null ? void 0 : _a.first();
  return fileExplorerContainer == null ? void 0 : fileExplorerContainer.view;
}
function getAllFileExplorers(plugin) {
  const fileExplorerLeaves = plugin.app.workspace.getLeavesOfType("file-explorer");
  return fileExplorerLeaves.map((leaf) => leaf.view);
}

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/ui/settings-tab.ts
var ExplorerFocusSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const generalGroup = createSettingsGroup(containerEl, void 0, "explorer-focus");
    generalGroup.addSetting((setting) => {
      setting.setName(this.plugin.lang.showRightClickMenu).addToggle((toggle) => toggle.setValue(this.plugin.settings.showRightClickMenu).onChange(async (value) => {
        this.plugin.settings.showRightClickMenu = value;
        await this.plugin.saveSettings();
      }));
    });
    generalGroup.addSetting((setting) => {
      setting.setName(this.plugin.lang.showFileExplorerIcon).addToggle((toggle) => toggle.setValue(this.plugin.settings.showFileExplorerIcon).onChange(async (value) => {
        this.plugin.settings.showFileExplorerIcon = value;
        await this.plugin.saveSettings();
        this.plugin.updateFileExplorerIcon();
      }));
    });
    generalGroup.addSetting((setting) => {
      setting.setName(this.plugin.lang.focusLevel).setDesc(this.plugin.lang.focusLevelDesc).addDropdown((dropdown) => dropdown.addOption("file", this.plugin.lang.focusLevelFile).addOption("parent", this.plugin.lang.focusLevelParent).addOption("grandparent", this.plugin.lang.focusLevelGrandparent).addOption("greatgrandparent", this.plugin.lang.focusLevelGreatGrandparent).addOption("custom", this.plugin.lang.focusLevelCustom).setValue(this.plugin.settings.focusLevel).onChange(async (value) => {
        this.plugin.settings.focusLevel = value;
        await this.plugin.saveSettings();
        if (this.plugin.isFocus) {
          const fileExplorers = getAllFileExplorers(this.plugin);
          fileExplorers.forEach((fileExplorer) => {
            if (fileExplorer == null ? void 0 : fileExplorer.requestSort) {
              fileExplorer.requestSort();
            }
          });
        }
        this.display();
      }));
    });
    if (this.plugin.settings.focusLevel === "custom") {
      generalGroup.addSetting((setting) => {
        setting.setName(this.plugin.lang.customFolderPath).setDesc(this.plugin.lang.customFolderPathDesc).addText((text) => text.setPlaceholder("Folder/subfolder").setValue(this.plugin.settings.customFolderPath).onChange(async (value) => {
          this.plugin.settings.customFolderPath = value;
          await this.plugin.saveSettings();
        }));
      });
    }
  }
};

// src/utils/focus.ts
function getFocusPath(path, level, settings) {
  if (level === "custom") {
    return settings.customFolderPath || path;
  }
  if (level === "file") {
    return path;
  }
  const parts = path.split("/");
  if (level === "parent") {
    if (parts.length === 1) {
      return path;
    }
    return parts.slice(0, -1).join("/");
  }
  if (level === "grandparent") {
    if (parts.length <= 2) {
      return parts[0] || path;
    }
    return parts.slice(0, -2).join("/");
  }
  if (parts.length <= 3) {
    return parts[0] || path;
  }
  return parts.slice(0, -3).join("/");
}

// src/commands/index.ts
function registerCommands(plugin) {
  plugin.addCommand({
    id: "toggle",
    name: plugin.lang.toggleFocus,
    callback: () => {
      if (plugin.isFocus) {
        plugin.exitFocus();
      } else {
        if (plugin.settings.focusLevel === "custom") {
          if (plugin.settings.customFolderPath) {
            plugin.enterFocus(plugin.settings.customFolderPath);
          }
        } else {
          const file = plugin.app.workspace.getActiveFile();
          if (file == null ? void 0 : file.path) {
            const focusPath = getFocusPath(file.path, plugin.settings.focusLevel, plugin.settings);
            plugin.enterFocus(focusPath);
          }
        }
      }
    }
  });
  if (plugin.settings.showRightClickMenu) {
    plugin.registerEvent(
      plugin.app.workspace.on("file-menu", (menu, file) => {
        if (!plugin.settings.showRightClickMenu) {
          return;
        }
        menu.addItem((item) => {
          item.setTitle(plugin.isFocus ? plugin.lang.exitFocus : plugin.lang.focus).setIcon(plugin.isFocus ? "log-out" : "focus").onClick(() => {
            plugin.toggleFocus(file == null ? void 0 : file.path);
          });
        });
      })
    );
  }
}

// src/utils/file-explorer.ts
function findNavButtonsContainer(fileExplorerView) {
  var _a;
  let container = fileExplorerView.querySelector(".nav-buttons-container");
  if (container) {
    return container;
  }
  container = fileExplorerView.querySelector(".nav-header-button-container");
  if (container) {
    return container;
  }
  const existingButtons = fileExplorerView.querySelectorAll(".nav-action-button");
  if (existingButtons.length > 0) {
    const firstButton = existingButtons[0];
    const parent = firstButton.parentElement;
    if (parent && (parent.classList.contains("nav-buttons-container") || parent.classList.contains("nav-header-button-container") || Array.from(parent.children).some((el) => el.classList.contains("nav-action-button")))) {
      return parent;
    }
  }
  const viewHeader = fileExplorerView.querySelector(".view-header");
  if (viewHeader) {
    const headerContainer = viewHeader.querySelector(".nav-buttons-container") || viewHeader.querySelector(".nav-header-button-container") || viewHeader.querySelector(".view-header-title-container");
    if (headerContainer) {
      return headerContainer;
    }
    return viewHeader;
  }
  const navFilesContainer = fileExplorerView.querySelector(".nav-files-container");
  if (navFilesContainer) {
    let mobileButtonContainer = fileExplorerView.querySelector(".explorer-focus-mobile-buttons");
    if (!mobileButtonContainer) {
      mobileButtonContainer = document.createElement("div");
      mobileButtonContainer.className = "nav-buttons-container explorer-focus-mobile-buttons";
      mobileButtonContainer.setCssProps({
        display: "flex",
        alignItems: "center",
        gap: "4px",
        padding: "8px",
        borderBottom: "1px solid var(--background-modifier-border)"
      });
      (_a = navFilesContainer.parentElement) == null ? void 0 : _a.insertBefore(mobileButtonContainer, navFilesContainer);
    }
    return mobileButtonContainer;
  }
  let topContainer = fileExplorerView.querySelector(".explorer-focus-mobile-buttons");
  if (!topContainer) {
    topContainer = document.createElement("div");
    topContainer.className = "nav-buttons-container explorer-focus-mobile-buttons";
    topContainer.setCssProps({
      display: "flex",
      alignItems: "center",
      gap: "4px",
      padding: "8px",
      borderBottom: "1px solid var(--background-modifier-border)"
    });
    fileExplorerView.insertBefore(topContainer, fileExplorerView.firstChild);
  }
  return topContainer;
}
function createFileExplorerIcon(plugin) {
  const icon = document.createElement("div");
  icon.className = "clickable-icon nav-action-button";
  icon.setAttribute("aria-label", plugin.lang.toggleFocus);
  const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  svg.setAttribute("xmlns", "http://www.w3.org/2000/svg");
  svg.setAttribute("width", "24");
  svg.setAttribute("height", "24");
  svg.setAttribute("viewBox", "0 0 24 24");
  svg.setAttribute("fill", "none");
  svg.setAttribute("stroke", "currentColor");
  svg.setAttribute("stroke-width", "2");
  svg.setAttribute("stroke-linecap", "round");
  svg.setAttribute("stroke-linejoin", "round");
  svg.setAttribute("class", "svg-icon lucide-focus");
  const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
  circle.setAttribute("cx", "12");
  circle.setAttribute("cy", "12");
  circle.setAttribute("r", "3");
  svg.appendChild(circle);
  const path1 = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path1.setAttribute("d", "M3 7V5a2 2 0 0 1 2-2h2");
  svg.appendChild(path1);
  const path2 = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path2.setAttribute("d", "M17 3h2a2 2 0 0 1 2 2v2");
  svg.appendChild(path2);
  const path3 = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path3.setAttribute("d", "M21 17v2a2 2 0 0 1-2 2h-2");
  svg.appendChild(path3);
  const path4 = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path4.setAttribute("d", "M7 21H5a2 2 0 0 1-2-2v-2");
  svg.appendChild(path4);
  icon.appendChild(svg);
  return icon;
}
function insertFileExplorerIcon(icon, navButtonsContainer) {
  if (navButtonsContainer.contains(icon)) {
    return;
  }
  const allIcons = Array.from(navButtonsContainer.querySelectorAll(".clickable-icon.nav-action-button"));
  const defaultIcons = allIcons.filter((el) => !el.classList.contains("cmdr") && el !== icon);
  const cmdrIcons = Array.from(navButtonsContainer.querySelectorAll(".cmdr"));
  if (cmdrIcons.length > 0) {
    navButtonsContainer.insertBefore(icon, cmdrIcons[0]);
  } else if (defaultIcons.length > 0) {
    const lastIcon = defaultIcons[defaultIcons.length - 1];
    if (lastIcon.nextSibling) {
      navButtonsContainer.insertBefore(icon, lastIcon.nextSibling);
    } else {
      navButtonsContainer.appendChild(icon);
    }
  } else {
    navButtonsContainer.appendChild(icon);
  }
}

// src/main.ts
var ExplorerFocusPlugin = class extends import_obsidian3.Plugin {
  constructor(app, manifest) {
    super(app, manifest);
    const obsidianLangName = window.localStorage.getItem("language");
    const langName = obsidianLangName === "zh" ? "zh" : "en";
    this.lang = lang_default[langName];
    this.isFocus = false;
    this.focusedPath = null;
    this.fileExplorerIcon = null;
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new ExplorerFocusSettingTab(this.app, this));
    registerCommands(this);
    if (this.settings.showFileExplorerIcon) {
      this.addFileExplorerIcon();
    }
    this.app.workspace.onLayoutReady(() => {
      this.patchAllFileExplorers();
      this.updateFocusModeClasses();
    });
    this.app.workspace.on("layout-change", () => {
      this.patchAllFileExplorers();
      this.updateFocusModeClasses();
    });
  }
  async loadSettings() {
    const loadedData = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  toggleFocus(path) {
    if (this.isFocus) {
      this.exitFocus();
    } else if (path) {
      this.enterFocus(path);
    }
  }
  enterFocus(path) {
    this.isFocus = true;
    this.focusedPath = path;
    this.updateFileExplorerIcon();
    this.updateFocusModeClasses();
    const fileExplorers = getAllFileExplorers(this);
    fileExplorers.forEach((fileExplorer) => {
      if (fileExplorer == null ? void 0 : fileExplorer.requestSort) {
        fileExplorer.requestSort();
      }
    });
    setTimeout(() => {
      fileExplorers.forEach((fileExplorer) => {
        this.refreshFileExplorerVisibility(fileExplorer);
      });
    }, 0);
  }
  patchAllFileExplorers() {
    patchFileExplorer(this);
    const fileExplorers = getAllFileExplorers(this);
    fileExplorers.forEach((fileExplorer) => {
      fileExplorer.fileExplorerPlusPatched = true;
    });
  }
  exitFocus() {
    this.isFocus = false;
    this.focusedPath = null;
    this.updateFileExplorerIcon();
    this.updateFocusModeClasses();
    const fileExplorers = getAllFileExplorers(this);
    fileExplorers.forEach((fileExplorer) => {
      if (fileExplorer == null ? void 0 : fileExplorer.requestSort) {
        fileExplorer.requestSort();
      }
    });
    setTimeout(() => {
      fileExplorers.forEach((fileExplorer) => {
        this.refreshFileExplorerVisibility(fileExplorer);
      });
    }, 0);
  }
  refreshFileExplorerVisibility(fileExplorer) {
    if (!(fileExplorer == null ? void 0 : fileExplorer.fileItems)) {
      return;
    }
    Object.values(fileExplorer.fileItems).forEach((vEl) => {
      if (!vEl || !vEl.el) {
        return;
      }
      const filePath = vEl.file.path;
      let shouldShow = true;
      if (this.isFocus && this.focusedPath) {
        const focusedPath = this.focusedPath;
        if (filePath === focusedPath) {
          shouldShow = true;
        } else if (filePath.startsWith(focusedPath + "/")) {
          shouldShow = true;
        } else if (focusedPath.startsWith(filePath + "/")) {
          shouldShow = true;
        } else {
          shouldShow = false;
        }
      }
      if (vEl.info) {
        vEl.info.hidden = !shouldShow;
      }
      if (shouldShow) {
        vEl.el.setCssProps({ display: "" });
        vEl.el.removeAttribute("data-explorer-focus-hidden");
      } else {
        vEl.el.setCssProps({ display: "none" });
        vEl.el.setAttribute("data-explorer-focus-hidden", "true");
      }
    });
  }
  updateFocusModeClasses() {
    const fileExplorers = getAllFileExplorers(this);
    fileExplorers.forEach((fileExplorer) => {
      const containerEl = fileExplorer.containerEl;
      if (this.isFocus) {
        containerEl.addClass("explorer-focus-mode");
      } else {
        containerEl.removeClass("explorer-focus-mode");
      }
    });
  }
  addFileExplorerIcon() {
    const handleIconClick = () => {
      if (this.isFocus) {
        this.exitFocus();
      } else {
        if (this.settings.focusLevel === "custom") {
          if (this.settings.customFolderPath) {
            this.enterFocus(this.settings.customFolderPath);
          }
        } else {
          const file = this.app.workspace.getActiveFile();
          if (file == null ? void 0 : file.path) {
            const focusPath = getFocusPath(file.path, this.settings.focusLevel, this.settings);
            this.enterFocus(focusPath);
          }
        }
      }
    };
    const addIconToFileExplorer = () => {
      const fileExplorerLeaves = this.app.workspace.getLeavesOfType("file-explorer");
      if (fileExplorerLeaves.length === 0) {
        return;
      }
      const fileExplorerView = fileExplorerLeaves[0].view.containerEl;
      const navButtonsContainer = findNavButtonsContainer(fileExplorerView);
      if (!navButtonsContainer) {
        return;
      }
      if (this.fileExplorerIcon && navButtonsContainer.contains(this.fileExplorerIcon)) {
        return;
      }
      if (this.fileExplorerIcon && this.fileExplorerIcon.parentElement) {
        this.fileExplorerIcon.remove();
      }
      if (!this.fileExplorerIcon) {
        this.fileExplorerIcon = createFileExplorerIcon(this);
        this.fileExplorerIcon.setCssProps({ touchAction: "manipulation" });
        let touchHandled = false;
        this.registerDomEvent(this.fileExplorerIcon, "touchstart", (evt) => {
          touchHandled = true;
          evt.preventDefault();
          evt.stopPropagation();
          handleIconClick();
          setTimeout(() => {
            touchHandled = false;
          }, 300);
        });
        this.registerDomEvent(this.fileExplorerIcon, "click", (evt) => {
          if (touchHandled) {
            evt.preventDefault();
            evt.stopPropagation();
            return;
          }
          evt.preventDefault();
          evt.stopPropagation();
          handleIconClick();
        });
      }
      this.updateFileExplorerIcon();
      insertFileExplorerIcon(this.fileExplorerIcon, navButtonsContainer);
    };
    addIconToFileExplorer();
    this.registerEvent(
      this.app.workspace.on("layout-change", () => {
        if (this.settings.showFileExplorerIcon) {
          addIconToFileExplorer();
        }
      })
    );
  }
  updateFileExplorerIcon() {
    if (!this.fileExplorerIcon) {
      return;
    }
    if (!this.settings.showFileExplorerIcon) {
      if (this.fileExplorerIcon.parentElement) {
        this.fileExplorerIcon.remove();
      }
      return;
    }
    if (!this.fileExplorerIcon.parentElement) {
      const fileExplorerLeaves = this.app.workspace.getLeavesOfType("file-explorer");
      if (fileExplorerLeaves.length > 0) {
        const fileExplorerView = fileExplorerLeaves[0].view.containerEl;
        const navButtonsContainer = findNavButtonsContainer(fileExplorerView);
        if (navButtonsContainer) {
          insertFileExplorerIcon(this.fileExplorerIcon, navButtonsContainer);
        }
      }
    }
    if (this.fileExplorerIcon.style.cursor) {
      this.fileExplorerIcon.style.removeProperty("cursor");
    }
    if (this.isFocus) {
      this.fileExplorerIcon.addClass("is-active");
    } else {
      this.fileExplorerIcon.removeClass("is-active");
    }
  }
  onunload() {
    if (this.fileExplorerIcon) {
      this.fileExplorerIcon.remove();
      this.fileExplorerIcon = null;
    }
  }
};
var main_default = ExplorerFocusPlugin;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAibGFuZy9lbi50cyIsICJsYW5nL3poLnRzIiwgImxhbmcvaW5kZXgudHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy91aS9zZXR0aW5ncy10YWIudHMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL21vbmtleS1hcm91bmRAMy4wLjAvbm9kZV9tb2R1bGVzL21vbmtleS1hcm91bmQvZGlzdC9pbmRleC5tanMiLCAic3JjL3V0aWxzL2ZpbGUtZXhwbG9yZXItcGF0Y2gudHMiLCAic3JjL3V0aWxzL3NldHRpbmdzLWNvbXBhdC50cyIsICJzcmMvdXRpbHMvZm9jdXMudHMiLCAic3JjL2NvbW1hbmRzL2luZGV4LnRzIiwgInNyYy91dGlscy9maWxlLWV4cGxvcmVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBcHAsIFBsdWdpbiwgUGx1Z2luTWFuaWZlc3QgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IGxhbmdzLCB7IExhbmcgfSBmcm9tICcuLi9sYW5nJztcclxuaW1wb3J0IHsgRXhwbG9yZXJGb2N1c1NldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IEV4cGxvcmVyRm9jdXNTZXR0aW5nVGFiIH0gZnJvbSAnLi91aS9zZXR0aW5ncy10YWInO1xyXG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzIH0gZnJvbSAnLi9jb21tYW5kcyc7XHJcbmltcG9ydCB7IGNyZWF0ZUZpbGVFeHBsb3Jlckljb24sIGluc2VydEZpbGVFeHBsb3Jlckljb24sIGZpbmROYXZCdXR0b25zQ29udGFpbmVyIH0gZnJvbSAnLi91dGlscy9maWxlLWV4cGxvcmVyJztcclxuaW1wb3J0IHsgcGF0Y2hGaWxlRXhwbG9yZXIgYXMgcGF0Y2hGaWxlRXhwbG9yZXJVdGlsLCBnZXRBbGxGaWxlRXhwbG9yZXJzLCBGaWxlRXhwbG9yZXJWaWV3IH0gZnJvbSAnLi91dGlscy9maWxlLWV4cGxvcmVyLXBhdGNoJztcclxuaW1wb3J0IHsgZ2V0Rm9jdXNQYXRoIH0gZnJvbSAnLi91dGlscy9mb2N1cyc7XHJcblxyXG5leHBvcnQgY2xhc3MgRXhwbG9yZXJGb2N1c1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0aXNGb2N1czogYm9vbGVhbjtcclxuXHRmb2N1c2VkUGF0aDogc3RyaW5nIHwgbnVsbDtcclxuXHRsYW5nOiBMYW5nO1xyXG5cdHNldHRpbmdzITogRXhwbG9yZXJGb2N1c1NldHRpbmdzO1xyXG5cdGZpbGVFeHBsb3Jlckljb246IEhUTUxFbGVtZW50IHwgbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG1hbmlmZXN0OiBQbHVnaW5NYW5pZmVzdCkge1xyXG5cdFx0c3VwZXIoYXBwLCBtYW5pZmVzdCk7XHJcblx0XHRjb25zdCBvYnNpZGlhbkxhbmdOYW1lID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYW5ndWFnZScpO1xyXG5cdFx0Y29uc3QgbGFuZ05hbWUgPSBvYnNpZGlhbkxhbmdOYW1lID09PSAnemgnID8gJ3poJyA6ICdlbic7XHJcblx0XHR0aGlzLmxhbmcgPSBsYW5nc1tsYW5nTmFtZV07XHJcblx0XHR0aGlzLmlzRm9jdXMgPSBmYWxzZTtcclxuXHRcdHRoaXMuZm9jdXNlZFBhdGggPSBudWxsO1xyXG5cdFx0dGhpcy5maWxlRXhwbG9yZXJJY29uID0gbnVsbDtcclxuXHR9XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBFeHBsb3JlckZvY3VzU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuXHRcdHJlZ2lzdGVyQ29tbWFuZHModGhpcyk7XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0ZpbGVFeHBsb3Jlckljb24pIHtcclxuXHRcdFx0dGhpcy5hZGRGaWxlRXhwbG9yZXJJY29uKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnBhdGNoQWxsRmlsZUV4cGxvcmVycygpO1xyXG5cdFx0XHR0aGlzLnVwZGF0ZUZvY3VzTW9kZUNsYXNzZXMoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImxheW91dC1jaGFuZ2VcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnBhdGNoQWxsRmlsZUV4cGxvcmVycygpO1xyXG5cdFx0XHR0aGlzLnVwZGF0ZUZvY3VzTW9kZUNsYXNzZXMoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0Y29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKSBhcyBQYXJ0aWFsPEV4cGxvcmVyRm9jdXNTZXR0aW5ncz4gfCBudWxsO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGxvYWRlZERhdGEpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdHRvZ2dsZUZvY3VzKHBhdGg6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xyXG5cdFx0aWYgKHRoaXMuaXNGb2N1cykge1xyXG5cdFx0XHR0aGlzLmV4aXRGb2N1cygpO1xyXG5cdFx0fSBlbHNlIGlmIChwYXRoKSB7XHJcblx0XHRcdHRoaXMuZW50ZXJGb2N1cyhwYXRoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGVudGVyRm9jdXMocGF0aDogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmlzRm9jdXMgPSB0cnVlO1xyXG5cdFx0dGhpcy5mb2N1c2VkUGF0aCA9IHBhdGg7XHJcblx0XHRcclxuXHRcdC8vIFVwZGF0ZSBpY29uIGlmIGl0IGV4aXN0c1xyXG5cdFx0dGhpcy51cGRhdGVGaWxlRXhwbG9yZXJJY29uKCk7XHJcblx0XHRcclxuXHRcdC8vIFVwZGF0ZSBDU1MgY2xhc3Nlc1xyXG5cdFx0dGhpcy51cGRhdGVGb2N1c01vZGVDbGFzc2VzKCk7XHJcblx0XHRcclxuXHRcdC8vIFRyaWdnZXIgZmlsZSBleHBsb3JlciByZWZyZXNoIG9uIGFsbCBmaWxlIGV4cGxvcmVyIGluc3RhbmNlc1xyXG5cdFx0Y29uc3QgZmlsZUV4cGxvcmVycyA9IGdldEFsbEZpbGVFeHBsb3JlcnModGhpcyk7XHJcblx0XHRmaWxlRXhwbG9yZXJzLmZvckVhY2goZmlsZUV4cGxvcmVyID0+IHtcclxuXHRcdFx0aWYgKGZpbGVFeHBsb3Jlcj8ucmVxdWVzdFNvcnQpIHtcclxuXHRcdFx0XHRmaWxlRXhwbG9yZXIucmVxdWVzdFNvcnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIEZvcmNlIHJlZnJlc2ggYnkgbWFudWFsbHkgdXBkYXRpbmcgdmlzaWJpbGl0eSAoZXNwZWNpYWxseSBpbXBvcnRhbnQgb24gbW9iaWxlKVxyXG5cdFx0Ly8gVXNlIHNldFRpbWVvdXQgdG8gZW5zdXJlIERPTSBpcyByZWFkeSBhZnRlciByZXF1ZXN0U29ydFxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGZpbGVFeHBsb3JlcnMuZm9yRWFjaChmaWxlRXhwbG9yZXIgPT4ge1xyXG5cdFx0XHRcdHRoaXMucmVmcmVzaEZpbGVFeHBsb3JlclZpc2liaWxpdHkoZmlsZUV4cGxvcmVyKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LCAwKTtcclxuXHR9XHJcblxyXG5cdHBhdGNoQWxsRmlsZUV4cGxvcmVycygpOiB2b2lkIHtcclxuXHRcdC8vIFBhdGNoIHRoZSBwcm90b3R5cGUgKG9uY2UpIGFuZCBtYXJrIGFsbCBpbnN0YW5jZXNcclxuXHRcdHBhdGNoRmlsZUV4cGxvcmVyVXRpbCh0aGlzKTtcclxuXHRcdGNvbnN0IGZpbGVFeHBsb3JlcnMgPSBnZXRBbGxGaWxlRXhwbG9yZXJzKHRoaXMpO1xyXG5cdFx0ZmlsZUV4cGxvcmVycy5mb3JFYWNoKGZpbGVFeHBsb3JlciA9PiB7XHJcblx0XHRcdGZpbGVFeHBsb3Jlci5maWxlRXhwbG9yZXJQbHVzUGF0Y2hlZCA9IHRydWU7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGV4aXRGb2N1cygpIHtcclxuXHRcdHRoaXMuaXNGb2N1cyA9IGZhbHNlO1xyXG5cdFx0dGhpcy5mb2N1c2VkUGF0aCA9IG51bGw7XHJcblxyXG5cdFx0Ly8gVXBkYXRlIGljb24gaWYgaXQgZXhpc3RzXHJcblx0XHR0aGlzLnVwZGF0ZUZpbGVFeHBsb3Jlckljb24oKTtcclxuXHRcdFxyXG5cdFx0Ly8gVXBkYXRlIENTUyBjbGFzc2VzXHJcblx0XHR0aGlzLnVwZGF0ZUZvY3VzTW9kZUNsYXNzZXMoKTtcclxuXHRcdFxyXG5cdFx0Ly8gVHJpZ2dlciBmaWxlIGV4cGxvcmVyIHJlZnJlc2ggb24gYWxsIGZpbGUgZXhwbG9yZXIgaW5zdGFuY2VzXHJcblx0XHRjb25zdCBmaWxlRXhwbG9yZXJzID0gZ2V0QWxsRmlsZUV4cGxvcmVycyh0aGlzKTtcclxuXHRcdGZpbGVFeHBsb3JlcnMuZm9yRWFjaChmaWxlRXhwbG9yZXIgPT4ge1xyXG5cdFx0XHRpZiAoZmlsZUV4cGxvcmVyPy5yZXF1ZXN0U29ydCkge1xyXG5cdFx0XHRcdGZpbGVFeHBsb3Jlci5yZXF1ZXN0U29ydCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly8gRm9yY2UgcmVmcmVzaCBieSBtYW51YWxseSB1cGRhdGluZyB2aXNpYmlsaXR5IChlc3BlY2lhbGx5IGltcG9ydGFudCBvbiBtb2JpbGUpXHJcblx0XHQvLyBVc2Ugc2V0VGltZW91dCB0byBlbnN1cmUgRE9NIGlzIHJlYWR5IGFmdGVyIHJlcXVlc3RTb3J0XHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0ZmlsZUV4cGxvcmVycy5mb3JFYWNoKGZpbGVFeHBsb3JlciA9PiB7XHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoRmlsZUV4cGxvcmVyVmlzaWJpbGl0eShmaWxlRXhwbG9yZXIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sIDApO1xyXG5cdH1cclxuXHJcblx0cmVmcmVzaEZpbGVFeHBsb3JlclZpc2liaWxpdHkoZmlsZUV4cGxvcmVyOiBGaWxlRXhwbG9yZXJWaWV3KTogdm9pZCB7XHJcblx0XHRpZiAoIWZpbGVFeHBsb3Jlcj8uZmlsZUl0ZW1zKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBNYW51YWxseSB1cGRhdGUgdmlzaWJpbGl0eSBvZiBhbGwgZmlsZSBpdGVtcyBpbiB0aGUgRE9NXHJcblx0XHRPYmplY3QudmFsdWVzKGZpbGVFeHBsb3Jlci5maWxlSXRlbXMpLmZvckVhY2goKHZFbCkgPT4ge1xyXG5cdFx0XHRpZiAoIXZFbCB8fCAhdkVsLmVsKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBmaWxlUGF0aCA9IHZFbC5maWxlLnBhdGg7XHJcblx0XHRcdGxldCBzaG91bGRTaG93ID0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmICh0aGlzLmlzRm9jdXMgJiYgdGhpcy5mb2N1c2VkUGF0aCkge1xyXG5cdFx0XHRcdGNvbnN0IGZvY3VzZWRQYXRoID0gdGhpcy5mb2N1c2VkUGF0aDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBTaG93IGl0ZW1zIHRoYXQgbWF0Y2ggdGhlIGZvY3VzZWQgcGF0aCBleGFjdGx5XHJcblx0XHRcdFx0aWYgKGZpbGVQYXRoID09PSBmb2N1c2VkUGF0aCkge1xyXG5cdFx0XHRcdFx0c2hvdWxkU2hvdyA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFNob3cgaXRlbXMgdGhhdCBhcmUgY2hpbGRyZW4gb2YgdGhlIGZvY3VzZWQgcGF0aFxyXG5cdFx0XHRcdGVsc2UgaWYgKGZpbGVQYXRoLnN0YXJ0c1dpdGgoZm9jdXNlZFBhdGggKyBcIi9cIikpIHtcclxuXHRcdFx0XHRcdHNob3VsZFNob3cgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBTaG93IGl0ZW1zIHRoYXQgYXJlIGFuY2VzdG9ycyBvZiB0aGUgZm9jdXNlZCBwYXRoIChwYXJlbnQgY2hhaW4pXHJcblx0XHRcdFx0ZWxzZSBpZiAoZm9jdXNlZFBhdGguc3RhcnRzV2l0aChmaWxlUGF0aCArIFwiL1wiKSkge1xyXG5cdFx0XHRcdFx0c2hvdWxkU2hvdyA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIEhpZGUgZXZlcnl0aGluZyBlbHNlXHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRzaG91bGRTaG93ID0gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBVcGRhdGUgdGhlIGhpZGRlbiBzdGF0ZSBpbiB0aGUgdmlydHVhbCBlbGVtZW50XHJcblx0XHRcdGlmICh2RWwuaW5mbykge1xyXG5cdFx0XHRcdHZFbC5pbmZvLmhpZGRlbiA9ICFzaG91bGRTaG93O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBBbHNvIGRpcmVjdGx5IHVwZGF0ZSB0aGUgRE9NIGVsZW1lbnQgdmlzaWJpbGl0eVxyXG5cdFx0XHRpZiAoc2hvdWxkU2hvdykge1xyXG5cdFx0XHRcdHZFbC5lbC5zZXRDc3NQcm9wcyh7IGRpc3BsYXk6ICcnIH0pO1xyXG5cdFx0XHRcdHZFbC5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtZXhwbG9yZXItZm9jdXMtaGlkZGVuJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dkVsLmVsLnNldENzc1Byb3BzKHsgZGlzcGxheTogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdHZFbC5lbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZXhwbG9yZXItZm9jdXMtaGlkZGVuJywgJ3RydWUnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVGb2N1c01vZGVDbGFzc2VzKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgZmlsZUV4cGxvcmVycyA9IGdldEFsbEZpbGVFeHBsb3JlcnModGhpcyk7XHJcblx0XHRmaWxlRXhwbG9yZXJzLmZvckVhY2goZmlsZUV4cGxvcmVyID0+IHtcclxuXHRcdFx0Y29uc3QgY29udGFpbmVyRWwgPSBmaWxlRXhwbG9yZXIuY29udGFpbmVyRWw7XHJcblx0XHRcdGlmICh0aGlzLmlzRm9jdXMpIHtcclxuXHRcdFx0XHRjb250YWluZXJFbC5hZGRDbGFzcyhcImV4cGxvcmVyLWZvY3VzLW1vZGVcIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29udGFpbmVyRWwucmVtb3ZlQ2xhc3MoXCJleHBsb3Jlci1mb2N1cy1tb2RlXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cclxuXHRhZGRGaWxlRXhwbG9yZXJJY29uKCkge1xyXG5cdFx0Y29uc3QgaGFuZGxlSWNvbkNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHRpZiAodGhpcy5pc0ZvY3VzKSB7XHJcblx0XHRcdFx0dGhpcy5leGl0Rm9jdXMoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5mb2N1c0xldmVsID09PSAnY3VzdG9tJykge1xyXG5cdFx0XHRcdFx0Ly8gRm9yIGN1c3RvbSBmb2xkZXIsIHVzZSB0aGUgY3VzdG9tIHBhdGggZGlyZWN0bHlcclxuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmN1c3RvbUZvbGRlclBhdGgpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5lbnRlckZvY3VzKHRoaXMuc2V0dGluZ3MuY3VzdG9tRm9sZGVyUGF0aCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIEZvciBvdGhlciBsZXZlbHMsIG5lZWQgdGhlIGN1cnJlbnQgZmlsZVxyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0XHRpZiAoZmlsZT8ucGF0aCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmb2N1c1BhdGggPSBnZXRGb2N1c1BhdGgoZmlsZS5wYXRoLCB0aGlzLnNldHRpbmdzLmZvY3VzTGV2ZWwsIHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmVudGVyRm9jdXMoZm9jdXNQYXRoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3QgYWRkSWNvblRvRmlsZUV4cGxvcmVyID0gKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBmaWxlRXhwbG9yZXJMZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdmaWxlLWV4cGxvcmVyJyk7XHJcblx0XHRcdGlmIChmaWxlRXhwbG9yZXJMZWF2ZXMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBmaWxlRXhwbG9yZXJWaWV3ID0gZmlsZUV4cGxvcmVyTGVhdmVzWzBdLnZpZXcuY29udGFpbmVyRWw7XHJcblx0XHRcdGNvbnN0IG5hdkJ1dHRvbnNDb250YWluZXIgPSBmaW5kTmF2QnV0dG9uc0NvbnRhaW5lcihmaWxlRXhwbG9yZXJWaWV3KTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICghbmF2QnV0dG9uc0NvbnRhaW5lcikge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgaWNvbiBhbHJlYWR5IGV4aXN0cyBpbiB0aGlzIGNvbnRhaW5lclxyXG5cdFx0XHRpZiAodGhpcy5maWxlRXhwbG9yZXJJY29uICYmIG5hdkJ1dHRvbnNDb250YWluZXIuY29udGFpbnModGhpcy5maWxlRXhwbG9yZXJJY29uKSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIG9sZCBpY29uIGlmIGl0IGV4aXN0cyBlbHNld2hlcmVcclxuXHRcdFx0aWYgKHRoaXMuZmlsZUV4cGxvcmVySWNvbiAmJiB0aGlzLmZpbGVFeHBsb3Jlckljb24ucGFyZW50RWxlbWVudCkge1xyXG5cdFx0XHRcdHRoaXMuZmlsZUV4cGxvcmVySWNvbi5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBpY29uIGJ1dHRvbiBpZiBpdCBkb2Vzbid0IGV4aXN0XHJcblx0XHRcdGlmICghdGhpcy5maWxlRXhwbG9yZXJJY29uKSB7XHJcblx0XHRcdFx0dGhpcy5maWxlRXhwbG9yZXJJY29uID0gY3JlYXRlRmlsZUV4cGxvcmVySWNvbih0aGlzKTtcclxuXHJcblx0XHRcdFx0Ly8gRG9uJ3Qgc2V0IGN1cnNvciAtIGxldCBpdCBpbmhlcml0IGZyb20gLmNsaWNrYWJsZS1pY29uIGNsYXNzIChjdXJzb3I6IHZhcigtLWN1cnNvcikpXHJcblx0XHRcdFx0Ly8gVGhpcyBtYXRjaGVzIG90aGVyIGZpbGUgZXhwbG9yZXIgaWNvbnMgd2hpY2ggdXNlIHRoZSBDU1MgdmFyaWFibGVcclxuXHRcdFx0XHR0aGlzLmZpbGVFeHBsb3Jlckljb24uc2V0Q3NzUHJvcHMoeyB0b3VjaEFjdGlvbjogJ21hbmlwdWxhdGlvbicgfSk7XHJcblxyXG5cdFx0XHRcdC8vIFVzZSBhIHVuaWZpZWQgaGFuZGxlciB0aGF0IHdvcmtzIGZvciBib3RoIGNsaWNrIGFuZCB0b3VjaFxyXG5cdFx0XHRcdC8vIE9uIG1vYmlsZSwgdG91Y2ggZXZlbnRzIHR5cGljYWxseSB0cmlnZ2VyIGNsaWNrLCBidXQgd2UgaGFuZGxlIGJvdGggdG8gYmUgc2FmZVxyXG5cdFx0XHRcdGxldCB0b3VjaEhhbmRsZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQodGhpcy5maWxlRXhwbG9yZXJJY29uLCAndG91Y2hzdGFydCcsIChldnQpID0+IHtcclxuXHRcdFx0XHRcdHRvdWNoSGFuZGxlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGhhbmRsZUljb25DbGljaygpO1xyXG5cdFx0XHRcdFx0Ly8gUmVzZXQgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHsgdG91Y2hIYW5kbGVkID0gZmFsc2U7IH0sIDMwMCk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudCh0aGlzLmZpbGVFeHBsb3Jlckljb24sICdjbGljaycsIChldnQpID0+IHtcclxuXHRcdFx0XHRcdC8vIElmIHRvdWNoc3RhcnQgYWxyZWFkeSBoYW5kbGVkIGl0LCBza2lwIGNsaWNrIHRvIGF2b2lkIGRvdWJsZS1maXJpbmdcclxuXHRcdFx0XHRcdGlmICh0b3VjaEhhbmRsZWQpIHtcclxuXHRcdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRoYW5kbGVJY29uQ2xpY2soKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gU2V0L3VwZGF0ZSBpY29uXHJcblx0XHRcdHRoaXMudXBkYXRlRmlsZUV4cGxvcmVySWNvbigpO1xyXG5cclxuXHRcdFx0Ly8gSW5zZXJ0IGljb24gaW4gY29ycmVjdCBwb3NpdGlvblxyXG5cdFx0XHRpbnNlcnRGaWxlRXhwbG9yZXJJY29uKHRoaXMuZmlsZUV4cGxvcmVySWNvbiwgbmF2QnV0dG9uc0NvbnRhaW5lcik7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFRyeSB0byBhZGQgaW1tZWRpYXRlbHlcclxuXHRcdGFkZEljb25Ub0ZpbGVFeHBsb3JlcigpO1xyXG5cclxuXHRcdC8vIEFsc28gbGlzdGVuIGZvciB3b3Jrc3BhY2UgY2hhbmdlcyBpbiBjYXNlIGZpbGUgZXhwbG9yZXIgaXMgY3JlYXRlZCBsYXRlclxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0ZpbGVFeHBsb3Jlckljb24pIHtcclxuXHRcdFx0XHRcdGFkZEljb25Ub0ZpbGVFeHBsb3JlcigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVGaWxlRXhwbG9yZXJJY29uKCkge1xyXG5cdFx0aWYgKCF0aGlzLmZpbGVFeHBsb3Jlckljb24pIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zaG93RmlsZUV4cGxvcmVySWNvbikge1xyXG5cdFx0XHRpZiAodGhpcy5maWxlRXhwbG9yZXJJY29uLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0XHR0aGlzLmZpbGVFeHBsb3Jlckljb24ucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEVuc3VyZSBpY29uIGlzIGluIERPTSBpZiBzZXR0aW5nIGlzIGVuYWJsZWRcclxuXHRcdGlmICghdGhpcy5maWxlRXhwbG9yZXJJY29uLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0Ly8gUmUtaW5zZXJ0IHRoZSBpY29uIGludG8gdGhlIGZpbGUgZXhwbG9yZXJcclxuXHRcdFx0Y29uc3QgZmlsZUV4cGxvcmVyTGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0XHRpZiAoZmlsZUV4cGxvcmVyTGVhdmVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRjb25zdCBmaWxlRXhwbG9yZXJWaWV3ID0gZmlsZUV4cGxvcmVyTGVhdmVzWzBdLnZpZXcuY29udGFpbmVyRWw7XHJcblx0XHRcdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGZpbmROYXZCdXR0b25zQ29udGFpbmVyKGZpbGVFeHBsb3JlclZpZXcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChuYXZCdXR0b25zQ29udGFpbmVyKSB7XHJcblx0XHRcdFx0XHRpbnNlcnRGaWxlRXhwbG9yZXJJY29uKHRoaXMuZmlsZUV4cGxvcmVySWNvbiwgbmF2QnV0dG9uc0NvbnRhaW5lcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRG9uJ3Qgc2V0IGN1cnNvciAtIGxldCBpdCBpbmhlcml0IGZyb20gLmNsaWNrYWJsZS1pY29uIGNsYXNzIChjdXJzb3I6IHZhcigtLWN1cnNvcikpXHJcblx0XHQvLyBUaGlzIG1hdGNoZXMgb3RoZXIgZmlsZSBleHBsb3JlciBpY29ucyB3aGljaCB1c2UgdGhlIENTUyB2YXJpYWJsZVxyXG5cdFx0aWYgKHRoaXMuZmlsZUV4cGxvcmVySWNvbi5zdHlsZS5jdXJzb3IpIHtcclxuXHRcdFx0dGhpcy5maWxlRXhwbG9yZXJJY29uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjdXJzb3InKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBUb2dnbGUgaXMtYWN0aXZlIGNsYXNzIGJhc2VkIG9uIGZvY3VzIHN0YXRlXHJcblx0XHRpZiAodGhpcy5pc0ZvY3VzKSB7XHJcblx0XHRcdHRoaXMuZmlsZUV4cGxvcmVySWNvbi5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmZpbGVFeHBsb3Jlckljb24ucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHRpZiAodGhpcy5maWxlRXhwbG9yZXJJY29uKSB7XHJcblx0XHRcdHRoaXMuZmlsZUV4cGxvcmVySWNvbi5yZW1vdmUoKTtcclxuXHRcdFx0dGhpcy5maWxlRXhwbG9yZXJJY29uID0gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEV4cGxvcmVyRm9jdXNQbHVnaW47XHJcblxyXG4iLCAiY29uc3QgbGFuZyA9IHtcclxuICBmb2N1czogXCJGb2N1c1wiLFxyXG4gIGVudGVyRm9jdXMgOiBcIkVudGVyIGZvY3VzXCIsXHJcbiAgZXhpdEZvY3VzOiBcIkV4aXQgZm9jdXNcIixcclxuICB0b2dnbGVGb2N1czogXCJUb2dnbGUgZm9jdXNcIixcclxuICBzZXR0aW5nczogXCJFeHBsb3JlciBmb2N1cyBzZXR0aW5nc1wiLFxyXG4gIHNob3dSaWdodENsaWNrTWVudTogXCJTaG93IHJpZ2h0LWNsaWNrIG1lbnUgb3B0aW9uXCIsXHJcbiAgc2hvd0ZpbGVFeHBsb3Jlckljb246IFwiU2hvdyBmaWxlIGV4cGxvcmVyIGljb25cIixcclxuICBmb2N1c0xldmVsOiBcIkNvbW1hbmQgZm9jdXMgbGV2ZWxcIixcclxuICBmb2N1c0xldmVsRmlsZTogXCJDdXJyZW50IGZpbGUgb25seVwiLFxyXG4gIGZvY3VzTGV2ZWxQYXJlbnQ6IFwiUGFyZW50IGZvbGRlclwiLFxyXG4gIGZvY3VzTGV2ZWxHcmFuZHBhcmVudDogXCJHcmFuZHBhcmVudCBmb2xkZXJcIixcclxuICBmb2N1c0xldmVsR3JlYXRHcmFuZHBhcmVudDogXCJHcmVhdCBncmFuZHBhcmVudCBmb2xkZXJcIixcclxuICBmb2N1c0xldmVsQ3VzdG9tOiBcIlNwZWNpZmljIGZvbGRlclwiLFxyXG4gIGZvY3VzTGV2ZWxEZXNjOiBcIkRldGVybWluZXMgd2hhdCB0byBmb2N1cyB3aGVuIHVzaW5nIHRoZSB0b2dnbGUgY29tbWFuZCBvciBmaWxlIGV4cGxvcmVyIGljb24uIFJpZ2h0LWNsaWNrIG1lbnUgYWx3YXlzIGZvY3VzZXMgdGhlIGNsaWNrZWQgZmlsZS9mb2xkZXIuXCIsXHJcbiAgY3VzdG9tRm9sZGVyUGF0aDogXCJDdXN0b20gZm9sZGVyIHBhdGhcIixcclxuICBjdXN0b21Gb2xkZXJQYXRoRGVzYzogXCJFbnRlciBhIGZvbGRlciBwYXRoIChmb2xkZXIvc3ViZm9sZGVyKS4gVGhpcyBmb2xkZXIgd2lsbCBiZSBmb2N1c2VkIHJlZ2FyZGxlc3Mgb2Ygd2hpY2ggZmlsZSBpcyBvcGVuLlwiLFxyXG4gIGhpZGVBbmNlc3RvckZvbGRlcnM6IFwiSGlkZSBhbmNlc3RyYWwgaW5kZW50c1wiLFxyXG4gIGhpZGVBbmNlc3RvckZvbGRlcnNEZXNjOiBcIldoZW4gZW5hYmxlZCwgaGlkZXMgcGFyZW50IGZvbGRlciBpbmRlbnRhdGlvbiB3aGVuIGZvY3VzaW5nLCBtYWtpbmcgdGhlIGZvY3VzZWQgZm9sZGVyIGFwcGVhciBhdCByb290IGxldmVsLlwiLFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBsYW5nXHJcbiIsICJjb25zdCBsYW5nID0ge1xyXG4gIGZvY3VzOiBcIlx1NEUxM1x1NkNFOFwiLFxyXG4gIGVudGVyRm9jdXMgOiBcIlx1NEUxM1x1NkNFOFwiLFxyXG4gIGV4aXRGb2N1czogXCJcdTkwMDBcdTUxRkFcdTRFMTNcdTZDRThcIixcclxuICB0b2dnbGVGb2N1czogXCJcdTUyMDdcdTYzNjJcdTRFMTNcdTZDRThcIixcclxuICBzZXR0aW5nczogXCJcdThENDRcdTZFOTBcdTdCQTFcdTc0MDZcdTU2NjhcdTRFMTNcdTZDRThcdThCQkVcdTdGNkVcIixcclxuICBzaG93UmlnaHRDbGlja01lbnU6IFwiXHU2NjNFXHU3OTNBXHU1M0YzXHU5NTJFXHU4M0RDXHU1MzU1XHU5MDA5XHU5ODc5XCIsXHJcbiAgc2hvd0ZpbGVFeHBsb3Jlckljb246IFwiXHU2NjNFXHU3OTNBXHU2NTg3XHU0RUY2XHU2RDRGXHU4OUM4XHU1NjY4XHU1NkZFXHU2ODA3XCIsXHJcbiAgZm9jdXNMZXZlbDogXCJcdTU0N0RcdTRFRTRcdTRFMTNcdTZDRThcdTdFQTdcdTUyMkJcIixcclxuICBmb2N1c0xldmVsRmlsZTogXCJcdTRFQzVcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcIixcclxuICBmb2N1c0xldmVsUGFyZW50OiBcIlx1NzIzNlx1NjU4N1x1NEVGNlx1NTkzOVwiLFxyXG4gIGZvY3VzTGV2ZWxHcmFuZHBhcmVudDogXCJcdTc5NTZcdTcyMzZcdTY1ODdcdTRFRjZcdTU5MzlcIixcclxuICBmb2N1c0xldmVsR3JlYXRHcmFuZHBhcmVudDogXCJcdTY2RkVcdTc5NTZcdTcyMzZcdTY1ODdcdTRFRjZcdTU5MzlcIixcclxuICBmb2N1c0xldmVsQ3VzdG9tOiBcIlx1NzI3OVx1NUI5QVx1NjU4N1x1NEVGNlx1NTkzOVwiLFxyXG4gIGZvY3VzTGV2ZWxEZXNjOiBcIlx1Nzg2RVx1NUI5QVx1NEY3Rlx1NzUyOFx1NTIwN1x1NjM2Mlx1NTQ3RFx1NEVFNFx1NjIxNlx1NjU4N1x1NEVGNlx1NkQ0Rlx1ODlDOFx1NTY2OFx1NTZGRVx1NjgwN1x1NjVGNlx1ODk4MVx1ODA1QVx1NzEyNlx1NzY4NFx1NTE4NVx1NUJCOVx1MzAwMlx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVx1NTlDQlx1N0VDOFx1ODA1QVx1NzEyNlx1NTM1NVx1NTFGQlx1NzY4NFx1NjU4N1x1NEVGNi9cdTY1ODdcdTRFRjZcdTU5MzlcdTMwMDJcIixcclxuICBjdXN0b21Gb2xkZXJQYXRoOiBcIlx1ODFFQVx1NUI5QVx1NEU0OVx1NjU4N1x1NEVGNlx1NTkzOVx1OERFRlx1NUY4NFwiLFxyXG4gIGN1c3RvbUZvbGRlclBhdGhEZXNjOiBcIlx1OEY5M1x1NTE2NVx1NjU4N1x1NEVGNlx1NTkzOVx1OERFRlx1NUY4NFx1RkYwOFx1NjU4N1x1NEVGNlx1NTkzOS9cdTVCNTBcdTY1ODdcdTRFRjZcdTU5MzlcdUZGMDlcdTMwMDJcdTY1RTBcdThCQkFcdTYyNTNcdTVGMDBcdTU0RUFcdTRFMkFcdTY1ODdcdTRFRjZcdUZGMENcdTkwRkRcdTRGMUFcdTgwNUFcdTcxMjZcdTZCNjRcdTY1ODdcdTRFRjZcdTU5MzlcdTMwMDJcIixcclxuICBoaWRlQW5jZXN0b3JGb2xkZXJzOiBcIlx1OTY5MFx1ODVDRlx1Nzk1Nlx1NTE0OFx1N0YyOVx1OEZEQlwiLFxyXG4gIGhpZGVBbmNlc3RvckZvbGRlcnNEZXNjOiBcIlx1NTQyRlx1NzUyOFx1NTQwRVx1RkYwQ1x1ODA1QVx1NzEyNlx1NjVGNlx1OTY5MFx1ODVDRlx1NzIzNlx1NjU4N1x1NEVGNlx1NTkzOVx1N0YyOVx1OEZEQlx1RkYwQ1x1NEY3Rlx1ODA1QVx1NzEyNlx1NzY4NFx1NjU4N1x1NEVGNlx1NTkzOVx1NjYzRVx1NzkzQVx1NTcyOFx1NjgzOVx1N0VBN1x1NTIyQlx1MzAwMlwiLFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBsYW5nIiwgImltcG9ydCBlbiBmcm9tICcuL2VuJztcclxuaW1wb3J0IHpoIGZyb20gJy4vemgnO1xyXG5cclxuY29uc3QgbGFuZ3MgPSB7XHJcbiAgZW4sXHJcbiAgemgsXHJcbn1cclxuZXhwb3J0IHR5cGUgTGFuZyA9IHR5cGVvZiBsYW5ncy5lbjtcclxuZXhwb3J0IGRlZmF1bHQgbGFuZ3MiLCAiZXhwb3J0IGludGVyZmFjZSBFeHBsb3JlckZvY3VzU2V0dGluZ3Mge1xuXHRzaG93UmlnaHRDbGlja01lbnU6IGJvb2xlYW47XG5cdHNob3dGaWxlRXhwbG9yZXJJY29uOiBib29sZWFuO1xuXHRmb2N1c0xldmVsOiAnZmlsZScgfCAncGFyZW50JyB8ICdncmFuZHBhcmVudCcgfCAnZ3JlYXRncmFuZHBhcmVudCcgfCAnY3VzdG9tJztcblx0Y3VzdG9tRm9sZGVyUGF0aDogc3RyaW5nO1xuXHRoaWRlQW5jZXN0b3JGb2xkZXJzOiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRXhwbG9yZXJGb2N1c1NldHRpbmdzID0ge1xuXHRzaG93UmlnaHRDbGlja01lbnU6IHRydWUsXG5cdHNob3dGaWxlRXhwbG9yZXJJY29uOiB0cnVlLFxuXHRmb2N1c0xldmVsOiAncGFyZW50Jyxcblx0Y3VzdG9tRm9sZGVyUGF0aDogJycsXG5cdGhpZGVBbmNlc3RvckZvbGRlcnM6IGZhbHNlXG59O1xuXG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IEV4cGxvcmVyRm9jdXNQbHVnaW4gfSBmcm9tIFwiLi4vbWFpblwiO1xyXG5pbXBvcnQgeyBnZXRBbGxGaWxlRXhwbG9yZXJzIH0gZnJvbSBcIi4uL3V0aWxzL2ZpbGUtZXhwbG9yZXItcGF0Y2hcIjtcclxuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCB9IGZyb20gXCIuLi91dGlscy9zZXR0aW5ncy1jb21wYXRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBFeHBsb3JlckZvY3VzU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogRXhwbG9yZXJGb2N1c1BsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRXhwbG9yZXJGb2N1c1BsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdC8vIEZpcnN0IGdyb3VwIChubyBoZWFkaW5nKVxyXG5cdFx0Y29uc3QgZ2VuZXJhbEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgdW5kZWZpbmVkLCAnZXhwbG9yZXItZm9jdXMnKTtcclxuXHJcblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUodGhpcy5wbHVnaW4ubGFuZy5zaG93UmlnaHRDbGlja01lbnUpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1JpZ2h0Q2xpY2tNZW51KVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UmlnaHRDbGlja01lbnUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUodGhpcy5wbHVnaW4ubGFuZy5zaG93RmlsZUV4cGxvcmVySWNvbilcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RmlsZUV4cGxvcmVySWNvbilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ZpbGVFeHBsb3Jlckljb24gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnVwZGF0ZUZpbGVFeHBsb3Jlckljb24oKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSh0aGlzLnBsdWdpbi5sYW5nLmZvY3VzTGV2ZWwpXHJcblx0XHRcdFx0LnNldERlc2ModGhpcy5wbHVnaW4ubGFuZy5mb2N1c0xldmVsRGVzYylcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cclxuXHRcdFx0XHRcdC5hZGRPcHRpb24oJ2ZpbGUnLCB0aGlzLnBsdWdpbi5sYW5nLmZvY3VzTGV2ZWxGaWxlKVxyXG5cdFx0XHRcdFx0LmFkZE9wdGlvbigncGFyZW50JywgdGhpcy5wbHVnaW4ubGFuZy5mb2N1c0xldmVsUGFyZW50KVxyXG5cdFx0XHRcdFx0LmFkZE9wdGlvbignZ3JhbmRwYXJlbnQnLCB0aGlzLnBsdWdpbi5sYW5nLmZvY3VzTGV2ZWxHcmFuZHBhcmVudClcclxuXHRcdFx0XHRcdC5hZGRPcHRpb24oJ2dyZWF0Z3JhbmRwYXJlbnQnLCB0aGlzLnBsdWdpbi5sYW5nLmZvY3VzTGV2ZWxHcmVhdEdyYW5kcGFyZW50KVxyXG5cdFx0XHRcdFx0LmFkZE9wdGlvbignY3VzdG9tJywgdGhpcy5wbHVnaW4ubGFuZy5mb2N1c0xldmVsQ3VzdG9tKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvY3VzTGV2ZWwpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9jdXNMZXZlbCA9IHZhbHVlIGFzICdmaWxlJyB8ICdwYXJlbnQnIHwgJ2dyYW5kcGFyZW50JyB8ICdncmVhdGdyYW5kcGFyZW50JyB8ICdjdXN0b20nO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0Ly8gUmVmcmVzaCBmaWxlIGV4cGxvcmVyIGlmIGluIGZvY3VzIG1vZGVcclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLmlzRm9jdXMpIHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlRXhwbG9yZXJzID0gZ2V0QWxsRmlsZUV4cGxvcmVycyh0aGlzLnBsdWdpbik7XHJcblx0XHRcdFx0XHRcdFx0ZmlsZUV4cGxvcmVycy5mb3JFYWNoKChmaWxlRXhwbG9yZXIpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChmaWxlRXhwbG9yZXI/LnJlcXVlc3RTb3J0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGZpbGVFeHBsb3Jlci5yZXF1ZXN0U29ydCgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpOyAvLyBSZWZyZXNoIHRvIHNob3cvaGlkZSBjdXN0b20gZm9sZGVyIGlucHV0XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgY3VzdG9tIGZvbGRlciBwYXRoIGlucHV0IHRoYXQgb25seSBzaG93cyB3aGVuIGN1c3RvbSBpcyBzZWxlY3RlZFxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvY3VzTGV2ZWwgPT09ICdjdXN0b20nKSB7XHJcblx0XHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUodGhpcy5wbHVnaW4ubGFuZy5jdXN0b21Gb2xkZXJQYXRoKVxyXG5cdFx0XHRcdFx0LnNldERlc2ModGhpcy5wbHVnaW4ubGFuZy5jdXN0b21Gb2xkZXJQYXRoRGVzYylcclxuXHRcdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0ZvbGRlci9zdWJmb2xkZXInKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tRm9sZGVyUGF0aClcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUZvbGRlclBhdGggPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSkpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0fVxyXG59XHJcblxyXG4iLCAiZnVuY3Rpb24gYXJvdW5kKG9iaiwgZmFjdG9yaWVzKSB7XG4gIGNvbnN0IHJlbW92ZXJzID0gT2JqZWN0LmtleXMoZmFjdG9yaWVzKS5tYXAoKGtleSkgPT4gYXJvdW5kMShvYmosIGtleSwgZmFjdG9yaWVzW2tleV0pKTtcbiAgcmV0dXJuIHJlbW92ZXJzLmxlbmd0aCA9PT0gMSA/IHJlbW92ZXJzWzBdIDogZnVuY3Rpb24oKSB7XG4gICAgcmVtb3ZlcnMuZm9yRWFjaCgocikgPT4gcigpKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGFyb3VuZDEob2JqLCBtZXRob2QsIGNyZWF0ZVdyYXBwZXIpIHtcbiAgY29uc3QgaW5oZXJpdGVkID0gb2JqW21ldGhvZF0sIGhhZE93biA9IG9iai5oYXNPd25Qcm9wZXJ0eShtZXRob2QpLCBvcmlnaW5hbCA9IGhhZE93biA/IGluaGVyaXRlZCA6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKVttZXRob2RdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG4gIGxldCBjdXJyZW50ID0gY3JlYXRlV3JhcHBlcihvcmlnaW5hbCk7XG4gIGlmIChpbmhlcml0ZWQpXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGN1cnJlbnQsIGluaGVyaXRlZCk7XG4gIE9iamVjdC5zZXRQcm90b3R5cGVPZih3cmFwcGVyLCBjdXJyZW50KTtcbiAgb2JqW21ldGhvZF0gPSB3cmFwcGVyO1xuICByZXR1cm4gcmVtb3ZlO1xuICBmdW5jdGlvbiB3cmFwcGVyKC4uLmFyZ3MpIHtcbiAgICBpZiAoY3VycmVudCA9PT0gb3JpZ2luYWwgJiYgb2JqW21ldGhvZF0gPT09IHdyYXBwZXIpXG4gICAgICByZW1vdmUoKTtcbiAgICByZXR1cm4gY3VycmVudC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuICBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgaWYgKG9ialttZXRob2RdID09PSB3cmFwcGVyKSB7XG4gICAgICBpZiAoaGFkT3duKVxuICAgICAgICBvYmpbbWV0aG9kXSA9IG9yaWdpbmFsO1xuICAgICAgZWxzZVxuICAgICAgICBkZWxldGUgb2JqW21ldGhvZF07XG4gICAgfVxuICAgIGlmIChjdXJyZW50ID09PSBvcmlnaW5hbClcbiAgICAgIHJldHVybjtcbiAgICBjdXJyZW50ID0gb3JpZ2luYWw7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHdyYXBwZXIsIGluaGVyaXRlZCB8fCBGdW5jdGlvbik7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlZHVwZShrZXksIG9sZEZuLCBuZXdGbikge1xuICBjaGVja1trZXldID0ga2V5O1xuICByZXR1cm4gY2hlY2s7XG4gIGZ1bmN0aW9uIGNoZWNrKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gKG9sZEZuW2tleV0gPT09IGtleSA/IG9sZEZuIDogbmV3Rm4pLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG59XG5mdW5jdGlvbiBhZnRlcihwcm9taXNlLCBjYikge1xuICByZXR1cm4gcHJvbWlzZS50aGVuKGNiLCBjYik7XG59XG5mdW5jdGlvbiBzZXJpYWxpemUoYXN5bmNGdW5jdGlvbikge1xuICBsZXQgbGFzdFJ1biA9IFByb21pc2UucmVzb2x2ZSgpO1xuICBmdW5jdGlvbiB3cmFwcGVyKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gbGFzdFJ1biA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgYWZ0ZXIobGFzdFJ1biwgKCkgPT4ge1xuICAgICAgICBhc3luY0Z1bmN0aW9uLmFwcGx5KHRoaXMsIGFyZ3MpLnRoZW4ocmVzLCByZWopO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgd3JhcHBlci5hZnRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBsYXN0UnVuID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICBhZnRlcihsYXN0UnVuLCByZXMpO1xuICAgIH0pO1xuICB9O1xuICByZXR1cm4gd3JhcHBlcjtcbn1cblxuZXhwb3J0IHsgYWZ0ZXIsIGFyb3VuZCwgZGVkdXBlLCBzZXJpYWxpemUgfTtcbiIsICJpbXBvcnQgeyBWaWV3LCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IGFyb3VuZCB9IGZyb20gXCJtb25rZXktYXJvdW5kXCI7XHJcbmltcG9ydCB7IEV4cGxvcmVyRm9jdXNQbHVnaW4gfSBmcm9tIFwiLi4vbWFpblwiO1xyXG5pbXBvcnQgXCIuLi90eXBlcy5kXCI7XHJcblxyXG4vLyBUeXBlIGRlZmluaXRpb25zIGZyb20gbW9kdWxlIGF1Z21lbnRhdGlvblxyXG50eXBlIFBhdGhWaXJ0dWFsRWxlbWVudCA9IHtcclxuXHRjaGlsZHJlbkVsOiBIVE1MRWxlbWVudDtcclxuXHRjb2xsYXBzZUVsOiBIVE1MRWxlbWVudDtcclxuXHRjb2xsYXBzZWQ6IGJvb2xlYW47XHJcblx0Y29sbGFwc2libGU6IGJvb2xlYW47XHJcblx0Y292ZXJFbDogSFRNTEVsZW1lbnQ7XHJcblx0ZWw6IEhUTUxFbGVtZW50O1xyXG5cdGZpbGU6IFRBYnN0cmFjdEZpbGU7XHJcblx0aW5mbzoge1xyXG5cdFx0Y2hpbGRMZWZ0OiBudW1iZXI7XHJcblx0XHRjaGlsZExlZnRQYWRkaW5nOiBudW1iZXI7XHJcblx0XHRjaGlsZFRvcDogbnVtYmVyO1xyXG5cdFx0Y29tcHV0ZWQ6IGJvb2xlYW47XHJcblx0XHRoZWlnaHQ6IG51bWJlcjtcclxuXHRcdGhpZGRlbjogYm9vbGVhbjtcclxuXHRcdHBpbm5lZD86IGJvb2xlYW47XHJcblx0XHRuZXh0OiBib29sZWFuO1xyXG5cdFx0cXVldWVkOiBib29sZWFuO1xyXG5cdFx0d2lkdGg6IG51bWJlcjtcclxuXHR9O1xyXG5cdGlubmVyRWw6IEhUTUxFbGVtZW50O1xyXG5cdHBhcmVudD86IFBhdGhWaXJ0dWFsRWxlbWVudDtcclxuXHRwdXNoZXJFbDogSFRNTEVsZW1lbnQ7XHJcblx0c2VsZkVsOiBIVE1MRWxlbWVudDtcclxuXHR2Q2hpbGRyZW46IHtcclxuXHRcdGNoaWxkcmVuOiBQYXRoVmlydHVhbEVsZW1lbnQ7XHJcblx0fTtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEZpbGVFeHBsb3JlclZpZXcgPSBWaWV3ICYge1xyXG5cdHJlcXVlc3RTb3J0KCk6IHZvaWQ7XHJcblx0ZmlsZUV4cGxvcmVyUGx1c1BhdGNoZWQ/OiBib29sZWFuO1xyXG5cdGZpbGVJdGVtczoge1xyXG5cdFx0W2tleTogc3RyaW5nXTogUGF0aFZpcnR1YWxFbGVtZW50O1xyXG5cdH07XHJcblx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xyXG59O1xyXG5cclxudHlwZSBHZXRTb3J0ZWRGb2xkZXJJdGVtc0Z1bmN0aW9uID0gKGZvbGRlcjogVEFic3RyYWN0RmlsZSkgPT4gUGF0aFZpcnR1YWxFbGVtZW50W107XHJcblxyXG4vLyBHbG9iYWwgZmxhZyB0byB0cmFjayBpZiBwcm90b3R5cGUgaGFzIGJlZW4gcGF0Y2hlZFxyXG5sZXQgcHJvdG90eXBlUGF0Y2hlZCA9IGZhbHNlO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhdGNoRmlsZUV4cGxvcmVyKHBsdWdpbjogRXhwbG9yZXJGb2N1c1BsdWdpbik6IHZvaWQge1xyXG5cdGNvbnN0IGZpbGVFeHBsb3JlciA9IGdldEZpbGVFeHBsb3JlcihwbHVnaW4pO1xyXG5cclxuXHRpZiAoIWZpbGVFeHBsb3Jlcikge1xyXG5cdFx0cmV0dXJuOyAvLyBGaWxlIGV4cGxvcmVyIG5vdCBhdmFpbGFibGUgeWV0LCB3aWxsIGJlIHBhdGNoZWQgb24gbGF5b3V0LWNoYW5nZVxyXG5cdH1cclxuXHJcblx0Ly8gUGF0Y2ggdGhlIHByb3RvdHlwZSBvbmx5IG9uY2UgKGFmZmVjdHMgYWxsIGluc3RhbmNlcylcclxuXHRpZiAoIXByb3RvdHlwZVBhdGNoZWQpIHtcclxuXHRcdGNvbnN0IGxlYWYgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xyXG5cclxuXHRcdHBsdWdpbi5yZWdpc3RlcihcclxuXHRcdFx0YXJvdW5kKE9iamVjdC5nZXRQcm90b3R5cGVPZihmaWxlRXhwbG9yZXIpLCB7XHJcblx0XHRcdFx0Z2V0U29ydGVkRm9sZGVySXRlbXMob2xkOiBHZXRTb3J0ZWRGb2xkZXJJdGVtc0Z1bmN0aW9uKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKHRoaXM6IEZpbGVFeHBsb3JlclZpZXcsIGZvbGRlcjogVEFic3RyYWN0RmlsZSk6IFBhdGhWaXJ0dWFsRWxlbWVudFtdIHtcclxuXHRcdFx0XHRcdFx0bGV0IHNvcnRlZENoaWxkcmVuOiBQYXRoVmlydHVhbEVsZW1lbnRbXSA9IG9sZC5jYWxsKHRoaXMsIGZvbGRlcik7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBBcHBseSBmb2N1cyBoaWRpbmcgaWYgZm9jdXMgbW9kZSBpcyBhY3RpdmVcclxuXHRcdFx0XHRcdFx0aWYgKHBsdWdpbi5pc0ZvY3VzICYmIHBsdWdpbi5mb2N1c2VkUGF0aCkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZvY3VzZWRQYXRoID0gcGx1Z2luLmZvY3VzZWRQYXRoO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHNvcnRlZENoaWxkcmVuID0gc29ydGVkQ2hpbGRyZW4uZmlsdGVyKCh2RWwpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gdkVsLmZpbGUucGF0aDtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU2hvdyBpdGVtcyB0aGF0IG1hdGNoIHRoZSBmb2N1c2VkIHBhdGggZXhhY3RseVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGZpbGVQYXRoID09PSBmb2N1c2VkUGF0aCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2RWwuaW5mby5oaWRkZW4gPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFNob3cgaXRlbXMgdGhhdCBhcmUgY2hpbGRyZW4gb2YgdGhlIGZvY3VzZWQgcGF0aFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGZpbGVQYXRoLnN0YXJ0c1dpdGgoZm9jdXNlZFBhdGggKyBcIi9cIikpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dkVsLmluZm8uaGlkZGVuID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBTaG93IGl0ZW1zIHRoYXQgYXJlIGFuY2VzdG9ycyBvZiB0aGUgZm9jdXNlZCBwYXRoIChwYXJlbnQgY2hhaW4pXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoZm9jdXNlZFBhdGguc3RhcnRzV2l0aChmaWxlUGF0aCArIFwiL1wiKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2RWwuaW5mby5oaWRkZW4gPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEhpZGUgZXZlcnl0aGluZyBlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHR2RWwuaW5mby5oaWRkZW4gPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdC8vIEVuc3VyZSBhbGwgaXRlbXMgYXJlIHZpc2libGUgd2hlbiBub3QgaW4gZm9jdXMgbW9kZVxyXG5cdFx0XHRcdFx0XHRcdHNvcnRlZENoaWxkcmVuLmZvckVhY2goKHZFbCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dkVsLmluZm8uaGlkZGVuID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdHJldHVybiBzb3J0ZWRDaGlsZHJlbjtcclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSksXHJcblx0XHQpO1xyXG5cclxuXHRcdGxlYWYuZGV0YWNoKCk7XHJcblx0XHRwcm90b3R5cGVQYXRjaGVkID0gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8vIE1hcmsgdGhpcyBpbnN0YW5jZSBhcyBwYXRjaGVkXHJcblx0ZmlsZUV4cGxvcmVyLmZpbGVFeHBsb3JlclBsdXNQYXRjaGVkID0gdHJ1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVFeHBsb3JlcihwbHVnaW46IEV4cGxvcmVyRm9jdXNQbHVnaW4pOiBGaWxlRXhwbG9yZXJWaWV3IHwgdW5kZWZpbmVkIHtcclxuXHRjb25zdCBmaWxlRXhwbG9yZXJDb250YWluZXIgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJmaWxlLWV4cGxvcmVyXCIpPy5maXJzdCgpO1xyXG5cdHJldHVybiBmaWxlRXhwbG9yZXJDb250YWluZXI/LnZpZXcgYXMgRmlsZUV4cGxvcmVyVmlldztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbEZpbGVFeHBsb3JlcnMocGx1Z2luOiBFeHBsb3JlckZvY3VzUGx1Z2luKTogRmlsZUV4cGxvcmVyVmlld1tdIHtcclxuXHRjb25zdCBmaWxlRXhwbG9yZXJMZWF2ZXMgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJmaWxlLWV4cGxvcmVyXCIpO1xyXG5cdHJldHVybiBmaWxlRXhwbG9yZXJMZWF2ZXMubWFwKGxlYWYgPT4gbGVhZi52aWV3IGFzIEZpbGVFeHBsb3JlclZpZXcpO1xyXG59XHJcblxyXG4iLCAiLyoqXHJcbiAqIENvbXBhdGliaWxpdHkgdXRpbGl0aWVzIGZvciBzZXR0aW5nc1xyXG4gKiBQcm92aWRlcyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGZvciBTZXR0aW5nR3JvdXAgKHJlcXVpcmVzIEFQSSAxLjExLjArKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNldHRpbmcsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgKiBhcyBPYnNpZGlhbk1vZHVsZSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIHRoYXQgd29ya3Mgd2l0aCBib3RoIFNldHRpbmdHcm91cCBhbmQgZmFsbGJhY2sgY29udGFpbmVyXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc2V0dGluZ3MgY29udGFpbmVyIHRoYXQgdXNlcyBTZXR0aW5nR3JvdXAgaWYgYXZhaWxhYmxlIChBUEkgMS4xMS4wKyksXHJcbiAqIG90aGVyd2lzZSBmYWxscyBiYWNrIHRvIGNyZWF0aW5nIGEgaGVhZGluZyBhbmQgdXNpbmcgdGhlIGNvbnRhaW5lciBkaXJlY3RseS5cclxuICogXHJcbiAqIFVzZXMgcmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpIHRvIGNoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUuXHJcbiAqIFRoaXMgaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmcuXHJcbiAqIFxyXG4gKiBAcGFyYW0gY29udGFpbmVyRWwgLSBUaGUgY29udGFpbmVyIGVsZW1lbnQgZm9yIHNldHRpbmdzXHJcbiAqIEBwYXJhbSBoZWFkaW5nIC0gVGhlIGhlYWRpbmcgdGV4dCBmb3IgdGhlIHNldHRpbmdzIGdyb3VwIChvcHRpb25hbClcclxuICogQHBhcmFtIG1hbmlmZXN0SWQgLSBUaGUgcGx1Z2luJ3MgbWFuaWZlc3QgSUQgZm9yIENTUyBzY29waW5nIChyZXF1aXJlZCBmb3IgZmFsbGJhY2sgbW9kZSlcclxuICogQHJldHVybnMgQSBjb250YWluZXIgdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXR0aW5nc0dyb3VwKFxyXG5cdGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuXHRoZWFkaW5nPzogc3RyaW5nLFxyXG5cdG1hbmlmZXN0SWQ/OiBzdHJpbmdcclxuKTogU2V0dGluZ3NDb250YWluZXIge1xyXG5cdC8vIENoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUgKEFQSSAxLjExLjArKVxyXG5cdC8vIHJlcXVpcmVBcGlWZXJzaW9uIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nXHJcblx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSkge1xyXG5cdFx0Ly8gVXNlIFNldHRpbmdHcm91cCAtIGl0J3MgZ3VhcmFudGVlZCB0byBleGlzdCBpZiByZXF1aXJlQXBpVmVyc2lvbiByZXR1cm5zIHRydWVcclxuXHRcdC8vIEFjY2VzcyBTZXR0aW5nR3JvdXAgdmlhIHR5cGUgYXNzZXJ0aW9uIHNpbmNlIGl0IG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9uc1xyXG5cdFx0Ly8gZm9yIG9sZGVyIFR5cGVTY3JpcHQgdmVyc2lvbnMsIGJ1dCBleGlzdHMgYXQgcnVudGltZSBpbiBPYnNpZGlhbiAxLjExLjArXHJcblx0XHQvLyBVc2luZyB1bmtub3duIGluc3RlYWQgb2YgYW55IHRvIHNhdGlzZnkgZXNsaW50IHdoaWxlIG1haW50YWluaW5nIHR5cGUgc2FmZXR5XHJcblx0XHRjb25zdCBTZXR0aW5nR3JvdXBDbGFzcyA9IChPYnNpZGlhbk1vZHVsZSBhcyB1bmtub3duIGFzIHsgU2V0dGluZ0dyb3VwPzogbmV3IChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpID0+IHtcclxuXHRcdFx0c2V0SGVhZGluZyhoZWFkaW5nOiBzdHJpbmcpOiB7XHJcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcblx0XHR9IH0pLlNldHRpbmdHcm91cDtcclxuXHRcdFxyXG5cdFx0aWYgKFNldHRpbmdHcm91cENsYXNzKSB7XHJcblx0XHRcdGNvbnN0IGdyb3VwID0gaGVhZGluZyBcclxuXHRcdFx0XHQ/IG5ldyBTZXR0aW5nR3JvdXBDbGFzcyhjb250YWluZXJFbCkuc2V0SGVhZGluZyhoZWFkaW5nKVxyXG5cdFx0XHRcdDogbmV3IFNldHRpbmdHcm91cENsYXNzKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZyhjYik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBGYWxsYmFjayBwYXRoIChlaXRoZXIgQVBJIDwgMS4xMS4wIG9yIFNldHRpbmdHcm91cCBub3QgZm91bmQpXHJcblx0Ly8gQWRkIHNjb3BpbmcgY2xhc3MgdG8gY29udGFpbmVyRWwgdG8gc2NvcGUgQ1NTIHRvIG9ubHkgdGhpcyBwbHVnaW4ncyBzZXR0aW5nc1xyXG5cdGlmIChtYW5pZmVzdElkKSB7XHJcblx0XHRjb250YWluZXJFbC5hZGRDbGFzcyhgJHttYW5pZmVzdElkfS1zZXR0aW5ncy1jb21wYXRgKTtcclxuXHR9XHJcblx0XHJcblx0e1xyXG5cdFx0Ly8gRmFsbGJhY2s6IENyZWF0ZSBhIGhlYWRpbmcgbWFudWFsbHkgZm9yIG9sZGVyIEFQSSB2ZXJzaW9uc1xyXG5cdFx0Ly8gTm90ZTogV2hpbGUgYmVzdCBwcmFjdGljZSBwcmVmZXJzIFNldHRpbmcuc2V0SGVhZGluZygpLCB0aGUgZmFsbGJhY2sgcGF0aFxyXG5cdFx0Ly8gaXMgZm9yIHZlcnNpb25zIHRoYXQgbWF5IG5vdCBzdXBwb3J0IGl0LCBzbyBtYW51YWwgaGVhZGluZyBpcyBhcHByb3ByaWF0ZSBoZXJlXHJcblx0XHRpZiAoaGVhZGluZykge1xyXG5cdFx0XHRjb25zdCBoZWFkaW5nRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmctZ3JvdXAtaGVhZGluZycpO1xyXG5cdFx0XHRoZWFkaW5nRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBoZWFkaW5nIH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XHJcblx0XHRcdFx0Y2Ioc2V0dGluZyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG59XHJcblxyXG4iLCAiaW1wb3J0IHsgRXhwbG9yZXJGb2N1c1NldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9jdXNQYXRoKFxuXHRwYXRoOiBzdHJpbmcsXG5cdGxldmVsOiAnZmlsZScgfCAncGFyZW50JyB8ICdncmFuZHBhcmVudCcgfCAnZ3JlYXRncmFuZHBhcmVudCcgfCAnY3VzdG9tJyxcblx0c2V0dGluZ3M6IEV4cGxvcmVyRm9jdXNTZXR0aW5nc1xuKTogc3RyaW5nIHtcblx0aWYgKGxldmVsID09PSAnY3VzdG9tJykge1xuXHRcdC8vIFVzZSB0aGUgY3VzdG9tIGZvbGRlciBwYXRoIGZyb20gc2V0dGluZ3MsIHJlZ2FyZGxlc3Mgb2YgY3VycmVudCBmaWxlXG5cdFx0cmV0dXJuIHNldHRpbmdzLmN1c3RvbUZvbGRlclBhdGggfHwgcGF0aDtcblx0fVxuXG5cdGlmIChsZXZlbCA9PT0gJ2ZpbGUnKSB7XG5cdFx0cmV0dXJuIHBhdGg7XG5cdH1cblxuXHRjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy8nKTtcblx0XG5cdGlmIChsZXZlbCA9PT0gJ3BhcmVudCcpIHtcblx0XHRpZiAocGFydHMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRyZXR1cm4gcGF0aDsgLy8gQWxyZWFkeSBhdCByb290XG5cdFx0fVxuXHRcdHJldHVybiBwYXJ0cy5zbGljZSgwLCAtMSkuam9pbignLycpO1xuXHR9XG5cblx0aWYgKGxldmVsID09PSAnZ3JhbmRwYXJlbnQnKSB7XG5cdFx0aWYgKHBhcnRzLmxlbmd0aCA8PSAyKSB7XG5cdFx0XHRyZXR1cm4gcGFydHNbMF0gfHwgcGF0aDsgLy8gUmV0dXJuIHJvb3Qgb3IgZmlyc3QgcGFydFxuXHRcdH1cblx0XHRyZXR1cm4gcGFydHMuc2xpY2UoMCwgLTIpLmpvaW4oJy8nKTtcblx0fVxuXG5cdC8vIGdyZWF0Z3JhbmRwYXJlbnRcblx0aWYgKHBhcnRzLmxlbmd0aCA8PSAzKSB7XG5cdFx0cmV0dXJuIHBhcnRzWzBdIHx8IHBhdGg7IC8vIFJldHVybiByb290IG9yIGZpcnN0IHBhcnRcblx0fVxuXHRyZXR1cm4gcGFydHMuc2xpY2UoMCwgLTMpLmpvaW4oJy8nKTtcbn1cblxuIiwgImltcG9ydCB7IEV4cGxvcmVyRm9jdXNQbHVnaW4gfSBmcm9tIFwiLi4vbWFpblwiO1xuaW1wb3J0IHsgZ2V0Rm9jdXNQYXRoIH0gZnJvbSBcIi4uL3V0aWxzL2ZvY3VzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKHBsdWdpbjogRXhwbG9yZXJGb2N1c1BsdWdpbik6IHZvaWQge1xuXHQvLyBUb2dnbGUgZm9jdXMgY29tbWFuZFxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6IFwidG9nZ2xlXCIsXG5cdFx0bmFtZTogcGx1Z2luLmxhbmcudG9nZ2xlRm9jdXMsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdGlmIChwbHVnaW4uaXNGb2N1cykge1xuXHRcdFx0XHRwbHVnaW4uZXhpdEZvY3VzKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAocGx1Z2luLnNldHRpbmdzLmZvY3VzTGV2ZWwgPT09ICdjdXN0b20nKSB7XG5cdFx0XHRcdFx0Ly8gRm9yIGN1c3RvbSBmb2xkZXIsIHVzZSB0aGUgY3VzdG9tIHBhdGggZGlyZWN0bHlcblx0XHRcdFx0XHRpZiAocGx1Z2luLnNldHRpbmdzLmN1c3RvbUZvbGRlclBhdGgpIHtcblx0XHRcdFx0XHRcdHBsdWdpbi5lbnRlckZvY3VzKHBsdWdpbi5zZXR0aW5ncy5jdXN0b21Gb2xkZXJQYXRoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gRm9yIG90aGVyIGxldmVscywgbmVlZCB0aGUgY3VycmVudCBmaWxlXG5cdFx0XHRcdFx0Y29uc3QgZmlsZSA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRcdFx0XHRpZiAoZmlsZT8ucGF0aCkge1xuXHRcdFx0XHRcdFx0Y29uc3QgZm9jdXNQYXRoID0gZ2V0Rm9jdXNQYXRoKGZpbGUucGF0aCwgcGx1Z2luLnNldHRpbmdzLmZvY3VzTGV2ZWwsIHBsdWdpbi5zZXR0aW5ncyk7XG5cdFx0XHRcdFx0XHRwbHVnaW4uZW50ZXJGb2N1cyhmb2N1c1BhdGgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdH0pO1xuXG5cdC8vIEZpbGUgbWVudSBpdGVtXG5cdGlmIChwbHVnaW4uc2V0dGluZ3Muc2hvd1JpZ2h0Q2xpY2tNZW51KSB7XG5cdFx0cGx1Z2luLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHRwbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcImZpbGUtbWVudVwiLCAobWVudSwgZmlsZSkgPT4ge1xuXHRcdFx0XHRpZiAoIXBsdWdpbi5zZXR0aW5ncy5zaG93UmlnaHRDbGlja01lbnUpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0XHRpdGVtXG5cdFx0XHRcdFx0XHQuc2V0VGl0bGUocGx1Z2luLmlzRm9jdXMgPyBwbHVnaW4ubGFuZy5leGl0Rm9jdXMgOiBwbHVnaW4ubGFuZy5mb2N1cylcblx0XHRcdFx0XHRcdC5zZXRJY29uKHBsdWdpbi5pc0ZvY3VzID8gXCJsb2ctb3V0XCIgOiBcImZvY3VzXCIpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0cGx1Z2luLnRvZ2dsZUZvY3VzKGZpbGU/LnBhdGgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pXG5cdFx0KTtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgRXhwbG9yZXJGb2N1c1BsdWdpbiB9IGZyb20gXCIuLi9tYWluXCI7XG5cbi8qKlxuICogRmluZCBvciBjcmVhdGUgdGhlIG5hdmlnYXRpb24gYnV0dG9ucyBjb250YWluZXIgaW4gdGhlIGZpbGUgZXhwbG9yZXIgdmlldy5cbiAqIFRyaWVzIG11bHRpcGxlIHNlbGVjdG9ycyB0byBzdXBwb3J0IGJvdGggZGVza3RvcCBhbmQgbW9iaWxlLlxuICogT24gbW9iaWxlLCBjcmVhdGVzIGEgY29udGFpbmVyIGlmIG5vbmUgZXhpc3RzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZE5hdkJ1dHRvbnNDb250YWluZXIoZmlsZUV4cGxvcmVyVmlldzogSFRNTEVsZW1lbnQpOiBIVE1MRWxlbWVudCB8IG51bGwge1xuXHQvLyBUcnkgZGVza3RvcCBzZWxlY3RvciBmaXJzdFxuXHRsZXQgY29udGFpbmVyID0gZmlsZUV4cGxvcmVyVmlldy5xdWVyeVNlbGVjdG9yKCcubmF2LWJ1dHRvbnMtY29udGFpbmVyJyk7XG5cdGlmIChjb250YWluZXIpIHtcblx0XHRyZXR1cm4gY29udGFpbmVyIGFzIEhUTUxFbGVtZW50O1xuXHR9XG5cblx0Ly8gVHJ5IGFsdGVybmF0aXZlIHNlbGVjdG9ycyBmb3IgbW9iaWxlXG5cdC8vIE1vYmlsZSBtaWdodCBoYXZlIHRoZSBidXR0b25zIGluIGEgZGlmZmVyZW50IHN0cnVjdHVyZVxuXHRjb250YWluZXIgPSBmaWxlRXhwbG9yZXJWaWV3LnF1ZXJ5U2VsZWN0b3IoJy5uYXYtaGVhZGVyLWJ1dHRvbi1jb250YWluZXInKTtcblx0aWYgKGNvbnRhaW5lcikge1xuXHRcdHJldHVybiBjb250YWluZXIgYXMgSFRNTEVsZW1lbnQ7XG5cdH1cblxuXHQvLyBUcnkgZmluZGluZyBieSBsb29raW5nIGZvciBleGlzdGluZyBuYXYtYWN0aW9uLWJ1dHRvbiBlbGVtZW50c1xuXHRjb25zdCBleGlzdGluZ0J1dHRvbnMgPSBmaWxlRXhwbG9yZXJWaWV3LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYtYWN0aW9uLWJ1dHRvbicpO1xuXHRpZiAoZXhpc3RpbmdCdXR0b25zLmxlbmd0aCA+IDApIHtcblx0XHRjb25zdCBmaXJzdEJ1dHRvbiA9IGV4aXN0aW5nQnV0dG9uc1swXTtcblx0XHRjb25zdCBwYXJlbnQgPSBmaXJzdEJ1dHRvbi5wYXJlbnRFbGVtZW50O1xuXHRcdGlmIChwYXJlbnQgJiYgKHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ25hdi1idXR0b25zLWNvbnRhaW5lcicpIHx8IFxuXHRcdCAgICAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ25hdi1oZWFkZXItYnV0dG9uLWNvbnRhaW5lcicpIHx8XG5cdFx0ICAgICAgICAgICAgICAgQXJyYXkuZnJvbShwYXJlbnQuY2hpbGRyZW4pLnNvbWUoZWwgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCduYXYtYWN0aW9uLWJ1dHRvbicpKSkpIHtcblx0XHRcdHJldHVybiBwYXJlbnQ7XG5cdFx0fVxuXHR9XG5cblx0Ly8gVHJ5IGZpbmRpbmcgdGhlIHZpZXcgaGVhZGVyIGFuZCBhcHBlbmRpbmcgdG8gaXRcblx0Y29uc3Qgdmlld0hlYWRlciA9IGZpbGVFeHBsb3JlclZpZXcucXVlcnlTZWxlY3RvcignLnZpZXctaGVhZGVyJykgYXMgSFRNTEVsZW1lbnQ7XG5cdGlmICh2aWV3SGVhZGVyKSB7XG5cdFx0Ly8gTG9vayBmb3IgYW55IGNvbnRhaW5lciB3aXRoIG5hdiBidXR0b25zIGluc2lkZSB0aGUgaGVhZGVyXG5cdFx0Y29uc3QgaGVhZGVyQ29udGFpbmVyID0gdmlld0hlYWRlci5xdWVyeVNlbGVjdG9yKCcubmF2LWJ1dHRvbnMtY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQgfHxcblx0XHQgICAgICAgICAgICAgICAgICAgICAgIHZpZXdIZWFkZXIucXVlcnlTZWxlY3RvcignLm5hdi1oZWFkZXItYnV0dG9uLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50IHx8XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICB2aWV3SGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy52aWV3LWhlYWRlci10aXRsZS1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcblx0XHRpZiAoaGVhZGVyQ29udGFpbmVyKSB7XG5cdFx0XHRyZXR1cm4gaGVhZGVyQ29udGFpbmVyO1xuXHRcdH1cblx0XHQvLyBJZiBubyBjb250YWluZXIgZm91bmQsIHJldHVybiB0aGUgaGVhZGVyIGl0c2VsZiBhcyBmYWxsYmFja1xuXHRcdHJldHVybiB2aWV3SGVhZGVyO1xuXHR9XG5cblx0Ly8gTW9iaWxlIGZhbGxiYWNrOiBMb29rIGZvciBuYXYtZmlsZXMtY29udGFpbmVyIGFuZCBjcmVhdGUgYSBidXR0b24gYmFyIGFib3ZlIGl0XG5cdGNvbnN0IG5hdkZpbGVzQ29udGFpbmVyID0gZmlsZUV4cGxvcmVyVmlldy5xdWVyeVNlbGVjdG9yKCcubmF2LWZpbGVzLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuXHRpZiAobmF2RmlsZXNDb250YWluZXIpIHtcblx0XHQvLyBDaGVjayBpZiB3ZSBhbHJlYWR5IGNyZWF0ZWQgYSBtb2JpbGUgYnV0dG9uIGNvbnRhaW5lclxuXHRcdGxldCBtb2JpbGVCdXR0b25Db250YWluZXIgPSBmaWxlRXhwbG9yZXJWaWV3LnF1ZXJ5U2VsZWN0b3IoJy5leHBsb3Jlci1mb2N1cy1tb2JpbGUtYnV0dG9ucycpIGFzIEhUTUxFbGVtZW50O1xuXHRcdGlmICghbW9iaWxlQnV0dG9uQ29udGFpbmVyKSB7XG5cdFx0XHQvLyBDcmVhdGUgYSBtb2JpbGUgYnV0dG9uIGNvbnRhaW5lclxuXHRcdFx0bW9iaWxlQnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRtb2JpbGVCdXR0b25Db250YWluZXIuY2xhc3NOYW1lID0gJ25hdi1idXR0b25zLWNvbnRhaW5lciBleHBsb3Jlci1mb2N1cy1tb2JpbGUtYnV0dG9ucyc7XG5cdFx0XHRtb2JpbGVCdXR0b25Db250YWluZXIuc2V0Q3NzUHJvcHMoe1xuXHRcdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxuXHRcdFx0XHRnYXA6ICc0cHgnLFxuXHRcdFx0XHRwYWRkaW5nOiAnOHB4Jyxcblx0XHRcdFx0Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSdcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBJbnNlcnQgaXQgYmVmb3JlIHRoZSBuYXYtZmlsZXMtY29udGFpbmVyXG5cdFx0XHRuYXZGaWxlc0NvbnRhaW5lci5wYXJlbnRFbGVtZW50Py5pbnNlcnRCZWZvcmUobW9iaWxlQnV0dG9uQ29udGFpbmVyLCBuYXZGaWxlc0NvbnRhaW5lcik7XG5cdFx0fVxuXHRcdHJldHVybiBtb2JpbGVCdXR0b25Db250YWluZXI7XG5cdH1cblxuXHQvLyBMYXN0IHJlc29ydDogY3JlYXRlIGEgY29udGFpbmVyIGF0IHRoZSB0b3Agb2YgdGhlIHZpZXdcblx0bGV0IHRvcENvbnRhaW5lciA9IGZpbGVFeHBsb3JlclZpZXcucXVlcnlTZWxlY3RvcignLmV4cGxvcmVyLWZvY3VzLW1vYmlsZS1idXR0b25zJykgYXMgSFRNTEVsZW1lbnQ7XG5cdGlmICghdG9wQ29udGFpbmVyKSB7XG5cdFx0dG9wQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0dG9wQ29udGFpbmVyLmNsYXNzTmFtZSA9ICduYXYtYnV0dG9ucy1jb250YWluZXIgZXhwbG9yZXItZm9jdXMtbW9iaWxlLWJ1dHRvbnMnO1xuXHRcdHRvcENvbnRhaW5lci5zZXRDc3NQcm9wcyh7XG5cdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRhbGlnbkl0ZW1zOiAnY2VudGVyJyxcblx0XHRcdGdhcDogJzRweCcsXG5cdFx0XHRwYWRkaW5nOiAnOHB4Jyxcblx0XHRcdGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknXG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gSW5zZXJ0IGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHZpZXdcblx0XHRmaWxlRXhwbG9yZXJWaWV3Lmluc2VydEJlZm9yZSh0b3BDb250YWluZXIsIGZpbGVFeHBsb3JlclZpZXcuZmlyc3RDaGlsZCk7XG5cdH1cblx0cmV0dXJuIHRvcENvbnRhaW5lcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZpbGVFeHBsb3Jlckljb24ocGx1Z2luOiBFeHBsb3JlckZvY3VzUGx1Z2luKTogSFRNTEVsZW1lbnQge1xuXHRjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdGljb24uY2xhc3NOYW1lID0gJ2NsaWNrYWJsZS1pY29uIG5hdi1hY3Rpb24tYnV0dG9uJztcblx0aWNvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBwbHVnaW4ubGFuZy50b2dnbGVGb2N1cyk7XG5cblx0Ly8gQ3JlYXRlIHRoZSBmb2N1cyBpY29uIFNWR1xuXHRjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpO1xuXHRzdmcuc2V0QXR0cmlidXRlKCd4bWxucycsICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycpO1xuXHRzdmcuc2V0QXR0cmlidXRlKCd3aWR0aCcsICcyNCcpO1xuXHRzdmcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAnMjQnKTtcblx0c3ZnLnNldEF0dHJpYnV0ZSgndmlld0JveCcsICcwIDAgMjQgMjQnKTtcblx0c3ZnLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdub25lJyk7XG5cdHN2Zy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdjdXJyZW50Q29sb3InKTtcblx0c3ZnLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzInKTtcblx0c3ZnLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWxpbmVjYXAnLCAncm91bmQnKTtcblx0c3ZnLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWxpbmVqb2luJywgJ3JvdW5kJyk7XG5cdHN2Zy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3N2Zy1pY29uIGx1Y2lkZS1mb2N1cycpO1xuXHRcblx0Ly8gTHVjaWRlIGZvY3VzIGljb24gLSBjaXJjbGUgd2l0aCBjb3JuZXIgYnJhY2tldHNcblx0Y29uc3QgY2lyY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdjaXJjbGUnKTtcblx0Y2lyY2xlLnNldEF0dHJpYnV0ZSgnY3gnLCAnMTInKTtcblx0Y2lyY2xlLnNldEF0dHJpYnV0ZSgnY3knLCAnMTInKTtcblx0Y2lyY2xlLnNldEF0dHJpYnV0ZSgncicsICczJyk7XG5cdHN2Zy5hcHBlbmRDaGlsZChjaXJjbGUpO1xuXHRcblx0Y29uc3QgcGF0aDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcblx0cGF0aDEuc2V0QXR0cmlidXRlKCdkJywgJ00zIDdWNWEyIDIgMCAwIDEgMi0yaDInKTtcblx0c3ZnLmFwcGVuZENoaWxkKHBhdGgxKTtcblx0XG5cdGNvbnN0IHBhdGgyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG5cdHBhdGgyLnNldEF0dHJpYnV0ZSgnZCcsICdNMTcgM2gyYTIgMiAwIDAgMSAyIDJ2MicpO1xuXHRzdmcuYXBwZW5kQ2hpbGQocGF0aDIpO1xuXHRcblx0Y29uc3QgcGF0aDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcblx0cGF0aDMuc2V0QXR0cmlidXRlKCdkJywgJ00yMSAxN3YyYTIgMiAwIDAgMS0yIDJoLTInKTtcblx0c3ZnLmFwcGVuZENoaWxkKHBhdGgzKTtcblx0XG5cdGNvbnN0IHBhdGg0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG5cdHBhdGg0LnNldEF0dHJpYnV0ZSgnZCcsICdNNyAyMUg1YTIgMiAwIDAgMS0yLTJ2LTInKTtcblx0c3ZnLmFwcGVuZENoaWxkKHBhdGg0KTtcblx0XG5cdGljb24uYXBwZW5kQ2hpbGQoc3ZnKTtcblx0cmV0dXJuIGljb247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRGaWxlRXhwbG9yZXJJY29uKGljb246IEhUTUxFbGVtZW50LCBuYXZCdXR0b25zQ29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHQvLyBEb24ndCBpbnNlcnQgaWYgYWxyZWFkeSBpbiB0aGUgY29udGFpbmVyXG5cdGlmIChuYXZCdXR0b25zQ29udGFpbmVyLmNvbnRhaW5zKGljb24pKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gRmluZCB0aGUgcG9zaXRpb24gdG8gaW5zZXJ0OiBhZnRlciBhbGwgZGVmYXVsdCBPYnNpZGlhbiBpY29ucywgYmVmb3JlIGFueSAuY21kciBlbGVtZW50c1xuXHRjb25zdCBhbGxJY29ucyA9IEFycmF5LmZyb20obmF2QnV0dG9uc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuY2xpY2thYmxlLWljb24ubmF2LWFjdGlvbi1idXR0b24nKSk7XG5cdGNvbnN0IGRlZmF1bHRJY29ucyA9IGFsbEljb25zLmZpbHRlcihlbCA9PiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbWRyJykgJiYgZWwgIT09IGljb24pO1xuXHRjb25zdCBjbWRySWNvbnMgPSBBcnJheS5mcm9tKG5hdkJ1dHRvbnNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmNtZHInKSk7XG5cdFxuXHRpZiAoY21kckljb25zLmxlbmd0aCA+IDApIHtcblx0XHQvLyBJbnNlcnQgYmVmb3JlIGZpcnN0IGNtZHIgaWNvblxuXHRcdG5hdkJ1dHRvbnNDb250YWluZXIuaW5zZXJ0QmVmb3JlKGljb24sIGNtZHJJY29uc1swXSk7XG5cdH0gZWxzZSBpZiAoZGVmYXVsdEljb25zLmxlbmd0aCA+IDApIHtcblx0XHQvLyBJbnNlcnQgYWZ0ZXIgbGFzdCBkZWZhdWx0IGljb25cblx0XHRjb25zdCBsYXN0SWNvbiA9IGRlZmF1bHRJY29uc1tkZWZhdWx0SWNvbnMubGVuZ3RoIC0gMV07XG5cdFx0aWYgKGxhc3RJY29uLm5leHRTaWJsaW5nKSB7XG5cdFx0XHRuYXZCdXR0b25zQ29udGFpbmVyLmluc2VydEJlZm9yZShpY29uLCBsYXN0SWNvbi5uZXh0U2libGluZyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5hdkJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdC8vIEp1c3QgYXBwZW5kIGlmIG5vIG90aGVyIGljb25zXG5cdFx0bmF2QnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uKTtcblx0fVxufVxuXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FB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O0FBQ2YsY0FBSSxlQUFlO0FBQ25CLGNBQUksZ0JBQWdCO0FBQ3BCLDBCQUFnQjtBQUVoQixxQkFBVyxNQUFNO0FBQUUsMkJBQWU7QUFBQSxVQUFPLEdBQUcsR0FBRztBQUFBLFFBQ2hELENBQUM7QUFFRCxhQUFLLGlCQUFpQixLQUFLLGtCQUFrQixTQUFTLENBQUMsUUFBUTtBQUU5RCxjQUFJLGNBQWM7QUFDakIsZ0JBQUksZUFBZTtBQUNuQixnQkFBSSxnQkFBZ0I7QUFDcEI7QUFBQSxVQUNEO0FBQ0EsY0FBSSxlQUFlO0FBQ25CLGNBQUksZ0JBQWdCO0FBQ3BCLDBCQUFnQjtBQUFBLFFBQ2pCLENBQUM7QUFBQSxNQUNGO0FBR0EsV0FBSyx1QkFBdUI7QUFHNUIsNkJBQXVCLEtBQUssa0JBQWtCLG1CQUFtQjtBQUFBLElBQ2xFO0FBR0EsMEJBQXNCO0FBR3RCLFNBQUs7QUFBQSxNQUNKLEtBQUssSUFBSSxVQUFVLEdBQUcsaUJBQWlCLE1BQU07QUFDNUMsWUFBSSxLQUFLLFNBQVMsc0JBQXNCO0FBQ3ZDLGdDQUFzQjtBQUFBLFFBQ3ZCO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLHlCQUF5QjtBQUN4QixRQUFJLENBQUMsS0FBSyxrQkFBa0I7QUFDM0I7QUFBQSxJQUNEO0FBRUEsUUFBSSxDQUFDLEtBQUssU0FBUyxzQkFBc0I7QUFDeEMsVUFBSSxLQUFLLGlCQUFpQixlQUFlO0FBQ3hDLGFBQUssaUJBQWlCLE9BQU87QUFBQSxNQUM5QjtBQUNBO0FBQUEsSUFDRDtBQUdBLFFBQUksQ0FBQyxLQUFLLGlCQUFpQixlQUFlO0FBRXpDLFlBQU0scUJBQXFCLEtBQUssSUFBSSxVQUFVLGdCQUFnQixlQUFlO0FBQzdFLFVBQUksbUJBQW1CLFNBQVMsR0FBRztBQUNsQyxjQUFNLG1CQUFtQixtQkFBbUIsQ0FBQyxFQUFFLEtBQUs7QUFDcEQsY0FBTSxzQkFBc0Isd0JBQXdCLGdCQUFnQjtBQUVwRSxZQUFJLHFCQUFxQjtBQUN4QixpQ0FBdUIsS0FBSyxrQkFBa0IsbUJBQW1CO0FBQUEsUUFDbEU7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUlBLFFBQUksS0FBSyxpQkFBaUIsTUFBTSxRQUFRO0FBQ3ZDLFdBQUssaUJBQWlCLE1BQU0sZUFBZSxRQUFRO0FBQUEsSUFDcEQ7QUFHQSxRQUFJLEtBQUssU0FBUztBQUNqQixXQUFLLGlCQUFpQixTQUFTLFdBQVc7QUFBQSxJQUMzQyxPQUFPO0FBQ04sV0FBSyxpQkFBaUIsWUFBWSxXQUFXO0FBQUEsSUFDOUM7QUFBQSxFQUNEO0FBQUEsRUFFQSxXQUFXO0FBQ1YsUUFBSSxLQUFLLGtCQUFrQjtBQUMxQixXQUFLLGlCQUFpQixPQUFPO0FBQzdCLFdBQUssbUJBQW1CO0FBQUEsSUFDekI7QUFBQSxFQUNEO0FBQ0Q7QUFFQSxJQUFPLGVBQVE7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJsYW5nIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
