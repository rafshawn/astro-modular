/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/utils/file-utils.ts
var file_utils_exports = {};
__export(file_utils_exports, {
  SUPPORTED_EXTENSIONS: () => SUPPORTED_EXTENSIONS2,
  VIEW_TYPE_MAP: () => VIEW_TYPE_MAP,
  getFileByPath: () => getFileByPath,
  getFileExtension: () => getFileExtension,
  getViewTypeForFile: () => getViewTypeForFile,
  isBaseFile: () => isBaseFile,
  isCanvasFile: () => isCanvasFile,
  isMarkdownLike: () => isMarkdownLike,
  isMdxFile: () => isMdxFile,
  isSupportedExtension: () => isSupportedExtension,
  leafHasFile: () => leafHasFile,
  pathsEqual: () => pathsEqual,
  trimFileExtension: () => trimFileExtension
});
function isSupportedExtension(extension) {
  return SUPPORTED_EXTENSIONS2.includes(extension);
}
function getFileExtension(path) {
  var _a;
  const parts = path.split(".");
  return parts.length > 1 ? ((_a = parts[parts.length - 1]) != null ? _a : "").toLowerCase() : "";
}
function getViewTypeForFile(file) {
  const ext = file.extension.toLowerCase();
  if (isSupportedExtension(ext)) {
    return VIEW_TYPE_MAP[ext];
  }
  return "markdown";
}
function isMarkdownLike(file) {
  const ext = file.extension.toLowerCase();
  return ext === "md" || ext === "mdx";
}
function isMdxFile(file) {
  return file.extension.toLowerCase() === "mdx";
}
function isCanvasFile(file) {
  return file.extension.toLowerCase() === "canvas";
}
function isBaseFile(file) {
  return file.extension.toLowerCase() === "base";
}
function getFileByPath(app, path) {
  const exactMatch = app.vault.getAbstractFileByPath(path);
  if (exactMatch instanceof import_obsidian6.TFile) {
    return exactMatch;
  }
  const file = app.metadataCache.getFirstLinkpathDest(path, "/");
  return file;
}
function trimFileExtension(path) {
  const lastDot = path.lastIndexOf(".");
  if (lastDot > 0) {
    const ext = path.slice(lastDot + 1).toLowerCase();
    if (SUPPORTED_EXTENSIONS2.includes(ext)) {
      return path.slice(0, lastDot);
    }
  }
  return path;
}
function pathsEqual(path1, path2) {
  const norm1 = trimFileExtension(path1).toLowerCase();
  const norm2 = trimFileExtension(path2).toLowerCase();
  return norm1 === norm2;
}
function leafHasFile(leaf, filePath) {
  var _a, _b;
  const state = (_b = (_a = leaf.view) == null ? void 0 : _a.getState) == null ? void 0 : _b.call(_a);
  const leafFile = state == null ? void 0 : state.file;
  if (!leafFile) return false;
  return pathsEqual(leafFile, filePath);
}
var import_obsidian6, SUPPORTED_EXTENSIONS2, VIEW_TYPE_MAP;
var init_file_utils = __esm({
  "src/utils/file-utils.ts"() {
    import_obsidian6 = require("obsidian");
    SUPPORTED_EXTENSIONS2 = ["md", "mdx", "canvas", "base"];
    VIEW_TYPE_MAP = {
      "md": "markdown",
      "mdx": "markdown",
      "canvas": "canvas",
      "base": "bases"
    };
  }
});

// node_modules/.pnpm/obsidian-daily-notes-interf_8d9fc24b0fc622d94fd11fa5e9b185b3/node_modules/obsidian-daily-notes-interface/dist/main.js
var require_main = __commonJS({
  "node_modules/.pnpm/obsidian-daily-notes-interf_8d9fc24b0fc622d94fd11fa5e9b185b3/node_modules/obsidian-daily-notes-interface/dist/main.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var obsidian = require("obsidian");
    var DEFAULT_DAILY_NOTE_FORMAT = "YYYY-MM-DD";
    var DEFAULT_WEEKLY_NOTE_FORMAT = "gggg-[W]ww";
    var DEFAULT_MONTHLY_NOTE_FORMAT = "YYYY-MM";
    var DEFAULT_QUARTERLY_NOTE_FORMAT = "YYYY-[Q]Q";
    var DEFAULT_YEARLY_NOTE_FORMAT = "YYYY";
    function shouldUsePeriodicNotesSettings(periodicity) {
      var _a, _b;
      const periodicNotes = window.app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a[periodicity]) == null ? void 0 : _b.enabled);
    }
    function getDailyNoteSettings() {
      var _a, _b, _c, _d;
      try {
        const { internalPlugins, plugins } = window.app;
        if (shouldUsePeriodicNotesSettings("daily")) {
          const { format: format2, folder: folder2, template: template2 } = ((_b = (_a = plugins.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.daily) || {};
          return {
            format: format2 || DEFAULT_DAILY_NOTE_FORMAT,
            folder: (folder2 == null ? void 0 : folder2.trim()) || "",
            template: (template2 == null ? void 0 : template2.trim()) || ""
          };
        }
        const { folder, format, template } = ((_d = (_c = internalPlugins.getPluginById("daily-notes")) == null ? void 0 : _c.instance) == null ? void 0 : _d.options) || {};
        return {
          format: format || DEFAULT_DAILY_NOTE_FORMAT,
          folder: (folder == null ? void 0 : folder.trim()) || "",
          template: (template == null ? void 0 : template.trim()) || ""
        };
      } catch (err) {
        console.info("No custom daily note settings found!", err);
      }
    }
    function getWeeklyNoteSettings() {
      var _a, _b, _c, _d, _e, _f, _g;
      try {
        const pluginManager = window.app.plugins;
        const calendarSettings = (_a = pluginManager.getPlugin("calendar")) == null ? void 0 : _a.options;
        const periodicNotesSettings = (_c = (_b = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _b.settings) == null ? void 0 : _c.weekly;
        if (shouldUsePeriodicNotesSettings("weekly")) {
          return {
            format: periodicNotesSettings.format || DEFAULT_WEEKLY_NOTE_FORMAT,
            folder: ((_d = periodicNotesSettings.folder) == null ? void 0 : _d.trim()) || "",
            template: ((_e = periodicNotesSettings.template) == null ? void 0 : _e.trim()) || ""
          };
        }
        const settings = calendarSettings || {};
        return {
          format: settings.weeklyNoteFormat || DEFAULT_WEEKLY_NOTE_FORMAT,
          folder: ((_f = settings.weeklyNoteFolder) == null ? void 0 : _f.trim()) || "",
          template: ((_g = settings.weeklyNoteTemplate) == null ? void 0 : _g.trim()) || ""
        };
      } catch (err) {
        console.info("No custom weekly note settings found!", err);
      }
    }
    function getMonthlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("monthly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.monthly) || {};
        return {
          format: settings.format || DEFAULT_MONTHLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom monthly note settings found!", err);
      }
    }
    function getQuarterlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("quarterly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.quarterly) || {};
        return {
          format: settings.format || DEFAULT_QUARTERLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom quarterly note settings found!", err);
      }
    }
    function getYearlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("yearly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.yearly) || {};
        return {
          format: settings.format || DEFAULT_YEARLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom yearly note settings found!", err);
      }
    }
    function join(...partSegments) {
      let parts = [];
      for (let i = 0, l = partSegments.length; i < l; i++) {
        parts = parts.concat(partSegments[i].split("/"));
      }
      const newParts = [];
      for (let i = 0, l = parts.length; i < l; i++) {
        const part = parts[i];
        if (!part || part === ".")
          continue;
        else
          newParts.push(part);
      }
      if (parts[0] === "")
        newParts.unshift("");
      return newParts.join("/");
    }
    function basename(fullPath) {
      let base = fullPath.substring(fullPath.lastIndexOf("/") + 1);
      if (base.lastIndexOf(".") != -1)
        base = base.substring(0, base.lastIndexOf("."));
      return base;
    }
    async function ensureFolderExists(path) {
      const dirs = path.replace(/\\/g, "/").split("/");
      dirs.pop();
      if (dirs.length) {
        const dir = join(...dirs);
        if (!window.app.vault.getAbstractFileByPath(dir)) {
          await window.app.vault.createFolder(dir);
        }
      }
    }
    async function getNotePath(directory, filename) {
      if (!filename.endsWith(".md")) {
        filename += ".md";
      }
      const path = obsidian.normalizePath(join(directory, filename));
      await ensureFolderExists(path);
      return path;
    }
    async function getTemplateInfo(template) {
      const { metadataCache, vault } = window.app;
      const templatePath = obsidian.normalizePath(template);
      if (templatePath === "/") {
        return Promise.resolve(["", null]);
      }
      try {
        const templateFile = metadataCache.getFirstLinkpathDest(templatePath, "");
        const contents = await vault.cachedRead(templateFile);
        const IFoldInfo = window.app.foldManager.load(templateFile);
        return [contents, IFoldInfo];
      } catch (err) {
        console.error(`Failed to read the daily note template '${templatePath}'`, err);
        new obsidian.Notice("Failed to read the daily note template");
        return ["", null];
      }
    }
    function getDateUID(date, granularity = "day") {
      const ts = date.clone().startOf(granularity).format();
      return `${granularity}-${ts}`;
    }
    function removeEscapedCharacters(format) {
      return format.replace(/\[[^\]]*\]/g, "");
    }
    function isFormatAmbiguous(format, granularity) {
      if (granularity === "week") {
        const cleanFormat = removeEscapedCharacters(format);
        return /w{1,2}/i.test(cleanFormat) && (/M{1,4}/.test(cleanFormat) || /D{1,4}/.test(cleanFormat));
      }
      return false;
    }
    function getDateFromFile(file, granularity) {
      return getDateFromFilename(file.basename, granularity);
    }
    function getDateFromPath(path, granularity) {
      return getDateFromFilename(basename(path), granularity);
    }
    function getDateFromFilename(filename, granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      };
      const format = getSettings[granularity]().format.split("/").pop();
      const noteDate = window.moment(filename, format, true);
      if (!noteDate.isValid()) {
        return null;
      }
      if (isFormatAmbiguous(format, granularity)) {
        if (granularity === "week") {
          const cleanFormat = removeEscapedCharacters(format);
          if (/w{1,2}/i.test(cleanFormat)) {
            return window.moment(
              filename,
              // If format contains week, remove day & month formatting
              format.replace(/M{1,4}/g, "").replace(/D{1,4}/g, ""),
              false
            );
          }
        }
      }
      return noteDate;
    }
    var DailyNotesFolderMissingError = class extends Error {
    };
    async function createDailyNote2(date) {
      const app = window.app;
      const { vault } = app;
      const moment = window.moment;
      const { template, format, folder } = getDailyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*yesterday\s*}}/gi, date.clone().subtract(1, "day").format(format)).replace(/{{\s*tomorrow\s*}}/gi, date.clone().add(1, "d").format(format)));
        app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getDailyNote2(date, dailyNotes) {
      var _a;
      return (_a = dailyNotes[getDateUID(date, "day")]) != null ? _a : null;
    }
    function getAllDailyNotes2() {
      const { vault } = window.app;
      const { folder } = getDailyNoteSettings();
      const dailyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!dailyNotesFolder) {
        throw new DailyNotesFolderMissingError("Failed to find daily notes folder");
      }
      const dailyNotes = {};
      obsidian.Vault.recurseChildren(dailyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "day");
          if (date) {
            const dateString = getDateUID(date, "day");
            dailyNotes[dateString] = note;
          }
        }
      });
      return dailyNotes;
    }
    var WeeklyNotesFolderMissingError = class extends Error {
    };
    function getDaysOfWeek() {
      const { moment } = window;
      let weekStart = moment.localeData()._week.dow;
      const daysOfWeek = [
        "sunday",
        "monday",
        "tuesday",
        "wednesday",
        "thursday",
        "friday",
        "saturday"
      ];
      while (weekStart) {
        daysOfWeek.push(daysOfWeek.shift());
        weekStart--;
      }
      return daysOfWeek;
    }
    function getDayOfWeekNumericalValue(dayOfWeekName) {
      return getDaysOfWeek().indexOf(dayOfWeekName.toLowerCase());
    }
    async function createWeeklyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getWeeklyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi, (_, dayOfWeek, momentFormat) => {
          const day = getDayOfWeekNumericalValue(dayOfWeek);
          return date.weekday(day).format(momentFormat.trim());
        }));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getWeeklyNote2(date, weeklyNotes) {
      var _a;
      return (_a = weeklyNotes[getDateUID(date, "week")]) != null ? _a : null;
    }
    function getAllWeeklyNotes2() {
      const weeklyNotes = {};
      if (!appHasWeeklyNotesPluginLoaded()) {
        return weeklyNotes;
      }
      const { vault } = window.app;
      const { folder } = getWeeklyNoteSettings();
      const weeklyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!weeklyNotesFolder) {
        throw new WeeklyNotesFolderMissingError("Failed to find weekly notes folder");
      }
      obsidian.Vault.recurseChildren(weeklyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "week");
          if (date) {
            const dateString = getDateUID(date, "week");
            weeklyNotes[dateString] = note;
          }
        }
      });
      return weeklyNotes;
    }
    var MonthlyNotesFolderMissingError = class extends Error {
    };
    async function createMonthlyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getMonthlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getMonthlyNote2(date, monthlyNotes) {
      var _a;
      return (_a = monthlyNotes[getDateUID(date, "month")]) != null ? _a : null;
    }
    function getAllMonthlyNotes2() {
      const monthlyNotes = {};
      if (!appHasMonthlyNotesPluginLoaded()) {
        return monthlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getMonthlyNoteSettings();
      const monthlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!monthlyNotesFolder) {
        throw new MonthlyNotesFolderMissingError("Failed to find monthly notes folder");
      }
      obsidian.Vault.recurseChildren(monthlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "month");
          if (date) {
            const dateString = getDateUID(date, "month");
            monthlyNotes[dateString] = note;
          }
        }
      });
      return monthlyNotes;
    }
    var QuarterlyNotesFolderMissingError = class extends Error {
    };
    async function createQuarterlyNote(date) {
      const { vault } = window.app;
      const { template, format, folder } = getQuarterlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getQuarterlyNote(date, quarterly) {
      var _a;
      return (_a = quarterly[getDateUID(date, "quarter")]) != null ? _a : null;
    }
    function getAllQuarterlyNotes() {
      const quarterly = {};
      if (!appHasQuarterlyNotesPluginLoaded()) {
        return quarterly;
      }
      const { vault } = window.app;
      const { folder } = getQuarterlyNoteSettings();
      const quarterlyFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!quarterlyFolder) {
        throw new QuarterlyNotesFolderMissingError("Failed to find quarterly notes folder");
      }
      obsidian.Vault.recurseChildren(quarterlyFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "quarter");
          if (date) {
            const dateString = getDateUID(date, "quarter");
            quarterly[dateString] = note;
          }
        }
      });
      return quarterly;
    }
    var YearlyNotesFolderMissingError = class extends Error {
    };
    async function createYearlyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getYearlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getYearlyNote2(date, yearlyNotes) {
      var _a;
      return (_a = yearlyNotes[getDateUID(date, "year")]) != null ? _a : null;
    }
    function getAllYearlyNotes2() {
      const yearlyNotes = {};
      if (!appHasYearlyNotesPluginLoaded()) {
        return yearlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getYearlyNoteSettings();
      const yearlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!yearlyNotesFolder) {
        throw new YearlyNotesFolderMissingError("Failed to find yearly notes folder");
      }
      obsidian.Vault.recurseChildren(yearlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "year");
          if (date) {
            const dateString = getDateUID(date, "year");
            yearlyNotes[dateString] = note;
          }
        }
      });
      return yearlyNotes;
    }
    function appHasDailyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const dailyNotesPlugin = app.internalPlugins.plugins["daily-notes"];
      if (dailyNotesPlugin && dailyNotesPlugin.enabled) {
        return true;
      }
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.daily) == null ? void 0 : _b.enabled);
    }
    function appHasWeeklyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      if (app.plugins.getPlugin("calendar")) {
        return true;
      }
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.weekly) == null ? void 0 : _b.enabled);
    }
    function appHasMonthlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.monthly) == null ? void 0 : _b.enabled);
    }
    function appHasQuarterlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.quarterly) == null ? void 0 : _b.enabled);
    }
    function appHasYearlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.yearly) == null ? void 0 : _b.enabled);
    }
    function getPeriodicNoteSettings(granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      }[granularity];
      return getSettings();
    }
    function createPeriodicNote(granularity, date) {
      const createFn = {
        day: createDailyNote2,
        month: createMonthlyNote2,
        week: createWeeklyNote2
      };
      return createFn[granularity](date);
    }
    exports.DEFAULT_DAILY_NOTE_FORMAT = DEFAULT_DAILY_NOTE_FORMAT;
    exports.DEFAULT_MONTHLY_NOTE_FORMAT = DEFAULT_MONTHLY_NOTE_FORMAT;
    exports.DEFAULT_QUARTERLY_NOTE_FORMAT = DEFAULT_QUARTERLY_NOTE_FORMAT;
    exports.DEFAULT_WEEKLY_NOTE_FORMAT = DEFAULT_WEEKLY_NOTE_FORMAT;
    exports.DEFAULT_YEARLY_NOTE_FORMAT = DEFAULT_YEARLY_NOTE_FORMAT;
    exports.appHasDailyNotesPluginLoaded = appHasDailyNotesPluginLoaded;
    exports.appHasMonthlyNotesPluginLoaded = appHasMonthlyNotesPluginLoaded;
    exports.appHasQuarterlyNotesPluginLoaded = appHasQuarterlyNotesPluginLoaded;
    exports.appHasWeeklyNotesPluginLoaded = appHasWeeklyNotesPluginLoaded;
    exports.appHasYearlyNotesPluginLoaded = appHasYearlyNotesPluginLoaded;
    exports.createDailyNote = createDailyNote2;
    exports.createMonthlyNote = createMonthlyNote2;
    exports.createPeriodicNote = createPeriodicNote;
    exports.createQuarterlyNote = createQuarterlyNote;
    exports.createWeeklyNote = createWeeklyNote2;
    exports.createYearlyNote = createYearlyNote2;
    exports.getAllDailyNotes = getAllDailyNotes2;
    exports.getAllMonthlyNotes = getAllMonthlyNotes2;
    exports.getAllQuarterlyNotes = getAllQuarterlyNotes;
    exports.getAllWeeklyNotes = getAllWeeklyNotes2;
    exports.getAllYearlyNotes = getAllYearlyNotes2;
    exports.getDailyNote = getDailyNote2;
    exports.getDailyNoteSettings = getDailyNoteSettings;
    exports.getDateFromFile = getDateFromFile;
    exports.getDateFromPath = getDateFromPath;
    exports.getDateUID = getDateUID;
    exports.getMonthlyNote = getMonthlyNote2;
    exports.getMonthlyNoteSettings = getMonthlyNoteSettings;
    exports.getPeriodicNoteSettings = getPeriodicNoteSettings;
    exports.getQuarterlyNote = getQuarterlyNote;
    exports.getQuarterlyNoteSettings = getQuarterlyNoteSettings;
    exports.getTemplateInfo = getTemplateInfo;
    exports.getWeeklyNote = getWeeklyNote2;
    exports.getWeeklyNoteSettings = getWeeklyNoteSettings;
    exports.getYearlyNote = getYearlyNote2;
    exports.getYearlyNoteSettings = getYearlyNoteSettings;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => HomeBasePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian12 = require("obsidian");

// src/settings.ts
var HomeBaseType = /* @__PURE__ */ ((HomeBaseType2) => {
  HomeBaseType2["File"] = "File";
  HomeBaseType2["Workspace"] = "Workspace";
  HomeBaseType2["Random"] = "Random file";
  HomeBaseType2["RandomFolder"] = "Random in folder";
  HomeBaseType2["Graph"] = "Graph view";
  HomeBaseType2["None"] = "Nothing";
  HomeBaseType2["Journal"] = "Journal";
  HomeBaseType2["DailyNote"] = "Daily Note";
  HomeBaseType2["WeeklyNote"] = "Weekly Note";
  HomeBaseType2["MonthlyNote"] = "Monthly Note";
  HomeBaseType2["YearlyNote"] = "Yearly Note";
  return HomeBaseType2;
})(HomeBaseType || {});
var DEFAULT_SETTINGS = {
  // General
  homeBasePath: "",
  // Legacy
  homeBaseType: "File" /* File */,
  homeBaseValue: "",
  openOnStartup: true,
  openViewMode: "default",
  openMode: "replace-all",
  manualOpenMode: "retain",
  // Tab Behavior
  replaceNewTab: false,
  newTabMode: "only-when-empty",
  // Default: only replace when no tabs are open
  keepExistingTabs: true,
  // UI Features
  showStickyHomeIcon: false,
  stickyIconName: "home",
  hideHomeTabHeader: false,
  replaceMobileNewTab: false,
  // Mobile
  separateMobile: false,
  mobileHomeBasePath: "",
  // Legacy
  mobileHomeBaseType: "File" /* File */,
  mobileHomeBaseValue: "",
  // Automation
  commandOnOpen: "",
  // View behavior
  revertView: false,
  autoScroll: false,
  hideReleaseNotes: false
  // OFF by default
};
var VIEW_MODE_OPTIONS = {
  "default": "Default",
  "preview": "Reading view",
  "source": "Source mode",
  "live": "Live Preview"
};
var NEW_TAB_MODE_OPTIONS = {
  "only-when-empty": "Only when no tabs are open",
  "always": "Always replace new tabs"
};
var OPENING_MODE_OPTIONS = {
  "replace-all": "Replace all open notes",
  "replace-last": "Replace last note",
  "retain": "Keep open notes"
};
var UNCHANGEABLE_TYPES = [
  "Random file" /* Random */,
  "Graph view" /* Graph */,
  "Nothing" /* None */,
  "Daily Note" /* DailyNote */,
  "Weekly Note" /* WeeklyNote */,
  "Monthly Note" /* MonthlyNote */,
  "Yearly Note" /* YearlyNote */
];

// src/ui/settings-tab.ts
var import_obsidian5 = require("obsidian");

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  if (heading) {
    const headingEl = containerEl.createDiv("setting-group-heading");
    headingEl.createEl("h3", { text: heading });
  }
  return {
    addSetting(cb) {
      const setting = new import_obsidian.Setting(containerEl);
      cb(setting);
    }
  };
}

// src/ui/file-suggest.ts
var import_obsidian2 = require("obsidian");
var SUPPORTED_EXTENSIONS = ["md", "mdx", "canvas", "base"];
var FilePathSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    const lowerQuery = query.toLowerCase();
    const files = [];
    this.app.vault.getAllLoadedFiles().forEach((file) => {
      if (file instanceof import_obsidian2.TFile) {
        if (SUPPORTED_EXTENSIONS.includes(file.extension)) {
          if (file.path.toLowerCase().includes(lowerQuery) || file.basename.toLowerCase().includes(lowerQuery)) {
            files.push(file);
          }
        }
      }
    });
    files.sort((a, b) => {
      const aStartsWith = a.path.toLowerCase().startsWith(lowerQuery);
      const bStartsWith = b.path.toLowerCase().startsWith(lowerQuery);
      if (aStartsWith && !bStartsWith) return -1;
      if (!aStartsWith && bStartsWith) return 1;
      return a.path.localeCompare(b.path);
    });
    return files.slice(0, 20);
  }
  renderSuggestion(file, el) {
    el.createEl("div", {
      text: file.basename,
      cls: "suggestion-title"
    });
    if (file.parent && file.parent.path !== "/") {
      el.createEl("small", {
        text: file.parent.path,
        cls: "suggestion-path"
      });
    }
    if (file.extension !== "md") {
      el.createEl("span", {
        text: file.extension.toUpperCase(),
        cls: "suggestion-flair"
      });
    }
  }
  selectSuggestion(file) {
    this.inputEl.value = file.path;
    this.inputEl.trigger("input");
    this.close();
  }
};
var FolderSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    const lowerQuery = query.toLowerCase();
    const folders = [];
    this.app.vault.getAllLoadedFiles().forEach((file) => {
      if (file instanceof import_obsidian2.TFolder) {
        if (file.path.toLowerCase().includes(lowerQuery)) {
          folders.push(file);
        }
      }
    });
    folders.sort((a, b) => a.path.localeCompare(b.path));
    return folders.slice(0, 20);
  }
  renderSuggestion(folder, el) {
    el.createEl("div", { text: folder.path || "/" });
  }
  selectSuggestion(folder) {
    this.inputEl.value = folder.path;
    this.inputEl.trigger("input");
    this.close();
  }
};
var WorkspaceSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    var _a, _b, _c;
    const workspacesPlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces;
    if (!(workspacesPlugin == null ? void 0 : workspacesPlugin.enabled) || !((_c = workspacesPlugin.instance) == null ? void 0 : _c.workspaces)) {
      return [];
    }
    const workspaces = Object.keys(workspacesPlugin.instance.workspaces);
    const lowerQuery = query.toLowerCase();
    return workspaces.filter(
      (workspace) => workspace.toLowerCase().includes(lowerQuery)
    );
  }
  renderSuggestion(workspace, el) {
    el.createEl("div", { text: workspace });
  }
  selectSuggestion(workspace) {
    this.inputEl.value = workspace;
    this.inputEl.trigger("input");
    this.close();
  }
};

// src/ui/command-suggest.ts
var import_obsidian3 = require("obsidian");
var CommandSuggest = class extends import_obsidian3.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    var _a;
    const lowerQuery = query.toLowerCase();
    const commands = [];
    const appWithCommands = this.app;
    const allCommands = (_a = appWithCommands.commands) == null ? void 0 : _a.commands;
    if (allCommands) {
      for (const command of Object.values(allCommands)) {
        if (command.name.toLowerCase().includes(lowerQuery) || command.id.toLowerCase().includes(lowerQuery)) {
          commands.push(command);
        }
      }
    }
    commands.sort((a, b) => a.name.localeCompare(b.name));
    return commands.slice(0, 30);
  }
  renderSuggestion(command, el) {
    el.createEl("div", {
      text: command.name,
      cls: "suggestion-title"
    });
    el.createEl("small", {
      text: command.id,
      cls: "suggestion-note"
    });
  }
  selectSuggestion(command) {
    this.inputEl.value = command.id;
    this.inputEl.trigger("input");
    this.close();
  }
};
function getCommandById(app, commandId) {
  var _a;
  const appWithCommands = app;
  const commands = (_a = appWithCommands.commands) == null ? void 0 : _a.commands;
  return commands == null ? void 0 : commands[commandId];
}
function executeCommand(app, commandId) {
  var _a, _b;
  if (!commandId) return false;
  const appWithCommands = app;
  const result = (_b = (_a = appWithCommands.commands) == null ? void 0 : _a.executeCommandById) == null ? void 0 : _b.call(_a, commandId);
  return result !== false;
}

// src/ui/icon-picker.ts
var import_obsidian4 = require("obsidian");
var IconPicker = class extends import_obsidian4.Modal {
  constructor(app, currentIcon, callback) {
    super(app);
    this.searchResults = [];
    this.selectedIcon = currentIcon;
    this.callback = callback;
  }
  onOpen() {
    this.containerEl.addClass("mod-confirmation");
    this.modalEl.addClass("iconic-icon-picker");
    this.setTitle("Change icon");
    const searchSetting = new import_obsidian4.Setting(this.contentEl);
    if (!import_obsidian4.Platform.isPhone) {
      searchSetting.setName("Search");
    }
    searchSetting.addSearch((searchField) => {
      searchField.setPlaceholder("Search icons...").onChange(() => this.updateSearchResults());
      searchField.inputEl.enterKeyHint = "go";
      this.searchField = searchField;
    });
    if (this.selectedIcon) {
      this.searchField.setValue(this.selectedIcon);
    }
    this.searchResultsSetting = new import_obsidian4.Setting(this.contentEl);
    this.searchResultsSetting.settingEl.addClass("iconic-search-results");
    this.searchResultsSetting.settingEl.tabIndex = 0;
    this.searchResultsSetting.settingEl.addEventListener("wheel", (event) => {
      if (document.body.hasClass("mod-rtl")) {
        this.searchResultsSetting.settingEl.scrollLeft -= event.deltaY;
      } else {
        this.searchResultsSetting.settingEl.scrollLeft += event.deltaY;
      }
    }, { passive: true });
    const buttonContainer = this.modalEl.createDiv({ cls: "modal-button-container" });
    new import_obsidian4.ButtonComponent(buttonContainer).setButtonText("Cancel").onClick(() => this.close()).buttonEl.addClass("mod-cancel");
    new import_obsidian4.ButtonComponent(buttonContainer).setButtonText("Save").setCta().onClick(() => {
      this.callback(this.selectedIcon);
      this.close();
    });
    requestAnimationFrame(() => {
      this.searchField.inputEl.select();
      this.updateSearchResults();
    });
  }
  /**
   * Update search results based on current query
   */
  updateSearchResults() {
    const query = this.searchField.getValue().toLowerCase().trim();
    const fuzzySearch = (0, import_obsidian4.prepareFuzzySearch)(query);
    const matches = [];
    const iconIds = (0, import_obsidian4.getIconIds)();
    if (query) {
      for (const iconId of iconIds) {
        const iconName = this.formatIconName(iconId);
        if (iconId === query || iconId.toLowerCase() === query) {
          matches.push([0, [iconId, iconName]]);
        } else {
          const fuzzyMatch = fuzzySearch(iconName);
          if (fuzzyMatch) {
            matches.push([fuzzyMatch.score, [iconId, iconName]]);
          }
        }
      }
    } else {
      for (const iconId of iconIds) {
        const iconName = this.formatIconName(iconId);
        matches.push([0, [iconId, iconName]]);
      }
    }
    matches.sort(([scoreA], [scoreB]) => scoreA > scoreB ? -1 : 1);
    this.searchResults.length = 0;
    const maxResults = 100;
    for (const [, iconEntry] of matches) {
      this.searchResults.push(iconEntry);
      if (this.searchResults.length >= maxResults) break;
    }
    this.searchResultsSetting.clear();
    for (const [iconId, iconName] of this.searchResults) {
      this.searchResultsSetting.addExtraButton((iconButton) => {
        iconButton.setTooltip(iconName, {
          delay: 300,
          placement: import_obsidian4.Platform.isPhone ? "top" : "bottom"
        });
        const iconEl = iconButton.extraSettingsEl;
        iconEl.addClass("iconic-search-result");
        iconEl.tabIndex = -1;
        (0, import_obsidian4.setIcon)(iconEl, iconId);
        if (iconId === this.selectedIcon) {
          iconEl.addClass("is-selected");
        }
        iconEl.addEventListener("click", () => {
          this.selectedIcon = iconId;
          this.callback(iconId);
          this.close();
        });
        if (import_obsidian4.Platform.isPhone) {
          iconEl.addEventListener("contextmenu", () => {
            var _a;
            (_a = navigator.vibrate) == null ? void 0 : _a.call(navigator, 100);
          });
        }
      });
    }
    if (this.searchResults.length === 0) {
      this.searchResultsSetting.addExtraButton((button) => {
        button.extraSettingsEl.addClasses(["iconic-invisible", "iconic-search-result"]);
      });
    }
  }
  /**
   * Format icon ID into readable name
   */
  formatIconName(iconId) {
    let name = iconId.replace(/^lucide-/, "");
    name = name.replace(/-/g, " ");
    return name.split(" ").map(
      (word) => word.charAt(0).toUpperCase() + word.slice(1)
    ).join(" ");
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/ui/settings-tab.ts
var HomeBaseSettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const isMobile = this.plugin.settings.separateMobile;
    const activeType = isMobile ? this.plugin.settings.mobileHomeBaseType : this.plugin.settings.homeBaseType;
    const activeValue = isMobile ? this.plugin.settings.mobileHomeBaseValue : this.plugin.settings.homeBaseValue;
    const generalGroup = createSettingsGroup(containerEl, void 0, "home-base");
    generalGroup.addSetting((setting) => {
      setting.setName("Home page").setDesc("What to open as your home base").addDropdown((dropdown) => {
        let pluginDisabled = false;
        for (const type of Object.values(HomeBaseType)) {
          if (!this.plugin.hasRequiredPlugin(type)) {
            if (type === activeType) {
              pluginDisabled = true;
              dropdown.addOption(type, type);
            } else {
              dropdown.selectEl.createEl("option", {
                text: type,
                attr: { disabled: "true" }
              });
              continue;
            }
          } else {
            dropdown.addOption(type, type);
          }
        }
        dropdown.setValue(activeType || "File" /* File */).onChange(async (value) => {
          if (isMobile) {
            this.plugin.settings.mobileHomeBaseType = value;
          } else {
            this.plugin.settings.homeBaseType = value;
          }
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
        if (pluginDisabled) {
          setting.descEl.createDiv({
            text: "The plugin required for this home page type isn't available.",
            cls: "mod-warning"
          });
        }
      });
    });
    if (!UNCHANGEABLE_TYPES.includes(activeType)) {
      generalGroup.addSetting((setting) => {
        let desc = "";
        let placeholder = "";
        if (activeType === "File" /* File */) {
          desc = "The file to open as your home base (supports .md, .mdx, .canvas, .base)";
          placeholder = "Path to home base file";
        } else if (activeType === "Workspace" /* Workspace */) {
          desc = "The workspace to load as your home base";
          placeholder = "Workspace name";
        } else if (activeType === "Random in folder" /* RandomFolder */) {
          desc = "The folder to pick a random file from";
          placeholder = "Folder path";
        } else if (activeType === "Journal" /* Journal */) {
          desc = "The journal name";
          placeholder = "Journal name";
        }
        setting.setName(activeType === "File" /* File */ ? "File" : activeType === "Workspace" /* Workspace */ ? "Workspace" : activeType === "Random in folder" /* RandomFolder */ ? "Folder" : activeType === "Journal" /* Journal */ ? "Journal" : "Value").setDesc(desc).addText((text) => {
          if (activeType === "File" /* File */) {
            new FilePathSuggest(this.app, text.inputEl);
          } else if (activeType === "Workspace" /* Workspace */) {
            new WorkspaceSuggest(this.app, text.inputEl);
          } else if (activeType === "Random in folder" /* RandomFolder */) {
            new FolderSuggest(this.app, text.inputEl);
          }
          text.setPlaceholder(placeholder).setValue(activeValue || "").onChange(async (value) => {
            if (isMobile) {
              this.plugin.settings.mobileHomeBaseValue = value;
              if (activeType === "File" /* File */) {
                this.plugin.settings.mobileHomeBasePath = value;
              }
            } else {
              this.plugin.settings.homeBaseValue = value;
              if (activeType === "File" /* File */) {
                this.plugin.settings.homeBasePath = value;
              }
            }
            await this.plugin.saveSettings();
          });
        });
      });
    }
    generalGroup.addSetting((setting) => {
      setting.setName("Open on startup").setDesc("Open the home base when launching Obsidian").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.openOnStartup).onChange(async (value) => {
          this.plugin.settings.openOnStartup = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Opening mode (startup)").setDesc("How to handle existing tabs when opening on startup").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(OPENING_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.openMode).onChange(async (value) => {
          this.plugin.settings.openMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Opening mode (manual)").setDesc("How to handle existing tabs when opening manually").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(OPENING_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.manualOpenMode).onChange(async (value) => {
          this.plugin.settings.manualOpenMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("View mode").setDesc("How to open markdown and MDX files (canvas/base use native views)").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(VIEW_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.openViewMode).onChange(async (value) => {
          this.plugin.settings.openViewMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Revert view on close").setDesc("When navigating away from the home base, restore the default view").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.revertView).onChange(async (value) => {
          this.plugin.settings.revertView = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Auto-scroll").setDesc("When opening the home base, scroll to the bottom and focus on the last line").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.autoScroll).onChange(async (value) => {
          this.plugin.settings.autoScroll = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Hide release notes").setDesc("Never display release notes when Obsidian updates").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.hideReleaseNotes).onChange(async (value) => {
          this.plugin.settings.hideReleaseNotes = value;
          await this.plugin.saveSettings();
        });
      });
    });
    const tabGroup = createSettingsGroup(containerEl, "Tab Behavior", "home-base");
    tabGroup.addSetting((setting) => {
      setting.setName("Replace new tabs").setDesc("Open home base instead of new empty tabs").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.replaceNewTab).onChange(async (value) => {
          this.plugin.settings.replaceNewTab = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.replaceNewTab) {
      tabGroup.addSetting((setting) => {
        setting.setName("New tab replacement mode").setDesc("When to replace new tabs with home base").addDropdown((dropdown) => {
          for (const [value, label] of Object.entries(NEW_TAB_MODE_OPTIONS)) {
            dropdown.addOption(value, label);
          }
          dropdown.setValue(this.plugin.settings.newTabMode).onChange(async (value) => {
            this.plugin.settings.newTabMode = value;
            await this.plugin.saveSettings();
          });
        });
      });
    }
    const uiGroup = createSettingsGroup(containerEl, "UI Features", "home-base");
    uiGroup.addSetting((setting) => {
      setting.setName("Sticky home icon").setDesc("Show a home icon in the tab bar that stays pinned to the left (desktop only)").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showStickyHomeIcon).onChange(async (value) => {
          this.plugin.settings.showStickyHomeIcon = value;
          await this.plugin.saveSettings();
          this.plugin.updateStickyTabIcon();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.showStickyHomeIcon) {
      uiGroup.addSetting((setting) => {
        setting.setName("Icon").setDesc("The icon to display in the sticky home icon").addButton((button) => {
          const iconName = this.plugin.settings.stickyIconName || "home";
          button.setButtonText("Change icon").setIcon(iconName).onClick(() => {
            const picker = new IconPicker(
              this.app,
              this.plugin.settings.stickyIconName,
              (icon) => {
                void (async () => {
                  this.plugin.settings.stickyIconName = icon;
                  await this.plugin.saveSettings();
                  this.plugin.stickyTabService.update();
                  this.display();
                })();
              }
            );
            picker.open();
          });
        });
      });
      uiGroup.addSetting((setting) => {
        setting.setName("Hide tab header").setDesc("Hide the ghost tab header when it's open, using the sticky icon as the tab indicator").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.hideHomeTabHeader).onChange(async (value) => {
            this.plugin.settings.hideHomeTabHeader = value;
            await this.plugin.saveSettings();
            this.plugin.stickyTabService.updateTabHeaders();
          });
        });
      });
    }
    uiGroup.addSetting((setting) => {
      setting.setName("Replace mobile new tab button").setDesc("Change the mobile new tab button to a home icon").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.replaceMobileNewTab).onChange(async (value) => {
          this.plugin.settings.replaceMobileNewTab = value;
          await this.plugin.saveSettings();
          this.plugin.updateMobileButton();
        });
      });
    });
    const mobileGroup = createSettingsGroup(containerEl, "Mobile", "home-base");
    mobileGroup.addSetting((setting) => {
      setting.setName("Separate mobile home page").setDesc("Use a different home page on mobile devices").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.separateMobile).onChange(async (value) => {
          this.plugin.settings.separateMobile = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.separateMobile) {
      mobileGroup.addSetting((setting) => {
        setting.setName("Mobile home page").setDesc("What to open as your home base on mobile").addDropdown((dropdown) => {
          const mobileType = this.plugin.settings.mobileHomeBaseType || "File" /* File */;
          let pluginDisabled = false;
          for (const type of Object.values(HomeBaseType)) {
            if (!this.plugin.hasRequiredPlugin(type)) {
              if (type === mobileType) {
                pluginDisabled = true;
                dropdown.addOption(type, type);
              } else {
                dropdown.selectEl.createEl("option", {
                  text: type,
                  attr: { disabled: "true" }
                });
                continue;
              }
            } else {
              dropdown.addOption(type, type);
            }
          }
          dropdown.setValue(mobileType).onChange(async (value) => {
            this.plugin.settings.mobileHomeBaseType = value;
            await this.plugin.saveSettings();
            const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
            const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
            this.display();
            requestAnimationFrame(() => {
              if (scrollContainer) {
                scrollContainer.scrollTop = scrollTop;
              }
            });
          });
          if (pluginDisabled) {
            setting.descEl.createDiv({
              text: "The plugin required for this home page type isn't available.",
              cls: "mod-warning"
            });
          }
        });
      });
      if (!UNCHANGEABLE_TYPES.includes(this.plugin.settings.mobileHomeBaseType)) {
        mobileGroup.addSetting((setting) => {
          const mobileType = this.plugin.settings.mobileHomeBaseType;
          let desc = "";
          let placeholder = "";
          if (mobileType === "File" /* File */) {
            desc = "The file to open as your home base on mobile";
            placeholder = "Path to home base file";
          } else if (mobileType === "Workspace" /* Workspace */) {
            desc = "The workspace to load as your home base on mobile";
            placeholder = "Workspace name";
          } else if (mobileType === "Random in folder" /* RandomFolder */) {
            desc = "The folder to pick a random file from on mobile";
            placeholder = "Folder path";
          } else if (mobileType === "Journal" /* Journal */) {
            desc = "The journal name for mobile";
            placeholder = "Journal name";
          }
          setting.setName(mobileType === "File" /* File */ ? "Mobile file" : mobileType === "Workspace" /* Workspace */ ? "Mobile workspace" : mobileType === "Random in folder" /* RandomFolder */ ? "Mobile folder" : mobileType === "Journal" /* Journal */ ? "Mobile journal" : "Mobile value").setDesc(desc).addText((text) => {
            if (mobileType === "File" /* File */) {
              new FilePathSuggest(this.app, text.inputEl);
            } else if (mobileType === "Workspace" /* Workspace */) {
              new WorkspaceSuggest(this.app, text.inputEl);
            } else if (mobileType === "Random in folder" /* RandomFolder */) {
              new FolderSuggest(this.app, text.inputEl);
            }
            text.setPlaceholder(placeholder).setValue(this.plugin.settings.mobileHomeBaseValue || "").onChange(async (value) => {
              this.plugin.settings.mobileHomeBaseValue = value;
              if (mobileType === "File" /* File */) {
                this.plugin.settings.mobileHomeBasePath = value;
              }
              await this.plugin.saveSettings();
            });
          });
        });
      }
    }
    const automationGroup = createSettingsGroup(containerEl, "Automation", "home-base");
    automationGroup.addSetting((setting) => {
      const commandId = this.plugin.settings.commandOnOpen;
      const command = commandId ? getCommandById(this.app, commandId) : void 0;
      const displayValue = command ? command.name : commandId;
      setting.setName("Command on open").setDesc("Run an Obsidian command when opening home base").addText((text) => {
        new CommandSuggest(this.app, text.inputEl);
        text.setPlaceholder("Search for a command...").setValue(displayValue || "").onChange(async (value) => {
          this.plugin.settings.commandOnOpen = value;
          await this.plugin.saveSettings();
        });
      }).addExtraButton((btn) => {
        btn.setIcon("x").setTooltip("Clear command").onClick(async () => {
          this.plugin.settings.commandOnOpen = "";
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
  }
};

// src/services/home-service.ts
var import_obsidian8 = require("obsidian");
init_file_utils();

// src/utils/homebase-resolver.ts
var import_obsidian7 = require("obsidian");
var import_obsidian_daily_notes_interface = __toESM(require_main(), 1);
function randomFile(app, root) {
  let files = [];
  if (root) {
    const resolvedRoot = app.vault.getFolderByPath(root);
    if (resolvedRoot) {
      files = getFilesInFolder(resolvedRoot);
    } else {
      const allFiles = app.vault.getFiles();
      const pattern = root.toLowerCase();
      files = allFiles.filter((f) => {
        const fileName = f.name.toLowerCase();
        return fileName === pattern || fileName === pattern.replace(/\.md$/, "");
      });
    }
  } else {
    files = app.vault.getFiles();
  }
  files = files.filter((f) => ["md", "canvas", "base"].includes(f.extension));
  if (files.length) {
    const index = Math.floor(Math.random() * files.length);
    return files[index] || null;
  }
  return null;
}
function getFilesInFolder(folder) {
  let files = [];
  for (const item of folder.children) {
    if (item instanceof import_obsidian7.TFile) {
      files.push(item);
    } else if (item instanceof import_obsidian7.TFolder) {
      files.push(...getFilesInFolder(item));
    }
  }
  return files;
}
function trimFile(file) {
  if (!file) return "";
  return file.extension === "md" ? file.path.slice(0, -3) : file.path;
}
var PERIODIC_INFO = {
  ["Daily Note" /* DailyNote */]: {
    noun: "day",
    adjective: "daily",
    create: import_obsidian_daily_notes_interface.createDailyNote,
    get: import_obsidian_daily_notes_interface.getDailyNote,
    getAll: import_obsidian_daily_notes_interface.getAllDailyNotes
  },
  ["Weekly Note" /* WeeklyNote */]: {
    noun: "week",
    adjective: "weekly",
    create: import_obsidian_daily_notes_interface.createWeeklyNote,
    get: import_obsidian_daily_notes_interface.getWeeklyNote,
    getAll: import_obsidian_daily_notes_interface.getAllWeeklyNotes
  },
  ["Monthly Note" /* MonthlyNote */]: {
    noun: "month",
    adjective: "monthly",
    create: import_obsidian_daily_notes_interface.createMonthlyNote,
    get: import_obsidian_daily_notes_interface.getMonthlyNote,
    getAll: import_obsidian_daily_notes_interface.getAllMonthlyNotes
  },
  ["Yearly Note" /* YearlyNote */]: {
    noun: "year",
    adjective: "yearly",
    create: import_obsidian_daily_notes_interface.createYearlyNote,
    get: import_obsidian_daily_notes_interface.getYearlyNote,
    getAll: import_obsidian_daily_notes_interface.getAllYearlyNotes
  },
  ["File" /* File */]: null,
  ["Random file" /* Random */]: null,
  ["Random in folder" /* RandomFolder */]: null,
  ["Workspace" /* Workspace */]: null,
  ["Graph view" /* Graph */]: null,
  ["Nothing" /* None */]: null,
  ["Journal" /* Journal */]: null
};
async function getPeriodicNote(kind, plugin) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i;
  if (!window.moment) {
    return null;
  }
  const info = PERIODIC_INFO[kind];
  if (!info) {
    return null;
  }
  const date = window.moment().startOf(info.noun);
  if (kind === "Daily Note" /* DailyNote */ && ((_c = (_b = (_a = plugin.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["daily-notes"]) == null ? void 0 : _c.enabled)) {
    const dailyNotes = plugin.app.internalPlugins.plugins["daily-notes"].instance;
    if (dailyNotes == null ? void 0 : dailyNotes.getDailyNotePath) {
      const today = window.moment();
      const path = dailyNotes.getDailyNotePath(today);
      if (path) {
        return path.replace(/\.md$/, "");
      }
    }
  }
  const periodicNotesPlugin = (_e = (_d = plugin.app.plugins) == null ? void 0 : _d.plugins) == null ? void 0 : _e["periodic-notes"];
  if (!periodicNotesPlugin) {
    return null;
  }
  try {
    const isLegacy = (((_f = periodicNotesPlugin.manifest) == null ? void 0 : _f.version) || "0").startsWith("0");
    let note = null;
    if (isLegacy) {
      const all = info.getAll();
      if (!Object.keys(all).length) {
        note = await info.create(date);
      } else {
        note = info.get(date, all) || await info.create(date);
      }
      if (!note) {
        note = info.get(date, all);
      }
    } else {
      if ((_g = periodicNotesPlugin.cache) == null ? void 0 : _g.initialize) {
        periodicNotesPlugin.cache.initialize();
      }
      note = ((_h = periodicNotesPlugin.getPeriodicNote) == null ? void 0 : _h.call(periodicNotesPlugin, info.noun, date)) || await ((_i = periodicNotesPlugin.createPeriodicNote) == null ? void 0 : _i.call(periodicNotesPlugin, info.noun, date)) || null;
    }
    if (note) {
      return trimFile(note);
    }
    return null;
  } catch (e) {
    return null;
  }
}
async function getJournalNote(journalName, plugin) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k;
  const journals = (_b = (_a = plugin.app.plugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["journals"];
  if (!journals) return null;
  try {
    const journal = (_c = journals.journals) == null ? void 0 : _c.find((j) => j.name === journalName);
    if (!journal) return null;
    (_d = journals.reprocessNotes) == null ? void 0 : _d.call(journals);
    const origAutoCreate = (_f = (_e = journal.config) == null ? void 0 : _e.value) == null ? void 0 : _f.autoCreate;
    if ((_g = journal.config) == null ? void 0 : _g.value) {
      journal.config.value.autoCreate = true;
    }
    await ((_h = journal.autoCreate) == null ? void 0 : _h.call(journal));
    if ((_i = journal.config) == null ? void 0 : _i.value) {
      journal.config.value.autoCreate = origAutoCreate;
    }
    if (!window.moment) return null;
    const today = window.moment().locale("custom-journal-locale").startOf("day");
    const note = (_j = journal.get) == null ? void 0 : _j.call(journal, today);
    if (!note) return null;
    const path = (_k = journal.getNotePath) == null ? void 0 : _k.call(journal, note);
    return path ? path.replace(/\.md$/, "") : null;
  } catch (e) {
    return null;
  }
}
async function computeHomeBasePath(type, value, plugin) {
  switch (type) {
    case "File" /* File */:
      return value || null;
    case "Random file" /* Random */: {
      const file = randomFile(plugin.app);
      return file ? trimFile(file) : null;
    }
    case "Random in folder" /* RandomFolder */: {
      const file = randomFile(plugin.app, value);
      return file ? trimFile(file) : null;
    }
    case "Daily Note" /* DailyNote */:
    case "Weekly Note" /* WeeklyNote */:
    case "Monthly Note" /* MonthlyNote */:
    case "Yearly Note" /* YearlyNote */:
      return await getPeriodicNote(type, plugin);
    case "Journal" /* Journal */:
      return await getJournalNote(value, plugin);
    case "Workspace" /* Workspace */:
    case "Graph view" /* Graph */:
    case "Nothing" /* None */:
      return null;
    default:
      return value || null;
  }
}

// src/services/home-service.ts
var LEAF_TYPES = ["markdown", "canvas", "bases"];
function equalsCaseless(path1, path2) {
  const normalize = (p) => p.toLowerCase().replace(/\.md$/, "");
  return normalize(path1) === normalize(path2);
}
var HomeBaseService = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
  }
  /**
   * Open home base with a specific mode (for startup/manual opens)
   */
  async openHomeBaseWithMode(mode, runCommand = true) {
    var _a;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (homeBaseSettings.type === "Workspace" /* Workspace */) {
      return this.openWorkspace(homeBaseSettings.value);
    }
    if (homeBaseSettings.type === "Graph view" /* Graph */) {
      return this.openGraph();
    }
    if (homeBaseSettings.type === "Nothing" /* None */) {
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file) {
      const untrimmedPath = resolvedPath.endsWith(".md") ? resolvedPath : `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
      if (!file && homeBaseSettings.type === "File" /* File */) {
        return false;
      }
    }
    if (!file) {
      return false;
    }
    if (mode === "replace-all") {
      await this.detachAllLeaves();
    } else if (mode === "replace-last") {
      const activeLeaf = (_a = this.app.workspace.getActiveViewOfType(import_obsidian8.View)) == null ? void 0 : _a.leaf;
      if (activeLeaf) {
        const viewState = activeLeaf.getViewState();
        if (viewState.pinned !== true) {
          void activeLeaf.detach();
          await new Promise((resolve) => setTimeout(resolve, 100));
        }
      }
    }
    const existingLeaf = this.findExistingHomeBaseLeaf(file);
    if (existingLeaf && mode !== "replace-all") {
      const viewState = existingLeaf.getViewState();
      if (viewState.pinned === true && this.plugin.settings.showStickyHomeIcon) {
      } else {
        this.app.workspace.setActiveLeaf(existingLeaf);
        await this.configureView(existingLeaf, file);
        if (runCommand) {
          this.runCommandOnOpen();
        }
        return true;
      }
    }
    const newLeaf = mode === "retain" ? this.app.workspace.getLeaf("tab") : this.app.workspace.getLeaf(false);
    if (!newLeaf) {
      return false;
    }
    await newLeaf.openFile(file);
    this.app.workspace.setActiveLeaf(newLeaf);
    await this.configureView(newLeaf, file);
    if (runCommand) {
      this.runCommandOnOpen();
    }
    return true;
  }
  /**
   * Open workspace
   */
  async openWorkspace(workspaceName) {
    var _a, _b, _c;
    const workspacePlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces;
    if (!(workspacePlugin == null ? void 0 : workspacePlugin.enabled) || !((_c = workspacePlugin.instance) == null ? void 0 : _c.loadWorkspace)) {
      return false;
    }
    workspacePlugin.instance.loadWorkspace(workspaceName);
    await new Promise((resolve) => setTimeout(resolve, 100));
    return true;
  }
  /**
   * Open graph view
   */
  async openGraph() {
    var _a, _b;
    await ((_b = (_a = this.app.commands) == null ? void 0 : _a.executeCommandById) == null ? void 0 : _b.call(_a, "graph:open"));
    return true;
  }
  /**
   * Open graph view in ghost tab
   * DEPRECATED: Graph view ghost tab detection is unreliable, so this is no longer used
   * Graph views now just open normally like random files
   */
  async openGraphInGhostTab(runCommand) {
    if (this.isSettingsModalOpen()) {
      return false;
    }
    let graphLeaves = this.app.workspace.getLeavesOfType("graph");
    if (graphLeaves.length === 0) {
      graphLeaves = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        try {
          const viewState = leaf.getViewState();
          if (viewState.type === "graph") {
            graphLeaves.push(leaf);
          }
        } catch (e) {
        }
      });
    }
    let ghostTab = null;
    if (graphLeaves.length === 1) {
      ghostTab = graphLeaves[0] || null;
    } else if (graphLeaves.length > 1) {
      for (const leaf of graphLeaves) {
        if (!leaf) continue;
        try {
          const viewState = leaf.getViewState();
          if (viewState.pinned === true) {
            ghostTab = leaf;
            break;
          }
        } catch (e) {
          continue;
        }
      }
      if (!ghostTab && graphLeaves[0]) {
        ghostTab = graphLeaves[0] || null;
      }
    }
    if (ghostTab) {
      const allGraphLeavesForCleanup = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        const viewState = leaf.getViewState();
        if (viewState.type === "graph") {
          allGraphLeavesForCleanup.push(leaf);
        }
      });
      const otherGraphLeaves = allGraphLeavesForCleanup.filter((leaf) => leaf !== ghostTab);
      for (const leaf of otherGraphLeaves) {
        void leaf.detach();
      }
      await new Promise((resolve) => setTimeout(resolve, 150));
      const remainingGraphLeaves = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        const viewState = leaf.getViewState();
        if (viewState.type === "graph") {
          remainingGraphLeaves.push(leaf);
        }
      });
      if (remainingGraphLeaves.length > 1) {
        for (const leaf of remainingGraphLeaves) {
          if (leaf !== ghostTab) {
            void leaf.detach();
          }
        }
        await new Promise((resolve) => setTimeout(resolve, 100));
      }
      const shouldFocus = !this.isSettingsModalOpen();
      this.app.workspace.setActiveLeaf(ghostTab, { focus: shouldFocus });
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const allExistingGraphLeaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      const viewState = leaf.getViewState();
      if (viewState.type === "graph") {
        allExistingGraphLeaves.push(leaf);
      }
    });
    for (const leaf of allExistingGraphLeaves) {
      void leaf.detach();
    }
    await new Promise((resolve) => setTimeout(resolve, 100));
    let existingGraphLeaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      const viewState = leaf.getViewState();
      if (viewState.type === "graph") {
        existingGraphLeaves.push(leaf);
      }
    });
    let newGhostTab = null;
    if (existingGraphLeaves.length > 0) {
      newGhostTab = existingGraphLeaves[0] || null;
    } else {
      const newLeaf = this.app.workspace.getLeaf("tab");
      if (newLeaf) {
        await newLeaf.setViewState({
          type: "graph",
          state: {}
        });
        await new Promise((resolve) => setTimeout(resolve, 200));
        newGhostTab = newLeaf;
      } else {
        await this.openGraph();
        await new Promise((resolve) => setTimeout(resolve, 300));
        existingGraphLeaves = [];
        this.app.workspace.iterateAllLeaves((leaf) => {
          const viewState = leaf.getViewState();
          if (viewState.type === "graph") {
            existingGraphLeaves.push(leaf);
          }
        });
        if (existingGraphLeaves.length > 0) {
          newGhostTab = existingGraphLeaves[0] || null;
        }
      }
    }
    if (newGhostTab) {
      newGhostTab.setPinned(true);
      const allGraphLeaves = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        const viewState = leaf.getViewState();
        if (viewState.type === "graph") {
          allGraphLeaves.push(leaf);
        }
      });
      for (const leaf of allGraphLeaves) {
        if (leaf !== newGhostTab) {
          void leaf.detach();
        }
      }
      await new Promise((resolve) => setTimeout(resolve, 100));
      const shouldFocus = !this.isSettingsModalOpen();
      this.app.workspace.setActiveLeaf(newGhostTab, { focus: shouldFocus });
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    return false;
  }
  /**
   * Open the home base file
   * @param options Options for opening
   */
  async openHomeBase(options = {}) {
    const { runCommand = true } = options;
    const mode = this.plugin.settings.manualOpenMode;
    return this.openHomeBaseWithMode(mode, runCommand);
  }
  /**
   * Open home base in an empty leaf (for new tab replacement)
   */
  async openInLeaf(leaf) {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (homeBaseSettings.type === "Workspace" /* Workspace */) {
      await this.openWorkspace(homeBaseSettings.value);
      return true;
    }
    if (homeBaseSettings.type === "Graph view" /* Graph */) {
      await this.openGraph();
      return true;
    }
    if (homeBaseSettings.type === "Nothing" /* None */) {
      this.runCommandOnOpen();
      return true;
    }
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file && !resolvedPath.endsWith(".md") && !resolvedPath.endsWith(".canvas") && !resolvedPath.endsWith(".base")) {
      const untrimmedPath = `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
    }
    if (!file) {
      return false;
    }
    const isTrulyEmpty = !leaf.view || leaf.view.getViewType() === "empty";
    if (this.plugin.settings.showStickyHomeIcon && isTrulyEmpty) {
      const isRandom = homeBaseSettings.type === "Random file" /* Random */ || homeBaseSettings.type === "Random in folder" /* RandomFolder */ || homeBaseSettings.type === "Daily Note" /* DailyNote */ || homeBaseSettings.type === "Weekly Note" /* WeeklyNote */ || homeBaseSettings.type === "Monthly Note" /* MonthlyNote */ || homeBaseSettings.type === "Yearly Note" /* YearlyNote */;
      const ghostTab = this.findGhostTab(file, isRandom);
      if (ghostTab) {
        void leaf.detach();
        this.app.workspace.setActiveLeaf(ghostTab);
        await this.configureView(ghostTab, file);
        this.runCommandOnOpen();
        return true;
      }
      if (!isRandom) {
        leaf.setPinned(true);
      }
    }
    await leaf.openFile(file);
    await this.configureView(leaf, file);
    this.runCommandOnOpen();
    return true;
  }
  /**
   * Configure the view mode for a leaf
   */
  async configureView(leaf, file) {
    const settings = this.plugin.settings;
    const view = leaf.view;
    if (!isMarkdownLike(file) || !(view instanceof import_obsidian8.MarkdownView)) {
      return;
    }
    const state = view.getState();
    if (settings.revertView) {
      this.lastView = new WeakRef(view);
    }
    if (settings.autoScroll) {
      const count = view.editor.lineCount();
      if (state.mode === "preview") {
        view.previewMode.applyScroll(count - 4);
      } else {
        view.editor.setCursor(count);
        view.editor.focus();
      }
    }
    if (settings.openViewMode !== "default") {
      switch (settings.openViewMode) {
        case "preview":
          state.mode = "preview";
          break;
        case "source":
          state.mode = "source";
          state.source = true;
          break;
        case "live":
          state.mode = "source";
          state.source = false;
          break;
      }
      await leaf.setViewState({
        type: "markdown",
        state
      });
    }
  }
  /**
   * Revert view to default when navigating away from home base
   */
  async revertView() {
    const settings = this.plugin.settings;
    if (!settings.revertView || !this.lastView || settings.openViewMode === "default") {
      return;
    }
    const view = this.lastView.deref();
    if (!view) {
      this.lastView = void 0;
      return;
    }
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      this.lastView = void 0;
      return;
    }
    const currentFile = view.file;
    if (currentFile && equalsCaseless(trimFile(currentFile), resolvedPath)) {
      return;
    }
    const state = view.getState();
    const config = this.app.vault.config;
    const mode = (config == null ? void 0 : config.defaultViewMode) || "source";
    const source = (config == null ? void 0 : config.livePreview) !== void 0 ? !config.livePreview : false;
    if (view.leaf.getViewState().type === "markdown" && (mode !== state.mode || source !== state.source)) {
      state.mode = mode;
      state.source = source;
      await view.leaf.setViewState({ type: "markdown", state, active: true });
    }
    this.lastView = void 0;
  }
  /**
   * Run the configured command after opening
   */
  runCommandOnOpen() {
    const commandId = this.plugin.settings.commandOnOpen;
    if (commandId) {
      setTimeout(() => {
        executeCommand(this.app, commandId);
      }, 100);
    }
  }
  /**
   * Find an existing leaf that has the home base file open
   */
  findExistingHomeBaseLeaf(file) {
    if (!file) return null;
    const homeBasePath = file.path;
    const leaves = LEAF_TYPES.flatMap(
      (type) => this.app.workspace.getLeavesOfType(type)
    );
    for (const leaf of leaves) {
      if (leafHasFile(leaf, homeBasePath)) {
        return leaf;
      }
    }
    return null;
  }
  /**
   * Find the ghost tab (the one opened via sticky icon)
   * Ghost tab is identified by being pinned and having the home base file
   * Only searches in the current window (getLeavesOfType is window-scoped)
   * 
   * Note: If the ghost tab is moved to another window, this will return null,
   * and a new ghost tab will be created in the current window when needed.
   * This is the desired behavior - each window can have its own ghost tab.
   * 
   * For random types, we don't look for pinned tabs (they're not pinned).
   */
  findGhostTab(file, isRandom = false) {
    if (!file) {
      return null;
    }
    const homeBasePath = file.path;
    const leaves = LEAF_TYPES.flatMap(
      (type) => this.app.workspace.getLeavesOfType(type)
    );
    for (const leaf of leaves) {
      if (leafHasFile(leaf, homeBasePath)) {
        const viewState = leaf.getViewState();
        if (isRandom || viewState.pinned === true) {
          return leaf;
        }
      }
    }
    return null;
  }
  /**
   * Open home base in ghost tab (for sticky icon)
   * Ghost tab is pinned and hidden (if setting enabled)
   * Only one ghost tab should exist at a time
   * Works for file-based types and Graph view
   * Note: Random types don't pin (since file changes each time)
   * Note: Workspace and None don't work (workspace changes layout, None doesn't open anything)
   */
  async openHomeBaseInGhostTab(options = {}) {
    const { runCommand = true } = options;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (homeBaseSettings.type === "Workspace" /* Workspace */ || homeBaseSettings.type === "Nothing" /* None */) {
      return this.openHomeBaseWithMode("retain", runCommand);
    }
    if (homeBaseSettings.type === "Graph view" /* Graph */) {
      return this.openGraph();
    }
    const isRandom = homeBaseSettings.type === "Random file" /* Random */ || homeBaseSettings.type === "Random in folder" /* RandomFolder */ || homeBaseSettings.type === "Daily Note" /* DailyNote */ || homeBaseSettings.type === "Weekly Note" /* WeeklyNote */ || homeBaseSettings.type === "Monthly Note" /* MonthlyNote */ || homeBaseSettings.type === "Yearly Note" /* YearlyNote */;
    if (this.isSettingsModalOpen()) {
      return false;
    }
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file && !resolvedPath.endsWith(".md") && !resolvedPath.endsWith(".canvas") && !resolvedPath.endsWith(".base")) {
      const untrimmedPath = `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
    }
    if (!file) {
      return false;
    }
    const ghostTab = this.findGhostTab(file, isRandom);
    if (ghostTab) {
      const allLeaves2 = LEAF_TYPES.flatMap(
        (type) => this.app.workspace.getLeavesOfType(type)
      );
      const duplicates = [];
      for (const leaf of allLeaves2) {
        if (leaf !== ghostTab && leafHasFile(leaf, resolvedPath)) {
          duplicates.push(leaf);
        }
      }
      for (const leaf of duplicates) {
        void leaf.detach();
      }
      await new Promise((resolve) => setTimeout(resolve, 100));
      const shouldFocus2 = !this.isSettingsModalOpen();
      this.app.workspace.setActiveLeaf(ghostTab, { focus: shouldFocus2 });
      await this.configureView(ghostTab, file);
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const allLeaves = LEAF_TYPES.flatMap(
      (type) => this.app.workspace.getLeavesOfType(type)
    );
    const existingTabs = [];
    for (const leaf of allLeaves) {
      if (leafHasFile(leaf, resolvedPath)) {
        existingTabs.push(leaf);
      }
    }
    for (const leaf of existingTabs) {
      void leaf.detach();
    }
    await new Promise((resolve) => setTimeout(resolve, 100));
    const newGhostTab = this.app.workspace.getLeaf("tab");
    await newGhostTab.openFile(file);
    if (!isRandom) {
      newGhostTab.setPinned(true);
    }
    const shouldFocus = !this.isSettingsModalOpen();
    this.app.workspace.setActiveLeaf(newGhostTab, { focus: shouldFocus });
    await this.configureView(newGhostTab, file);
    if (runCommand) {
      this.runCommandOnOpen();
    }
    return true;
  }
  /**
   * Find an empty leaf
   */
  findEmptyLeaf() {
    const leaves = this.app.workspace.getLeavesOfType("empty");
    return leaves[0] || null;
  }
  /**
   * Get the home base file
   */
  getHomeBaseFile() {
    const settings = this.plugin.settings;
    if (!settings.homeBasePath) {
      return null;
    }
    return getFileByPath(this.app, settings.homeBasePath);
  }
  /**
   * Fast detach all leaves using changeLayout (like homepage plugin)
   * This is much faster than iterating and detaching leaves individually
   */
  async detachAllLeaves() {
    var _a, _b;
    const layout = this.app.workspace.getLayout();
    layout.main = {
      "id": "5324373015726ba8",
      "type": "split",
      "children": [{
        "id": "4509724f8bf84da7",
        "type": "tabs",
        "children": [{
          "id": "e7a7b303c61786dc",
          "type": "leaf",
          "state": { "type": "empty", "state": {}, "icon": "lucide-file", "title": "New tab" }
        }]
      }],
      "direction": "vertical"
    };
    layout.active = "e7a7b303c61786dc";
    await this.app.workspace.changeLayout(layout);
    if (import_obsidian8.Platform.isMobile) {
      (_b = (_a = this.app.workspace.rightSplit) == null ? void 0 : _a.updateInfo) == null ? void 0 : _b.call(_a);
    }
  }
  /**
   * Close all leaves in the main workspace except the specified one
   * Simplified approach: iterate all leaves and close those in main workspace
   */
  async closeAllLeavesExcept(exceptLeaf) {
    const leavesToClose = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (leaf === exceptLeaf) {
        return;
      }
      const view = leaf.view;
      let container = null;
      if (view) {
        const viewAny = view;
        container = viewAny.containerEl || null;
      }
      if (!container) {
        const leafAny = leaf;
        container = leafAny.containerEl || null;
      }
      if (container) {
        const rootWorkspace = container.closest(".workspace-split.mod-vertical.mod-root");
        const leftSidebar = container.closest(".workspace-split.mod-left-split");
        const rightSidebar = container.closest(".workspace-split.mod-right-split");
        if (rootWorkspace && !leftSidebar && !rightSidebar) {
          leavesToClose.push(leaf);
        }
      } else {
        if (exceptLeaf === null) {
          try {
            const viewState = leaf.getViewState();
            if (viewState) {
              leavesToClose.push(leaf);
            }
          } catch (e) {
          }
        }
      }
    });
    for (const leaf of leavesToClose) {
      void leaf.detach();
    }
    await new Promise((resolve) => setTimeout(resolve, 200));
  }
  /**
   * Check if the focused tab is the home base
   */
  isFocusedOnHomeBase() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return false;
    const homeBaseFile = getFileByPath(this.app, homeBasePath);
    if (!homeBaseFile) return false;
    return activeFile.path === homeBaseFile.path;
  }
  /**
   * Check if home base file exists
   */
  homeBaseExists() {
    const path = this.plugin.settings.homeBasePath;
    if (!path) return false;
    return getFileByPath(this.app, path) !== null;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Set the active file as home base
   */
  async setActiveFileAsHomeBase() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    if (!isSupportedExtension(activeFile.extension.toLowerCase())) {
      return false;
    }
    this.plugin.settings.homeBasePath = activeFile.path;
    await this.plugin.saveSettings();
    return true;
  }
  /**
   * Check if active file can be set as home base
   */
  canSetActiveFileAsHomeBase() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    return isSupportedExtension(activeFile.extension.toLowerCase());
  }
};

// src/services/new-tab-service.ts
var import_obsidian9 = require("obsidian");
var NewTabService = class {
  constructor(plugin) {
    this.existingLeaves = /* @__PURE__ */ new WeakSet();
    this.isStartup = true;
    this.startupCompleted = false;
    this.plugin = plugin;
    this.app = plugin.app;
  }
  /**
   * Track all existing leaves (for new tab detection)
   * This must be called even when startup is handled elsewhere
   */
  trackExistingLeaves() {
    this.app.workspace.iterateAllLeaves((leaf) => {
      this.existingLeaves.add(leaf);
    });
    this.startupCompleted = true;
    this.isStartup = false;
  }
  /**
   * Initialize the service - called when layout is ready
   */
  initialize() {
    this.trackExistingLeaves();
    void this.handleStartup();
  }
  /**
   * Handle app startup - open home base if needed
   * Only called on actual app startup, not plugin reloads
   */
  async handleStartup() {
    const settings = this.plugin.settings;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (!settings.openOnStartup || !homeBaseSettings.value && homeBaseSettings.type === "File" /* File */) {
      this.startupCompleted = true;
      this.isStartup = false;
      return;
    }
    if (await this.hasUrlParams()) {
      this.startupCompleted = true;
      this.isStartup = false;
      return;
    }
    await new Promise((resolve) => setTimeout(resolve, 500));
    if (!settings.keepExistingTabs) {
      let exceptLeaf = null;
      if (!settings.hideReleaseNotes) {
        const allLeaves = this.app.workspace.getLeavesOfType("markdown");
        for (const leaf of allLeaves) {
          const view = leaf.view;
          const markdownView = view;
          if (markdownView.file) {
            const file = markdownView.file;
            const configDir = this.app.vault.configDir;
            if (file.path.includes("release") || file.path.includes(configDir)) {
              const container = markdownView.containerEl;
              if (container && container.querySelector(".release-notes")) {
                exceptLeaf = leaf;
                break;
              }
            }
          }
        }
      }
      await this.plugin.homeService.closeAllLeavesExcept(exceptLeaf);
      await new Promise((resolve) => setTimeout(resolve, 200));
    }
    if (settings.showStickyHomeIcon) {
      await this.plugin.homeService.openHomeBaseInGhostTab({
        runCommand: true
      });
    } else {
      await this.plugin.homeService.openHomeBase({
        replaceActiveLeaf: false,
        runCommand: true
      });
    }
    this.startupCompleted = true;
    this.isStartup = false;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Check for URL parameters that indicate Obsidian was opened via a link
   * Based on obsidian-homepage implementation
   */
  async hasUrlParams() {
    var _a;
    const windowAny = window;
    const capacitor = windowAny.Capacitor;
    if ((_a = capacitor == null ? void 0 : capacitor.Plugins) == null ? void 0 : _a.App) {
      try {
        const launchUrl = await capacitor.Plugins.App.getLaunchUrl();
        if (launchUrl == null ? void 0 : launchUrl.url) {
          const url = new URL(launchUrl.url);
          const params = Array.from(url.searchParams.keys());
          const action = url.hostname;
          if (["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e))) {
            return true;
          }
        }
      } catch (e) {
      }
    }
    const obsAct = windowAny.OBS_ACT;
    if (obsAct) {
      const params = Object.keys(obsAct);
      const action = obsAct.action;
      if (action && ["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e))) {
        return true;
      }
    }
    return false;
  }
  /**
   * Handle layout change event - check for new empty tabs
   * Based on new-tab-default-page implementation
   */
  handleLayoutChange() {
    if (!this.plugin.settings.replaceNewTab) {
      return;
    }
    if (this.isStartup || !this.startupCompleted) {
      return;
    }
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (this.existingLeaves.has(leaf)) {
        return;
      }
      this.existingLeaves.add(leaf);
      if (!this.isEmptyTab(leaf)) {
        return;
      }
      if (this.plugin.settings.newTabMode === "only-when-empty") {
        if (!this.isOnlyTab(leaf)) {
          return;
        }
      }
      void this.replaceEmptyTab(leaf);
    });
  }
  /**
   * Check if a leaf is an empty tab
   * IMPORTANT: Only returns true if the leaf is truly empty (no file opened)
   * If a file is already opened in the leaf, it's not empty and should NOT be replaced
   */
  isEmptyTab(leaf) {
    if (!leaf.view) return true;
    if (leaf.view.getViewType() !== "empty") {
      return false;
    }
    const viewState = leaf.getViewState();
    if (viewState && viewState.file) {
      return false;
    }
    return true;
  }
  /**
   * Check if this is the only tab in the workspace
   */
  isOnlyTab(leaf) {
    const leafAny = leaf;
    const parent = leafAny.parentSplit;
    if (!parent) return true;
    const children = parent.children;
    if (!children) return true;
    return children.length === 1;
  }
  /**
   * Replace an empty tab with the home base
   */
  async replaceEmptyTab(leaf) {
    await new Promise((resolve) => setTimeout(resolve, 50));
    if (!this.isEmptyTab(leaf)) {
      return;
    }
    await this.plugin.homeService.openInLeaf(leaf);
  }
  /**
   * Force check for empty workspace and open home base
   */
  async openIfEmpty() {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian9.View);
    const activeLeaf = activeView == null ? void 0 : activeView.leaf;
    if (!activeLeaf) return;
    if (this.isEmptyTab(activeLeaf) && this.isOnlyTab(activeLeaf)) {
      await this.plugin.homeService.openInLeaf(activeLeaf);
    }
  }
};

// src/services/sticky-tab-service.ts
var import_obsidian10 = require("obsidian");
init_file_utils();
var STICKY_ICON_CLASS = "home-base-sticky-icon";
var STICKY_ICON_ACTIVE_CLASS = "home-base-sticky-icon-active";
var StickyTabService = class {
  constructor(plugin) {
    this.stickyIconEl = null;
    this.layoutChangeHandler = null;
    this.tabHeaderUpdateTimeout = null;
    this.sidebarObserver = null;
    this.plugin = plugin;
  }
  /**
   * Update the sticky tab icon based on settings
   */
  update() {
    if (import_obsidian10.Platform.isMobile) {
      this.remove();
      this.updateTabHeaders();
      this.updateWorkspaceClass(false);
      return;
    }
    if (this.plugin.settings.showStickyHomeIcon) {
      if (this.stickyIconEl) {
        const iconName = this.plugin.settings.stickyIconName || "home";
        (0, import_obsidian10.setIcon)(this.stickyIconEl, iconName);
      } else {
        this.create();
      }
      this.updateWorkspaceClass(true);
    } else {
      this.remove();
      this.updateTabHeaders();
      this.updateWorkspaceClass(false);
    }
  }
  /**
   * Add/remove CSS class on workspace to conditionally apply styles
   */
  updateWorkspaceClass(enabled) {
    const mainWorkspace = document.querySelector(".workspace-split.mod-vertical.mod-root");
    if (!mainWorkspace) return;
    if (enabled) {
      mainWorkspace.classList.add("home-base-sticky-icon-enabled");
    } else {
      mainWorkspace.classList.remove("home-base-sticky-icon-enabled");
    }
  }
  /**
   * Create the sticky home icon
   */
  create() {
    this.remove();
    this.stickyIconEl = document.createElement("div");
    this.stickyIconEl.className = `${STICKY_ICON_CLASS} clickable-icon`;
    this.stickyIconEl.setAttribute("aria-label", "Open home base");
    this.stickyIconEl.setAttribute("data-tooltip-position", "bottom");
    const iconName = this.plugin.settings.stickyIconName || "home";
    (0, import_obsidian10.setIcon)(this.stickyIconEl, iconName);
    this.stickyIconEl.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      void this.plugin.homeService.openHomeBaseInGhostTab({
        runCommand: true
      }).then(() => {
        setTimeout(() => {
          this.updateTabHeaders();
        }, 150);
      });
    });
    this.stickyIconEl.addEventListener("contextmenu", (e) => {
      e.preventDefault();
      e.stopPropagation();
      const menu = new import_obsidian10.Menu();
      menu.addItem((item) => {
        item.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const picker = new IconPicker(
            this.plugin.app,
            this.plugin.settings.stickyIconName,
            (icon) => {
              void (async () => {
                this.plugin.settings.stickyIconName = icon;
                await this.plugin.saveSettings();
                if (this.stickyIconEl) {
                  (0, import_obsidian10.setIcon)(this.stickyIconEl, icon || "home");
                }
              })();
            }
          );
          picker.open();
        });
      });
      menu.addItem((item) => {
        item.setTitle("Close home base").setIcon("x").onClick(() => {
          void this.closeHomeBase();
        });
      });
      menu.showAtMouseEvent(e);
    });
    const ensureIconInPlace = () => {
      if (!this.stickyIconEl) return;
      const mainWorkspace2 = document.querySelector(".workspace-split.mod-vertical.mod-root");
      if (!mainWorkspace2) return;
      const workspaceTabs = mainWorkspace2.querySelector(".workspace-tabs");
      if (!workspaceTabs) return;
      const existingIcon = workspaceTabs.querySelector(`.${STICKY_ICON_CLASS}`);
      if (existingIcon === this.stickyIconEl) {
        return;
      }
      workspaceTabs.appendChild(this.stickyIconEl);
      this.updateActiveState();
      this.updateTabHeaders();
      this.updateWorkspaceClass(true);
      this.updateIconPositionForSidebar();
      this.watchSidebarState();
    };
    ensureIconInPlace();
    const checkInterval = setInterval(() => {
      if (!this.stickyIconEl || !this.plugin.settings.showStickyHomeIcon) {
        clearInterval(checkInterval);
        return;
      }
      ensureIconInPlace();
    }, 100);
    this.stickyIconEl._checkInterval = checkInterval;
    if (!this.layoutChangeHandler) {
      this.layoutChangeHandler = () => {
        if (this.stickyIconEl && this.plugin.settings.showStickyHomeIcon) {
          ensureIconInPlace();
          this.updateTabHeaders();
        }
      };
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("layout-change", this.layoutChangeHandler)
      );
    }
    const mainWorkspace = document.querySelector(".workspace-split.mod-vertical.mod-root");
    if (mainWorkspace) {
      const containerObserver = new MutationObserver(() => {
        if (!this.stickyIconEl || !this.plugin.settings.showStickyHomeIcon) return;
        const workspaceTabs = mainWorkspace.querySelector(".workspace-tabs");
        if (workspaceTabs) {
          const existingIcon = workspaceTabs.querySelector(`.${STICKY_ICON_CLASS}`);
          if (!existingIcon || existingIcon !== this.stickyIconEl) {
            workspaceTabs.appendChild(this.stickyIconEl);
            this.updateActiveState();
          }
        }
      });
      containerObserver.observe(mainWorkspace, {
        childList: true,
        subtree: false
        // Only watch direct children
      });
      this.stickyIconEl._containerObserver = containerObserver;
    }
  }
  /**
   * Remove the sticky home icon
   */
  remove() {
    if (this.tabHeaderUpdateTimeout) {
      clearTimeout(this.tabHeaderUpdateTimeout);
      this.tabHeaderUpdateTimeout = null;
    }
    if (this.stickyIconEl && this.stickyIconEl._checkInterval) {
      clearInterval(this.stickyIconEl._checkInterval);
    }
    if (this.stickyIconEl && this.stickyIconEl._containerObserver) {
      this.stickyIconEl._containerObserver.disconnect();
    }
    if (this.sidebarObserver) {
      this.sidebarObserver.disconnect();
      this.sidebarObserver = null;
    }
    if (this.stickyIconEl) {
      if (this.stickyIconEl.parentElement) {
        this.stickyIconEl.remove();
      }
      this.stickyIconEl = null;
    }
    document.querySelectorAll(`.${STICKY_ICON_CLASS}`).forEach((el) => {
      const stickyEl = el;
      if (stickyEl._checkInterval) {
        clearInterval(stickyEl._checkInterval);
      }
      if (stickyEl._containerObserver) {
        stickyEl._containerObserver.disconnect();
      }
      el.remove();
    });
  }
  /**
   * Update the active state of the sticky icon
   */
  updateActiveState() {
    if (!this.stickyIconEl) return;
    const isActive = this.plugin.homeService.isFocusedOnHomeBase();
    if (isActive) {
      this.stickyIconEl.classList.add(STICKY_ICON_ACTIVE_CLASS);
    } else {
      this.stickyIconEl.classList.remove(STICKY_ICON_ACTIVE_CLASS);
    }
    this.updateTabHeaders();
  }
  /**
   * Check if the left sidebar is collapsed
   * Based on obsidian-oxygen-settings implementation
   */
  isLeftSidebarCollapsed() {
    const leftSidebar = document.querySelector(".workspace-split.mod-left-split") || document.querySelector(".mod-left-split");
    if (!leftSidebar) return false;
    return leftSidebar.classList.contains("is-sidedock-collapsed");
  }
  /**
   * Update icon position based on sidebar state
   */
  updateIconPositionForSidebar() {
    if (!this.stickyIconEl) return;
    const isCollapsed = this.isLeftSidebarCollapsed();
    const mainWorkspace = document.querySelector(".workspace-split.mod-vertical.mod-root");
    if (isCollapsed) {
      this.stickyIconEl.classList.add("home-base-sticky-icon-sidebar-collapsed");
      if (mainWorkspace) {
        mainWorkspace.classList.add("home-base-sidebar-collapsed");
      }
    } else {
      this.stickyIconEl.classList.remove("home-base-sticky-icon-sidebar-collapsed");
      if (mainWorkspace) {
        mainWorkspace.classList.remove("home-base-sidebar-collapsed");
      }
    }
  }
  /**
   * Watch for sidebar state changes and update icon position
   * Based on obsidian-oxygen-settings implementation
   */
  watchSidebarState() {
    if (this.sidebarObserver) {
      this.sidebarObserver.disconnect();
    }
    const leftSidebar = document.querySelector(".workspace-split.mod-left-split") || document.querySelector(".mod-left-split");
    if (!leftSidebar) return;
    this.sidebarObserver = new MutationObserver((mutations) => {
      let shouldUpdate = false;
      mutations.forEach((mutation) => {
        if (mutation.type === "attributes" && mutation.attributeName === "class") {
          shouldUpdate = true;
        }
      });
      if (shouldUpdate) {
        this.updateIconPositionForSidebar();
      }
    });
    this.sidebarObserver.observe(leftSidebar, {
      attributes: true,
      attributeFilter: ["class"]
    });
  }
  /**
   * Toggle the sticky icon visibility
   */
  async toggle() {
    this.plugin.settings.showStickyHomeIcon = !this.plugin.settings.showStickyHomeIcon;
    await this.plugin.saveSettings();
    this.update();
    this.updateTabHeaders();
  }
  /**
   * Update tab headers to hide/show ghost tab
   * Only works when sticky icon is enabled
   * Debounced to prevent flickering during tab transitions
   */
  updateTabHeaders() {
    if (this.tabHeaderUpdateTimeout) {
      clearTimeout(this.tabHeaderUpdateTimeout);
    }
    this.tabHeaderUpdateTimeout = setTimeout(() => {
      this.tabHeaderUpdateTimeout = null;
      this._doUpdateTabHeaders();
    }, 100);
  }
  /**
   * Internal method that actually updates the tab headers
   */
  _doUpdateTabHeaders() {
    if (!this.plugin.settings.showStickyHomeIcon || !this.plugin.settings.hideHomeTabHeader) {
      document.querySelectorAll(".is-home-base-tab").forEach((el) => {
        el.classList.remove("is-home-base-tab");
      });
      return;
    }
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return;
    requestAnimationFrame(() => {
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        const isHomeBase = leafHasFile(leaf, homeBasePath);
        if (!isHomeBase) {
          const tabHeader2 = this.getTabHeaderForLeaf(leaf);
          if (tabHeader2) {
            tabHeader2.classList.remove("is-home-base-tab");
          }
          return;
        }
        const viewState = leaf.getViewState();
        const isGhostTab = viewState.pinned === true;
        const tabHeader = this.getTabHeaderForLeaf(leaf);
        if (tabHeader) {
          if (isGhostTab) {
            tabHeader.classList.add("is-home-base-tab");
          } else {
            tabHeader.classList.remove("is-home-base-tab");
          }
        }
      });
    });
  }
  /**
   * Get the tab header element for a given leaf
   */
  getTabHeaderForLeaf(leaf) {
    var _a;
    const leafAny = leaf;
    if (leafAny.tabHeaderEl) {
      return leafAny.tabHeaderEl;
    }
    const viewType = (_a = leaf.view) == null ? void 0 : _a.getViewType();
    if (!viewType) return null;
    const activeLeaf = this.plugin.app.workspace.getMostRecentLeaf();
    const isActive = leaf === activeLeaf;
    const tabHeaders = document.querySelectorAll(`.workspace-tab-header[data-type="${viewType}"]`);
    if (isActive) {
      const activeHeader = document.querySelector(".workspace-tab-header.is-active");
      if (activeHeader && activeHeader.getAttribute("data-type") === viewType) {
        return activeHeader;
      }
    }
    for (const header of Array.from(tabHeaders)) {
      const headerEl = header;
      const headerElWithLeaf = headerEl;
      const headerLeaf = headerElWithLeaf.leaf;
      if (headerLeaf === leaf) {
        return headerEl;
      }
    }
    if (tabHeaders.length === 1) {
      return tabHeaders[0];
    }
    if (isActive) {
      const activeHeader = document.querySelector(".workspace-tab-header.is-active");
      if (activeHeader) {
        return activeHeader;
      }
    }
    return null;
  }
  /**
   * Close the home base tab
   */
  async closeHomeBase() {
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return;
    const { getFileByPath: getFileByPath2 } = await Promise.resolve().then(() => (init_file_utils(), file_utils_exports));
    const homeBaseFile = getFileByPath2(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (homeBaseLeaf) {
      homeBaseLeaf.detach();
      this.updateTabHeaders();
    }
  }
  /**
   * Pin the home base tab
   */
  pinHomeBaseTab() {
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (homeBaseLeaf) {
      homeBaseLeaf.setPinned(true);
    }
  }
  /**
   * Unpin the home base tab
   */
  unpinHomeBaseTab() {
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (homeBaseLeaf) {
      homeBaseLeaf.setPinned(false);
    }
  }
  /**
   * Check if the home base tab is pinned
   */
  isHomeBaseTabPinned() {
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return false;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return false;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (!homeBaseLeaf) return false;
    const viewState = homeBaseLeaf.getViewState();
    return viewState.pinned === true;
  }
};

// src/services/mobile-button-service.ts
var import_obsidian11 = require("obsidian");
var MOBILE_HOME_CLASS = "home-base-mobile-enabled";
var MobileButtonService = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Update the mobile button based on settings
   */
  update() {
    if (!import_obsidian11.Platform.isMobile) {
      this.remove();
      return;
    }
    if (this.plugin.settings.replaceMobileNewTab) {
      this.apply();
    } else {
      this.remove();
    }
  }
  /**
   * Apply the mobile button replacement
   */
  apply() {
    document.body.classList.add(MOBILE_HOME_CLASS);
  }
  /**
   * Remove the mobile button replacement
   */
  remove() {
    document.body.classList.remove(MOBILE_HOME_CLASS);
  }
};

// src/main.ts
var HOME_ICON = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>`;
var HomeBasePlugin = class extends import_obsidian12.Plugin {
  constructor() {
    super(...arguments);
    // Release notes tracking
    this.newRelease = false;
    // Track if patched opening behavior already ran
    this.openingBehaviorRan = false;
    // Track if we're currently in startup (to prevent handleOpenWhenEmpty from firing)
    this.isStartup = true;
  }
  async onload() {
    await this.loadSettings();
    await this.migrateLegacySettings();
    this.patchOpeningBehavior();
    (0, import_obsidian12.addIcon)("home-base", HOME_ICON);
    this.homeService = new HomeBaseService(this);
    this.newTabService = new NewTabService(this);
    this.stickyTabService = new StickyTabService(this);
    this.mobileButtonService = new MobileButtonService(this);
    this.addRibbonIcon("home", "Open home base", () => {
      void this.homeService.openHomeBase({
        replaceActiveLeaf: false,
        runCommand: true
      });
    });
    this.registerCommands();
    this.addSettingTab(new HomeBaseSettingTab(this.app, this));
    this.app.workspace.onLayoutReady(() => {
      setTimeout(() => {
        if (this.isSettingsModalOpen()) {
          this.updateStickyTabIcon();
          this.updateMobileButton();
          this.stickyTabService.updateTabHeaders();
          return;
        }
        if (!this.openingBehaviorRan) {
          this.newTabService.initialize();
        } else {
          this.newTabService.trackExistingLeaves();
        }
        setTimeout(() => {
          this.isStartup = false;
        }, 1e3);
        this.updateStickyTabIcon();
        this.updateMobileButton();
        this.stickyTabService.updateTabHeaders();
      }, 100);
    });
    this.registerEvent(
      this.app.workspace.on("layout-change", async () => {
        this.newTabService.handleLayoutChange();
        if (this.settings.revertView) {
          await this.homeService.revertView();
        }
        setTimeout(() => {
          this.stickyTabService.updateActiveState();
          this.stickyTabService.updateTabHeaders();
          this.stickyTabService.updateIconPositionForSidebar();
        }, 150);
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", () => {
        setTimeout(() => {
          this.stickyTabService.updateActiveState();
          this.stickyTabService.updateTabHeaders();
        }, 100);
      })
    );
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        setTimeout(() => {
          this.stickyTabService.updateTabHeaders();
        }, 100);
      })
    );
  }
  onunload() {
    this.unpatchReleaseNotes();
    this.unpatchOpeningBehavior();
    this.stickyTabService.remove();
    this.mobileButtonService.remove();
  }
  /**
   * Register plugin commands
   */
  registerCommands() {
    this.addCommand({
      id: "open",
      name: "Open",
      callback: () => {
        const homeBaseSettings = this.getHomeBaseSettings();
        if (!homeBaseSettings.value && homeBaseSettings.type === "File" /* File */) {
          new import_obsidian12.Notice("No home base configured. Set one in settings.");
          return;
        }
        void this.homeService.openHomeBase({
          replaceActiveLeaf: false,
          runCommand: true
        });
      }
    });
    this.addCommand({
      id: "set-current-file",
      name: "Set current file as home",
      checkCallback: (checking) => {
        if (!this.homeService.canSetActiveFileAsHomeBase()) {
          return false;
        }
        if (!checking) {
          void this.homeService.setActiveFileAsHomeBase().then((success) => {
            if (success) {
              const activeFile = this.app.workspace.getActiveFile();
              new import_obsidian12.Notice(`Home base set to "${activeFile == null ? void 0 : activeFile.name}"`);
            }
          });
        }
        return true;
      }
    });
    this.addCommand({
      id: "toggle-sticky-icon",
      name: "Toggle sticky home icon",
      callback: async () => {
        await this.stickyTabService.toggle();
        const state = this.settings.showStickyHomeIcon ? "enabled" : "disabled";
        new import_obsidian12.Notice(`Sticky home icon ${state}`);
      }
    });
    this.addCommand({
      id: "close",
      name: "Close",
      callback: async () => {
        await this.stickyTabService.closeHomeBase();
      }
    });
  }
  /**
   * Load plugin settings
   */
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data != null ? data : {});
  }
  /**
   * Migrate legacy settings to new format
   */
  async migrateLegacySettings() {
    let needsSave = false;
    if (this.settings.homeBasePath && !this.settings.homeBaseValue) {
      this.settings.homeBaseType = "File" /* File */;
      this.settings.homeBaseValue = this.settings.homeBasePath;
      needsSave = true;
    }
    if (this.settings.keepExistingTabs !== void 0) {
      if (this.settings.openMode === DEFAULT_SETTINGS.openMode) {
        this.settings.openMode = this.settings.keepExistingTabs ? "retain" : "replace-all";
        needsSave = true;
      }
    }
    if (this.settings.mobileHomeBasePath && !this.settings.mobileHomeBaseValue) {
      this.settings.mobileHomeBaseType = "File" /* File */;
      this.settings.mobileHomeBaseValue = this.settings.mobileHomeBasePath;
      needsSave = true;
    }
    if (needsSave) {
      await this.saveSettings();
    }
  }
  /**
   * Get the active home base settings (mobile or desktop)
   */
  getHomeBaseSettings() {
    if (this.settings.separateMobile && import_obsidian12.Platform.isMobile) {
      return {
        type: this.settings.mobileHomeBaseType || "File" /* File */,
        value: this.settings.mobileHomeBaseValue || this.settings.mobileHomeBasePath || "",
        path: this.settings.mobileHomeBasePath || this.settings.mobileHomeBaseValue || ""
      };
    }
    return {
      type: this.settings.homeBaseType || "File" /* File */,
      value: this.settings.homeBaseValue || this.settings.homeBasePath || "",
      path: this.settings.homeBasePath || this.settings.homeBaseValue || ""
    };
  }
  /**
   * Save plugin settings
   */
  async saveSettings() {
    await this.saveData(this.settings);
  }
  /**
   * Update the sticky tab icon based on current settings
   */
  updateStickyTabIcon() {
    this.stickyTabService.update();
    this.stickyTabService.updateTabHeaders();
  }
  /**
   * Update the mobile button based on current settings
   */
  updateMobileButton() {
    this.mobileButtonService.update();
  }
  /**
   * Check if we should skip startup logic (e.g., plugin reload, settings modal open)
   * This prevents destructive behavior when the plugin is reloaded or settings are open
   */
  shouldSkipStartupLogic() {
    if (this.isSettingsModalOpen()) {
      return true;
    }
    const hasOpenFiles = this.app.workspace.getLeavesOfType("markdown").length > 0 || this.app.workspace.getLeavesOfType("canvas").length > 0 || this.app.workspace.getLeavesOfType("bases").length > 0 || this.app.workspace.getLeavesOfType("empty").length > 0;
    return hasOpenFiles;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Patch runOpeningBehavior for fast startup (like homepage plugin)
   */
  patchOpeningBehavior() {
    this.app.nvOrig_runOpeningBehavior = this.app.runOpeningBehavior;
    this.app.runOpeningBehavior = async (path) => {
      const openInitially = this.settings.openOnStartup && !await this.hasUrlParams();
      if (openInitially) {
        this.openingBehaviorRan = true;
        const mode = this.settings.openMode;
        if (mode === "replace-all") {
          await this.homeService.detachAllLeaves();
        }
        if (this.settings.showStickyHomeIcon) {
          await this.homeService.openHomeBaseInGhostTab({
            runCommand: true
          });
        } else {
          await this.homeService.openHomeBaseWithMode(mode, true);
        }
      } else {
        if (this.app.nvOrig_runOpeningBehavior) {
          await this.app.nvOrig_runOpeningBehavior(path);
        }
      }
      this.unpatchReleaseNotes();
    };
  }
  /**
   * Unpatch runOpeningBehavior
   */
  unpatchOpeningBehavior() {
    if (this.app.nvOrig_runOpeningBehavior) {
      this.app.runOpeningBehavior = this.app.nvOrig_runOpeningBehavior;
    }
  }
  /**
   * Patch showReleaseNotes to track new releases
   */
  patchReleaseNotes() {
    const appAny = this.app;
    appAny.nvOrig_showReleaseNotes = appAny.showReleaseNotes;
    appAny.showReleaseNotes = () => {
      this.newRelease = true;
    };
  }
  /**
   * Unpatch showReleaseNotes
   */
  unpatchReleaseNotes() {
    var _a;
    const appAny = this.app;
    if (this.newRelease && !this.settings.hideReleaseNotes) {
      (_a = appAny.nvOrig_showReleaseNotes) == null ? void 0 : _a.call(appAny);
    }
    if (appAny.nvOrig_showReleaseNotes) {
      appAny.showReleaseNotes = appAny.nvOrig_showReleaseNotes;
    }
  }
  /**
   * Check if a home base type has its required plugin enabled
   */
  hasRequiredPlugin(type) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    switch (type) {
      case "Workspace" /* Workspace */:
        return ((_c = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces) == null ? void 0 : _c.enabled) === true;
      case "Graph view" /* Graph */:
        return ((_f = (_e = (_d = this.app.internalPlugins) == null ? void 0 : _d.plugins) == null ? void 0 : _e.graph) == null ? void 0 : _f.enabled) === true;
      case "Journal" /* Journal */:
        return !!((_h = (_g = this.app.plugins) == null ? void 0 : _g.plugins) == null ? void 0 : _h["journals"]);
      case "Daily Note" /* DailyNote */:
      case "Weekly Note" /* WeeklyNote */:
      case "Monthly Note" /* MonthlyNote */:
      case "Yearly Note" /* YearlyNote */:
        return this.hasRequiredPeriodicity(type);
      default:
        return true;
    }
  }
  /**
   * Check if periodic notes are available for the given type
   */
  hasRequiredPeriodicity(type) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s;
    if (type === "Daily Note" /* DailyNote */) {
      const coreDailyNotes = ((_c = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["daily-notes"]) == null ? void 0 : _c.enabled) === true;
      if (coreDailyNotes) {
        return true;
      }
      const periodicNotes2 = (_e = (_d = this.app.plugins) == null ? void 0 : _d.plugins) == null ? void 0 : _e["periodic-notes"];
      if (periodicNotes2) {
        const version2 = ((_f = periodicNotes2 == null ? void 0 : periodicNotes2.manifest) == null ? void 0 : _f.version) || "0";
        const isLegacy2 = version2.startsWith("0");
        if (isLegacy2) {
          return ((_h = (_g = periodicNotes2 == null ? void 0 : periodicNotes2.settings) == null ? void 0 : _g["daily"]) == null ? void 0 : _h.enabled) === true;
        } else {
          const calendarSet = (_j = (_i = periodicNotes2 == null ? void 0 : periodicNotes2.calendarSetManager) == null ? void 0 : _i.getActiveSet) == null ? void 0 : _j.call(_i);
          return ((_k = calendarSet == null ? void 0 : calendarSet["day"]) == null ? void 0 : _k.enabled) === true;
        }
      }
      return false;
    }
    const periodicNotes = (_m = (_l = this.app.plugins) == null ? void 0 : _l.plugins) == null ? void 0 : _m["periodic-notes"];
    if (!periodicNotes) return false;
    const version = ((_n = periodicNotes == null ? void 0 : periodicNotes.manifest) == null ? void 0 : _n.version) || "0";
    const isLegacy = version.startsWith("0");
    if (isLegacy) {
      const periodMap = {
        ["Weekly Note" /* WeeklyNote */]: "weekly",
        ["Monthly Note" /* MonthlyNote */]: "monthly",
        ["Yearly Note" /* YearlyNote */]: "yearly"
      };
      const adjective = periodMap[type];
      if (!adjective) return false;
      return ((_p = (_o = periodicNotes == null ? void 0 : periodicNotes.settings) == null ? void 0 : _o[adjective]) == null ? void 0 : _p.enabled) === true;
    } else {
      const nounMap = {
        ["Weekly Note" /* WeeklyNote */]: "week",
        ["Monthly Note" /* MonthlyNote */]: "month",
        ["Yearly Note" /* YearlyNote */]: "year"
      };
      const noun = nounMap[type];
      if (!noun) return false;
      const calendarSet = (_r = (_q = periodicNotes == null ? void 0 : periodicNotes.calendarSetManager) == null ? void 0 : _q.getActiveSet) == null ? void 0 : _r.call(_q);
      return ((_s = calendarSet == null ? void 0 : calendarSet[noun]) == null ? void 0 : _s.enabled) === true;
    }
  }
  /**
   * Check if URL params indicate a file/workspace should be opened (skip homepage)
   */
  async hasUrlParams() {
    if (typeof window !== "undefined" && window.OBS_ACT) {
      const params = Object.keys(window.OBS_ACT);
      const action = window.OBS_ACT.action;
      return action !== void 0 && ["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e));
    }
    return false;
  }
  // "Open when empty" feature removed - redundant with "New tab replacement: only when empty"
  // Since Obsidian auto-creates an empty tab when you close the last one, they do the same thing
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3V0aWxzL2ZpbGUtdXRpbHMudHMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZl84ZDlmYzI0YjBmYzYyMmQ5NGZkMTFmYTVlOWIxODViMy9ub2RlX21vZHVsZXMvb2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlL2Rpc3QvbWFpbi5qcyIsICJzcmMvbWFpbi50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL3VpL3NldHRpbmdzLXRhYi50cyIsICJzcmMvdXRpbHMvc2V0dGluZ3MtY29tcGF0LnRzIiwgInNyYy91aS9maWxlLXN1Z2dlc3QudHMiLCAic3JjL3VpL2NvbW1hbmQtc3VnZ2VzdC50cyIsICJzcmMvdWkvaWNvbi1waWNrZXIudHMiLCAic3JjL3NlcnZpY2VzL2hvbWUtc2VydmljZS50cyIsICJzcmMvdXRpbHMvaG9tZWJhc2UtcmVzb2x2ZXIudHMiLCAic3JjL3NlcnZpY2VzL25ldy10YWItc2VydmljZS50cyIsICJzcmMvc2VydmljZXMvc3RpY2t5LXRhYi1zZXJ2aWNlLnRzIiwgInNyYy9zZXJ2aWNlcy9tb2JpbGUtYnV0dG9uLXNlcnZpY2UudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxyXG4gKiBGaWxlIFV0aWxpdGllc1xyXG4gKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBmaWxlIHR5cGUgZGV0ZWN0aW9uIGFuZCBoYW5kbGluZ1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogU3VwcG9ydGVkIGZpbGUgZXh0ZW5zaW9ucyBmb3IgaG9tZSBiYXNlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgU1VQUE9SVEVEX0VYVEVOU0lPTlMgPSBbJ21kJywgJ21keCcsICdjYW52YXMnLCAnYmFzZSddIGFzIGNvbnN0O1xyXG5leHBvcnQgdHlwZSBTdXBwb3J0ZWRFeHRlbnNpb24gPSB0eXBlb2YgU1VQUE9SVEVEX0VYVEVOU0lPTlNbbnVtYmVyXTtcclxuXHJcbi8qKlxyXG4gKiBWaWV3IHR5cGVzIGNvcnJlc3BvbmRpbmcgdG8gZmlsZSBleHRlbnNpb25zXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVklFV19UWVBFX01BUDogUmVjb3JkPFN1cHBvcnRlZEV4dGVuc2lvbiwgc3RyaW5nPiA9IHtcclxuXHQnbWQnOiAnbWFya2Rvd24nLFxyXG5cdCdtZHgnOiAnbWFya2Rvd24nLFxyXG5cdCdjYW52YXMnOiAnY2FudmFzJyxcclxuXHQnYmFzZSc6ICdiYXNlcycsXHJcbn07XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGV4dGVuc2lvbiBpcyBzdXBwb3J0ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1N1cHBvcnRlZEV4dGVuc2lvbihleHRlbnNpb246IHN0cmluZyk6IGV4dGVuc2lvbiBpcyBTdXBwb3J0ZWRFeHRlbnNpb24ge1xyXG5cdHJldHVybiBTVVBQT1JURURfRVhURU5TSU9OUy5pbmNsdWRlcyhleHRlbnNpb24gYXMgU3VwcG9ydGVkRXh0ZW5zaW9uKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgZmlsZSBleHRlbnNpb24gZnJvbSBhIHBhdGhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlRXh0ZW5zaW9uKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Y29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcuJyk7XHJcblx0cmV0dXJuIHBhcnRzLmxlbmd0aCA+IDEgPyAocGFydHNbcGFydHMubGVuZ3RoIC0gMV0gPz8gJycpLnRvTG93ZXJDYXNlKCkgOiAnJztcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgdmlldyB0eXBlIGZvciBhIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRWaWV3VHlwZUZvckZpbGUoZmlsZTogVEZpbGUpOiBzdHJpbmcge1xyXG5cdGNvbnN0IGV4dCA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XHJcblx0aWYgKGlzU3VwcG9ydGVkRXh0ZW5zaW9uKGV4dCkpIHtcclxuXHRcdHJldHVybiBWSUVXX1RZUEVfTUFQW2V4dF07XHJcblx0fVxyXG5cdHJldHVybiAnbWFya2Rvd24nOyAvLyBEZWZhdWx0IGZhbGxiYWNrXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYSBtYXJrZG93bi1saWtlIGZpbGUgKG1kIG9yIG1keClcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc01hcmtkb3duTGlrZShmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IGV4dCA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XHJcblx0cmV0dXJuIGV4dCA9PT0gJ21kJyB8fCBleHQgPT09ICdtZHgnO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGFuIE1EWCBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNNZHhGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdtZHgnO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGEgY2FudmFzIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0NhbnZhc0ZpbGUoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSA9PT0gJ2NhbnZhcyc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYSBiYXNlIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2VGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdiYXNlJztcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhIGZpbGUgYnkgcGF0aCwgdHJ5aW5nIHdpdGggYW5kIHdpdGhvdXQgZXh0ZW5zaW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZUJ5UGF0aChhcHA6IEFwcCwgcGF0aDogc3RyaW5nKTogVEZpbGUgfCBudWxsIHtcclxuXHQvLyBUcnkgZXhhY3QgcGF0aCBmaXJzdFxyXG5cdGNvbnN0IGV4YWN0TWF0Y2ggPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xyXG5cdGlmIChleGFjdE1hdGNoIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdHJldHVybiBleGFjdE1hdGNoO1xyXG5cdH1cclxuXHJcblx0Ly8gVHJ5IHVzaW5nIG1ldGFkYXRhQ2FjaGUgZm9yIGZ1enp5IG1hdGNoaW5nXHJcblx0Y29uc3QgZmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHBhdGgsICcvJyk7XHJcblx0cmV0dXJuIGZpbGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUcmltIHRoZSBmaWxlIGV4dGVuc2lvbiBmcm9tIGEgcGF0aCBmb3IgY29tcGFyaXNvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHRyaW1GaWxlRXh0ZW5zaW9uKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Y29uc3QgbGFzdERvdCA9IHBhdGgubGFzdEluZGV4T2YoJy4nKTtcclxuXHRpZiAobGFzdERvdCA+IDApIHtcclxuXHRcdGNvbnN0IGV4dCA9IHBhdGguc2xpY2UobGFzdERvdCArIDEpLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRpZiAoU1VQUE9SVEVEX0VYVEVOU0lPTlMuaW5jbHVkZXMoZXh0IGFzIFN1cHBvcnRlZEV4dGVuc2lvbikpIHtcclxuXHRcdFx0cmV0dXJuIHBhdGguc2xpY2UoMCwgbGFzdERvdCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBwYXRoO1xyXG59XHJcblxyXG4vKipcclxuICogQ29tcGFyZSB0d28gcGF0aHMsIGlnbm9yaW5nIGNhc2UgYW5kIGV4dGVuc2lvbiBkaWZmZXJlbmNlc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHBhdGhzRXF1YWwocGF0aDE6IHN0cmluZywgcGF0aDI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IG5vcm0xID0gdHJpbUZpbGVFeHRlbnNpb24ocGF0aDEpLnRvTG93ZXJDYXNlKCk7XHJcblx0Y29uc3Qgbm9ybTIgPSB0cmltRmlsZUV4dGVuc2lvbihwYXRoMikudG9Mb3dlckNhc2UoKTtcclxuXHRyZXR1cm4gbm9ybTEgPT09IG5vcm0yO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBsZWFmIGlzIHNob3dpbmcgYSBzcGVjaWZpYyBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbGVhZkhhc0ZpbGUobGVhZjogV29ya3NwYWNlTGVhZiwgZmlsZVBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IHN0YXRlID0gbGVhZi52aWV3Py5nZXRTdGF0ZT8uKCk7XHJcblx0Y29uc3QgbGVhZkZpbGUgPSBzdGF0ZT8uZmlsZSBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcblx0XHJcblx0aWYgKCFsZWFmRmlsZSkgcmV0dXJuIGZhbHNlO1xyXG5cdFxyXG5cdHJldHVybiBwYXRoc0VxdWFsKGxlYWZGaWxlLCBmaWxlUGF0aCk7XHJcbn1cclxuIiwgIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIG9ic2lkaWFuID0gcmVxdWlyZSgnb2JzaWRpYW4nKTtcblxuY29uc3QgREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWS1NTS1ERFwiO1xuY29uc3QgREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQgPSBcImdnZ2ctW1ddd3dcIjtcbmNvbnN0IERFRkFVTFRfTU9OVEhMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWS1NTVwiO1xuY29uc3QgREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQgPSBcIllZWVktW1FdUVwiO1xuY29uc3QgREVGQVVMVF9ZRUFSTFlfTk9URV9GT1JNQVQgPSBcIllZWVlcIjtcblxuZnVuY3Rpb24gc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKHBlcmlvZGljaXR5KSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gd2luZG93LmFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LltwZXJpb2RpY2l0eV0/LmVuYWJsZWQ7XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgZGFpbHktbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldERhaWx5Tm90ZVNldHRpbmdzKCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHsgaW50ZXJuYWxQbHVnaW5zLCBwbHVnaW5zIH0gPSB3aW5kb3cuYXBwO1xuICAgICAgICBpZiAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwiZGFpbHlcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZm9ybWF0LCBmb2xkZXIsIHRlbXBsYXRlIH0gPSBwbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8uZGFpbHkgfHwge307XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0IHx8IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICAgICAgZm9sZGVyOiBmb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgZm9sZGVyLCBmb3JtYXQsIHRlbXBsYXRlIH0gPSBpbnRlcm5hbFBsdWdpbnMuZ2V0UGx1Z2luQnlJZChcImRhaWx5LW5vdGVzXCIpPy5pbnN0YW5jZT8ub3B0aW9ucyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0IHx8IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IGZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBkYWlseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGB3ZWVrbHktbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldFdlZWtseU5vdGVTZXR0aW5ncygpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgICAgICBjb25zdCBjYWxlbmRhclNldHRpbmdzID0gcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJjYWxlbmRhclwiKT8ub3B0aW9ucztcbiAgICAgICAgY29uc3QgcGVyaW9kaWNOb3Rlc1NldHRpbmdzID0gcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LndlZWtseTtcbiAgICAgICAgaWYgKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcIndlZWtseVwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHBlcmlvZGljTm90ZXNTZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICAgICAgZm9sZGVyOiBwZXJpb2RpY05vdGVzU2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcGVyaW9kaWNOb3Rlc1NldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBjYWxlbmRhclNldHRpbmdzIHx8IHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy53ZWVrbHlOb3RlRm9ybWF0IHx8IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBzZXR0aW5ncy53ZWVrbHlOb3RlRm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy53ZWVrbHlOb3RlVGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSB3ZWVrbHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgcGVyaW9kaWMtbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldE1vbnRobHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcIm1vbnRobHlcIikgJiZcbiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy5tb250aGx5KSB8fFxuICAgICAgICAgICAge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX01PTlRITFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBtb250aGx5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYHBlcmlvZGljLW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcInF1YXJ0ZXJseVwiKSAmJlxuICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LnF1YXJ0ZXJseSkgfHxcbiAgICAgICAgICAgIHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBxdWFydGVybHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgcGVyaW9kaWMtbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldFllYXJseU5vdGVTZXR0aW5ncygpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBsdWdpbk1hbmFnZXIgPSB3aW5kb3cuYXBwLnBsdWdpbnM7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwieWVhcmx5XCIpICYmXG4gICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8ueWVhcmx5KSB8fFxuICAgICAgICAgICAge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogc2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy50ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiTm8gY3VzdG9tIHllYXJseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cblxuLy8gQ3JlZGl0OiBAY3JlYXRpb25peC9wYXRoLmpzXG5mdW5jdGlvbiBqb2luKC4uLnBhcnRTZWdtZW50cykge1xuICAgIC8vIFNwbGl0IHRoZSBpbnB1dHMgaW50byBhIGxpc3Qgb2YgcGF0aCBjb21tYW5kcy5cbiAgICBsZXQgcGFydHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IHBhcnRTZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgcGFydHMgPSBwYXJ0cy5jb25jYXQocGFydFNlZ21lbnRzW2ldLnNwbGl0KFwiL1wiKSk7XG4gICAgfVxuICAgIC8vIEludGVycHJldCB0aGUgcGF0aCBjb21tYW5kcyB0byBnZXQgdGhlIG5ldyByZXNvbHZlZCBwYXRoLlxuICAgIGNvbnN0IG5ld1BhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzW2ldO1xuICAgICAgICAvLyBSZW1vdmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlc1xuICAgICAgICAvLyBBbHNvIHJlbW92ZSBcIi5cIiBzZWdtZW50c1xuICAgICAgICBpZiAoIXBhcnQgfHwgcGFydCA9PT0gXCIuXCIpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgLy8gUHVzaCBuZXcgcGF0aCBzZWdtZW50cy5cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbmV3UGFydHMucHVzaChwYXJ0KTtcbiAgICB9XG4gICAgLy8gUHJlc2VydmUgdGhlIGluaXRpYWwgc2xhc2ggaWYgdGhlcmUgd2FzIG9uZS5cbiAgICBpZiAocGFydHNbMF0gPT09IFwiXCIpXG4gICAgICAgIG5ld1BhcnRzLnVuc2hpZnQoXCJcIik7XG4gICAgLy8gVHVybiBiYWNrIGludG8gYSBzaW5nbGUgc3RyaW5nIHBhdGguXG4gICAgcmV0dXJuIG5ld1BhcnRzLmpvaW4oXCIvXCIpO1xufVxuZnVuY3Rpb24gYmFzZW5hbWUoZnVsbFBhdGgpIHtcbiAgICBsZXQgYmFzZSA9IGZ1bGxQYXRoLnN1YnN0cmluZyhmdWxsUGF0aC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICBpZiAoYmFzZS5sYXN0SW5kZXhPZihcIi5cIikgIT0gLTEpXG4gICAgICAgIGJhc2UgPSBiYXNlLnN1YnN0cmluZygwLCBiYXNlLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgcmV0dXJuIGJhc2U7XG59XG5hc3luYyBmdW5jdGlvbiBlbnN1cmVGb2xkZXJFeGlzdHMocGF0aCkge1xuICAgIGNvbnN0IGRpcnMgPSBwYXRoLnJlcGxhY2UoL1xcXFwvZywgXCIvXCIpLnNwbGl0KFwiL1wiKTtcbiAgICBkaXJzLnBvcCgpOyAvLyByZW1vdmUgYmFzZW5hbWVcbiAgICBpZiAoZGlycy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZGlyID0gam9pbiguLi5kaXJzKTtcbiAgICAgICAgaWYgKCF3aW5kb3cuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChkaXIpKSB7XG4gICAgICAgICAgICBhd2FpdCB3aW5kb3cuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihkaXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gZ2V0Tm90ZVBhdGgoZGlyZWN0b3J5LCBmaWxlbmFtZSkge1xuICAgIGlmICghZmlsZW5hbWUuZW5kc1dpdGgoXCIubWRcIikpIHtcbiAgICAgICAgZmlsZW5hbWUgKz0gXCIubWRcIjtcbiAgICB9XG4gICAgY29uc3QgcGF0aCA9IG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoam9pbihkaXJlY3RvcnksIGZpbGVuYW1lKSk7XG4gICAgYXdhaXQgZW5zdXJlRm9sZGVyRXhpc3RzKHBhdGgpO1xuICAgIHJldHVybiBwYXRoO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKSB7XG4gICAgY29uc3QgeyBtZXRhZGF0YUNhY2hlLCB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBvYnNpZGlhbi5ub3JtYWxpemVQYXRoKHRlbXBsYXRlKTtcbiAgICBpZiAodGVtcGxhdGVQYXRoID09PSBcIi9cIikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtcIlwiLCBudWxsXSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlRmlsZSA9IG1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QodGVtcGxhdGVQYXRoLCBcIlwiKTtcbiAgICAgICAgY29uc3QgY29udGVudHMgPSBhd2FpdCB2YXVsdC5jYWNoZWRSZWFkKHRlbXBsYXRlRmlsZSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IElGb2xkSW5mbyA9IHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIubG9hZCh0ZW1wbGF0ZUZpbGUpO1xuICAgICAgICByZXR1cm4gW2NvbnRlbnRzLCBJRm9sZEluZm9dO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byByZWFkIHRoZSBkYWlseSBub3RlIHRlbXBsYXRlICcke3RlbXBsYXRlUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIkZhaWxlZCB0byByZWFkIHRoZSBkYWlseSBub3RlIHRlbXBsYXRlXCIpO1xuICAgICAgICByZXR1cm4gW1wiXCIsIG51bGxdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBkYXRlVUlEIGlzIGEgd2F5IG9mIHdlZWtseSBpZGVudGlmeWluZyBkYWlseS93ZWVrbHkvbW9udGhseSBub3Rlcy5cbiAqIFRoZXkgYXJlIHByZWZpeGVkIHdpdGggdGhlIGdyYW51bGFyaXR5IHRvIGF2b2lkIGFtYmlndWl0eS5cbiAqL1xuZnVuY3Rpb24gZ2V0RGF0ZVVJRChkYXRlLCBncmFudWxhcml0eSA9IFwiZGF5XCIpIHtcbiAgICBjb25zdCB0cyA9IGRhdGUuY2xvbmUoKS5zdGFydE9mKGdyYW51bGFyaXR5KS5mb3JtYXQoKTtcbiAgICByZXR1cm4gYCR7Z3JhbnVsYXJpdHl9LSR7dHN9YDtcbn1cbmZ1bmN0aW9uIHJlbW92ZUVzY2FwZWRDaGFyYWN0ZXJzKGZvcm1hdCkge1xuICAgIHJldHVybiBmb3JtYXQucmVwbGFjZSgvXFxbW15cXF1dKlxcXS9nLCBcIlwiKTsgLy8gcmVtb3ZlIGV2ZXJ5dGhpbmcgd2l0aGluIGJyYWNrZXRzXG59XG4vKipcbiAqIFhYWDogV2hlbiBwYXJzaW5nIGRhdGVzIHRoYXQgY29udGFpbiBib3RoIHdlZWsgbnVtYmVycyBhbmQgbW9udGhzLFxuICogTW9tZW50IGNob3NlcyB0byBpZ25vcmUgdGhlIHdlZWsgbnVtYmVycy4gRm9yIHRoZSB3ZWVrIGRhdGVVSUQsIHdlXG4gKiB3YW50IHRoZSBvcHBvc2l0ZSBiZWhhdmlvci4gU3RyaXAgdGhlIE1NTSBmcm9tIHRoZSBmb3JtYXQgdG8gcGF0Y2guXG4gKi9cbmZ1bmN0aW9uIGlzRm9ybWF0QW1iaWd1b3VzKGZvcm1hdCwgZ3JhbnVsYXJpdHkpIHtcbiAgICBpZiAoZ3JhbnVsYXJpdHkgPT09IFwid2Vla1wiKSB7XG4gICAgICAgIGNvbnN0IGNsZWFuRm9ybWF0ID0gcmVtb3ZlRXNjYXBlZENoYXJhY3RlcnMoZm9ybWF0KTtcbiAgICAgICAgcmV0dXJuICgvd3sxLDJ9L2kudGVzdChjbGVhbkZvcm1hdCkgJiZcbiAgICAgICAgICAgICgvTXsxLDR9Ly50ZXN0KGNsZWFuRm9ybWF0KSB8fCAvRHsxLDR9Ly50ZXN0KGNsZWFuRm9ybWF0KSkpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXREYXRlRnJvbUZpbGUoZmlsZSwgZ3JhbnVsYXJpdHkpIHtcbiAgICByZXR1cm4gZ2V0RGF0ZUZyb21GaWxlbmFtZShmaWxlLmJhc2VuYW1lLCBncmFudWxhcml0eSk7XG59XG5mdW5jdGlvbiBnZXREYXRlRnJvbVBhdGgocGF0aCwgZ3JhbnVsYXJpdHkpIHtcbiAgICByZXR1cm4gZ2V0RGF0ZUZyb21GaWxlbmFtZShiYXNlbmFtZShwYXRoKSwgZ3JhbnVsYXJpdHkpO1xufVxuZnVuY3Rpb24gZ2V0RGF0ZUZyb21GaWxlbmFtZShmaWxlbmFtZSwgZ3JhbnVsYXJpdHkpIHtcbiAgICBjb25zdCBnZXRTZXR0aW5ncyA9IHtcbiAgICAgICAgZGF5OiBnZXREYWlseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgd2VlazogZ2V0V2Vla2x5Tm90ZVNldHRpbmdzLFxuICAgICAgICBtb250aDogZ2V0TW9udGhseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgcXVhcnRlcjogZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB5ZWFyOiBnZXRZZWFybHlOb3RlU2V0dGluZ3MsXG4gICAgfTtcbiAgICBjb25zdCBmb3JtYXQgPSBnZXRTZXR0aW5nc1tncmFudWxhcml0eV0oKS5mb3JtYXQuc3BsaXQoXCIvXCIpLnBvcCgpO1xuICAgIGNvbnN0IG5vdGVEYXRlID0gd2luZG93Lm1vbWVudChmaWxlbmFtZSwgZm9ybWF0LCB0cnVlKTtcbiAgICBpZiAoIW5vdGVEYXRlLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKGlzRm9ybWF0QW1iaWd1b3VzKGZvcm1hdCwgZ3JhbnVsYXJpdHkpKSB7XG4gICAgICAgIGlmIChncmFudWxhcml0eSA9PT0gXCJ3ZWVrXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuRm9ybWF0ID0gcmVtb3ZlRXNjYXBlZENoYXJhY3RlcnMoZm9ybWF0KTtcbiAgICAgICAgICAgIGlmICgvd3sxLDJ9L2kudGVzdChjbGVhbkZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93Lm1vbWVudChmaWxlbmFtZSwgXG4gICAgICAgICAgICAgICAgLy8gSWYgZm9ybWF0IGNvbnRhaW5zIHdlZWssIHJlbW92ZSBkYXkgJiBtb250aCBmb3JtYXR0aW5nXG4gICAgICAgICAgICAgICAgZm9ybWF0LnJlcGxhY2UoL017MSw0fS9nLCBcIlwiKS5yZXBsYWNlKC9EezEsNH0vZywgXCJcIiksIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm90ZURhdGU7XG59XG5cbmNsYXNzIERhaWx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gbWltaWNzIHRoZSBiZWhhdmlvciBvZiB0aGUgZGFpbHktbm90ZXMgcGx1Z2luXG4gKiBzbyBpdCB3aWxsIHJlcGxhY2Uge3tkYXRlfX0sIHt7dGl0bGV9fSwgYW5kIHt7dGltZX19IHdpdGggdGhlXG4gKiBmb3JtYXR0ZWQgdGltZXN0YW1wLlxuICpcbiAqIE5vdGU6IGl0IGhhcyBhbiBhZGRlZCBib251cyB0aGF0IGl0J3Mgbm90ICd0b2RheScgc3BlY2lmaWMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURhaWx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgYXBwID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSBhcHA7XG4gICAgY29uc3QgbW9tZW50ID0gd2luZG93Lm1vbWVudDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0RGFpbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCBtb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp5ZXN0ZXJkYXlcXHMqfX0vZ2ksIGRhdGUuY2xvbmUoKS5zdWJ0cmFjdCgxLCBcImRheVwiKS5mb3JtYXQoZm9ybWF0KSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0b21vcnJvd1xccyp9fS9naSwgZGF0ZS5jbG9uZSgpLmFkZCgxLCBcImRcIikuZm9ybWF0KGZvcm1hdCkpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0RGFpbHlOb3RlKGRhdGUsIGRhaWx5Tm90ZXMpIHtcbiAgICByZXR1cm4gZGFpbHlOb3Rlc1tnZXREYXRlVUlEKGRhdGUsIFwiZGF5XCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsRGFpbHlOb3RlcygpIHtcbiAgICAvKipcbiAgICAgKiBGaW5kIGFsbCBkYWlseSBub3RlcyBpbiB0aGUgZGFpbHkgbm90ZSBmb2xkZXJcbiAgICAgKi9cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXREYWlseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IGRhaWx5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIWRhaWx5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IERhaWx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBkYWlseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIGNvbnN0IGRhaWx5Tm90ZXMgPSB7fTtcbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4oZGFpbHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcImRheVwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJkYXlcIik7XG4gICAgICAgICAgICAgICAgZGFpbHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZGFpbHlOb3Rlcztcbn1cblxuY2xhc3MgV2Vla2x5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG5mdW5jdGlvbiBnZXREYXlzT2ZXZWVrKCkge1xuICAgIGNvbnN0IHsgbW9tZW50IH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBsZXQgd2Vla1N0YXJ0ID0gbW9tZW50LmxvY2FsZURhdGEoKS5fd2Vlay5kb3c7XG4gICAgY29uc3QgZGF5c09mV2VlayA9IFtcbiAgICAgICAgXCJzdW5kYXlcIixcbiAgICAgICAgXCJtb25kYXlcIixcbiAgICAgICAgXCJ0dWVzZGF5XCIsXG4gICAgICAgIFwid2VkbmVzZGF5XCIsXG4gICAgICAgIFwidGh1cnNkYXlcIixcbiAgICAgICAgXCJmcmlkYXlcIixcbiAgICAgICAgXCJzYXR1cmRheVwiLFxuICAgIF07XG4gICAgd2hpbGUgKHdlZWtTdGFydCkge1xuICAgICAgICBkYXlzT2ZXZWVrLnB1c2goZGF5c09mV2Vlay5zaGlmdCgpKTtcbiAgICAgICAgd2Vla1N0YXJ0LS07XG4gICAgfVxuICAgIHJldHVybiBkYXlzT2ZXZWVrO1xufVxuZnVuY3Rpb24gZ2V0RGF5T2ZXZWVrTnVtZXJpY2FsVmFsdWUoZGF5T2ZXZWVrTmFtZSkge1xuICAgIHJldHVybiBnZXREYXlzT2ZXZWVrKCkuaW5kZXhPZihkYXlPZldlZWtOYW1lLnRvTG93ZXJDYXNlKCkpO1xufVxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlV2Vla2x5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0V2Vla2x5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooc3VuZGF5fG1vbmRheXx0dWVzZGF5fHdlZG5lc2RheXx0aHVyc2RheXxmcmlkYXl8c2F0dXJkYXkpXFxzKjooLio/KX19L2dpLCAoXywgZGF5T2ZXZWVrLCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IGdldERheU9mV2Vla051bWVyaWNhbFZhbHVlKGRheU9mV2Vlayk7XG4gICAgICAgICAgICByZXR1cm4gZGF0ZS53ZWVrZGF5KGRheSkuZm9ybWF0KG1vbWVudEZvcm1hdC50cmltKCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRXZWVrbHlOb3RlKGRhdGUsIHdlZWtseU5vdGVzKSB7XG4gICAgcmV0dXJuIHdlZWtseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJ3ZWVrXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsV2Vla2x5Tm90ZXMoKSB7XG4gICAgY29uc3Qgd2Vla2x5Tm90ZXMgPSB7fTtcbiAgICBpZiAoIWFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHdlZWtseU5vdGVzO1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRXZWVrbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCB3ZWVrbHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghd2Vla2x5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFdlZWtseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgd2Vla2x5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKHdlZWtseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwid2Vla1wiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJ3ZWVrXCIpO1xuICAgICAgICAgICAgICAgIHdlZWtseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB3ZWVrbHlOb3Rlcztcbn1cblxuY2xhc3MgTW9udGhseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVNb250aGx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0TW9udGhseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKmRhdGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldE1vbnRobHlOb3RlKGRhdGUsIG1vbnRobHlOb3Rlcykge1xuICAgIHJldHVybiBtb250aGx5Tm90ZXNbZ2V0RGF0ZVVJRChkYXRlLCBcIm1vbnRoXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsTW9udGhseU5vdGVzKCkge1xuICAgIGNvbnN0IG1vbnRobHlOb3RlcyA9IHt9O1xuICAgIGlmICghYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIG1vbnRobHlOb3RlcztcbiAgICB9XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0TW9udGhseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IG1vbnRobHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghbW9udGhseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBNb250aGx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBtb250aGx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKG1vbnRobHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcIm1vbnRoXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcIm1vbnRoXCIpO1xuICAgICAgICAgICAgICAgIG1vbnRobHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbW9udGhseU5vdGVzO1xufVxuXG5jbGFzcyBRdWFydGVybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIHRoZSBkYWlseS1ub3RlcyBwbHVnaW5cbiAqIHNvIGl0IHdpbGwgcmVwbGFjZSB7e2RhdGV9fSwge3t0aXRsZX19LCBhbmQge3t0aW1lfX0gd2l0aCB0aGVcbiAqIGZvcm1hdHRlZCB0aW1lc3RhbXAuXG4gKlxuICogTm90ZTogaXQgaGFzIGFuIGFkZGVkIGJvbnVzIHRoYXQgaXQncyBub3QgJ3RvZGF5JyBzcGVjaWZpYy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlUXVhcnRlcmx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgd2luZG93Lm1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0UXVhcnRlcmx5Tm90ZShkYXRlLCBxdWFydGVybHkpIHtcbiAgICByZXR1cm4gcXVhcnRlcmx5W2dldERhdGVVSUQoZGF0ZSwgXCJxdWFydGVyXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsUXVhcnRlcmx5Tm90ZXMoKSB7XG4gICAgY29uc3QgcXVhcnRlcmx5ID0ge307XG4gICAgaWYgKCFhcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiBxdWFydGVybHk7XG4gICAgfVxuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IHF1YXJ0ZXJseUZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghcXVhcnRlcmx5Rm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBRdWFydGVybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIHF1YXJ0ZXJseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbihxdWFydGVybHlGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJxdWFydGVyXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcInF1YXJ0ZXJcIik7XG4gICAgICAgICAgICAgICAgcXVhcnRlcmx5W2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBxdWFydGVybHk7XG59XG5cbmNsYXNzIFllYXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVZZWFybHlOb3RlKGRhdGUpIHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgdGVtcGxhdGUsIGZvcm1hdCwgZm9sZGVyIH0gPSBnZXRZZWFybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCB3aW5kb3cubW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRZZWFybHlOb3RlKGRhdGUsIHllYXJseU5vdGVzKSB7XG4gICAgcmV0dXJuIHllYXJseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJ5ZWFyXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsWWVhcmx5Tm90ZXMoKSB7XG4gICAgY29uc3QgeWVhcmx5Tm90ZXMgPSB7fTtcbiAgICBpZiAoIWFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHllYXJseU5vdGVzO1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRZZWFybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCB5ZWFybHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICgheWVhcmx5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFllYXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgeWVhcmx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKHllYXJseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwieWVhclwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJ5ZWFyXCIpO1xuICAgICAgICAgICAgICAgIHllYXJseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB5ZWFybHlOb3Rlcztcbn1cblxuZnVuY3Rpb24gYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgZGFpbHlOb3Rlc1BsdWdpbiA9IGFwcC5pbnRlcm5hbFBsdWdpbnMucGx1Z2luc1tcImRhaWx5LW5vdGVzXCJdO1xuICAgIGlmIChkYWlseU5vdGVzUGx1Z2luICYmIGRhaWx5Tm90ZXNQbHVnaW4uZW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8uZGFpbHk/LmVuYWJsZWQ7XG59XG4vKipcbiAqIFhYWDogXCJXZWVrbHkgTm90ZXNcIiBsaXZlIGluIGVpdGhlciB0aGUgQ2FsZW5kYXIgcGx1Z2luIG9yIHRoZSBwZXJpb2RpYy1ub3RlcyBwbHVnaW4uXG4gKiBDaGVjayBib3RoIHVudGlsIHRoZSB3ZWVrbHkgbm90ZXMgZmVhdHVyZSBpcyByZW1vdmVkIGZyb20gdGhlIENhbGVuZGFyIHBsdWdpbi5cbiAqL1xuZnVuY3Rpb24gYXBwSGFzV2Vla2x5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlmIChhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJjYWxlbmRhclwiKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ud2Vla2x5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ubW9udGhseT8uZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIGFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ucXVhcnRlcmx5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gYXBwSGFzWWVhcmx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy55ZWFybHk/LmVuYWJsZWQ7XG59XG5mdW5jdGlvbiBnZXRQZXJpb2RpY05vdGVTZXR0aW5ncyhncmFudWxhcml0eSkge1xuICAgIGNvbnN0IGdldFNldHRpbmdzID0ge1xuICAgICAgICBkYXk6IGdldERhaWx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB3ZWVrOiBnZXRXZWVrbHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIG1vbnRoOiBnZXRNb250aGx5Tm90ZVNldHRpbmdzLFxuICAgICAgICBxdWFydGVyOiBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHllYXI6IGdldFllYXJseU5vdGVTZXR0aW5ncyxcbiAgICB9W2dyYW51bGFyaXR5XTtcbiAgICByZXR1cm4gZ2V0U2V0dGluZ3MoKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBlcmlvZGljTm90ZShncmFudWxhcml0eSwgZGF0ZSkge1xuICAgIGNvbnN0IGNyZWF0ZUZuID0ge1xuICAgICAgICBkYXk6IGNyZWF0ZURhaWx5Tm90ZSxcbiAgICAgICAgbW9udGg6IGNyZWF0ZU1vbnRobHlOb3RlLFxuICAgICAgICB3ZWVrOiBjcmVhdGVXZWVrbHlOb3RlLFxuICAgIH07XG4gICAgcmV0dXJuIGNyZWF0ZUZuW2dyYW51bGFyaXR5XShkYXRlKTtcbn1cblxuZXhwb3J0cy5ERUZBVUxUX0RBSUxZX05PVEVfRk9STUFUID0gREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9NT05USExZX05PVEVfRk9STUFUID0gREVGQVVMVF9NT05USExZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1FVQVJURVJMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfUVVBUlRFUkxZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfWUVBUkxZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5hcHBIYXNEYWlseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNXZWVrbHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNZZWFybHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5jcmVhdGVEYWlseU5vdGUgPSBjcmVhdGVEYWlseU5vdGU7XG5leHBvcnRzLmNyZWF0ZU1vbnRobHlOb3RlID0gY3JlYXRlTW9udGhseU5vdGU7XG5leHBvcnRzLmNyZWF0ZVBlcmlvZGljTm90ZSA9IGNyZWF0ZVBlcmlvZGljTm90ZTtcbmV4cG9ydHMuY3JlYXRlUXVhcnRlcmx5Tm90ZSA9IGNyZWF0ZVF1YXJ0ZXJseU5vdGU7XG5leHBvcnRzLmNyZWF0ZVdlZWtseU5vdGUgPSBjcmVhdGVXZWVrbHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVZZWFybHlOb3RlID0gY3JlYXRlWWVhcmx5Tm90ZTtcbmV4cG9ydHMuZ2V0QWxsRGFpbHlOb3RlcyA9IGdldEFsbERhaWx5Tm90ZXM7XG5leHBvcnRzLmdldEFsbE1vbnRobHlOb3RlcyA9IGdldEFsbE1vbnRobHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsUXVhcnRlcmx5Tm90ZXMgPSBnZXRBbGxRdWFydGVybHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsV2Vla2x5Tm90ZXMgPSBnZXRBbGxXZWVrbHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsWWVhcmx5Tm90ZXMgPSBnZXRBbGxZZWFybHlOb3RlcztcbmV4cG9ydHMuZ2V0RGFpbHlOb3RlID0gZ2V0RGFpbHlOb3RlO1xuZXhwb3J0cy5nZXREYWlseU5vdGVTZXR0aW5ncyA9IGdldERhaWx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXREYXRlRnJvbUZpbGUgPSBnZXREYXRlRnJvbUZpbGU7XG5leHBvcnRzLmdldERhdGVGcm9tUGF0aCA9IGdldERhdGVGcm9tUGF0aDtcbmV4cG9ydHMuZ2V0RGF0ZVVJRCA9IGdldERhdGVVSUQ7XG5leHBvcnRzLmdldE1vbnRobHlOb3RlID0gZ2V0TW9udGhseU5vdGU7XG5leHBvcnRzLmdldE1vbnRobHlOb3RlU2V0dGluZ3MgPSBnZXRNb250aGx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRQZXJpb2RpY05vdGVTZXR0aW5ncyA9IGdldFBlcmlvZGljTm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRRdWFydGVybHlOb3RlID0gZ2V0UXVhcnRlcmx5Tm90ZTtcbmV4cG9ydHMuZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzID0gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRUZW1wbGF0ZUluZm8gPSBnZXRUZW1wbGF0ZUluZm87XG5leHBvcnRzLmdldFdlZWtseU5vdGUgPSBnZXRXZWVrbHlOb3RlO1xuZXhwb3J0cy5nZXRXZWVrbHlOb3RlU2V0dGluZ3MgPSBnZXRXZWVrbHlOb3RlU2V0dGluZ3M7XG5leHBvcnRzLmdldFllYXJseU5vdGUgPSBnZXRZZWFybHlOb3RlO1xuZXhwb3J0cy5nZXRZZWFybHlOb3RlU2V0dGluZ3MgPSBnZXRZZWFybHlOb3RlU2V0dGluZ3M7XG4iLCAiLyoqXHJcbiAqIEhvbWUgQmFzZSBQbHVnaW5cclxuICogWW91ciBkZWRpY2F0ZWQgaG9tZSBpbiB5b3VyIHZhdWx0XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTm90aWNlLCBQbGF0Zm9ybSwgUGx1Z2luLCBhZGRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTLCBIb21lQmFzZVNldHRpbmdzLCBIb21lQmFzZVR5cGUgfSBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IHsgSG9tZUJhc2VTZXR0aW5nVGFiIH0gZnJvbSAnLi91aS9zZXR0aW5ncy10YWInO1xyXG5pbXBvcnQgeyBIb21lQmFzZVNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL2hvbWUtc2VydmljZSc7XHJcbmltcG9ydCB7IE5ld1RhYlNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL25ldy10YWItc2VydmljZSc7XHJcbmltcG9ydCB7IFN0aWNreVRhYlNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3N0aWNreS10YWItc2VydmljZSc7XHJcbmltcG9ydCB7IE1vYmlsZUJ1dHRvblNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL21vYmlsZS1idXR0b24tc2VydmljZSc7XHJcblxyXG4vKipcclxuICogRXh0ZW5kZWQgQXBwIGludGVyZmFjZSBmb3IgcmVsZWFzZSBub3RlcyBwYXRjaGluZ1xyXG4gKi9cclxuaW50ZXJmYWNlIEFwcFdpdGhSZWxlYXNlTm90ZXMge1xyXG5cdHNob3dSZWxlYXNlTm90ZXM/OiAoKSA9PiB2b2lkO1xyXG5cdG52T3JpZ19zaG93UmVsZWFzZU5vdGVzPzogKCkgPT4gdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEN1c3RvbSBob21lIGljb24gU1ZHIChMdWNpZGUgaG91c2UgaWNvbilcclxuICovXHJcbmNvbnN0IEhPTUVfSUNPTiA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggZD1cIk0xNSAyMXYtOGExIDEgMCAwIDAtMS0xaC00YTEgMSAwIDAgMC0xIDF2OFwiLz48cGF0aCBkPVwiTTMgMTBhMiAyIDAgMCAxIC43MDktMS41MjhsNy02YTIgMiAwIDAgMSAyLjU4MiAwbDcgNkEyIDIgMCAwIDEgMjEgMTB2OWEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnpcIi8+PC9zdmc+YDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhvbWVCYXNlUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5ncyE6IEhvbWVCYXNlU2V0dGluZ3M7XHJcblx0XHJcblx0Ly8gU2VydmljZXNcclxuXHRob21lU2VydmljZSE6IEhvbWVCYXNlU2VydmljZTtcclxuXHRuZXdUYWJTZXJ2aWNlITogTmV3VGFiU2VydmljZTtcclxuXHRzdGlja3lUYWJTZXJ2aWNlITogU3RpY2t5VGFiU2VydmljZTtcclxuXHRtb2JpbGVCdXR0b25TZXJ2aWNlITogTW9iaWxlQnV0dG9uU2VydmljZTtcclxuXHRcclxuXHQvLyBSZWxlYXNlIG5vdGVzIHRyYWNraW5nXHJcblx0cHJpdmF0ZSBuZXdSZWxlYXNlOiBib29sZWFuID0gZmFsc2U7XHJcblx0XHJcblx0Ly8gVHJhY2sgaWYgcGF0Y2hlZCBvcGVuaW5nIGJlaGF2aW9yIGFscmVhZHkgcmFuXHJcblx0cHJpdmF0ZSBvcGVuaW5nQmVoYXZpb3JSYW46IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRcclxuXHQvLyBUcmFjayBpZiB3ZSdyZSBjdXJyZW50bHkgaW4gc3RhcnR1cCAodG8gcHJldmVudCBoYW5kbGVPcGVuV2hlbkVtcHR5IGZyb20gZmlyaW5nKVxyXG5cdHByaXZhdGUgaXNTdGFydHVwOiBib29sZWFuID0gdHJ1ZTtcclxuXHJcblx0YXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0Ly8gTWlncmF0ZSBsZWdhY3kgc2V0dGluZ3Mgb24gZmlyc3QgbG9hZFxyXG5cdFx0YXdhaXQgdGhpcy5taWdyYXRlTGVnYWN5U2V0dGluZ3MoKTtcclxuXHJcblx0XHQvLyBQYXRjaCBvcGVuaW5nIGJlaGF2aW9yIGZvciBmYXN0IHN0YXJ0dXAgKGJlZm9yZSBvdGhlciBpbml0aWFsaXphdGlvbilcclxuXHRcdHRoaXMucGF0Y2hPcGVuaW5nQmVoYXZpb3IoKTtcclxuXHJcblx0XHQvLyBSZWdpc3RlciBjdXN0b20gaWNvblxyXG5cdFx0YWRkSWNvbignaG9tZS1iYXNlJywgSE9NRV9JQ09OKTtcclxuXHJcblx0XHQvLyBJbml0aWFsaXplIHNlcnZpY2VzXHJcblx0XHR0aGlzLmhvbWVTZXJ2aWNlID0gbmV3IEhvbWVCYXNlU2VydmljZSh0aGlzKTtcclxuXHRcdHRoaXMubmV3VGFiU2VydmljZSA9IG5ldyBOZXdUYWJTZXJ2aWNlKHRoaXMpO1xyXG5cdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlID0gbmV3IFN0aWNreVRhYlNlcnZpY2UodGhpcyk7XHJcblx0XHR0aGlzLm1vYmlsZUJ1dHRvblNlcnZpY2UgPSBuZXcgTW9iaWxlQnV0dG9uU2VydmljZSh0aGlzKTtcclxuXHJcblx0XHQvLyBBZGQgcmliYm9uIGljb25cclxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbignaG9tZScsICdPcGVuIGhvbWUgYmFzZScsICgpID0+IHtcclxuXHRcdFx0dm9pZCB0aGlzLmhvbWVTZXJ2aWNlLm9wZW5Ib21lQmFzZSh7XHJcblx0XHRcdFx0cmVwbGFjZUFjdGl2ZUxlYWY6IGZhbHNlLFxyXG5cdFx0XHRcdHJ1bkNvbW1hbmQ6IHRydWUsXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgY29tbWFuZHNcclxuXHRcdHRoaXMucmVnaXN0ZXJDb21tYW5kcygpO1xyXG5cclxuXHRcdC8vIEFkZCBzZXR0aW5ncyB0YWJcclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgSG9tZUJhc2VTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdFx0Ly8gV2FpdCBmb3IgbGF5b3V0IHRvIGJlIHJlYWR5XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XHJcblx0XHRcdC8vIFVzZSBhIHNtYWxsIGRlbGF5IHRvIGVuc3VyZSBET00gaXMgcmVhZHkgKGVzcGVjaWFsbHkgZm9yIHNldHRpbmdzIG1vZGFsIGRldGVjdGlvbilcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgc2V0dGluZ3MgbW9kYWwgaXMgb3BlbiAtIGlmIHNvLCBza2lwIHN0YXJ0dXAgbG9naWNcclxuXHRcdFx0XHRpZiAodGhpcy5pc1NldHRpbmdzTW9kYWxPcGVuKCkpIHtcclxuXHRcdFx0XHRcdC8vIFN0aWxsIHVwZGF0ZSBVSSBmZWF0dXJlcywganVzdCBkb24ndCBydW4gc3RhcnR1cCBsb2dpY1xyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGVTdGlja3lUYWJJY29uKCk7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZU1vYmlsZUJ1dHRvbigpO1xyXG5cdFx0XHRcdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZVRhYkhlYWRlcnMoKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIEFsd2F5cyBpbml0aWFsaXplIHRoZSBuZXcgdGFiIHNlcnZpY2UgdG8gdHJhY2sgZXhpc3RpbmcgbGVhdmVzXHJcblx0XHRcdFx0Ly8gVGhpcyBpcyBuZWVkZWQgZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQgdG8gd29ya1xyXG5cdFx0XHRcdC8vIEJ1dCBvbmx5IHJ1biBzdGFydHVwIGxvZ2ljIGlmIG9wZW5pbmcgYmVoYXZpb3IgZGlkbid0IGFscmVhZHkgcnVuXHJcblx0XHRcdFx0aWYgKCF0aGlzLm9wZW5pbmdCZWhhdmlvclJhbikge1xyXG5cdFx0XHRcdFx0Ly8gT3BlbmluZyBiZWhhdmlvciBkaWRuJ3QgcnVuLCBzbyBpbml0aWFsaXplIG5vcm1hbGx5IChpbmNsdWRlcyBzdGFydHVwKVxyXG5cdFx0XHRcdFx0dGhpcy5uZXdUYWJTZXJ2aWNlLmluaXRpYWxpemUoKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gT3BlbmluZyBiZWhhdmlvciBhbHJlYWR5IHJhbiwgYnV0IHdlIHN0aWxsIG5lZWQgdG8gdHJhY2sgZXhpc3RpbmcgbGVhdmVzXHJcblx0XHRcdFx0XHQvLyBmb3IgbmV3IHRhYiByZXBsYWNlbWVudCB0byB3b3JrXHJcblx0XHRcdFx0XHR0aGlzLm5ld1RhYlNlcnZpY2UudHJhY2tFeGlzdGluZ0xlYXZlcygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBNYXJrIHN0YXJ0dXAgYXMgY29tcGxldGUgYWZ0ZXIgYSBkZWxheSB0byBhbGxvdyBldmVyeXRoaW5nIHRvIHNldHRsZVxyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5pc1N0YXJ0dXAgPSBmYWxzZTtcclxuXHRcdFx0XHR9LCAxMDAwKTtcclxuXHJcblx0XHRcdFx0Ly8gVXBkYXRlIFVJIGZlYXR1cmVzXHJcblx0XHRcdFx0dGhpcy51cGRhdGVTdGlja3lUYWJJY29uKCk7XHJcblx0XHRcdFx0dGhpcy51cGRhdGVNb2JpbGVCdXR0b24oKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgYWZ0ZXIgbGF5b3V0IGlzIHJlYWR5XHJcblx0XHRcdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZVRhYkhlYWRlcnMoKTtcclxuXHRcdFx0fSwgMTAwKTsgLy8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIERPTSBpcyByZWFkeVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgbGF5b3V0IGNoYW5nZSBoYW5kbGVyXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsIGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLm5ld1RhYlNlcnZpY2UuaGFuZGxlTGF5b3V0Q2hhbmdlKCk7XHJcblx0XHRcdFx0Ly8gSGFuZGxlIHJldmVydCB2aWV3IG9uIGNsb3NlXHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucmV2ZXJ0Vmlldykge1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5ob21lU2VydmljZS5yZXZlcnRWaWV3KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFwiT3BlbiB3aGVuIGVtcHR5XCIgZmVhdHVyZSByZW1vdmVkIC0gdXNlIFwiTmV3IHRhYiByZXBsYWNlbWVudDogb25seSB3aGVuIGVtcHR5XCIgaW5zdGVhZFxyXG5cdFx0XHRcdC8vIFRoZXkgZG8gdGhlIHNhbWUgdGhpbmcgc2luY2UgT2JzaWRpYW4gYXV0by1jcmVhdGVzIGFuIGVtcHR5IHRhYiB3aGVuIHlvdSBjbG9zZSB0aGUgbGFzdCBvbmVcclxuXHRcdFx0XHQvLyBEZWxheSB0YWIgaGVhZGVyIHVwZGF0ZXMgdG8gYXZvaWQgZmxpY2tlcmluZyBkdXJpbmcgdGFiIHRyYW5zaXRpb25zXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlQWN0aXZlU3RhdGUoKTtcclxuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0XHQvLyBBbHNvIHVwZGF0ZSBpY29uIHBvc2l0aW9uIGluIGNhc2Ugc2lkZWJhciBzdGF0ZSBjaGFuZ2VkXHJcblx0XHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlSWNvblBvc2l0aW9uRm9yU2lkZWJhcigpO1xyXG5cdFx0XHRcdH0sIDE1MCk7XHJcblx0XHRcdH0pXHJcblx0XHQpO1xyXG5cclxuXHRcdC8vIFJlZ2lzdGVyIGZpbGUgb3BlbiBoYW5kbGVyIGZvciBhY3RpdmUgc3RhdGUgdXBkYXRlc1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtb3BlbicsICgpID0+IHtcclxuXHRcdFx0XHQvLyBEZWxheSB1cGRhdGVzIHRvIGxldCBmaWxlIG9wZW4gYW5pbWF0aW9uIGNvbXBsZXRlXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlQWN0aXZlU3RhdGUoKTtcclxuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgYWN0aXZlIGxlYWYgY2hhbmdlIGhhbmRsZXIgZm9yIHRhYiBoZWFkZXIgdXBkYXRlc1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcclxuXHRcdFx0XHQvLyBEZWxheSB0byBsZXQgdGFiIHN3aXRjaCBhbmltYXRpb24gY29tcGxldGVcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblxyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKTogdm9pZCB7XHJcblx0XHQvLyBVbnBhdGNoIHJlbGVhc2Ugbm90ZXNcclxuXHRcdHRoaXMudW5wYXRjaFJlbGVhc2VOb3RlcygpO1xyXG5cdFx0XHJcblx0XHQvLyBVbnBhdGNoIG9wZW5pbmcgYmVoYXZpb3JcclxuXHRcdHRoaXMudW5wYXRjaE9wZW5pbmdCZWhhdmlvcigpO1xyXG5cdFx0XHJcblx0XHQvLyBDbGVhbiB1cCBzZXJ2aWNlc1xyXG5cdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5tb2JpbGVCdXR0b25TZXJ2aWNlLnJlbW92ZSgpO1xyXG5cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZ2lzdGVyIHBsdWdpbiBjb21tYW5kc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgcmVnaXN0ZXJDb21tYW5kcygpOiB2b2lkIHtcclxuXHRcdC8vIE9wZW4gaG9tZSBiYXNlXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ29wZW4nLFxyXG5cdFx0XHRuYW1lOiAnT3BlbicsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMuZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0XHRcdGlmICghaG9tZUJhc2VTZXR0aW5ncy52YWx1ZSAmJiBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdObyBob21lIGJhc2UgY29uZmlndXJlZC4gU2V0IG9uZSBpbiBzZXR0aW5ncy4nKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dm9pZCB0aGlzLmhvbWVTZXJ2aWNlLm9wZW5Ib21lQmFzZSh7XHJcblx0XHRcdFx0XHRyZXBsYWNlQWN0aXZlTGVhZjogZmFsc2UsXHJcblx0XHRcdFx0XHRydW5Db21tYW5kOiB0cnVlLFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU2V0IGN1cnJlbnQgZmlsZSBhcyBob21lIGJhc2VcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnc2V0LWN1cnJlbnQtZmlsZScsXHJcblx0XHRcdG5hbWU6ICdTZXQgY3VycmVudCBmaWxlIGFzIGhvbWUnLFxyXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmcpID0+IHtcclxuXHRcdFx0XHRpZiAoIXRoaXMuaG9tZVNlcnZpY2UuY2FuU2V0QWN0aXZlRmlsZUFzSG9tZUJhc2UoKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIWNoZWNraW5nKSB7XHJcblx0XHRcdFx0XHR2b2lkIHRoaXMuaG9tZVNlcnZpY2Uuc2V0QWN0aXZlRmlsZUFzSG9tZUJhc2UoKS50aGVuKChzdWNjZXNzKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmIChzdWNjZXNzKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgSG9tZSBiYXNlIHNldCB0byBcIiR7YWN0aXZlRmlsZT8ubmFtZX1cImApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUb2dnbGUgc3RpY2t5IGhvbWUgaWNvblxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICd0b2dnbGUtc3RpY2t5LWljb24nLFxyXG5cdFx0XHRuYW1lOiAnVG9nZ2xlIHN0aWNreSBob21lIGljb24nLFxyXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RpY2t5VGFiU2VydmljZS50b2dnbGUoKTtcclxuXHRcdFx0XHRjb25zdCBzdGF0ZSA9IHRoaXMuc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJztcclxuXHRcdFx0XHRuZXcgTm90aWNlKGBTdGlja3kgaG9tZSBpY29uICR7c3RhdGV9YCk7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDbG9zZSBob21lIGJhc2VcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnY2xvc2UnLFxyXG5cdFx0XHRuYW1lOiAnQ2xvc2UnLFxyXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RpY2t5VGFiU2VydmljZS5jbG9zZUhvbWVCYXNlKCk7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIExvYWQgcGx1Z2luIHNldHRpbmdzXHJcblx0ICovXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3QgZGF0YSA9IChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIGFzIFBhcnRpYWw8SG9tZUJhc2VTZXR0aW5ncz4gfCBudWxsO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEgPz8ge30pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTWlncmF0ZSBsZWdhY3kgc2V0dGluZ3MgdG8gbmV3IGZvcm1hdFxyXG5cdCAqL1xyXG5cdGFzeW5jIG1pZ3JhdGVMZWdhY3lTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGxldCBuZWVkc1NhdmUgPSBmYWxzZTtcclxuXHRcdFxyXG5cdFx0Ly8gTWlncmF0ZSBob21lQmFzZVBhdGggdG8gaG9tZUJhc2VUeXBlL2hvbWVCYXNlVmFsdWVcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmhvbWVCYXNlUGF0aCAmJiAhdGhpcy5zZXR0aW5ncy5ob21lQmFzZVZhbHVlKSB7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VUeXBlID0gSG9tZUJhc2VUeXBlLkZpbGU7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VWYWx1ZSA9IHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VQYXRoO1xyXG5cdFx0XHRuZWVkc1NhdmUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBNaWdyYXRlIGtlZXBFeGlzdGluZ1RhYnMgdG8gb3Blbk1vZGVcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmtlZXBFeGlzdGluZ1RhYnMgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5vcGVuTW9kZSA9PT0gREVGQVVMVF9TRVRUSU5HUy5vcGVuTW9kZSkge1xyXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3Mub3Blbk1vZGUgPSB0aGlzLnNldHRpbmdzLmtlZXBFeGlzdGluZ1RhYnMgPyAncmV0YWluJyA6ICdyZXBsYWNlLWFsbCc7XHJcblx0XHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBNaWdyYXRlIG1vYmlsZSBob21lQmFzZVBhdGhcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlUGF0aCAmJiAhdGhpcy5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlKSB7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlID0gSG9tZUJhc2VUeXBlLkZpbGU7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VWYWx1ZSA9IHRoaXMuc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VQYXRoO1xyXG5cdFx0XHRuZWVkc1NhdmUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAobmVlZHNTYXZlKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgdGhlIGFjdGl2ZSBob21lIGJhc2Ugc2V0dGluZ3MgKG1vYmlsZSBvciBkZXNrdG9wKVxyXG5cdCAqL1xyXG5cdGdldEhvbWVCYXNlU2V0dGluZ3MoKToge1xyXG5cdFx0dHlwZTogSG9tZUJhc2VUeXBlO1xyXG5cdFx0dmFsdWU6IHN0cmluZztcclxuXHRcdHBhdGg6IHN0cmluZzsgLy8gTGVnYWN5IGNvbXBhdGliaWxpdHlcclxuXHR9IHtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnNlcGFyYXRlTW9iaWxlICYmIFBsYXRmb3JtLmlzTW9iaWxlKSB7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0dHlwZTogdGhpcy5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVR5cGUgfHwgSG9tZUJhc2VUeXBlLkZpbGUsXHJcblx0XHRcdFx0dmFsdWU6IHRoaXMuc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VWYWx1ZSB8fCB0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlUGF0aCB8fCAnJyxcclxuXHRcdFx0XHRwYXRoOiB0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlUGF0aCB8fCB0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUgfHwgJycsXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHR5cGU6IHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlLFxyXG5cdFx0XHR2YWx1ZTogdGhpcy5zZXR0aW5ncy5ob21lQmFzZVZhbHVlIHx8IHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VQYXRoIHx8ICcnLFxyXG5cdFx0XHRwYXRoOiB0aGlzLnNldHRpbmdzLmhvbWVCYXNlUGF0aCB8fCB0aGlzLnNldHRpbmdzLmhvbWVCYXNlVmFsdWUgfHwgJycsXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2F2ZSBwbHVnaW4gc2V0dGluZ3NcclxuXHQgKi9cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIHRoZSBzdGlja3kgdGFiIGljb24gYmFzZWQgb24gY3VycmVudCBzZXR0aW5nc1xyXG5cdCAqL1xyXG5cdHVwZGF0ZVN0aWNreVRhYkljb24oKTogdm9pZCB7XHJcblx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlKCk7XHJcblx0XHQvLyBBbHNvIHVwZGF0ZSB0YWIgaGVhZGVycyB3aGVuIHN0aWNreSBpY29uIHNldHRpbmcgY2hhbmdlc1xyXG5cdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZVRhYkhlYWRlcnMoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSB0aGUgbW9iaWxlIGJ1dHRvbiBiYXNlZCBvbiBjdXJyZW50IHNldHRpbmdzXHJcblx0ICovXHJcblx0dXBkYXRlTW9iaWxlQnV0dG9uKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5tb2JpbGVCdXR0b25TZXJ2aWNlLnVwZGF0ZSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgd2Ugc2hvdWxkIHNraXAgc3RhcnR1cCBsb2dpYyAoZS5nLiwgcGx1Z2luIHJlbG9hZCwgc2V0dGluZ3MgbW9kYWwgb3BlbilcclxuXHQgKiBUaGlzIHByZXZlbnRzIGRlc3RydWN0aXZlIGJlaGF2aW9yIHdoZW4gdGhlIHBsdWdpbiBpcyByZWxvYWRlZCBvciBzZXR0aW5ncyBhcmUgb3BlblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgc2hvdWxkU2tpcFN0YXJ0dXBMb2dpYygpOiBib29sZWFuIHtcclxuXHRcdC8vIENoZWNrIGlmIHNldHRpbmdzIG1vZGFsIGlzIG9wZW4gLSBuZXZlciBydW4gc3RhcnR1cCBsb2dpYyBpZiBpdCBpc1xyXG5cdFx0aWYgKHRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYSBwbHVnaW4gcmVsb2FkIHZzIGFjdHVhbCBhcHAgc3RhcnR1cFxyXG5cdFx0Ly8gT24gYWN0dWFsIHN0YXJ0dXAsIE9ic2lkaWFuIGhhc24ndCByZXN0b3JlZCB0aGUgd29ya3NwYWNlIHlldFxyXG5cdFx0Ly8gT24gcGx1Z2luIHJlbG9hZCwgZmlsZXMgYXJlIGFscmVhZHkgb3BlbiBhbmQgd29ya3NwYWNlIGlzIHJlc3RvcmVkXHJcblx0XHRjb25zdCBoYXNPcGVuRmlsZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdtYXJrZG93bicpLmxlbmd0aCA+IDAgfHxcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2NhbnZhcycpLmxlbmd0aCA+IDAgfHxcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2Jhc2VzJykubGVuZ3RoID4gMCB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZW1wdHknKS5sZW5ndGggPiAwO1xyXG5cdFx0XHJcblx0XHQvLyBJZiBmaWxlcyBhcmUgb3BlbiwgdGhpcyBpcyBsaWtlbHkgYSBwbHVnaW4gcmVsb2FkLCBub3QgYWN0dWFsIHN0YXJ0dXBcclxuXHRcdHJldHVybiBoYXNPcGVuRmlsZXM7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiB0aGUgc2V0dGluZ3MgbW9kYWwgaXMgY3VycmVudGx5IG9wZW5cclxuXHQgKi9cclxuXHRwcml2YXRlIGlzU2V0dGluZ3NNb2RhbE9wZW4oKTogYm9vbGVhbiB7XHJcblx0XHQvLyBDaGVjayBmb3Igc2V0dGluZ3MgbW9kYWwgYnkgbG9va2luZyBmb3IgdGhlIG1vZGFsIGNvbnRhaW5lclxyXG5cdFx0Ly8gVHJ5IG11bHRpcGxlIHNlbGVjdG9ycyB0byBiZSBtb3JlIHJvYnVzdFxyXG5cdFx0Y29uc3Qgc2V0dGluZ3NNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250YWluZXIubW9kLXNldHRpbmdzJykgfHxcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwubW9kLXNldHRpbmdzJykgfHxcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmVydGljYWwtdGFiLWNvbnRlbnQnKTtcclxuXHRcdFxyXG5cdFx0Ly8gQWxzbyBjaGVjayBpZiBhbnkgbW9kYWwgaXMgb3BlbiBhbmQgY29udGFpbnMgc2V0dGluZ3MgY29udGVudFxyXG5cdFx0aWYgKCFzZXR0aW5nc01vZGFsKSB7XHJcblx0XHRcdGNvbnN0IGFsbE1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbC1jb250YWluZXInKTtcclxuXHRcdFx0Zm9yIChjb25zdCBtb2RhbCBvZiBBcnJheS5mcm9tKGFsbE1vZGFscykpIHtcclxuXHRcdFx0XHRpZiAobW9kYWwucXVlcnlTZWxlY3RvcignLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0ICAgIG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5zZXR0aW5ncy1jb250ZW50JykgfHxcclxuXHRcdFx0XHQgICAgbW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2Qtc2V0dGluZ3MnKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzZXR0aW5nc01vZGFsICE9PSBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUGF0Y2ggcnVuT3BlbmluZ0JlaGF2aW9yIGZvciBmYXN0IHN0YXJ0dXAgKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgcGF0Y2hPcGVuaW5nQmVoYXZpb3IoKTogdm9pZCB7XHJcblx0XHQvLyBTdG9yZSBvcmlnaW5hbCBtZXRob2RcclxuXHRcdCBcclxuXHRcdHRoaXMuYXBwLm52T3JpZ19ydW5PcGVuaW5nQmVoYXZpb3IgPSB0aGlzLmFwcC5ydW5PcGVuaW5nQmVoYXZpb3I7XHJcblx0XHRcclxuXHRcdC8vIFBhdGNoIHRoZSBtZXRob2RcclxuXHRcdCBcclxuXHRcdHRoaXMuYXBwLnJ1bk9wZW5pbmdCZWhhdmlvciA9IGFzeW5jIChwYXRoOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0Y29uc3Qgb3BlbkluaXRpYWxseSA9IChcclxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLm9wZW5PblN0YXJ0dXAgJiYgXHJcblx0XHRcdFx0IShhd2FpdCB0aGlzLmhhc1VybFBhcmFtcygpKVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKG9wZW5Jbml0aWFsbHkpIHtcclxuXHRcdFx0XHQvLyBNYXJrIHRoYXQgd2UndmUgcnVuIG9wZW5pbmcgYmVoYXZpb3JcclxuXHRcdFx0XHR0aGlzLm9wZW5pbmdCZWhhdmlvclJhbiA9IHRydWU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gVXNlIGZhc3Qgc3RhcnR1cCAtIGRldGFjaCBhbGwgbGVhdmVzIGFuZCBvcGVuIGhvbWUgYmFzZVxyXG5cdFx0XHRcdGNvbnN0IG1vZGUgPSB0aGlzLnNldHRpbmdzLm9wZW5Nb2RlO1xyXG5cdFx0XHRcdGlmIChtb2RlID09PSAncmVwbGFjZS1hbGwnKSB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmhvbWVTZXJ2aWNlLmRldGFjaEFsbExlYXZlcygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBVc2UgZ2hvc3QgdGFiIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWQsIG90aGVyd2lzZSB1c2Ugbm9ybWFsIG9wZW5cclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuaG9tZVNlcnZpY2Uub3BlbkhvbWVCYXNlSW5HaG9zdFRhYih7XHJcblx0XHRcdFx0XHRcdHJ1bkNvbW1hbmQ6IHRydWUsXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5ob21lU2VydmljZS5vcGVuSG9tZUJhc2VXaXRoTW9kZShtb2RlLCB0cnVlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gQ2FsbCBvcmlnaW5hbCBiZWhhdmlvclxyXG5cdFx0XHRcdCBcclxuXHRcdFx0XHRpZiAodGhpcy5hcHAubnZPcmlnX3J1bk9wZW5pbmdCZWhhdmlvcikge1xyXG5cdFx0XHRcdFx0IFxyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAubnZPcmlnX3J1bk9wZW5pbmdCZWhhdmlvcihwYXRoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFVucGF0Y2ggcmVsZWFzZSBub3RlcyBhZnRlciBvcGVuaW5nIGJlaGF2aW9yIGNvbXBsZXRlc1xyXG5cdFx0XHR0aGlzLnVucGF0Y2hSZWxlYXNlTm90ZXMoKTtcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVbnBhdGNoIHJ1bk9wZW5pbmdCZWhhdmlvclxyXG5cdCAqL1xyXG5cdHByaXZhdGUgdW5wYXRjaE9wZW5pbmdCZWhhdmlvcigpOiB2b2lkIHtcclxuXHRcdCBcclxuXHRcdGlmICh0aGlzLmFwcC5udk9yaWdfcnVuT3BlbmluZ0JlaGF2aW9yKSB7XHJcblx0XHRcdCBcclxuXHRcdFx0dGhpcy5hcHAucnVuT3BlbmluZ0JlaGF2aW9yID0gdGhpcy5hcHAubnZPcmlnX3J1bk9wZW5pbmdCZWhhdmlvcjtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFBhdGNoIHNob3dSZWxlYXNlTm90ZXMgdG8gdHJhY2sgbmV3IHJlbGVhc2VzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBwYXRjaFJlbGVhc2VOb3RlcygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGFwcEFueSA9IHRoaXMuYXBwIGFzIHVua25vd24gYXMgQXBwV2l0aFJlbGVhc2VOb3RlcztcclxuXHRcdCBcclxuXHRcdGFwcEFueS5udk9yaWdfc2hvd1JlbGVhc2VOb3RlcyA9IGFwcEFueS5zaG93UmVsZWFzZU5vdGVzO1xyXG5cdFx0IFxyXG5cdFx0YXBwQW55LnNob3dSZWxlYXNlTm90ZXMgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMubmV3UmVsZWFzZSA9IHRydWU7XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVW5wYXRjaCBzaG93UmVsZWFzZU5vdGVzXHJcblx0ICovXHJcblx0cHJpdmF0ZSB1bnBhdGNoUmVsZWFzZU5vdGVzKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgYXBwQW55ID0gdGhpcy5hcHAgYXMgdW5rbm93biBhcyBBcHBXaXRoUmVsZWFzZU5vdGVzO1xyXG5cdFx0IFxyXG5cdFx0aWYgKHRoaXMubmV3UmVsZWFzZSAmJiAhdGhpcy5zZXR0aW5ncy5oaWRlUmVsZWFzZU5vdGVzKSB7XHJcblx0XHRcdCBcclxuXHRcdFx0YXBwQW55Lm52T3JpZ19zaG93UmVsZWFzZU5vdGVzPy4oKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0IFxyXG5cdFx0aWYgKGFwcEFueS5udk9yaWdfc2hvd1JlbGVhc2VOb3Rlcykge1xyXG5cdFx0XHQgXHJcblx0XHRcdGFwcEFueS5zaG93UmVsZWFzZU5vdGVzID0gYXBwQW55Lm52T3JpZ19zaG93UmVsZWFzZU5vdGVzO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgYSBob21lIGJhc2UgdHlwZSBoYXMgaXRzIHJlcXVpcmVkIHBsdWdpbiBlbmFibGVkXHJcblx0ICovXHJcblx0aGFzUmVxdWlyZWRQbHVnaW4odHlwZTogSG9tZUJhc2VUeXBlKTogYm9vbGVhbiB7XHJcblx0XHRzd2l0Y2ggKHR5cGUpIHtcclxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuV29ya3NwYWNlOlxyXG5cdFx0XHRcdCBcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5hcHAuaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy53b3Jrc3BhY2VzPy5lbmFibGVkID09PSB0cnVlO1xyXG5cdFx0XHRjYXNlIEhvbWVCYXNlVHlwZS5HcmFwaDpcclxuXHRcdFx0XHQgXHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuYXBwLmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8uZ3JhcGg/LmVuYWJsZWQgPT09IHRydWU7XHJcblx0XHRcdGNhc2UgSG9tZUJhc2VUeXBlLkpvdXJuYWw6XHJcblx0XHRcdFx0IFxyXG5cdFx0XHRcdHJldHVybiAhIXRoaXMuYXBwLnBsdWdpbnM/LnBsdWdpbnM/Llsnam91cm5hbHMnXTtcclxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuRGFpbHlOb3RlOlxyXG5cdFx0XHRjYXNlIEhvbWVCYXNlVHlwZS5XZWVrbHlOb3RlOlxyXG5cdFx0XHRjYXNlIEhvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZTpcclxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZTpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5oYXNSZXF1aXJlZFBlcmlvZGljaXR5KHR5cGUpO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgcGVyaW9kaWMgbm90ZXMgYXJlIGF2YWlsYWJsZSBmb3IgdGhlIGdpdmVuIHR5cGVcclxuXHQgKi9cclxuXHRwcml2YXRlIGhhc1JlcXVpcmVkUGVyaW9kaWNpdHkodHlwZTogSG9tZUJhc2VUeXBlKTogYm9vbGVhbiB7XHJcblx0XHRpZiAodHlwZSA9PT0gSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZSkge1xyXG5cdFx0XHQvLyBEYWlseSBub3RlcyBjYW4gY29tZSBmcm9tIGVpdGhlciBjb3JlIHBsdWdpbiBPUiBwZXJpb2RpYyBub3RlcyBwbHVnaW5cclxuXHRcdFx0Y29uc3QgY29yZURhaWx5Tm90ZXMgPSB0aGlzLmFwcC5pbnRlcm5hbFBsdWdpbnM/LnBsdWdpbnM/LlsnZGFpbHktbm90ZXMnXT8uZW5hYmxlZCA9PT0gdHJ1ZTtcclxuXHRcdFx0aWYgKGNvcmVEYWlseU5vdGVzKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gQ2hlY2sgcGVyaW9kaWMgbm90ZXMgcGx1Z2luIGZvciBkYWlseSBub3RlIHN1cHBvcnRcclxuXHRcdFx0Y29uc3QgcGVyaW9kaWNOb3RlcyA9IHRoaXMuYXBwLnBsdWdpbnM/LnBsdWdpbnM/LlsncGVyaW9kaWMtbm90ZXMnXTtcclxuXHRcdFx0aWYgKHBlcmlvZGljTm90ZXMpIHtcclxuXHRcdFx0XHRjb25zdCB2ZXJzaW9uID0gKHBlcmlvZGljTm90ZXMgYXMgeyBtYW5pZmVzdD86IHsgdmVyc2lvbj86IHN0cmluZyB9IH0pPy5tYW5pZmVzdD8udmVyc2lvbiB8fCAnMCc7XHJcblx0XHRcdFx0Y29uc3QgaXNMZWdhY3kgPSB2ZXJzaW9uLnN0YXJ0c1dpdGgoJzAnKTtcclxuXHRcdFx0IFxyXG5cdFx0XHRcdGlmIChpc0xlZ2FjeSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIChwZXJpb2RpY05vdGVzIGFzIHsgc2V0dGluZ3M/OiBSZWNvcmQ8c3RyaW5nLCB7IGVuYWJsZWQ/OiBib29sZWFuIH0+IH0pPy5zZXR0aW5ncz8uWydkYWlseSddPy5lbmFibGVkID09PSB0cnVlO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRjb25zdCBjYWxlbmRhclNldCA9IChwZXJpb2RpY05vdGVzIGFzIHsgY2FsZW5kYXJTZXRNYW5hZ2VyPzogeyBnZXRBY3RpdmVTZXQ/OiAoKSA9PiBSZWNvcmQ8c3RyaW5nLCB7IGVuYWJsZWQ/OiBib29sZWFuIH0+IH0gfSk/LmNhbGVuZGFyU2V0TWFuYWdlcj8uZ2V0QWN0aXZlU2V0Py4oKTtcclxuXHRcdFx0XHRcdHJldHVybiBjYWxlbmRhclNldD8uWydkYXknXT8uZW5hYmxlZCA9PT0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQgXHJcblx0XHRjb25zdCBwZXJpb2RpY05vdGVzID0gdGhpcy5hcHAucGx1Z2lucz8ucGx1Z2lucz8uWydwZXJpb2RpYy1ub3RlcyddO1xyXG5cdFx0aWYgKCFwZXJpb2RpY05vdGVzKSByZXR1cm4gZmFsc2U7XHJcblx0XHRcclxuXHRcdC8vIENoZWNrIGlmIHBlcmlvZGljIG5vdGVzIHBsdWdpbiBoYXMgdGhlIHJlcXVpcmVkIHBlcmlvZCBlbmFibGVkXHJcblx0XHQgXHJcblx0XHRjb25zdCB2ZXJzaW9uID0gKHBlcmlvZGljTm90ZXMgYXMgeyBtYW5pZmVzdD86IHsgdmVyc2lvbj86IHN0cmluZyB9IH0pPy5tYW5pZmVzdD8udmVyc2lvbiB8fCAnMCc7XHJcblx0XHRjb25zdCBpc0xlZ2FjeSA9IHZlcnNpb24uc3RhcnRzV2l0aCgnMCcpO1xyXG5cdFx0XHJcblx0XHRpZiAoaXNMZWdhY3kpIHtcclxuXHRcdFx0Ly8gTGVnYWN5IHBlcmlvZGljIG5vdGVzXHJcblx0XHRcdGNvbnN0IHBlcmlvZE1hcDogUGFydGlhbDxSZWNvcmQ8SG9tZUJhc2VUeXBlLCBzdHJpbmc+PiA9IHtcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLldlZWtseU5vdGVdOiAnd2Vla2x5JyxcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlXTogJ21vbnRobHknLFxyXG5cdFx0XHRcdFtIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZV06ICd5ZWFybHknLFxyXG5cdFx0XHR9O1xyXG5cdFx0XHQgXHJcblx0XHRcdGNvbnN0IGFkamVjdGl2ZSA9IHBlcmlvZE1hcFt0eXBlXTtcclxuXHRcdFx0aWYgKCFhZGplY3RpdmUpIHJldHVybiBmYWxzZTtcclxuXHRcdFx0IFxyXG5cdFx0XHRyZXR1cm4gKHBlcmlvZGljTm90ZXMgYXMgeyBzZXR0aW5ncz86IFJlY29yZDxzdHJpbmcsIHsgZW5hYmxlZD86IGJvb2xlYW4gfT4gfSk/LnNldHRpbmdzPy5bYWRqZWN0aXZlXT8uZW5hYmxlZCA9PT0gdHJ1ZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIE5ldyBwZXJpb2RpYyBub3Rlc1xyXG5cdFx0XHRjb25zdCBub3VuTWFwOiBQYXJ0aWFsPFJlY29yZDxIb21lQmFzZVR5cGUsIHN0cmluZz4+ID0ge1xyXG5cdFx0XHRcdFtIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZV06ICd3ZWVrJyxcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlXTogJ21vbnRoJyxcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLlllYXJseU5vdGVdOiAneWVhcicsXHJcblx0XHRcdH07XHJcblx0XHRcdCBcclxuXHRcdFx0Y29uc3Qgbm91biA9IG5vdW5NYXBbdHlwZV07XHJcblx0XHRcdGlmICghbm91bikgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHQgXHJcblx0XHRcdGNvbnN0IGNhbGVuZGFyU2V0ID0gKHBlcmlvZGljTm90ZXMgYXMgeyBjYWxlbmRhclNldE1hbmFnZXI/OiB7IGdldEFjdGl2ZVNldD86ICgpID0+IFJlY29yZDxzdHJpbmcsIHsgZW5hYmxlZD86IGJvb2xlYW4gfT4gfSB9KT8uY2FsZW5kYXJTZXRNYW5hZ2VyPy5nZXRBY3RpdmVTZXQ/LigpO1xyXG5cdFx0XHQgXHJcblx0XHRcdHJldHVybiBjYWxlbmRhclNldD8uW25vdW5dPy5lbmFibGVkID09PSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgVVJMIHBhcmFtcyBpbmRpY2F0ZSBhIGZpbGUvd29ya3NwYWNlIHNob3VsZCBiZSBvcGVuZWQgKHNraXAgaG9tZXBhZ2UpXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBoYXNVcmxQYXJhbXMoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHQvLyBDaGVjayBmb3IgVVJMIHBhcmFtcyB0aGF0IGluZGljYXRlIGEgc3BlY2lmaWMgZmlsZS93b3Jrc3BhY2Ugc2hvdWxkIGJlIG9wZW5lZFxyXG5cdFx0Ly8gVGhpcyBwcmV2ZW50cyBob21lcGFnZSBmcm9tIG9wZW5pbmcgd2hlbiBPYnNpZGlhbiBpcyBvcGVuZWQgd2l0aCBhIHNwZWNpZmljIGZpbGVcclxuXHRcdGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuT0JTX0FDVCkge1xyXG5cdFx0XHRjb25zdCBwYXJhbXMgPSBPYmplY3Qua2V5cyh3aW5kb3cuT0JTX0FDVCk7XHJcblx0XHRcdGNvbnN0IGFjdGlvbiA9IHdpbmRvdy5PQlNfQUNULmFjdGlvbjtcclxuXHRcdFx0cmV0dXJuIChcclxuXHRcdFx0XHRhY3Rpb24gIT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRcdFsnb3BlbicsICdhZHZhbmNlZC11cmknXS5pbmNsdWRlcyhhY3Rpb24pICYmXHJcblx0XHRcdFx0WydmaWxlJywgJ2ZpbGVwYXRoJywgJ3dvcmtzcGFjZSddLnNvbWUoZSA9PiBwYXJhbXMuaW5jbHVkZXMoZSkpXHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvLyBcIk9wZW4gd2hlbiBlbXB0eVwiIGZlYXR1cmUgcmVtb3ZlZCAtIHJlZHVuZGFudCB3aXRoIFwiTmV3IHRhYiByZXBsYWNlbWVudDogb25seSB3aGVuIGVtcHR5XCJcclxuXHQvLyBTaW5jZSBPYnNpZGlhbiBhdXRvLWNyZWF0ZXMgYW4gZW1wdHkgdGFiIHdoZW4geW91IGNsb3NlIHRoZSBsYXN0IG9uZSwgdGhleSBkbyB0aGUgc2FtZSB0aGluZ1xyXG59XHJcbiIsICIvKipcclxuICogSG9tZSBCYXNlIFBsdWdpbiBTZXR0aW5nc1xyXG4gKi9cclxuXHJcbmV4cG9ydCB0eXBlIFZpZXdNb2RlID0gJ2RlZmF1bHQnIHwgJ3ByZXZpZXcnIHwgJ3NvdXJjZScgfCAnbGl2ZSc7XHJcbmV4cG9ydCB0eXBlIE5ld1RhYk1vZGUgPSAnb25seS13aGVuLWVtcHR5JyB8ICdhbHdheXMnO1xyXG5leHBvcnQgdHlwZSBPcGVuaW5nTW9kZSA9ICdyZXBsYWNlLWFsbCcgfCAncmVwbGFjZS1sYXN0JyB8ICdyZXRhaW4nO1xyXG5cclxuLyoqXHJcbiAqIEhvbWVwYWdlIHR5cGUgZW51bSAtIG1hdGNoZXMgaG9tZXBhZ2UgcGx1Z2luJ3MgS2luZCBlbnVtXHJcbiAqL1xyXG5leHBvcnQgZW51bSBIb21lQmFzZVR5cGUge1xyXG5cdEZpbGUgPSAnRmlsZScsXHJcblx0V29ya3NwYWNlID0gJ1dvcmtzcGFjZScsXHJcblx0UmFuZG9tID0gJ1JhbmRvbSBmaWxlJyxcclxuXHRSYW5kb21Gb2xkZXIgPSAnUmFuZG9tIGluIGZvbGRlcicsXHJcblx0R3JhcGggPSAnR3JhcGggdmlldycsXHJcblx0Tm9uZSA9ICdOb3RoaW5nJyxcclxuXHRKb3VybmFsID0gJ0pvdXJuYWwnLFxyXG5cdERhaWx5Tm90ZSA9ICdEYWlseSBOb3RlJyxcclxuXHRXZWVrbHlOb3RlID0gJ1dlZWtseSBOb3RlJyxcclxuXHRNb250aGx5Tm90ZSA9ICdNb250aGx5IE5vdGUnLFxyXG5cdFllYXJseU5vdGUgPSAnWWVhcmx5IE5vdGUnLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEhvbWVCYXNlU2V0dGluZ3Mge1xyXG5cdC8vIEdlbmVyYWxcclxuXHRob21lQmFzZVBhdGg6IHN0cmluZzsgLy8gTGVnYWN5IC0ga2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxyXG5cdGhvbWVCYXNlVHlwZTogSG9tZUJhc2VUeXBlO1xyXG5cdGhvbWVCYXNlVmFsdWU6IHN0cmluZzsgLy8gVHlwZS1zcGVjaWZpYyB2YWx1ZSAoZmlsZSBwYXRoLCB3b3Jrc3BhY2UgbmFtZSwgZm9sZGVyIHBhdGgsIGV0Yy4pXHJcblx0b3Blbk9uU3RhcnR1cDogYm9vbGVhbjtcclxuXHRvcGVuVmlld01vZGU6IFZpZXdNb2RlO1xyXG5cdG9wZW5Nb2RlOiBPcGVuaW5nTW9kZTtcclxuXHRtYW51YWxPcGVuTW9kZTogT3BlbmluZ01vZGU7XHJcblxyXG5cdC8vIFRhYiBCZWhhdmlvclxyXG5cdHJlcGxhY2VOZXdUYWI6IGJvb2xlYW47XHJcblx0bmV3VGFiTW9kZTogTmV3VGFiTW9kZTtcclxuXHRrZWVwRXhpc3RpbmdUYWJzOiBib29sZWFuOyAvLyBMZWdhY3kgLSBtYXBzIHRvIG9wZW5Nb2RlOiAncmVwbGFjZS1hbGwnIHZzICdyZXRhaW4nXHJcblxyXG5cdC8vIFVJIEZlYXR1cmVzIChvZmYgYnkgZGVmYXVsdClcclxuXHRzaG93U3RpY2t5SG9tZUljb246IGJvb2xlYW47XHJcblx0c3RpY2t5SWNvbk5hbWU6IHN0cmluZyB8IG51bGw7XHJcblx0aGlkZUhvbWVUYWJIZWFkZXI6IGJvb2xlYW47XHJcblx0cmVwbGFjZU1vYmlsZU5ld1RhYjogYm9vbGVhbjtcclxuXHRcclxuXHQvLyBNb2JpbGVcclxuXHRzZXBhcmF0ZU1vYmlsZTogYm9vbGVhbjtcclxuXHRtb2JpbGVIb21lQmFzZVBhdGg6IHN0cmluZzsgLy8gTGVnYWN5XHJcblx0bW9iaWxlSG9tZUJhc2VUeXBlOiBIb21lQmFzZVR5cGU7XHJcblx0bW9iaWxlSG9tZUJhc2VWYWx1ZTogc3RyaW5nO1xyXG5cclxuXHQvLyBBdXRvbWF0aW9uXHJcblx0Y29tbWFuZE9uT3Blbjogc3RyaW5nO1xyXG5cdFxyXG5cdC8vIFZpZXcgYmVoYXZpb3JcclxuXHRyZXZlcnRWaWV3OiBib29sZWFuO1xyXG5cdGF1dG9TY3JvbGw6IGJvb2xlYW47XHJcblx0aGlkZVJlbGVhc2VOb3RlczogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEhvbWVCYXNlU2V0dGluZ3MgPSB7XHJcblx0Ly8gR2VuZXJhbFxyXG5cdGhvbWVCYXNlUGF0aDogJycsIC8vIExlZ2FjeVxyXG5cdGhvbWVCYXNlVHlwZTogSG9tZUJhc2VUeXBlLkZpbGUsXHJcblx0aG9tZUJhc2VWYWx1ZTogJycsXHJcblx0b3Blbk9uU3RhcnR1cDogdHJ1ZSxcclxuXHRvcGVuVmlld01vZGU6ICdkZWZhdWx0JyxcclxuXHRvcGVuTW9kZTogJ3JlcGxhY2UtYWxsJyxcclxuXHRtYW51YWxPcGVuTW9kZTogJ3JldGFpbicsXHJcblxyXG5cdC8vIFRhYiBCZWhhdmlvclxyXG5cdHJlcGxhY2VOZXdUYWI6IGZhbHNlLFxyXG5cdG5ld1RhYk1vZGU6ICdvbmx5LXdoZW4tZW1wdHknLCAvLyBEZWZhdWx0OiBvbmx5IHJlcGxhY2Ugd2hlbiBubyB0YWJzIGFyZSBvcGVuXHJcblx0a2VlcEV4aXN0aW5nVGFiczogdHJ1ZSxcclxuXHJcblx0Ly8gVUkgRmVhdHVyZXNcclxuXHRzaG93U3RpY2t5SG9tZUljb246IGZhbHNlLFxyXG5cdHN0aWNreUljb25OYW1lOiAnaG9tZScsXHJcblx0aGlkZUhvbWVUYWJIZWFkZXI6IGZhbHNlLFxyXG5cdHJlcGxhY2VNb2JpbGVOZXdUYWI6IGZhbHNlLFxyXG5cdFxyXG5cdC8vIE1vYmlsZVxyXG5cdHNlcGFyYXRlTW9iaWxlOiBmYWxzZSxcclxuXHRtb2JpbGVIb21lQmFzZVBhdGg6ICcnLCAvLyBMZWdhY3lcclxuXHRtb2JpbGVIb21lQmFzZVR5cGU6IEhvbWVCYXNlVHlwZS5GaWxlLFxyXG5cdG1vYmlsZUhvbWVCYXNlVmFsdWU6ICcnLFxyXG5cclxuXHQvLyBBdXRvbWF0aW9uXHJcblx0Y29tbWFuZE9uT3BlbjogJycsXHJcblx0XHJcblx0Ly8gVmlldyBiZWhhdmlvclxyXG5cdHJldmVydFZpZXc6IGZhbHNlLFxyXG5cdGF1dG9TY3JvbGw6IGZhbHNlLFxyXG5cdGhpZGVSZWxlYXNlTm90ZXM6IGZhbHNlLCAvLyBPRkYgYnkgZGVmYXVsdFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFZpZXcgbW9kZSBkaXNwbGF5IG5hbWVzIGZvciBzZXR0aW5ncyBkcm9wZG93blxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFZJRVdfTU9ERV9PUFRJT05TOiBSZWNvcmQ8Vmlld01vZGUsIHN0cmluZz4gPSB7XHJcblx0J2RlZmF1bHQnOiAnRGVmYXVsdCcsXHJcblx0J3ByZXZpZXcnOiAnUmVhZGluZyB2aWV3JyxcclxuXHQnc291cmNlJzogJ1NvdXJjZSBtb2RlJyxcclxuXHQnbGl2ZSc6ICdMaXZlIFByZXZpZXcnLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIE5ldyB0YWIgbW9kZSBkaXNwbGF5IG5hbWVzIGZvciBzZXR0aW5ncyBkcm9wZG93blxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IE5FV19UQUJfTU9ERV9PUFRJT05TOiBSZWNvcmQ8TmV3VGFiTW9kZSwgc3RyaW5nPiA9IHtcclxuXHQnb25seS13aGVuLWVtcHR5JzogJ09ubHkgd2hlbiBubyB0YWJzIGFyZSBvcGVuJyxcclxuXHQnYWx3YXlzJzogJ0Fsd2F5cyByZXBsYWNlIG5ldyB0YWJzJyxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBPcGVuaW5nIG1vZGUgZGlzcGxheSBuYW1lcyBmb3Igc2V0dGluZ3MgZHJvcGRvd25cclxuICovXHJcbmV4cG9ydCBjb25zdCBPUEVOSU5HX01PREVfT1BUSU9OUzogUmVjb3JkPE9wZW5pbmdNb2RlLCBzdHJpbmc+ID0ge1xyXG5cdCdyZXBsYWNlLWFsbCc6ICdSZXBsYWNlIGFsbCBvcGVuIG5vdGVzJyxcclxuXHQncmVwbGFjZS1sYXN0JzogJ1JlcGxhY2UgbGFzdCBub3RlJyxcclxuXHQncmV0YWluJzogJ0tlZXAgb3BlbiBub3RlcycsXHJcbn07XHJcblxyXG4vKipcclxuICogSG9tZXBhZ2UgdHlwZXMgdGhhdCBkb24ndCByZXF1aXJlIGEgdmFsdWUgaW5wdXRcclxuICovXHJcbmV4cG9ydCBjb25zdCBVTkNIQU5HRUFCTEVfVFlQRVM6IEhvbWVCYXNlVHlwZVtdID0gW1xyXG5cdEhvbWVCYXNlVHlwZS5SYW5kb20sXHJcblx0SG9tZUJhc2VUeXBlLkdyYXBoLFxyXG5cdEhvbWVCYXNlVHlwZS5Ob25lLFxyXG5cdEhvbWVCYXNlVHlwZS5EYWlseU5vdGUsXHJcblx0SG9tZUJhc2VUeXBlLldlZWtseU5vdGUsXHJcblx0SG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlLFxyXG5cdEhvbWVCYXNlVHlwZS5ZZWFybHlOb3RlLFxyXG5dO1xyXG4iLCAiLyoqXHJcbiAqIEhvbWUgQmFzZSBTZXR0aW5ncyBUYWJcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB0eXBlIEhvbWVCYXNlUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBcclxuXHRWSUVXX01PREVfT1BUSU9OUywgXHJcblx0TkVXX1RBQl9NT0RFX09QVElPTlMsIFxyXG5cdE9QRU5JTkdfTU9ERV9PUFRJT05TLFxyXG5cdFZpZXdNb2RlLCBcclxuXHROZXdUYWJNb2RlLFxyXG5cdE9wZW5pbmdNb2RlLFxyXG5cdEhvbWVCYXNlVHlwZSxcclxuXHRVTkNIQU5HRUFCTEVfVFlQRVMsXHJcbn0gZnJvbSAnLi4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwIH0gZnJvbSAnLi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0JztcclxuaW1wb3J0IHsgRmlsZVBhdGhTdWdnZXN0LCBGb2xkZXJTdWdnZXN0LCBXb3Jrc3BhY2VTdWdnZXN0IH0gZnJvbSAnLi9maWxlLXN1Z2dlc3QnO1xyXG5pbXBvcnQgeyBDb21tYW5kU3VnZ2VzdCwgZ2V0Q29tbWFuZEJ5SWQgfSBmcm9tICcuL2NvbW1hbmQtc3VnZ2VzdCc7XHJcbmltcG9ydCB7IEljb25QaWNrZXIgfSBmcm9tICcuL2ljb24tcGlja2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBIb21lQmFzZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IEhvbWVCYXNlUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBIb21lQmFzZVBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0Ly8gR2V0IGFjdGl2ZSBzZXR0aW5ncyAobW9iaWxlIG9yIGRlc2t0b3ApXHJcblx0XHRjb25zdCBpc01vYmlsZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNlcGFyYXRlTW9iaWxlO1xyXG5cdFx0Y29uc3QgYWN0aXZlVHlwZSA9IGlzTW9iaWxlID8gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlIDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VUeXBlO1xyXG5cdFx0Y29uc3QgYWN0aXZlVmFsdWUgPSBpc01vYmlsZSA/IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUgOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVZhbHVlO1xyXG5cclxuXHRcdC8vIEdlbmVyYWwgU2V0dGluZ3MgKG5vIGhlYWRpbmcgZm9yIGZpcnN0IGdyb3VwKVxyXG5cdFx0Y29uc3QgZ2VuZXJhbEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgdW5kZWZpbmVkLCAnaG9tZS1iYXNlJyk7XHJcblxyXG5cdFx0Ly8gSG9tZSBwYWdlIHR5cGUgZHJvcGRvd25cclxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnSG9tZSBwYWdlJylcclxuXHRcdFx0XHQuc2V0RGVzYygnV2hhdCB0byBvcGVuIGFzIHlvdXIgaG9tZSBiYXNlJylcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcblx0XHRcdFx0XHRsZXQgcGx1Z2luRGlzYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Zm9yIChjb25zdCB0eXBlIG9mIE9iamVjdC52YWx1ZXMoSG9tZUJhc2VUeXBlKSkge1xyXG5cdFx0XHRcdFx0XHRpZiAoIXRoaXMucGx1Z2luLmhhc1JlcXVpcmVkUGx1Z2luKHR5cGUpKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gSWYgY3VycmVudCB0eXBlIGlzIGRpc2FibGVkLCBtYXJrIGl0IGJ1dCBzdGlsbCBhbGxvdyBpdFxyXG5cdFx0XHRcdFx0XHRcdGlmICh0eXBlID09PSBhY3RpdmVUeXBlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRwbHVnaW5EaXNhYmxlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odHlwZSwgdHlwZSk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEFkZCBkaXNhYmxlZCBvcHRpb25cclxuXHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLnNlbGVjdEVsLmNyZWF0ZUVsKCdvcHRpb24nLCB7IFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB0eXBlLCBcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXR0cjogeyBkaXNhYmxlZDogJ3RydWUnIH0gXHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odHlwZSwgdHlwZSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0ZHJvcGRvd25cclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGFjdGl2ZVR5cGUgfHwgSG9tZUJhc2VUeXBlLkZpbGUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoaXNNb2JpbGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVHlwZSA9IHZhbHVlIGFzIEhvbWVCYXNlVHlwZTtcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VUeXBlID0gdmFsdWUgYXMgSG9tZUJhc2VUeXBlO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gc2hvdy9oaWRlIHZhbHVlIGlucHV0XHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5wYXJlbnRFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFNob3cgd2FybmluZyBpZiBjdXJyZW50IHR5cGUgcmVxdWlyZXMgYSBkaXNhYmxlZCBwbHVnaW5cclxuXHRcdFx0XHRcdGlmIChwbHVnaW5EaXNhYmxlZCkge1xyXG5cdFx0XHRcdFx0XHRzZXR0aW5nLmRlc2NFbC5jcmVhdGVEaXYoe1xyXG5cdFx0XHRcdFx0XHRcdHRleHQ6ICdUaGUgcGx1Z2luIHJlcXVpcmVkIGZvciB0aGlzIGhvbWUgcGFnZSB0eXBlIGlzblxcJ3QgYXZhaWxhYmxlLicsXHJcblx0XHRcdFx0XHRcdFx0Y2xzOiAnbW9kLXdhcm5pbmcnXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gVmFsdWUgaW5wdXQgKGNvbmRpdGlvbmFsIG9uIHR5cGUpXHJcblx0XHRpZiAoIVVOQ0hBTkdFQUJMRV9UWVBFUy5pbmNsdWRlcyhhY3RpdmVUeXBlKSkge1xyXG5cdFx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdGxldCBkZXNjID0gJyc7XHJcblx0XHRcdFx0bGV0IHBsYWNlaG9sZGVyID0gJyc7XHJcblxyXG5cdFx0XHRcdGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xyXG5cdFx0XHRcdFx0ZGVzYyA9ICdUaGUgZmlsZSB0byBvcGVuIGFzIHlvdXIgaG9tZSBiYXNlIChzdXBwb3J0cyAubWQsIC5tZHgsIC5jYW52YXMsIC5iYXNlKSc7XHJcblx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdQYXRoIHRvIGhvbWUgYmFzZSBmaWxlJztcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcclxuXHRcdFx0XHRcdGRlc2MgPSAnVGhlIHdvcmtzcGFjZSB0byBsb2FkIGFzIHlvdXIgaG9tZSBiYXNlJztcclxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1dvcmtzcGFjZSBuYW1lJztcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIpIHtcclxuXHRcdFx0XHRcdGRlc2MgPSAnVGhlIGZvbGRlciB0byBwaWNrIGEgcmFuZG9tIGZpbGUgZnJvbSc7XHJcblx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdGb2xkZXIgcGF0aCc7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuSm91cm5hbCkge1xyXG5cdFx0XHRcdFx0ZGVzYyA9ICdUaGUgam91cm5hbCBuYW1lJztcclxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0pvdXJuYWwgbmFtZSc7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZShhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSA/ICdGaWxlJyA6IFxyXG5cdFx0XHRcdFx0XHRcdGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UgPyAnV29ya3NwYWNlJyA6XHJcblx0XHRcdFx0XHRcdFx0YWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciA/ICdGb2xkZXInIDpcclxuXHRcdFx0XHRcdFx0XHRhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuSm91cm5hbCA/ICdKb3VybmFsJyA6ICdWYWx1ZScpXHJcblx0XHRcdFx0XHQuc2V0RGVzYyhkZXNjKVxyXG5cdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHRcdFx0Ly8gQWRkIGFwcHJvcHJpYXRlIHN1Z2dlc3RlclxyXG5cdFx0XHRcdFx0XHRpZiAoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcclxuXHRcdFx0XHRcdFx0XHRuZXcgRmlsZVBhdGhTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcclxuXHRcdFx0XHRcdFx0XHRuZXcgV29ya3NwYWNlU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyKSB7XHJcblx0XHRcdFx0XHRcdFx0bmV3IEZvbGRlclN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXIpXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKGFjdGl2ZVZhbHVlIHx8ICcnKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChpc01vYmlsZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFsc28gdXBkYXRlIGxlZ2FjeSBwYXRoIGZvciBjb21wYXRpYmlsaXR5XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlUGF0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVZhbHVlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFsc28gdXBkYXRlIGxlZ2FjeSBwYXRoIGZvciBjb21wYXRpYmlsaXR5XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlUGF0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ09wZW4gb24gc3RhcnR1cCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ09wZW4gdGhlIGhvbWUgYmFzZSB3aGVuIGxhdW5jaGluZyBPYnNpZGlhbicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5PblN0YXJ0dXApXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuT25TdGFydHVwID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gXCJPcGVuIHdoZW4gZW1wdHlcIiBzZXR0aW5nIHJlbW92ZWQgLSByZWR1bmRhbnQgd2l0aCBcIk5ldyB0YWIgcmVwbGFjZW1lbnQ6IG9ubHkgd2hlbiBlbXB0eVwiXHJcblx0XHQvLyBTaW5jZSBPYnNpZGlhbiBhdXRvLWNyZWF0ZXMgYW4gZW1wdHkgdGFiIHdoZW4geW91IGNsb3NlIHRoZSBsYXN0IG9uZSwgdGhleSBkbyB0aGUgc2FtZSB0aGluZ1xyXG5cclxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnT3BlbmluZyBtb2RlIChzdGFydHVwKScpXHJcblx0XHRcdFx0LnNldERlc2MoJ0hvdyB0byBoYW5kbGUgZXhpc3RpbmcgdGFicyB3aGVuIG9wZW5pbmcgb24gc3RhcnR1cCcpXHJcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbdmFsdWUsIGxhYmVsXSBvZiBPYmplY3QuZW50cmllcyhPUEVOSU5HX01PREVfT1BUSU9OUykpIHtcclxuXHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHZhbHVlLCBsYWJlbCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3Blbk1vZGUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuTW9kZSA9IHZhbHVlIGFzIE9wZW5pbmdNb2RlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnT3BlbmluZyBtb2RlIChtYW51YWwpJylcclxuXHRcdFx0XHQuc2V0RGVzYygnSG93IHRvIGhhbmRsZSBleGlzdGluZyB0YWJzIHdoZW4gb3BlbmluZyBtYW51YWxseScpXHJcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbdmFsdWUsIGxhYmVsXSBvZiBPYmplY3QuZW50cmllcyhPUEVOSU5HX01PREVfT1BUSU9OUykpIHtcclxuXHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHZhbHVlLCBsYWJlbCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubWFudWFsT3Blbk1vZGUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYW51YWxPcGVuTW9kZSA9IHZhbHVlIGFzIE9wZW5pbmdNb2RlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnVmlldyBtb2RlJylcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0LnNldERlc2MoJ0hvdyB0byBvcGVuIG1hcmtkb3duIGFuZCBNRFggZmlsZXMgKGNhbnZhcy9iYXNlIHVzZSBuYXRpdmUgdmlld3MpJylcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFt2YWx1ZSwgbGFiZWxdIG9mIE9iamVjdC5lbnRyaWVzKFZJRVdfTU9ERV9PUFRJT05TKSkge1xyXG5cdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odmFsdWUsIGxhYmVsKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGRyb3Bkb3duXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuVmlld01vZGUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuVmlld01vZGUgPSB2YWx1ZSBhcyBWaWV3TW9kZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1JldmVydCB2aWV3IG9uIGNsb3NlJylcclxuXHRcdFx0XHQuc2V0RGVzYygnV2hlbiBuYXZpZ2F0aW5nIGF3YXkgZnJvbSB0aGUgaG9tZSBiYXNlLCByZXN0b3JlIHRoZSBkZWZhdWx0IHZpZXcnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZlcnRWaWV3KVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2ZXJ0VmlldyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQXV0by1zY3JvbGwnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIG9wZW5pbmcgdGhlIGhvbWUgYmFzZSwgc2Nyb2xsIHRvIHRoZSBib3R0b20gYW5kIGZvY3VzIG9uIHRoZSBsYXN0IGxpbmUnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU2Nyb2xsKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1Njcm9sbCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnSGlkZSByZWxlYXNlIG5vdGVzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnTmV2ZXIgZGlzcGxheSByZWxlYXNlIG5vdGVzIHdoZW4gT2JzaWRpYW4gdXBkYXRlcycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVSZWxlYXNlTm90ZXMpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlUmVsZWFzZU5vdGVzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gVGFiIEJlaGF2aW9yIFNldHRpbmdzXHJcblx0XHRjb25zdCB0YWJHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdUYWIgQmVoYXZpb3InLCAnaG9tZS1iYXNlJyk7XHJcblxyXG5cdFx0dGFiR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1JlcGxhY2UgbmV3IHRhYnMnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdPcGVuIGhvbWUgYmFzZSBpbnN0ZWFkIG9mIG5ldyBlbXB0eSB0YWJzJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYilcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGxhY2VOZXdUYWIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gYmVmb3JlIHJlLXJlbmRlcmluZ1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpOyAvLyBSZS1yZW5kZXIgdG8gc2hvdy9oaWRlIGRlcGVuZGVudCBzZXR0aW5nXHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyaW5nXHJcblx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBPbmx5IHNob3cgbmV3IHRhYiBtb2RlIGlmIHJlcGxhY2UgbmV3IHRhYiBpcyBlbmFibGVkXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYikge1xyXG5cdFx0XHR0YWJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ05ldyB0YWIgcmVwbGFjZW1lbnQgbW9kZScpXHJcblx0XHRcdFx0XHQuc2V0RGVzYygnV2hlbiB0byByZXBsYWNlIG5ldyB0YWJzIHdpdGggaG9tZSBiYXNlJylcclxuXHRcdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBbdmFsdWUsIGxhYmVsXSBvZiBPYmplY3QuZW50cmllcyhORVdfVEFCX01PREVfT1BUSU9OUykpIHtcclxuXHRcdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odmFsdWUsIGxhYmVsKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZXdUYWJNb2RlKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYk1vZGUgPSB2YWx1ZSBhcyBOZXdUYWJNb2RlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTGVnYWN5IFwiS2VlcCBleGlzdGluZyB0YWJzXCIgLSBrZXB0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGJ1dCBoaWRkZW5cclxuXHRcdC8vIChmdW5jdGlvbmFsaXR5IG5vdyBoYW5kbGVkIGJ5IFwiT3BlbmluZyBtb2RlIChzdGFydHVwKVwiKVxyXG5cclxuXHRcdC8vIFVJIEZlYXR1cmVzIFNldHRpbmdzXHJcblx0XHRjb25zdCB1aUdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ1VJIEZlYXR1cmVzJywgJ2hvbWUtYmFzZScpO1xyXG5cclxuXHRcdHVpR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1N0aWNreSBob21lIGljb24nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdTaG93IGEgaG9tZSBpY29uIGluIHRoZSB0YWIgYmFyIHRoYXQgc3RheXMgcGlubmVkIHRvIHRoZSBsZWZ0IChkZXNrdG9wIG9ubHkpJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udXBkYXRlU3RpY2t5VGFiSWNvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiBiZWZvcmUgcmUtcmVuZGVyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5wYXJlbnRFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7IC8vIFJlLXJlbmRlciB0byBzaG93L2hpZGUgZGVwZW5kZW50IHNldHRpbmdcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIE9ubHkgc2hvdyBzdGlja3kgaWNvbiBzZXR0aW5ncyBpZiBzdGlja3kgaWNvbiBpcyBlbmFibGVkXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKSB7XHJcblx0XHRcdHVpR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdJY29uJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdUaGUgaWNvbiB0byBkaXNwbGF5IGluIHRoZSBzdGlja3kgaG9tZSBpY29uJylcclxuXHRcdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBpY29uTmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnN0aWNreUljb25OYW1lIHx8ICdob21lJztcclxuXHRcdFx0XHRcdFx0YnV0dG9uXHJcblx0XHRcdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ0NoYW5nZSBpY29uJylcclxuXHRcdFx0XHRcdFx0XHQuc2V0SWNvbihpY29uTmFtZSlcclxuXHRcdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBwaWNrZXIgPSBuZXcgSWNvblBpY2tlcihcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN0aWNreUljb25OYW1lLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQoaWNvbjogc3RyaW5nIHwgbnVsbCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN0aWNreUljb25OYW1lID0gaWNvbjtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHRoZSBpY29uIGRpc3BsYXlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgc2V0dGluZ3MgdG8gdXBkYXRlIGJ1dHRvbiBpY29uXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0cGlja2VyLm9wZW4oKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHVpR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdIaWRlIHRhYiBoZWFkZXInKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ0hpZGUgdGhlIGdob3N0IHRhYiBoZWFkZXIgd2hlbiBpdFxcJ3Mgb3BlbiwgdXNpbmcgdGhlIHN0aWNreSBpY29uIGFzIHRoZSB0YWIgaW5kaWNhdG9yJylcclxuXHRcdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUhvbWVUYWJIZWFkZXIpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUhvbWVUYWJIZWFkZXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dWlHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnUmVwbGFjZSBtb2JpbGUgbmV3IHRhYiBidXR0b24nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdDaGFuZ2UgdGhlIG1vYmlsZSBuZXcgdGFiIGJ1dHRvbiB0byBhIGhvbWUgaWNvbicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGxhY2VNb2JpbGVOZXdUYWIpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTW9iaWxlTmV3VGFiID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udXBkYXRlTW9iaWxlQnV0dG9uKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gTW9iaWxlIFNldHRpbmdzXHJcblx0XHRjb25zdCBtb2JpbGVHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdNb2JpbGUnLCAnaG9tZS1iYXNlJyk7XHJcblxyXG5cdFx0bW9iaWxlR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdTZXBhcmF0ZSBtb2JpbGUgaG9tZSBwYWdlJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdVc2UgYSBkaWZmZXJlbnQgaG9tZSBwYWdlIG9uIG1vYmlsZSBkZXZpY2VzJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VwYXJhdGVNb2JpbGUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXBhcmF0ZU1vYmlsZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byBzaG93IG1vYmlsZSBzZXR0aW5nc1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU2hvdyBtb2JpbGUtc3BlY2lmaWMgc2V0dGluZ3MgaWYgc2VwYXJhdGUgbW9iaWxlIGlzIGVuYWJsZWRcclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXBhcmF0ZU1vYmlsZSkge1xyXG5cdFx0XHRtb2JpbGVHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ01vYmlsZSBob21lIHBhZ2UnKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ1doYXQgdG8gb3BlbiBhcyB5b3VyIGhvbWUgYmFzZSBvbiBtb2JpbGUnKVxyXG5cdFx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBtb2JpbGVUeXBlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlO1xyXG5cdFx0XHRcdFx0XHRsZXQgcGx1Z2luRGlzYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgdHlwZSBvZiBPYmplY3QudmFsdWVzKEhvbWVCYXNlVHlwZSkpIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMucGx1Z2luLmhhc1JlcXVpcmVkUGx1Z2luKHR5cGUpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBJZiBjdXJyZW50IHR5cGUgaXMgZGlzYWJsZWQsIG1hcmsgaXQgYnV0IHN0aWxsIGFsbG93IGl0XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZSA9PT0gbW9iaWxlVHlwZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRwbHVnaW5EaXNhYmxlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0eXBlLCB0eXBlKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCBkaXNhYmxlZCBvcHRpb25cclxuXHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGV4dDogdHlwZSwgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0cjogeyBkaXNhYmxlZDogJ3RydWUnIH0gXHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHR5cGUsIHR5cGUpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0ZHJvcGRvd25cclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUobW9iaWxlVHlwZSlcclxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVR5cGUgPSB2YWx1ZSBhcyBIb21lQmFzZVR5cGU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIFNob3cgd2FybmluZyBpZiBjdXJyZW50IHR5cGUgcmVxdWlyZXMgYSBkaXNhYmxlZCBwbHVnaW5cclxuXHRcdFx0XHRcdFx0aWYgKHBsdWdpbkRpc2FibGVkKSB7XHJcblx0XHRcdFx0XHRcdFx0c2V0dGluZy5kZXNjRWwuY3JlYXRlRGl2KHtcclxuXHRcdFx0XHRcdFx0XHRcdHRleHQ6ICdUaGUgcGx1Z2luIHJlcXVpcmVkIGZvciB0aGlzIGhvbWUgcGFnZSB0eXBlIGlzblxcJ3QgYXZhaWxhYmxlLicsXHJcblx0XHRcdFx0XHRcdFx0XHRjbHM6ICdtb2Qtd2FybmluZydcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0aWYgKCFVTkNIQU5HRUFCTEVfVFlQRVMuaW5jbHVkZXModGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlKSkge1xyXG5cdFx0XHRcdG1vYmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IG1vYmlsZVR5cGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVR5cGU7XHJcblx0XHRcdFx0XHRsZXQgZGVzYyA9ICcnO1xyXG5cdFx0XHRcdFx0bGV0IHBsYWNlaG9sZGVyID0gJyc7XHJcblxyXG5cdFx0XHRcdFx0aWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XHJcblx0XHRcdFx0XHRcdGRlc2MgPSAnVGhlIGZpbGUgdG8gb3BlbiBhcyB5b3VyIGhvbWUgYmFzZSBvbiBtb2JpbGUnO1xyXG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdQYXRoIHRvIGhvbWUgYmFzZSBmaWxlJztcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSkge1xyXG5cdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSB3b3Jrc3BhY2UgdG8gbG9hZCBhcyB5b3VyIGhvbWUgYmFzZSBvbiBtb2JpbGUnO1xyXG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdXb3Jrc3BhY2UgbmFtZSc7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIpIHtcclxuXHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgZm9sZGVyIHRvIHBpY2sgYSByYW5kb20gZmlsZSBmcm9tIG9uIG1vYmlsZSc7XHJcblx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0ZvbGRlciBwYXRoJztcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwpIHtcclxuXHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgam91cm5hbCBuYW1lIGZvciBtb2JpbGUnO1xyXG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdKb3VybmFsIG5hbWUnO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdFx0LnNldE5hbWUobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUgPyAnTW9iaWxlIGZpbGUnIDogXHJcblx0XHRcdFx0XHRcdFx0XHRtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlID8gJ01vYmlsZSB3b3Jrc3BhY2UnIDpcclxuXHRcdFx0XHRcdFx0XHRcdG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIgPyAnTW9iaWxlIGZvbGRlcicgOlxyXG5cdFx0XHRcdFx0XHRcdFx0bW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwgPyAnTW9iaWxlIGpvdXJuYWwnIDogJ01vYmlsZSB2YWx1ZScpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKGRlc2MpXHJcblx0XHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRuZXcgRmlsZVBhdGhTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0bmV3IFdvcmtzcGFjZVN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRuZXcgRm9sZGVyU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyKVxyXG5cdFx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUgfHwgJycpXHJcblx0XHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VQYXRoID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBBdXRvbWF0aW9uIFNldHRpbmdzXHJcblx0XHRjb25zdCBhdXRvbWF0aW9uR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnQXV0b21hdGlvbicsICdob21lLWJhc2UnKTtcclxuXHJcblx0XHRhdXRvbWF0aW9uR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRjb25zdCBjb21tYW5kSWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb21tYW5kT25PcGVuO1xyXG5cdFx0XHRjb25zdCBjb21tYW5kID0gY29tbWFuZElkID8gZ2V0Q29tbWFuZEJ5SWQodGhpcy5hcHAsIGNvbW1hbmRJZCkgOiB1bmRlZmluZWQ7XHJcblx0XHRcdGNvbnN0IGRpc3BsYXlWYWx1ZSA9IGNvbW1hbmQgPyBjb21tYW5kLm5hbWUgOiBjb21tYW5kSWQ7XHJcblxyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0NvbW1hbmQgb24gb3BlbicpXHJcblx0XHRcdFx0LnNldERlc2MoJ1J1biBhbiBPYnNpZGlhbiBjb21tYW5kIHdoZW4gb3BlbmluZyBob21lIGJhc2UnKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHQvLyBBZGQgY29tbWFuZCBzdWdnZXN0ZXJcclxuXHRcdFx0XHRcdG5ldyBDb21tYW5kU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ1NlYXJjaCBmb3IgYSBjb21tYW5kLi4uJylcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGRpc3BsYXlWYWx1ZSB8fCAnJylcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbW1hbmRPbk9wZW4gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ0bikgPT4ge1xyXG5cdFx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHRcdC5zZXRJY29uKCd4JylcclxuXHRcdFx0XHRcdFx0LnNldFRvb2x0aXAoJ0NsZWFyIGNvbW1hbmQnKVxyXG5cdFx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29tbWFuZE9uT3BlbiA9ICcnO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiBiZWZvcmUgcmUtcmVuZGVyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5wYXJlbnRFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyaW5nXHJcblx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBDb21wYXRpYmlsaXR5IHV0aWxpdGllcyBmb3Igc2V0dGluZ3NcclxuICogUHJvdmlkZXMgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBmb3IgU2V0dGluZ0dyb3VwIChyZXF1aXJlcyBBUEkgMS4xMS4wKylcclxuICovXHJcblxyXG5pbXBvcnQgeyBTZXR0aW5nLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0ICogYXMgT2JzaWRpYW5Nb2R1bGUgZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHdvcmtzIHdpdGggYm90aCBTZXR0aW5nR3JvdXAgYW5kIGZhbGxiYWNrIGNvbnRhaW5lclxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nc0NvbnRhaW5lciB7XHJcblx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIHNldHRpbmdzIGNvbnRhaW5lciB0aGF0IHVzZXMgU2V0dGluZ0dyb3VwIGlmIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspLFxyXG4gKiBvdGhlcndpc2UgZmFsbHMgYmFjayB0byBjcmVhdGluZyBhIGhlYWRpbmcgYW5kIHVzaW5nIHRoZSBjb250YWluZXIgZGlyZWN0bHkuXHJcbiAqIFxyXG4gKiBVc2VzIHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSB0byBjaGVjayBpZiBTZXR0aW5nR3JvdXAgaXMgYXZhaWxhYmxlLlxyXG4gKiBUaGlzIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nLlxyXG4gKiBcclxuICogQHBhcmFtIGNvbnRhaW5lckVsIC0gVGhlIGNvbnRhaW5lciBlbGVtZW50IGZvciBzZXR0aW5nc1xyXG4gKiBAcGFyYW0gaGVhZGluZyAtIFRoZSBoZWFkaW5nIHRleHQgZm9yIHRoZSBzZXR0aW5ncyBncm91cCAob3B0aW9uYWwpXHJcbiAqIEBwYXJhbSBtYW5pZmVzdElkIC0gVGhlIHBsdWdpbidzIG1hbmlmZXN0IElEIGZvciBDU1Mgc2NvcGluZyAocmVxdWlyZWQgZm9yIGZhbGxiYWNrIG1vZGUpXHJcbiAqIEByZXR1cm5zIEEgY29udGFpbmVyIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIHNldHRpbmdzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2V0dGluZ3NHcm91cChcclxuXHRjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXHJcblx0aGVhZGluZz86IHN0cmluZyxcclxuXHRtYW5pZmVzdElkPzogc3RyaW5nXHJcbik6IFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHQvLyBDaGVjayBpZiBTZXR0aW5nR3JvdXAgaXMgYXZhaWxhYmxlIChBUEkgMS4xMS4wKylcclxuXHRpZiAocmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpKSB7XHJcblx0XHQvLyBBY2Nlc3MgU2V0dGluZ0dyb3VwIHZpYSB0eXBlIGFzc2VydGlvbiBzaW5jZSBpdCBtYXkgbm90IGJlIGluIHR5cGUgZGVmaW5pdGlvbnNcclxuXHRcdGNvbnN0IFNldHRpbmdHcm91cENsYXNzID0gKE9ic2lkaWFuTW9kdWxlIGFzIHVua25vd24gYXMgeyBTZXR0aW5nR3JvdXA/OiBuZXcgKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkgPT4ge1xyXG5cdFx0XHRzZXRIZWFkaW5nKGhlYWRpbmc6IHN0cmluZyk6IHtcclxuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcblx0XHRcdH07XHJcblx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxuXHRcdH0gfSkuU2V0dGluZ0dyb3VwO1xyXG5cdFx0XHJcblx0XHRpZiAoU2V0dGluZ0dyb3VwQ2xhc3MpIHtcclxuXHRcdFx0Y29uc3QgZ3JvdXAgPSBoZWFkaW5nIFxyXG5cdFx0XHRcdD8gbmV3IFNldHRpbmdHcm91cENsYXNzKGNvbnRhaW5lckVsKS5zZXRIZWFkaW5nKGhlYWRpbmcpXHJcblx0XHRcdFx0OiBuZXcgU2V0dGluZ0dyb3VwQ2xhc3MoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKSB7XHJcblx0XHRcdFx0XHRncm91cC5hZGRTZXR0aW5nKGNiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIEZhbGxiYWNrIHBhdGggKGVpdGhlciBBUEkgPCAxLjExLjAgb3IgU2V0dGluZ0dyb3VwIG5vdCBmb3VuZClcclxuXHQvLyBBZGQgc2NvcGluZyBjbGFzcyB0byBjb250YWluZXJFbCB0byBzY29wZSBDU1MgdG8gb25seSB0aGlzIHBsdWdpbidzIHNldHRpbmdzXHJcblx0aWYgKG1hbmlmZXN0SWQpIHtcclxuXHRcdGNvbnRhaW5lckVsLmFkZENsYXNzKGAke21hbmlmZXN0SWR9LXNldHRpbmdzLWNvbXBhdGApO1xyXG5cdH1cclxuXHRcclxuXHRpZiAoaGVhZGluZykge1xyXG5cdFx0Y29uc3QgaGVhZGluZ0VsID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdzZXR0aW5nLWdyb3VwLWhlYWRpbmcnKTtcclxuXHRcdGhlYWRpbmdFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGhlYWRpbmcgfSk7XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiB7XHJcblx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRjYihzZXR0aW5nKTtcclxuXHRcdH1cclxuXHR9O1xyXG59XHJcbiIsICIvKipcclxuICogRmlsZSBQYXRoIFN1Z2dlc3RlciBDb21wb25lbnRcclxuICogUHJvdmlkZXMgYXV0b2NvbXBsZXRlIGZvciBmaWxlIHBhdGhzIGluIHNldHRpbmdzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQWJzdHJhY3RJbnB1dFN1Z2dlc3QsIEFwcCwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogU3VwcG9ydGVkIGZpbGUgZXh0ZW5zaW9ucyBmb3IgaG9tZSBiYXNlXHJcbiAqL1xyXG5jb25zdCBTVVBQT1JURURfRVhURU5TSU9OUyA9IFsnbWQnLCAnbWR4JywgJ2NhbnZhcycsICdiYXNlJ107XHJcblxyXG4vKipcclxuICogRmlsZSBwYXRoIHN1Z2dlc3RlciB0aGF0IHByb3ZpZGVzIGF1dG9jb21wbGV0ZSBmb3IgdmF1bHQgZmlsZXNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBGaWxlUGF0aFN1Z2dlc3QgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxURmlsZT4ge1xyXG5cdHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuXHRcdHN1cGVyKGFwcCwgaW5wdXRFbCk7XHJcblx0XHR0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xyXG5cdH1cclxuXHJcblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IFRGaWxlW10ge1xyXG5cdFx0Y29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRjb25zdCBmaWxlczogVEZpbGVbXSA9IFtdO1xyXG5cclxuXHRcdC8vIEdldCBhbGwgZmlsZXMgZnJvbSB2YXVsdFxyXG5cdFx0dGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5mb3JFYWNoKChmaWxlKSA9PiB7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHQvLyBPbmx5IGluY2x1ZGUgc3VwcG9ydGVkIGZpbGUgdHlwZXNcclxuXHRcdFx0XHRpZiAoU1VQUE9SVEVEX0VYVEVOU0lPTlMuaW5jbHVkZXMoZmlsZS5leHRlbnNpb24pKSB7XHJcblx0XHRcdFx0XHQvLyBNYXRjaCBhZ2FpbnN0IHBhdGggb3IgbmFtZVxyXG5cdFx0XHRcdFx0aWYgKFxyXG5cdFx0XHRcdFx0XHRmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KSB8fFxyXG5cdFx0XHRcdFx0XHRmaWxlLmJhc2VuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSlcclxuXHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRmaWxlcy5wdXNoKGZpbGUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU29ydCBieSByZWxldmFuY2UgKGV4YWN0IG1hdGNoZXMgZmlyc3QsIHRoZW4gYWxwaGFiZXRpY2FsbHkpXHJcblx0XHRmaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdGNvbnN0IGFTdGFydHNXaXRoID0gYS5wYXRoLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChsb3dlclF1ZXJ5KTtcclxuXHRcdFx0Y29uc3QgYlN0YXJ0c1dpdGggPSBiLnBhdGgudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGxvd2VyUXVlcnkpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGFTdGFydHNXaXRoICYmICFiU3RhcnRzV2l0aCkgcmV0dXJuIC0xO1xyXG5cdFx0XHRpZiAoIWFTdGFydHNXaXRoICYmIGJTdGFydHNXaXRoKSByZXR1cm4gMTtcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiBhLnBhdGgubG9jYWxlQ29tcGFyZShiLnBhdGgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gTGltaXQgcmVzdWx0c1xyXG5cdFx0cmV0dXJuIGZpbGVzLnNsaWNlKDAsIDIwKTtcclxuXHR9XHJcblxyXG5cdHJlbmRlclN1Z2dlc3Rpb24oZmlsZTogVEZpbGUsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Ly8gU2hvdyBmaWxlIG5hbWUgcHJvbWluZW50bHlcclxuXHRcdGVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxyXG5cdFx0XHR0ZXh0OiBmaWxlLmJhc2VuYW1lLFxyXG5cdFx0XHRjbHM6ICdzdWdnZXN0aW9uLXRpdGxlJ1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIFNob3cgcGF0aCBpbiBzbWFsbGVyIHRleHQgaWYgZGlmZmVyZW50IGZyb20gYmFzZW5hbWVcclxuXHRcdGlmIChmaWxlLnBhcmVudCAmJiBmaWxlLnBhcmVudC5wYXRoICE9PSAnLycpIHtcclxuXHRcdFx0ZWwuY3JlYXRlRWwoJ3NtYWxsJywgeyBcclxuXHRcdFx0XHR0ZXh0OiBmaWxlLnBhcmVudC5wYXRoLFxyXG5cdFx0XHRcdGNsczogJ3N1Z2dlc3Rpb24tcGF0aCdcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2hvdyBmaWxlIHR5cGUgaW5kaWNhdG9yXHJcblx0XHRpZiAoZmlsZS5leHRlbnNpb24gIT09ICdtZCcpIHtcclxuXHRcdFx0ZWwuY3JlYXRlRWwoJ3NwYW4nLCB7XHJcblx0XHRcdFx0dGV4dDogZmlsZS5leHRlbnNpb24udG9VcHBlckNhc2UoKSxcclxuXHRcdFx0XHRjbHM6ICdzdWdnZXN0aW9uLWZsYWlyJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNlbGVjdFN1Z2dlc3Rpb24oZmlsZTogVEZpbGUpOiB2b2lkIHtcclxuXHRcdHRoaXMuaW5wdXRFbC52YWx1ZSA9IGZpbGUucGF0aDtcclxuXHRcdHRoaXMuaW5wdXRFbC50cmlnZ2VyKCdpbnB1dCcpO1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEZvbGRlciBwYXRoIHN1Z2dlc3RlciBmb3Igc2VsZWN0aW5nIGZvbGRlcnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBGb2xkZXJTdWdnZXN0IGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8VEZvbGRlcj4ge1xyXG5cdHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuXHRcdHN1cGVyKGFwcCwgaW5wdXRFbCk7XHJcblx0XHR0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xyXG5cdH1cclxuXHJcblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IFRGb2xkZXJbXSB7XHJcblx0XHRjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcclxuXHRcdGNvbnN0IGZvbGRlcnM6IFRGb2xkZXJbXSA9IFtdO1xyXG5cclxuXHRcdHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZm9yRWFjaCgoZmlsZSkgPT4ge1xyXG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuXHRcdFx0XHRpZiAoZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpIHtcclxuXHRcdFx0XHRcdGZvbGRlcnMucHVzaChmaWxlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdGZvbGRlcnMuc29ydCgoYSwgYikgPT4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKSk7XHJcblx0XHRyZXR1cm4gZm9sZGVycy5zbGljZSgwLCAyMCk7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJTdWdnZXN0aW9uKGZvbGRlcjogVEZvbGRlciwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRlbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBmb2xkZXIucGF0aCB8fCAnLycgfSk7XHJcblx0fVxyXG5cclxuXHRzZWxlY3RTdWdnZXN0aW9uKGZvbGRlcjogVEZvbGRlcik6IHZvaWQge1xyXG5cdFx0dGhpcy5pbnB1dEVsLnZhbHVlID0gZm9sZGVyLnBhdGg7XHJcblx0XHR0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXb3Jrc3BhY2Ugc3VnZ2VzdGVyIGZvciBzZWxlY3RpbmcgT2JzaWRpYW4gd29ya3NwYWNlc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFdvcmtzcGFjZVN1Z2dlc3QgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxzdHJpbmc+IHtcclxuXHRwcml2YXRlIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50KSB7XHJcblx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xyXG5cdFx0dGhpcy5pbnB1dEVsID0gaW5wdXRFbDtcclxuXHR9XHJcblxyXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcblx0XHQgXHJcblx0XHRjb25zdCB3b3Jrc3BhY2VzUGx1Z2luID0gdGhpcy5hcHAuaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy53b3Jrc3BhY2VzO1xyXG5cdFx0IFxyXG5cdFx0aWYgKCF3b3Jrc3BhY2VzUGx1Z2luPy5lbmFibGVkIHx8ICF3b3Jrc3BhY2VzUGx1Z2luLmluc3RhbmNlPy53b3Jrc3BhY2VzKSB7XHJcblx0XHRcdHJldHVybiBbXTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0IFxyXG5cdFx0Y29uc3Qgd29ya3NwYWNlcyA9IE9iamVjdC5rZXlzKHdvcmtzcGFjZXNQbHVnaW4uaW5zdGFuY2Uud29ya3NwYWNlcyk7XHJcblx0XHRjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHdvcmtzcGFjZXMuZmlsdGVyKCh3b3Jrc3BhY2U6IHN0cmluZykgPT4gXHJcblx0XHRcdHdvcmtzcGFjZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyU3VnZ2VzdGlvbih3b3Jrc3BhY2U6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRlbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiB3b3Jrc3BhY2UgfSk7XHJcblx0fVxyXG5cclxuXHRzZWxlY3RTdWdnZXN0aW9uKHdvcmtzcGFjZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHR0aGlzLmlucHV0RWwudmFsdWUgPSB3b3Jrc3BhY2U7XHJcblx0XHR0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcbn0iLCAiLyoqXHJcbiAqIENvbW1hbmQgU3VnZ2VzdGVyIENvbXBvbmVudFxyXG4gKiBQcm92aWRlcyBhdXRvY29tcGxldGUgZm9yIE9ic2lkaWFuIGNvbW1hbmRzIGluIHNldHRpbmdzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQWJzdHJhY3RJbnB1dFN1Z2dlc3QsIEFwcCwgQ29tbWFuZCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBDb21tYW5kIHN1Z2dlc3RlciB0aGF0IHByb3ZpZGVzIGF1dG9jb21wbGV0ZSBmb3IgT2JzaWRpYW4gY29tbWFuZHNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb21tYW5kU3VnZ2VzdCBleHRlbmRzIEFic3RyYWN0SW5wdXRTdWdnZXN0PENvbW1hbmQ+IHtcclxuXHRwcml2YXRlIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50KSB7XHJcblx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xyXG5cdFx0dGhpcy5pbnB1dEVsID0gaW5wdXRFbDtcclxuXHR9XHJcblxyXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBDb21tYW5kW10ge1xyXG5cdFx0Y29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRjb25zdCBjb21tYW5kczogQ29tbWFuZFtdID0gW107XHJcblxyXG5cdFx0Ly8gR2V0IGFsbCBjb21tYW5kcyBmcm9tIHRoZSBhcHBcclxuXHRcdGNvbnN0IGFwcFdpdGhDb21tYW5kcyA9IHRoaXMuYXBwIGFzIEFwcCAmIHsgXHJcblx0XHRcdGNvbW1hbmRzPzogeyBjb21tYW5kcz86IFJlY29yZDxzdHJpbmcsIENvbW1hbmQ+IH0gXHJcblx0XHR9O1xyXG5cdFx0Y29uc3QgYWxsQ29tbWFuZHMgPSBhcHBXaXRoQ29tbWFuZHMuY29tbWFuZHM/LmNvbW1hbmRzO1xyXG5cdFx0XHJcblx0XHRpZiAoYWxsQ29tbWFuZHMpIHtcclxuXHRcdFx0Zm9yIChjb25zdCBjb21tYW5kIG9mIE9iamVjdC52YWx1ZXMoYWxsQ29tbWFuZHMpKSB7XHJcblx0XHRcdFx0aWYgKGNvbW1hbmQubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpIHx8XHJcblx0XHRcdFx0XHRjb21tYW5kLmlkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpIHtcclxuXHRcdFx0XHRcdGNvbW1hbmRzLnB1c2goY29tbWFuZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU29ydCBhbHBoYWJldGljYWxseSBieSBuYW1lXHJcblx0XHRjb21tYW5kcy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTtcclxuXHJcblx0XHQvLyBMaW1pdCByZXN1bHRzXHJcblx0XHRyZXR1cm4gY29tbWFuZHMuc2xpY2UoMCwgMzApO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyU3VnZ2VzdGlvbihjb21tYW5kOiBDb21tYW5kLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxyXG5cdFx0XHR0ZXh0OiBjb21tYW5kLm5hbWUsXHJcblx0XHRcdGNsczogJ3N1Z2dlc3Rpb24tdGl0bGUnXHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0ZWwuY3JlYXRlRWwoJ3NtYWxsJywgeyBcclxuXHRcdFx0dGV4dDogY29tbWFuZC5pZCxcclxuXHRcdFx0Y2xzOiAnc3VnZ2VzdGlvbi1ub3RlJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRzZWxlY3RTdWdnZXN0aW9uKGNvbW1hbmQ6IENvbW1hbmQpOiB2b2lkIHtcclxuXHRcdHRoaXMuaW5wdXRFbC52YWx1ZSA9IGNvbW1hbmQuaWQ7XHJcblx0XHR0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFeHRlbmRlZCBBcHAgaW50ZXJmYWNlIHdpdGggY29tbWFuZHNcclxuICovXHJcbmludGVyZmFjZSBBcHBXaXRoQ29tbWFuZHMgZXh0ZW5kcyBBcHAge1xyXG5cdGNvbW1hbmRzPzoge1xyXG5cdFx0Y29tbWFuZHM/OiBSZWNvcmQ8c3RyaW5nLCBDb21tYW5kPjtcclxuXHRcdGV4ZWN1dGVDb21tYW5kQnlJZD86IChjb21tYW5kSWQ6IHN0cmluZykgPT4gYm9vbGVhbiB8IFByb21pc2U8dm9pZD47XHJcblx0fTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhIGNvbW1hbmQgYnkgaXRzIElEXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tbWFuZEJ5SWQoYXBwOiBBcHAsIGNvbW1hbmRJZDogc3RyaW5nKTogQ29tbWFuZCB8IHVuZGVmaW5lZCB7XHJcblx0Y29uc3QgYXBwV2l0aENvbW1hbmRzID0gYXBwIGFzIEFwcFdpdGhDb21tYW5kcztcclxuXHRjb25zdCBjb21tYW5kcyA9IGFwcFdpdGhDb21tYW5kcy5jb21tYW5kcz8uY29tbWFuZHM7XHJcblx0cmV0dXJuIGNvbW1hbmRzPy5bY29tbWFuZElkXTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEV4ZWN1dGUgYSBjb21tYW5kIGJ5IGl0cyBJRFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGV4ZWN1dGVDb21tYW5kKGFwcDogQXBwLCBjb21tYW5kSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGlmICghY29tbWFuZElkKSByZXR1cm4gZmFsc2U7XHJcblx0XHJcblx0Y29uc3QgYXBwV2l0aENvbW1hbmRzID0gYXBwIGFzIEFwcFdpdGhDb21tYW5kcztcclxuXHRjb25zdCByZXN1bHQgPSBhcHBXaXRoQ29tbWFuZHMuY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZD8uKGNvbW1hbmRJZCk7XHJcblx0cmV0dXJuIHJlc3VsdCAhPT0gZmFsc2U7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBJY29uIFBpY2tlciBNb2RhbFxyXG4gKiBTaW1wbGlmaWVkIGljb24gcGlja2VyIGZvciBzZWxlY3Rpbmcgc3RpY2t5IGljb25cclxuICogQmFzZWQgb24gaWNvbmljIHBsdWdpbidzIGljb24gcGlja2VyXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBCdXR0b25Db21wb25lbnQsIE1vZGFsLCBQbGF0Zm9ybSwgU2V0dGluZywgVGV4dENvbXBvbmVudCwgcHJlcGFyZUZ1enp5U2VhcmNoLCBzZXRJY29uLCBnZXRJY29uSWRzIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJY29uUGlja2VyQ2FsbGJhY2sge1xyXG5cdChpY29uOiBzdHJpbmcgfCBudWxsKTogdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNpbXBsaWZpZWQgaWNvbiBwaWNrZXIgbW9kYWxcclxuICovXHJcbmV4cG9ydCBjbGFzcyBJY29uUGlja2VyIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgc2VsZWN0ZWRJY29uOiBzdHJpbmcgfCBudWxsO1xyXG5cdHByaXZhdGUgY2FsbGJhY2s6IEljb25QaWNrZXJDYWxsYmFjaztcclxuXHRwcml2YXRlIHNlYXJjaEZpZWxkOiBUZXh0Q29tcG9uZW50O1xyXG5cdHByaXZhdGUgc2VhcmNoUmVzdWx0czogW2ljb246IHN0cmluZywgaWNvbk5hbWU6IHN0cmluZ11bXSA9IFtdO1xyXG5cdHByaXZhdGUgc2VhcmNoUmVzdWx0c1NldHRpbmc6IFNldHRpbmc7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBjdXJyZW50SWNvbjogc3RyaW5nIHwgbnVsbCwgY2FsbGJhY2s6IEljb25QaWNrZXJDYWxsYmFjaykge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMuc2VsZWN0ZWRJY29uID0gY3VycmVudEljb247XHJcblx0XHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKCdtb2QtY29uZmlybWF0aW9uJyk7XHJcblx0XHR0aGlzLm1vZGFsRWwuYWRkQ2xhc3MoJ2ljb25pYy1pY29uLXBpY2tlcicpO1xyXG5cdFx0dGhpcy5zZXRUaXRsZSgnQ2hhbmdlIGljb24nKTtcclxuXHJcblx0XHQvLyBTZWFyY2ggZmllbGRcclxuXHRcdGNvbnN0IHNlYXJjaFNldHRpbmcgPSBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbCk7XHJcblx0XHRpZiAoIVBsYXRmb3JtLmlzUGhvbmUpIHtcclxuXHRcdFx0c2VhcmNoU2V0dGluZy5zZXROYW1lKCdTZWFyY2gnKTtcclxuXHRcdH1cclxuXHRcdHNlYXJjaFNldHRpbmcuYWRkU2VhcmNoKChzZWFyY2hGaWVsZCkgPT4ge1xyXG5cdFx0XHRzZWFyY2hGaWVsZFxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignU2VhcmNoIGljb25zLi4uJylcclxuXHRcdFx0XHQub25DaGFuZ2UoKCkgPT4gdGhpcy51cGRhdGVTZWFyY2hSZXN1bHRzKCkpO1xyXG5cdFx0XHRzZWFyY2hGaWVsZC5pbnB1dEVsLmVudGVyS2V5SGludCA9ICdnbyc7XHJcblx0XHRcdHRoaXMuc2VhcmNoRmllbGQgPSBzZWFyY2hGaWVsZDtcclxuXHRcdH0pO1xyXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRJY29uKSB7XHJcblx0XHRcdHRoaXMuc2VhcmNoRmllbGQuc2V0VmFsdWUodGhpcy5zZWxlY3RlZEljb24pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNlYXJjaCByZXN1bHRzXHJcblx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nID0gbmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpO1xyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5zZXR0aW5nRWwuYWRkQ2xhc3MoJ2ljb25pYy1zZWFyY2gtcmVzdWx0cycpO1xyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5zZXR0aW5nRWwudGFiSW5kZXggPSAwO1xyXG5cdFx0XHJcblx0XHQvLyBBbGxvdyB2ZXJ0aWNhbCBzY3JvbGxpbmcgdG8gd29yayBob3Jpem9udGFsbHlcclxuXHRcdHRoaXMuc2VhcmNoUmVzdWx0c1NldHRpbmcuc2V0dGluZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGlmIChkb2N1bWVudC5ib2R5Lmhhc0NsYXNzKCdtb2QtcnRsJykpIHtcclxuXHRcdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLnNldHRpbmdFbC5zY3JvbGxMZWZ0IC09IGV2ZW50LmRlbHRhWTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLnNldHRpbmdFbC5zY3JvbGxMZWZ0ICs9IGV2ZW50LmRlbHRhWTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xyXG5cclxuXHRcdC8vIEJ1dHRvbnMgLSBtYXRjaCBpY29uaWMncyBidXR0b24gbGF5b3V0XHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSB0aGlzLm1vZGFsRWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XHJcblxyXG5cdFx0Ly8gQ2FuY2VsXHJcblx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvbkNvbnRhaW5lcilcclxuXHRcdFx0LnNldEJ1dHRvblRleHQoJ0NhbmNlbCcpXHJcblx0XHRcdC5vbkNsaWNrKCgpID0+IHRoaXMuY2xvc2UoKSlcclxuXHRcdFx0LmJ1dHRvbkVsLmFkZENsYXNzKCdtb2QtY2FuY2VsJyk7XHJcblxyXG5cdFx0Ly8gU2F2ZVxyXG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChidXR0b25Db250YWluZXIpXHJcblx0XHRcdC5zZXRCdXR0b25UZXh0KCdTYXZlJylcclxuXHRcdFx0LnNldEN0YSgpXHJcblx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHR0aGlzLmNhbGxiYWNrKHRoaXMuc2VsZWN0ZWRJY29uKTtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIEF1dG8tZm9jdXMgc2VhcmNoIGZpZWxkXHJcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnNlYXJjaEZpZWxkLmlucHV0RWwuc2VsZWN0KCk7XHJcblx0XHRcdHRoaXMudXBkYXRlU2VhcmNoUmVzdWx0cygpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgc2VhcmNoIHJlc3VsdHMgYmFzZWQgb24gY3VycmVudCBxdWVyeVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgdXBkYXRlU2VhcmNoUmVzdWx0cygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hGaWVsZC5nZXRWYWx1ZSgpLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xyXG5cdFx0Y29uc3QgZnV6enlTZWFyY2ggPSBwcmVwYXJlRnV6enlTZWFyY2gocXVlcnkpO1xyXG5cdFx0Y29uc3QgbWF0Y2hlczogW3Njb3JlOiBudW1iZXIsIGljb25FbnRyeTogW3N0cmluZywgc3RyaW5nXV1bXSA9IFtdO1xyXG5cclxuXHRcdC8vIEdldCBhbGwgYXZhaWxhYmxlIGljb25zXHJcblx0XHRjb25zdCBpY29uSWRzID0gZ2V0SWNvbklkcygpO1xyXG5cclxuXHRcdC8vIFNlYXJjaCBpY29uc1xyXG5cdFx0aWYgKHF1ZXJ5KSB7XHJcblx0XHRcdGZvciAoY29uc3QgaWNvbklkIG9mIGljb25JZHMpIHtcclxuXHRcdFx0XHQvLyBDcmVhdGUgYSByZWFkYWJsZSBuYW1lIGZyb20gaWNvbiBJRFxyXG5cdFx0XHRcdGNvbnN0IGljb25OYW1lID0gdGhpcy5mb3JtYXRJY29uTmFtZShpY29uSWQpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChpY29uSWQgPT09IHF1ZXJ5IHx8IGljb25JZC50b0xvd2VyQ2FzZSgpID09PSBxdWVyeSkge1xyXG5cdFx0XHRcdFx0bWF0Y2hlcy5wdXNoKFswLCBbaWNvbklkLCBpY29uTmFtZV1dKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y29uc3QgZnV6enlNYXRjaCA9IGZ1enp5U2VhcmNoKGljb25OYW1lKTtcclxuXHRcdFx0XHRcdGlmIChmdXp6eU1hdGNoKSB7XHJcblx0XHRcdFx0XHRcdG1hdGNoZXMucHVzaChbZnV6enlNYXRjaC5zY29yZSwgW2ljb25JZCwgaWNvbk5hbWVdXSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBTaG93IGFsbCBpY29ucyBpZiBubyBxdWVyeVxyXG5cdFx0XHRmb3IgKGNvbnN0IGljb25JZCBvZiBpY29uSWRzKSB7XHJcblx0XHRcdFx0Y29uc3QgaWNvbk5hbWUgPSB0aGlzLmZvcm1hdEljb25OYW1lKGljb25JZCk7XHJcblx0XHRcdFx0bWF0Y2hlcy5wdXNoKFswLCBbaWNvbklkLCBpY29uTmFtZV1dKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNvcnQgYnkgc2NvcmVcclxuXHRcdG1hdGNoZXMuc29ydCgoW3Njb3JlQV0sIFtzY29yZUJdKSA9PiBzY29yZUEgPiBzY29yZUIgPyAtMSA6ICsxKTtcclxuXHJcblx0XHQvLyBMaW1pdCByZXN1bHRzXHJcblx0XHR0aGlzLnNlYXJjaFJlc3VsdHMubGVuZ3RoID0gMDtcclxuXHRcdGNvbnN0IG1heFJlc3VsdHMgPSAxMDA7XHJcblx0XHRmb3IgKGNvbnN0IFssIGljb25FbnRyeV0gb2YgbWF0Y2hlcykge1xyXG5cdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHMucHVzaChpY29uRW50cnkpO1xyXG5cdFx0XHRpZiAodGhpcy5zZWFyY2hSZXN1bHRzLmxlbmd0aCA+PSBtYXhSZXN1bHRzKSBicmVhaztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBVcGRhdGUgVUkgLSB1c2UgRXh0cmFCdXR0b25Db21wb25lbnQgbGlrZSBpY29uaWNcclxuXHRcdHRoaXMuc2VhcmNoUmVzdWx0c1NldHRpbmcuY2xlYXIoKTtcclxuXHRcdGZvciAoY29uc3QgW2ljb25JZCwgaWNvbk5hbWVdIG9mIHRoaXMuc2VhcmNoUmVzdWx0cykge1xyXG5cdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLmFkZEV4dHJhQnV0dG9uKChpY29uQnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0aWNvbkJ1dHRvbi5zZXRUb29sdGlwKGljb25OYW1lLCB7XHJcblx0XHRcdFx0XHRkZWxheTogMzAwLFxyXG5cdFx0XHRcdFx0cGxhY2VtZW50OiBQbGF0Zm9ybS5pc1Bob25lID8gJ3RvcCcgOiAnYm90dG9tJyxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRjb25zdCBpY29uRWwgPSBpY29uQnV0dG9uLmV4dHJhU2V0dGluZ3NFbDtcclxuXHRcdFx0XHRpY29uRWwuYWRkQ2xhc3MoJ2ljb25pYy1zZWFyY2gtcmVzdWx0Jyk7XHJcblx0XHRcdFx0aWNvbkVsLnRhYkluZGV4ID0gLTE7XHJcblxyXG5cdFx0XHRcdHNldEljb24oaWNvbkVsLCBpY29uSWQpO1xyXG5cclxuXHRcdFx0XHQvLyBIaWdobGlnaHQgc2VsZWN0ZWQgaWNvblxyXG5cdFx0XHRcdGlmIChpY29uSWQgPT09IHRoaXMuc2VsZWN0ZWRJY29uKSB7XHJcblx0XHRcdFx0XHRpY29uRWwuYWRkQ2xhc3MoJ2lzLXNlbGVjdGVkJyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpY29uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkSWNvbiA9IGljb25JZDtcclxuXHRcdFx0XHRcdHRoaXMuY2FsbGJhY2soaWNvbklkKTtcclxuXHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gTW9iaWxlOiBzaG93IHRvb2x0aXAgb24gbG9uZyBwcmVzc1xyXG5cdFx0XHRcdGlmIChQbGF0Zm9ybS5pc1Bob25lKSB7XHJcblx0XHRcdFx0XHRpY29uRWwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdG5hdmlnYXRvci52aWJyYXRlPy4oMTAwKTtcclxuXHRcdFx0XHRcdFx0Ly8gVG9vbHRpcCBpcyBhbHJlYWR5IHNldCBhYm92ZVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBVc2UgYW4gaW52aXNpYmxlIGJ1dHRvbiB0byBwcmVzZXJ2ZSBoZWlnaHQgaWYgbm8gcmVzdWx0c1xyXG5cdFx0aWYgKHRoaXMuc2VhcmNoUmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzc2VzKFsnaWNvbmljLWludmlzaWJsZScsICdpY29uaWMtc2VhcmNoLXJlc3VsdCddKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGb3JtYXQgaWNvbiBJRCBpbnRvIHJlYWRhYmxlIG5hbWVcclxuXHQgKi9cclxuXHRwcml2YXRlIGZvcm1hdEljb25OYW1lKGljb25JZDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdC8vIFJlbW92ZSBsdWNpZGUtIHByZWZpeCBpZiBwcmVzZW50XHJcblx0XHRsZXQgbmFtZSA9IGljb25JZC5yZXBsYWNlKC9ebHVjaWRlLS8sICcnKTtcclxuXHRcdC8vIFJlcGxhY2UgZGFzaGVzIHdpdGggc3BhY2VzXHJcblx0XHRuYW1lID0gbmFtZS5yZXBsYWNlKC8tL2csICcgJyk7XHJcblx0XHQvLyBDYXBpdGFsaXplIGZpcnN0IGxldHRlciBvZiBlYWNoIHdvcmRcclxuXHRcdHJldHVybiBuYW1lLnNwbGl0KCcgJykubWFwKHdvcmQgPT4gXHJcblx0XHRcdHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpXHJcblx0XHQpLmpvaW4oJyAnKTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEhvbWUgQmFzZSBTZXJ2aWNlXHJcbiAqIENvcmUgbG9naWMgZm9yIG9wZW5pbmcgYW5kIG1hbmFnaW5nIHRoZSBob21lIGJhc2UgZmlsZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFdvcmtzcGFjZUxlYWYsIE1hcmtkb3duVmlldywgUGxhdGZvcm0sIFZpZXcgYXMgT1ZpZXcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB0eXBlIEhvbWVCYXNlUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBIb21lQmFzZVR5cGUsIE9wZW5pbmdNb2RlIH0gZnJvbSAnLi4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBnZXRGaWxlQnlQYXRoLCBpc01hcmtkb3duTGlrZSwgbGVhZkhhc0ZpbGUsIGlzU3VwcG9ydGVkRXh0ZW5zaW9uIH0gZnJvbSAnLi4vdXRpbHMvZmlsZS11dGlscyc7XHJcbmltcG9ydCB7IGV4ZWN1dGVDb21tYW5kIH0gZnJvbSAnLi4vdWkvY29tbWFuZC1zdWdnZXN0JztcclxuaW1wb3J0IHsgY29tcHV0ZUhvbWVCYXNlUGF0aCwgdHJpbUZpbGUgfSBmcm9tICcuLi91dGlscy9ob21lYmFzZS1yZXNvbHZlcic7XHJcblxyXG4vKipcclxuICogVmlldyB0eXBlcyB0aGF0IGNhbiBiZSBob21lIGJhc2UgZmlsZXNcclxuICovXHJcbmNvbnN0IExFQUZfVFlQRVMgPSBbJ21hcmtkb3duJywgJ2NhbnZhcycsICdiYXNlcyddO1xyXG5cclxuLyoqXHJcbiAqIEhlbHBlciB0byBjaGVjayBpZiB0d28gZmlsZSBwYXRocyBhcmUgZXF1YWwgKGNhc2UtaW5zZW5zaXRpdmUsIGlnbm9yaW5nIGV4dGVuc2lvbilcclxuICovXHJcbmZ1bmN0aW9uIGVxdWFsc0Nhc2VsZXNzKHBhdGgxOiBzdHJpbmcsIHBhdGgyOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRjb25zdCBub3JtYWxpemUgPSAocDogc3RyaW5nKSA9PiBwLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFwubWQkLywgJycpO1xyXG5cdHJldHVybiBub3JtYWxpemUocGF0aDEpID09PSBub3JtYWxpemUocGF0aDIpO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSG9tZUJhc2VTZXJ2aWNlIHtcclxuXHRwcml2YXRlIGFwcDogQXBwO1xyXG5cdHByaXZhdGUgcGx1Z2luOiBIb21lQmFzZVBsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IocGx1Z2luOiBIb21lQmFzZVBsdWdpbikge1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBPcGVuIGhvbWUgYmFzZSB3aXRoIGEgc3BlY2lmaWMgbW9kZSAoZm9yIHN0YXJ0dXAvbWFudWFsIG9wZW5zKVxyXG5cdCAqL1xyXG5cdGFzeW5jIG9wZW5Ib21lQmFzZVdpdGhNb2RlKG1vZGU6IE9wZW5pbmdNb2RlLCBydW5Db21tYW5kOiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0Ly8gSGFuZGxlIG5vbi1maWxlIHR5cGVzIChXb3Jrc3BhY2UsIEdyYXBoLCBOb25lKVxyXG5cdFx0aWYgKGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5vcGVuV29ya3NwYWNlKGhvbWVCYXNlU2V0dGluZ3MudmFsdWUpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkdyYXBoKSB7XHJcblx0XHRcdC8vIEdyYXBoIHZpZXc6IGp1c3Qgb3BlbiBpdCAobm8gZ2hvc3QgdGFiIHN1cHBvcnQgZHVlIHRvIHVucmVsaWFibGUgZGV0ZWN0aW9uKVxyXG5cdFx0XHRyZXR1cm4gdGhpcy5vcGVuR3JhcGgoKTtcclxuXHRcdH1cclxuXHRcdGlmIChob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Ob25lKSB7XHJcblx0XHRcdC8vIEp1c3QgcnVuIGNvbW1hbmQsIGRvbid0IG9wZW4gYW55dGhpbmdcclxuXHRcdFx0aWYgKHJ1bkNvbW1hbmQpIHtcclxuXHRcdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZXNvbHZlIHRoZSBhY3R1YWwgZmlsZSBwYXRoIGJhc2VkIG9uIHR5cGVcclxuXHRcdGNvbnN0IHJlc29sdmVkUGF0aCA9IGF3YWl0IGNvbXB1dGVIb21lQmFzZVBhdGgoXHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudHlwZSxcclxuXHRcdFx0aG9tZUJhc2VTZXR0aW5ncy52YWx1ZSxcclxuXHRcdFx0dGhpcy5wbHVnaW5cclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdGlmICghcmVzb2x2ZWRQYXRoKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBHZXQgdGhlIGZpbGUgLSB1c2UgbWV0YWRhdGFDYWNoZSBmb3IgYmV0dGVyIHBhdGggcmVzb2x1dGlvbiAobGlrZSBob21lcGFnZSBwbHVnaW4pXHJcblx0XHRsZXQgZmlsZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QocmVzb2x2ZWRQYXRoLCAnLycpO1xyXG5cdFx0XHJcblx0XHQvLyBJZiBub3QgZm91bmQgYW5kIGF1dG8tY3JlYXRlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgdHlwZSwgcmV0dXJuXHJcblx0XHQvLyBGb3Igbm93LCB3ZSdsbCB0cnkgZ2V0RmlsZUJ5UGF0aCBhcyBmYWxsYmFja1xyXG5cdFx0aWYgKCFmaWxlKSB7XHJcblx0XHRcdGZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCByZXNvbHZlZFBhdGgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0Ly8gVHJ5IHRvIGNyZWF0ZSBpZiBpdCdzIGEgbWFya2Rvd24gZmlsZSBhbmQgcGF0aCBkb2Vzbid0IGhhdmUgZXh0ZW5zaW9uXHJcblx0XHRcdGNvbnN0IHVudHJpbW1lZFBhdGggPSByZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5tZCcpID8gcmVzb2x2ZWRQYXRoIDogYCR7cmVzb2x2ZWRQYXRofS5tZGA7XHJcblx0XHRcdGZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCB1bnRyaW1tZWRQYXRoKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICghZmlsZSAmJiBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XHJcblx0XHRcdFx0Ly8gQ291bGQgY3JlYXRlIGZpbGUgaGVyZSBpZiBhdXRvQ3JlYXRlIHNldHRpbmcgZXhpc3RzLCBidXQgZm9yIG5vdyBqdXN0IHJldHVyblxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEhhbmRsZSBvcGVuaW5nIG1vZGVcclxuXHRcdGlmIChtb2RlID09PSAncmVwbGFjZS1hbGwnKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMuZGV0YWNoQWxsTGVhdmVzKCk7XHJcblx0XHR9IGVsc2UgaWYgKG1vZGUgPT09ICdyZXBsYWNlLWxhc3QnKSB7XHJcblx0XHRcdC8vIFJlcGxhY2UgdGhlIGFjdGl2ZSBsZWFmIChjbG9zZSBpdCBhbmQgb3BlbiBob21lIGJhc2UgaW4gaXRzIHBsYWNlKVxyXG5cdFx0XHRjb25zdCBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoT1ZpZXcpPy5sZWFmO1xyXG5cdFx0XHRpZiAoYWN0aXZlTGVhZikge1xyXG5cdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGFjdGl2ZUxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0Ly8gT25seSBjbG9zZSBpZiBub3QgcGlubmVkXHJcblx0XHRcdFx0aWYgKHZpZXdTdGF0ZS5waW5uZWQgIT09IHRydWUpIHtcclxuXHRcdFx0XHRcdHZvaWQgYWN0aXZlTGVhZi5kZXRhY2goKTtcclxuXHRcdFx0XHRcdC8vIFdhaXQgYSBiaXQgZm9yIGRldGFjaG1lbnRcclxuXHRcdFx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBmb3IgZXhpc3RpbmcgbGVhZiAoYnV0IGV4Y2x1ZGUgZ2hvc3QgdGFiIGZvciBtYW51YWwgb3BlbnMpXHJcblx0XHRjb25zdCBleGlzdGluZ0xlYWYgPSB0aGlzLmZpbmRFeGlzdGluZ0hvbWVCYXNlTGVhZihmaWxlKTtcclxuXHRcdGlmIChleGlzdGluZ0xlYWYgJiYgbW9kZSAhPT0gJ3JlcGxhY2UtYWxsJykge1xyXG5cdFx0XHQvLyBGb3IgcmVwbGFjZS1sYXN0LCB3ZSBzdGlsbCB3YW50IHRvIHJldXNlIGV4aXN0aW5nIGlmIGZvdW5kIChhZnRlciBjbG9zaW5nIGFjdGl2ZSlcclxuXHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gZXhpc3RpbmdMZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRpZiAodmlld1N0YXRlLnBpbm5lZCA9PT0gdHJ1ZSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcclxuXHRcdFx0XHQvLyBEb24ndCB1c2UgZ2hvc3QgdGFiIGZvciBtYW51YWwgb3BlbnMgLSB3aWxsIGNyZWF0ZSBuZXcgdGFiIGJlbG93XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYoZXhpc3RpbmdMZWFmKTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLmNvbmZpZ3VyZVZpZXcoZXhpc3RpbmdMZWFmLCBmaWxlKTtcclxuXHRcdFx0XHRpZiAocnVuQ29tbWFuZCkge1xyXG5cdFx0XHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gT3BlbiBpbiBuZXcgbGVhZlxyXG5cdFx0Y29uc3QgbmV3TGVhZiA9IG1vZGUgPT09ICdyZXRhaW4nIFxyXG5cdFx0XHQ/IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKVxyXG5cdFx0XHQ6IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKTtcclxuXHRcdFxyXG5cdFx0aWYgKCFuZXdMZWFmKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGF3YWl0IG5ld0xlYWYub3BlbkZpbGUoZmlsZSk7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihuZXdMZWFmKTtcclxuXHRcdGF3YWl0IHRoaXMuY29uZmlndXJlVmlldyhuZXdMZWFmLCBmaWxlKTtcclxuXHJcblx0XHRpZiAocnVuQ29tbWFuZCkge1xyXG5cdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE9wZW4gd29ya3NwYWNlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBvcGVuV29ya3NwYWNlKHdvcmtzcGFjZU5hbWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0IFxyXG5cdFx0Y29uc3Qgd29ya3NwYWNlUGx1Z2luID0gdGhpcy5hcHAuaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy53b3Jrc3BhY2VzO1xyXG5cdFx0IFxyXG5cdFx0aWYgKCF3b3Jrc3BhY2VQbHVnaW4/LmVuYWJsZWQgfHwgIXdvcmtzcGFjZVBsdWdpbi5pbnN0YW5jZT8ubG9hZFdvcmtzcGFjZSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHQgXHJcblx0XHR3b3Jrc3BhY2VQbHVnaW4uaW5zdGFuY2UubG9hZFdvcmtzcGFjZSh3b3Jrc3BhY2VOYW1lKTtcclxuXHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiBncmFwaCB2aWV3XHJcblx0ICovXHJcblx0YXN5bmMgb3BlbkdyYXBoKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0IFxyXG5cdFx0YXdhaXQgdGhpcy5hcHAuY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZD8uKCdncmFwaDpvcGVuJyk7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE9wZW4gZ3JhcGggdmlldyBpbiBnaG9zdCB0YWJcclxuXHQgKiBERVBSRUNBVEVEOiBHcmFwaCB2aWV3IGdob3N0IHRhYiBkZXRlY3Rpb24gaXMgdW5yZWxpYWJsZSwgc28gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxyXG5cdCAqIEdyYXBoIHZpZXdzIG5vdyBqdXN0IG9wZW4gbm9ybWFsbHkgbGlrZSByYW5kb20gZmlsZXNcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIG9wZW5HcmFwaEluR2hvc3RUYWIocnVuQ29tbWFuZDogYm9vbGVhbik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgc2V0dGluZ3MgbW9kYWwgaXMgb3BlblxyXG5cdFx0aWYgKHRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiBnaG9zdCB0YWIgYWxyZWFkeSBleGlzdHMgKHBpbm5lZCBncmFwaCB2aWV3KVxyXG5cdFx0Ly8gVXNlIHRoZSBzYW1lIGFwcHJvYWNoIGFzIGZpbGUtYmFzZWQgdGFiczogZmluZCBpdCBlYWNoIHRpbWVcclxuXHRcdC8vIFRyeSBnZXRMZWF2ZXNPZlR5cGUgZmlyc3QsIHRoZW4gaXRlcmF0ZUFsbExlYXZlcyBhcyBmYWxsYmFja1xyXG5cdFx0bGV0IGdyYXBoTGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZ3JhcGgnKTtcclxuXHRcdFxyXG5cdFx0Ly8gSWYgZ2V0TGVhdmVzT2ZUeXBlIGRvZXNuJ3Qgd29yayAocmV0dXJucyAwKSwgdXNlIGl0ZXJhdGVBbGxMZWF2ZXNcclxuXHRcdGlmIChncmFwaExlYXZlcy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0Z3JhcGhMZWF2ZXMgPSBbXTtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHRcdGlmICh2aWV3U3RhdGUudHlwZSA9PT0gJ2dyYXBoJykge1xyXG5cdFx0XHRcdFx0XHRncmFwaExlYXZlcy5wdXNoKGxlYWYpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0Ly8gTGVhZiBtaWdodCBiZSBkZXRhY2hlZCwgc2tpcCBpdFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0Ly8gSWYgdGhlcmUncyBleGFjdGx5IG9uZSBncmFwaCB2aWV3LCB1c2UgaXQgYXMgdGhlIGdob3N0IHRhYlxyXG5cdFx0Ly8gKHNpbmNlIHdlIHNob3VsZCBvbmx5IGhhdmUgb25lIGdob3N0IHRhYiBhdCBhIHRpbWUpXHJcblx0XHRsZXQgZ2hvc3RUYWI6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcclxuXHRcdFxyXG5cdFx0aWYgKGdyYXBoTGVhdmVzLmxlbmd0aCA9PT0gMSkge1xyXG5cdFx0XHQvLyBPbmx5IG9uZSBncmFwaCB2aWV3IGV4aXN0cyAtIHRoaXMgaXMgb3VyIGdob3N0IHRhYlxyXG5cdFx0XHRnaG9zdFRhYiA9IGdyYXBoTGVhdmVzWzBdIHx8IG51bGw7XHJcblx0XHR9IGVsc2UgaWYgKGdyYXBoTGVhdmVzLmxlbmd0aCA+IDEpIHtcclxuXHRcdFx0Ly8gTXVsdGlwbGUgZ3JhcGggdmlld3MgLSBmaW5kIHRoZSBwaW5uZWQgb25lXHJcblx0XHRcdGZvciAoY29uc3QgbGVhZiBvZiBncmFwaExlYXZlcykge1xyXG5cdFx0XHRcdGlmICghbGVhZikgY29udGludWU7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0XHRpZiAodmlld1N0YXRlLnBpbm5lZCA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRcdFx0XHRnaG9zdFRhYiA9IGxlYWY7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0Ly8gTGVhZiBtaWdodCBiZSBkZXRhY2hlZCwgc2tpcCBpdFxyXG5cdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBJZiBubyBwaW5uZWQgb25lIGZvdW5kLCB1c2UgdGhlIGZpcnN0IG9uZSAoc2hvdWxkbid0IGhhcHBlbiwgYnV0IGZhbGxiYWNrKVxyXG5cdFx0XHRpZiAoIWdob3N0VGFiICYmIGdyYXBoTGVhdmVzWzBdKSB7XHJcblx0XHRcdFx0Z2hvc3RUYWIgPSBncmFwaExlYXZlc1swXSB8fCBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChnaG9zdFRhYikge1xyXG5cdFx0XHQvLyBHaG9zdCB0YWIgZXhpc3RzIC0gY2xvc2UgQUxMIG90aGVyIGdyYXBoIHZpZXdzIChwaW5uZWQgb3Igbm90KSwgdGhlbiBmb2N1cyBnaG9zdCB0YWJcclxuXHRcdFx0Ly8gRmluZCBhbGwgZ3JhcGggbGVhdmVzIGFnYWluIHRvIGdldCB0aGUgY3VycmVudCBsaXN0XHJcblx0XHRcdGNvbnN0IGFsbEdyYXBoTGVhdmVzRm9yQ2xlYW51cDogV29ya3NwYWNlTGVhZltdID0gW107XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHRpZiAodmlld1N0YXRlLnR5cGUgPT09ICdncmFwaCcpIHtcclxuXHRcdFx0XHRcdGFsbEdyYXBoTGVhdmVzRm9yQ2xlYW51cC5wdXNoKGxlYWYpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGNvbnN0IG90aGVyR3JhcGhMZWF2ZXMgPSBhbGxHcmFwaExlYXZlc0ZvckNsZWFudXAuZmlsdGVyKGxlYWYgPT4gbGVhZiAhPT0gZ2hvc3RUYWIpO1xyXG5cdFx0XHRcclxuXHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIG90aGVyR3JhcGhMZWF2ZXMpIHtcclxuXHRcdFx0XHR2b2lkIGxlYWYuZGV0YWNoKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFdhaXQgZm9yIGRldGFjaG1lbnRzIHRvIGNvbXBsZXRlXHJcblx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxNTApKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIERvdWJsZS1jaGVjayAtIG1ha2Ugc3VyZSBubyBvdGhlciBncmFwaCB2aWV3cyBleGlzdFxyXG5cdFx0XHQvLyBVc2UgaXRlcmF0ZUFsbExlYXZlcyBpbnN0ZWFkIG9mIGdldExlYXZlc09mVHlwZSBmb3IgZ3JhcGggdmlld3NcclxuXHRcdFx0Y29uc3QgcmVtYWluaW5nR3JhcGhMZWF2ZXM6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0aWYgKHZpZXdTdGF0ZS50eXBlID09PSAnZ3JhcGgnKSB7XHJcblx0XHRcdFx0XHRyZW1haW5pbmdHcmFwaExlYXZlcy5wdXNoKGxlYWYpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGlmIChyZW1haW5pbmdHcmFwaExlYXZlcy5sZW5ndGggPiAxKSB7XHJcblx0XHRcdFx0Ly8gU3RpbGwgaGF2ZSBkdXBsaWNhdGVzLCBjbG9zZSBhbGwgZXhjZXB0IGdob3N0IHRhYlxyXG5cdFx0XHRcdGZvciAoY29uc3QgbGVhZiBvZiByZW1haW5pbmdHcmFwaExlYXZlcykge1xyXG5cdFx0XHRcdFx0aWYgKGxlYWYgIT09IGdob3N0VGFiKSB7XHJcblx0XHRcdFx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBzaG91bGRGb2N1cyA9ICF0aGlzLmlzU2V0dGluZ3NNb2RhbE9wZW4oKTtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYoZ2hvc3RUYWIsIHsgZm9jdXM6IHNob3VsZEZvY3VzIH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHJ1bkNvbW1hbmQpIHtcclxuXHRcdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBObyBnaG9zdCB0YWIgZXhpc3RzIC0gY2xvc2UgQUxMIGV4aXN0aW5nIGdyYXBoIHZpZXdzIGZpcnN0XHJcblx0XHQvLyBGaW5kIGFsbCBncmFwaCBsZWF2ZXNcclxuXHRcdGNvbnN0IGFsbEV4aXN0aW5nR3JhcGhMZWF2ZXM6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0aWYgKHZpZXdTdGF0ZS50eXBlID09PSAnZ3JhcGgnKSB7XHJcblx0XHRcdFx0YWxsRXhpc3RpbmdHcmFwaExlYXZlcy5wdXNoKGxlYWYpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdGZvciAoY29uc3QgbGVhZiBvZiBhbGxFeGlzdGluZ0dyYXBoTGVhdmVzKSB7XHJcblx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gV2FpdCBmb3IgZGV0YWNobWVudHMgdG8gY29tcGxldGVcclxuXHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuXHJcblx0XHQvLyBDaGVjayBpZiB0aGVyZSdzIGFscmVhZHkgYSBncmFwaCB2aWV3IChtaWdodCBoYXZlIGJlZW4gb3BlbmVkIGJ5IGFub3RoZXIgYWN0aW9uKVxyXG5cdFx0Ly8gVXNlIGl0ZXJhdGVBbGxMZWF2ZXMgaW5zdGVhZCBvZiBnZXRMZWF2ZXNPZlR5cGUgZm9yIGdyYXBoIHZpZXdzIChnZXRMZWF2ZXNPZlR5cGUgZG9lc24ndCB3b3JrIGZvciBncmFwaClcclxuXHRcdGxldCBleGlzdGluZ0dyYXBoTGVhdmVzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdGlmICh2aWV3U3RhdGUudHlwZSA9PT0gJ2dyYXBoJykge1xyXG5cdFx0XHRcdGV4aXN0aW5nR3JhcGhMZWF2ZXMucHVzaChsZWFmKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdGxldCBuZXdHaG9zdFRhYjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHJcblx0XHRpZiAoZXhpc3RpbmdHcmFwaExlYXZlcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdC8vIFVzZSB0aGUgZmlyc3QgZXhpc3RpbmcgZ3JhcGggdmlld1xyXG5cdFx0XHRuZXdHaG9zdFRhYiA9IGV4aXN0aW5nR3JhcGhMZWF2ZXNbMF0gfHwgbnVsbDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIE5vIGV4aXN0aW5nIGdyYXBoIHZpZXcsIG9wZW4gYSBuZXcgb25lXHJcblx0XHRcdFxyXG5cdFx0XHQvLyBPcGVuIGdyYXBoIHZpZXcgaW4gYSBuZXcgbGVhZiBkaXJlY3RseSBpbnN0ZWFkIG9mIHVzaW5nIHRoZSBjb21tYW5kXHJcblx0XHRcdC8vIFRoZSBjb21tYW5kIG1pZ2h0IGNsb3NlIGV4aXN0aW5nIHZpZXdzXHJcblx0XHRcdGNvbnN0IG5ld0xlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7XHJcblx0XHRcdGlmIChuZXdMZWFmKSB7XHJcblx0XHRcdFx0YXdhaXQgbmV3TGVhZi5zZXRWaWV3U3RhdGUoe1xyXG5cdFx0XHRcdFx0dHlwZTogJ2dyYXBoJyxcclxuXHRcdFx0XHRcdHN0YXRlOiB7fSxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBXYWl0IGZvciBncmFwaCB0byBpbml0aWFsaXplXHJcblx0XHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMCkpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdG5ld0dob3N0VGFiID0gbmV3TGVhZjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBGYWxsYmFjayB0byBjb21tYW5kIGlmIHdlIGNhbid0IGNyZWF0ZSBsZWFmXHJcblx0XHRcdFx0YXdhaXQgdGhpcy5vcGVuR3JhcGgoKTtcclxuXHRcdFx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwKSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0ZXhpc3RpbmdHcmFwaExlYXZlcyA9IFtdO1xyXG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRcdFx0aWYgKHZpZXdTdGF0ZS50eXBlID09PSAnZ3JhcGgnKSB7XHJcblx0XHRcdFx0XHRcdGV4aXN0aW5nR3JhcGhMZWF2ZXMucHVzaChsZWFmKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZXhpc3RpbmdHcmFwaExlYXZlcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRuZXdHaG9zdFRhYiA9IGV4aXN0aW5nR3JhcGhMZWF2ZXNbMF0gfHwgbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKG5ld0dob3N0VGFiKSB7XHJcblx0XHRcdG5ld0dob3N0VGFiLnNldFBpbm5lZCh0cnVlKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIENsb3NlIGFueSBvdGhlciBncmFwaCB2aWV3cyB0aGF0IG1pZ2h0IGhhdmUgYmVlbiBjcmVhdGVkXHJcblx0XHRcdC8vIFVzZSBpdGVyYXRlQWxsTGVhdmVzIHRvIGZpbmQgYWxsIGdyYXBoIHZpZXdzXHJcblx0XHRcdGNvbnN0IGFsbEdyYXBoTGVhdmVzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRcdGlmICh2aWV3U3RhdGUudHlwZSA9PT0gJ2dyYXBoJykge1xyXG5cdFx0XHRcdFx0YWxsR3JhcGhMZWF2ZXMucHVzaChsZWFmKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIGFsbEdyYXBoTGVhdmVzKSB7XHJcblx0XHRcdFx0aWYgKGxlYWYgIT09IG5ld0dob3N0VGFiKSB7XHJcblx0XHRcdFx0XHR2b2lkIGxlYWYuZGV0YWNoKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBXYWl0IGZvciBjbGVhbnVwXHJcblx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IHNob3VsZEZvY3VzID0gIXRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpO1xyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihuZXdHaG9zdFRhYiwgeyBmb2N1czogc2hvdWxkRm9jdXMgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAocnVuQ29tbWFuZCkge1xyXG5cdFx0XHRcdHRoaXMucnVuQ29tbWFuZE9uT3BlbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE9wZW4gdGhlIGhvbWUgYmFzZSBmaWxlXHJcblx0ICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBmb3Igb3BlbmluZ1xyXG5cdCAqL1xyXG5cdGFzeW5jIG9wZW5Ib21lQmFzZShvcHRpb25zOiB7XHJcblx0XHRyZXBsYWNlQWN0aXZlTGVhZj86IGJvb2xlYW47XHJcblx0XHRydW5Db21tYW5kPzogYm9vbGVhbjtcclxuXHR9ID0ge30pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdGNvbnN0IHsgcnVuQ29tbWFuZCA9IHRydWUgfSA9IG9wdGlvbnM7XHJcblx0XHRjb25zdCBtb2RlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubWFudWFsT3Blbk1vZGU7XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0Ly8gVXNlIHRoZSBuZXcgbWV0aG9kIHdpdGggbWFudWFsIG1vZGVcclxuXHRcdHJldHVybiB0aGlzLm9wZW5Ib21lQmFzZVdpdGhNb2RlKG1vZGUsIHJ1bkNvbW1hbmQpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiBob21lIGJhc2UgaW4gYW4gZW1wdHkgbGVhZiAoZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQpXHJcblx0ICovXHJcblx0YXN5bmMgb3BlbkluTGVhZihsZWFmOiBXb3Jrc3BhY2VMZWFmKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0XHJcblxyXG5cdFx0Ly8gSGFuZGxlIG5vbi1maWxlIHR5cGVzXHJcblx0XHRpZiAoaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMub3BlbldvcmtzcGFjZShob21lQmFzZVNldHRpbmdzLnZhbHVlKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0XHRpZiAoaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuR3JhcGgpIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5vcGVuR3JhcGgoKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0XHRpZiAoaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuTm9uZSkge1xyXG5cdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVzb2x2ZSB0aGUgYWN0dWFsIGZpbGUgcGF0aCBiYXNlZCBvbiB0eXBlXHJcblx0XHRjb25zdCByZXNvbHZlZFBhdGggPSBhd2FpdCBjb21wdXRlSG9tZUJhc2VQYXRoKFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnR5cGUsXHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudmFsdWUsXHJcblx0XHRcdHRoaXMucGx1Z2luXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0XHRpZiAoIXJlc29sdmVkUGF0aCkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gR2V0IHRoZSBmaWxlIC0gdXNlIG1ldGFkYXRhQ2FjaGUgZm9yIGJldHRlciBwYXRoIHJlc29sdXRpb24gKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdFx0Ly8gVGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3IgcGVyaW9kaWMgbm90ZXMgd2hpY2ggbWF5IGhhdmUgYmVlbiBqdXN0IGNyZWF0ZWRcclxuXHRcdGxldCBmaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZXNvbHZlZFBhdGgsICcvJyk7XHJcblx0XHRcclxuXHRcdC8vIElmIG5vdCBmb3VuZCwgdHJ5IGdldEZpbGVCeVBhdGggYXMgZmFsbGJhY2tcclxuXHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRmaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLmFwcCwgcmVzb2x2ZWRQYXRoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gRm9yIHBlcmlvZGljIG5vdGVzLCB0aGUgcGF0aCBtaWdodCBiZSB0cmltbWVkIChubyBleHRlbnNpb24pXHJcblx0XHQvLyBUcnkgd2l0aCAubWQgZXh0ZW5zaW9uIGlmIHN0aWxsIG5vdCBmb3VuZFxyXG5cdFx0aWYgKCFmaWxlICYmICFyZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5tZCcpICYmICFyZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5jYW52YXMnKSAmJiAhcmVzb2x2ZWRQYXRoLmVuZHNXaXRoKCcuYmFzZScpKSB7XHJcblx0XHRcdGNvbnN0IHVudHJpbW1lZFBhdGggPSBgJHtyZXNvbHZlZFBhdGh9Lm1kYDtcclxuXHRcdFx0ZmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIHVudHJpbW1lZFBhdGgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIHN0aWNreSBpY29uIGlzIGVuYWJsZWQgQU5EIHRoaXMgaXMgYSB0cnVseSBlbXB0eSB0YWIgKG5vdCBhIGZpbGUgb3BlbmVkIGZyb20gZXhwbG9yZXIpLFxyXG5cdFx0Ly8gY2hlY2sgaWYgdGhlcmUncyBhIGdob3N0IHRhYiBhbmQgbWVyZ2Ugd2l0aCBpdC5cclxuXHRcdC8vIFRoaXMgZW5zdXJlcyB0aGF0IHdoZW4geW91IGNsb3NlIHRoZSBsYXN0IHRhYiBhbmQgT2JzaWRpYW4gY3JlYXRlcyBhIG5ldyBlbXB0eSBvbmUsXHJcblx0XHQvLyBpdCBtZXJnZXMgd2l0aCB0aGUgZ2hvc3QgdGFiIGluc3RlYWQgb2YgY3JlYXRpbmcgYSBkdXBsaWNhdGUuXHJcblx0XHQvLyBCVVQ6IElmIHRoZSB1c2VyIG1hbnVhbGx5IG9wZW5lZCBhIGZpbGUgZnJvbSBleHBsb3Jlciwgd2Ugc2hvdWxkIE5PVCBtZXJnZSAtIGxldCB0aGVtIGhhdmUgdGhlaXIgdGFiLlxyXG5cdFx0Y29uc3QgaXNUcnVseUVtcHR5ID0gIWxlYWYudmlldyB8fCBsZWFmLnZpZXcuZ2V0Vmlld1R5cGUoKSA9PT0gJ2VtcHR5JztcclxuXHRcdFxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbiAmJiBpc1RydWx5RW1wdHkpIHtcclxuXHRcdFx0Ly8gUmFuZG9tIHR5cGVzIGFuZCBwZXJpb2RpYyBub3RlczogZG9uJ3QgcGluLCBidXQgY2FuIHN0aWxsIG1lcmdlXHJcblx0XHRcdGNvbnN0IGlzUmFuZG9tID0gaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tIHx8IFxyXG5cdFx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciB8fFxyXG5cdFx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZSB8fFxyXG5cdFx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLldlZWtseU5vdGUgfHxcclxuXHRcdFx0ICAgICAgICAgICAgICAgICBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZSB8fFxyXG5cdFx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlllYXJseU5vdGU7XHJcblx0XHRcdGNvbnN0IGdob3N0VGFiID0gdGhpcy5maW5kR2hvc3RUYWIoZmlsZSwgaXNSYW5kb20pO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGdob3N0VGFiKSB7XHJcblx0XHRcdFx0Ly8gQ2xvc2UgdGhlIG5ldyBlbXB0eSBsZWFmIHNpbmNlIHdlJ3JlIG1lcmdpbmcgd2l0aCBnaG9zdCB0YWJcclxuXHRcdFx0XHR2b2lkIGxlYWYuZGV0YWNoKCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRm9jdXMgdGhlIGdob3N0IHRhYiBhbmQgY29uZmlndXJlIGl0XHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYoZ2hvc3RUYWIpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuY29uZmlndXJlVmlldyhnaG9zdFRhYiwgZmlsZSk7XHJcblx0XHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIE5vIGdob3N0IHRhYiBmb3VuZCwgYnV0IHN0aWNreSBpY29uIGlzIGVuYWJsZWQgLSB0aGlzIHRhYiBzaG91bGQgYmVjb21lIHRoZSBnaG9zdCB0YWJcclxuXHRcdFx0Ly8gUGluIGl0IHNvIGl0J3MgcmVjb2duaXplZCBhcyB0aGUgZ2hvc3QgdGFiXHJcblx0XHRcdGlmICghaXNSYW5kb20pIHtcclxuXHRcdFx0XHRsZWFmLnNldFBpbm5lZCh0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0YXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcclxuXHRcdGF3YWl0IHRoaXMuY29uZmlndXJlVmlldyhsZWFmLCBmaWxlKTtcclxuXHRcdFxyXG5cdFx0Ly8gUnVuIGNvbW1hbmQgaWYgY29uZmlndXJlZFxyXG5cdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBMYXN0IHZpZXcgcmVmZXJlbmNlIGZvciByZXZlcnRWaWV3IGZ1bmN0aW9uYWxpdHlcclxuXHQgKi9cclxuXHRwcml2YXRlIGxhc3RWaWV3OiBXZWFrUmVmPE1hcmtkb3duVmlldz4gfCB1bmRlZmluZWQ7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbmZpZ3VyZSB0aGUgdmlldyBtb2RlIGZvciBhIGxlYWZcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIGNvbmZpZ3VyZVZpZXcobGVhZjogV29ya3NwYWNlTGVhZiwgZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblx0XHRjb25zdCB2aWV3ID0gbGVhZi52aWV3O1xyXG5cclxuXHRcdC8vIE9ubHkgY29uZmlndXJlIHZpZXcgbW9kZSBmb3IgbWFya2Rvd24tbGlrZSBmaWxlc1xyXG5cdFx0aWYgKCFpc01hcmtkb3duTGlrZShmaWxlKSB8fCAhKHZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBzdGF0ZSA9IHZpZXcuZ2V0U3RhdGUoKTtcclxuXHJcblx0XHQvLyBUcmFjayB2aWV3IGZvciByZXZlcnRWaWV3IGlmIGVuYWJsZWRcclxuXHRcdGlmIChzZXR0aW5ncy5yZXZlcnRWaWV3KSB7XHJcblx0XHRcdHRoaXMubGFzdFZpZXcgPSBuZXcgV2Vha1JlZih2aWV3KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBdXRvLXNjcm9sbCB0byBib3R0b20gaWYgZW5hYmxlZFxyXG5cdFx0aWYgKHNldHRpbmdzLmF1dG9TY3JvbGwpIHtcclxuXHRcdFx0Y29uc3QgY291bnQgPSB2aWV3LmVkaXRvci5saW5lQ291bnQoKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChzdGF0ZS5tb2RlID09PSAncHJldmlldycpIHtcclxuXHRcdFx0XHR2aWV3LnByZXZpZXdNb2RlLmFwcGx5U2Nyb2xsKGNvdW50IC0gNCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmlldy5lZGl0b3Iuc2V0Q3Vyc29yKGNvdW50KTtcclxuXHRcdFx0XHR2aWV3LmVkaXRvci5mb2N1cygpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2V0IHZpZXcgbW9kZVxyXG5cdFx0aWYgKHNldHRpbmdzLm9wZW5WaWV3TW9kZSAhPT0gJ2RlZmF1bHQnKSB7XHJcblx0XHRcdHN3aXRjaCAoc2V0dGluZ3Mub3BlblZpZXdNb2RlKSB7XHJcblx0XHRcdFx0Y2FzZSAncHJldmlldyc6XHJcblx0XHRcdFx0XHRzdGF0ZS5tb2RlID0gJ3ByZXZpZXcnO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnc291cmNlJzpcclxuXHRcdFx0XHRcdHN0YXRlLm1vZGUgPSAnc291cmNlJztcclxuXHRcdFx0XHRcdHN0YXRlLnNvdXJjZSA9IHRydWU7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdsaXZlJzpcclxuXHRcdFx0XHRcdHN0YXRlLm1vZGUgPSAnc291cmNlJztcclxuXHRcdFx0XHRcdHN0YXRlLnNvdXJjZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcclxuXHRcdFx0XHR0eXBlOiAnbWFya2Rvd24nLFxyXG5cdFx0XHRcdHN0YXRlOiBzdGF0ZSxcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXZlcnQgdmlldyB0byBkZWZhdWx0IHdoZW4gbmF2aWdhdGluZyBhd2F5IGZyb20gaG9tZSBiYXNlXHJcblx0ICovXHJcblx0YXN5bmMgcmV2ZXJ0VmlldygpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblx0XHRpZiAoIXNldHRpbmdzLnJldmVydFZpZXcgfHwgIXRoaXMubGFzdFZpZXcgfHwgc2V0dGluZ3Mub3BlblZpZXdNb2RlID09PSAnZGVmYXVsdCcpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLmxhc3RWaWV3LmRlcmVmKCk7XHJcblx0XHRpZiAoIXZpZXcpIHtcclxuXHRcdFx0dGhpcy5sYXN0VmlldyA9IHVuZGVmaW5lZDtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGhvbWVCYXNlU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHRjb25zdCByZXNvbHZlZFBhdGggPSBhd2FpdCBjb21wdXRlSG9tZUJhc2VQYXRoKFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnR5cGUsXHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudmFsdWUsXHJcblx0XHRcdHRoaXMucGx1Z2luXHJcblx0XHQpO1xyXG5cclxuXHRcdGlmICghcmVzb2x2ZWRQYXRoKSB7XHJcblx0XHRcdHRoaXMubGFzdFZpZXcgPSB1bmRlZmluZWQ7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiB3ZSdyZSBzdGlsbCBvbiB0aGUgaG9tZSBiYXNlIGZpbGVcclxuXHRcdGNvbnN0IGN1cnJlbnRGaWxlID0gdmlldy5maWxlO1xyXG5cdFx0aWYgKGN1cnJlbnRGaWxlICYmIGVxdWFsc0Nhc2VsZXNzKHRyaW1GaWxlKGN1cnJlbnRGaWxlKSwgcmVzb2x2ZWRQYXRoKSkge1xyXG5cdFx0XHRyZXR1cm47IC8vIFN0aWxsIG9uIGhvbWUgYmFzZSwgZG9uJ3QgcmV2ZXJ0XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmV2ZXJ0IHRvIGRlZmF1bHQgdmlld1xyXG5cdFx0Y29uc3Qgc3RhdGUgPSB2aWV3LmdldFN0YXRlKCk7XHJcblx0XHQgXHJcblx0XHRjb25zdCBjb25maWcgPSAodGhpcy5hcHAudmF1bHQgYXMgdW5rbm93biBhcyB7IGNvbmZpZz86IHsgZGVmYXVsdFZpZXdNb2RlPzogc3RyaW5nOyBsaXZlUHJldmlldz86IGJvb2xlYW4gfSB9KS5jb25maWc7XHJcblx0XHRjb25zdCBtb2RlID0gY29uZmlnPy5kZWZhdWx0Vmlld01vZGUgfHwgJ3NvdXJjZSc7XHJcblx0XHRjb25zdCBzb3VyY2UgPSBjb25maWc/LmxpdmVQcmV2aWV3ICE9PSB1bmRlZmluZWQgPyAhY29uZmlnLmxpdmVQcmV2aWV3IDogZmFsc2U7XHJcblxyXG5cdFx0aWYgKFxyXG5cdFx0XHR2aWV3LmxlYWYuZ2V0Vmlld1N0YXRlKCkudHlwZSA9PT0gJ21hcmtkb3duJyAmJlxyXG5cdFx0XHQobW9kZSAhPT0gc3RhdGUubW9kZSB8fCBzb3VyY2UgIT09IHN0YXRlLnNvdXJjZSlcclxuXHRcdCkge1xyXG5cdFx0XHRzdGF0ZS5tb2RlID0gbW9kZTtcclxuXHRcdFx0c3RhdGUuc291cmNlID0gc291cmNlO1xyXG5cdFx0XHRhd2FpdCB2aWV3LmxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogJ21hcmtkb3duJywgc3RhdGUsIGFjdGl2ZTogdHJ1ZSB9KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmxhc3RWaWV3ID0gdW5kZWZpbmVkO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUnVuIHRoZSBjb25maWd1cmVkIGNvbW1hbmQgYWZ0ZXIgb3BlbmluZ1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgcnVuQ29tbWFuZE9uT3BlbigpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGNvbW1hbmRJZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbW1hbmRPbk9wZW47XHJcblx0XHRpZiAoY29tbWFuZElkKSB7XHJcblx0XHRcdC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSB0aGUgdmlldyBpcyByZWFkeVxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRleGVjdXRlQ29tbWFuZCh0aGlzLmFwcCwgY29tbWFuZElkKTtcclxuXHRcdFx0fSwgMTAwKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZpbmQgYW4gZXhpc3RpbmcgbGVhZiB0aGF0IGhhcyB0aGUgaG9tZSBiYXNlIGZpbGUgb3BlblxyXG5cdCAqL1xyXG5cdGZpbmRFeGlzdGluZ0hvbWVCYXNlTGVhZihmaWxlPzogVEZpbGUpOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCB7XHJcblx0XHRpZiAoIWZpbGUpIHJldHVybiBudWxsO1xyXG5cdFx0Y29uc3QgaG9tZUJhc2VQYXRoID0gZmlsZS5wYXRoO1xyXG5cclxuXHRcdGNvbnN0IGxlYXZlcyA9IExFQUZfVFlQRVMuZmxhdE1hcCh0eXBlID0+IFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKHR5cGUpXHJcblx0XHQpO1xyXG5cclxuXHRcdGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXMpIHtcclxuXHRcdFx0aWYgKGxlYWZIYXNGaWxlKGxlYWYsIGhvbWVCYXNlUGF0aCkpIHtcclxuXHRcdFx0XHRyZXR1cm4gbGVhZjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRmluZCB0aGUgZ2hvc3QgdGFiICh0aGUgb25lIG9wZW5lZCB2aWEgc3RpY2t5IGljb24pXHJcblx0ICogR2hvc3QgdGFiIGlzIGlkZW50aWZpZWQgYnkgYmVpbmcgcGlubmVkIGFuZCBoYXZpbmcgdGhlIGhvbWUgYmFzZSBmaWxlXHJcblx0ICogT25seSBzZWFyY2hlcyBpbiB0aGUgY3VycmVudCB3aW5kb3cgKGdldExlYXZlc09mVHlwZSBpcyB3aW5kb3ctc2NvcGVkKVxyXG5cdCAqIFxyXG5cdCAqIE5vdGU6IElmIHRoZSBnaG9zdCB0YWIgaXMgbW92ZWQgdG8gYW5vdGhlciB3aW5kb3csIHRoaXMgd2lsbCByZXR1cm4gbnVsbCxcclxuXHQgKiBhbmQgYSBuZXcgZ2hvc3QgdGFiIHdpbGwgYmUgY3JlYXRlZCBpbiB0aGUgY3VycmVudCB3aW5kb3cgd2hlbiBuZWVkZWQuXHJcblx0ICogVGhpcyBpcyB0aGUgZGVzaXJlZCBiZWhhdmlvciAtIGVhY2ggd2luZG93IGNhbiBoYXZlIGl0cyBvd24gZ2hvc3QgdGFiLlxyXG5cdCAqIFxyXG5cdCAqIEZvciByYW5kb20gdHlwZXMsIHdlIGRvbid0IGxvb2sgZm9yIHBpbm5lZCB0YWJzICh0aGV5J3JlIG5vdCBwaW5uZWQpLlxyXG5cdCAqL1xyXG5cdGZpbmRHaG9zdFRhYihmaWxlPzogVEZpbGUsIGlzUmFuZG9tOiBib29sZWFuID0gZmFsc2UpOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCB7XHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSBmaWxlLnBhdGg7XHJcblxyXG5cdFx0Ly8gZ2V0TGVhdmVzT2ZUeXBlIG9ubHkgcmV0dXJucyBsZWF2ZXMgaW4gdGhlIGN1cnJlbnQgd2luZG93XHJcblx0XHRjb25zdCBsZWF2ZXMgPSBMRUFGX1RZUEVTLmZsYXRNYXAodHlwZSA9PiBcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSh0eXBlKVxyXG5cdFx0KTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzKSB7XHJcblx0XHRcdGlmIChsZWFmSGFzRmlsZShsZWFmLCBob21lQmFzZVBhdGgpKSB7XHJcblx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHQvLyBHaG9zdCB0YWIgaXMgcGlubmVkICh1bmxlc3MgaXQncyByYW5kb20pXHJcblx0XHRcdFx0aWYgKGlzUmFuZG9tIHx8IHZpZXdTdGF0ZS5waW5uZWQgPT09IHRydWUpIHtcclxuXHRcdFx0XHRcdHJldHVybiBsZWFmO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiBob21lIGJhc2UgaW4gZ2hvc3QgdGFiIChmb3Igc3RpY2t5IGljb24pXHJcblx0ICogR2hvc3QgdGFiIGlzIHBpbm5lZCBhbmQgaGlkZGVuIChpZiBzZXR0aW5nIGVuYWJsZWQpXHJcblx0ICogT25seSBvbmUgZ2hvc3QgdGFiIHNob3VsZCBleGlzdCBhdCBhIHRpbWVcclxuXHQgKiBXb3JrcyBmb3IgZmlsZS1iYXNlZCB0eXBlcyBhbmQgR3JhcGggdmlld1xyXG5cdCAqIE5vdGU6IFJhbmRvbSB0eXBlcyBkb24ndCBwaW4gKHNpbmNlIGZpbGUgY2hhbmdlcyBlYWNoIHRpbWUpXHJcblx0ICogTm90ZTogV29ya3NwYWNlIGFuZCBOb25lIGRvbid0IHdvcmsgKHdvcmtzcGFjZSBjaGFuZ2VzIGxheW91dCwgTm9uZSBkb2Vzbid0IG9wZW4gYW55dGhpbmcpXHJcblx0ICovXHJcblx0YXN5bmMgb3BlbkhvbWVCYXNlSW5HaG9zdFRhYihvcHRpb25zOiB7XHJcblx0XHRydW5Db21tYW5kPzogYm9vbGVhbjtcclxuXHR9ID0ge30pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdGNvbnN0IHsgcnVuQ29tbWFuZCA9IHRydWUgfSA9IG9wdGlvbnM7XHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0XHJcblx0XHQvLyBXb3Jrc3BhY2UgYW5kIE5vbmUgZG9uJ3Qgd29yayB3aXRoIGdob3N0IHRhYlxyXG5cdFx0aWYgKGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSB8fCBcclxuXHRcdCAgICBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Ob25lKSB7XHJcblx0XHRcdC8vIEZvciB0aGVzZSB0eXBlcywganVzdCB1c2Ugbm9ybWFsIG9wZW5cclxuXHRcdFx0cmV0dXJuIHRoaXMub3BlbkhvbWVCYXNlV2l0aE1vZGUoJ3JldGFpbicsIHJ1bkNvbW1hbmQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEdyYXBoIHZpZXc6IGRvbid0IHVzZSBnaG9zdCB0YWIgKGZpbmRpbmcgaXQgaXMgdW5yZWxpYWJsZSlcclxuXHRcdC8vIEp1c3Qgb3BlbiBpdCBub3JtYWxseSBsaWtlIHJhbmRvbSBmaWxlc1xyXG5cdFx0aWYgKGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkdyYXBoKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLm9wZW5HcmFwaCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJhbmRvbSB0eXBlcyBhbmQgcGVyaW9kaWMgbm90ZXM6IGRvbid0IHBpbiAoZmlsZSBjaGFuZ2VzIGVhY2ggdGltZSlcclxuXHRcdC8vIEJ1dCBzdGlsbCBhbGxvdyBtZXJnaW5nIHdpdGggZXhpc3RpbmcgdGFicyBpZiBzdGlja3kgaWNvbiBpcyBlbmFibGVkXHJcblx0XHRjb25zdCBpc1JhbmRvbSA9IGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbSB8fCBcclxuXHRcdCAgICAgICAgICAgICAgICAgaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5XZWVrbHlOb3RlIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlllYXJseU5vdGU7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgc2V0dGluZ3MgbW9kYWwgaXMgb3BlblxyXG5cdFx0aWYgKHRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZXNvbHZlIHRoZSBhY3R1YWwgZmlsZSBwYXRoIGJhc2VkIG9uIHR5cGVcclxuXHRcdGNvbnN0IHJlc29sdmVkUGF0aCA9IGF3YWl0IGNvbXB1dGVIb21lQmFzZVBhdGgoXHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudHlwZSxcclxuXHRcdFx0aG9tZUJhc2VTZXR0aW5ncy52YWx1ZSxcclxuXHRcdFx0dGhpcy5wbHVnaW5cclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdGlmICghcmVzb2x2ZWRQYXRoKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBHZXQgdGhlIGhvbWUgYmFzZSBmaWxlIC0gdXNlIG1ldGFkYXRhQ2FjaGUgZm9yIGJldHRlciBwYXRoIHJlc29sdXRpb24gKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdFx0Ly8gVGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3IgcGVyaW9kaWMgbm90ZXMgd2hpY2ggbWF5IGhhdmUgYmVlbiBqdXN0IGNyZWF0ZWRcclxuXHRcdGxldCBmaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZXNvbHZlZFBhdGgsICcvJyk7XHJcblx0XHRcclxuXHRcdC8vIElmIG5vdCBmb3VuZCwgdHJ5IGdldEZpbGVCeVBhdGggYXMgZmFsbGJhY2tcclxuXHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRmaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLmFwcCwgcmVzb2x2ZWRQYXRoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gRm9yIHBlcmlvZGljIG5vdGVzLCB0aGUgcGF0aCBtaWdodCBiZSB0cmltbWVkIChubyBleHRlbnNpb24pXHJcblx0XHQvLyBUcnkgd2l0aCAubWQgZXh0ZW5zaW9uIGlmIHN0aWxsIG5vdCBmb3VuZFxyXG5cdFx0aWYgKCFmaWxlICYmICFyZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5tZCcpICYmICFyZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5jYW52YXMnKSAmJiAhcmVzb2x2ZWRQYXRoLmVuZHNXaXRoKCcuYmFzZScpKSB7XHJcblx0XHRcdGNvbnN0IHVudHJpbW1lZFBhdGggPSBgJHtyZXNvbHZlZFBhdGh9Lm1kYDtcclxuXHRcdFx0ZmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIHVudHJpbW1lZFBhdGgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIGdob3N0IHRhYiBhbHJlYWR5IGV4aXN0c1xyXG5cdFx0Y29uc3QgZ2hvc3RUYWIgPSB0aGlzLmZpbmRHaG9zdFRhYihmaWxlLCBpc1JhbmRvbSk7XHJcblx0XHRcclxuXHRcdGlmIChnaG9zdFRhYikge1xyXG5cdFx0XHQvLyBHaG9zdCB0YWIgZXhpc3RzIC0gY2xvc2UgYW55IG90aGVyIHRhYnMgd2l0aCB0aGUgc2FtZSBmaWxlLCB0aGVuIGZvY3VzIGdob3N0IHRhYlxyXG5cdFx0XHRjb25zdCBhbGxMZWF2ZXMgPSBMRUFGX1RZUEVTLmZsYXRNYXAodHlwZSA9PiBcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKHR5cGUpXHJcblx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBkdXBsaWNhdGVzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIGFsbExlYXZlcykge1xyXG5cdFx0XHRcdGlmIChsZWFmICE9PSBnaG9zdFRhYiAmJiBsZWFmSGFzRmlsZShsZWFmLCByZXNvbHZlZFBhdGgpKSB7XHJcblx0XHRcdFx0XHRkdXBsaWNhdGVzLnB1c2gobGVhZik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgZHVwbGljYXRlcykge1xyXG5cdFx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gV2FpdCBhIGJpdCBmb3IgZGV0YWNobWVudHMgdG8gY29tcGxldGVcclxuXHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3Qgc2hvdWxkRm9jdXMgPSAhdGhpcy5pc1NldHRpbmdzTW9kYWxPcGVuKCk7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGdob3N0VGFiLCB7IGZvY3VzOiBzaG91bGRGb2N1cyB9KTtcclxuXHRcdFx0YXdhaXQgdGhpcy5jb25maWd1cmVWaWV3KGdob3N0VGFiLCBmaWxlKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChydW5Db21tYW5kKSB7XHJcblx0XHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gR2hvc3QgdGFiIGRvZXNuJ3QgZXhpc3QgLSBjcmVhdGUgaXRcclxuXHRcdC8vIENsb3NlIEFMTCB0YWJzIHdpdGggdGhlIHNhbWUgZmlsZSBmaXJzdCAoaW5jbHVkaW5nIGFueSBub24tcGlubmVkIG9uZXMpXHJcblx0XHRjb25zdCBhbGxMZWF2ZXMgPSBMRUFGX1RZUEVTLmZsYXRNYXAodHlwZSA9PiBcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSh0eXBlKVxyXG5cdFx0KTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgZXhpc3RpbmdUYWJzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHRcdGZvciAoY29uc3QgbGVhZiBvZiBhbGxMZWF2ZXMpIHtcclxuXHRcdFx0aWYgKGxlYWZIYXNGaWxlKGxlYWYsIHJlc29sdmVkUGF0aCkpIHtcclxuXHRcdFx0XHRleGlzdGluZ1RhYnMucHVzaChsZWFmKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgZXhpc3RpbmdUYWJzKSB7XHJcblx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gV2FpdCBhIGJpdCBmb3IgZGV0YWNobWVudHMgdG8gY29tcGxldGVcclxuXHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuXHJcblx0XHQvLyBDcmVhdGUgbmV3IGdob3N0IHRhYlxyXG5cdFx0Y29uc3QgbmV3R2hvc3RUYWIgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7XHJcblx0XHRhd2FpdCBuZXdHaG9zdFRhYi5vcGVuRmlsZShmaWxlKTtcclxuXHRcdFxyXG5cdFx0Ly8gUGluIHRoZSBnaG9zdCB0YWIgKHVubGVzcyBpdCdzIHJhbmRvbSAtIGZpbGUgY2hhbmdlcyBlYWNoIHRpbWUpXHJcblx0XHRpZiAoIWlzUmFuZG9tKSB7XHJcblx0XHRcdG5ld0dob3N0VGFiLnNldFBpbm5lZCh0cnVlKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gRm9jdXMgaXRcclxuXHRcdGNvbnN0IHNob3VsZEZvY3VzID0gIXRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpO1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobmV3R2hvc3RUYWIsIHsgZm9jdXM6IHNob3VsZEZvY3VzIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBDb25maWd1cmUgdGhlIHZpZXdcclxuXHRcdGF3YWl0IHRoaXMuY29uZmlndXJlVmlldyhuZXdHaG9zdFRhYiwgZmlsZSk7XHJcblxyXG5cdFx0Ly8gUnVuIGNvbW1hbmQgaWYgY29uZmlndXJlZFxyXG5cdFx0aWYgKHJ1bkNvbW1hbmQpIHtcclxuXHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGaW5kIGFuIGVtcHR5IGxlYWZcclxuXHQgKi9cclxuXHRwcml2YXRlIGZpbmRFbXB0eUxlYWYoKTogV29ya3NwYWNlTGVhZiB8IG51bGwge1xyXG5cdFx0Y29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZW1wdHknKTtcclxuXHRcdHJldHVybiBsZWF2ZXNbMF0gfHwgbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0aGUgaG9tZSBiYXNlIGZpbGVcclxuXHQgKi9cclxuXHRnZXRIb21lQmFzZUZpbGUoKTogVEZpbGUgfCBudWxsIHtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblx0XHRpZiAoIXNldHRpbmdzLmhvbWVCYXNlUGF0aCkge1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHRcdHJldHVybiBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCBzZXR0aW5ncy5ob21lQmFzZVBhdGgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRmFzdCBkZXRhY2ggYWxsIGxlYXZlcyB1c2luZyBjaGFuZ2VMYXlvdXQgKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdCAqIFRoaXMgaXMgbXVjaCBmYXN0ZXIgdGhhbiBpdGVyYXRpbmcgYW5kIGRldGFjaGluZyBsZWF2ZXMgaW5kaXZpZHVhbGx5XHJcblx0ICovXHJcblx0YXN5bmMgZGV0YWNoQWxsTGVhdmVzKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3QgbGF5b3V0ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExheW91dCgpO1xyXG5cdFx0bGF5b3V0Lm1haW4gPSB7XHJcblx0XHRcdFwiaWRcIjogXCI1MzI0MzczMDE1NzI2YmE4XCIsXHJcblx0XHRcdFwidHlwZVwiOiBcInNwbGl0XCIsXHJcblx0XHRcdFwiY2hpbGRyZW5cIjogW3sgXHJcblx0XHRcdFx0XCJpZFwiOiBcIjQ1MDk3MjRmOGJmODRkYTdcIixcclxuXHRcdFx0XHRcInR5cGVcIjogXCJ0YWJzXCIsXHJcblx0XHRcdFx0XCJjaGlsZHJlblwiOiBbe1xyXG5cdFx0XHRcdFx0XCJpZFwiOiBcImU3YTdiMzAzYzYxNzg2ZGNcIixcclxuXHRcdFx0XHRcdFwidHlwZVwiOiBcImxlYWZcIixcclxuXHRcdFx0XHRcdFwic3RhdGVcIjoge1widHlwZVwiOiBcImVtcHR5XCIsIFwic3RhdGVcIjoge30sIFwiaWNvblwiOiBcImx1Y2lkZS1maWxlXCIsIFwidGl0bGVcIjogXCJOZXcgdGFiXCJ9XHJcblx0XHRcdFx0fV1cclxuXHRcdFx0fV0sXHJcblx0XHRcdFwiZGlyZWN0aW9uXCI6IFwidmVydGljYWxcIlxyXG5cdFx0fTtcclxuXHRcdGxheW91dC5hY3RpdmUgPSBcImU3YTdiMzAzYzYxNzg2ZGNcIjtcclxuXHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5jaGFuZ2VMYXlvdXQobGF5b3V0KTtcclxuXHRcdFxyXG5cdFx0aWYgKFBsYXRmb3JtLmlzTW9iaWxlKSB7XHJcblx0XHRcdCBcclxuXHRcdFx0KHRoaXMuYXBwLndvcmtzcGFjZS5yaWdodFNwbGl0IGFzIHsgdXBkYXRlSW5mbz86ICgpID0+IHZvaWQgfSk/LnVwZGF0ZUluZm8/LigpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2xvc2UgYWxsIGxlYXZlcyBpbiB0aGUgbWFpbiB3b3Jrc3BhY2UgZXhjZXB0IHRoZSBzcGVjaWZpZWQgb25lXHJcblx0ICogU2ltcGxpZmllZCBhcHByb2FjaDogaXRlcmF0ZSBhbGwgbGVhdmVzIGFuZCBjbG9zZSB0aG9zZSBpbiBtYWluIHdvcmtzcGFjZVxyXG5cdCAqL1xyXG5cdGFzeW5jIGNsb3NlQWxsTGVhdmVzRXhjZXB0KGV4Y2VwdExlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHQvLyBVc2UgaXRlcmF0ZUFsbExlYXZlcyB0byBnZXQgQUxMIGxlYXZlc1xyXG5cdFx0Y29uc3QgbGVhdmVzVG9DbG9zZTogV29ya3NwYWNlTGVhZltdID0gW107XHJcblx0XHRcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdC8vIFNraXAgdGhlIGV4Y2VwdGlvbiBsZWFmXHJcblx0XHRcdGlmIChsZWFmID09PSBleGNlcHRMZWFmKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBUcnkgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXMgYSBtYWluIHdvcmtzcGFjZSBsZWFmXHJcblx0XHRcdC8vIEdldCB0aGUgdmlldydzIGNvbnRhaW5lciBlbGVtZW50XHJcblx0XHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXc7XHJcblx0XHRcdGxldCBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAodmlldykge1xyXG5cdFx0XHRcdGNvbnN0IHZpZXdBbnkgPSB2aWV3IGFzIHVua25vd24gYXMgeyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH07XHJcblx0XHRcdFx0Y29udGFpbmVyID0gdmlld0FueS5jb250YWluZXJFbCB8fCBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBJZiBubyBjb250YWluZXIgZnJvbSB2aWV3LCB0cnkgbGVhZidzIGNvbnRhaW5lckVsXHJcblx0XHRcdGlmICghY29udGFpbmVyKSB7XHJcblx0XHRcdFx0Y29uc3QgbGVhZkFueSA9IGxlYWYgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfTtcclxuXHRcdFx0XHRjb250YWluZXIgPSBsZWFmQW55LmNvbnRhaW5lckVsIHx8IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGlmIChjb250YWluZXIpIHtcclxuXHRcdFx0XHQvLyBDaGVjayBpZiBpdCdzIGluIHRoZSBtYWluIHdvcmtzcGFjZSAocm9vdCwgbm90IHNpZGViYXIpXHJcblx0XHRcdFx0Y29uc3Qgcm9vdFdvcmtzcGFjZSA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC12ZXJ0aWNhbC5tb2Qtcm9vdCcpO1xyXG5cdFx0XHRcdGNvbnN0IGxlZnRTaWRlYmFyID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLWxlZnQtc3BsaXQnKTtcclxuXHRcdFx0XHRjb25zdCByaWdodFNpZGViYXIgPSBjb250YWluZXIuY2xvc2VzdCgnLndvcmtzcGFjZS1zcGxpdC5tb2QtcmlnaHQtc3BsaXQnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAocm9vdFdvcmtzcGFjZSAmJiAhbGVmdFNpZGViYXIgJiYgIXJpZ2h0U2lkZWJhcikge1xyXG5cdFx0XHRcdFx0bGVhdmVzVG9DbG9zZS5wdXNoKGxlYWYpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBJZiB3ZSBjYW4ndCBmaW5kIGNvbnRhaW5lciwgc3RpbGwgdHJ5IHRvIGNsb3NlIGl0IGlmIGl0J3MgaW4gbWFpbiB3b3Jrc3BhY2VcclxuXHRcdFx0XHQvLyBUaGlzIGhhbmRsZXMgZWRnZSBjYXNlcyB3aGVyZSBjb250YWluZXIgZGV0ZWN0aW9uIGZhaWxzXHJcblx0XHRcdFx0Ly8gT25seSBjbG9zZSBpZiB3ZSdyZSBjbG9zaW5nIGV2ZXJ5dGhpbmcgKGV4Y2VwdExlYWYgaXMgbnVsbClcclxuXHRcdFx0XHRpZiAoZXhjZXB0TGVhZiA9PT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0Ly8gVHJ5IHRvIGdldCBsZWFmJ3MgdmlldyBzdGF0ZSB0byBjaGVjayBpZiBpdCdzIGEgbWFpbiB3b3Jrc3BhY2UgdGFiXHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRcdFx0XHQvLyBJZiBpdCBoYXMgYSB2aWV3IHN0YXRlLCBpdCdzIGxpa2VseSBhIG1haW4gd29ya3NwYWNlIHRhYlxyXG5cdFx0XHRcdFx0XHRpZiAodmlld1N0YXRlKSB7XHJcblx0XHRcdFx0XHRcdFx0bGVhdmVzVG9DbG9zZS5wdXNoKGxlYWYpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdFx0Ly8gSWYgd2UgY2FuJ3QgZ2V0IHZpZXcgc3RhdGUsIHNraXAgaXRcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRcclxuXHRcdC8vIENsb3NlIGFsbCBpZGVudGlmaWVkIGxlYXZlc1xyXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIGxlYXZlc1RvQ2xvc2UpIHtcclxuXHRcdFx0dm9pZCBsZWFmLmRldGFjaCgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBXYWl0IGZvciBkZXRhY2htZW50cyB0byBjb21wbGV0ZVxyXG5cdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMCkpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgdGhlIGZvY3VzZWQgdGFiIGlzIHRoZSBob21lIGJhc2VcclxuXHQgKi9cclxuXHRpc0ZvY3VzZWRPbkhvbWVCYXNlKCk6IGJvb2xlYW4ge1xyXG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVBhdGg7XHJcblx0XHRpZiAoIWhvbWVCYXNlUGF0aCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdC8vIEdldCB0aGUgaG9tZSBiYXNlIGZpbGUgZm9yIGFjY3VyYXRlIGNvbXBhcmlzb25cclxuXHRcdGNvbnN0IGhvbWVCYXNlRmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIGhvbWVCYXNlUGF0aCk7XHJcblx0XHRpZiAoIWhvbWVCYXNlRmlsZSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdHJldHVybiBhY3RpdmVGaWxlLnBhdGggPT09IGhvbWVCYXNlRmlsZS5wYXRoO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgaG9tZSBiYXNlIGZpbGUgZXhpc3RzXHJcblx0ICovXHJcblx0aG9tZUJhc2VFeGlzdHMoKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBwYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VQYXRoO1xyXG5cdFx0aWYgKCFwYXRoKSByZXR1cm4gZmFsc2U7XHJcblx0XHRcclxuXHRcdHJldHVybiBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCBwYXRoKSAhPT0gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIHRoZSBzZXR0aW5ncyBtb2RhbCBpcyBjdXJyZW50bHkgb3BlblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNTZXR0aW5nc01vZGFsT3BlbigpOiBib29sZWFuIHtcclxuXHRcdC8vIENoZWNrIGZvciBzZXR0aW5ncyBtb2RhbCBieSBsb29raW5nIGZvciB0aGUgbW9kYWwgY29udGFpbmVyXHJcblx0XHQvLyBUcnkgbXVsdGlwbGUgc2VsZWN0b3JzIHRvIGJlIG1vcmUgcm9idXN0XHJcblx0XHRjb25zdCBzZXR0aW5nc01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRhaW5lci5tb2Qtc2V0dGluZ3MnKSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC5tb2Qtc2V0dGluZ3MnKSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbC10YWItY29udGVudCcpO1xyXG5cdFx0XHJcblx0XHQvLyBBbHNvIGNoZWNrIGlmIGFueSBtb2RhbCBpcyBvcGVuIGFuZCBjb250YWlucyBzZXR0aW5ncyBjb250ZW50XHJcblx0XHRpZiAoIXNldHRpbmdzTW9kYWwpIHtcclxuXHRcdFx0Y29uc3QgYWxsTW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsLWNvbnRhaW5lcicpO1xyXG5cdFx0XHRmb3IgKGNvbnN0IG1vZGFsIG9mIEFycmF5LmZyb20oYWxsTW9kYWxzKSkge1xyXG5cdFx0XHRcdGlmIChtb2RhbC5xdWVyeVNlbGVjdG9yKCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHQgICAgbW9kYWwucXVlcnlTZWxlY3RvcignLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdCAgICBtb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZC1zZXR0aW5ncycpKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNldHRpbmdzTW9kYWwgIT09IG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgdGhlIGFjdGl2ZSBmaWxlIGFzIGhvbWUgYmFzZVxyXG5cdCAqL1xyXG5cdGFzeW5jIHNldEFjdGl2ZUZpbGVBc0hvbWVCYXNlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHQvLyBDaGVjayBpZiB0aGUgZmlsZSB0eXBlIGlzIHN1cHBvcnRlZFxyXG5cdFx0aWYgKCFpc1N1cHBvcnRlZEV4dGVuc2lvbihhY3RpdmVGaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpKSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VQYXRoID0gYWN0aXZlRmlsZS5wYXRoO1xyXG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGFjdGl2ZSBmaWxlIGNhbiBiZSBzZXQgYXMgaG9tZSBiYXNlXHJcblx0ICovXHJcblx0Y2FuU2V0QWN0aXZlRmlsZUFzSG9tZUJhc2UoKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdGlmICghYWN0aXZlRmlsZSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdHJldHVybiBpc1N1cHBvcnRlZEV4dGVuc2lvbihhY3RpdmVGaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpKTtcclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBIb21lIEJhc2UgVHlwZSBSZXNvbHV0aW9uIFV0aWxpdGllc1xyXG4gKiBSZXNvbHZlcyBob21lIGJhc2UgcGF0aHMgYmFzZWQgb24gdHlwZSAoRmlsZSwgV29ya3NwYWNlLCBSYW5kb20sIGV0Yy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgSG9tZUJhc2VUeXBlIH0gZnJvbSAnLi4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgdHlwZSBIb21lQmFzZVBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHtcclxuXHRjcmVhdGVEYWlseU5vdGUsIGdldERhaWx5Tm90ZSwgZ2V0QWxsRGFpbHlOb3RlcyxcclxuXHRjcmVhdGVXZWVrbHlOb3RlLCBnZXRXZWVrbHlOb3RlLCBnZXRBbGxXZWVrbHlOb3RlcyxcclxuXHRjcmVhdGVNb250aGx5Tm90ZSwgZ2V0TW9udGhseU5vdGUsIGdldEFsbE1vbnRobHlOb3RlcyxcclxuXHRjcmVhdGVZZWFybHlOb3RlLCBnZXRZZWFybHlOb3RlLCBnZXRBbGxZZWFybHlOb3RlcyxcclxufSBmcm9tICdvYnNpZGlhbi1kYWlseS1ub3Rlcy1pbnRlcmZhY2UnO1xyXG5cclxuLyoqXHJcbiAqIEdldCBhIHJhbmRvbSBmaWxlIGZyb20gdGhlIHZhdWx0XHJcbiAqIEBwYXJhbSBhcHAgVGhlIE9ic2lkaWFuIGFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gcm9vdCBPcHRpb25hbCBmb2xkZXIgcGF0aCBPUiBmaWxlbmFtZSBwYXR0ZXJuIChlLmcuLCBcImluZGV4Lm1kXCIgdG8gZmluZCBhbGwgZmlsZXMgbmFtZWQgaW5kZXgubWQpXHJcbiAqL1xyXG5mdW5jdGlvbiByYW5kb21GaWxlKGFwcDogQXBwLCByb290Pzogc3RyaW5nKTogVEZpbGUgfCBudWxsIHtcclxuXHRsZXQgZmlsZXM6IFRGaWxlW10gPSBbXTtcclxuXHRcclxuXHRpZiAocm9vdCkge1xyXG5cdFx0Ly8gRmlyc3QgdHJ5IGFzIGEgZm9sZGVyIHBhdGhcclxuXHRcdGNvbnN0IHJlc29sdmVkUm9vdCA9IGFwcC52YXVsdC5nZXRGb2xkZXJCeVBhdGgocm9vdCk7XHJcblx0XHRpZiAocmVzb2x2ZWRSb290KSB7XHJcblx0XHRcdC8vIEl0J3MgYSBmb2xkZXIgLSBnZXQgYWxsIGZpbGVzIGluIGl0XHJcblx0XHRcdGZpbGVzID0gZ2V0RmlsZXNJbkZvbGRlcihyZXNvbHZlZFJvb3QpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gTm90IGEgZm9sZGVyIC0gdHJlYXQgYXMgZmlsZW5hbWUgcGF0dGVybiAoZS5nLiwgXCJpbmRleC5tZFwiKVxyXG5cdFx0XHQvLyBTZWFyY2ggZm9yIGFsbCBmaWxlcyBtYXRjaGluZyB0aGlzIG5hbWUgaW4gdGhlIHZhdWx0XHJcblx0XHRcdGNvbnN0IGFsbEZpbGVzID0gYXBwLnZhdWx0LmdldEZpbGVzKCk7XHJcblx0XHRcdGNvbnN0IHBhdHRlcm4gPSByb290LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdGZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKChmOiBURmlsZSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gZi5uYW1lLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdFx0cmV0dXJuIGZpbGVOYW1lID09PSBwYXR0ZXJuIHx8IGZpbGVOYW1lID09PSBwYXR0ZXJuLnJlcGxhY2UoL1xcLm1kJC8sICcnKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdC8vIE5vIHJvb3Qgc3BlY2lmaWVkIC0gZ2V0IGFsbCBmaWxlc1xyXG5cdFx0ZmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKTtcclxuXHR9XHJcblxyXG5cdC8vIEZpbHRlciB0byBzdXBwb3J0ZWQgZmlsZSB0eXBlc1xyXG5cdGZpbGVzID0gZmlsZXMuZmlsdGVyKChmOiBURmlsZSkgPT4gWydtZCcsICdjYW52YXMnLCAnYmFzZSddLmluY2x1ZGVzKGYuZXh0ZW5zaW9uKSk7XHJcblx0XHJcblx0aWYgKGZpbGVzLmxlbmd0aCkge1xyXG5cdFx0Y29uc3QgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBmaWxlcy5sZW5ndGgpO1xyXG5cdFx0cmV0dXJuIGZpbGVzW2luZGV4XSB8fCBudWxsO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYWxsIGZpbGVzIGluIGEgZm9sZGVyIHJlY3Vyc2l2ZWx5XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRGaWxlc0luRm9sZGVyKGZvbGRlcjogVEZvbGRlcik6IFRGaWxlW10ge1xyXG5cdGxldCBmaWxlczogVEZpbGVbXSA9IFtdO1xyXG5cdFxyXG5cdGZvciAoY29uc3QgaXRlbSBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcclxuXHRcdGlmIChpdGVtIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0ZmlsZXMucHVzaChpdGVtKTtcclxuXHRcdH0gZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuXHRcdFx0ZmlsZXMucHVzaCguLi5nZXRGaWxlc0luRm9sZGVyKGl0ZW0pKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIGZpbGVzO1xyXG59XHJcblxyXG4vKipcclxuICogVHJpbSBmaWxlIGV4dGVuc2lvbiBmb3IgLm1kIGZpbGVzIChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB0cmltRmlsZShmaWxlOiBURmlsZSk6IHN0cmluZyB7XHJcblx0aWYgKCFmaWxlKSByZXR1cm4gJyc7XHJcblx0cmV0dXJuIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnID8gZmlsZS5wYXRoLnNsaWNlKDAsIC0zKSA6IGZpbGUucGF0aDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBQZXJpb2RpYyBub3RlIGluZm8gKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG4gKi9cclxuaW50ZXJmYWNlIFBlcmlvZGljSW5mbyB7XHJcblx0bm91bjogc3RyaW5nO1xyXG5cdGFkamVjdGl2ZTogc3RyaW5nO1xyXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG5cdGNyZWF0ZTogKGRhdGU6IG1vbWVudC5Nb21lbnQpID0+IFByb21pc2U8VEZpbGU+O1xyXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG5cdGdldDogKGRhdGU6IG1vbWVudC5Nb21lbnQsIGFsbDogUmVjb3JkPHN0cmluZywgVEZpbGU+KSA9PiBURmlsZTtcclxuXHRnZXRBbGw6ICgpID0+IFJlY29yZDxzdHJpbmcsIFRGaWxlPjtcclxufVxyXG5cclxuY29uc3QgUEVSSU9ESUNfSU5GTzogUmVjb3JkPEhvbWVCYXNlVHlwZSwgUGVyaW9kaWNJbmZvIHwgbnVsbD4gPSB7XHJcblx0W0hvbWVCYXNlVHlwZS5EYWlseU5vdGVdOiB7XHJcblx0XHRub3VuOiAnZGF5JyxcclxuXHRcdGFkamVjdGl2ZTogJ2RhaWx5JyxcclxuXHRcdGNyZWF0ZTogY3JlYXRlRGFpbHlOb3RlLFxyXG5cdFx0Z2V0OiBnZXREYWlseU5vdGUsXHJcblx0XHRnZXRBbGw6IGdldEFsbERhaWx5Tm90ZXMsXHJcblx0fSxcclxuXHRbSG9tZUJhc2VUeXBlLldlZWtseU5vdGVdOiB7XHJcblx0XHRub3VuOiAnd2VlaycsXHJcblx0XHRhZGplY3RpdmU6ICd3ZWVrbHknLFxyXG5cdFx0Y3JlYXRlOiBjcmVhdGVXZWVrbHlOb3RlLFxyXG5cdFx0Z2V0OiBnZXRXZWVrbHlOb3RlLFxyXG5cdFx0Z2V0QWxsOiBnZXRBbGxXZWVrbHlOb3RlcyxcclxuXHR9LFxyXG5cdFtIb21lQmFzZVR5cGUuTW9udGhseU5vdGVdOiB7XHJcblx0XHRub3VuOiAnbW9udGgnLFxyXG5cdFx0YWRqZWN0aXZlOiAnbW9udGhseScsXHJcblx0XHRjcmVhdGU6IGNyZWF0ZU1vbnRobHlOb3RlLFxyXG5cdFx0Z2V0OiBnZXRNb250aGx5Tm90ZSxcclxuXHRcdGdldEFsbDogZ2V0QWxsTW9udGhseU5vdGVzLFxyXG5cdH0sXHJcblx0W0hvbWVCYXNlVHlwZS5ZZWFybHlOb3RlXToge1xyXG5cdFx0bm91bjogJ3llYXInLFxyXG5cdFx0YWRqZWN0aXZlOiAneWVhcmx5JyxcclxuXHRcdGNyZWF0ZTogY3JlYXRlWWVhcmx5Tm90ZSxcclxuXHRcdGdldDogZ2V0WWVhcmx5Tm90ZSxcclxuXHRcdGdldEFsbDogZ2V0QWxsWWVhcmx5Tm90ZXMsXHJcblx0fSxcclxuXHRbSG9tZUJhc2VUeXBlLkZpbGVdOiBudWxsLFxyXG5cdFtIb21lQmFzZVR5cGUuUmFuZG9tXTogbnVsbCxcclxuXHRbSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcl06IG51bGwsXHJcblx0W0hvbWVCYXNlVHlwZS5Xb3Jrc3BhY2VdOiBudWxsLFxyXG5cdFtIb21lQmFzZVR5cGUuR3JhcGhdOiBudWxsLFxyXG5cdFtIb21lQmFzZVR5cGUuTm9uZV06IG51bGwsXHJcblx0W0hvbWVCYXNlVHlwZS5Kb3VybmFsXTogbnVsbCxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgcGVyaW9kaWMgbm90ZSBwYXRoIChEYWlseSwgV2Vla2x5LCBNb250aGx5LCBZZWFybHkpXHJcbiAqIEJhc2VkIG9uIGhvbWVwYWdlIHBsdWdpbiBpbXBsZW1lbnRhdGlvblxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UGVyaW9kaWNOb3RlKGtpbmQ6IEhvbWVCYXNlVHlwZSwgcGx1Z2luOiBIb21lQmFzZVBsdWdpbik6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG5cdGlmICghd2luZG93Lm1vbWVudCkge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cdFxyXG5cdGNvbnN0IGluZm8gPSBQRVJJT0RJQ19JTkZPW2tpbmRdO1xyXG5cdGlmICghaW5mbykge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cdFxyXG5cdC8vIEdldCB0aGUgY3VycmVudCBkYXRlIGZvciB0aGUgcGVyaW9kIChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcclxuXHRjb25zdCBkYXRlID0gd2luZG93Lm1vbWVudCgpLnN0YXJ0T2YoaW5mby5ub3VuIGFzIG1vbWVudC51bml0T2ZUaW1lLlN0YXJ0T2YpO1xyXG5cdFxyXG5cdC8vIEZvciBkYWlseSBub3RlcywgdHJ5IGNvcmUgZGFpbHkgbm90ZXMgcGx1Z2luIGZpcnN0IChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuXHRpZiAoa2luZCA9PT0gSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZSAmJiBwbHVnaW4uYXBwLmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8uWydkYWlseS1ub3RlcyddPy5lbmFibGVkKSB7XHJcblx0XHRjb25zdCBkYWlseU5vdGVzID0gcGx1Z2luLmFwcC5pbnRlcm5hbFBsdWdpbnMucGx1Z2luc1snZGFpbHktbm90ZXMnXS5pbnN0YW5jZTtcclxuXHRcdGlmIChkYWlseU5vdGVzPy5nZXREYWlseU5vdGVQYXRoKSB7XHJcblx0XHRcdGNvbnN0IHRvZGF5ID0gd2luZG93Lm1vbWVudCgpO1xyXG5cdFx0XHRjb25zdCBwYXRoID0gZGFpbHlOb3Rlcy5nZXREYWlseU5vdGVQYXRoKHRvZGF5KTtcclxuXHRcdFx0aWYgKHBhdGgpIHtcclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5yZXBsYWNlKC9cXC5tZCQvLCAnJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gVXNlIHBlcmlvZGljIG5vdGVzIHBsdWdpbiAobGlrZSBob21lcGFnZSBwbHVnaW4pXHJcblx0Y29uc3QgcGVyaW9kaWNOb3Rlc1BsdWdpbiA9IHBsdWdpbi5hcHAucGx1Z2lucz8ucGx1Z2lucz8uWydwZXJpb2RpYy1ub3RlcyddIGFzIHtcclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG5cdFx0Z2V0UGVyaW9kaWNOb3RlPzogKG5vdW46ICdkYXknIHwgJ3dlZWsnIHwgJ21vbnRoJyB8ICd5ZWFyJywgZGF0ZTogbW9tZW50Lk1vbWVudCkgPT4gVEZpbGUgfCBudWxsO1xyXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXHJcblx0XHRjcmVhdGVQZXJpb2RpY05vdGU/OiAobm91bjogJ2RheScgfCAnd2VlaycgfCAnbW9udGgnIHwgJ3llYXInLCBkYXRlOiBtb21lbnQuTW9tZW50KSA9PiBQcm9taXNlPFRGaWxlPjtcclxuXHRcdGNhY2hlPzoge1xyXG5cdFx0XHRpbml0aWFsaXplPzogKCkgPT4gdm9pZDtcclxuXHRcdH07XHJcblx0XHRtYW5pZmVzdD86IHtcclxuXHRcdFx0dmVyc2lvbj86IHN0cmluZztcclxuXHRcdH07XHJcblx0fSB8IHVuZGVmaW5lZDtcclxuXHRcclxuXHRpZiAoIXBlcmlvZGljTm90ZXNQbHVnaW4pIHtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHRcclxuXHR0cnkge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgbGVnYWN5IHBlcmlvZGljIG5vdGVzICh2ZXJzaW9uIHN0YXJ0cyB3aXRoIFwiMFwiKSAtIGV4YWN0bHkgbGlrZSBob21lcGFnZSBwbHVnaW5cclxuXHRcdGNvbnN0IGlzTGVnYWN5ID0gKHBlcmlvZGljTm90ZXNQbHVnaW4ubWFuaWZlc3Q/LnZlcnNpb24gfHwgJzAnKS5zdGFydHNXaXRoKCcwJyk7XHJcblx0XHRcclxuXHRcdGxldCBub3RlOiBURmlsZSB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHJcblx0XHRpZiAoaXNMZWdhY3kpIHtcclxuXHRcdFx0Ly8gTGVnYWN5IHBlcmlvZGljIG5vdGVzIC0gdXNlIG9ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZSAoZXhhY3RseSBsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuXHRcdFx0Y29uc3QgYWxsID0gaW5mby5nZXRBbGwoKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICghT2JqZWN0LmtleXMoYWxsKS5sZW5ndGgpIHtcclxuXHRcdFx0XHRub3RlID0gYXdhaXQgaW5mby5jcmVhdGUoZGF0ZSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bm90ZSA9IGluZm8uZ2V0KGRhdGUsIGFsbCkgfHwgYXdhaXQgaW5mby5jcmVhdGUoZGF0ZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGlmICghbm90ZSkge1xyXG5cdFx0XHRcdG5vdGUgPSBpbmZvLmdldChkYXRlLCBhbGwpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBOZXcgcGVyaW9kaWMgbm90ZXMgLSBleGFjdGx5IGxpa2UgaG9tZXBhZ2UgcGx1Z2luXHJcblx0XHRcdGlmIChwZXJpb2RpY05vdGVzUGx1Z2luLmNhY2hlPy5pbml0aWFsaXplKSB7XHJcblx0XHRcdFx0cGVyaW9kaWNOb3Rlc1BsdWdpbi5jYWNoZS5pbml0aWFsaXplKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdG5vdGUgPSAoXHJcblx0XHRcdFx0cGVyaW9kaWNOb3Rlc1BsdWdpbi5nZXRQZXJpb2RpY05vdGU/LihpbmZvLm5vdW4gYXMgJ2RheScgfCAnd2VlaycgfCAnbW9udGgnIHwgJ3llYXInLCBkYXRlKSB8fFxyXG5cdFx0XHRcdGF3YWl0IHBlcmlvZGljTm90ZXNQbHVnaW4uY3JlYXRlUGVyaW9kaWNOb3RlPy4oaW5mby5ub3VuIGFzICdkYXknIHwgJ3dlZWsnIHwgJ21vbnRoJyB8ICd5ZWFyJywgZGF0ZSlcclxuXHRcdFx0KSB8fCBudWxsO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAobm90ZSkge1xyXG5cdFx0XHRyZXR1cm4gdHJpbUZpbGUobm90ZSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH0gY2F0Y2gge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IGpvdXJuYWwgbm90ZSBwYXRoXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRKb3VybmFsTm90ZShqb3VybmFsTmFtZTogc3RyaW5nLCBwbHVnaW46IEhvbWVCYXNlUGx1Z2luKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcblx0IFxyXG5cdGNvbnN0IGpvdXJuYWxzID0gcGx1Z2luLmFwcC5wbHVnaW5zPy5wbHVnaW5zPy5bJ2pvdXJuYWxzJ107XHJcblx0aWYgKCFqb3VybmFscykgcmV0dXJuIG51bGw7XHJcblx0XHJcblx0dHJ5IHtcclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MsIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuXHRcdGNvbnN0IGpvdXJuYWwgPSBqb3VybmFscy5qb3VybmFscz8uZmluZCgoajogYW55KSA9PiBqLm5hbWUgPT09IGpvdXJuYWxOYW1lKTtcclxuXHRcdGlmICgham91cm5hbCkgcmV0dXJuIG51bGw7XHJcblx0XHRcclxuXHRcdC8vIFRyaWdnZXIgYXV0by1jcmVhdGUgaWYgbmVlZGVkXHJcblx0XHQgXHJcblx0XHRqb3VybmFscy5yZXByb2Nlc3NOb3Rlcz8uKCk7XHJcblx0XHQgXHJcblx0XHRjb25zdCBvcmlnQXV0b0NyZWF0ZSA9IGpvdXJuYWwuY29uZmlnPy52YWx1ZT8uYXV0b0NyZWF0ZTtcclxuXHRcdCBcclxuXHRcdGlmIChqb3VybmFsLmNvbmZpZz8udmFsdWUpIHtcclxuXHRcdFx0IFxyXG5cdFx0XHRqb3VybmFsLmNvbmZpZy52YWx1ZS5hdXRvQ3JlYXRlID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdCBcclxuXHRcdGF3YWl0IGpvdXJuYWwuYXV0b0NyZWF0ZT8uKCk7XHJcblx0XHQgXHJcblx0XHRpZiAoam91cm5hbC5jb25maWc/LnZhbHVlKSB7XHJcblx0XHRcdCBcclxuXHRcdFx0am91cm5hbC5jb25maWcudmFsdWUuYXV0b0NyZWF0ZSA9IG9yaWdBdXRvQ3JlYXRlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoIXdpbmRvdy5tb21lbnQpIHJldHVybiBudWxsO1xyXG5cdFx0IFxyXG5cdFx0Y29uc3QgdG9kYXkgPSB3aW5kb3cubW9tZW50KCkubG9jYWxlKCdjdXN0b20tam91cm5hbC1sb2NhbGUnKS5zdGFydE9mKCdkYXknKTtcclxuXHRcdCBcclxuXHRcdGNvbnN0IG5vdGUgPSBqb3VybmFsLmdldD8uKHRvZGF5KTtcclxuXHRcdGlmICghbm90ZSkgcmV0dXJuIG51bGw7XHJcblx0XHRcclxuXHRcdCBcclxuXHRcdGNvbnN0IHBhdGggPSBqb3VybmFsLmdldE5vdGVQYXRoPy4obm90ZSk7XHJcblx0XHQgXHJcblx0XHRyZXR1cm4gcGF0aCA/IHBhdGgucmVwbGFjZSgvXFwubWQkLywgJycpIDogbnVsbDtcclxuXHR9IGNhdGNoIHtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENvbXB1dGUgdGhlIGFjdHVhbCBmaWxlIHBhdGggYmFzZWQgb24gaG9tZSBiYXNlIHR5cGVcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21wdXRlSG9tZUJhc2VQYXRoKFxyXG5cdHR5cGU6IEhvbWVCYXNlVHlwZSxcclxuXHR2YWx1ZTogc3RyaW5nLFxyXG5cdHBsdWdpbjogSG9tZUJhc2VQbHVnaW5cclxuKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcblx0c3dpdGNoICh0eXBlKSB7XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5GaWxlOlxyXG5cdFx0XHRyZXR1cm4gdmFsdWUgfHwgbnVsbDtcclxuXHRcdFxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuUmFuZG9tOiB7XHJcblx0XHRcdGNvbnN0IGZpbGUgPSByYW5kb21GaWxlKHBsdWdpbi5hcHApO1xyXG5cdFx0XHRyZXR1cm4gZmlsZSA/IHRyaW1GaWxlKGZpbGUpIDogbnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyOiB7XHJcblx0XHRcdGNvbnN0IGZpbGUgPSByYW5kb21GaWxlKHBsdWdpbi5hcHAsIHZhbHVlKTtcclxuXHRcdFx0cmV0dXJuIGZpbGUgPyB0cmltRmlsZShmaWxlKSA6IG51bGw7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZTpcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLldlZWtseU5vdGU6XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZTpcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLlllYXJseU5vdGU6XHJcblx0XHRcdHJldHVybiBhd2FpdCBnZXRQZXJpb2RpY05vdGUodHlwZSwgcGx1Z2luKTtcclxuXHRcdFxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuSm91cm5hbDpcclxuXHRcdFx0cmV0dXJuIGF3YWl0IGdldEpvdXJuYWxOb3RlKHZhbHVlLCBwbHVnaW4pO1xyXG5cdFx0XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2U6XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5HcmFwaDpcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLk5vbmU6XHJcblx0XHRcdC8vIFRoZXNlIGRvbid0IHJlc29sdmUgdG8gYSBmaWxlIHBhdGhcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHRcclxuXHRcdGRlZmF1bHQ6XHJcblx0XHRcdHJldHVybiB2YWx1ZSB8fCBudWxsO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgaG9tZSBiYXNlIHR5cGUgcmVxdWlyZXMgYSBmaWxlIHRvIGJlIG9wZW5lZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVzRmlsZSh0eXBlOiBIb21lQmFzZVR5cGUpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gdHlwZSAhPT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSAmJiBcclxuXHQgICAgICAgdHlwZSAhPT0gSG9tZUJhc2VUeXBlLkdyYXBoICYmIFxyXG5cdCAgICAgICB0eXBlICE9PSBIb21lQmFzZVR5cGUuTm9uZTtcclxufVxyXG5cclxuIiwgIi8qKlxyXG4gKiBOZXcgVGFiIFNlcnZpY2VcclxuICogSGFuZGxlcyBzdGFydHVwIGRldGVjdGlvbiBhbmQgbmV3IHRhYiByZXBsYWNlbWVudFxyXG4gKiBJbnNwaXJlZCBieSBvYnNpZGlhbi1ob21lcGFnZSBhbmQgbmV3LXRhYi1kZWZhdWx0LXBhZ2VcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFdvcmtzcGFjZUxlYWYsIFZpZXcsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgdHlwZSBIb21lQmFzZVBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHsgSG9tZUJhc2VUeXBlIH0gZnJvbSAnLi4vc2V0dGluZ3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5ld1RhYlNlcnZpY2Uge1xyXG5cdHByaXZhdGUgYXBwOiBBcHA7XHJcblx0cHJpdmF0ZSBwbHVnaW46IEhvbWVCYXNlUGx1Z2luO1xyXG5cdHByaXZhdGUgZXhpc3RpbmdMZWF2ZXM6IFdlYWtTZXQ8V29ya3NwYWNlTGVhZj4gPSBuZXcgV2Vha1NldCgpO1xyXG5cdHByaXZhdGUgaXNTdGFydHVwOiBib29sZWFuID0gdHJ1ZTtcclxuXHRwcml2YXRlIHN0YXJ0dXBDb21wbGV0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcblx0Y29uc3RydWN0b3IocGx1Z2luOiBIb21lQmFzZVBsdWdpbikge1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUcmFjayBhbGwgZXhpc3RpbmcgbGVhdmVzIChmb3IgbmV3IHRhYiBkZXRlY3Rpb24pXHJcblx0ICogVGhpcyBtdXN0IGJlIGNhbGxlZCBldmVuIHdoZW4gc3RhcnR1cCBpcyBoYW5kbGVkIGVsc2V3aGVyZVxyXG5cdCAqL1xyXG5cdHRyYWNrRXhpc3RpbmdMZWF2ZXMoKTogdm9pZCB7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHR0aGlzLmV4aXN0aW5nTGVhdmVzLmFkZChsZWFmKTtcclxuXHRcdH0pO1xyXG5cdFx0Ly8gTWFyayBzdGFydHVwIGFzIGNvbXBsZXRlZCBzbyBsYXlvdXQgY2hhbmdlIGhhbmRsZXIgd29ya3NcclxuXHRcdHRoaXMuc3RhcnR1cENvbXBsZXRlZCA9IHRydWU7XHJcblx0XHR0aGlzLmlzU3RhcnR1cCA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSW5pdGlhbGl6ZSB0aGUgc2VydmljZSAtIGNhbGxlZCB3aGVuIGxheW91dCBpcyByZWFkeVxyXG5cdCAqL1xyXG5cdGluaXRpYWxpemUoKTogdm9pZCB7XHJcblx0XHQvLyBUcmFjayBhbGwgZXhpc3RpbmcgbGVhdmVzXHJcblx0XHR0aGlzLnRyYWNrRXhpc3RpbmdMZWF2ZXMoKTtcclxuXHJcblx0XHQvLyBIYW5kbGUgc3RhcnR1cFxyXG5cdFx0dm9pZCB0aGlzLmhhbmRsZVN0YXJ0dXAoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZSBhcHAgc3RhcnR1cCAtIG9wZW4gaG9tZSBiYXNlIGlmIG5lZWRlZFxyXG5cdCAqIE9ubHkgY2FsbGVkIG9uIGFjdHVhbCBhcHAgc3RhcnR1cCwgbm90IHBsdWdpbiByZWxvYWRzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBcdGFzeW5jIGhhbmRsZVN0YXJ0dXAoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xyXG5cclxuXHRcdC8vIENoZWNrIGlmIHdlIHNob3VsZCBza2lwIChvcGVuT25TdGFydHVwIGlzIGZhbHNlLCBvciBubyBob21lIGJhc2UgY29uZmlndXJlZClcclxuXHRcdGNvbnN0IGhvbWVCYXNlU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHRpZiAoIXNldHRpbmdzLm9wZW5PblN0YXJ0dXAgfHwgKCFob21lQmFzZVNldHRpbmdzLnZhbHVlICYmIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpKSB7XHJcblx0XHRcdHRoaXMuc3RhcnR1cENvbXBsZXRlZCA9IHRydWU7XHJcblx0XHRcdHRoaXMuaXNTdGFydHVwID0gZmFsc2U7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBmb3IgVVJMIHBhcmFtcyAobGlrZSBvYnNpZGlhbjovL29wZW4gbGlua3MpIC0gaWYgcHJlc2VudCwgc2tpcCBldmVyeXRoaW5nXHJcblx0XHRpZiAoYXdhaXQgdGhpcy5oYXNVcmxQYXJhbXMoKSkge1xyXG5cdFx0XHR0aGlzLnN0YXJ0dXBDb21wbGV0ZWQgPSB0cnVlO1xyXG5cdFx0XHR0aGlzLmlzU3RhcnR1cCA9IGZhbHNlO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gV2FpdCBhIGJpdCBmb3IgT2JzaWRpYW4gdG8gZmluaXNoIHJlc3RvcmluZyB0aGUgd29ya3NwYWNlXHJcblx0XHQvLyBUaGlzIGVuc3VyZXMgYWxsIHRhYnMgYXJlIGxvYWRlZCBiZWZvcmUgd2UgdHJ5IHRvIGNsb3NlIHRoZW1cclxuXHRcdC8vIE5lZWQgbG9uZ2VyIGRlbGF5IHRvIGVuc3VyZSB3b3Jrc3BhY2UgaXMgZnVsbHkgcmVzdG9yZWRcclxuXHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcclxuXHJcblx0XHQvLyBJZiBrZWVwRXhpc3RpbmdUYWJzIGlzIGZhbHNlLCBjbG9zZSBBTEwgdGFicyBmaXJzdCwgdGhlbiBvcGVuIGhvbWUgYmFzZVxyXG5cdFx0Ly8gVGhpcyBzaG91bGQgT05MWSBoYXBwZW4gb24gc3RhcnR1cCwgbm90IHdoZW4gbWFudWFsbHkgb3BlbmluZ1xyXG5cdFx0Ly8gV2UgY2xvc2UgZXZlcnl0aGluZyBmaXJzdCwgdGhlbiBvcGVuIGZyZXNoIC0gZG9uJ3QgdHJ5IHRvIGZpbmQgdGFicyB0byBrZWVwXHJcblx0XHQvLyBFeGNlcHRpb246IElmIGhpZGVSZWxlYXNlTm90ZXMgaXMgT0ZGLCBwcmVzZXJ2ZSByZWxlYXNlIG5vdGVzIHRhYlxyXG5cdFx0aWYgKCFzZXR0aW5ncy5rZWVwRXhpc3RpbmdUYWJzKSB7XHJcblx0XHRcdC8vIElmIGhpZGVSZWxlYXNlTm90ZXMgaXMgT0ZGLCB3ZSBzaG91bGQgcHJlc2VydmUgcmVsZWFzZSBub3RlcyB0YWJcclxuXHRcdFx0bGV0IGV4Y2VwdExlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5oaWRlUmVsZWFzZU5vdGVzKSB7XHJcblx0XHRcdFx0Ly8gVHJ5IHRvIGZpbmQgcmVsZWFzZSBub3RlcyB0YWJcclxuXHRcdFx0XHRjb25zdCBhbGxMZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdtYXJrZG93bicpO1xyXG5cdFx0XHRcdGZvciAoY29uc3QgbGVhZiBvZiBhbGxMZWF2ZXMpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXc7XHJcblx0XHRcdFx0XHQgXHJcblx0XHRcdFx0XHRjb25zdCBtYXJrZG93blZpZXcgPSB2aWV3IGFzIHVua25vd24gYXMgeyBmaWxlPzogVEZpbGU7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfTtcclxuXHRcdFx0XHRcdGlmIChtYXJrZG93blZpZXcuZmlsZSkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlID0gbWFya2Rvd25WaWV3LmZpbGU7XHJcblx0XHRcdFx0XHQvLyBSZWxlYXNlIG5vdGVzIGFyZSB0eXBpY2FsbHkgaW4gY29uZmlnIGZvbGRlciBvciBoYXZlIHNwZWNpZmljIG5hbWluZ1xyXG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgaXQncyBhIHJlbGVhc2Ugbm90ZXMgdGFiIGJ5IGxvb2tpbmcgYXQgdGhlIGZpbGUgcGF0aFxyXG5cdFx0XHRcdFx0Y29uc3QgY29uZmlnRGlyID0gdGhpcy5hcHAudmF1bHQuY29uZmlnRGlyO1xyXG5cdFx0XHRcdFx0aWYgKGZpbGUucGF0aC5pbmNsdWRlcygncmVsZWFzZScpIHx8IGZpbGUucGF0aC5pbmNsdWRlcyhjb25maWdEaXIpKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgaXQncyBhY3R1YWxseSBhIHJlbGVhc2Ugbm90ZXMgdmlld1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRhaW5lciA9IG1hcmtkb3duVmlldy5jb250YWluZXJFbDtcclxuXHRcdFx0XHRcdFx0XHRpZiAoY29udGFpbmVyICYmIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucmVsZWFzZS1ub3RlcycpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRleGNlcHRMZWFmID0gbGVhZjtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2xvc2UgQUxMIHRhYnMgLSBkb24ndCB0cnkgdG8ga2VlcCBhbnksIGp1c3QgY2xvc2UgZXZlcnl0aGluZyAoZXhjZXB0IHJlbGVhc2Ugbm90ZXMgaWYgYXBwbGljYWJsZSlcclxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2UuY2xvc2VBbGxMZWF2ZXNFeGNlcHQoZXhjZXB0TGVhZik7XHJcblx0XHRcdC8vIFdhaXQgbG9uZ2VyIHRvIGVuc3VyZSBhbGwgZGV0YWNobWVudHMgYXJlIHByb2Nlc3NlZFxyXG5cdFx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gT24gc3RhcnR1cCwgdXNlIGdob3N0IHRhYiBpZiBzdGlja3kgaWNvbiBpcyBlbmFibGVkLCBvdGhlcndpc2UgdXNlIG5vcm1hbCBvcGVuSG9tZUJhc2VcclxuXHRcdGlmIChzZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2Uub3BlbkhvbWVCYXNlSW5HaG9zdFRhYih7XHJcblx0XHRcdFx0cnVuQ29tbWFuZDogdHJ1ZSxcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBBbHdheXMgY2FsbCBvcGVuSG9tZUJhc2UgLSBpdCB3aWxsIG9wZW4gaG9tZSBiYXNlIGlmIG5vdCBhbHJlYWR5IG9wZW5cclxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2Uub3BlbkhvbWVCYXNlKHtcclxuXHRcdFx0XHRyZXBsYWNlQWN0aXZlTGVhZjogZmFsc2UsXHJcblx0XHRcdFx0cnVuQ29tbWFuZDogdHJ1ZSxcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zdGFydHVwQ29tcGxldGVkID0gdHJ1ZTtcclxuXHRcdHRoaXMuaXNTdGFydHVwID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiB0aGUgc2V0dGluZ3MgbW9kYWwgaXMgY3VycmVudGx5IG9wZW5cclxuXHQgKi9cclxuXHRwcml2YXRlIGlzU2V0dGluZ3NNb2RhbE9wZW4oKTogYm9vbGVhbiB7XHJcblx0XHQvLyBDaGVjayBmb3Igc2V0dGluZ3MgbW9kYWwgYnkgbG9va2luZyBmb3IgdGhlIG1vZGFsIGNvbnRhaW5lclxyXG5cdFx0Ly8gVHJ5IG11bHRpcGxlIHNlbGVjdG9ycyB0byBiZSBtb3JlIHJvYnVzdFxyXG5cdFx0Y29uc3Qgc2V0dGluZ3NNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250YWluZXIubW9kLXNldHRpbmdzJykgfHxcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwubW9kLXNldHRpbmdzJykgfHxcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmVydGljYWwtdGFiLWNvbnRlbnQnKTtcclxuXHRcdFxyXG5cdFx0Ly8gQWxzbyBjaGVjayBpZiBhbnkgbW9kYWwgaXMgb3BlbiBhbmQgY29udGFpbnMgc2V0dGluZ3MgY29udGVudFxyXG5cdFx0aWYgKCFzZXR0aW5nc01vZGFsKSB7XHJcblx0XHRcdGNvbnN0IGFsbE1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbC1jb250YWluZXInKTtcclxuXHRcdFx0Zm9yIChjb25zdCBtb2RhbCBvZiBBcnJheS5mcm9tKGFsbE1vZGFscykpIHtcclxuXHRcdFx0XHRpZiAobW9kYWwucXVlcnlTZWxlY3RvcignLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0ICAgIG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5zZXR0aW5ncy1jb250ZW50JykgfHxcclxuXHRcdFx0XHQgICAgbW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2Qtc2V0dGluZ3MnKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzZXR0aW5nc01vZGFsICE9PSBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgZm9yIFVSTCBwYXJhbWV0ZXJzIHRoYXQgaW5kaWNhdGUgT2JzaWRpYW4gd2FzIG9wZW5lZCB2aWEgYSBsaW5rXHJcblx0ICogQmFzZWQgb24gb2JzaWRpYW4taG9tZXBhZ2UgaW1wbGVtZW50YXRpb25cclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIGhhc1VybFBhcmFtcygpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdC8vIENoZWNrIGZvciBtb2JpbGUgVVJMIHBhcmFtcyAoQ2FwYWNpdG9yIEFQSSlcclxuXHRcdGNvbnN0IHdpbmRvd0FueSA9IHdpbmRvdyBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xyXG5cdFx0XHJcblx0XHRjb25zdCBjYXBhY2l0b3IgPSB3aW5kb3dBbnkuQ2FwYWNpdG9yIGFzIHsgUGx1Z2lucz86IHsgQXBwPzogeyBnZXRMYXVuY2hVcmw6ICgpID0+IFByb21pc2U8eyB1cmw/OiBzdHJpbmcgfSB8IG51bGw+IH0gfSB9IHwgdW5kZWZpbmVkO1xyXG5cdFx0aWYgKGNhcGFjaXRvcj8uUGx1Z2lucz8uQXBwKSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y29uc3QgbGF1bmNoVXJsID0gYXdhaXQgY2FwYWNpdG9yLlBsdWdpbnMuQXBwLmdldExhdW5jaFVybCgpO1xyXG5cdFx0XHRcdGlmIChsYXVuY2hVcmw/LnVybCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgdXJsID0gbmV3IFVSTChsYXVuY2hVcmwudXJsKTtcclxuXHRcdFx0XHRcdGNvbnN0IHBhcmFtcyA9IEFycmF5LmZyb20odXJsLnNlYXJjaFBhcmFtcy5rZXlzKCkpO1xyXG5cdFx0XHRcdFx0Y29uc3QgYWN0aW9uID0gdXJsLmhvc3RuYW1lO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAoWydvcGVuJywgJ2FkdmFuY2VkLXVyaSddLmluY2x1ZGVzKGFjdGlvbikgJiZcclxuXHRcdFx0XHRcdFx0WydmaWxlJywgJ2ZpbGVwYXRoJywgJ3dvcmtzcGFjZSddLnNvbWUoZSA9PiBwYXJhbXMuaW5jbHVkZXMoZSkpKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0Ly8gSWdub3JlIGVycm9yc1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIGRlc2t0b3AgVVJMIHBhcmFtc1xyXG5cdFx0Y29uc3Qgb2JzQWN0ID0gd2luZG93QW55Lk9CU19BQ1QgYXMgeyBhY3Rpb24/OiBzdHJpbmcgfSB8IHVuZGVmaW5lZDtcclxuXHRcdGlmIChvYnNBY3QpIHtcclxuXHRcdFx0Y29uc3QgcGFyYW1zID0gT2JqZWN0LmtleXMob2JzQWN0KTtcclxuXHRcdFx0Y29uc3QgYWN0aW9uID0gb2JzQWN0LmFjdGlvbjtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChhY3Rpb24gJiYgWydvcGVuJywgJ2FkdmFuY2VkLXVyaSddLmluY2x1ZGVzKGFjdGlvbikgJiZcclxuXHRcdFx0XHRbJ2ZpbGUnLCAnZmlsZXBhdGgnLCAnd29ya3NwYWNlJ10uc29tZShlID0+IHBhcmFtcy5pbmNsdWRlcyhlKSkpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZSBsYXlvdXQgY2hhbmdlIGV2ZW50IC0gY2hlY2sgZm9yIG5ldyBlbXB0eSB0YWJzXHJcblx0ICogQmFzZWQgb24gbmV3LXRhYi1kZWZhdWx0LXBhZ2UgaW1wbGVtZW50YXRpb25cclxuXHQgKi9cclxuXHRoYW5kbGVMYXlvdXRDaGFuZ2UoKTogdm9pZCB7XHJcblx0XHQvLyBTa2lwIGlmIG5ldyB0YWIgcmVwbGFjZW1lbnQgaXMgZGlzYWJsZWRcclxuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYikge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2tpcCBkdXJpbmcgc3RhcnR1cFxyXG5cdFx0aWYgKHRoaXMuaXNTdGFydHVwIHx8ICF0aGlzLnN0YXJ0dXBDb21wbGV0ZWQpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGFsbCBsZWF2ZXMgZm9yIG5ldyBlbXB0eSBvbmVzXHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHQvLyBTa2lwIGlmIHdlJ3ZlIGFscmVhZHkgc2VlbiB0aGlzIGxlYWZcclxuXHRcdFx0aWYgKHRoaXMuZXhpc3RpbmdMZWF2ZXMuaGFzKGxlYWYpKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBNYXJrIGFzIHNlZW5cclxuXHRcdFx0dGhpcy5leGlzdGluZ0xlYXZlcy5hZGQobGVhZik7XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIGFuIGVtcHR5IHRhYlxyXG5cdFx0XHRpZiAoIXRoaXMuaXNFbXB0eVRhYihsZWFmKSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSGFuZGxlIGJhc2VkIG9uIG1vZGVcclxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYk1vZGUgPT09ICdvbmx5LXdoZW4tZW1wdHknKSB7XHJcblx0XHRcdFx0Ly8gT25seSByZXBsYWNlIGlmIHRoaXMgaXMgdGhlIG9ubHkgdGFiXHJcblx0XHRcdFx0aWYgKCF0aGlzLmlzT25seVRhYihsZWFmKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVwbGFjZSB0aGUgZW1wdHkgdGFiIHdpdGggaG9tZSBiYXNlXHJcblx0XHRcdHZvaWQgdGhpcy5yZXBsYWNlRW1wdHlUYWIobGVhZik7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGEgbGVhZiBpcyBhbiBlbXB0eSB0YWJcclxuXHQgKiBJTVBPUlRBTlQ6IE9ubHkgcmV0dXJucyB0cnVlIGlmIHRoZSBsZWFmIGlzIHRydWx5IGVtcHR5IChubyBmaWxlIG9wZW5lZClcclxuXHQgKiBJZiBhIGZpbGUgaXMgYWxyZWFkeSBvcGVuZWQgaW4gdGhlIGxlYWYsIGl0J3Mgbm90IGVtcHR5IGFuZCBzaG91bGQgTk9UIGJlIHJlcGxhY2VkXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc0VtcHR5VGFiKGxlYWY6IFdvcmtzcGFjZUxlYWYpOiBib29sZWFuIHtcclxuXHRcdGlmICghbGVhZi52aWV3KSByZXR1cm4gdHJ1ZTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2hlY2sgaWYgdmlldyB0eXBlIGlzIGVtcHR5XHJcblx0XHRpZiAobGVhZi52aWV3LmdldFZpZXdUeXBlKCkgIT09ICdlbXB0eScpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBEb3VibGUtY2hlY2s6IGlmIHRoZSB2aWV3IGhhcyBhIHN0YXRlIHdpdGggYSBmaWxlLCBpdCdzIG5vdCBlbXB0eVxyXG5cdFx0Ly8gVGhpcyBwcmV2ZW50cyByZXBsYWNpbmcgdGFicyB0aGF0IHdlcmUganVzdCBvcGVuZWQgd2l0aCBmaWxlcyBmcm9tIGV4cGxvcmVyXHJcblx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0aWYgKHZpZXdTdGF0ZSAmJiAodmlld1N0YXRlIGFzIHsgZmlsZT86IHN0cmluZyB9KS5maWxlKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiB0aGlzIGlzIHRoZSBvbmx5IHRhYiBpbiB0aGUgd29ya3NwYWNlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc09ubHlUYWIobGVhZjogV29ya3NwYWNlTGVhZik6IGJvb2xlYW4ge1xyXG5cdFx0Y29uc3QgbGVhZkFueSA9IGxlYWYgYXMgdW5rbm93biBhcyB7IHBhcmVudFNwbGl0PzogeyBjaGlsZHJlbj86IHVua25vd25bXSB9IH07XHJcblx0XHRjb25zdCBwYXJlbnQgPSBsZWFmQW55LnBhcmVudFNwbGl0O1xyXG5cdFx0aWYgKCFwYXJlbnQpIHJldHVybiB0cnVlO1xyXG5cdFx0XHJcblx0XHRjb25zdCBjaGlsZHJlbiA9IHBhcmVudC5jaGlsZHJlbjtcclxuXHRcdGlmICghY2hpbGRyZW4pIHJldHVybiB0cnVlO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gY2hpbGRyZW4ubGVuZ3RoID09PSAxO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVwbGFjZSBhbiBlbXB0eSB0YWIgd2l0aCB0aGUgaG9tZSBiYXNlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyByZXBsYWNlRW1wdHlUYWIobGVhZjogV29ya3NwYWNlTGVhZik6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gU21hbGwgZGVsYXkgdG8gaGFuZGxlIHJhY2UgY29uZGl0aW9ucyB3aXRoIG90aGVyIHBsdWdpbnNcclxuXHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MCkpO1xyXG5cclxuXHRcdC8vIERvdWJsZS1jaGVjayB0aGUgdGFiIGlzIHN0aWxsIGVtcHR5XHJcblx0XHRpZiAoIXRoaXMuaXNFbXB0eVRhYihsZWFmKSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gT3BlbiBob21lIGJhc2UgaW4gdGhpcyBsZWFmXHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5vcGVuSW5MZWFmKGxlYWYpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRm9yY2UgY2hlY2sgZm9yIGVtcHR5IHdvcmtzcGFjZSBhbmQgb3BlbiBob21lIGJhc2VcclxuXHQgKi9cclxuXHRhc3luYyBvcGVuSWZFbXB0eSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdC8vIENoZWNrIGlmIHRoZXJlJ3MgYW4gZW1wdHkgdmlld1xyXG5cdFx0Y29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKFZpZXcpO1xyXG5cdFx0Y29uc3QgYWN0aXZlTGVhZiA9IGFjdGl2ZVZpZXc/LmxlYWY7XHJcblxyXG5cdFx0aWYgKCFhY3RpdmVMZWFmKSByZXR1cm47XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgaXQncyBlbXB0eSBhbmQgaXMgdGhlIG9ubHkgdGFiXHJcblx0XHRpZiAodGhpcy5pc0VtcHR5VGFiKGFjdGl2ZUxlYWYpICYmIHRoaXMuaXNPbmx5VGFiKGFjdGl2ZUxlYWYpKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLm9wZW5JbkxlYWYoYWN0aXZlTGVhZik7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogU3RpY2t5IFRhYiBTZXJ2aWNlXHJcbiAqIE1hbmFnZXMgdGhlIHN0aWNreSBob21lIGljb24gaW4gdGhlIHRhYiBiYXJcclxuICovXHJcblxyXG5pbXBvcnQgeyBNZW51LCBQbGF0Zm9ybSwgc2V0SWNvbiwgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHR5cGUgSG9tZUJhc2VQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IGdldEZpbGVCeVBhdGgsIGxlYWZIYXNGaWxlIH0gZnJvbSAnLi4vdXRpbHMvZmlsZS11dGlscyc7XHJcbmltcG9ydCB7IEljb25QaWNrZXIgfSBmcm9tICcuLi91aS9pY29uLXBpY2tlcic7XHJcblxyXG4vKipcclxuICogQ1NTIGNsYXNzIGZvciB0aGUgc3RpY2t5IGhvbWUgaWNvbiBjb250YWluZXJcclxuICovXHJcbmNvbnN0IFNUSUNLWV9JQ09OX0NMQVNTID0gJ2hvbWUtYmFzZS1zdGlja3ktaWNvbic7XHJcbmNvbnN0IFNUSUNLWV9JQ09OX0FDVElWRV9DTEFTUyA9ICdob21lLWJhc2Utc3RpY2t5LWljb24tYWN0aXZlJztcclxuXHJcbi8qKlxyXG4gKiBFeHRlbmRlZCBIVE1MRWxlbWVudCBpbnRlcmZhY2UgZm9yIHN0aWNreSBpY29uIHdpdGggY3VzdG9tIHByb3BlcnRpZXNcclxuICovXHJcbmludGVyZmFjZSBTdGlja3lJY29uRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuXHRfY2hlY2tJbnRlcnZhbD86IFJldHVyblR5cGU8dHlwZW9mIHNldEludGVydmFsPjtcclxuXHRfY29udGFpbmVyT2JzZXJ2ZXI/OiBNdXRhdGlvbk9ic2VydmVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU3RpY2t5VGFiU2VydmljZSB7XHJcblx0cHJpdmF0ZSBwbHVnaW46IEhvbWVCYXNlUGx1Z2luO1xyXG5cdHByaXZhdGUgc3RpY2t5SWNvbkVsOiBTdGlja3lJY29uRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgbGF5b3V0Q2hhbmdlSGFuZGxlcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSB0YWJIZWFkZXJVcGRhdGVUaW1lb3V0OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgc2lkZWJhck9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGw7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogSG9tZUJhc2VQbHVnaW4pIHtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIHRoZSBzdGlja3kgdGFiIGljb24gYmFzZWQgb24gc2V0dGluZ3NcclxuXHQgKi9cclxuXHR1cGRhdGUoKTogdm9pZCB7XHJcblx0XHQvLyBPbmx5IHNob3cgb24gZGVza3RvcFxyXG5cdFx0aWYgKFBsYXRmb3JtLmlzTW9iaWxlKSB7XHJcblx0XHRcdHRoaXMucmVtb3ZlKCk7XHJcblx0XHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpOyAvLyBDbGVhbiB1cCB0YWIgaGVhZGVyc1xyXG5cdFx0XHR0aGlzLnVwZGF0ZVdvcmtzcGFjZUNsYXNzKGZhbHNlKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcclxuXHRcdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsKSB7XHJcblx0XHRcdFx0Ly8gSWNvbiBhbHJlYWR5IGV4aXN0cywganVzdCB1cGRhdGUgdGhlIGljb25cclxuXHRcdFx0XHRjb25zdCBpY29uTmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnN0aWNreUljb25OYW1lIHx8ICdob21lJztcclxuXHRcdFx0XHRzZXRJY29uKHRoaXMuc3RpY2t5SWNvbkVsLCBpY29uTmFtZSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gSWNvbiBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgaXRcclxuXHRcdFx0XHR0aGlzLmNyZWF0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMudXBkYXRlV29ya3NwYWNlQ2xhc3ModHJ1ZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnJlbW92ZSgpO1xyXG5cdFx0XHR0aGlzLnVwZGF0ZVRhYkhlYWRlcnMoKTsgLy8gQ2xlYW4gdXAgdGFiIGhlYWRlcnMgd2hlbiByZW1vdmluZyBpY29uXHJcblx0XHRcdHRoaXMudXBkYXRlV29ya3NwYWNlQ2xhc3MoZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQWRkL3JlbW92ZSBDU1MgY2xhc3Mgb24gd29ya3NwYWNlIHRvIGNvbmRpdGlvbmFsbHkgYXBwbHkgc3R5bGVzXHJcblx0ICovXHJcblx0cHJpdmF0ZSB1cGRhdGVXb3Jrc3BhY2VDbGFzcyhlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XHJcblx0XHRjb25zdCBtYWluV29ya3NwYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdC5tb2QtdmVydGljYWwubW9kLXJvb3QnKTtcclxuXHRcdGlmICghbWFpbldvcmtzcGFjZSkgcmV0dXJuO1xyXG5cclxuXHRcdGlmIChlbmFibGVkKSB7XHJcblx0XHRcdG1haW5Xb3Jrc3BhY2UuY2xhc3NMaXN0LmFkZCgnaG9tZS1iYXNlLXN0aWNreS1pY29uLWVuYWJsZWQnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdG1haW5Xb3Jrc3BhY2UuY2xhc3NMaXN0LnJlbW92ZSgnaG9tZS1iYXNlLXN0aWNreS1pY29uLWVuYWJsZWQnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZSB0aGUgc3RpY2t5IGhvbWUgaWNvblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgY3JlYXRlKCk6IHZvaWQge1xyXG5cdFx0Ly8gUmVtb3ZlIGV4aXN0aW5nIGljb24gZmlyc3RcclxuXHRcdHRoaXMucmVtb3ZlKCk7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIHRoZSBzdGlja3kgaWNvbiBlbGVtZW50IG9uY2VcclxuXHRcdHRoaXMuc3RpY2t5SWNvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHR0aGlzLnN0aWNreUljb25FbC5jbGFzc05hbWUgPSBgJHtTVElDS1lfSUNPTl9DTEFTU30gY2xpY2thYmxlLWljb25gO1xyXG5cdFx0dGhpcy5zdGlja3lJY29uRWwuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ09wZW4gaG9tZSBiYXNlJyk7XHJcblx0XHR0aGlzLnN0aWNreUljb25FbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1wb3NpdGlvbicsICdib3R0b20nKTtcclxuXHJcblx0XHQvLyBBZGQgdGhlIGljb24gZnJvbSBzZXR0aW5ncyAoZGVmYXVsdCB0byAnaG9tZScpXHJcblx0XHRjb25zdCBpY29uTmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnN0aWNreUljb25OYW1lIHx8ICdob21lJztcclxuXHRcdHNldEljb24odGhpcy5zdGlja3lJY29uRWwsIGljb25OYW1lKTtcclxuXHJcblx0XHQvLyBBZGQgY2xpY2sgaGFuZGxlclxyXG5cdFx0dGhpcy5zdGlja3lJY29uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBPcGVuIGhvbWUgYmFzZSBpbiBnaG9zdCB0YWIgKGFsd2F5cyB1c2UgZ2hvc3QgdGFiIGZvciBzdGlja3kgaWNvbilcclxuXHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5vcGVuSG9tZUJhc2VJbkdob3N0VGFiKHtcclxuXHRcdFx0XHRydW5Db21tYW5kOiB0cnVlLFxyXG5cdFx0XHR9KS50aGVuKCgpID0+IHtcclxuXHRcdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgYWZ0ZXIgb3BlbmluZywgd2l0aCBhIHNsaWdodCBkZWxheSB0byBsZXQgYW5pbWF0aW9ucyBjb21wbGV0ZVxyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0fSwgMTUwKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgY29udGV4dCBtZW51IGZvciBjaGFuZ2luZyBpY29uIGFuZCBjbG9zaW5nIGhvbWUgYmFzZVxyXG5cdFx0dGhpcy5zdGlja3lJY29uRWwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEFkZCBDaGFuZ2UgaWNvbiBvcHRpb25cclxuXHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0LnNldFRpdGxlKCdDaGFuZ2UgaWNvbicpXHJcblx0XHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLWltYWdlLXBsdXMnKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBwaWNrZXIgPSBuZXcgSWNvblBpY2tlcihcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5hcHAsXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RpY2t5SWNvbk5hbWUsXHJcblx0XHRcdFx0XHRcdFx0KGljb246IHN0cmluZyB8IG51bGwpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RpY2t5SWNvbk5hbWUgPSBpY29uO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHRoZSBpY29uIGRpc3BsYXlcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0SWNvbih0aGlzLnN0aWNreUljb25FbCwgaWNvbiB8fCAnaG9tZScpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0cGlja2VyLm9wZW4oKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdGl0ZW1cclxuXHRcdFx0XHRcdC5zZXRUaXRsZSgnQ2xvc2UgaG9tZSBiYXNlJylcclxuXHRcdFx0XHRcdC5zZXRJY29uKCd4JylcclxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCB0aGlzLmNsb3NlSG9tZUJhc2UoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0bWVudS5zaG93QXRNb3VzZUV2ZW50KGUpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRnVuY3Rpb24gdG8gZW5zdXJlIGljb24gaXMgaW4gdGhlIHJpZ2h0IHBsYWNlXHJcblx0XHQvLyBJbnNlcnQgaXQgaW50byB0aGUgd29ya3NwYWNlLXRhYnMgY29udGFpbmVyIHNvIGl0J3MgcG9zaXRpb25lZCByZWxhdGl2ZSB0byB0YWJzXHJcblx0XHRjb25zdCBlbnN1cmVJY29uSW5QbGFjZSA9ICgpID0+IHtcclxuXHRcdFx0aWYgKCF0aGlzLnN0aWNreUljb25FbCkgcmV0dXJuO1xyXG5cclxuXHRcdFx0Y29uc3QgbWFpbldvcmtzcGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XHJcblx0XHRcdGlmICghbWFpbldvcmtzcGFjZSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0Ly8gRmluZCB0aGUgd29ya3NwYWNlLXRhYnMgY29udGFpbmVyIChzaWJsaW5nIG9mIHdvcmtzcGFjZS10YWItY29udGFpbmVyKVxyXG5cdFx0XHRjb25zdCB3b3Jrc3BhY2VUYWJzID0gbWFpbldvcmtzcGFjZS5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXRhYnMnKTtcclxuXHRcdFx0aWYgKCF3b3Jrc3BhY2VUYWJzKSByZXR1cm47XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiBpY29uIGlzIGFscmVhZHkgaW4gdGhlIHRhYnMgY29udGFpbmVyXHJcblx0XHRcdGNvbnN0IGV4aXN0aW5nSWNvbiA9IHdvcmtzcGFjZVRhYnMucXVlcnlTZWxlY3RvcihgLiR7U1RJQ0tZX0lDT05fQ0xBU1N9YCk7XHJcblx0XHRcdGlmIChleGlzdGluZ0ljb24gPT09IHRoaXMuc3RpY2t5SWNvbkVsKSB7XHJcblx0XHRcdFx0Ly8gQWxyZWFkeSBpbiBwbGFjZSwgbm90aGluZyB0byBkb1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWNvbiBpcyBtaXNzaW5nIC0gaW5zZXJ0IGl0IGludG8gdGhlIHdvcmtzcGFjZS10YWJzIGNvbnRhaW5lclxyXG5cdFx0XHQvLyBUaGlzIHdheSBpdCdzIHBvc2l0aW9uZWQgcmVsYXRpdmUgdG8gdGhlIHRhYiBiYXIgYnV0IHdvbid0IG1vdmUgd2l0aCB0YWJzXHJcblx0XHRcdHdvcmtzcGFjZVRhYnMuYXBwZW5kQ2hpbGQodGhpcy5zdGlja3lJY29uRWwpO1xyXG5cclxuXHRcdFx0Ly8gVXBkYXRlIGFjdGl2ZSBzdGF0ZSBhZnRlciBpbnNlcnRpb25cclxuXHRcdFx0dGhpcy51cGRhdGVBY3RpdmVTdGF0ZSgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gVXBkYXRlIHRhYiBoZWFkZXJzIHdoZW4gaWNvbiBpcyBjcmVhdGVkXHJcblx0XHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gRW5zdXJlIHdvcmtzcGFjZSBjbGFzcyBpcyBzZXRcclxuXHRcdFx0dGhpcy51cGRhdGVXb3Jrc3BhY2VDbGFzcyh0cnVlKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFVwZGF0ZSBpY29uIHBvc2l0aW9uIGJhc2VkIG9uIHNpZGViYXIgc3RhdGVcclxuXHRcdFx0dGhpcy51cGRhdGVJY29uUG9zaXRpb25Gb3JTaWRlYmFyKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBXYXRjaCBmb3Igc2lkZWJhciBjb2xsYXBzZS9leHBhbmQgY2hhbmdlc1xyXG5cdFx0XHR0aGlzLndhdGNoU2lkZWJhclN0YXRlKCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFRyeSB0byBpbnNlcnQgaW1tZWRpYXRlbHlcclxuXHRcdGVuc3VyZUljb25JblBsYWNlKCk7XHJcblxyXG5cdFx0Ly8gU2V0IHVwIGEgcmVsaWFibGUgY2hlY2sgdGhhdCBydW5zIHBlcmlvZGljYWxseSB0byBlbnN1cmUgaWNvbiBpcyBhbHdheXMgdGhlcmVcclxuXHRcdC8vIFRoaXMgaXMgc2ltcGxlIGFuZCByZWxpYWJsZSAtIGp1c3QgY2hlY2sgaWYgaXQncyB0aGVyZSwgaWYgbm90LCBwdXQgaXQgYmFja1xyXG5cdFx0Y29uc3QgY2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0aWYgKCF0aGlzLnN0aWNreUljb25FbCB8fCAhdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKSB7XHJcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbChjaGVja0ludGVydmFsKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0ZW5zdXJlSWNvbkluUGxhY2UoKTtcclxuXHRcdH0sIDEwMCk7IC8vIENoZWNrIGV2ZXJ5IDEwMG1zIC0gbW9yZSBmcmVxdWVudCB0byBjYXRjaCBjb250YWluZXIgcmVjcmVhdGlvbiBpbW1lZGlhdGVseVxyXG5cclxuXHRcdC8vIFN0b3JlIGludGVydmFsIHNvIHdlIGNhbiBjbGVhciBpdCBsYXRlclxyXG5cdFx0dGhpcy5zdGlja3lJY29uRWwuX2NoZWNrSW50ZXJ2YWwgPSBjaGVja0ludGVydmFsO1xyXG5cclxuXHRcdC8vIEFsc28gY2hlY2sgb24gbGF5b3V0IGNoYW5nZXMgLSBidXQgZG8gaXQgaW1tZWRpYXRlbHksIG5vIGRlbGF5XHJcblx0XHRpZiAoIXRoaXMubGF5b3V0Q2hhbmdlSGFuZGxlcikge1xyXG5cdFx0XHR0aGlzLmxheW91dENoYW5nZUhhbmRsZXIgPSAoKSA9PiB7XHJcblx0XHRcdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbikge1xyXG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaW1tZWRpYXRlbHkgLSBkb24ndCB3YWl0IGZvciBsYXlvdXQgdG8gc2V0dGxlXHJcblx0XHRcdFx0XHQvLyBUaGlzIHByZXZlbnRzIGZsaWNrZXJpbmcgd2hlbiB0YWJzIGNsb3NlXHJcblx0XHRcdFx0XHRlbnN1cmVJY29uSW5QbGFjZSgpO1xyXG5cdFx0XHRcdFx0Ly8gVXBkYXRlIHRhYiBoZWFkZXJzIG9uIGxheW91dCBjaGFuZ2VcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsIHRoaXMubGF5b3V0Q2hhbmdlSGFuZGxlcilcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBbHNvIHdhdGNoIGZvciB3aGVuIHdvcmtzcGFjZS10YWJzIGNvbnRhaW5lciBpcyBhZGRlZCBiYWNrIChhZnRlciBhbGwgdGFicyBjbG9zZWQpXHJcblx0XHQvLyBVc2UgYSBNdXRhdGlvbk9ic2VydmVyIG9uIHRoZSB3b3Jrc3BhY2Ugc3BsaXQgdG8gY2F0Y2ggY29udGFpbmVyIHJlY3JlYXRpb25cclxuXHRcdGNvbnN0IG1haW5Xb3Jrc3BhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXNwbGl0Lm1vZC12ZXJ0aWNhbC5tb2Qtcm9vdCcpO1xyXG5cdFx0aWYgKG1haW5Xb3Jrc3BhY2UpIHtcclxuXHRcdFx0Y29uc3QgY29udGFpbmVyT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XHJcblx0XHRcdFx0aWYgKCF0aGlzLnN0aWNreUljb25FbCB8fCAhdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKSByZXR1cm47XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgd29ya3NwYWNlLXRhYnMgY29udGFpbmVyIGV4aXN0cyBhbmQgaWNvbiBpcyBtaXNzaW5nXHJcblx0XHRcdFx0Y29uc3Qgd29ya3NwYWNlVGFicyA9IG1haW5Xb3Jrc3BhY2UucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS10YWJzJyk7XHJcblx0XHRcdFx0aWYgKHdvcmtzcGFjZVRhYnMpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nSWNvbiA9IHdvcmtzcGFjZVRhYnMucXVlcnlTZWxlY3RvcihgLiR7U1RJQ0tZX0lDT05fQ0xBU1N9YCk7XHJcblx0XHRcdFx0XHRpZiAoIWV4aXN0aW5nSWNvbiB8fCBleGlzdGluZ0ljb24gIT09IHRoaXMuc3RpY2t5SWNvbkVsKSB7XHJcblx0XHRcdFx0XHRcdC8vIENvbnRhaW5lciBleGlzdHMgYnV0IGljb24gaXMgbWlzc2luZyAtIHJlLWluc2VydCBpbW1lZGlhdGVseVxyXG5cdFx0XHRcdFx0XHR3b3Jrc3BhY2VUYWJzLmFwcGVuZENoaWxkKHRoaXMuc3RpY2t5SWNvbkVsKTtcclxuXHRcdFx0XHRcdFx0dGhpcy51cGRhdGVBY3RpdmVTdGF0ZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRjb250YWluZXJPYnNlcnZlci5vYnNlcnZlKG1haW5Xb3Jrc3BhY2UsIHtcclxuXHRcdFx0XHRjaGlsZExpc3Q6IHRydWUsXHJcblx0XHRcdFx0c3VidHJlZTogZmFsc2UsIC8vIE9ubHkgd2F0Y2ggZGlyZWN0IGNoaWxkcmVuXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gU3RvcmUgb2JzZXJ2ZXIgc28gd2UgY2FuIGNsZWFuIGl0IHVwXHJcblx0XHRcdHRoaXMuc3RpY2t5SWNvbkVsLl9jb250YWluZXJPYnNlcnZlciA9IGNvbnRhaW5lck9ic2VydmVyO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVtb3ZlIHRoZSBzdGlja3kgaG9tZSBpY29uXHJcblx0ICovXHJcblx0cmVtb3ZlKCk6IHZvaWQge1xyXG5cdFx0Ly8gQ2xlYXIgYW55IHBlbmRpbmcgdGFiIGhlYWRlciB1cGRhdGVzXHJcblx0XHRpZiAodGhpcy50YWJIZWFkZXJVcGRhdGVUaW1lb3V0KSB7XHJcblx0XHRcdGNsZWFyVGltZW91dCh0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQpO1xyXG5cdFx0XHR0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQgPSBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENsZWFyIGFueSBjaGVjayBpbnRlcnZhbHNcclxuXHRcdGlmICh0aGlzLnN0aWNreUljb25FbCAmJiB0aGlzLnN0aWNreUljb25FbC5fY2hlY2tJbnRlcnZhbCkge1xyXG5cdFx0XHRjbGVhckludGVydmFsKHRoaXMuc3RpY2t5SWNvbkVsLl9jaGVja0ludGVydmFsKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEaXNjb25uZWN0IGNvbnRhaW5lciBvYnNlcnZlclxyXG5cdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsICYmIHRoaXMuc3RpY2t5SWNvbkVsLl9jb250YWluZXJPYnNlcnZlcikge1xyXG5cdFx0XHR0aGlzLnN0aWNreUljb25FbC5fY29udGFpbmVyT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERpc2Nvbm5lY3Qgc2lkZWJhciBvYnNlcnZlclxyXG5cdFx0aWYgKHRoaXMuc2lkZWJhck9ic2VydmVyKSB7XHJcblx0XHRcdHRoaXMuc2lkZWJhck9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdFx0dGhpcy5zaWRlYmFyT2JzZXJ2ZXIgPSBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnN0aWNreUljb25FbCkge1xyXG5cdFx0XHQvLyBPbmx5IHJlbW92ZSBpZiBpdCdzIGFjdHVhbGx5IGluIHRoZSBET01cclxuXHRcdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0XHR0aGlzLnN0aWNreUljb25FbC5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLnN0aWNreUljb25FbCA9IG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQWxzbyBjbGVhbiB1cCBhbnkgb3JwaGFuZWQgaWNvbnNcclxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke1NUSUNLWV9JQ09OX0NMQVNTfWApLmZvckVhY2goZWwgPT4ge1xyXG5cdFx0XHRjb25zdCBzdGlja3lFbCA9IGVsIGFzIFN0aWNreUljb25FbGVtZW50O1xyXG5cdFx0XHRpZiAoc3RpY2t5RWwuX2NoZWNrSW50ZXJ2YWwpIHtcclxuXHRcdFx0XHRjbGVhckludGVydmFsKHN0aWNreUVsLl9jaGVja0ludGVydmFsKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoc3RpY2t5RWwuX2NvbnRhaW5lck9ic2VydmVyKSB7XHJcblx0XHRcdFx0c3RpY2t5RWwuX2NvbnRhaW5lck9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbC5yZW1vdmUoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIHRoZSBhY3RpdmUgc3RhdGUgb2YgdGhlIHN0aWNreSBpY29uXHJcblx0ICovXHJcblx0dXBkYXRlQWN0aXZlU3RhdGUoKTogdm9pZCB7XHJcblx0XHRpZiAoIXRoaXMuc3RpY2t5SWNvbkVsKSByZXR1cm47XHJcblxyXG5cdFx0Y29uc3QgaXNBY3RpdmUgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5pc0ZvY3VzZWRPbkhvbWVCYXNlKCk7XHJcblx0XHRcclxuXHRcdGlmIChpc0FjdGl2ZSkge1xyXG5cdFx0XHR0aGlzLnN0aWNreUljb25FbC5jbGFzc0xpc3QuYWRkKFNUSUNLWV9JQ09OX0FDVElWRV9DTEFTUyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnN0aWNreUljb25FbC5jbGFzc0xpc3QucmVtb3ZlKFNUSUNLWV9JQ09OX0FDVElWRV9DTEFTUyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQWxzbyB1cGRhdGUgdGFiIGhlYWRlcnMgd2hlbiBhY3RpdmUgc3RhdGUgY2hhbmdlcyAoZGVib3VuY2VkKVxyXG5cdFx0dGhpcy51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiB0aGUgbGVmdCBzaWRlYmFyIGlzIGNvbGxhcHNlZFxyXG5cdCAqIEJhc2VkIG9uIG9ic2lkaWFuLW94eWdlbi1zZXR0aW5ncyBpbXBsZW1lbnRhdGlvblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNMZWZ0U2lkZWJhckNvbGxhcHNlZCgpOiBib29sZWFuIHtcclxuXHRcdC8vIFVzZSB0aGUgY29ycmVjdCBzZWxlY3RvciBmb3IgbGVmdCBzaWRlYmFyXHJcblx0XHRjb25zdCBsZWZ0U2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc3BsaXQubW9kLWxlZnQtc3BsaXQnKSB8fCBcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZC1sZWZ0LXNwbGl0Jyk7XHJcblx0XHRcclxuXHRcdGlmICghbGVmdFNpZGViYXIpIHJldHVybiBmYWxzZTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2hlY2sgZm9yIHRoZSBpcy1zaWRlZG9jay1jb2xsYXBzZWQgY2xhc3MgLSB0aGlzIGlzIHRoZSBtb3N0IHJlbGlhYmxlIGluZGljYXRvclxyXG5cdFx0cmV0dXJuIGxlZnRTaWRlYmFyLmNsYXNzTGlzdC5jb250YWlucygnaXMtc2lkZWRvY2stY29sbGFwc2VkJyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgaWNvbiBwb3NpdGlvbiBiYXNlZCBvbiBzaWRlYmFyIHN0YXRlXHJcblx0ICovXHJcblx0dXBkYXRlSWNvblBvc2l0aW9uRm9yU2lkZWJhcigpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy5zdGlja3lJY29uRWwpIHJldHVybjtcclxuXHRcdFxyXG5cdFx0Y29uc3QgaXNDb2xsYXBzZWQgPSB0aGlzLmlzTGVmdFNpZGViYXJDb2xsYXBzZWQoKTtcclxuXHRcdGNvbnN0IG1haW5Xb3Jrc3BhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXNwbGl0Lm1vZC12ZXJ0aWNhbC5tb2Qtcm9vdCcpO1xyXG5cdFx0XHJcblx0XHQvLyBVc2UgQ1NTIGNsYXNzIGluc3RlYWQgb2YgaW5saW5lIHN0eWxlc1xyXG5cdFx0aWYgKGlzQ29sbGFwc2VkKSB7XHJcblx0XHRcdHRoaXMuc3RpY2t5SWNvbkVsLmNsYXNzTGlzdC5hZGQoJ2hvbWUtYmFzZS1zdGlja3ktaWNvbi1zaWRlYmFyLWNvbGxhcHNlZCcpO1xyXG5cdFx0XHQvLyBBZGp1c3QgdGFiIGNvbnRhaW5lciBwYWRkaW5nIHdoZW4gc2lkZWJhciBpcyBjb2xsYXBzZWRcclxuXHRcdFx0aWYgKG1haW5Xb3Jrc3BhY2UpIHtcclxuXHRcdFx0XHRtYWluV29ya3NwYWNlLmNsYXNzTGlzdC5hZGQoJ2hvbWUtYmFzZS1zaWRlYmFyLWNvbGxhcHNlZCcpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnN0aWNreUljb25FbC5jbGFzc0xpc3QucmVtb3ZlKCdob21lLWJhc2Utc3RpY2t5LWljb24tc2lkZWJhci1jb2xsYXBzZWQnKTtcclxuXHRcdFx0Ly8gUmVtb3ZlIGNvbGxhcHNlZCBwYWRkaW5nIGFkanVzdG1lbnRcclxuXHRcdFx0aWYgKG1haW5Xb3Jrc3BhY2UpIHtcclxuXHRcdFx0XHRtYWluV29ya3NwYWNlLmNsYXNzTGlzdC5yZW1vdmUoJ2hvbWUtYmFzZS1zaWRlYmFyLWNvbGxhcHNlZCcpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBXYXRjaCBmb3Igc2lkZWJhciBzdGF0ZSBjaGFuZ2VzIGFuZCB1cGRhdGUgaWNvbiBwb3NpdGlvblxyXG5cdCAqIEJhc2VkIG9uIG9ic2lkaWFuLW94eWdlbi1zZXR0aW5ncyBpbXBsZW1lbnRhdGlvblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgd2F0Y2hTaWRlYmFyU3RhdGUoKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5zaWRlYmFyT2JzZXJ2ZXIpIHtcclxuXHRcdFx0dGhpcy5zaWRlYmFyT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRjb25zdCBsZWZ0U2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc3BsaXQubW9kLWxlZnQtc3BsaXQnKSB8fCBcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZC1sZWZ0LXNwbGl0Jyk7XHJcblx0XHRcclxuXHRcdGlmICghbGVmdFNpZGViYXIpIHJldHVybjtcclxuXHRcdFxyXG5cdFx0Ly8gV2F0Y2ggZm9yIGNsYXNzIGNoYW5nZXMgb24gdGhlIHNpZGViYXIgZWxlbWVudFxyXG5cdFx0dGhpcy5zaWRlYmFyT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XHJcblx0XHRcdGxldCBzaG91bGRVcGRhdGUgPSBmYWxzZTtcclxuXHRcdFx0bXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7XHJcblx0XHRcdFx0aWYgKG11dGF0aW9uLnR5cGUgPT09ICdhdHRyaWJ1dGVzJyAmJiBtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSAnY2xhc3MnKSB7XHJcblx0XHRcdFx0XHRzaG91bGRVcGRhdGUgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGlmIChzaG91bGRVcGRhdGUpIHtcclxuXHRcdFx0XHR0aGlzLnVwZGF0ZUljb25Qb3NpdGlvbkZvclNpZGViYXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHRoaXMuc2lkZWJhck9ic2VydmVyLm9ic2VydmUobGVmdFNpZGViYXIsIHtcclxuXHRcdFx0YXR0cmlidXRlczogdHJ1ZSxcclxuXHRcdFx0YXR0cmlidXRlRmlsdGVyOiBbJ2NsYXNzJ10sXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRvZ2dsZSB0aGUgc3RpY2t5IGljb24gdmlzaWJpbGl0eVxyXG5cdCAqL1xyXG5cdGFzeW5jIHRvZ2dsZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbiA9ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb247XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMudXBkYXRlKCk7XHJcblx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgd2hlbiB0b2dnbGluZyBzdGlja3kgaWNvblxyXG5cdFx0dGhpcy51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgdGFiIGhlYWRlcnMgdG8gaGlkZS9zaG93IGdob3N0IHRhYlxyXG5cdCAqIE9ubHkgd29ya3Mgd2hlbiBzdGlja3kgaWNvbiBpcyBlbmFibGVkXHJcblx0ICogRGVib3VuY2VkIHRvIHByZXZlbnQgZmxpY2tlcmluZyBkdXJpbmcgdGFiIHRyYW5zaXRpb25zXHJcblx0ICovXHJcblx0dXBkYXRlVGFiSGVhZGVycygpOiB2b2lkIHtcclxuXHRcdC8vIENsZWFyIGFueSBwZW5kaW5nIHVwZGF0ZVxyXG5cdFx0aWYgKHRoaXMudGFiSGVhZGVyVXBkYXRlVGltZW91dCkge1xyXG5cdFx0XHRjbGVhclRpbWVvdXQodGhpcy50YWJIZWFkZXJVcGRhdGVUaW1lb3V0KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEZWJvdW5jZSB0aGUgdXBkYXRlIHRvIGF2b2lkIGZsaWNrZXJpbmcgZHVyaW5nIHRhYiBhbmltYXRpb25zXHJcblx0XHR0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0dGhpcy50YWJIZWFkZXJVcGRhdGVUaW1lb3V0ID0gbnVsbDtcclxuXHRcdFx0dGhpcy5fZG9VcGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHR9LCAxMDApOyAvLyBTbWFsbCBkZWxheSB0byBsZXQgdGFiIGFuaW1hdGlvbnMgY29tcGxldGVcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEludGVybmFsIG1ldGhvZCB0aGF0IGFjdHVhbGx5IHVwZGF0ZXMgdGhlIHRhYiBoZWFkZXJzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBfZG9VcGRhdGVUYWJIZWFkZXJzKCk6IHZvaWQge1xyXG5cdFx0Ly8gT25seSBoaWRlIGdob3N0IHRhYiBpZiBCT1RIIHN0aWNreSBpY29uIEFORCBoaWRlIHRhYiBoZWFkZXIgYXJlIGVuYWJsZWRcclxuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uIHx8ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlSG9tZVRhYkhlYWRlcikge1xyXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGhvbWUgYmFzZSB0YWIgY2xhc3NlcyBpZiBlaXRoZXIgc2V0dGluZyBpcyBkaXNhYmxlZFxyXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXMtaG9tZS1iYXNlLXRhYicpLmZvckVhY2goZWwgPT4ge1xyXG5cdFx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhvbWUtYmFzZS10YWInKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVBhdGg7XHJcblx0XHRpZiAoIWhvbWVCYXNlUGF0aCkgcmV0dXJuO1xyXG5cclxuXHRcdC8vIFVzZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgdG8gZW5zdXJlIERPTSBpcyByZWFkeVxyXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0Ly8gT25seSBoaWRlIHRoZSBnaG9zdCB0YWIgKHBpbm5lZCBob21lIGJhc2UgdGFiKVxyXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0XHRjb25zdCBpc0hvbWVCYXNlID0gbGVhZkhhc0ZpbGUobGVhZiwgaG9tZUJhc2VQYXRoKTtcclxuXHRcdFx0XHRpZiAoIWlzSG9tZUJhc2UpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHRhYkhlYWRlciA9IHRoaXMuZ2V0VGFiSGVhZGVyRm9yTGVhZihsZWFmKTtcclxuXHRcdFx0XHRcdGlmICh0YWJIZWFkZXIpIHtcclxuXHRcdFx0XHRcdFx0dGFiSGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhvbWUtYmFzZS10YWInKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgdGhlIGdob3N0IHRhYiAocGlubmVkKVxyXG5cdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0Y29uc3QgaXNHaG9zdFRhYiA9IHZpZXdTdGF0ZS5waW5uZWQgPT09IHRydWU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc3QgdGFiSGVhZGVyID0gdGhpcy5nZXRUYWJIZWFkZXJGb3JMZWFmKGxlYWYpO1xyXG5cdFx0XHRcdGlmICh0YWJIZWFkZXIpIHtcclxuXHRcdFx0XHRcdGlmIChpc0dob3N0VGFiKSB7XHJcblx0XHRcdFx0XHRcdC8vIEhpZGUgZ2hvc3QgdGFiIGhlYWRlclxyXG5cdFx0XHRcdFx0XHR0YWJIZWFkZXIuY2xhc3NMaXN0LmFkZCgnaXMtaG9tZS1iYXNlLXRhYicpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgaGlkZSBub3JtYWwgdGFic1xyXG5cdFx0XHRcdFx0XHR0YWJIZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnaXMtaG9tZS1iYXNlLXRhYicpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0aGUgdGFiIGhlYWRlciBlbGVtZW50IGZvciBhIGdpdmVuIGxlYWZcclxuXHQgKi9cclxuXHRwcml2YXRlIGdldFRhYkhlYWRlckZvckxlYWYobGVhZjogV29ya3NwYWNlTGVhZik6IEhUTUxFbGVtZW50IHwgbnVsbCB7XHJcblx0XHQvLyBUcnkgdG8gZ2V0IGZyb20gbGVhZidzIGludGVybmFsIHByb3BlcnR5IGZpcnN0IChpZiBhdmFpbGFibGUpXHJcblx0XHRjb25zdCBsZWFmQW55ID0gbGVhZiBhcyB1bmtub3duIGFzIHsgdGFiSGVhZGVyRWw/OiBIVE1MRWxlbWVudCB9O1xyXG5cdFx0aWYgKGxlYWZBbnkudGFiSGVhZGVyRWwpIHtcclxuXHRcdFx0cmV0dXJuIGxlYWZBbnkudGFiSGVhZGVyRWw7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRmFsbGJhY2s6IGZpbmQgYnkgcXVlcnlpbmcgRE9NXHJcblx0XHRjb25zdCB2aWV3VHlwZSA9IGxlYWYudmlldz8uZ2V0Vmlld1R5cGUoKTtcclxuXHRcdGlmICghdmlld1R5cGUpIHJldHVybiBudWxsO1xyXG5cclxuXHRcdC8vIEdldCB0aGUgYWN0aXZlIGxlYWYgdG8gaGVscCB3aXRoIG1hdGNoaW5nXHJcblx0XHRjb25zdCBhY3RpdmVMZWFmID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRNb3N0UmVjZW50TGVhZigpO1xyXG5cdFx0Y29uc3QgaXNBY3RpdmUgPSBsZWFmID09PSBhY3RpdmVMZWFmO1xyXG5cclxuXHRcdC8vIEZpbmQgYWxsIHRhYiBoZWFkZXJzIHdpdGggbWF0Y2hpbmcgdmlldyB0eXBlXHJcblx0XHRjb25zdCB0YWJIZWFkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLndvcmtzcGFjZS10YWItaGVhZGVyW2RhdGEtdHlwZT1cIiR7dmlld1R5cGV9XCJdYCk7XHJcblx0XHRcclxuXHRcdC8vIElmIHRoaXMgaXMgdGhlIGFjdGl2ZSBsZWFmLCBwcmVmZXIgdGhlIGFjdGl2ZSB0YWIgaGVhZGVyXHJcblx0XHRpZiAoaXNBY3RpdmUpIHtcclxuXHRcdFx0Y29uc3QgYWN0aXZlSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS10YWItaGVhZGVyLmlzLWFjdGl2ZScpO1xyXG5cdFx0XHRpZiAoYWN0aXZlSGVhZGVyICYmIGFjdGl2ZUhlYWRlci5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpID09PSB2aWV3VHlwZSkge1xyXG5cdFx0XHRcdHJldHVybiBhY3RpdmVIZWFkZXIgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBUcnkgdG8gbWF0Y2ggYnkgY2hlY2tpbmcgaWYgaGVhZGVyJ3MgbGVhZiBwcm9wZXJ0eSBtYXRjaGVzXHJcblx0XHRmb3IgKGNvbnN0IGhlYWRlciBvZiBBcnJheS5mcm9tKHRhYkhlYWRlcnMpKSB7XHJcblx0XHRcdGNvbnN0IGhlYWRlckVsID0gaGVhZGVyIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRjb25zdCBoZWFkZXJFbFdpdGhMZWFmID0gaGVhZGVyRWwgYXMgdW5rbm93biBhcyB7IGxlYWY/OiBXb3Jrc3BhY2VMZWFmIH07XHJcblx0XHRcdGNvbnN0IGhlYWRlckxlYWYgPSBoZWFkZXJFbFdpdGhMZWFmLmxlYWY7XHJcblx0XHRcdGlmIChoZWFkZXJMZWFmID09PSBsZWFmKSB7XHJcblx0XHRcdFx0cmV0dXJuIGhlYWRlckVsO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgb25seSBvbmUgdGFiIGhlYWRlciBtYXRjaGVzIHRoZSB2aWV3IHR5cGUsIGl0J3MgbGlrZWx5IHRoZSBvbmVcclxuXHRcdGlmICh0YWJIZWFkZXJzLmxlbmd0aCA9PT0gMSkge1xyXG5cdFx0XHRyZXR1cm4gdGFiSGVhZGVyc1swXSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBMYXN0IHJlc29ydDogaWYgdGhpcyBpcyBhY3RpdmUgYW5kIHdlIGZvdW5kIGFuIGFjdGl2ZSBoZWFkZXIsIHVzZSBpdFxyXG5cdFx0aWYgKGlzQWN0aXZlKSB7XHJcblx0XHRcdGNvbnN0IGFjdGl2ZUhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2UtdGFiLWhlYWRlci5pcy1hY3RpdmUnKTtcclxuXHRcdFx0aWYgKGFjdGl2ZUhlYWRlcikge1xyXG5cdFx0XHRcdHJldHVybiBhY3RpdmVIZWFkZXIgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENsb3NlIHRoZSBob21lIGJhc2UgdGFiXHJcblx0ICovXHJcblx0YXN5bmMgY2xvc2VIb21lQmFzZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IGhvbWVCYXNlUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlUGF0aDtcclxuXHRcdGlmICghaG9tZUJhc2VQYXRoKSByZXR1cm47XHJcblxyXG5cdFx0Y29uc3QgeyBnZXRGaWxlQnlQYXRoIH0gPSBhd2FpdCBpbXBvcnQoJy4uL3V0aWxzL2ZpbGUtdXRpbHMnKTtcclxuXHRcdGNvbnN0IGhvbWVCYXNlRmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5wbHVnaW4uYXBwLCBob21lQmFzZVBhdGgpO1xyXG5cdFx0aWYgKCFob21lQmFzZUZpbGUpIHJldHVybjtcclxuXHJcblx0XHRjb25zdCBob21lQmFzZUxlYWYgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5maW5kRXhpc3RpbmdIb21lQmFzZUxlYWYoaG9tZUJhc2VGaWxlKTtcclxuXHRcdGlmIChob21lQmFzZUxlYWYpIHtcclxuXHRcdFx0aG9tZUJhc2VMZWFmLmRldGFjaCgpO1xyXG5cdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgYWZ0ZXIgY2xvc2luZ1xyXG5cdFx0XHR0aGlzLnVwZGF0ZVRhYkhlYWRlcnMoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFBpbiB0aGUgaG9tZSBiYXNlIHRhYlxyXG5cdCAqL1xyXG5cdHBpbkhvbWVCYXNlVGFiKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgaG9tZUJhc2VQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VQYXRoO1xyXG5cdFx0aWYgKCFob21lQmFzZVBhdGgpIHJldHVybjtcclxuXHJcblx0XHRjb25zdCBob21lQmFzZUZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMucGx1Z2luLmFwcCwgaG9tZUJhc2VQYXRoKTtcclxuXHRcdGlmICghaG9tZUJhc2VGaWxlKSByZXR1cm47XHJcblxyXG5cdFx0Y29uc3QgaG9tZUJhc2VMZWFmID0gdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2UuZmluZEV4aXN0aW5nSG9tZUJhc2VMZWFmKGhvbWVCYXNlRmlsZSk7XHJcblx0XHRpZiAoaG9tZUJhc2VMZWFmKSB7XHJcblx0XHRcdGhvbWVCYXNlTGVhZi5zZXRQaW5uZWQodHJ1ZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVbnBpbiB0aGUgaG9tZSBiYXNlIHRhYlxyXG5cdCAqL1xyXG5cdHVucGluSG9tZUJhc2VUYWIoKTogdm9pZCB7XHJcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVBhdGg7XHJcblx0XHRpZiAoIWhvbWVCYXNlUGF0aCkgcmV0dXJuO1xyXG5cclxuXHRcdGNvbnN0IGhvbWVCYXNlRmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5wbHVnaW4uYXBwLCBob21lQmFzZVBhdGgpO1xyXG5cdFx0aWYgKCFob21lQmFzZUZpbGUpIHJldHVybjtcclxuXHJcblx0XHRjb25zdCBob21lQmFzZUxlYWYgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5maW5kRXhpc3RpbmdIb21lQmFzZUxlYWYoaG9tZUJhc2VGaWxlKTtcclxuXHRcdGlmIChob21lQmFzZUxlYWYpIHtcclxuXHRcdFx0aG9tZUJhc2VMZWFmLnNldFBpbm5lZChmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiB0aGUgaG9tZSBiYXNlIHRhYiBpcyBwaW5uZWRcclxuXHQgKi9cclxuXHRpc0hvbWVCYXNlVGFiUGlubmVkKCk6IGJvb2xlYW4ge1xyXG5cdFx0Y29uc3QgaG9tZUJhc2VQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VQYXRoO1xyXG5cdFx0aWYgKCFob21lQmFzZVBhdGgpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRjb25zdCBob21lQmFzZUZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMucGx1Z2luLmFwcCwgaG9tZUJhc2VQYXRoKTtcclxuXHRcdGlmICghaG9tZUJhc2VGaWxlKSByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0Y29uc3QgaG9tZUJhc2VMZWFmID0gdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2UuZmluZEV4aXN0aW5nSG9tZUJhc2VMZWFmKGhvbWVCYXNlRmlsZSk7XHJcblx0XHRpZiAoIWhvbWVCYXNlTGVhZikgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGhvbWVCYXNlTGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdHJldHVybiB2aWV3U3RhdGUucGlubmVkID09PSB0cnVlO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIE1vYmlsZSBCdXR0b24gU2VydmljZVxyXG4gKiBNYW5hZ2VzIHRoZSBtb2JpbGUgbmV3IHRhYiBidXR0b24gcmVwbGFjZW1lbnRcclxuICovXHJcblxyXG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHR5cGUgSG9tZUJhc2VQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcblxyXG4vKipcclxuICogQ1NTIGNsYXNzIGZvciB3aGVuIG1vYmlsZSBidXR0b24gaXMgcmVwbGFjZWRcclxuICovXHJcbmNvbnN0IE1PQklMRV9IT01FX0NMQVNTID0gJ2hvbWUtYmFzZS1tb2JpbGUtZW5hYmxlZCc7XHJcblxyXG5leHBvcnQgY2xhc3MgTW9iaWxlQnV0dG9uU2VydmljZSB7XHJcblx0cHJpdmF0ZSBwbHVnaW46IEhvbWVCYXNlUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IEhvbWVCYXNlUGx1Z2luKSB7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSB0aGUgbW9iaWxlIGJ1dHRvbiBiYXNlZCBvbiBzZXR0aW5nc1xyXG5cdCAqL1xyXG5cdHVwZGF0ZSgpOiB2b2lkIHtcclxuXHRcdC8vIE9ubHkgYXBwbHkgb24gbW9iaWxlXHJcblx0XHRpZiAoIVBsYXRmb3JtLmlzTW9iaWxlKSB7XHJcblx0XHRcdHRoaXMucmVtb3ZlKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU1vYmlsZU5ld1RhYikge1xyXG5cdFx0XHR0aGlzLmFwcGx5KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQXBwbHkgdGhlIG1vYmlsZSBidXR0b24gcmVwbGFjZW1lbnRcclxuXHQgKi9cclxuXHRwcml2YXRlIGFwcGx5KCk6IHZvaWQge1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKE1PQklMRV9IT01FX0NMQVNTKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZSB0aGUgbW9iaWxlIGJ1dHRvbiByZXBsYWNlbWVudFxyXG5cdCAqL1xyXG5cdHJlbW92ZSgpOiB2b2lkIHtcclxuXHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShNT0JJTEVfSE9NRV9DTEFTUyk7XHJcblx0fVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUEsOEJBQUFBO0FBQUEsRUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTBCTyxTQUFTLHFCQUFxQixXQUFvRDtBQUN4RixT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QTtBQUFBO0FBSUQ7IiwKICAibmFtZXMiOiBbIlNVUFBPUlRFRF9FWFRFTlNJT05TIiwgImltcG9ydF9vYnNpZGlhbiIsICJmb3JtYXQiLCAiZm9sZGVyIiwgInRlbXBsYXRlIiwgImNyZWF0ZURhaWx5Tm90ZSIsICJnZXREYWlseU5vdGUiLCAiZ2V0QWxsRGFpbHlOb3RlcyIsICJjcmVhdGVXZWVrbHlOb3RlIiwgImdldFdlZWtseU5vdGUiLCAiZ2V0QWxsV2Vla2x5Tm90ZXMiLCAiY3JlYXRlTW9udGhseU5vdGUiLCAiZ2V0TW9udGhseU5vdGUiLCAiZ2V0QWxsTW9udGhseU5vdGVzIiwgImNyZWF0ZVllYXJseU5vdGUiLCAiZ2V0WWVhcmx5Tm90ZSIsICJnZXRBbGxZZWFybHlOb3RlcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiSG9tZUJhc2VUeXBlIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIk9WaWV3IiwgImFsbExlYXZlcyIsICJzaG91bGRGb2N1cyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIm1haW5Xb3Jrc3BhY2UiLCAidGFiSGVhZGVyIiwgImdldEZpbGVCeVBhdGgiLCAiaW1wb3J0X29ic2lkaWFuIiwgInBlcmlvZGljTm90ZXMiLCAidmVyc2lvbiIsICJpc0xlZ2FjeSJdCn0K
