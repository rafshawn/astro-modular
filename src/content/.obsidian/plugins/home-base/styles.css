/**
 * Home Base Plugin Styles
 */

/* ========================================
   Icon Picker (matching iconic plugin)
   ======================================== */

.iconic-icon-picker .iconic-search-results {
	overflow-x: scroll;
}

.iconic-icon-picker .iconic-search-results > .setting-item-info {
	display: none;
}

.iconic-icon-picker .iconic-search-results > .setting-item-control {
	justify-content: center;
}

.iconic-icon-picker .iconic-search-results:focus-visible {
	box-shadow: 0 0 0 2px var(--background-modifier-border-focus);
}

/* Search result icons */
.iconic-icon-picker .iconic-search-result > * {
	height: var(--icon-size);
	--icon-size: calc(var(--icon-l) * 1.25);
	--icon-stroke: calc(var(--icon-l-stroke-width) * 6/7);
}

.iconic-icon-picker .iconic-search-result.is-selected {
	background-color: var(--background-modifier-hover);
}

.iconic-icon-picker .iconic-invisible {
	visibility: hidden;
}

/* ========================================
   Sticky Home Icon (Desktop)
   ======================================== */

/* Sticky home icon - positioned absolutely relative to tab bar, aligned with tabs */
.workspace-tabs > .home-base-sticky-icon {
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 0;
	margin: 0;
	cursor: default;
	color: var(--text-muted);
	transition: color 150ms ease, left 150ms ease;
	background: none;
	height: var(--tab-height, 32px);
	width: 24px;
	min-width: 24px;
	max-width: 24px;
	/* Position absolutely relative to workspace-tabs container */
	position: absolute;
	left: 4px; /* Position from left edge, accounting for container padding */
	top: 5px; /* Align with tab bar with proper spacing */
	z-index: 10; /* Above tabs but not too high */
	/* Prevent any layout shifts or animations */
	will-change: auto;
	transform: translateZ(0); /* Force hardware acceleration for stability */
	pointer-events: auto; /* Ensure it's clickable */
	/* Isolate from any parent transforms or animations */
	isolation: isolate;
	/* Prevent any visual changes during tab operations */
	opacity: 1 !important;
	visibility: visible !important;
	/* Prevent any transitions that might cause flickering */
	transition: color 150ms ease, left 150ms ease, opacity 0s, visibility 0s;
}

/* When left sidebar is collapsed, move icon to the right to fill the gap */
.workspace-tabs > .home-base-sticky-icon.home-base-sticky-icon-sidebar-collapsed {
	left: 42px; /* Move to fill the gap when sidebar is collapsed */
}

/* Ensure workspace-tabs has relative positioning for absolute child */
.workspace-tabs {
	position: relative;
}

/* Add padding to tab container inner to make space for the icon - ONLY when sticky icon is enabled */
.workspace-split.mod-vertical.mod-root.home-base-sticky-icon-enabled .workspace-tab-header-container-inner {
	padding-left: 32px; /* Space for icon (24px) + margin (8px) */
}

/* When sidebar is collapsed, adjust padding to match icon position */
.workspace-split.mod-vertical.mod-root.home-base-sticky-icon-enabled.home-base-sidebar-collapsed .workspace-tab-header-container-inner {
	padding-left: 44px; /* More space when sidebar is collapsed to align with icon at 36px */
}

.home-base-sticky-icon:hover {
	background: none;
	color: var(--text-normal);
}

.home-base-sticky-icon-active {
	color: var(--text-accent);
}

.home-base-sticky-icon-active:hover {
	color: var(--text-accent-hover);
}

.workspace-tabs > .home-base-sticky-icon svg {
	width: 18px;
	height: 18px;
	min-width: 18px;
	min-height: 18px;
	max-width: 18px;
	max-height: 18px;
	flex-shrink: 0;
	display: block;
	/* Prevent any size changes */
	box-sizing: border-box;
}

/* Hide home base tab header when sticky icon is enabled */
.workspace-tab-header.is-home-base-tab {
	display: none !important;
}

/* ========================================
   Mobile New Tab Button Replacement
   ======================================== */

/* Hide the default SVG when mobile home is enabled */
.home-base-mobile-enabled .mobile-navbar-action-new-tab .clickable-icon svg {
	display: none;
}

/* Add Lucide house icon as replacement */
.home-base-mobile-enabled .mobile-navbar-action-new-tab .clickable-icon::before {
	content: '';
	display: inline-block;
	width: 24px;
	height: 24px;
	background-color: currentColor;
	-webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8'/%3E%3Cpath d='M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z'/%3E%3C/svg%3E") no-repeat center / contain;
	mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8'/%3E%3Cpath d='M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z'/%3E%3C/svg%3E") no-repeat center / contain;
}

/* ========================================
   Settings Tab Styles
   ======================================== */

/* File suggester styling */
.suggestion-title {
	font-weight: 500;
}

.suggestion-path {
	color: var(--text-muted);
	margin-left: 4px;
}

.suggestion-note {
	color: var(--text-faint);
	font-family: var(--font-monospace);
	font-size: var(--font-smaller);
}

.suggestion-flair {
	display: inline-block;
	padding: 1px 4px;
	margin-left: 8px;
	border-radius: var(--radius-s);
	background-color: var(--background-modifier-border);
	color: var(--text-muted);
	font-size: var(--font-smallest);
	font-weight: 500;
	text-transform: uppercase;
}

/* Group settings compatibility styling for older Obsidian builds (< 1.11.0) */
/* Scoped to only this plugin's settings container to avoid affecting other plugins */
.home-base-settings-compat .setting-group-heading h3 {
	margin: 0 0 0.75rem;
	padding-bottom: 0.5rem;
	padding-top: 0.5rem;
	font-size: 1rem;
	font-weight: 600;
	border-bottom: none !important;
}
