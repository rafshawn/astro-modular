/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => UITweakerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian16 = require("obsidian");

// src/settings.ts
var DEFAULT_SETTINGS = {
  // Auto-hide elements
  titleBar: "show",
  fileExplorerNavHeader: "show",
  otherNavHeaders: "show",
  leftTabHeaders: "show",
  rightTabHeaders: "show",
  ribbonRevealOnHover: false,
  vaultSwitcher: "show",
  helpButton: "show",
  settingsButton: "show",
  // Simple toggles
  tabBar: false,
  tabBarHideWhenSingle: false,
  enableWindowDragging: false,
  newNoteButton: false,
  newFolderButton: false,
  sortOrderButton: false,
  autoRevealButton: false,
  collapseAllButton: false,
  readingModeButton: false,
  bookmarkedButton: false,
  searchSettingsButton: false,
  tabListIcon: "show",
  newTabIcon: "show",
  tabCloseButton: "show",
  statusBar: false,
  scrollBars: "show",
  leftSidebarToggleButton: "show",
  rightSidebarToggleButton: "show",
  tooltips: false,
  searchSuggestions: false,
  searchTermCounts: false,
  propertiesInReadingView: false,
  propertiesInHeading: false,
  addPropertyButton: false,
  deemphasizeProperties: false,
  instructions: false,
  // Mobile-specific
  mobileChevronsIcon: false,
  navigateBackButton: false,
  navigateForwardButton: false,
  quickSwitcherButton: false,
  mobileNewTabButton: false,
  openTabButton: false,
  ribbonMenuButton: false,
  swapMobileNewTabIcon: false,
  hideMobileTitle: false,
  hideMobileSyncIcon: false,
  // Mobile navigation menu positions
  navigateButtonPosition: "1",
  navigationButtonPosition: "2",
  quickSwitcherPosition: "3",
  newTabPosition: "4",
  openTabsPosition: "5",
  ribbonMenuPosition: "6",
  // Advanced
  vaultSwitcherBackgroundTransparency: 0.98,
  helpButtonReplacement: {
    enabled: false,
    commandId: "",
    iconId: "wrench"
  },
  syncButtonReplacement: {
    enabled: false,
    commandId: "",
    iconId: "wrench"
  },
  // Tab Bar
  tabBarCommands: [],
  // Status Bar
  statusBarItems: [],
  // Explorer
  explorerCommands: [],
  explorerButtonItems: [],
  // Native explorer button colors
  nativeExplorerButtonColors: {
    newNote: void 0,
    newFolder: void 0,
    sortOrder: void 0,
    autoReveal: void 0,
    collapseAll: void 0
  },
  // Native explorer button icon overrides
  nativeExplorerButtonIcons: {
    newNote: void 0,
    newFolder: void 0,
    sortOrder: void 0,
    autoReveal: void 0,
    collapseAll: void 0
  }
};

// src/uiManager.ts
var import_obsidian = require("obsidian");

// src/utils/cssUtils.ts
function getVaultSwitcherMask(transparency) {
  if (transparency >= 1) {
    return "none";
  }
  return "linear-gradient(to top, hsl(0, 0%, 0%) 0%, hsla(0, 0%, 0%, 0.99) 18.4%, hsla(0, 0%, 0%, 0.963) 33.7%, hsla(0, 0%, 0%, 0.92) 46.4%, hsla(0, 0%, 0%, 0.864) 56.7%, hsla(0, 0%, 0%, 0.796) 64.8%, hsla(0, 0%, 0%, 0.72) 71.2%, hsla(0, 0%, 0%, 0.637) 76.1%, hsla(0, 0%, 0%, 0.55) 79.9%, hsla(0, 0%, 0%, 0.46) 82.8%, hsla(0, 0%, 0%, 0.37) 85.2%, hsla(0, 0%, 0%, 0.283) 87.3%, hsla(0, 0%, 0%, 0.2) 89.6%, hsla(0, 0%, 0%, 0.124) 92.3%, hsla(0, 0%, 0%, 0.056) 95.6%, hsla(0, 0%, 0%, 0) 100%)";
}
function setCssProps(el, props) {
  Object.entries(props).forEach(([key, value]) => {
    el.style.setProperty(key, String(value));
  });
}

// src/uiManager.ts
var UIManager = class {
  constructor(plugin, settings) {
    this.revealListeners = /* @__PURE__ */ new Map();
    this.tabObserver = null;
    this.sidebarObserver = null;
    this.plugin = plugin;
    this.settings = settings;
  }
  updateSettings(settings) {
    this.settings = settings;
    this.applyStyles();
  }
  detectOS() {
    if (import_obsidian.Platform.isMacOS) {
      return "macos";
    }
    if (import_obsidian.Platform.isWin) {
      return "windows";
    }
    return "neutral";
  }
  applyStyles() {
    var _a;
    const body = document.body;
    this.applyVisibilityState(body, "auto-hide-title-bar", this.settings.titleBar, true);
    this.applyVisibilityState(body, "auto-hide-file-explorer-nav-header", this.settings.fileExplorerNavHeader);
    this.applyVisibilityState(body, "auto-hide-other-nav-headers", this.settings.otherNavHeaders);
    this.applyVisibilityState(body, "auto-hide-left-tab-headers", this.settings.leftTabHeaders);
    this.applyVisibilityState(body, "auto-hide-right-tab-headers", this.settings.rightTabHeaders);
    this.applyVisibilityState(body, "auto-hide-vault-switcher", this.settings.vaultSwitcher);
    this.applyVisibilityState(body, "hider-help-button", this.settings.helpButton);
    this.applyVisibilityState(body, "auto-hide-settings-button", this.settings.settingsButton);
    body.classList.toggle("auto-collapse-ribbon", this.settings.ribbonRevealOnHover);
    body.classList.toggle("ui-tweaker-sync-replacement-enabled", (_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled);
    body.classList.toggle("hider-tabs", this.settings.tabBar);
    if (this.settings.tabBar) {
      const os = this.detectOS();
      body.classList.remove("hider-tabs-windows", "hider-tabs-macos", "hider-tabs-neutral");
      body.classList.add(`hider-tabs-${os}`);
    } else {
      body.classList.remove("hider-tabs-windows", "hider-tabs-macos", "hider-tabs-neutral");
    }
    body.classList.toggle("auto-hide-tab-bar-when-single-tab", this.settings.tabBarHideWhenSingle);
    if (this.settings.tabBarHideWhenSingle) {
      const os = this.detectOS();
      body.classList.remove("auto-hide-tab-bar-windows", "auto-hide-tab-bar-macos", "auto-hide-tab-bar-neutral");
      body.classList.add(`auto-hide-tab-bar-${os}`);
      this.setupTabObserver();
    } else {
      this.cleanupTabObserver();
    }
    if (this.settings.tabBar && this.settings.enableWindowDragging) {
      const os = this.detectOS();
      body.classList.remove("enable-window-dragging-windows", "enable-window-dragging-macos", "enable-window-dragging-neutral");
      body.classList.add(`enable-window-dragging-${os}`);
    } else {
      body.classList.remove("enable-window-dragging-windows", "enable-window-dragging-macos", "enable-window-dragging-neutral");
    }
    body.classList.toggle("hide-button-new-note", this.settings.newNoteButton);
    body.classList.toggle("hide-button-new-folder", this.settings.newFolderButton);
    body.classList.toggle("hide-button-sort-order", this.settings.sortOrderButton);
    body.classList.toggle("hide-button-auto-reveal", this.settings.autoRevealButton);
    body.classList.toggle("hide-button-collapse-all", this.settings.collapseAllButton);
    body.classList.toggle("hide-button-reading-mode", this.settings.readingModeButton);
    body.classList.toggle("hide-button-bookmarked", this.settings.bookmarkedButton);
    body.classList.toggle("hide-button-search-settings", this.settings.searchSettingsButton);
    this.applyVisibilityState(body, "hide-tab-list-icon", this.settings.tabListIcon);
    this.applyVisibilityState(body, "hide-new-tab-icon", this.settings.newTabIcon);
    this.applyVisibilityState(body, "hide-tab-close-button", this.settings.tabCloseButton);
    body.classList.toggle("hider-status", this.settings.statusBar);
    this.applyVisibilityState(body, "hider-scroll", this.settings.scrollBars);
    if (this.settings.scrollBars === "reveal") {
      this.setupScrollbarRevealListeners();
    } else {
      this.removeScrollbarRevealListeners();
    }
    this.applyVisibilityState(body, "hider-left-sidebar-button", this.settings.leftSidebarToggleButton);
    this.applyVisibilityState(body, "hider-right-sidebar-button", this.settings.rightSidebarToggleButton);
    body.classList.toggle("hider-tooltips", this.settings.tooltips);
    body.classList.toggle("hider-search-suggestions", this.settings.searchSuggestions);
    body.classList.toggle("hider-search-counts", this.settings.searchTermCounts);
    body.classList.toggle("hider-meta", this.settings.propertiesInReadingView);
    body.classList.toggle("ui-tweaker-deemphasize-properties", this.settings.deemphasizeProperties);
    body.classList.toggle("metadata-heading-off", this.settings.propertiesInHeading);
    body.classList.toggle("metadata-add-property-off", this.settings.addPropertyButton);
    body.classList.toggle("hider-instructions", this.settings.instructions);
    body.classList.toggle("hide-icon-mobile-chevrons", this.settings.mobileChevronsIcon);
    body.classList.toggle("hide-button-mobile-navbar-action-back", this.settings.navigateBackButton);
    body.classList.toggle("hide-button-mobile-navbar-action-forward", this.settings.navigateForwardButton);
    body.classList.toggle("hide-button-mobile-navbar-action-quick-switcher", this.settings.quickSwitcherButton);
    body.classList.toggle("hide-button-mobile-navbar-action-new-tab", this.settings.mobileNewTabButton);
    body.classList.toggle("hide-button-mobile-navbar-action-tabs", this.settings.openTabButton);
    body.classList.toggle("hide-button-mobile-navbar-action-menu", this.settings.ribbonMenuButton);
    body.classList.toggle("swap-mobile-new-tab-icon", this.settings.swapMobileNewTabIcon);
    body.classList.toggle("hide-mobile-title", this.settings.hideMobileTitle);
    body.classList.toggle("hide-mobile-sync-icon", this.settings.hideMobileSyncIcon);
    const orderClasses = Array.from(body.classList).filter(
      (cls) => cls.startsWith("order-navbar-button-nth-child-")
    );
    orderClasses.forEach((cls) => body.classList.remove(cls));
    body.classList.add(`order-navbar-button-nth-child-1-${this.settings.navigateButtonPosition}`);
    body.classList.add(`order-navbar-button-nth-child-2-${this.settings.navigationButtonPosition}`);
    body.classList.add(`order-navbar-button-nth-child-3-${this.settings.quickSwitcherPosition}`);
    body.classList.add(`order-navbar-button-nth-child-4-${this.settings.newTabPosition}`);
    body.classList.add(`order-navbar-button-nth-child-5-${this.settings.openTabsPosition}`);
    body.classList.add(`order-navbar-button-nth-child-6-${this.settings.ribbonMenuPosition}`);
    const maskValue = getVaultSwitcherMask(this.settings.vaultSwitcherBackgroundTransparency);
    setCssProps(body, {
      "--auto-hide-vault-switcher-bg-transparency": String(this.settings.vaultSwitcherBackgroundTransparency),
      "--auto-hide-vault-switcher-mask": maskValue
    });
  }
  applyVisibilityState(body, className, state, useAlwaysShow = false) {
    if (useAlwaysShow) {
      body.classList.remove("always-show-title-bar", `${className}-hide`, `${className}-reveal`);
    } else {
      body.classList.remove(`${className}-show`, `${className}-hide`, `${className}-reveal`);
    }
    if (state === "show") {
      if (useAlwaysShow) {
        body.classList.add("always-show-title-bar");
      }
    } else if (state === "hide") {
      body.classList.add(`${className}-hide`);
    } else if (state === "reveal") {
      body.classList.add(`${className}-reveal`);
    }
  }
  setupScrollbarRevealListeners() {
    this.removeScrollbarRevealListeners();
    const isScrollable = (element) => {
      const style = window.getComputedStyle(element);
      const overflow = style.overflow + style.overflowY + style.overflowX;
      if (!overflow.includes("scroll") && !overflow.includes("auto")) {
        return false;
      }
      return element.scrollHeight > element.clientHeight || element.scrollWidth > element.clientWidth;
    };
    const hoveredElements = /* @__PURE__ */ new Set();
    const handleMouseMove = (e) => {
      const target = e.target;
      if (!target) return;
      hoveredElements.forEach((el) => {
        el.classList.remove("ui-tweaker-scrollbar-hover");
      });
      hoveredElements.clear();
      let element = target;
      while (element && element !== document.body && element !== document.documentElement) {
        if (isScrollable(element)) {
          const rect = element.getBoundingClientRect();
          const scrollbarArea = 25;
          const isInVerticalScrollbarArea = e.clientX >= rect.right - scrollbarArea && e.clientX <= rect.right;
          const isInHorizontalScrollbarArea = e.clientY >= rect.bottom - scrollbarArea && e.clientY <= rect.bottom;
          if (isInVerticalScrollbarArea || isInHorizontalScrollbarArea) {
            element.classList.add("ui-tweaker-scrollbar-hover");
            hoveredElements.add(element);
          }
        }
        element = element.parentElement;
      }
    };
    const handleMouseLeave = () => {
      hoveredElements.forEach((el) => {
        el.classList.remove("ui-tweaker-scrollbar-hover");
      });
      hoveredElements.clear();
    };
    document.addEventListener("mousemove", handleMouseMove, true);
    document.addEventListener("mouseleave", handleMouseLeave, true);
    this.revealListeners.set("scrollbar-reveal", () => {
      document.removeEventListener("mousemove", handleMouseMove, true);
      document.removeEventListener("mouseleave", handleMouseLeave, true);
      hoveredElements.forEach((el) => {
        el.classList.remove("ui-tweaker-scrollbar-hover");
      });
      hoveredElements.clear();
    });
  }
  removeScrollbarRevealListeners() {
    const cleanup = this.revealListeners.get("scrollbar-reveal");
    if (cleanup) {
      cleanup();
      this.revealListeners.delete("scrollbar-reveal");
    }
  }
  /**
   * Set up MutationObserver to detect single tab state and sidebar state
   * Ported from obsidian-oxygen-settings
   */
  setupTabObserver() {
    if (this.tabObserver) {
      return;
    }
    const checkSidebars = () => {
      var _a, _b;
      const workspace2 = this.plugin.app.workspace;
      const rightSidebarCollapsed = ((_a = workspace2.rightSplit) == null ? void 0 : _a.collapsed) !== false;
      const leftSidebarCollapsed = ((_b = workspace2.leftSplit) == null ? void 0 : _b.collapsed) !== false;
      document.body.classList.toggle("is-right-sidebar-collapsed", rightSidebarCollapsed);
      document.body.classList.toggle("is-left-sidebar-collapsed", leftSidebarCollapsed);
    };
    let checkTimeout = null;
    const debouncedCheck = () => {
      if (checkTimeout) {
        clearTimeout(checkTimeout);
      }
      checkTimeout = window.setTimeout(() => {
        checkSidebars();
        checkTimeout = null;
      }, 150);
    };
    setTimeout(checkSidebars, 100);
    this.tabObserver = new MutationObserver(() => {
      debouncedCheck();
    });
    const workspace = document.querySelector(".workspace");
    if (workspace) {
      this.tabObserver.observe(workspace, {
        childList: true,
        subtree: true
      });
    }
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("layout-change", () => {
        debouncedCheck();
      })
    );
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("resize", () => {
        debouncedCheck();
      })
    );
    const workspaceEl = document.querySelector(".workspace");
    if (workspaceEl) {
      this.sidebarObserver = new MutationObserver((mutations) => {
        let shouldCheck = false;
        mutations.forEach((mutation) => {
          if (mutation.type === "attributes" && mutation.attributeName === "class") {
            shouldCheck = true;
          }
        });
        if (shouldCheck) {
          checkSidebars();
          debouncedCheck();
        }
      });
      this.sidebarObserver.observe(workspaceEl, {
        attributes: true,
        attributeFilter: ["class"]
      });
    }
  }
  /**
   * Cleanup tab observer
   */
  cleanupTabObserver() {
    if (this.tabObserver) {
      this.tabObserver.disconnect();
      this.tabObserver = null;
    }
    if (this.sidebarObserver) {
      this.sidebarObserver.disconnect();
      this.sidebarObserver = null;
    }
    document.body.classList.remove("is-right-sidebar-collapsed", "is-left-sidebar-collapsed");
    document.body.classList.remove("auto-hide-tab-bar-windows", "auto-hide-tab-bar-macos", "auto-hide-tab-bar-neutral");
  }
  cleanup() {
    this.cleanupTabObserver();
    this.revealListeners.forEach((cleanup) => cleanup());
    this.revealListeners.clear();
    const body = document.body;
    const classesToRemove = [];
    body.classList.forEach((className) => {
      if (className.startsWith("ui-tweaker-") || className.startsWith("auto-hide-") || className.startsWith("hider-") || className.startsWith("hide-") || className.startsWith("metadata-") || className.startsWith("order-navbar-button-") || className.startsWith("enable-window-dragging-") || className === "auto-collapse-ribbon" || className === "swap-mobile-new-tab-icon" || className === "always-show-title-bar") {
        classesToRemove.push(className);
      }
    });
    classesToRemove.forEach((className) => body.classList.remove(className));
    body.style.removeProperty("--auto-hide-vault-switcher-bg-transparency");
    body.style.removeProperty("--auto-hide-vault-switcher-mask");
    body.style.removeProperty("--native-button-color-new-note");
    body.style.removeProperty("--native-button-color-new-folder");
    body.style.removeProperty("--native-button-color-sort-order");
    body.style.removeProperty("--native-button-color-auto-reveal");
    body.style.removeProperty("--native-button-color-collapse-all");
  }
};

// src/commands.ts
function registerCommands(context) {
  const { plugin, settings, saveSettings, refresh } = context;
  registerToggleCommand(plugin, "toggle-title-bar", "Toggle title bar", async () => {
    settings.titleBar = toggleVisibilityState(settings.titleBar);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-file-explorer-nav-header", "Toggle file explorer navigation header", async () => {
    settings.fileExplorerNavHeader = toggleVisibilityState(settings.fileExplorerNavHeader);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-other-nav-headers", "Toggle other navigation headers", async () => {
    settings.otherNavHeaders = toggleVisibilityState(settings.otherNavHeaders);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-left-tab-headers", "Toggle left tab headers", async () => {
    settings.leftTabHeaders = toggleVisibilityState(settings.leftTabHeaders);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-right-tab-headers", "Toggle right tab headers", async () => {
    settings.rightTabHeaders = toggleVisibilityState(settings.rightTabHeaders);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-vault-switcher", "Toggle vault switcher", async () => {
    settings.vaultSwitcher = toggleVisibilityState(settings.vaultSwitcher);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-help-button", "Toggle help button", async () => {
    settings.helpButton = toggleVisibilityState(settings.helpButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-settings-button", "Toggle settings button", async () => {
    settings.settingsButton = toggleVisibilityState(settings.settingsButton);
    await saveSettings();
    refresh();
  });
  plugin.addCommand({
    id: "open-settings",
    name: "Open settings",
    callback: () => {
      var _a, _b;
      const app = plugin.app;
      const settingApi = app.setting;
      if (settingApi) {
        (_a = settingApi.open) == null ? void 0 : _a.call(settingApi);
        const pluginInstance = plugin;
        if (((_b = pluginInstance.settingTab) == null ? void 0 : _b.id) && settingApi.openTabById) {
          settingApi.openTabById(pluginInstance.settingTab.id);
        }
      }
    }
  });
  registerToggleCommand(plugin, "toggle-tab-bar", "Toggle tab bar", async () => {
    settings.tabBar = !settings.tabBar;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tab-bar-single", "Toggle hide tab bar when only one tab", async () => {
    settings.tabBarHideWhenSingle = !settings.tabBarHideWhenSingle;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-new-note-button", "Toggle new note button", async () => {
    settings.newNoteButton = !settings.newNoteButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-new-folder-button", "Toggle new folder button", async () => {
    settings.newFolderButton = !settings.newFolderButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-sort-order-button", "Toggle sort order button", async () => {
    settings.sortOrderButton = !settings.sortOrderButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-auto-reveal-button", "Toggle auto reveal button", async () => {
    settings.autoRevealButton = !settings.autoRevealButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-collapse-all-button", "Toggle collapse all button", async () => {
    settings.collapseAllButton = !settings.collapseAllButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-reading-mode-button", "Toggle reading mode button", async () => {
    settings.readingModeButton = !settings.readingModeButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-search-settings-button", "Toggle search settings button", async () => {
    settings.searchSettingsButton = !settings.searchSettingsButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tab-list-icon", "Toggle tab list icon", async () => {
    settings.tabListIcon = toggleVisibilityState(settings.tabListIcon);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-new-tab-icon", "Toggle new tab icon", async () => {
    settings.newTabIcon = toggleVisibilityState(settings.newTabIcon);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tab-close-button", "Toggle tab close button", async () => {
    settings.tabCloseButton = toggleVisibilityState(settings.tabCloseButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-status-bar", "Toggle status bar", async () => {
    settings.statusBar = !settings.statusBar;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-scroll-bars", "Toggle scroll bars", async () => {
    settings.scrollBars = toggleVisibilityState(settings.scrollBars);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-left-sidebar-toggle-button", "Toggle left sidebar toggle button", async () => {
    settings.leftSidebarToggleButton = toggleVisibilityState(settings.leftSidebarToggleButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-right-sidebar-toggle-button", "Toggle right sidebar toggle button", async () => {
    settings.rightSidebarToggleButton = toggleVisibilityState(settings.rightSidebarToggleButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tooltips", "Toggle tooltips", async () => {
    settings.tooltips = !settings.tooltips;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-search-suggestions", "Toggle search suggestions", async () => {
    settings.searchSuggestions = !settings.searchSuggestions;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-search-term-counts", "Toggle search term counts", async () => {
    settings.searchTermCounts = !settings.searchTermCounts;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-properties-reading-view", "Toggle properties in Reading view", async () => {
    settings.propertiesInReadingView = !settings.propertiesInReadingView;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-deemphasize-properties", "Toggle deemphasize properties", async () => {
    settings.deemphasizeProperties = !settings.deemphasizeProperties;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-properties-heading", "Toggle properties heading", async () => {
    settings.propertiesInHeading = !settings.propertiesInHeading;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-add-property-button", "Toggle add property button", async () => {
    settings.addPropertyButton = !settings.addPropertyButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-instructions", "Toggle instructions", async () => {
    settings.instructions = !settings.instructions;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-mobile-chevrons-icon", "Toggle mobile chevrons icon", async () => {
    settings.mobileChevronsIcon = !settings.mobileChevronsIcon;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-navigate-back-button", "Toggle navigate back button", async () => {
    settings.navigateBackButton = !settings.navigateBackButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-navigate-forward-button", "Toggle navigate forward button", async () => {
    settings.navigateForwardButton = !settings.navigateForwardButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-quick-switcher-button", "Toggle quick switcher button", async () => {
    settings.quickSwitcherButton = !settings.quickSwitcherButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-mobile-new-tab-button", "Toggle mobile new tab button", async () => {
    settings.mobileNewTabButton = !settings.mobileNewTabButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-open-tab-button", "Toggle open tab button", async () => {
    settings.openTabButton = !settings.openTabButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-ribbon-menu-button", "Toggle ribbon menu button", async () => {
    settings.ribbonMenuButton = !settings.ribbonMenuButton;
    await saveSettings();
    refresh();
  });
}
function registerToggleCommand(plugin, id, name, callback) {
  plugin.addCommand({
    id,
    name,
    callback
  });
}
function toggleVisibilityState(currentState) {
  if (currentState === "reveal") {
    return "hide";
  }
  return currentState === "show" ? "hide" : "show";
}

// src/ui/SettingsTab.ts
var import_obsidian10 = require("obsidian");

// src/ui/common/TabRenderer.ts
var import_obsidian2 = require("obsidian");
var TabRenderer = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
  }
  getSettings() {
    return this.plugin.settings;
  }
  async saveSettings() {
    await this.plugin.saveSettings();
    this.plugin.refresh();
  }
  createDropdownSetting(container, name, description, value, options, onChange) {
    return new import_obsidian2.Setting(container).setName(name).setDesc(description).addDropdown((dropdown) => {
      Object.entries(options).forEach(([key, label]) => {
        dropdown.addOption(key, label);
      });
      dropdown.setValue(value);
      dropdown.onChange(async (value2) => {
        onChange(value2);
        await this.saveSettings();
      });
      return dropdown;
    });
  }
  createToggleSetting(container, name, description, value, onChange) {
    return new import_obsidian2.Setting(container).setName(name).setDesc(description).addToggle((toggle) => {
      toggle.setValue(value);
      toggle.onChange(async (value2) => {
        onChange(value2);
        await this.saveSettings();
      });
      return toggle;
    });
  }
  createSliderSetting(container, name, description, value, min, max, step, onChange) {
    return new import_obsidian2.Setting(container).setName(name).setDesc(description).addSlider((slider) => {
      slider.setLimits(min, max, step).setValue(value).setDynamicTooltip().onChange(async (value2) => {
        onChange(value2);
        await this.saveSettings();
      });
      return slider;
    });
  }
};

// src/utils/settings-compat.ts
var import_obsidian3 = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian3.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian3.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/modals/CommandPickerModal.ts
var import_obsidian4 = require("obsidian");
var CommandPickerModal = class extends import_obsidian4.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    const commandRegistry = this.app.commands;
    const commandMap = /* @__PURE__ */ new Map();
    if (commandRegistry && typeof commandRegistry.listCommands === "function") {
      try {
        const commands = commandRegistry.listCommands();
        for (const command of commands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      } catch (e) {
      }
    }
    return Array.from(commandMap.values()).sort((a, b) => a.name.localeCompare(b.name));
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
};

// src/modals/IconPickerModal.ts
var import_obsidian5 = require("obsidian");
var getIconList = () => {
  if (import_obsidian5.requireApiVersion && (0, import_obsidian5.requireApiVersion)("1.7.3") && import_obsidian5.getIconIds) {
    try {
      return (0, import_obsidian5.getIconIds)();
    } catch (e) {
    }
  }
  return [
    "settings-2",
    "settings",
    "help-circle",
    "info",
    "star",
    "heart",
    "bookmark",
    "home",
    "search",
    "bell",
    "mail",
    "user",
    "users",
    "folder",
    "file",
    "file-text",
    "image",
    "video",
    "music",
    "calendar",
    "clock",
    "edit",
    "pencil",
    "trash",
    "copy",
    "cut",
    "paste",
    "download",
    "upload",
    "save",
    "share",
    "link",
    "external-link",
    "lock",
    "unlock",
    "eye",
    "eye-off",
    "key",
    "shield",
    "check",
    "x",
    "plus",
    "minus",
    "arrow-left",
    "arrow-right",
    "arrow-up",
    "arrow-down",
    "chevron-left",
    "chevron-right",
    "chevron-up",
    "chevron-down",
    "menu",
    "more-horizontal",
    "more-vertical",
    "grid",
    "list",
    "layout",
    "columns",
    "rows",
    "maximize",
    "minimize",
    "zoom-in",
    "zoom-out",
    "refresh-cw",
    "play",
    "pause",
    "stop",
    "sun",
    "moon",
    "cloud",
    "zap",
    "wand-2",
    "wand",
    "wand-sparkles",
    "palette",
    "brush",
    "sliders",
    "power",
    "wifi",
    "bluetooth",
    "monitor",
    "laptop",
    "smartphone",
    "camera",
    "mic",
    "headphones",
    "code",
    "terminal",
    "terminal-square",
    "github",
    "gitlab",
    "git-branch",
    "git-commit",
    "database",
    "server",
    "cloud-download",
    "cloud-upload",
    "tag",
    "tags",
    "flag",
    "pin",
    "map-pin",
    "compass",
    "globe",
    "rocket",
    "car",
    "bike",
    "robot",
    "apple",
    "windows",
    "linux",
    "chrome",
    "firefox",
    "safari",
    "credit-card",
    "wallet",
    "coins",
    "book",
    "book-open",
    "award",
    "trophy",
    "badge",
    "wrench",
    "tool",
    "package",
    "box",
    "archive",
    "send",
    "reply",
    "forward",
    "mail-open",
    "tag-plus",
    "tag-minus",
    "flag-off",
    "pin-off",
    "map-pin-off",
    "navigation",
    "map",
    "earth",
    "plane",
    "ship",
    "anchor",
    "helicopter",
    "drone",
    "android",
    "keyhole",
    "keys",
    "fingerprint",
    "scan",
    "qr-code",
    "barcode",
    "receipt",
    "piggy-bank",
    "banknote"
  ];
};
var LUCIDE_ICONS = getIconList().map((id) => ({
  id,
  name: id.replace(/^lucide-/, "").replace(/-/g, " ").replace(/(^\w{1})|(\s+\w{1})/g, (letter) => letter.toUpperCase())
})).sort((a, b) => a.name.localeCompare(b.name));
var IconPickerModal = class extends import_obsidian5.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    return LUCIDE_ICONS;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
    this.close();
  }
  // Override to show icon preview
  renderSuggestion(match, el) {
    const item = match.item;
    el.addClass("mod-complex");
    const content = el.createDiv({ cls: "suggestion-content" });
    content.createDiv({ cls: "suggestion-title", text: item.name });
    const aux = el.createDiv({ cls: "suggestion-aux" });
    const iconSpan = aux.createSpan({ cls: "suggestion-flair ui-tweaker-icon-no-bg" });
    (0, import_obsidian5.setIcon)(iconSpan, item.id);
  }
};

// src/ui/tabs/HiderTab.ts
var HiderTab = class extends TabRenderer {
  render(container) {
    container.empty();
    const generalGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    this.addVisibilitySetting(
      generalGroup,
      "Title bar",
      "Hide title bar until hover. Turn off to always show.",
      "titleBar"
    );
    this.addVisibilitySetting(
      generalGroup,
      "File explorer nav header",
      "Hide file explorer navigation header until hover. Elegantly reveals on hover.",
      "fileExplorerNavHeader"
    );
    this.addVisibilitySetting(
      generalGroup,
      "Other nav headers",
      "Hide navigation headers for tag, backlinks, outgoing links, outline, and bookmarks panes until hover.",
      "otherNavHeaders"
    );
    this.addVisibilitySetting(
      generalGroup,
      "Left tab headers",
      "Hide left panel tab headers until hover. Elegantly reveals on hover.",
      "leftTabHeaders"
    );
    this.addVisibilitySetting(
      generalGroup,
      "Right tab headers",
      "Hide right panel tab headers until hover. Elegantly reveals on hover.",
      "rightTabHeaders"
    );
    generalGroup.addSetting((setting) => {
      setting.setName("Collapse ribbon").setDesc("Collapse the left ribbon to a thin strip until hover. Elegantly expands on hover.").addToggle(
        (toggle) => toggle.setValue(this.getSettings().ribbonRevealOnHover).onChange((value) => {
          this.getSettings().ribbonRevealOnHover = value;
          void this.saveSettings();
        })
      );
    });
    const navigationGroup = createSettingsGroup(container, "Navigation", "ui-tweaker");
    this.addToggleSetting(navigationGroup, "Hide tab bar", "Hides the tab container at the top of the window.", "tabBar");
    this.addToggleSetting(navigationGroup, "Make top of window draggable without tab bar", 'Enables window dragging from the top of the window when the tab bar is hidden. Only works when "Hide tab bar" is enabled.', "enableWindowDragging");
    this.addToggleSetting(navigationGroup, "Hide tab header when only one tab", "Hide the tab bar automatically when only 1 tab is open.", "tabBarHideWhenSingle");
    this.addToggleSetting(navigationGroup, 'Hide "Reading mode" button', 'Hide "Reading mode" button in view headers.', "readingModeButton");
    this.addToggleSetting(navigationGroup, 'Hide "Bookmarked" button', 'Hide "Bookmarked" button in view headers.', "bookmarkedButton");
    this.addToggleSetting(navigationGroup, 'Hide "Search settings" button', 'Hide "Search settings" button in search pane.', "searchSettingsButton");
    const vaultProfileGroup = createSettingsGroup(container, "Vault profile area", "ui-tweaker");
    this.addVisibilitySetting(
      vaultProfileGroup,
      "Vault switcher",
      "Hide vault switcher until hover. Does not work when vault name is hidden.",
      "vaultSwitcher"
    );
    this.addVisibilitySetting(
      vaultProfileGroup,
      "Help button",
      "Hide help button until hover. Elegantly reveals on hover.",
      "helpButton"
    );
    this.renderHelpButtonReplacement(container, vaultProfileGroup);
    this.addVisibilitySetting(
      vaultProfileGroup,
      "Settings button",
      "Hide settings button until hover. Elegantly reveals on hover.",
      "settingsButton"
    );
    vaultProfileGroup.addSetting((setting) => {
      setting.setName("Vault switcher background transparency").setDesc("Adjust the transparency of the vault switcher background when hidden. Range: 0 (fully transparent) to 1 (fully opaque).").addSlider(
        (slider) => slider.setLimits(0, 1, 0.01).setValue(this.getSettings().vaultSwitcherBackgroundTransparency).setDynamicTooltip().onChange((value) => {
          this.getSettings().vaultSwitcherBackgroundTransparency = value;
          void this.saveSettings();
        })
      );
    });
    const tabIconsGroup = createSettingsGroup(container, "Tab icons", "ui-tweaker");
    this.addVisibilitySetting(
      tabIconsGroup,
      "Hide tab list icon",
      "Hides the tab list icon. You can still access tabs via other methods.",
      "tabListIcon"
    );
    this.addVisibilitySetting(
      tabIconsGroup,
      "Hide new tab icon",
      "Hides the new tab icon. You can still create new tabs with Ctrl+T (Cmd+T on Mac).",
      "newTabIcon"
    );
    this.addVisibilitySetting(
      tabIconsGroup,
      "Hide tab close button",
      "Hides the close button on tabs. You can still close tabs with middle click or other methods.",
      "tabCloseButton"
    );
    const statusUIGroup = createSettingsGroup(container, "Status & UI elements", "ui-tweaker");
    this.addToggleSetting(statusUIGroup, "Hide status bar", "Hides word count, character count and backlink count.", "statusBar");
    this.addVisibilitySetting(
      statusUIGroup,
      "Scroll bars",
      "Control scrollbar visibility. Reveal option hides scrollbars until hover.",
      "scrollBars"
    );
    this.addVisibilitySetting(
      statusUIGroup,
      "Hide left sidebar toggle button",
      "Hides the left sidebar toggle button.",
      "leftSidebarToggleButton"
    );
    this.addVisibilitySetting(
      statusUIGroup,
      "Hide right sidebar toggle button",
      "Hides the right sidebar toggle button.",
      "rightSidebarToggleButton"
    );
    this.addToggleSetting(statusUIGroup, "Hide tooltips", "Hides all tooltips.", "tooltips");
    this.addToggleSetting(statusUIGroup, "Hide instructions", "Hides instructional tips in modals.", "instructions");
    const searchGroup = createSettingsGroup(container, "Search", "ui-tweaker");
    this.addToggleSetting(searchGroup, "Hide search suggestions", "Hides suggestions in search pane.", "searchSuggestions");
    this.addToggleSetting(searchGroup, "Hide count of search term matches", "Hides the number of matches within each search result.", "searchTermCounts");
    const propertiesGroup = createSettingsGroup(container, "Properties", "ui-tweaker");
    this.addToggleSetting(propertiesGroup, "Hide properties in Reading view", "Hides the properties section in Reading view.", "propertiesInReadingView");
    this.addToggleSetting(propertiesGroup, "Deemphasize properties", "Softens visual prominence of file properties. They become more visible on hover.", "deemphasizeProperties");
    this.addToggleSetting(propertiesGroup, "Hide properties heading", 'Hide "Properties" heading above properties.', "propertiesInHeading");
    this.addToggleSetting(propertiesGroup, 'Hide "Add property" button', 'Hide "Add property" button below properties.', "addPropertyButton");
  }
  addVisibilitySetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addDropdown((dropdown) => {
        const currentValue = this.getSettings()[key];
        const stringValue = typeof currentValue === "string" ? currentValue : "show";
        dropdown.addOption("show", "Show").addOption("hide", "Hide").addOption("reveal", "Reveal").setValue(stringValue).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        });
      });
    });
  }
  addToggleSetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addToggle(
        (toggle) => toggle.setValue(Boolean(this.getSettings()[key])).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        })
      );
    });
  }
  renderHelpButtonReplacement(container, group) {
    const settings = this.getSettings();
    if (!settings.helpButtonReplacement) {
      settings.helpButtonReplacement = {
        enabled: false,
        commandId: "",
        iconId: "wrench"
      };
    }
    group.addSetting((setting) => {
      setting.setName("Replace help button with custom action").setDesc("Replace the help button with a custom icon and command. This will hide the original help button and show your custom button instead.").addToggle(
        (toggle) => toggle.setValue(settings.helpButtonReplacement.enabled).onChange((value) => {
          if (!settings.helpButtonReplacement) {
            settings.helpButtonReplacement = {
              enabled: true,
              commandId: "ui-tweaker:open-settings",
              iconId: "wrench"
            };
          }
          settings.helpButtonReplacement.enabled = value;
          void (async () => {
            await this.saveSettings();
            setTimeout(() => {
              const scrollPos = container.scrollTop;
              this.render(container);
              requestAnimationFrame(() => {
                container.scrollTop = scrollPos;
              });
            }, 50);
          })();
        })
      );
    });
    if (settings.helpButtonReplacement.enabled) {
      const getCommandName = (commandId) => {
        if (!commandId) return "Select command...";
        try {
          const commandRegistry = this.app.commands;
          if (commandRegistry && typeof commandRegistry.listCommands === "function") {
            const commands = commandRegistry.listCommands();
            const command = commands.find((cmd) => cmd && cmd.id === commandId);
            if (command == null ? void 0 : command.name) {
              return command.name;
            }
          }
        } catch (e) {
        }
        return "Select command...";
      };
      const commandName = getCommandName(settings.helpButtonReplacement.commandId);
      group.addSetting((setting) => {
        setting.setName("Command").setDesc("Select the command to execute when the button is clicked").addButton(
          (button) => button.setButtonText(commandName || "Select command...").onClick(() => {
            const modal = new CommandPickerModal(this.app, (commandId) => {
              if (!settings.helpButtonReplacement) {
                settings.helpButtonReplacement = {
                  enabled: true,
                  commandId: "ui-tweaker:open-settings",
                  iconId: "wrench"
                };
              }
              settings.helpButtonReplacement.commandId = commandId;
              void (async () => {
                await this.saveSettings();
                setTimeout(() => {
                  const scrollPos = container.scrollTop;
                  this.render(container);
                  requestAnimationFrame(() => {
                    container.scrollTop = scrollPos;
                  });
                }, 50);
              })();
            });
            modal.open();
          })
        );
      });
      const getIconName = (iconId) => {
        if (!iconId) return "";
        return iconId.replace(/^lucide-/, "").split("-").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
      };
      const iconName = getIconName(settings.helpButtonReplacement.iconId);
      group.addSetting((setting) => {
        setting.setName("Icon").setDesc("Select the icon to display on the button").addButton(
          (button) => button.setButtonText(iconName || "Select icon...").onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              if (!settings.helpButtonReplacement) {
                settings.helpButtonReplacement = {
                  enabled: true,
                  commandId: "ui-tweaker:open-settings",
                  iconId: "wrench"
                };
              }
              settings.helpButtonReplacement.iconId = iconId;
              void (async () => {
                await this.saveSettings();
                setTimeout(() => {
                  const scrollPos = container.scrollTop;
                  this.render(container);
                  requestAnimationFrame(() => {
                    container.scrollTop = scrollPos;
                  });
                }, 50);
              })();
            });
            modal.open();
          })
        );
      });
    }
  }
};

// src/ui/tabs/TabBarTab.ts
var import_obsidian7 = require("obsidian");

// src/modals/NamePickerModal.ts
var import_obsidian6 = require("obsidian");
var NamePickerModal = class extends import_obsidian6.Modal {
  constructor(app, defaultName, onSubmit) {
    super(app);
    this.defaultName = defaultName;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Enter name" });
    const inputContainer = contentEl.createDiv();
    const input = new import_obsidian6.TextComponent(inputContainer);
    input.setValue(this.defaultName);
    input.setPlaceholder("Enter custom name...");
    input.inputEl.addClass("ui-tweaker-name-input");
    input.inputEl.select();
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", { text: "OK", cls: "mod-cta" });
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    const handleSubmit = () => {
      const value = input.getValue().trim();
      if (value) {
        this.onSubmit(value);
        this.close();
      }
    };
    submitButton.addEventListener("click", handleSubmit);
    cancelButton.addEventListener("click", () => this.close());
    input.inputEl.addEventListener("keydown", (evt) => {
      if (evt.key === "Enter") {
        evt.preventDefault();
        handleSubmit();
      }
      if (evt.key === "Escape") {
        evt.preventDefault();
        this.close();
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/chooseCommand.ts
async function chooseNewCommand(plugin) {
  return new Promise((resolve, reject) => {
    let commandSelected = false;
    let iconSelected = false;
    const commandModal = new CommandPickerModal(plugin.app, (commandId) => {
      var _a;
      commandSelected = true;
      const commands = plugin.app.commands;
      const command = (_a = commands == null ? void 0 : commands.commands) == null ? void 0 : _a[commandId];
      setTimeout(() => {
        commandModal.close();
      }, 0);
      const displayName = (command == null ? void 0 : command.name) || "Custom Command";
      const iconModal = new IconPickerModal(plugin.app, (iconId) => {
        iconSelected = true;
        iconModal.close();
        setTimeout(() => {
          let nameSelected = false;
          const nameModal = new NamePickerModal(plugin.app, displayName, (customName) => {
            nameSelected = true;
            nameModal.close();
            resolve({
              id: commandId,
              icon: iconId,
              name: customName,
              displayName,
              mode: "any"
            });
          });
          nameModal.onClose = () => {
            setTimeout(() => {
              if (!nameSelected && iconSelected && commandSelected) {
                reject(new Error("No name selected"));
              }
            }, 0);
          };
          nameModal.open();
        }, 100);
      });
      iconModal.onClose = () => {
        setTimeout(() => {
          if (!iconSelected && commandSelected) {
            reject(new Error("No icon selected"));
          }
        }, 0);
      };
      setTimeout(() => {
        iconModal.open();
      }, 100);
    });
    commandModal.onClose = () => {
      setTimeout(() => {
        if (!commandSelected) {
          reject(new Error("No command selected"));
        }
      }, 0);
    };
    commandModal.open();
  });
}

// src/ui/tabs/TabBarTab.ts
function arrayMoveMutable(array, from, to) {
  const item = array[from];
  array.splice(from, 1);
  array.splice(to, 0, item);
}
var TabBarTab = class extends TabRenderer {
  constructor() {
    super(...arguments);
    this.expandedStates = /* @__PURE__ */ new Map();
  }
  render(container) {
    container.empty();
    const settings = this.getSettings();
    if (!settings.tabBarCommands) {
      settings.tabBarCommands = [];
    }
    settings.tabBarCommands.forEach((pair, index) => {
      this.renderCommandItem(container, pair, index);
    });
    if (settings.tabBarCommands.length > 0) {
      container.createEl("hr");
    }
    const addGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    addGroup.addSetting((setting) => {
      setting.setName("Add command").setDesc("Add a new command button to the tab bar").addButton((button) => {
        const buttonEl = button.buttonEl;
        const iconContainer = buttonEl.createSpan({ cls: "ui-tweaker-add-icon" });
        (0, import_obsidian7.setIcon)(iconContainer, "lucide-image-plus");
        buttonEl.insertBefore(iconContainer, buttonEl.firstChild);
        button.setButtonText("Add command").setCta().onClick(() => {
          void (async () => {
            var _a;
            try {
              const pair = await chooseNewCommand(this.plugin);
              await ((_a = this.plugin.tabBarManager) == null ? void 0 : _a.addCommand(pair));
              this.render(container);
            } catch (e) {
            }
          })();
        });
      });
    });
  }
  renderCommandItem(container, pair, index) {
    const settings = this.getSettings();
    const group = createSettingsGroup(container, void 0, "ui-tweaker");
    const otherSettings = [];
    const displayName = pair.displayName || pair.name;
    group.addSetting((setting) => {
      var _a;
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, true);
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, false);
      const nameEl = setting.nameEl;
      setCssProps(nameEl, { display: "flex", alignItems: "center", gap: "0.5rem", width: "100%" });
      const chevronContainer = document.createElement("div");
      chevronContainer.className = "ui-tweaker-collapse-icon";
      setCssProps(chevronContainer, {
        cursor: "default",
        background: "transparent",
        padding: "0",
        margin: "0",
        display: "inline-flex",
        alignItems: "center",
        justifyContent: "center"
      });
      nameEl.insertBefore(chevronContainer, nameEl.firstChild);
      let isExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      (0, import_obsidian7.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
      chevronContainer.addEventListener("click", (e) => {
        e.stopPropagation();
        e.stopImmediatePropagation();
        e.preventDefault();
        isExpanded = !isExpanded;
        this.expandedStates.set(pair.id, isExpanded);
        (0, import_obsidian7.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
        otherSettings.forEach((settingEl) => {
          setCssProps(settingEl, { display: isExpanded ? "" : "none" });
        });
      });
      const nameContainer = nameEl.createDiv({ cls: "ui-tweaker-editable-name" });
      setCssProps(nameContainer, { display: "flex", alignItems: "center", gap: "0.5rem" });
      const createNameDisplay = (name) => {
        nameContainer.empty();
        const display = nameContainer.createSpan({
          text: name === displayName ? name : `${name} (${displayName})`,
          cls: "ui-tweaker-name-display"
        });
        const iconContainer = nameContainer.createDiv({ cls: "ui-tweaker-edit-icon" });
        setCssProps(iconContainer, { opacity: "0.6" });
        (0, import_obsidian7.setIcon)(iconContainer, "lucide-pencil-line");
        const startEdit = () => {
          const currentName = pair.name;
          nameContainer.empty();
          const nameInput = nameContainer.createEl("input", {
            type: "text",
            value: currentName
          });
          nameInput.addClass("mod-text-input");
          nameInput.focus();
          nameInput.select();
          const saveName = () => {
            var _a2;
            nameInput.removeEventListener("blur", saveName);
            let newName = nameInput.value.trim();
            if (!newName) {
              newName = currentName;
            }
            pair.name = newName;
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.updateButtonNames();
            void (async () => {
              await this.saveSettings();
              this.render(container);
            })();
          };
          nameInput.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
              e.preventDefault();
              saveName();
            } else if (e.key === "Escape") {
              e.preventDefault();
              createNameDisplay(currentName);
            }
          });
          nameInput.addEventListener("blur", saveName);
        };
        display.addEventListener("click", startEdit);
        iconContainer.addEventListener("click", startEdit);
        iconContainer.addEventListener("mouseenter", () => {
          setCssProps(iconContainer, { opacity: "1" });
        });
        iconContainer.addEventListener("mouseleave", () => {
          setCssProps(iconContainer, { opacity: "0.6" });
        });
      };
      createNameDisplay(pair.name);
      setting.setDesc("").addExtraButton((button) => {
        const iconEl = button.extraSettingsEl;
        (0, import_obsidian7.setIcon)(iconEl, pair.icon);
        iconEl.setAttribute("data-command-id", pair.id);
        if (pair.color && pair.color !== "#000000") {
          setCssProps(iconEl, { color: pair.color });
        } else {
          iconEl.style.removeProperty("color");
        }
        button.setTooltip("Change icon");
        button.onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a2;
              if (iconId && iconId !== pair.icon) {
                pair.icon = iconId;
                await this.saveSettings();
                (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              }
            })();
          });
          modal.open();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-up");
        if (index > 0) {
          button.setTooltip("Move up");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable(settings.tabBarCommands, index, index - 1);
              await this.saveSettings();
              (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at top");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-down");
        if (index < settings.tabBarCommands.length - 1) {
          button.setTooltip("Move down");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable(settings.tabBarCommands, index, index + 1);
              await this.saveSettings();
              (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at bottom");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("trash");
        button.setTooltip("Delete");
        button.extraSettingsEl.addClass("mod-warning");
        setCssProps(button.extraSettingsEl, { color: "var(--text-error)" });
        button.onClick(() => {
          void (async () => {
            var _a2;
            settings.tabBarCommands.splice(index, 1);
            await this.saveSettings();
            await ((_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.removeCommand(pair));
            this.render(container);
          })();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Device mode").setDesc("Choose which devices this command appears on").addDropdown((dropdown) => {
        const appId = this.app.appId || "this-device";
        dropdown.addOption("any", "All devices").addOption("desktop", "Desktop only").addOption("mobile", "Mobile only").addOption(appId, "This device");
        const currentValue = pair.mode === "any" || pair.mode === "desktop" || pair.mode === "mobile" ? pair.mode : appId;
        dropdown.setValue(currentValue);
        dropdown.onChange((value) => {
          void (async () => {
            var _a;
            pair.mode = value;
            await this.saveSettings();
            (_a = this.plugin.tabBarManager) == null ? void 0 : _a.reorder();
            this.render(container);
          })();
        });
        dropdown.selectEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasColor = pair.color !== void 0;
      setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
        var _a;
        const currentColor = (_a = pair.color) != null ? _a : "#000000";
        colorPicker.setValue(currentColor);
        const controlEl = setting.controlEl;
        controlEl.addEventListener("click", (e) => e.stopPropagation());
        setTimeout(() => {
          const colorInput = controlEl.querySelector('input[type="color"]');
          if (colorInput) {
            colorInput.addEventListener("click", (e) => e.stopPropagation());
          }
        }, 0);
        if (hasColor) {
          setTimeout(() => {
            const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-color-reset",
              attr: { "aria-label": "Reset to default color" }
            });
            (0, import_obsidian7.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              void (async () => {
                var _a2;
                pair.color = void 0;
                const iconButton = container.querySelector(`[data-command-id="${pair.id}"]`);
                if (iconButton) {
                  iconButton.style.removeProperty("color");
                }
                await this.saveSettings();
                (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            if (colorPickerEl) {
              controlEl.insertBefore(resetButton, colorPickerEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
        colorPicker.onChange((value) => {
          if (value === "#000000") {
            pair.color = void 0;
          } else {
            pair.color = value;
          }
          const iconButton = container.querySelector(`[data-command-id="${pair.id}"]`);
          if (iconButton) {
            if (pair.color && pair.color !== "#000000") {
              setCssProps(iconButton, { color: pair.color });
            } else {
              iconButton.style.removeProperty("color");
            }
          }
          void (async () => {
            var _a2;
            await this.saveSettings();
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
            this.render(container);
          })();
        });
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasToggleIcon = pair.toggleIcon !== void 0;
      setting.setName("Toggle icon").setDesc("Icon to show when command is toggled on (leave empty to disable toggle). Commands with check callback work automatically. See readme for plugin developer compatibility notes.").setTooltip("For plugin developers: Commands with checkCallback work automatically. See https://github.com/davidvkimball/obsidian-ui-tweaker#toggle-icon-feature-compatibility for details.").addButton((button) => {
        const currentToggleIcon = pair.toggleIcon || "None";
        button.setButtonText(currentToggleIcon === "None" ? "Set toggle icon..." : currentToggleIcon).onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a;
              if (iconId) {
                pair.toggleIcon = iconId;
              } else {
                pair.toggleIcon = void 0;
              }
              await this.saveSettings();
              (_a = this.plugin.tabBarManager) == null ? void 0 : _a.reorder();
              this.render(container);
            })();
          });
          modal.open();
        });
        button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
        if (hasToggleIcon) {
          setTimeout(() => {
            const controlEl = setting.controlEl;
            const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-toggle-icon-reset",
              attr: { "aria-label": "Reset toggle icon" }
            });
            (0, import_obsidian7.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
              const scrollPos = scrollContainer.scrollTop;
              void (async () => {
                var _a;
                pair.toggleIcon = void 0;
                await this.saveSettings();
                (_a = this.plugin.tabBarManager) == null ? void 0 : _a.reorder();
                this.render(container);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 0);
                });
              })();
            });
            if (buttonEl) {
              controlEl.insertBefore(resetButton, buttonEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Show only on these file types").setDesc('Show button only on specified file types or views. Enter comma-separated file extensions (like "md,mdx") or view types for views without files (like "{{graph}}"). Leave empty to show on all. Use {{graph}} for graph view and {{empty}} for blank/new tabs.').addText((text) => {
        var _a;
        text.setPlaceholder("Example: md, mdx");
        text.setValue((_a = pair.showOnFileTypes) != null ? _a : "");
        text.onChange((value) => {
          void (async () => {
            var _a2;
            pair.showOnFileTypes = value.trim() || void 0;
            await this.saveSettings();
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
          })();
        });
        text.inputEl.addEventListener("click", (e) => e.stopPropagation());
        text.inputEl.addEventListener("focus", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Never show on these file types").setDesc('Hide button on specified file types or views. Enter comma-separated file extensions (like "jpg,png") or view types for views without files (like "{{graph}}"). Leave empty to allow all. Use {{graph}} for graph view and {{empty}} for blank/new tabs.').addText((text) => {
        var _a;
        text.setPlaceholder("{{graph}},{{empty}}");
        text.setValue((_a = pair.hideOnFileTypes) != null ? _a : "");
        text.onChange((value) => {
          void (async () => {
            var _a2;
            pair.hideOnFileTypes = value.trim() || void 0;
            await this.saveSettings();
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
          })();
        });
        text.inputEl.addEventListener("click", (e) => e.stopPropagation());
        text.inputEl.addEventListener("focus", (e) => e.stopPropagation());
      });
    });
    setTimeout(() => {
      var _a;
      const savedExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      otherSettings.forEach((settingEl) => {
        setCssProps(settingEl, { display: savedExpanded ? "" : "none" });
      });
    }, 0);
  }
};

// src/ui/tabs/StatusBarTab.ts
var import_obsidian8 = require("obsidian");
function arrayMoveMutable2(array, from, to) {
  const item = array[from];
  array.splice(from, 1);
  array.splice(to, 0, item);
}
var dragging = false;
var StatusBarTab = class extends TabRenderer {
  render(container) {
    container.empty();
    const settings = this.getSettings();
    this.container = container;
    if (!settings.statusBarItems) {
      settings.statusBarItems = [];
    }
    const wrapper = container.createDiv("ui-tweaker-status-bar-rows-wrapper");
    const rowsContainer = wrapper.createDiv("ui-tweaker-status-bar-rows-container");
    settings.statusBarItems.forEach((item, index) => {
      if (item.type === "existing") {
        this.renderExistingRow(rowsContainer, item, settings, index, settings.statusBarItems.length);
      } else {
        this.renderCustomRow(rowsContainer, item, settings, index, settings.statusBarItems.length);
      }
    });
    if (settings.statusBarItems.length > 0) {
      container.createEl("hr");
    }
    const addGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    addGroup.addSetting((setting) => {
      setting.setName("Add command").setDesc("Add a new command button to the status bar").addButton((button) => {
        const buttonEl = button.buttonEl;
        const iconContainer = buttonEl.createSpan({ cls: "ui-tweaker-add-icon" });
        (0, import_obsidian8.setIcon)(iconContainer, "lucide-image-plus");
        buttonEl.insertBefore(iconContainer, buttonEl.firstChild);
        button.setButtonText("Add command").setCta().onClick(() => {
          void (async () => {
            var _a;
            try {
              const pair = await chooseNewCommand(this.plugin);
              await ((_a = this.plugin.statusBarManager) == null ? void 0 : _a.addCustomCommand(pair));
              const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.parentElement;
              const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
              this.render(container);
              requestAnimationFrame(() => {
                if (scrollContainer) {
                  scrollContainer.scrollTop = scrollTop;
                }
              });
            } catch (e) {
            }
          })();
        });
      });
    });
  }
  /**
   * Render an existing status bar item row (EXACTLY like Status Bar Organizer)
   */
  renderExistingRow(rowsContainer, item, settings, index, totalItems) {
    var _a;
    const statusBarContainer = (_a = this.plugin.app.statusBar) == null ? void 0 : _a.containerEl;
    const actualElement = statusBarContainer == null ? void 0 : statusBarContainer.querySelector(`[data-ui-tweaker-status-bar-id="${item.id}"]`);
    const exists = !!actualElement;
    const entry = rowsContainer.createDiv("ui-tweaker-status-bar-row");
    entry.addClass("ui-tweaker-row");
    if (!exists) entry.addClass("ui-tweaker-status-bar-row-disabled");
    if (item.hidden) entry.addClass("ui-tweaker-status-bar-row-hidden");
    entry.setAttribute("data-ui-tweaker-id", item.id);
    const handle = entry.createSpan("ui-tweaker-status-bar-row-handle");
    handle.addEventListener(
      "mousedown",
      (event) => this.handleMouseDown(event, rowsContainer, item, settings)
    );
    const titleSpan = entry.createSpan("ui-tweaker-status-bar-row-title");
    titleSpan.textContent = item.name;
    const previewSpan = entry.createSpan("ui-tweaker-status-bar-row-preview");
    if (exists && actualElement) {
      const cloned = actualElement.cloneNode(true);
      setCssProps(cloned, { display: "", visibility: "", opacity: "" });
      cloned.querySelectorAll("*").forEach((child) => {
        setCssProps(child, { display: "", visibility: "", opacity: "" });
      });
      previewSpan.appendChild(cloned);
    }
    entry.createSpan("ui-tweaker-status-bar-row-reset-color");
    entry.createSpan("ui-tweaker-status-bar-row-color-picker");
    entry.createSpan("ui-tweaker-status-bar-row-md-only");
    const lockSpan = entry.createSpan("ui-tweaker-status-bar-row-lock");
    const lockIcon = item.sticky === "right" ? "corner-right-down" : item.sticky === "left" ? "corner-right-up" : "unlock";
    lockSpan.setAttribute("aria-label", item.sticky ? `Pinned to ${item.sticky === "right" ? "End" : "Start"}` : "Unlocked - click to pin to end");
    lockSpan.addEventListener("click", (e) => {
      e.stopPropagation();
      this.toggleLock(item, lockSpan, index, totalItems, rowsContainer, settings);
    });
    (0, import_obsidian8.setIcon)(lockSpan, lockIcon);
    if (item.sticky) {
      lockSpan.addClass("ui-tweaker-locked");
    }
    const visibilitySpan = entry.createSpan("ui-tweaker-status-bar-row-visibility");
    if (item.type === "custom") {
      visibilitySpan.setAttribute("aria-label", "Delete item");
      visibilitySpan.addClass("mod-warning");
      setCssProps(visibilitySpan, { color: "var(--text-error)" });
      visibilitySpan.addEventListener("click", () => {
        void this.removeItem(rowsContainer, item, settings);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, "trash-2");
    } else {
      visibilitySpan.setAttribute("aria-label", item.hidden ? "Hidden - click to show" : "Visible - click to hide");
      visibilitySpan.addEventListener("click", () => {
        this.toggleVisibility(item, visibilitySpan, entry);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, item.hidden ? "eye-off" : "eye");
    }
  }
  /**
   * Render a custom status bar item row (EXACTLY like Status Bar Organizer, but with editable name)
   */
  renderCustomRow(rowsContainer, item, settings, index, totalItems) {
    const entry = rowsContainer.createDiv("ui-tweaker-status-bar-row");
    entry.addClass("ui-tweaker-row");
    if (item.hidden) entry.addClass("ui-tweaker-status-bar-row-hidden");
    entry.setAttribute("data-ui-tweaker-id", item.id);
    const handle = entry.createSpan("ui-tweaker-status-bar-row-handle");
    handle.addEventListener(
      "mousedown",
      (event) => this.handleMouseDown(event, rowsContainer, item, settings)
    );
    const titleSpan = entry.createSpan("ui-tweaker-status-bar-row-title");
    const displayName = item.displayName || item.name;
    const nameText = item.name === displayName ? item.name : `${item.name} (${displayName})`;
    titleSpan.textContent = nameText;
    titleSpan.addEventListener("dblclick", () => {
      const currentName = item.name;
      const input = document.createElement("input");
      input.type = "text";
      input.value = currentName;
      input.addClass("mod-text-input");
      setCssProps(input, { width: "100%" });
      titleSpan.empty();
      titleSpan.appendChild(input);
      input.focus();
      input.select();
      const saveName = () => {
        var _a;
        let newName = input.value.trim();
        if (!newName) newName = currentName;
        item.name = newName;
        (_a = this.plugin.statusBarManager) == null ? void 0 : _a.updateButtonNames();
        titleSpan.textContent = newName === displayName ? newName : `${newName} (${displayName})`;
        void this.saveSettings();
      };
      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          saveName();
        } else if (e.key === "Escape") {
          e.preventDefault();
          titleSpan.textContent = nameText;
        }
      });
      input.addEventListener("blur", saveName);
    });
    const previewSpan = entry.createSpan("ui-tweaker-status-bar-row-preview");
    if (item.icon) {
      const previewIcon = previewSpan.createSpan("status-bar-item mod-clickable");
      (0, import_obsidian8.setIcon)(previewIcon, item.icon);
      if (item.color && item.color !== "#000000") {
        setCssProps(previewIcon, { color: item.color });
      }
    }
    const resetColorContainer = entry.createSpan("ui-tweaker-status-bar-row-reset-color");
    if (item.color) {
      const resetButton = resetColorContainer.createEl("button", {
        cls: "clickable-icon ui-tweaker-color-reset",
        attr: { "aria-label": "Reset to default color" }
      });
      (0, import_obsidian8.setIcon)(resetButton, "rotate-cw");
      resetButton.addEventListener("click", (e) => {
        var _a;
        e.stopPropagation();
        item.color = void 0;
        const previewIcon = previewSpan.querySelector(".clickable-icon");
        if (previewIcon) {
          previewIcon.style.removeProperty("color");
        }
        (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
        void this.saveSettings();
        if (this.container) {
          this.render(this.container);
        }
      });
    }
    const colorPickerContainer = entry.createSpan("ui-tweaker-status-bar-row-color-picker");
    const colorPickerEl = colorPickerContainer.createDiv();
    const colorPicker = new import_obsidian8.ColorComponent(colorPickerEl);
    colorPicker.setValue(item.color || "#000000");
    colorPicker.onChange((value) => {
      var _a;
      if (value === "#000000") {
        item.color = void 0;
      } else {
        item.color = value;
      }
      const previewIcon = previewSpan.querySelector(".clickable-icon");
      if (previewIcon) {
        if (item.color && item.color !== "#000000") {
          setCssProps(previewIcon, { color: item.color });
        } else {
          previewIcon.style.removeProperty("color");
        }
      }
      (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
      void this.saveSettings();
      if (this.container) {
        this.render(this.container);
      }
    });
    const mdOnlySpan = entry.createSpan("ui-tweaker-status-bar-row-md-only");
    mdOnlySpan.setAttribute("aria-label", item.mdOnly ? "Only show on Markdown files (enabled)" : "Only show on Markdown files (disabled)");
    mdOnlySpan.addEventListener("click", (e) => {
      var _a;
      e.stopPropagation();
      item.mdOnly = !item.mdOnly;
      (0, import_obsidian8.setIcon)(mdOnlySpan, item.mdOnly ? "file-check" : "file-x");
      mdOnlySpan.setAttribute("aria-label", item.mdOnly ? "Only show on Markdown files (enabled)" : "Only show on Markdown files (disabled)");
      if (item.mdOnly) {
        mdOnlySpan.addClass("ui-tweaker-active");
      } else {
        mdOnlySpan.removeClass("ui-tweaker-active");
      }
      (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
      void this.saveSettings();
    });
    (0, import_obsidian8.setIcon)(mdOnlySpan, item.mdOnly ? "file-check" : "file-x");
    if (item.mdOnly) {
      mdOnlySpan.addClass("ui-tweaker-active");
    }
    const lockSpan = entry.createSpan("ui-tweaker-status-bar-row-lock");
    const lockIcon = item.sticky === "right" ? "corner-right-down" : item.sticky === "left" ? "corner-right-up" : "unlock";
    lockSpan.setAttribute("aria-label", item.sticky ? `Pinned to ${item.sticky === "right" ? "End" : "Start"}` : "Unlocked - click to pin to end");
    lockSpan.addEventListener("click", (e) => {
      e.stopPropagation();
      this.toggleLock(item, lockSpan, index, totalItems, rowsContainer, settings);
    });
    (0, import_obsidian8.setIcon)(lockSpan, lockIcon);
    if (item.sticky) {
      lockSpan.addClass("ui-tweaker-locked");
    }
    const visibilitySpan = entry.createSpan("ui-tweaker-status-bar-row-visibility");
    if (item.type === "custom") {
      visibilitySpan.setAttribute("aria-label", "Delete item");
      visibilitySpan.addClass("mod-warning");
      setCssProps(visibilitySpan, { color: "var(--text-error)" });
      visibilitySpan.addEventListener("click", () => {
        void this.removeItem(rowsContainer, item, settings);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, "trash-2");
    } else {
      visibilitySpan.setAttribute("aria-label", item.hidden ? "Hidden - click to show" : "Visible - click to hide");
      visibilitySpan.addEventListener("click", () => {
        this.toggleVisibility(item, visibilitySpan, entry);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, item.hidden ? "eye-off" : "eye");
    }
  }
  /**
   * Toggle lock position based on current position
   */
  toggleLock(item, lockSpan, currentIndex, totalItems, rowsContainer, settings) {
    var _a;
    if (!item.sticky) {
      item.sticky = "right";
      const oldIndex = settings.statusBarItems.findIndex((i) => i.id === item.id);
      if (oldIndex !== -1) {
        arrayMoveMutable2(settings.statusBarItems, oldIndex, settings.statusBarItems.length - 1);
      }
    } else if (item.sticky === "right") {
      item.sticky = "left";
      const oldIndex = settings.statusBarItems.findIndex((i) => i.id === item.id);
      if (oldIndex !== -1) {
        arrayMoveMutable2(settings.statusBarItems, oldIndex, 0);
      }
    } else {
      item.sticky = false;
    }
    (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
    void this.saveSettings();
    if (this.container) {
      this.render(this.container);
    }
  }
  /**
   * Toggle visibility (exactly like Status Bar Organizer)
   */
  toggleVisibility(item, visibilitySpan, entry) {
    var _a;
    item.hidden = !item.hidden;
    if (item.hidden) {
      entry.addClass("ui-tweaker-status-bar-row-hidden");
      (0, import_obsidian8.setIcon)(visibilitySpan, "eye-off");
      visibilitySpan.setAttribute("aria-label", "Hidden - click to show");
    } else {
      entry.removeClass("ui-tweaker-status-bar-row-hidden");
      (0, import_obsidian8.setIcon)(visibilitySpan, "eye");
      visibilitySpan.setAttribute("aria-label", "Visible - click to hide");
    }
    (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
    void this.saveSettings();
  }
  /**
   * Remove item (exactly like Status Bar Organizer)
   */
  async removeItem(rowsContainer, item, settings) {
    var _a;
    const entry = rowsContainer.querySelector(`[data-ui-tweaker-id="${item.id}"]`);
    if (entry) {
      rowsContainer.removeChild(entry);
    }
    await ((_a = this.plugin.statusBarManager) == null ? void 0 : _a.removeItem(item));
    void this.saveSettings();
  }
  /**
   * Handle mouse down for dragging (exactly like Status Bar Organizer)
   */
  handleMouseDown(event, rowsContainer, item, settings) {
    var _a, _b;
    if (dragging) return;
    dragging = true;
    const entry = rowsContainer.querySelector(`[data-ui-tweaker-id="${item.id}"]`);
    if (!entry) return;
    const stationaryRow = entry;
    stationaryRow.addClass("ui-tweaker-status-bar-row-clone");
    const movableRow = document.createElement("div");
    movableRow.addClass("ui-tweaker-status-bar-row");
    movableRow.addClass("ui-tweaker-status-bar-row-drag");
    setCssProps(movableRow, {
      display: "grid",
      gridTemplateColumns: "1.25em 0.5fr 0.8fr 2em 2em 2em 2em 2em 2em"
    });
    if (item.hidden) movableRow.addClass("ui-tweaker-status-bar-row-hidden");
    if (item.type === "existing") {
      const statusBarContainer = (_a = this.plugin.app.statusBar) == null ? void 0 : _a.containerEl;
      const actualElement = statusBarContainer == null ? void 0 : statusBarContainer.querySelector(`[data-ui-tweaker-id="${item.id}"]`);
      if (!actualElement) movableRow.addClass("ui-tweaker-status-bar-row-disabled");
    }
    const wrapper = rowsContainer.closest(".ui-tweaker-status-bar-rows-wrapper") || rowsContainer.parentElement || rowsContainer;
    wrapper.appendChild(movableRow);
    const containerX = wrapper.getBoundingClientRect().left;
    const containerY = wrapper.getBoundingClientRect().top;
    const stationaryRect = stationaryRow.getBoundingClientRect();
    setCssProps(movableRow, {
      position: "absolute",
      left: stationaryRect.left - containerX + "px",
      top: stationaryRect.top - containerY + "px",
      width: stationaryRow.offsetWidth + "px"
    });
    movableRow.createSpan("ui-tweaker-status-bar-row-handle");
    const dragTitle = movableRow.createSpan("ui-tweaker-status-bar-row-title");
    dragTitle.textContent = item.name;
    const dragPreview = movableRow.createSpan("ui-tweaker-status-bar-row-preview");
    if (item.type === "existing") {
      const statusBarContainer = (_b = this.plugin.app.statusBar) == null ? void 0 : _b.containerEl;
      const actualElement = statusBarContainer == null ? void 0 : statusBarContainer.querySelector(`[data-ui-tweaker-status-bar-id="${item.id}"]`);
      if (actualElement) {
        const cloned = actualElement.cloneNode(true);
        cloned.removeAttribute("aria-label");
        cloned.removeAttribute("title");
        cloned.querySelectorAll("[aria-label], [title]").forEach((el) => {
          el.removeAttribute("aria-label");
          el.removeAttribute("title");
        });
        dragPreview.appendChild(cloned);
      }
    } else if (item.icon) {
      const previewIcon = dragPreview.createSpan("status-bar-item clickable-icon");
      (0, import_obsidian8.setIcon)(previewIcon, item.icon);
      previewIcon.removeAttribute("aria-label");
      previewIcon.removeAttribute("title");
      if (item.color && item.color !== "#000000") {
        setCssProps(previewIcon, { color: item.color });
      }
    }
    movableRow.createSpan("ui-tweaker-status-bar-row-reset-color");
    movableRow.createSpan("ui-tweaker-status-bar-row-color-picker");
    movableRow.createSpan("ui-tweaker-status-bar-row-md-only");
    const dragLock = movableRow.createSpan("ui-tweaker-status-bar-row-lock");
    const lockIcon = item.sticky === "right" ? "corner-right-down" : item.sticky === "left" ? "corner-right-up" : "unlock";
    (0, import_obsidian8.setIcon)(dragLock, lockIcon);
    const dragVisibility = movableRow.createSpan("ui-tweaker-status-bar-row-visibility");
    (0, import_obsidian8.setIcon)(dragVisibility, item.hidden ? "eye-off" : "eye");
    let offsetX = event.clientX - movableRow.getBoundingClientRect().left;
    let offsetY = event.clientY - movableRow.getBoundingClientRect().top;
    offsetX = offsetX + containerX;
    offsetY = offsetY + containerY;
    let index = Array.from(rowsContainer.children).indexOf(stationaryRow);
    const handleMouseMove = (e) => {
      var _a2;
      setCssProps(movableRow, {
        left: e.clientX - offsetX + "px",
        top: e.clientY - offsetY + "px"
      });
      const dist = movableRow.getBoundingClientRect().top - stationaryRow.getBoundingClientRect().top;
      if (Math.abs(dist) > stationaryRow.offsetHeight * 0.75) {
        const dir = dist / Math.abs(dist);
        const newIndex = Math.max(0, Math.min(index + dir, rowsContainer.children.length - 1));
        if (newIndex !== index) {
          rowsContainer.removeChild(stationaryRow);
          if (newIndex < rowsContainer.children.length) {
            rowsContainer.insertBefore(stationaryRow, rowsContainer.children[newIndex]);
          } else {
            rowsContainer.appendChild(stationaryRow);
          }
          if (settings.statusBarItems) {
            const oldIndex = settings.statusBarItems.findIndex((i) => i.id === item.id);
            if (oldIndex !== -1 && oldIndex !== newIndex) {
              arrayMoveMutable2(settings.statusBarItems, oldIndex, newIndex);
              (_a2 = this.plugin.statusBarManager) == null ? void 0 : _a2.reorder();
            }
          }
          index = newIndex;
        }
      }
    };
    const handleMouseUp = () => {
      var _a2;
      stationaryRow.removeClass("ui-tweaker-status-bar-row-clone");
      if (movableRow.parentElement === wrapper) {
        wrapper.removeChild(movableRow);
      }
      dragging = false;
      window.removeEventListener("mousemove", handleMouseMove);
      window.removeEventListener("mouseup", handleMouseUp);
      (_a2 = this.plugin.statusBarManager) == null ? void 0 : _a2.reorder();
      void this.saveSettings();
    };
    window.addEventListener("mousemove", handleMouseMove);
    window.addEventListener("mouseup", handleMouseUp);
  }
};

// src/ui/tabs/ExplorerTab.ts
var import_obsidian9 = require("obsidian");
function arrayMoveMutable3(array, from, to) {
  const item = array[from];
  array.splice(from, 1);
  array.splice(to, 0, item);
}
var ExplorerTab = class extends TabRenderer {
  constructor() {
    super(...arguments);
    this.expandedStates = /* @__PURE__ */ new Map();
  }
  render(container) {
    container.empty();
    const settings = this.getSettings();
    if (!settings.explorerCommands) {
      settings.explorerCommands = [];
    }
    if (!settings.explorerButtonItems) {
      settings.explorerButtonItems = [];
    }
    if (!settings.nativeExplorerButtonColors) {
      settings.nativeExplorerButtonColors = {
        newNote: void 0,
        newFolder: void 0,
        sortOrder: void 0,
        autoReveal: void 0,
        collapseAll: void 0
      };
    }
    if (!settings.nativeExplorerButtonIcons) {
      settings.nativeExplorerButtonIcons = {
        newNote: void 0,
        newFolder: void 0,
        sortOrder: void 0,
        autoReveal: void 0,
        collapseAll: void 0
      };
    }
    settings.explorerButtonItems.forEach((item, index) => {
      this.renderButtonItem(container, item, index);
    });
    if (settings.explorerButtonItems.length > 0) {
      container.createEl("hr");
    }
    const addGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    addGroup.addSetting((setting) => {
      setting.setName("Add command").setDesc("Add a new command button to the file explorer navigation area").addButton((button) => {
        const buttonEl = button.buttonEl;
        const iconContainer = buttonEl.createSpan({ cls: "ui-tweaker-add-icon" });
        (0, import_obsidian9.setIcon)(iconContainer, "lucide-image-plus");
        buttonEl.insertBefore(iconContainer, buttonEl.firstChild);
        button.setButtonText("Add command").setCta().onClick(() => {
          void (async () => {
            var _a;
            try {
              const pair = await chooseNewCommand(this.plugin);
              settings.explorerCommands.push(pair);
              const item = {
                id: `custom-${pair.id}`,
                name: pair.name,
                ariaLabel: pair.name,
                type: "custom",
                commandId: pair.id,
                icon: pair.icon,
                displayName: pair.displayName,
                mode: pair.mode,
                color: pair.color,
                showOnFileTypes: pair.showOnFileTypes,
                hideOnFileTypes: pair.hideOnFileTypes,
                toggleIcon: pair.toggleIcon,
                useActiveClass: pair.useActiveClass,
                hidden: false
              };
              settings.explorerButtonItems.push(item);
              await this.saveSettings();
              (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
              this.render(container);
            } catch (e) {
            }
          })();
        });
      });
    });
    const warningDiv = container.createEl("div", {
      cls: "callout",
      attr: { "data-callout": "warning" }
    });
    warningDiv.createEl("p", {
      text: "When clicking on a command in the explorer, the explorer view will become focused. This might interfere with commands that are supposed to be executed on an active file or explorer."
    });
  }
  renderNativeButtonControls(container, mainContainer) {
    container.empty();
    const settings = this.getSettings();
    const group = createSettingsGroup(container, "Native explorer buttons", "ui-tweaker");
    const scrollContainer = mainContainer || container;
    const renderNativeButton = (name, settingKey, colorKey) => {
      var _a, _b;
      const isHidden = settings[settingKey];
      const color = (_a = settings.nativeExplorerButtonColors) == null ? void 0 : _a[colorKey];
      const iconOverride = (_b = settings.nativeExplorerButtonIcons) == null ? void 0 : _b[colorKey];
      group.addSetting((setting) => {
        setting.setName(name).setDesc("").addExtraButton((button) => {
          const iconEl = button.extraSettingsEl;
          (0, import_obsidian9.setIcon)(iconEl, isHidden ? "eye-off" : "eye");
          button.setTooltip(isHidden ? "Show button" : "Hide button");
          button.onClick(() => {
            void (async () => {
              const currentValue = settings[settingKey];
              settings[settingKey] = !currentValue;
              await this.saveSettings();
              const newIsHidden = settings[settingKey];
              (0, import_obsidian9.setIcon)(iconEl, newIsHidden ? "eye-off" : "eye");
              button.setTooltip(newIsHidden ? "Show button" : "Hide button");
            })();
          });
          button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
        });
        if (color) {
          setting.addColorPicker((colorPicker) => {
            colorPicker.setValue(color);
            const controlEl = setting.controlEl;
            controlEl.addEventListener("click", (e) => e.stopPropagation());
            setTimeout(() => {
              const colorInput = controlEl.querySelector('input[type="color"]');
              if (colorInput) {
                colorInput.addEventListener("click", (e) => e.stopPropagation());
              }
            }, 0);
            setTimeout(() => {
              const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
              const resetButton = controlEl.createEl("button", {
                cls: "clickable-icon ui-tweaker-color-reset",
                attr: { "aria-label": "Reset to default color" }
              });
              (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
              setCssProps(resetButton, { marginRight: "0.5rem" });
              resetButton.addEventListener("click", (e) => {
                e.stopPropagation();
                e.stopImmediatePropagation();
                e.preventDefault();
                const scrollPos = scrollContainer.scrollTop;
                void (async () => {
                  var _a2;
                  if (!settings.nativeExplorerButtonColors) {
                    settings.nativeExplorerButtonColors = {};
                  }
                  settings.nativeExplorerButtonColors[colorKey] = void 0;
                  await this.saveSettings();
                  (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                  this.renderNativeButtonControls(container, mainContainer);
                  requestAnimationFrame(() => {
                    scrollContainer.scrollTop = scrollPos;
                  });
                })();
              });
              if (colorPickerEl) {
                controlEl.insertBefore(resetButton, colorPickerEl);
              } else {
                controlEl.insertBefore(resetButton, controlEl.firstChild);
              }
            }, 0);
            colorPicker.onChange((value) => {
              void (async () => {
                var _a2;
                if (!settings.nativeExplorerButtonColors) {
                  settings.nativeExplorerButtonColors = {};
                }
                settings.nativeExplorerButtonColors[colorKey] = value;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
              })();
            });
          });
        } else {
          setting.addButton((button) => {
            button.setButtonText("Set color...").onClick(() => {
              const scrollPos = scrollContainer.scrollTop;
              if (!settings.nativeExplorerButtonColors) {
                settings.nativeExplorerButtonColors = {};
              }
              settings.nativeExplorerButtonColors[colorKey] = "#000000";
              void (async () => {
                var _a2;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                this.renderNativeButtonControls(container, mainContainer);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                });
              })();
            });
            button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
          });
        }
        setting.addButton((button) => {
          const currentIcon = iconOverride || "Default";
          button.setButtonText(currentIcon === "Default" ? "Set icon..." : currentIcon).onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              void (async () => {
                var _a2;
                const scrollPos = scrollContainer.scrollTop;
                if (!settings.nativeExplorerButtonIcons) {
                  settings.nativeExplorerButtonIcons = {};
                }
                if (iconId) {
                  settings.nativeExplorerButtonIcons[colorKey] = iconId;
                } else {
                  settings.nativeExplorerButtonIcons[colorKey] = void 0;
                }
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                this.renderNativeButtonControls(container, mainContainer);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                });
              })();
            });
            modal.open();
          });
          button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
          if (iconOverride) {
            setTimeout(() => {
              const controlEl = setting.controlEl;
              const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
              const resetButton = controlEl.createEl("button", {
                cls: "clickable-icon ui-tweaker-icon-reset",
                attr: { "aria-label": "Reset to default icon" }
              });
              (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
              setCssProps(resetButton, { marginRight: "0.5rem" });
              resetButton.addEventListener("click", (e) => {
                e.stopPropagation();
                e.stopImmediatePropagation();
                e.preventDefault();
                const scrollPos = scrollContainer.scrollTop;
                void (async () => {
                  var _a2;
                  if (!settings.nativeExplorerButtonIcons) {
                    settings.nativeExplorerButtonIcons = {};
                  }
                  settings.nativeExplorerButtonIcons[colorKey] = void 0;
                  await this.saveSettings();
                  (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                  this.renderNativeButtonControls(container, mainContainer);
                  requestAnimationFrame(() => {
                    scrollContainer.scrollTop = scrollPos;
                  });
                })();
              });
              if (buttonEl) {
                controlEl.insertBefore(resetButton, buttonEl);
              } else {
                controlEl.insertBefore(resetButton, controlEl.firstChild);
              }
            }, 0);
          }
        });
      });
    };
    renderNativeButton("New note", "newNoteButton", "newNote");
    renderNativeButton("New folder", "newFolderButton", "newFolder");
    renderNativeButton("Sort order", "sortOrderButton", "sortOrder");
    renderNativeButton("Auto-reveal", "autoRevealButton", "autoReveal");
    renderNativeButton("Collapse all", "collapseAllButton", "collapseAll");
  }
  renderButtonItem(container, item, index) {
    var _a, _b;
    const settings = this.getSettings();
    const group = createSettingsGroup(container, void 0, "ui-tweaker");
    const otherSettings = [];
    const pair = item.type === "custom" && item.commandId ? settings.explorerCommands.find((c) => c.id === item.commandId) : null;
    const displayName = item.type === "custom" && pair ? pair.displayName || pair.name : item.name;
    const nativeButtonMap = {
      "native-newNote": { settingKey: "newNoteButton", colorKey: "newNote" },
      "native-newFolder": { settingKey: "newFolderButton", colorKey: "newFolder" },
      "native-sortOrder": { settingKey: "sortOrderButton", colorKey: "sortOrder" },
      "native-autoReveal": { settingKey: "autoRevealButton", colorKey: "autoReveal" },
      "native-collapseAll": { settingKey: "collapseAllButton", colorKey: "collapseAll" }
    };
    const nativeButtonInfo = item.type === "native" ? nativeButtonMap[item.id] : null;
    const isHidden = nativeButtonInfo ? settings[nativeButtonInfo.settingKey] : item.hidden;
    const color = nativeButtonInfo ? (_a = settings.nativeExplorerButtonColors) == null ? void 0 : _a[nativeButtonInfo.colorKey] : item.color && item.color !== "#000000" ? item.color : void 0;
    const iconOverride = nativeButtonInfo ? (_b = settings.nativeExplorerButtonIcons) == null ? void 0 : _b[nativeButtonInfo.colorKey] : item.icon || void 0;
    group.addSetting((setting) => {
      var _a2;
      if (item.type === "external") {
        setting.settingEl.addEventListener("click", (e) => {
          const target = e.target;
          const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
          if (!isExtraButton) {
            e.stopPropagation();
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, true);
        setting.settingEl.addEventListener("click", (e) => {
          const target = e.target;
          const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
          if (!isExtraButton) {
            e.stopPropagation();
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, false);
      } else {
        setting.settingEl.addEventListener("click", (e) => {
          const target = e.target;
          const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
          const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
          const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
          if (!isChevronClick && !isExtraButton && !isNameEdit) {
            e.stopPropagation();
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, true);
        setting.settingEl.addEventListener("click", (e) => {
          const target = e.target;
          const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
          const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
          const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
          if (!isChevronClick && !isExtraButton && !isNameEdit) {
            e.stopPropagation();
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, false);
      }
      const nameEl = setting.nameEl;
      setCssProps(nameEl, { display: "flex", alignItems: "center", gap: "0.5rem", width: "100%" });
      let chevronContainer = null;
      let isExpanded = false;
      if (item.type === "native" || item.type === "custom") {
        chevronContainer = document.createElement("div");
        chevronContainer.className = "ui-tweaker-collapse-icon";
        setCssProps(chevronContainer, {
          cursor: "default",
          background: "transparent",
          padding: "0",
          margin: "0",
          display: "inline-flex",
          alignItems: "center",
          justifyContent: "center"
        });
        nameEl.insertBefore(chevronContainer, nameEl.firstChild);
        isExpanded = (_a2 = this.expandedStates.get(item.id)) != null ? _a2 : false;
        (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
        chevronContainer.addEventListener("click", (e) => {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          isExpanded = !isExpanded;
          this.expandedStates.set(item.id, isExpanded);
          (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
          otherSettings.forEach((settingEl) => {
            setCssProps(settingEl, { display: isExpanded ? "" : "none" });
          });
        });
      }
      const nameContainer = nameEl.createDiv({ cls: "ui-tweaker-editable-name" });
      setCssProps(nameContainer, { display: "flex", alignItems: "center", gap: "0.5rem" });
      const createNameDisplay = (name) => {
        nameContainer.empty();
        const display = nameContainer.createSpan({
          text: name === displayName ? name : `${name} (${displayName})`,
          cls: "ui-tweaker-name-display"
        });
        if (item.type === "custom") {
          const iconContainer = nameContainer.createDiv({ cls: "ui-tweaker-edit-icon" });
          setCssProps(iconContainer, { opacity: "0.6" });
          (0, import_obsidian9.setIcon)(iconContainer, "lucide-pencil-line");
          const startEdit = () => {
            const currentName = item.name;
            nameContainer.empty();
            const nameInput = nameContainer.createEl("input", {
              type: "text",
              value: currentName
            });
            nameInput.addClass("mod-text-input");
            nameInput.focus();
            nameInput.select();
            const saveName = () => {
              var _a3;
              nameInput.removeEventListener("blur", saveName);
              let newName = nameInput.value.trim();
              if (!newName) {
                newName = currentName;
              }
              item.name = newName;
              if (pair) {
                pair.name = newName;
              }
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.updateButtonNames();
              void (async () => {
                await this.saveSettings();
                this.render(container);
              })();
            };
            nameInput.addEventListener("keydown", (e) => {
              if (e.key === "Enter") {
                e.preventDefault();
                saveName();
              } else if (e.key === "Escape") {
                e.preventDefault();
                createNameDisplay(currentName);
              }
            });
            nameInput.addEventListener("blur", saveName);
          };
          display.addEventListener("click", startEdit);
          iconContainer.addEventListener("click", startEdit);
          iconContainer.addEventListener("mouseenter", () => {
            setCssProps(iconContainer, { opacity: "1" });
          });
          iconContainer.addEventListener("mouseleave", () => {
            setCssProps(iconContainer, { opacity: "0.6" });
          });
        }
      };
      createNameDisplay(item.name);
      setting.setDesc("").addExtraButton((button) => {
        if (item.type === "custom" && pair) {
          const iconEl = button.extraSettingsEl;
          (0, import_obsidian9.setIcon)(iconEl, pair.icon);
          iconEl.setAttribute("data-explorer-command-id", pair.id);
          if (pair.color && pair.color !== "#000000") {
            setCssProps(iconEl, { color: pair.color });
          } else {
            iconEl.style.removeProperty("color");
          }
          button.setTooltip("Change icon");
          button.onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              void (async () => {
                var _a3;
                if (iconId && iconId !== pair.icon) {
                  pair.icon = iconId;
                  item.icon = iconId;
                  await this.saveSettings();
                  (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
                  this.render(container);
                }
              })();
            });
            modal.open();
          });
        } else if (item.type === "native" && iconOverride) {
          const iconEl = button.extraSettingsEl;
          (0, import_obsidian9.setIcon)(iconEl, iconOverride);
          button.setTooltip("Change icon");
          button.onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              void (async () => {
                var _a3;
                if (!nativeButtonInfo) return;
                if (!settings.nativeExplorerButtonIcons) {
                  settings.nativeExplorerButtonIcons = {};
                }
                if (iconId) {
                  settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = iconId;
                } else {
                  settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = void 0;
                }
                await this.saveSettings();
                (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.applyNativeIconOverrides();
                this.render(container);
              })();
            });
            modal.open();
          });
        } else {
          setCssProps(button.extraSettingsEl, { display: "none" });
        }
        button.extraSettingsEl.addEventListener("mouseenter", (e) => e.stopPropagation());
        button.extraSettingsEl.addEventListener("mouseleave", (e) => e.stopPropagation());
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-up");
        if (index > 0) {
          button.setTooltip("Move up");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a3;
              arrayMoveMutable3(settings.explorerButtonItems, index, index - 1);
              await this.saveSettings();
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at top");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-down");
        if (index < settings.explorerButtonItems.length - 1) {
          button.setTooltip("Move down");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a3;
              arrayMoveMutable3(settings.explorerButtonItems, index, index + 1);
              await this.saveSettings();
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at bottom");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      });
      if (item.type === "custom") {
        setting.addExtraButton((button) => {
          button.setIcon("trash");
          button.setTooltip("Delete");
          button.extraSettingsEl.addClass("mod-warning");
          setCssProps(button.extraSettingsEl, { color: "var(--text-error)" });
          button.onClick(() => {
            void (async () => {
              var _a3;
              const itemIdx = settings.explorerButtonItems.indexOf(item);
              if (itemIdx > -1) {
                settings.explorerButtonItems.splice(itemIdx, 1);
              }
              if (pair) {
                const cmdIdx = settings.explorerCommands.indexOf(pair);
                if (cmdIdx > -1) {
                  settings.explorerCommands.splice(cmdIdx, 1);
                }
              }
              await this.saveSettings();
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
              this.render(container);
            })();
          });
          button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
        });
      }
      if (item.type === "native" && nativeButtonInfo || item.type === "external") {
        setting.addExtraButton((button) => {
          const iconEl = button.extraSettingsEl;
          (0, import_obsidian9.setIcon)(iconEl, isHidden ? "eye-off" : "eye");
          button.setTooltip(isHidden ? "Show button" : "Hide button");
          button.onClick(() => {
            void (async () => {
              var _a3;
              if (item.type === "native" && nativeButtonInfo) {
                settings[nativeButtonInfo.settingKey] = !settings[nativeButtonInfo.settingKey];
                item.hidden = settings[nativeButtonInfo.settingKey];
              } else if (item.type === "external") {
                item.hidden = !item.hidden;
              }
              await this.saveSettings();
              const newIsHidden = item.hidden;
              (0, import_obsidian9.setIcon)(iconEl, newIsHidden ? "eye-off" : "eye");
              button.setTooltip(newIsHidden ? "Show button" : "Hide button");
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
            })();
          });
          button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
        });
      }
    });
    if (item.type === "native" || item.type === "custom") {
      if (item.type === "native" && nativeButtonInfo) {
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          const hasColor = color !== void 0;
          setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
            const currentColor = color != null ? color : "#000000";
            colorPicker.setValue(currentColor);
            const controlEl = setting.controlEl;
            controlEl.addEventListener("click", (e) => e.stopPropagation());
            setTimeout(() => {
              const colorInput = controlEl.querySelector('input[type="color"]');
              if (colorInput) {
                colorInput.addEventListener("click", (e) => e.stopPropagation());
              }
            }, 0);
            if (hasColor) {
              setTimeout(() => {
                const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
                const resetButton = controlEl.createEl("button", {
                  cls: "clickable-icon ui-tweaker-color-reset",
                  attr: { "aria-label": "Reset to default color" }
                });
                (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                setCssProps(resetButton, { marginRight: "0.5rem" });
                resetButton.addEventListener("click", (e) => {
                  e.stopPropagation();
                  e.stopImmediatePropagation();
                  e.preventDefault();
                  void (async () => {
                    var _a2;
                    if (!settings.nativeExplorerButtonColors) {
                      settings.nativeExplorerButtonColors = {};
                    }
                    settings.nativeExplorerButtonColors[nativeButtonInfo.colorKey] = void 0;
                    await this.saveSettings();
                    (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                    this.render(container);
                  })();
                });
                if (colorPickerEl) {
                  controlEl.insertBefore(resetButton, colorPickerEl);
                }
              }, 0);
            }
            colorPicker.onChange((value) => {
              void (async () => {
                var _a2;
                if (!settings.nativeExplorerButtonColors) {
                  settings.nativeExplorerButtonColors = {};
                }
                const newColor = value === "#000000" ? void 0 : value;
                settings.nativeExplorerButtonColors[nativeButtonInfo.colorKey] = newColor;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                const existingReset = controlEl.querySelector(".ui-tweaker-color-reset");
                if (newColor && !existingReset) {
                  const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
                  const resetButton = controlEl.createEl("button", {
                    cls: "clickable-icon ui-tweaker-color-reset",
                    attr: { "aria-label": "Reset to default color" }
                  });
                  (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                  setCssProps(resetButton, { marginRight: "0.5rem" });
                  resetButton.addEventListener("click", (e) => {
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    e.preventDefault();
                    void (async () => {
                      var _a3;
                      if (!settings.nativeExplorerButtonColors) {
                        settings.nativeExplorerButtonColors = {};
                      }
                      settings.nativeExplorerButtonColors[nativeButtonInfo.colorKey] = void 0;
                      await this.saveSettings();
                      (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.applyNativeIconOverrides();
                      this.render(container);
                    })();
                  });
                  if (colorPickerEl) {
                    controlEl.insertBefore(resetButton, colorPickerEl);
                  }
                } else if (!newColor && existingReset) {
                  existingReset.remove();
                }
              })();
            });
          });
        });
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          const hasIconOverride = iconOverride !== void 0;
          setting.setName("Icon override").setDesc("Override the default icon for this button").addButton((button) => {
            const currentIcon = iconOverride || "Default";
            button.setButtonText(currentIcon === "Default" ? "Set icon..." : currentIcon).onClick(() => {
              const modal = new IconPickerModal(this.app, (iconId) => {
                void (async () => {
                  var _a2;
                  if (!settings.nativeExplorerButtonIcons) {
                    settings.nativeExplorerButtonIcons = {};
                  }
                  if (iconId) {
                    settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = iconId;
                  } else {
                    settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = void 0;
                  }
                  await this.saveSettings();
                  (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                  this.render(container);
                })();
              });
              modal.open();
            });
            button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
            if (hasIconOverride) {
              setTimeout(() => {
                const controlEl = setting.controlEl;
                const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
                const resetButton = controlEl.createEl("button", {
                  cls: "clickable-icon ui-tweaker-icon-override-reset",
                  attr: { "aria-label": "Reset icon override" }
                });
                (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                setCssProps(resetButton, { marginRight: "0.5rem" });
                resetButton.addEventListener("click", (e) => {
                  e.stopPropagation();
                  e.stopImmediatePropagation();
                  e.preventDefault();
                  void (async () => {
                    var _a2;
                    if (!settings.nativeExplorerButtonIcons) {
                      settings.nativeExplorerButtonIcons = {};
                    }
                    settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = void 0;
                    await this.saveSettings();
                    (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                    this.render(container);
                  })();
                });
                if (buttonEl) {
                  controlEl.insertBefore(resetButton, buttonEl);
                } else {
                  controlEl.insertBefore(resetButton, controlEl.firstChild);
                }
              }, 0);
            }
          });
        });
      } else if (item.type === "custom" && pair) {
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          setting.setName("Device mode").setDesc("Choose which devices this button appears on").addDropdown((dropdown) => {
            const appId = this.app.appId || "this-device";
            dropdown.addOption("any", "All devices").addOption("desktop", "Desktop only").addOption("mobile", "Mobile only").addOption(appId, "This device").setValue(pair.mode || "any").onChange((value) => {
              void (async () => {
                var _a2;
                pair.mode = value;
                item.mode = value;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            dropdown.selectEl.addEventListener("click", (e) => e.stopPropagation());
          });
        });
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          const hasColor = pair.color !== void 0;
          setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
            var _a2;
            const currentColor = (_a2 = pair.color) != null ? _a2 : "#000000";
            colorPicker.setValue(currentColor);
            const controlEl = setting.controlEl;
            controlEl.addEventListener("click", (e) => e.stopPropagation());
            setTimeout(() => {
              const colorInput = controlEl.querySelector('input[type="color"]');
              if (colorInput) {
                colorInput.addEventListener("click", (e) => e.stopPropagation());
              }
            }, 0);
            if (hasColor) {
              setTimeout(() => {
                const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
                const resetButton = controlEl.createEl("button", {
                  cls: "clickable-icon ui-tweaker-color-reset",
                  attr: { "aria-label": "Reset to default color" }
                });
                (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                setCssProps(resetButton, { marginRight: "0.5rem" });
                resetButton.addEventListener("click", (e) => {
                  e.stopPropagation();
                  e.stopImmediatePropagation();
                  e.preventDefault();
                  void (async () => {
                    var _a3;
                    pair.color = void 0;
                    item.color = void 0;
                    await this.saveSettings();
                    (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
                    this.render(container);
                  })();
                });
                if (colorPickerEl) {
                  controlEl.insertBefore(resetButton, colorPickerEl);
                }
              }, 0);
            }
            colorPicker.onChange((value) => {
              const newColor = value === "#000000" ? void 0 : value;
              pair.color = newColor;
              item.color = newColor;
              const iconButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
              if (iconButton) {
                if (newColor && newColor !== "#000000") {
                  setCssProps(iconButton, { color: newColor });
                } else {
                  iconButton.style.removeProperty("color");
                }
              }
              const controlEl2 = setting.controlEl;
              const existingReset = controlEl2.querySelector(".ui-tweaker-color-reset");
              if (newColor && !existingReset) {
                const colorPickerEl = controlEl2.querySelector(".color-picker") || controlEl2.lastElementChild;
                const resetButton = controlEl2.createEl("button", {
                  cls: "clickable-icon ui-tweaker-color-reset",
                  attr: { "aria-label": "Reset to default color" }
                });
                (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                setCssProps(resetButton, { marginRight: "0.5rem" });
                resetButton.addEventListener("click", (e) => {
                  e.stopPropagation();
                  e.stopImmediatePropagation();
                  e.preventDefault();
                  void (async () => {
                    var _a3;
                    pair.color = void 0;
                    item.color = void 0;
                    await this.saveSettings();
                    (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
                    this.render(container);
                  })();
                });
                if (colorPickerEl) {
                  controlEl2.insertBefore(resetButton, colorPickerEl);
                }
              } else if (!newColor && existingReset) {
                existingReset.remove();
              }
              void (async () => {
                var _a3;
                await this.saveSettings();
                (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
              })();
            });
          });
        });
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          setting.setName("Toggle icon").setDesc("Icon to show when command is toggled on (leave empty to disable toggle). Commands with check callback work automatically. See readme for plugin developer compatibility notes.").setTooltip("For plugin developers: Commands with checkCallback work automatically. See https://github.com/davidvkimball/obsidian-ui-tweaker#toggle-icon-feature-compatibility for details.").addButton((button) => {
            const currentToggleIcon = pair.toggleIcon || "None";
            button.setButtonText(currentToggleIcon === "None" ? "Set toggle icon..." : currentToggleIcon).onClick(() => {
              const modal = new IconPickerModal(this.app, (iconId) => {
                void (async () => {
                  var _a2;
                  if (iconId) {
                    pair.toggleIcon = iconId;
                    item.toggleIcon = iconId;
                  } else {
                    pair.toggleIcon = void 0;
                    item.toggleIcon = void 0;
                  }
                  await this.saveSettings();
                  (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                  this.render(container);
                })();
              });
              modal.open();
            });
            button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
          });
        });
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          setting.setName("Use active class instead of icon swap").setDesc("When toggled on, add is-active class instead of swapping icon (explorer only)").addToggle((toggle) => {
            var _a2;
            toggle.setValue((_a2 = pair.useActiveClass) != null ? _a2 : false);
            toggle.onChange((value) => {
              void (async () => {
                var _a3;
                pair.useActiveClass = value;
                item.useActiveClass = value;
                await this.saveSettings();
                (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
                this.render(container);
              })();
            });
            toggle.toggleEl.addEventListener("click", (e) => e.stopPropagation());
          });
        });
      }
    }
    setTimeout(() => {
      var _a2;
      const savedExpanded = (_a2 = this.expandedStates.get(item.id)) != null ? _a2 : false;
      otherSettings.forEach((settingEl) => {
        setCssProps(settingEl, { display: savedExpanded ? "" : "none" });
      });
    }, 0);
  }
  renderCommandItem(container, pair, index) {
    const settings = this.getSettings();
    const group = createSettingsGroup(container, void 0, "ui-tweaker");
    const otherSettings = [];
    const displayName = pair.displayName || pair.name;
    group.addSetting((setting) => {
      var _a;
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, true);
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, false);
      const nameEl = setting.nameEl;
      setCssProps(nameEl, { display: "flex", alignItems: "center", gap: "0.5rem", width: "100%" });
      const chevronContainer = document.createElement("div");
      chevronContainer.className = "ui-tweaker-collapse-icon";
      setCssProps(chevronContainer, {
        cursor: "default",
        background: "transparent",
        padding: "0",
        margin: "0",
        display: "inline-flex",
        alignItems: "center",
        justifyContent: "center"
      });
      nameEl.insertBefore(chevronContainer, nameEl.firstChild);
      let isExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
      chevronContainer.addEventListener("click", (e) => {
        e.stopPropagation();
        e.stopImmediatePropagation();
        e.preventDefault();
        isExpanded = !isExpanded;
        this.expandedStates.set(pair.id, isExpanded);
        (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
        otherSettings.forEach((settingEl) => {
          setCssProps(settingEl, { display: isExpanded ? "" : "none" });
        });
      });
      const nameContainer = nameEl.createDiv({ cls: "ui-tweaker-editable-name" });
      setCssProps(nameContainer, { display: "flex", alignItems: "center", gap: "0.5rem" });
      const createNameDisplay = (name) => {
        nameContainer.empty();
        const display = nameContainer.createSpan({
          text: name === displayName ? name : `${name} (${displayName})`,
          cls: "ui-tweaker-name-display"
        });
        const iconContainer = nameContainer.createDiv({ cls: "ui-tweaker-edit-icon" });
        setCssProps(iconContainer, { opacity: "0.6" });
        (0, import_obsidian9.setIcon)(iconContainer, "lucide-pencil-line");
        const startEdit = () => {
          const currentName = pair.name;
          nameContainer.empty();
          const nameInput = nameContainer.createEl("input", {
            type: "text",
            value: currentName
          });
          nameInput.addClass("mod-text-input");
          nameInput.focus();
          nameInput.select();
          const saveName = () => {
            var _a2;
            nameInput.removeEventListener("blur", saveName);
            let newName = nameInput.value.trim();
            if (!newName) {
              newName = currentName;
            }
            pair.name = newName;
            (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.updateButtonNames();
            void (async () => {
              await this.saveSettings();
              this.render(container);
            })();
          };
          nameInput.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
              e.preventDefault();
              saveName();
            } else if (e.key === "Escape") {
              e.preventDefault();
              createNameDisplay(currentName);
            }
          });
          nameInput.addEventListener("blur", saveName);
        };
        display.addEventListener("click", startEdit);
        iconContainer.addEventListener("click", startEdit);
        iconContainer.addEventListener("mouseenter", () => {
          setCssProps(iconContainer, { opacity: "1" });
        });
        iconContainer.addEventListener("mouseleave", () => {
          setCssProps(iconContainer, { opacity: "0.6" });
        });
      };
      createNameDisplay(pair.name);
      setting.setDesc("").addExtraButton((button) => {
        const iconEl = button.extraSettingsEl;
        (0, import_obsidian9.setIcon)(iconEl, pair.icon);
        iconEl.setAttribute("data-explorer-command-id", pair.id);
        if (pair.color && pair.color !== "#000000") {
          setCssProps(iconEl, { color: pair.color });
        } else {
          iconEl.style.removeProperty("color");
        }
        button.setTooltip("Change icon");
        button.onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a2;
              if (iconId && iconId !== pair.icon) {
                pair.icon = iconId;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              }
            })();
          });
          modal.open();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-up");
        if (index > 0) {
          button.setTooltip("Move up");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable3(settings.explorerCommands, index, index - 1);
              await this.saveSettings();
              (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at top");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-down");
        if (index < settings.explorerCommands.length - 1) {
          button.setTooltip("Move down");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable3(settings.explorerCommands, index, index + 1);
              await this.saveSettings();
              (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at bottom");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("trash");
        button.setTooltip("Delete");
        button.extraSettingsEl.addClass("mod-warning");
        setCssProps(button.extraSettingsEl, { color: "var(--text-error)" });
        button.onClick(() => {
          void (async () => {
            var _a2;
            const idx = settings.explorerCommands.indexOf(pair);
            if (idx > -1) {
              settings.explorerCommands.splice(idx, 1);
              await this.saveSettings();
              (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
              this.render(container);
            }
          })();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Device mode").setDesc("Choose which devices this button appears on").addDropdown((dropdown) => {
        const appId = this.app.appId || "this-device";
        dropdown.addOption("any", "All devices").addOption("desktop", "Desktop only").addOption("mobile", "Mobile only").addOption(appId, "This device").setValue(pair.mode || "any").onChange((value) => {
          void (async () => {
            var _a;
            pair.mode = value;
            await this.saveSettings();
            (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
            this.render(container);
          })();
        });
        dropdown.selectEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasColor = pair.color !== void 0;
      setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
        var _a;
        const currentColor = (_a = pair.color) != null ? _a : "#000000";
        colorPicker.setValue(currentColor);
        const controlEl = setting.controlEl;
        controlEl.addEventListener("click", (e) => e.stopPropagation());
        setTimeout(() => {
          const colorInput = controlEl.querySelector('input[type="color"]');
          if (colorInput) {
            colorInput.addEventListener("click", (e) => e.stopPropagation());
          }
        }, 0);
        if (hasColor) {
          setTimeout(() => {
            const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-color-reset",
              attr: { "aria-label": "Reset to default color" }
            });
            (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              void (async () => {
                var _a2;
                pair.color = void 0;
                const iconButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
                if (iconButton) {
                  iconButton.style.removeProperty("color");
                }
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            if (colorPickerEl) {
              controlEl.insertBefore(resetButton, colorPickerEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
        colorPicker.onChange((value) => {
          const newColor = value === "#000000" ? void 0 : value;
          pair.color = newColor;
          const iconButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
          if (iconButton) {
            if (newColor && newColor !== "#000000") {
              setCssProps(iconButton, { color: newColor });
            } else {
              iconButton.style.removeProperty("color");
            }
          }
          const controlEl2 = setting.controlEl;
          const existingReset = controlEl2.querySelector(".ui-tweaker-color-reset");
          if (newColor && !existingReset) {
            const colorPickerEl = controlEl2.querySelector(".color-picker") || controlEl2.lastElementChild;
            const resetButton = controlEl2.createEl("button", {
              cls: "clickable-icon ui-tweaker-color-reset",
              attr: { "aria-label": "Reset to default color" }
            });
            (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              void (async () => {
                var _a2;
                pair.color = void 0;
                const iconButton2 = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
                if (iconButton2) {
                  iconButton2.style.removeProperty("color");
                }
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            if (colorPickerEl) {
              controlEl2.insertBefore(resetButton, colorPickerEl);
            } else {
              controlEl2.insertBefore(resetButton, controlEl2.firstChild);
            }
          } else if (!newColor && existingReset) {
            existingReset.remove();
          }
          void (async () => {
            var _a2;
            await this.saveSettings();
            (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
          })();
        });
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasToggleIcon = pair.toggleIcon !== void 0;
      setting.setName("Toggle icon").setDesc("Icon to show when command is toggled on (leave empty to disable toggle). Commands with check callback work automatically. See readme for plugin developer compatibility notes.").setTooltip("For plugin developers: Commands with checkCallback work automatically. See https://github.com/davidvkimball/obsidian-ui-tweaker#toggle-icon-feature-compatibility for details.").addButton((button) => {
        const currentToggleIcon = pair.toggleIcon || "None";
        button.setButtonText(currentToggleIcon === "None" ? "Set toggle icon..." : currentToggleIcon).onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a;
              if (iconId) {
                pair.toggleIcon = iconId;
              } else {
                pair.toggleIcon = void 0;
              }
              await this.saveSettings();
              (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
              this.render(container);
            })();
          });
          modal.open();
        });
        button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
        if (hasToggleIcon) {
          setTimeout(() => {
            const controlEl = setting.controlEl;
            const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-toggle-icon-reset",
              attr: { "aria-label": "Reset toggle icon" }
            });
            (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
              const scrollPos = scrollContainer.scrollTop;
              void (async () => {
                var _a;
                pair.toggleIcon = void 0;
                await this.saveSettings();
                (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
                this.render(container);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 0);
                });
              })();
            });
            if (buttonEl) {
              controlEl.insertBefore(resetButton, buttonEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Use active class instead of icon swap").setDesc("When toggled on, add is-active class instead of swapping icon (explorer only)").addToggle((toggle) => {
        var _a;
        toggle.setValue((_a = pair.useActiveClass) != null ? _a : false);
        toggle.onChange((value) => {
          void (async () => {
            var _a2;
            pair.useActiveClass = value;
            await this.saveSettings();
            (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
            this.render(container);
          })();
        });
        toggle.toggleEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    setTimeout(() => {
      var _a;
      const savedExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      otherSettings.forEach((settingEl) => {
        setCssProps(settingEl, { display: savedExpanded ? "" : "none" });
      });
    }, 0);
  }
};

// src/ui/tabs/MobileTab.ts
var MobileTab = class extends TabRenderer {
  render(container) {
    container.empty();
    const mobileGroup = createSettingsGroup(container, "Mobile", "ui-tweaker");
    this.addToggleSetting(mobileGroup, 'Hide "Mobile chevrons" icon', 'Hide "Mobile chevrons" icon (long-press flair) in mobile navbar.', "mobileChevronsIcon");
    this.addToggleSetting(mobileGroup, 'Hide "Navigate back" button', 'Hide "Navigate back" button in mobile navbar.', "navigateBackButton");
    this.addToggleSetting(mobileGroup, 'Hide "Navigate forward" button', 'Hide "Navigate forward" button in mobile navbar.', "navigateForwardButton");
    this.addToggleSetting(mobileGroup, 'Hide "Quick switcher" button', 'Hide "Quick switcher" button in mobile navbar.', "quickSwitcherButton");
    this.addToggleSetting(mobileGroup, 'Hide "New tab" button', 'Hide "New tab" button in mobile navbar.', "mobileNewTabButton");
    this.addToggleSetting(mobileGroup, 'Hide "Open tabs" button', 'Hide "Open tabs" button in mobile navbar.', "openTabButton");
    this.addToggleSetting(mobileGroup, 'Hide "Ribbon menu" button', 'Hide "Ribbon menu" button in mobile navbar.', "ribbonMenuButton");
    this.addToggleSetting(mobileGroup, "Swap mobile new tab icon", "Replace the new tab plus icon with a home button icon in mobile navbar.", "swapMobileNewTabIcon");
    this.addToggleSetting(mobileGroup, "Hide title", "Hide the title in mobile view headers.", "hideMobileTitle");
    this.addToggleSetting(mobileGroup, "Hide sync icon", "Hide sync status icons in mobile interface.", "hideMobileSyncIcon");
    this.renderSyncButtonReplacement(container, mobileGroup);
    const mobileNavGroup = createSettingsGroup(container, "Mobile navigation menu", "ui-tweaker");
    this.addPositionSetting(mobileNavGroup, '"Navigate back" button position', 'Select the position for the "Navigate back" button (default 1).', "navigateButtonPosition");
    this.addPositionSetting(mobileNavGroup, '"Navigate forward" button position', 'Select the position for the "Navigate forward" button (default 2).', "navigationButtonPosition");
    this.addPositionSetting(mobileNavGroup, '"Quick switcher" button position', 'Select the position for the "Quick switcher" button (default 3).', "quickSwitcherPosition");
    this.addPositionSetting(mobileNavGroup, '"New tab" button position', 'Select the position for the "New tab" button (default 4).', "newTabPosition");
    this.addPositionSetting(mobileNavGroup, '"Open tabs" button position', 'Select the position for the "Open tabs" button (default 5).', "openTabsPosition");
    this.addPositionSetting(mobileNavGroup, '"Ribbon menu" button position', 'Select the position for the "Ribbon menu" button (default 6).', "ribbonMenuPosition");
  }
  addToggleSetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addToggle(
        (toggle) => toggle.setValue(Boolean(this.getSettings()[key])).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        })
      );
    });
  }
  addPositionSetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addDropdown((dropdown) => {
        for (let i = 1; i <= 6; i++) {
          dropdown.addOption(String(i), String(i));
        }
        const currentValue = this.getSettings()[key];
        const stringValue = typeof currentValue === "string" ? currentValue : "1";
        dropdown.setValue(stringValue).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        });
      });
    });
  }
  renderSyncButtonReplacement(container, group) {
    const settings = this.getSettings();
    if (!settings.syncButtonReplacement) {
      settings.syncButtonReplacement = {
        enabled: false,
        commandId: "ui-tweaker:open-settings",
        iconId: "wrench"
      };
    }
    group.addSetting((setting) => {
      setting.setName("Replace sync button with custom action").setDesc("Replace the sync button in the mobile sidebar with a custom icon and command. This will hide the original sync button and show your custom button instead.").addToggle(
        (toggle) => toggle.setValue(settings.syncButtonReplacement.enabled).onChange((value) => {
          if (!settings.syncButtonReplacement) {
            settings.syncButtonReplacement = {
              enabled: true,
              commandId: "ui-tweaker:open-settings",
              iconId: "wrench"
            };
          }
          settings.syncButtonReplacement.enabled = value;
          void (async () => {
            await this.saveSettings();
            setTimeout(() => {
              const scrollPos = container.scrollTop;
              this.render(container);
              requestAnimationFrame(() => {
                container.scrollTop = scrollPos;
              });
            }, 50);
          })();
        })
      );
    });
    if (settings.syncButtonReplacement.enabled) {
      const getCommandName = (commandId) => {
        if (!commandId) return "Select command...";
        try {
          const commandRegistry = this.app.commands;
          if (commandRegistry && typeof commandRegistry.listCommands === "function") {
            const commands = commandRegistry.listCommands();
            const command = commands.find((cmd) => cmd && cmd.id === commandId);
            if (command == null ? void 0 : command.name) {
              return command.name;
            }
          }
        } catch (e) {
        }
        return "Select command...";
      };
      const commandName = getCommandName(settings.syncButtonReplacement.commandId);
      group.addSetting((setting) => {
        setting.setName("Command").setDesc("Select the command to execute when the button is clicked").addButton(
          (button) => button.setButtonText(commandName || "Select command...").onClick(() => {
            const modal = new CommandPickerModal(this.app, (commandId) => {
              if (!settings.syncButtonReplacement) {
                settings.syncButtonReplacement = {
                  enabled: true,
                  commandId: "ui-tweaker:open-settings",
                  iconId: "wrench"
                };
              }
              settings.syncButtonReplacement.commandId = commandId;
              void (async () => {
                await this.saveSettings();
                setTimeout(() => {
                  const scrollPos = container.scrollTop;
                  this.render(container);
                  requestAnimationFrame(() => {
                    container.scrollTop = scrollPos;
                  });
                }, 50);
              })();
            });
            modal.open();
          })
        );
      });
      const getIconName = (iconId) => {
        if (!iconId) return "";
        return iconId.replace(/^lucide-/, "").split("-").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
      };
      const iconName = getIconName(settings.syncButtonReplacement.iconId);
      group.addSetting((setting) => {
        setting.setName("Icon").setDesc("Select the icon to display on the button").addButton(
          (button) => button.setButtonText(iconName || "Select icon...").onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              if (!settings.syncButtonReplacement) {
                settings.syncButtonReplacement = {
                  enabled: true,
                  commandId: "ui-tweaker:open-settings",
                  iconId: "wrench"
                };
              }
              settings.syncButtonReplacement.iconId = iconId;
              void (async () => {
                await this.saveSettings();
                setTimeout(() => {
                  const scrollPos = container.scrollTop;
                  this.render(container);
                  requestAnimationFrame(() => {
                    container.scrollTop = scrollPos;
                  });
                }, 50);
              })();
            });
            modal.open();
          })
        );
      });
    }
  }
};

// src/ui/SettingsTab.ts
var UITweakerSettingTab = class extends import_obsidian10.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.icon = "lucide-wrench";
    this.id = "ui-tweaker";
    this.plugin = plugin;
  }
  display() {
    this.render();
  }
  render() {
    const { containerEl } = this;
    containerEl.empty();
    if (import_obsidian10.Platform.isMobile || document.body.classList.contains("is-mobile")) {
      const mobileTab = new MobileTab(this.app, this.plugin);
      void mobileTab.render(containerEl);
      return;
    }
    containerEl.addClass("ui-tweaker-settings");
    const tabContainer = containerEl.createDiv("tab-container");
    const tabNav = tabContainer.createDiv("tab-nav");
    const tabContent = tabContainer.createDiv("tab-content");
    const tabs = [
      {
        id: "hider",
        name: "Hider",
        renderer: new HiderTab(this.app, this.plugin)
      },
      {
        id: "status-bar",
        name: "Status bar",
        renderer: new StatusBarTab(this.app, this.plugin)
      },
      {
        id: "tab-bar",
        name: "Tab bar",
        renderer: new TabBarTab(this.app, this.plugin)
      },
      {
        id: "explorer",
        name: "Explorer",
        renderer: new ExplorerTab(this.app, this.plugin)
      },
      {
        id: "mobile",
        name: "Mobile",
        renderer: new MobileTab(this.app, this.plugin)
      }
    ];
    tabs.forEach((tab, index) => {
      const button = tabNav.createEl("button", {
        text: tab.name,
        cls: `tab-button ${index === 0 ? "active" : ""}`
      });
      button.addEventListener("click", () => {
        tabNav.querySelectorAll(".tab-button").forEach((btn) => btn.classList.remove("active"));
        button.classList.add("active");
        tabContent.empty();
        void tab.renderer.render(tabContent);
      });
    });
    void tabs[0].renderer.render(tabContent);
  }
};

// src/manager/TabBarManager.ts
var import_obsidian12 = require("obsidian");

// src/utils/commandUtils.ts
var import_obsidian11 = require("obsidian");

// src/utils/command-logic.ts
function parseFileAndViewTypes(types) {
  const result = { fileTypes: [], viewTypes: [] };
  if (!types || !types.trim()) return result;
  const parts = types.split(",").map((p) => p.trim()).filter((p) => p);
  for (const part of parts) {
    const viewTypeMatch = part.match(/^\{\{(\w+)\}\}$/);
    if (viewTypeMatch) {
      result.viewTypes.push(viewTypeMatch[1].toLowerCase());
    } else {
      const ext = part.replace(/^\./, "").toLowerCase();
      if (ext) {
        result.fileTypes.push(ext);
      }
    }
  }
  return result;
}
var CommandToggleTracker = class {
  constructor() {
    this.toggleStates = /* @__PURE__ */ new Map();
    this.previousStates = /* @__PURE__ */ new Map();
    this.executionCounts = /* @__PURE__ */ new Map();
  }
  recordExecution(id) {
    const currentCount = this.executionCounts.get(id) || 0;
    this.executionCounts.set(id, currentCount + 1);
    this.toggleStates.set(id, (currentCount + 1) % 2 === 1);
  }
  getTrackedState(id) {
    var _a;
    return (_a = this.toggleStates.get(id)) != null ? _a : null;
  }
  getPreviousState(id) {
    var _a;
    return (_a = this.previousStates.get(id)) != null ? _a : null;
  }
  resetState(id) {
    this.toggleStates.delete(id);
    this.previousStates.delete(id);
    this.executionCounts.delete(id);
  }
  syncState(id, actualState) {
    const currentTrackedState = this.toggleStates.get(id);
    if (currentTrackedState !== void 0) {
      this.previousStates.set(id, currentTrackedState);
    }
    if (currentTrackedState !== actualState) {
      const currentCount = this.executionCounts.get(id) || 0;
      this.executionCounts.set(id, currentCount + 1);
      this.toggleStates.set(id, actualState);
      return true;
    }
    return false;
  }
  hasStateChanged(id, currentState) {
    const previousState = this.previousStates.get(id);
    return previousState !== void 0 && previousState !== currentState;
  }
};

// src/utils/commandUtils.ts
function isMarkdownView(leaf) {
  if (!(leaf == null ? void 0 : leaf.view)) return false;
  if (leaf.view instanceof import_obsidian11.MarkdownView) {
    const file = leaf.view.file;
    if (!file) return false;
    const ext = file.extension.toLowerCase();
    return ext === "md" || ext === "mdx";
  }
  return false;
}
function getFileExtension(leaf) {
  if (!(leaf == null ? void 0 : leaf.view)) return null;
  const view = leaf.view;
  const file = view.file;
  if (!file) return null;
  return file.extension.toLowerCase();
}
function getViewType(leaf) {
  if (!(leaf == null ? void 0 : leaf.view)) return null;
  const view = leaf.view;
  if (view.getViewType && typeof view.getViewType === "function") {
    return view.getViewType().toLowerCase();
  }
  if (leaf.view instanceof import_obsidian11.MarkdownView) {
    return "markdown";
  }
  const fileExt = getFileExtension(leaf);
  if (!fileExt) {
    return "empty";
  }
  return null;
}
function matchesFileTypeFilter(leaf, showOnFileTypes, hideOnFileTypes) {
  if (!(leaf == null ? void 0 : leaf.view)) return false;
  const showFilters = parseFileAndViewTypes(showOnFileTypes);
  const hideFilters = parseFileAndViewTypes(hideOnFileTypes);
  const fileExt = getFileExtension(leaf);
  const viewType = getViewType(leaf);
  if (hideFilters.fileTypes.length > 0 && fileExt && hideFilters.fileTypes.includes(fileExt)) {
    return false;
  }
  if (hideFilters.viewTypes.length > 0 && viewType && hideFilters.viewTypes.includes(viewType)) {
    return false;
  }
  if (showFilters.fileTypes.length > 0 || showFilters.viewTypes.length > 0) {
    const matchesFileType = fileExt ? showFilters.fileTypes.includes(fileExt) : false;
    const matchesViewType = viewType ? showFilters.viewTypes.includes(viewType) : false;
    return matchesFileType || matchesViewType;
  }
  return true;
}
function isModeActive(mode, plugin) {
  var _a;
  const app = plugin.app;
  const isMobile = (_a = app.isMobile) != null ? _a : false;
  const appId = app.appId;
  if (mode !== "any" && mode !== "desktop" && mode !== "mobile") {
    return mode === appId;
  }
  return mode === "any" || mode === "mobile" && isMobile || mode === "desktop" && !isMobile;
}
function getCommandFromId(id, plugin) {
  var _a, _b;
  const commands = plugin.app.commands;
  return (_b = (_a = commands == null ? void 0 : commands.commands) == null ? void 0 : _a[id]) != null ? _b : null;
}
var commandToggleTracker = new CommandToggleTracker();
function isCommandChecked(id, plugin) {
  var _a, _b, _c, _d, _e, _f;
  if (id === "theme:toggle-light-dark") {
    const isDark = document.body.classList.contains("theme-dark");
    commandToggleTracker.syncState(id, isDark);
    return isDark;
  }
  if (id === "editing-toolbar:hide-show-menu" || id === "hide-show-menu") {
    const plugins = plugin.app.plugins;
    const editingToolbarPlugin = (_a = plugins == null ? void 0 : plugins.plugins) == null ? void 0 : _a["editing-toolbar"];
    if (((_b = editingToolbarPlugin == null ? void 0 : editingToolbarPlugin.settings) == null ? void 0 : _b.cMenuVisibility) !== void 0) {
      const isVisible = editingToolbarPlugin.settings.cMenuVisibility;
      commandToggleTracker.syncState(id, isVisible);
      return isVisible;
    }
    return (_c = commandToggleTracker.getTrackedState(id)) != null ? _c : false;
  }
  const command = getCommandFromId(id, plugin);
  if (!command) {
    return (_d = commandToggleTracker.getTrackedState(id)) != null ? _d : false;
  }
  if (typeof command.checkCallback === "function") {
    try {
      const result = command.checkCallback(true);
      const isChecked = result === true;
      commandToggleTracker.syncState(id, isChecked);
      return isChecked;
    } catch (e) {
      return (_e = commandToggleTracker.getTrackedState(id)) != null ? _e : false;
    }
  }
  return (_f = commandToggleTracker.getTrackedState(id)) != null ? _f : false;
}
function recordCommandExecution(id) {
  commandToggleTracker.recordExecution(id);
}

// src/manager/TabBarManager.ts
var TabBarManager = class {
  constructor(plugin) {
    this.buttons = /* @__PURE__ */ new WeakMap();
    this.plugin = plugin;
    this.init();
  }
  get pairs() {
    return this.plugin.settings.tabBarCommands || [];
  }
  init() {
    this.plugin.register(() => {
      this.removeButtonsFromAllLeaves();
    });
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("layout-change", () => {
        this.addButtonsToAllLeaves();
      })
    );
    this.plugin.app.workspace.onLayoutReady(
      () => setTimeout(() => this.addButtonsToAllLeaves(), 100)
    );
  }
  addPageHeaderButton(leaf, pair) {
    const { id } = pair;
    const name = pair.name;
    const { view } = leaf;
    if (!(view instanceof import_obsidian12.ItemView)) {
      return;
    }
    const buttons = this.buttonsFor(leaf, true);
    if (!buttons) {
      return;
    }
    if (buttons.has(id)) {
      const existingButton = buttons.get(id);
      if (existingButton) {
        existingButton.setAttribute("aria-label", name);
        existingButton.setAttribute("title", name);
        if (pair.color && pair.color !== "#000000") {
          setCssProps(existingButton, { color: pair.color });
        } else {
          existingButton.style.removeProperty("color");
        }
        this.updateButtonToggleState(existingButton, pair);
        return;
      }
    }
    if (!matchesFileTypeFilter(leaf, pair.showOnFileTypes, pair.hideOnFileTypes)) {
      return;
    }
    const initialIcon = this.getIconForToggleState(pair);
    const buttonIcon = view.addAction(initialIcon, name, () => {
      this.plugin.app.workspace.setActiveLeaf(leaf, { focus: true });
      const commands = this.plugin.app.commands;
      if (commands == null ? void 0 : commands.executeCommandById) {
        void commands.executeCommandById(id);
        setTimeout(() => {
          this.updateButtonToggleState(buttonIcon, pair);
          this.updateAllButtonsForCommand(id);
        }, 100);
      }
    });
    buttons.set(id, buttonIcon);
    buttonIcon.addClasses(["ui-tweaker-tab-bar-button", id]);
    if (pair.color && pair.color !== "#000000") {
      setCssProps(buttonIcon, { color: pair.color });
    }
    this.updateButtonToggleState(buttonIcon, pair);
    buttonIcon.addEventListener("contextmenu", (event) => {
      event.stopImmediatePropagation();
      new import_obsidian12.Menu().addItem((item) => {
        item.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const modal = new IconPickerModal(this.plugin.app, (iconId) => {
            if (iconId && iconId !== pair.icon) {
              pair.icon = iconId;
              void this.plugin.saveSettings();
              this.reorder();
            }
          });
          modal.open();
        });
      }).addItem((item) => {
        item.setTitle("Delete").setIcon("lucide-trash").onClick(() => {
          void this.removeCommand(pair);
        });
        const dom = item.dom;
        if (dom) {
          dom.classList.add("mod-warning");
          const iconEl = dom.querySelector(".menu-item-icon svg");
          if (iconEl) {
            setCssProps(iconEl, { color: "var(--text-error)" });
          }
        }
      }).showAtMouseEvent(event);
    });
  }
  buttonsFor(leaf, create = false) {
    if (!(leaf.view instanceof import_obsidian12.ItemView)) return;
    if (create && !this.buttons.has(leaf.view))
      this.buttons.set(leaf.view, /* @__PURE__ */ new Map());
    return this.buttons.get(leaf.view);
  }
  addButtonsToAllLeaves(refresh = false) {
    requestAnimationFrame(() => {
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        this.addButtonsToLeaf(leaf, refresh);
      });
    });
  }
  removeButtonsFromAllLeaves() {
    requestAnimationFrame(
      () => this.plugin.app.workspace.iterateAllLeaves(
        (leaf) => this.removeButtonsFromLeaf(leaf)
      )
    );
  }
  addButtonsToLeaf(leaf, refresh = false) {
    var _a;
    if (!(leaf.view instanceof import_obsidian12.ItemView)) {
      return;
    }
    if (refresh) {
      this.removeButtonsFromLeaf(leaf);
    } else if ((_a = this.buttonsFor(leaf)) == null ? void 0 : _a.size) {
      return;
    }
    for (let i = this.pairs.length - 1; i >= 0; i--) {
      const pair = this.pairs[i];
      if (isModeActive(pair.mode, this.plugin)) {
        this.addPageHeaderButton(leaf, pair);
      }
    }
  }
  removeButtonsFromLeaf(leaf) {
    const buttons = this.buttonsFor(leaf);
    if (buttons) {
      for (const button of buttons.values()) button.detach();
      buttons == null ? void 0 : buttons.clear();
    }
  }
  reorder() {
    this.addButtonsToAllLeaves(true);
  }
  /**
   * Update button names/tooltips for all existing buttons
   */
  updateButtonNames() {
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (!(leaf.view instanceof import_obsidian12.ItemView)) return;
      const buttons = this.buttonsFor(leaf);
      if (!buttons) return;
      for (const [id, button] of buttons.entries()) {
        const pair = this.pairs.find((p) => p.id === id);
        if (pair) {
          button.setAttribute("aria-label", pair.name);
          button.setAttribute("title", pair.name);
          if (pair.color && pair.color !== "#000000") {
            setCssProps(button, { color: pair.color });
          } else {
            button.style.removeProperty("color");
          }
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  /**
   * Get icon for current toggle state
   */
  getIconForToggleState(pair) {
    if (!pair.toggleIcon) {
      return pair.icon;
    }
    const isChecked = isCommandChecked(pair.id, this.plugin);
    return isChecked ? pair.toggleIcon : pair.icon;
  }
  /**
   * Update button toggle state (icon swap only for tab bar)
   */
  updateButtonToggleState(button, pair) {
    if (!pair.toggleIcon) {
      (0, import_obsidian12.setIcon)(button, pair.icon);
      return;
    }
    const isChecked = isCommandChecked(pair.id, this.plugin);
    (0, import_obsidian12.setIcon)(button, isChecked ? pair.toggleIcon : pair.icon);
  }
  /**
   * Update all buttons for a specific command ID across all leaves
   */
  updateAllButtonsForCommand(commandId) {
    const pair = this.pairs.find((p) => p.id === commandId);
    if (!pair) return;
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (!(leaf.view instanceof import_obsidian12.ItemView)) return;
      const buttons = this.buttonsFor(leaf);
      if (!buttons) return;
      const button = buttons.get(commandId);
      if (button) {
        this.updateButtonToggleState(button, pair);
      }
    });
  }
  /**
   * Refresh toggle states for all buttons
   */
  refreshToggleStates() {
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (!(leaf.view instanceof import_obsidian12.ItemView)) return;
      const buttons = this.buttonsFor(leaf);
      if (!buttons) return;
      for (const [id, button] of buttons.entries()) {
        const pair = this.pairs.find((p) => p.id === id);
        if (pair && pair.toggleIcon) {
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  async addCommand(pair) {
    if (!this.plugin.settings.tabBarCommands) {
      this.plugin.settings.tabBarCommands = [];
    }
    this.plugin.settings.tabBarCommands.push(pair);
    this.addButtonsToAllLeaves(true);
    await this.plugin.saveSettings();
  }
  async removeCommand(pair) {
    if (!this.plugin.settings.tabBarCommands) return;
    const index = this.plugin.settings.tabBarCommands.indexOf(pair);
    if (index > -1) {
      this.plugin.settings.tabBarCommands.splice(index, 1);
    }
    this.addButtonsToAllLeaves(true);
    await this.plugin.saveSettings();
  }
  async updateCommand(oldPair, newPair) {
    if (!this.plugin.settings.tabBarCommands) return;
    const index = this.plugin.settings.tabBarCommands.indexOf(oldPair);
    if (index > -1) {
      this.plugin.settings.tabBarCommands[index] = newPair;
      this.addButtonsToAllLeaves(true);
      await this.plugin.saveSettings();
    }
  }
};

// src/manager/StatusBarManager.ts
var import_obsidian13 = require("obsidian");
var StatusBarManager = class {
  constructor(plugin) {
    this.customActions = /* @__PURE__ */ new Map();
    this.container = null;
    this.isReordering = false;
    this.plugin = plugin;
    this.init();
  }
  // Flag to prevent observer from triggering during reorder
  get items() {
    return this.plugin.settings.statusBarItems || [];
  }
  init() {
    this.plugin.app.workspace.onLayoutReady(() => {
      var _a, _b;
      this.container = (_b = (_a = this.plugin.app.statusBar) == null ? void 0 : _a.containerEl) != null ? _b : null;
      if (!this.container) {
        return;
      }
      if (!this.plugin.settings.statusBarItems) {
        this.plugin.settings.statusBarItems = [];
      }
      this.consolidateSettingsAndElements();
      this.reorder();
      let observerTimeout = null;
      this.observer = new MutationObserver(() => {
        if (this.isReordering) {
          return;
        }
        if (observerTimeout) {
          clearTimeout(observerTimeout);
        }
        observerTimeout = setTimeout(() => {
          if (!this.isReordering) {
            this.consolidateSettingsAndElements();
            this.reorder();
          }
        }, 200);
      });
      this.observer.observe(this.container, { childList: true, subtree: false });
      this.plugin.register(() => {
        this.cleanup();
      });
    });
  }
  /**
   * Remove all buttons created by this manager from the DOM
   */
  cleanup() {
    if (this.observer) {
      this.observer.disconnect();
    }
    this.customActions.forEach((action) => action.remove());
    this.customActions.clear();
    if (this.container) {
      const managedButtons = this.container.querySelectorAll('[data-ui-tweaker-managed="true"]');
      managedButtons.forEach((btn) => btn.remove());
      const hiddenItems = this.container.querySelectorAll(".ui-tweaker-status-bar-hidden");
      hiddenItems.forEach((item) => item.removeClass("ui-tweaker-status-bar-hidden"));
    }
  }
  /**
   * Check if a class is a dynamic state class that should be filtered out
   * Dynamic state classes change based on plugin state (e.g., obsidian-git statusbar states)
   */
  isDynamicStateClass(className) {
    const dynamicPatterns = [
      /-statusbar-(idle|pull|push|commit|message|status|add|conflict|paused|failed-init)$/,
      // Common state classes that shouldn't be part of an element's identity
      /^(is-active|is-loading|is-hidden|is-collapsed|is-selected|is-flashing|mod-active|mod-loading)$/,
      // obsidian-git specific dynamic classes
      /^obsidian-git-statusbar-/
    ];
    return dynamicPatterns.some((pattern) => pattern.test(className));
  }
  /**
   * Generate a canonical name from an element's classes
   * Filters out dynamic state classes and uses only stable plugin identifiers
   */
  generateCanonicalName(element, allClasses) {
    var _a;
    const ignoredClasses = ["mod-clickable", "status-bar-item", "ui-tweaker-status-bar-item", "ui-tweaker-status-bar-hidden"];
    const pluginClass = allClasses.find(
      (cls) => cls.includes("plugin-") || cls.includes("obsidian-git") || cls.includes("-git") || cls.startsWith("git-") && cls !== "git-changes-status-bar"
    );
    if (pluginClass) {
      if (pluginClass.includes("obsidian-git") || pluginClass.startsWith("git-")) {
        if (allClasses.some((cls) => cls.startsWith("obsidian-git-statusbar-"))) return "plugin-obsidian-git-status";
        if (allClasses.includes("git-changes-status-bar")) return "plugin-obsidian-git-changes";
        const textContent = (_a = element.textContent) == null ? void 0 : _a.trim();
        const looksLikeBranch = textContent && textContent.length > 0 && /^[a-z0-9][a-z0-9._\-/]*$/i.test(textContent) && textContent.length < 30 && !textContent.includes(":") && !/^[0-9]/.test(textContent) && !element.getAttribute("data-ui-tweaker-managed");
        if (looksLikeBranch) return "plugin-obsidian-git-branch";
        return "plugin-obsidian-git";
      }
      const stableClasses2 = allClasses.filter(
        (cls) => !this.isDynamicStateClass(cls) && !ignoredClasses.includes(cls) && cls !== pluginClass
      );
      if (stableClasses2.length > 0) {
        return `${pluginClass}-${stableClasses2.join("-")}`;
      }
      return pluginClass;
    }
    const stableClasses = allClasses.filter(
      (cls) => !this.isDynamicStateClass(cls) && !ignoredClasses.includes(cls)
    );
    if (stableClasses.length > 0) {
      return stableClasses.join("-");
    }
    return "status-bar-item";
  }
  /**
   * Extract canonical name from a saved ID
   * Removes the index suffix and filters out dynamic state classes
   * This handles legacy IDs that might have been created with dynamic classes
   */
  getCanonicalNameFromId(id) {
    const parts = id.split(";");
    parts.pop();
    const fullName = parts.join(";");
    if (fullName.includes("obsidian-git-statusbar-") || fullName === "plugin-obsidian-git") {
      const savedItem = this.items.find((i) => i.id === id);
      if (savedItem && savedItem.name && /^[a-z0-9][a-z0-9._\-/]*$/i.test(savedItem.name) && savedItem.name.length < 30 && !savedItem.name.includes("plugin-")) {
        return "plugin-obsidian-git-branch";
      }
      return "plugin-obsidian-git-status";
    }
    const pluginMatch = fullName.match(/^(plugin-[a-z0-9-]+)/i);
    if (pluginMatch) {
      return pluginMatch[1];
    }
    const nameParts = fullName.split("-");
    const filteredParts = [];
    let skipNext = false;
    for (let i = 0; i < nameParts.length; i++) {
      if (skipNext) {
        skipNext = false;
        continue;
      }
      if (nameParts[i] === "statusbar" && i < nameParts.length - 1) {
        const nextPart = nameParts[i + 1];
        if (["idle", "pull", "push", "commit", "message", "status", "add", "conflict", "paused"].includes(nextPart)) {
          skipNext = true;
          continue;
        }
        if (nextPart === "failed" && i < nameParts.length - 2 && nameParts[i + 2] === "init") {
          i += 2;
          continue;
        }
      }
      if (this.isDynamicStateClass(nameParts[i])) {
        continue;
      }
      filteredParts.push(nameParts[i]);
    }
    return filteredParts.length > 0 ? filteredParts.join("-") : fullName;
  }
  /**
   * Consolidate settings and elements (EXACTLY like Status Bar Organizer)
   * Merges saved items with current DOM elements, preserves order and settings
   * Saves immediately to prevent duplicates
   */
  consolidateSettingsAndElements() {
    if (!this.container) return;
    const existingElements = Array.from(this.container.children).filter(
      (el) => {
        const element = el;
        if (element.classList.contains("ui-tweaker-status-bar-item")) return false;
        if (element.getAttribute("data-ui-tweaker-managed") === "true") {
          const id = element.getAttribute("data-ui-tweaker-status-bar-id");
          if (!id || !this.items.some((item) => item.id === id)) {
            return false;
          }
        }
        return true;
      }
    );
    const savedItems = this.items.filter((item) => item.type === "existing");
    const savedItemsMap = new Map(savedItems.map((item) => [item.id, item]));
    const pluginElementCount = {};
    const matchedSavedIds = /* @__PURE__ */ new Set();
    const newItems = [];
    existingElements.forEach((element) => {
      var _a, _b;
      let id = element.getAttribute("data-ui-tweaker-status-bar-id");
      let canonicalName;
      let index;
      if (id) {
        const parsed = this.parseElementId(id);
        canonicalName = parsed.name;
        index = parsed.index;
      } else {
        const allClasses = Array.from(element.classList);
        canonicalName = this.generateCanonicalName(element, allClasses);
        index = canonicalName in pluginElementCount ? pluginElementCount[canonicalName] + 1 : 1;
        id = `${canonicalName};${index}`;
        element.setAttribute("data-ui-tweaker-status-bar-id", id);
      }
      pluginElementCount[canonicalName] = Math.max(index, pluginElementCount[canonicalName] || 0);
      const savedItem = savedItemsMap.get(id);
      if (savedItem) {
        matchedSavedIds.add(id);
        let elementName = element.getAttribute("aria-label") || element.getAttribute("title") || ((_a = element.textContent) == null ? void 0 : _a.trim());
        const isBranch = canonicalName === "plugin-obsidian-git-branch";
        const hasGenericName = !savedItem.name || savedItem.name === canonicalName || savedItem.name === "Status bar item" || savedItem.name.startsWith("plugin-");
        if (elementName && (isBranch || hasGenericName)) {
          savedItem.name = elementName.substring(0, 50);
        }
      } else {
        let elementName = element.getAttribute("aria-label") || element.getAttribute("title") || ((_b = element.textContent) == null ? void 0 : _b.trim()) || canonicalName;
        newItems.push({
          id,
          name: elementName.substring(0, 50),
          type: "existing",
          hidden: false,
          mdOnly: false
        });
      }
    });
    if (newItems.length > 0) {
      this.plugin.settings.statusBarItems.push(...newItems);
      void this.plugin.saveSettings();
    }
  }
  /**
   * Helper to parse internal ID into name and index
   */
  parseElementId(id) {
    const parts = id.split(";");
    const indexStr = parts.pop();
    const index = parseInt(indexStr || "1", 10);
    const name = parts.join(";");
    return { name, index };
  }
  /**
   * Reorder and apply visibility to all status bar items (like Status Bar Organizer)
   * Handles sticky items (left/right) and items that aren't currently visible
   * 
   * Note: Items with the same sticky position maintain their relative order
   * (e.g., if 3 items are sticky-left, they appear in the order they're in settings)
   */
  reorder() {
    var _a;
    if (!this.container) return;
    this.isReordering = true;
    this.customActions.forEach((action) => action.remove());
    this.customActions.clear();
    const allExistingElements = Array.from(this.container.children).filter(
      (el) => el.classList.contains("status-bar-item") && !el.classList.contains("ui-tweaker-status-bar-item")
    );
    const leftSticky = [];
    const rightSticky = [];
    const regular = [];
    const activeLeaf = this.plugin.app.workspace.getMostRecentLeaf();
    for (const item of this.items) {
      if (item.hidden) {
        if (item.type === "existing") {
          const element = allExistingElements.find(
            (el) => el.getAttribute("data-ui-tweaker-status-bar-id") === item.id
          );
          if (element) {
            element.addClass("ui-tweaker-status-bar-hidden");
          }
        }
        continue;
      }
      if (item.mdOnly && !isMarkdownView(activeLeaf)) {
        if (item.type === "existing") {
          const element = allExistingElements.find(
            (el) => el.getAttribute("data-ui-tweaker-status-bar-id") === item.id
          );
          if (element) {
            element.addClass("ui-tweaker-status-bar-hidden");
          }
        }
        continue;
      }
      if (item.type === "custom") {
        const commands = this.plugin.app.commands;
        const command = (_a = commands == null ? void 0 : commands.commands) == null ? void 0 : _a[item.commandId || ""];
        const mode = item.mode || "any";
        if (command && isModeActive(mode, this.plugin)) {
          this.addCustomAction(item);
          const action = this.customActions.get(item);
          if (action) {
            if (item.sticky === "left") {
              leftSticky.push(action);
            } else if (item.sticky === "right") {
              rightSticky.push(action);
            } else {
              regular.push(action);
            }
          }
        }
      } else {
        const element = allExistingElements.find(
          (el) => el.getAttribute("data-ui-tweaker-status-bar-id") === item.id
        );
        if (element) {
          element.removeClass("ui-tweaker-status-bar-hidden");
          if (item.sticky === "left") {
            leftSticky.push(element);
          } else if (item.sticky === "right") {
            rightSticky.push(element);
          } else {
            regular.push(element);
          }
        }
      }
    }
    const orderedElements = [...leftSticky, ...regular, ...rightSticky];
    orderedElements.forEach((element) => {
      if (this.container && element.parentElement === this.container) {
        this.container.appendChild(element);
      }
    });
    orderedElements.forEach((element, index) => {
      setCssProps(element, { order: (index + 1).toString() });
    });
    setTimeout(() => {
      this.isReordering = false;
    }, 50);
  }
  /**
   * Add a custom command action to the status bar (like Commander)
   */
  addCustomAction(item) {
    if (!this.container || !item.commandId) return;
    if (this.customActions.has(item)) return;
    const btn = this.container.createDiv({
      cls: "ui-tweaker-status-bar-item status-bar-item mod-clickable",
      attr: {
        "aria-label": item.name,
        "data-tooltip-position": "top",
        "data-ui-tweaker-status-bar-id": item.id,
        "data-ui-tweaker-managed": "true"
      }
    });
    if (item.icon) {
      (0, import_obsidian13.setIcon)(btn, item.icon);
    }
    if (item.color && item.color !== "#000000") {
      setCssProps(btn, { color: item.color });
    }
    btn.onclick = () => {
      const commands = this.plugin.app.commands;
      if ((commands == null ? void 0 : commands.executeCommandById) && item.commandId) {
        void commands.executeCommandById(item.commandId);
      }
    };
    btn.addEventListener("contextmenu", (event) => {
      event.stopImmediatePropagation();
      new import_obsidian13.Menu().addItem((menuItem) => {
        menuItem.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const modal = new IconPickerModal(this.plugin.app, (iconId) => {
            if (iconId && iconId !== item.icon) {
              item.icon = iconId;
              void this.plugin.saveSettings();
              this.reorder();
            }
          });
          modal.open();
        });
      }).addItem((menuItem) => {
        menuItem.setTitle("Delete").setIcon("lucide-trash").onClick(() => {
          void this.removeItem(item);
        });
        const dom = menuItem.dom;
        if (dom) {
          dom.classList.add("mod-warning");
          const iconEl = dom.querySelector(".menu-item-icon svg");
          if (iconEl) {
            setCssProps(iconEl, { color: "var(--text-error)" });
          }
        }
      }).showAtMouseEvent(event);
    });
    this.customActions.set(item, btn);
  }
  /**
   * Add a new custom command item
   */
  async addCustomCommand(pair) {
    if (!this.plugin.settings.statusBarItems) {
      this.plugin.settings.statusBarItems = [];
    }
    const hasMarkdownFilter = pair.showOnFileTypes && (pair.showOnFileTypes.includes("md") || pair.showOnFileTypes.includes("mdx"));
    const mdOnly = hasMarkdownFilter ? true : false;
    const item = {
      id: `custom-${pair.id}`,
      name: pair.name,
      displayName: pair.displayName,
      icon: pair.icon,
      type: "custom",
      hidden: false,
      mdOnly,
      commandId: pair.id,
      color: pair.color,
      mode: pair.mode
    };
    this.plugin.settings.statusBarItems.push(item);
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Remove an item
   */
  async removeItem(item) {
    if (!this.plugin.settings.statusBarItems) return;
    const index = this.plugin.settings.statusBarItems.indexOf(item);
    if (index > -1) {
      this.plugin.settings.statusBarItems.splice(index, 1);
    }
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Update item visibility
   */
  async updateItemVisibility(item, hidden) {
    item.hidden = hidden;
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Update item md/mdx-only setting
   */
  async updateItemMdOnly(item, mdOnly) {
    item.mdOnly = mdOnly;
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Update button names/tooltips for all existing custom buttons
   */
  updateButtonNames() {
    this.customActions.forEach((button, item) => {
      button.setAttribute("aria-label", item.name);
      if (item.color && item.color !== "#000000") {
        setCssProps(button, { color: item.color });
      } else {
        button.style.removeProperty("color");
      }
    });
  }
};

// src/manager/ExplorerManager.ts
var import_obsidian14 = require("obsidian");
var ExplorerManager = class {
  // Flag to prevent observer from triggering during reorder
  constructor(plugin) {
    this.buttons = /* @__PURE__ */ new Map();
    this.observers = [];
    this.isReordering = false;
    this.plugin = plugin;
    this.init();
  }
  init() {
    this.plugin.app.workspace.onLayoutReady(() => {
      if (!this.plugin.settings.explorerButtonItems) {
        this.plugin.settings.explorerButtonItems = [];
      }
      this.migrateExplorerCommands();
      this.consolidateSettingsAndElements();
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("layout-change", () => {
          this.consolidateSettingsAndElements();
          this.reorder();
          this.applyNativeIconOverrides();
        })
      );
      this.addButtonsToAllLeaves();
      this.reorder();
      setTimeout(() => {
        this.setupMutationObserver();
      }, 100);
      this.plugin.register(() => {
        this.cleanup();
      });
    });
  }
  /**
   * Remove all buttons created by this manager from the DOM
   */
  cleanup() {
    this.observers.forEach((observer) => observer.disconnect());
    this.observers = [];
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (navButtonsContainer) {
        const managedButtons = navButtonsContainer.querySelectorAll('[data-ui-tweaker-managed="true"]');
        managedButtons.forEach((btn) => btn.remove());
      }
    });
    this.buttons.clear();
  }
  addButtonsToAllLeaves() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      this.addButtonsToExplorer(leaf);
    });
  }
  addButtonsToExplorer(leaf) {
    this.reorder();
  }
  /**
   * Migrate existing explorerCommands to explorerButtonItems
   */
  migrateExplorerCommands() {
  }
  createOrUpdateExplorerButton(container, pair, leaf) {
    const existingButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
    if (existingButton) {
      existingButton.setAttribute("aria-label", pair.name);
      if (pair.color && pair.color !== "#000000") {
        existingButton.style.color = pair.color;
      } else {
        existingButton.style.removeProperty("color");
      }
      this.updateButtonToggleState(existingButton, pair);
      return existingButton;
    }
    if (!isModeActive(pair.mode, this.plugin)) {
      return null;
    }
    const button = createDiv({
      cls: "clickable-icon nav-action-button",
      attr: {
        "data-explorer-command-id": pair.id,
        "aria-label": pair.name,
        "aria-label-position": "top",
        "data-ui-tweaker-managed": "true"
      }
    });
    this.updateButtonToggleState(button, pair);
    button.onclick = () => {
      const commands = this.plugin.app.commands;
      if (commands == null ? void 0 : commands.executeCommandById) {
        void commands.executeCommandById(pair.id);
        setTimeout(() => {
          this.updateButtonToggleState(button, pair);
          this.updateAllButtonsForCommand(pair.id);
        }, 100);
      }
    };
    this.buttons.set(pair.id, button);
    button.addEventListener("contextmenu", (event) => {
      event.stopImmediatePropagation();
      new import_obsidian14.Menu().addItem((item) => {
        item.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const modal = new IconPickerModal(this.plugin.app, (iconId) => {
            if (iconId && iconId !== pair.icon) {
              pair.icon = iconId;
              void this.plugin.saveSettings();
              this.reorder();
            }
          });
          modal.open();
        });
      }).addItem((item) => {
        item.setTitle("Delete").setIcon("lucide-trash").onClick(() => {
          void this.removeCommand(pair);
        });
        const dom = item.dom;
        if (dom) {
          dom.classList.add("mod-warning");
          const iconEl = dom.querySelector(".menu-item-icon svg");
          if (iconEl) {
            setCssProps(iconEl, { color: "var(--text-error)" });
          }
        }
      }).showAtMouseEvent(event);
    });
    container.appendChild(button);
    return button;
  }
  /**
   * Generate canonical name from button element
   */
  generateCanonicalName(element, ariaLabel) {
    const nativeButtonMap = {
      "New note": "newNote",
      "New folder": "newFolder",
      "Change sort order": "sortOrder",
      "Auto-reveal current file": "autoReveal",
      "Collapse all": "collapseAll",
      "Expand all": "collapseAll"
      // Both map to same key
    };
    if (nativeButtonMap[ariaLabel]) {
      return `native-${nativeButtonMap[ariaLabel]}`;
    }
    const commandId = element.getAttribute("data-explorer-command-id");
    if (commandId) {
      return `custom-${commandId}`;
    }
    const allClasses = Array.from(element.classList);
    const ignoredClasses = ["clickable-icon", "nav-action-button"];
    const stableClasses = allClasses.filter((cls) => !ignoredClasses.includes(cls));
    const pluginClass = stableClasses.find(
      (cls) => cls.includes("plugin-") || cls.includes("commander") || cls.includes("explorer-focus")
    );
    if (pluginClass) {
      const sanitizedAriaLabel = ariaLabel.toLowerCase().replace(/[^a-z0-9]+/g, "-");
      return `external-${pluginClass}-${sanitizedAriaLabel}`;
    }
    const sanitized = ariaLabel.toLowerCase().replace(/[^a-z0-9]+/g, "-");
    return `external-${sanitized}`;
  }
  /**
   * Consolidate settings and elements - detect all buttons and merge with saved items
   */
  consolidateSettingsAndElements() {
    var _a, _b;
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    if (explorers.length === 0) return;
    const firstExplorer = explorers[0];
    const navButtonsContainer = (_b = (_a = firstExplorer.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
    if (!navButtonsContainer) return;
    const existingButtons = Array.from(navButtonsContainer.querySelectorAll(".nav-action-button")).filter(
      (element) => {
        if (element.getAttribute("data-ui-tweaker-managed") === "true") {
          const commandId = element.getAttribute("data-explorer-command-id");
          if (!commandId || !this.plugin.settings.explorerButtonItems.some((item) => item.commandId === commandId)) {
            return false;
          }
        }
        return true;
      }
    );
    const savedItems = this.plugin.settings.explorerButtonItems || [];
    const savedItemsMap = new Map(savedItems.map((item) => [item.id, item]));
    const matchedSavedIds = /* @__PURE__ */ new Set();
    const newItems = [];
    const elementCount = {};
    existingButtons.forEach((element) => {
      const ariaLabel = element.getAttribute("aria-label") || "";
      const commandId = element.getAttribute("data-explorer-command-id");
      const canonicalName = this.generateCanonicalName(element, ariaLabel);
      let id = canonicalName;
      if (canonicalName.startsWith("native-")) {
        id = canonicalName;
      } else if (canonicalName.startsWith("custom-")) {
        id = canonicalName;
      } else {
        const baseName = canonicalName;
        const count = baseName in elementCount ? elementCount[baseName] + 1 : 1;
        elementCount[baseName] = count;
        id = count > 1 ? `${baseName};${count}` : baseName;
      }
      if (savedItemsMap.has(id)) {
        matchedSavedIds.add(id);
        const savedItem = savedItemsMap.get(id);
        if (!savedItem.name || savedItem.name === id || savedItem.name.startsWith("external-")) {
          savedItem.name = ariaLabel || savedItem.name || id;
        }
        if (ariaLabel) {
          savedItem.ariaLabel = ariaLabel;
        }
      } else {
        let type;
        if (canonicalName.startsWith("native-")) {
          type = "native";
        } else if (canonicalName.startsWith("custom-")) {
          type = "custom";
        } else {
          type = "external";
        }
        const newItem = {
          id,
          name: ariaLabel || id,
          ariaLabel,
          type,
          commandId: commandId || void 0,
          hidden: false
        };
        if (type === "custom" && commandId) {
          const existingCommand = this.plugin.settings.explorerCommands.find((c) => c.id === commandId);
          if (existingCommand) {
            newItem.icon = existingCommand.icon;
            newItem.displayName = existingCommand.displayName;
            newItem.mode = existingCommand.mode;
            newItem.color = existingCommand.color;
            newItem.showOnFileTypes = existingCommand.showOnFileTypes;
            newItem.hideOnFileTypes = existingCommand.hideOnFileTypes;
            newItem.toggleIcon = existingCommand.toggleIcon;
            newItem.useActiveClass = existingCommand.useActiveClass;
          }
        }
        newItems.push(newItem);
      }
    });
    if (newItems.length > 0) {
      this.plugin.settings.explorerButtonItems.push(...newItems);
      void this.plugin.saveSettings();
    }
  }
  /**
   * Set up mutation observer to detect new external buttons
   */
  setupMutationObserver() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    if (explorers.length === 0) return;
    explorers.forEach((explorer) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = explorer.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      let observerTimeout = null;
      const observer = new MutationObserver((mutations) => {
        if (this.isReordering) return;
        const hasNewNodes = mutations.some(
          (mutation) => mutation.addedNodes.length > 0 && Array.from(mutation.addedNodes).some(
            (node) => node instanceof HTMLElement && node.classList.contains("nav-action-button") && !node.hasAttribute("data-explorer-command-id")
            // Only external buttons (not our custom ones)
          )
        );
        if (!hasNewNodes) return;
        if (observerTimeout) {
          clearTimeout(observerTimeout);
        }
        observerTimeout = setTimeout(() => {
          if (!this.isReordering) {
            this.consolidateSettingsAndElements();
            this.reorder();
          }
        }, 1e3);
      });
      observer.observe(navButtonsContainer, { childList: true, subtree: false });
      this.observers.push(observer);
    });
  }
  /**
   * Reorder buttons based on settings order
   */
  reorder() {
    this.isReordering = true;
    this.observers.forEach((observer) => observer.disconnect());
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      const allButtons = Array.from(navButtonsContainer.querySelectorAll(".nav-action-button"));
      const buttonMap = /* @__PURE__ */ new Map();
      allButtons.forEach((button) => {
        const ariaLabel = button.getAttribute("aria-label") || "";
        const canonicalName = this.generateCanonicalName(button, ariaLabel);
        if (canonicalName.startsWith("native-")) {
          buttonMap.set(canonicalName, button);
        } else if (canonicalName.startsWith("custom-")) {
          buttonMap.set(canonicalName, button);
        } else {
          const savedItems = this.plugin.settings.explorerButtonItems || [];
          const matchingItem = savedItems.find((item) => {
            if (item.id === canonicalName) return true;
            if (item.id.startsWith(canonicalName + ";")) return true;
            return item.ariaLabel === ariaLabel && item.type === "external";
          });
          if (matchingItem) {
            buttonMap.set(matchingItem.id, button);
          }
        }
      });
      const orderedButtons = [];
      const items = this.plugin.settings.explorerButtonItems || [];
      items.forEach((item) => {
        if (item.hidden) {
          const button = buttonMap.get(item.id);
          if (button) {
            button.classList.add("ui-tweaker-explorer-button-hidden");
            buttonMap.delete(item.id);
          }
        }
      });
      for (const item of items) {
        if (item.hidden) continue;
        const button = buttonMap.get(item.id);
        if (button) {
          button.classList.remove("ui-tweaker-explorer-button-hidden");
          orderedButtons.push(button);
          buttonMap.delete(item.id);
        } else if (item.type === "custom") {
          const commandPair = this.plugin.settings.explorerCommands.find((c) => c.id === item.commandId);
          if (commandPair) {
            const newButton = this.createOrUpdateExplorerButton(navButtonsContainer, commandPair, leaf);
            if (newButton) {
              orderedButtons.push(newButton);
            }
          }
        }
      }
      buttonMap.forEach((button, id) => {
        const item = items.find((i) => i.id === id);
        if (!item && !id.startsWith("native-") && !id.startsWith("external-")) {
          button.remove();
        }
      });
      orderedButtons.forEach((button) => {
        if (button.parentElement === navButtonsContainer) {
          navButtonsContainer.appendChild(button);
        }
      });
      this.applyNativeIconOverrides();
    });
    setTimeout(() => {
      this.isReordering = false;
      this.observers = [];
      this.setupMutationObserver();
    }, 200);
  }
  /**
   * Update button toggle state (icon or is-active class)
   */
  updateButtonToggleState(button, pair) {
    if (!pair.toggleIcon && !pair.useActiveClass) {
      button.empty();
      (0, import_obsidian14.setIcon)(button, pair.icon);
      button.classList.remove("is-active");
      if (pair.color && pair.color !== "#000000") {
        button.style.color = pair.color;
      } else {
        button.style.removeProperty("color");
      }
      return;
    }
    const isChecked = isCommandChecked(pair.id, this.plugin);
    if (pair.useActiveClass) {
      const currentIcon = button.querySelector(".svg-icon");
      const iconName = pair.icon.replace("lucide-", "");
      if (!currentIcon || !currentIcon.classList.contains(iconName)) {
        button.empty();
        (0, import_obsidian14.setIcon)(button, pair.icon);
      }
      if (isChecked) {
        button.classList.add("is-active");
      } else {
        button.classList.remove("is-active");
      }
    } else if (pair.toggleIcon) {
      button.empty();
      (0, import_obsidian14.setIcon)(button, isChecked ? pair.toggleIcon : pair.icon);
      button.classList.remove("is-active");
    }
    if (pair.color && pair.color !== "#000000") {
      button.style.color = pair.color;
    } else {
      button.style.removeProperty("color");
    }
  }
  /**
   * Update button names/tooltips for all existing buttons
   */
  updateButtonNames() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      for (const pair of this.plugin.settings.explorerCommands) {
        const button = navButtonsContainer.querySelector(`[data-explorer-command-id="${pair.id}"]`);
        if (button) {
          button.setAttribute("aria-label", pair.name);
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  /**
   * Update all buttons for a specific command ID across all explorers
   */
  updateAllButtonsForCommand(commandId) {
    const pair = this.plugin.settings.explorerCommands.find((p) => p.id === commandId);
    if (!pair) return;
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      const button = navButtonsContainer.querySelector(`[data-explorer-command-id="${commandId}"]`);
      if (button) {
        this.updateButtonToggleState(button, pair);
      }
    });
  }
  /**
   * Refresh toggle states for all buttons
   */
  refreshToggleStates() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      for (const pair of this.plugin.settings.explorerCommands) {
        const button = navButtonsContainer.querySelector(`[data-explorer-command-id="${pair.id}"]`);
        if (button && (pair.toggleIcon || pair.useActiveClass)) {
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  /**
   * Apply icon overrides to native explorer buttons
   */
  applyNativeIconOverrides() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    const iconOverrides = this.plugin.settings.nativeExplorerButtonIcons;
    const defaultIcons = {
      "New note": { icon: "lucide-edit", key: "newNote" },
      "New folder": { icon: "lucide-folder-plus", key: "newFolder" },
      "Change sort order": { icon: "lucide-sort-asc", key: "sortOrder" },
      "Auto-reveal current file": { icon: "lucide-gallery-vertical", key: "autoReveal" },
      "Collapse all": { icon: "lucide-chevrons-up-down", key: "collapseAll" }
    };
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      const nativeButtons = navButtonsContainer.querySelectorAll(".nav-action-button:not([data-explorer-command-id])");
      nativeButtons.forEach((button) => {
        const ariaLabel = button.getAttribute("aria-label");
        if (!ariaLabel) return;
        const buttonInfo = defaultIcons[ariaLabel];
        if (!buttonInfo) return;
        const iconKey = buttonInfo.key;
        const iconOverride = iconOverrides == null ? void 0 : iconOverrides[iconKey];
        const colorOverrides = this.plugin.settings.nativeExplorerButtonColors;
        const color = colorOverrides == null ? void 0 : colorOverrides[iconKey];
        button.empty();
        if (iconOverride) {
          (0, import_obsidian14.setIcon)(button, iconOverride);
        } else {
          (0, import_obsidian14.setIcon)(button, buttonInfo.icon);
        }
        if (color) {
          button.style.color = color;
        } else {
          button.style.removeProperty("color");
        }
      });
    });
  }
  /**
   * Remove a command from explorer
   */
  async removeCommand(pair) {
    if (!this.plugin.settings.explorerCommands) return;
    const index = this.plugin.settings.explorerCommands.indexOf(pair);
    if (index > -1) {
      this.plugin.settings.explorerCommands.splice(index, 1);
    }
    this.reorder();
    await this.plugin.saveSettings();
  }
};

// src/utils/ButtonReplacer.ts
var import_obsidian15 = require("obsidian");
var ButtonReplacer = class {
  constructor(selector, replacementIcon, callback, options) {
    this.selector = selector;
    this.replacementIcon = replacementIcon;
    this.callback = callback;
    this.options = options;
    this.customButton = null;
    this.originalButton = null;
    this.observer = null;
    this.installTimeout = null;
  }
  install() {
    this.tryInstall();
    this.installTimeout = window.setTimeout(() => this.tryInstall(), 500);
    if (this.options.survivalObserver) {
      this.setupObserver();
    }
  }
  tryInstall() {
    var _a, _b, _c, _d;
    const parent = this.options.parentSelector ? document.querySelector(this.options.parentSelector) : document.body;
    if (!parent) return;
    let originalBtn = null;
    if (this.options.findButton) {
      originalBtn = this.options.findButton(parent);
    } else {
      originalBtn = parent.querySelector(this.selector);
    }
    if (!originalBtn) return;
    if (this.customButton && this.customButton.parentElement && document.body.contains(this.customButton)) {
      return;
    }
    this.removeCustomButton();
    const customButton = originalBtn.cloneNode(true);
    customButton.removeAttribute("aria-label");
    customButton.setAttribute(`data-${this.options.uniqueId}`, "true");
    customButton.classList.add(this.options.cssClass);
    customButton.onclick = null;
    const iconContainer = ((_a = customButton.querySelector("svg")) == null ? void 0 : _a.parentElement) || customButton;
    try {
      const oldSvg = customButton.querySelector("svg");
      if (oldSvg) oldSvg.remove();
      (0, import_obsidian15.setIcon)(iconContainer, this.replacementIcon);
    } catch (e) {
      console.error(`[UI Tweaker] Failed to set icon ${this.replacementIcon}:`, e);
      try {
        (0, import_obsidian15.setIcon)(iconContainer, "wrench");
      } catch (e2) {
      }
    }
    const handler = (evt) => {
      evt.preventDefault();
      evt.stopPropagation();
      this.callback();
    };
    customButton.addEventListener("click", handler, (_b = this.options.useCapture) != null ? _b : true);
    if (this.options.handleTouch) {
      customButton.addEventListener("touchstart", handler, (_c = this.options.useCapture) != null ? _c : true);
    }
    (_d = originalBtn.parentElement) == null ? void 0 : _d.insertBefore(customButton, originalBtn);
    this.customButton = customButton;
    this.originalButton = originalBtn;
    if (this.options.onAfterInstall) {
      this.options.onAfterInstall(customButton, originalBtn);
    }
  }
  uninstall() {
    if (this.installTimeout) {
      clearTimeout(this.installTimeout);
      this.installTimeout = null;
    }
    if (this.observer) {
      this.observer.disconnect();
      this.observer = null;
    }
    if (this.options.onBeforeUninstall) {
      this.options.onBeforeUninstall(this.customButton);
    }
    this.removeCustomButton();
    this.originalButton = null;
  }
  removeCustomButton() {
    if (this.customButton) {
      if (this.customButton.parentElement) {
        this.customButton.remove();
      }
      this.customButton = null;
    }
    const strays = document.querySelectorAll(`.${this.options.cssClass}`);
    strays.forEach((el) => el.remove());
  }
  setupObserver() {
    if (this.observer) this.observer.disconnect();
    this.observer = new MutationObserver(() => {
      const exists = this.customButton && this.customButton.parentElement && document.body.contains(this.customButton);
      if (!exists) {
        this.tryInstall();
      }
    });
    const target = this.options.parentSelector ? document.querySelector(this.options.parentSelector) : document.body;
    if (target) {
      this.observer.observe(target, {
        childList: true,
        subtree: true
      });
    } else {
      this.observer.observe(document.body, {
        childList: true,
        subtree: true
      });
    }
  }
};

// src/main.ts
var UITweakerPlugin = class extends import_obsidian16.Plugin {
  constructor() {
    super(...arguments);
    // Track wrapped commands to avoid double-wrapping and allow cleanup
    this.wrappedCommands = /* @__PURE__ */ new Map();
  }
  get isMobile() {
    return import_obsidian16.Platform.isMobile || document.body.classList.contains("is-mobile") || document.body.classList.contains("emulate-mobile");
  }
  async onload() {
    await this.loadSettings();
    this.uiManager = new UIManager(this, this.settings);
    this.uiManager.applyStyles();
    if (!this.settings.tabBarCommands) {
      this.settings.tabBarCommands = [];
    }
    this.tabBarManager = new TabBarManager(this);
    if (!this.settings.statusBarItems) {
      this.settings.statusBarItems = [];
    }
    this.statusBarManager = new StatusBarManager(this);
    if (!this.settings.explorerCommands) {
      this.settings.explorerCommands = [];
    }
    this.explorerManager = new ExplorerManager(this);
    registerCommands({
      plugin: this,
      settings: this.settings,
      saveSettings: () => this.saveSettings(),
      refresh: () => this.refresh()
    });
    this.setupToggleStateRefresh();
    this.setupToggleStateObservers();
    this.settingTab = new UITweakerSettingTab(this.app, this);
    this.addSettingTab(this.settingTab);
    this.setupHelpButtonReplacement();
    if (this.isMobile) {
      this.setupSyncButtonReplacement();
    } else {
      document.body.classList.remove("ui-tweaker-hide-sync-button");
    }
  }
  onunload() {
    var _a, _b;
    if (this.uiManager) {
      this.uiManager.cleanup();
    }
    if (this.explorerManager) {
      this.explorerManager.cleanup();
    }
    if (this.statusBarManager) {
      this.statusBarManager.cleanup();
    }
    (_a = this.helpButtonReplacer) == null ? void 0 : _a.uninstall();
    (_b = this.syncButtonReplacer) == null ? void 0 : _b.uninstall();
    for (const wrapper of this.wrappedCommands.values()) {
      wrapper.restore();
    }
    this.wrappedCommands.clear();
    document.body.classList.remove("ui-tweaker-hide-help-button");
    document.body.classList.remove("ui-tweaker-hide-sync-button");
  }
  async loadSettings() {
    try {
      const data = await this.loadData();
      if (!data || typeof data !== "object" || Array.isArray(data)) {
        this.settings = Object.assign({}, DEFAULT_SETTINGS);
        await this.saveSettings();
        return;
      }
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
      if (!this.settings.helpButtonReplacement) {
        this.settings.helpButtonReplacement = {
          enabled: false,
          commandId: "",
          iconId: "settings-2"
        };
      } else {
        if (!this.settings.helpButtonReplacement.iconId) {
          this.settings.helpButtonReplacement.iconId = "wrench";
        }
      }
      if (!this.settings.syncButtonReplacement) {
        this.settings.syncButtonReplacement = {
          enabled: false,
          commandId: "",
          iconId: "wrench"
        };
      } else {
        if (!this.settings.syncButtonReplacement.iconId) {
          this.settings.syncButtonReplacement.iconId = "wrench";
        }
      }
      if (this.settings.tabBarCommands) {
        let needsSave = false;
        for (const pair of this.settings.tabBarCommands) {
          const pairWithOldProps = pair;
          if (pair.showOnFileTypes !== void 0 || pair.hideOnFileTypes !== void 0) {
            continue;
          }
          if (pairWithOldProps.mdOnly === true && !pair.showOnFileTypes) {
            pair.showOnFileTypes = "md,mdx";
            delete pairWithOldProps.mdOnly;
            needsSave = true;
          }
          if (pairWithOldProps.fileTypeFilter && !pair.showOnFileTypes && !pair.hideOnFileTypes) {
            const filter = pairWithOldProps.fileTypeFilter;
            const parts = filter.split(",").map((p) => p.trim()).filter((p) => p);
            const showTypes = [];
            const hideTypes = [];
            for (const part of parts) {
              if (part.startsWith("-")) {
                const ext = part.slice(1).replace(/^\./, "").toLowerCase();
                if (ext) hideTypes.push(ext);
              } else {
                const ext = part.replace(/^\./, "").toLowerCase();
                if (ext) showTypes.push(ext);
              }
            }
            if (showTypes.length > 0) {
              pair.showOnFileTypes = showTypes.join(",");
            }
            if (hideTypes.length > 0) {
              pair.hideOnFileTypes = hideTypes.join(",");
            }
            delete pairWithOldProps.fileTypeFilter;
            needsSave = true;
          }
        }
        if (needsSave) {
          await this.saveSettings();
        }
      }
    } catch (error) {
      console.error("[UI Tweaker] Failed to load settings:", error);
      this.settings = { ...DEFAULT_SETTINGS };
    }
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  refresh() {
    var _a, _b;
    if (this.uiManager) {
      this.uiManager.updateSettings(this.settings);
    }
    (_a = this.explorerManager) == null ? void 0 : _a.applyNativeIconOverrides();
    this.setupHelpButtonReplacement();
    this.updateSyncButtonCSS();
    if (this.isMobile) {
      this.setupSyncButtonReplacement();
    } else {
      document.body.classList.remove("ui-tweaker-hide-sync-button");
      (_b = this.syncButtonReplacer) == null ? void 0 : _b.uninstall();
    }
  }
  setupHelpButtonReplacement() {
    var _a, _b;
    this.updateHelpButtonCSS();
    if (!((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled)) {
      (_b = this.helpButtonReplacer) == null ? void 0 : _b.uninstall();
      this.helpButtonReplacer = void 0;
      return;
    }
    if (!this.helpButtonReplacer) {
      this.helpButtonReplacer = new ButtonReplacer(
        ".clickable-icon svg.help",
        this.settings.helpButtonReplacement.iconId || "settings-2",
        () => {
          var _a2;
          const commandId = (_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.commandId;
          if (commandId) {
            void (async () => {
              try {
                const commands = this.app.commands;
                if (commands == null ? void 0 : commands.executeCommandById) {
                  await commands.executeCommandById(commandId);
                } else {
                  throw new Error("Command execution not available");
                }
              } catch (e) {
                new import_obsidian16.Notice(`Failed to execute command: ${commandId}`);
              }
            })();
          }
        },
        {
          survivalObserver: true,
          parentSelector: ".workspace-drawer-vault-actions",
          uniqueId: "ui-tweaker-help-replacement",
          cssClass: "ui-tweaker-help-replacement",
          findButton: (parent) => {
            const clickableIcons = Array.from(parent.querySelectorAll(".clickable-icon"));
            for (const icon of clickableIcons) {
              if (icon.querySelector("svg.help")) return icon;
            }
            return null;
          }
        }
      );
      this.helpButtonReplacer.install();
    } else {
      this.helpButtonReplacer.uninstall();
      this.helpButtonReplacer = void 0;
      this.setupHelpButtonReplacement();
    }
  }
  updateHelpButtonCSS() {
    var _a;
    const shouldHideHelpButton = this.settings.helpButton === "hide" || ((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled);
    document.body.classList.toggle("ui-tweaker-hide-help-button", shouldHideHelpButton);
  }
  setupSyncButtonReplacement() {
    var _a, _b;
    this.updateSyncButtonCSS();
    if (!((_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled) || !this.isMobile) {
      (_b = this.syncButtonReplacer) == null ? void 0 : _b.uninstall();
      this.syncButtonReplacer = void 0;
      return;
    }
    if (!this.syncButtonReplacer) {
      this.syncButtonReplacer = new ButtonReplacer(
        ".sync-status-icon",
        this.settings.syncButtonReplacement.iconId || "wrench",
        () => {
          var _a2, _b2, _c, _d, _e;
          const commandId = (_a2 = this.settings.syncButtonReplacement) == null ? void 0 : _a2.commandId;
          if (commandId) {
            if (commandId === "open-settings" || commandId === "ui-tweaker:open-settings") {
              const settingApi = this.app.setting;
              if (settingApi) {
                (_b2 = settingApi.open) == null ? void 0 : _b2.call(settingApi);
                if (((_c = this.settingTab) == null ? void 0 : _c.id) && settingApi.openTabById) {
                  settingApi.openTabById(this.settingTab.id);
                }
              }
            } else {
              (_e = (_d = this.app.commands) == null ? void 0 : _d.executeCommandById) == null ? void 0 : _e.call(_d, commandId).catch((error) => {
                console.warn("[UI Tweaker] Error executing command:", error);
                new import_obsidian16.Notice(`Failed to execute command: ${commandId}`);
              });
            }
          }
        },
        {
          survivalObserver: true,
          parentSelector: ".workspace-drawer.mod-right",
          uniqueId: "ui-tweaker-sync-replacement",
          cssClass: "ui-tweaker-sync-replacement",
          handleTouch: true,
          onAfterInstall: (custom, original) => {
            if (original) {
              setCssProps(original, { display: "none" });
              original.setAttribute("data-ui-tweaker-original-sync-hidden", "true");
            }
          },
          onBeforeUninstall: (custom) => {
            const originals = document.querySelectorAll("[data-ui-tweaker-original-sync-hidden]");
            originals.forEach((el) => {
              el.style.removeProperty("display");
              el.removeAttribute("data-ui-tweaker-original-sync-hidden");
            });
          },
          findButton: (parent) => {
            const drawerHeader = parent.querySelector(".workspace-drawer-header");
            if (!drawerHeader) return null;
            let syncButton = drawerHeader.querySelector(".sync-status-icon");
            if (!syncButton) {
              const clickableIcons = Array.from(drawerHeader.querySelectorAll(".clickable-icon"));
              for (const icon of clickableIcons) {
                if (icon.querySelector("svg.refresh-cw-off, svg.refresh-cw")) return icon;
              }
            }
            return syncButton;
          }
        }
      );
      this.syncButtonReplacer.install();
    } else {
      this.syncButtonReplacer.uninstall();
      this.syncButtonReplacer = void 0;
      this.setupSyncButtonReplacement();
    }
  }
  updateSyncButtonCSS() {
    var _a, _b;
    const shouldHide = ((_b = (_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled) != null ? _b : false) && this.isMobile;
    document.body.classList.toggle("ui-tweaker-hide-sync-button", shouldHide);
  }
  /**
   * Set up event-driven observers for toggle state changes
   * Wraps individual command callbacks to detect execution regardless of trigger method
   */
  setupToggleStateObservers() {
    const refreshToggleStates = () => {
      if (this.explorerManager) {
        this.explorerManager.refreshToggleStates();
      }
      if (this.tabBarManager) {
        this.tabBarManager.refreshToggleStates();
      }
    };
    const bodyObserver = new MutationObserver(refreshToggleStates);
    bodyObserver.observe(document.body, {
      attributes: true,
      attributeFilter: ["class"]
    });
    this.registerEvent(
      this.app.workspace.on("layout-change", refreshToggleStates)
    );
    const workspaceEl = document.querySelector(".workspace");
    if (workspaceEl) {
      const workspaceObserver = new MutationObserver(refreshToggleStates);
      workspaceObserver.observe(workspaceEl, {
        attributes: true,
        attributeFilter: ["class"]
      });
    }
  }
  /**
   * Wrap individual command callbacks to intercept execution
   * This catches commands triggered via hotkey, palette, or programmatically
   */
  setupToggleStateRefresh() {
    this.wrapToggleCommands();
  }
  /**
   * Wrap callbacks for all toggle commands
   * Call this when toggle commands are added/removed
   */
  wrapToggleCommands() {
    var _a, _b;
    const commandsObj = this.app.commands;
    if (!(commandsObj == null ? void 0 : commandsObj.commands)) return;
    const refreshToggleStates = () => {
      setTimeout(() => {
        if (this.explorerManager) {
          this.explorerManager.refreshToggleStates();
        }
        if (this.tabBarManager) {
          this.tabBarManager.refreshToggleStates();
        }
      }, 50);
    };
    const toggleCommandIds = /* @__PURE__ */ new Set();
    (_a = this.settings.explorerCommands) == null ? void 0 : _a.forEach((p) => {
      if (p.toggleIcon) toggleCommandIds.add(p.id);
    });
    (_b = this.settings.tabBarCommands) == null ? void 0 : _b.forEach((p) => {
      if (p.toggleIcon) toggleCommandIds.add(p.id);
    });
    for (const [id, wrapper] of this.wrappedCommands) {
      if (!toggleCommandIds.has(id)) {
        wrapper.restore();
        this.wrappedCommands.delete(id);
      }
    }
    for (const id of toggleCommandIds) {
      if (this.wrappedCommands.has(id)) continue;
      const command = commandsObj.commands[id];
      if (!command) continue;
      if (command.checkCallback) {
        const original = command.checkCallback;
        command.checkCallback = (checking) => {
          const result = original(checking);
          if (!checking) {
            recordCommandExecution(id);
            refreshToggleStates();
          }
          return result;
        };
        this.wrappedCommands.set(id, {
          restore: () => {
            command.checkCallback = original;
          }
        });
      } else if (command.callback) {
        const original = command.callback;
        command.callback = () => {
          const result = original();
          recordCommandExecution(id);
          refreshToggleStates();
          return result;
        };
        this.wrappedCommands.set(id, {
          restore: () => {
            command.callback = original;
          }
        });
      } else if (command.editorCheckCallback) {
        const original = command.editorCheckCallback;
        command.editorCheckCallback = (checking, editor, ctx) => {
          const result = original(checking, editor, ctx);
          if (!checking) {
            recordCommandExecution(id);
            refreshToggleStates();
          }
          return result;
        };
        this.wrappedCommands.set(id, {
          restore: () => {
            command.editorCheckCallback = original;
          }
        });
      } else if (command.editorCallback) {
        const original = command.editorCallback;
        command.editorCallback = (editor, ctx) => {
          const result = original(editor, ctx);
          recordCommandExecution(id);
          refreshToggleStates();
          return result;
        };
        this.wrappedCommands.set(id, {
          restore: () => {
            command.editorCallback = original;
          }
        });
      }
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy91aU1hbmFnZXIudHMiLCAic3JjL3V0aWxzL2Nzc1V0aWxzLnRzIiwgInNyYy9jb21tYW5kcy50cyIsICJzcmMvdWkvU2V0dGluZ3NUYWIudHMiLCAic3JjL3VpL2NvbW1vbi9UYWJSZW5kZXJlci50cyIsICJzcmMvdXRpbHMvc2V0dGluZ3MtY29tcGF0LnRzIiwgInNyYy9tb2RhbHMvQ29tbWFuZFBpY2tlck1vZGFsLnRzIiwgInNyYy9tb2RhbHMvSWNvblBpY2tlck1vZGFsLnRzIiwgInNyYy91aS90YWJzL0hpZGVyVGFiLnRzIiwgInNyYy91aS90YWJzL1RhYkJhclRhYi50cyIsICJzcmMvbW9kYWxzL05hbWVQaWNrZXJNb2RhbC50cyIsICJzcmMvdXRpbHMvY2hvb3NlQ29tbWFuZC50cyIsICJzcmMvdWkvdGFicy9TdGF0dXNCYXJUYWIudHMiLCAic3JjL3VpL3RhYnMvRXhwbG9yZXJUYWIudHMiLCAic3JjL3VpL3RhYnMvTW9iaWxlVGFiLnRzIiwgInNyYy9tYW5hZ2VyL1RhYkJhck1hbmFnZXIudHMiLCAic3JjL3V0aWxzL2NvbW1hbmRVdGlscy50cyIsICJzcmMvdXRpbHMvY29tbWFuZC1sb2dpYy50cyIsICJzcmMvbWFuYWdlci9TdGF0dXNCYXJNYW5hZ2VyLnRzIiwgInNyYy9tYW5hZ2VyL0V4cGxvcmVyTWFuYWdlci50cyIsICJzcmMvdXRpbHMvQnV0dG9uUmVwbGFjZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxuICogTWFpbiBwbHVnaW4gZmlsZVxuICovXG5cbmltcG9ydCB7IFBsdWdpbiwgTm90aWNlLCBQbGF0Zm9ybSwgQ29tbWFuZCwgRWRpdG9yLCBNYXJrZG93blZpZXcsIE1hcmtkb3duRmlsZUluZm8gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBVSVNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBVSU1hbmFnZXIgfSBmcm9tICcuL3VpTWFuYWdlcic7XG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4vdXRpbHMvY3NzVXRpbHMnO1xuaW1wb3J0IHsgcmVnaXN0ZXJDb21tYW5kcyB9IGZyb20gJy4vY29tbWFuZHMnO1xuaW1wb3J0IHsgVUlUd2Vha2VyU2V0dGluZ1RhYiB9IGZyb20gJy4vdWkvU2V0dGluZ3NUYWInO1xuaW1wb3J0IHsgVGFiQmFyTWFuYWdlciB9IGZyb20gJy4vbWFuYWdlci9UYWJCYXJNYW5hZ2VyJztcbmltcG9ydCB7IFN0YXR1c0Jhck1hbmFnZXIgfSBmcm9tICcuL21hbmFnZXIvU3RhdHVzQmFyTWFuYWdlcic7XG5pbXBvcnQgeyBFeHBsb3Jlck1hbmFnZXIgfSBmcm9tICcuL21hbmFnZXIvRXhwbG9yZXJNYW5hZ2VyJztcbmltcG9ydCB7IHJlY29yZENvbW1hbmRFeGVjdXRpb24gfSBmcm9tICcuL3V0aWxzL2NvbW1hbmRVdGlscyc7XG5pbXBvcnQgeyBCdXR0b25SZXBsYWNlciB9IGZyb20gJy4vdXRpbHMvQnV0dG9uUmVwbGFjZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSVR3ZWFrZXJQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogVUlTZXR0aW5ncztcblx0cHJpdmF0ZSB1aU1hbmFnZXI6IFVJTWFuYWdlcjtcblx0cHJpdmF0ZSBoZWxwQnV0dG9uUmVwbGFjZXI/OiBCdXR0b25SZXBsYWNlcjtcblx0cHJpdmF0ZSBzeW5jQnV0dG9uUmVwbGFjZXI/OiBCdXR0b25SZXBsYWNlcjtcblx0cHVibGljIHNldHRpbmdUYWI/OiBVSVR3ZWFrZXJTZXR0aW5nVGFiO1xuXHRwdWJsaWMgdGFiQmFyTWFuYWdlcj86IFRhYkJhck1hbmFnZXI7XG5cdHB1YmxpYyBzdGF0dXNCYXJNYW5hZ2VyPzogU3RhdHVzQmFyTWFuYWdlcjtcblx0cHVibGljIGV4cGxvcmVyTWFuYWdlcj86IEV4cGxvcmVyTWFuYWdlcjtcblxuXHRnZXQgaXNNb2JpbGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIFBsYXRmb3JtLmlzTW9iaWxlIHx8XG5cdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnaXMtbW9iaWxlJykgfHxcblx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbXVsYXRlLW1vYmlsZScpO1xuXHR9XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHQvLyBJbml0aWFsaXplIFVJIG1hbmFnZXJcblx0XHR0aGlzLnVpTWFuYWdlciA9IG5ldyBVSU1hbmFnZXIodGhpcywgdGhpcy5zZXR0aW5ncyk7XG5cdFx0dGhpcy51aU1hbmFnZXIuYXBwbHlTdHlsZXMoKTtcblxuXHRcdC8vIEluaXRpYWxpemUgVGFiIEJhciBNYW5hZ2VyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzKSB7XG5cdFx0XHR0aGlzLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzID0gW107XG5cdFx0fVxuXHRcdHRoaXMudGFiQmFyTWFuYWdlciA9IG5ldyBUYWJCYXJNYW5hZ2VyKHRoaXMpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBTdGF0dXMgQmFyIE1hbmFnZXJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMpIHtcblx0XHRcdHRoaXMuc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMgPSBbXTtcblx0XHR9XG5cdFx0dGhpcy5zdGF0dXNCYXJNYW5hZ2VyID0gbmV3IFN0YXR1c0Jhck1hbmFnZXIodGhpcyk7XG5cblx0XHQvLyBJbml0aWFsaXplIEV4cGxvcmVyIE1hbmFnZXJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcykge1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzID0gW107XG5cdFx0fVxuXHRcdHRoaXMuZXhwbG9yZXJNYW5hZ2VyID0gbmV3IEV4cGxvcmVyTWFuYWdlcih0aGlzKTtcblxuXHRcdC8vIFJlZ2lzdGVyIGNvbW1hbmRzXG5cdFx0cmVnaXN0ZXJDb21tYW5kcyh7XG5cdFx0XHRwbHVnaW46IHRoaXMsXG5cdFx0XHRzZXR0aW5nczogdGhpcy5zZXR0aW5ncyxcblx0XHRcdHNhdmVTZXR0aW5nczogKCkgPT4gdGhpcy5zYXZlU2V0dGluZ3MoKSxcblx0XHRcdHJlZnJlc2g6ICgpID0+IHRoaXMucmVmcmVzaCgpLFxuXHRcdH0pO1xuXG5cdFx0Ly8gU2V0IHVwIGNvbW1hbmQgZXhlY3V0aW9uIGludGVyY2VwdG9yIGZvciB0b2dnbGUgc3RhdGUgcmVmcmVzaFxuXHRcdHRoaXMuc2V0dXBUb2dnbGVTdGF0ZVJlZnJlc2goKTtcblxuXHRcdC8vIFNldCB1cCBldmVudC1kcml2ZW4gdG9nZ2xlIHN0YXRlIHJlZnJlc2ggKG5vIHBvbGxpbmcgbmVlZGVkKVxuXHRcdHRoaXMuc2V0dXBUb2dnbGVTdGF0ZU9ic2VydmVycygpO1xuXG5cdFx0Ly8gUmVnaXN0ZXIgc2V0dGluZ3MgdGFiXG5cdFx0dGhpcy5zZXR0aW5nVGFiID0gbmV3IFVJVHdlYWtlclNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpO1xuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYih0aGlzLnNldHRpbmdUYWIpO1xuXG5cdFx0Ly8gU2V0IHVwIGhlbHAgYnV0dG9uIHJlcGxhY2VtZW50XG5cdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25SZXBsYWNlbWVudCgpO1xuXG5cdFx0Ly8gU2V0IHVwIHN5bmMgYnV0dG9uIHJlcGxhY2VtZW50IChvbmx5IG9uIG1vYmlsZSlcblx0XHRpZiAodGhpcy5pc01vYmlsZSkge1xuXHRcdFx0dGhpcy5zZXR1cFN5bmNCdXR0b25SZXBsYWNlbWVudCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBNYWtlIHN1cmUgY2xhc3MgaXMgcmVtb3ZlZCBvbiBkZXNrdG9wXG5cdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXR3ZWFrZXItaGlkZS1zeW5jLWJ1dHRvbicpO1xuXHRcdH1cblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdGlmICh0aGlzLnVpTWFuYWdlcikge1xuXHRcdFx0dGhpcy51aU1hbmFnZXIuY2xlYW51cCgpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5leHBsb3Jlck1hbmFnZXIpIHtcblx0XHRcdHRoaXMuZXhwbG9yZXJNYW5hZ2VyLmNsZWFudXAoKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuc3RhdHVzQmFyTWFuYWdlcikge1xuXHRcdFx0dGhpcy5zdGF0dXNCYXJNYW5hZ2VyLmNsZWFudXAoKTtcblx0XHR9XG5cblx0XHR0aGlzLmhlbHBCdXR0b25SZXBsYWNlcj8udW5pbnN0YWxsKCk7XG5cdFx0dGhpcy5zeW5jQnV0dG9uUmVwbGFjZXI/LnVuaW5zdGFsbCgpO1xuXG5cdFx0Ly8gUmVzdG9yZSB3cmFwcGVkIGNvbW1hbmQgY2FsbGJhY2tzXG5cdFx0Zm9yIChjb25zdCB3cmFwcGVyIG9mIHRoaXMud3JhcHBlZENvbW1hbmRzLnZhbHVlcygpKSB7XG5cdFx0XHR3cmFwcGVyLnJlc3RvcmUoKTtcblx0XHR9XG5cdFx0dGhpcy53cmFwcGVkQ29tbWFuZHMuY2xlYXIoKTtcblxuXHRcdC8vIENsZWFudXAgQ1NTIGNsYXNzZXNcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXR3ZWFrZXItaGlkZS1oZWxwLWJ1dHRvbicpO1xuXHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgndWktdHdlYWtlci1oaWRlLXN5bmMtYnV0dG9uJyk7XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCkgYXMgUGFydGlhbDxVSVNldHRpbmdzPiB8IG51bGw7XG5cdFx0XHQvLyBIYW5kbGUgY29ycnVwdGVkIG9yIGVtcHR5IGRhdGFcblx0XHRcdGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShkYXRhKSkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUyk7XG5cdFx0XHRcdC8vIFNhdmUgZGVmYXVsdHMgdG8gZml4IGNvcnJ1cHRlZCBmaWxlXG5cdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhKTtcblx0XHRcdC8vIEVuc3VyZSBoZWxwQnV0dG9uUmVwbGFjZW1lbnQgc3RydWN0dXJlIGV4aXN0c1xuXHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCA9IHtcblx0XHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRcdFx0XHRjb21tYW5kSWQ6ICcnLFxuXHRcdFx0XHRcdGljb25JZDogJ3NldHRpbmdzLTInLFxuXHRcdFx0XHR9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRW5zdXJlIGljb25JZCBpcyBkZWZpbmVkIGV2ZW4gaWYgaGVscEJ1dHRvblJlcGxhY2VtZW50IGV4aXN0c1xuXHRcdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Lmljb25JZCkge1xuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Lmljb25JZCA9ICd3cmVuY2gnO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEVuc3VyZSBzeW5jQnV0dG9uUmVwbGFjZW1lbnQgc3RydWN0dXJlIGV4aXN0c1xuXHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudCkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudCA9IHtcblx0XHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRcdFx0XHRjb21tYW5kSWQ6ICcnLFxuXHRcdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXG5cdFx0XHRcdH07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBFbnN1cmUgaWNvbklkIGlzIGRlZmluZWQgZXZlbiBpZiBzeW5jQnV0dG9uUmVwbGFjZW1lbnQgZXhpc3RzXG5cdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkID0gJ3dyZW5jaCc7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gTWlncmF0ZSBtZE9ubHkgb3IgZmlsZVR5cGVGaWx0ZXIgdG8gc2hvd09uRmlsZVR5cGVzL2hpZGVPbkZpbGVUeXBlcyBmb3IgdGFiQmFyQ29tbWFuZHNcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzKSB7XG5cdFx0XHRcdGxldCBuZWVkc1NhdmUgPSBmYWxzZTtcblx0XHRcdFx0Zm9yIChjb25zdCBwYWlyIG9mIHRoaXMuc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMpIHtcblx0XHRcdFx0XHQvLyBDaGVjayBpZiBvbGQgcHJvcGVydGllcyBleGlzdCBpbiB0aGUgbG9hZGVkIGRhdGEgKGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5KVxuXHRcdFx0XHRcdGNvbnN0IHBhaXJXaXRoT2xkUHJvcHMgPSBwYWlyIGFzIHtcblx0XHRcdFx0XHRcdG1kT25seT86IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRmaWxlVHlwZUZpbHRlcj86IHN0cmluZztcblx0XHRcdFx0XHRcdHNob3dPbkZpbGVUeXBlcz86IHN0cmluZztcblx0XHRcdFx0XHRcdGhpZGVPbkZpbGVUeXBlcz86IHN0cmluZztcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0Ly8gU2tpcCBpZiBhbHJlYWR5IG1pZ3JhdGVkXG5cdFx0XHRcdFx0aWYgKHBhaXIuc2hvd09uRmlsZVR5cGVzICE9PSB1bmRlZmluZWQgfHwgcGFpci5oaWRlT25GaWxlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gTWlncmF0ZSBmcm9tIG1kT25seTogdHJ1ZVxuXHRcdFx0XHRcdGlmIChwYWlyV2l0aE9sZFByb3BzLm1kT25seSA9PT0gdHJ1ZSAmJiAhcGFpci5zaG93T25GaWxlVHlwZXMpIHtcblx0XHRcdFx0XHRcdHBhaXIuc2hvd09uRmlsZVR5cGVzID0gJ21kLG1keCc7XG5cdFx0XHRcdFx0XHRkZWxldGUgcGFpcldpdGhPbGRQcm9wcy5tZE9ubHk7XG5cdFx0XHRcdFx0XHRuZWVkc1NhdmUgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE1pZ3JhdGUgZnJvbSBmaWxlVHlwZUZpbHRlciAob2xkIG1peGVkIHN5bnRheClcblx0XHRcdFx0XHRpZiAocGFpcldpdGhPbGRQcm9wcy5maWxlVHlwZUZpbHRlciAmJiAhcGFpci5zaG93T25GaWxlVHlwZXMgJiYgIXBhaXIuaGlkZU9uRmlsZVR5cGVzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWx0ZXIgPSBwYWlyV2l0aE9sZFByb3BzLmZpbGVUeXBlRmlsdGVyO1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBmaWx0ZXIuc3BsaXQoJywnKS5tYXAocCA9PiBwLnRyaW0oKSkuZmlsdGVyKHAgPT4gcCk7XG5cdFx0XHRcdFx0XHRjb25zdCBzaG93VHlwZXM6IHN0cmluZ1tdID0gW107XG5cdFx0XHRcdFx0XHRjb25zdCBoaWRlVHlwZXM6IHN0cmluZ1tdID0gW107XG5cblx0XHRcdFx0XHRcdGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuXHRcdFx0XHRcdFx0XHRpZiAocGFydC5zdGFydHNXaXRoKCctJykpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBleHQgPSBwYXJ0LnNsaWNlKDEpLnJlcGxhY2UoL15cXC4vLCAnJykudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoZXh0KSBoaWRlVHlwZXMucHVzaChleHQpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGV4dCA9IHBhcnQucmVwbGFjZSgvXlxcLi8sICcnKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChleHQpIHNob3dUeXBlcy5wdXNoKGV4dCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKHNob3dUeXBlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdHBhaXIuc2hvd09uRmlsZVR5cGVzID0gc2hvd1R5cGVzLmpvaW4oJywnKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChoaWRlVHlwZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0XHRwYWlyLmhpZGVPbkZpbGVUeXBlcyA9IGhpZGVUeXBlcy5qb2luKCcsJyk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGRlbGV0ZSBwYWlyV2l0aE9sZFByb3BzLmZpbGVUeXBlRmlsdGVyO1xuXHRcdFx0XHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5lZWRzU2F2ZSkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcignW1VJIFR3ZWFrZXJdIEZhaWxlZCB0byBsb2FkIHNldHRpbmdzOicsIGVycm9yKTtcblx0XHRcdC8vIEZhbGwgYmFjayB0byBkZWZhdWx0cyBpZiBsb2FkaW5nIGZhaWxzXG5cdFx0XHR0aGlzLnNldHRpbmdzID0geyAuLi5ERUZBVUxUX1NFVFRJTkdTIH07XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXHRyZWZyZXNoKCkge1xuXHRcdGlmICh0aGlzLnVpTWFuYWdlcikge1xuXHRcdFx0dGhpcy51aU1hbmFnZXIudXBkYXRlU2V0dGluZ3ModGhpcy5zZXR0aW5ncyk7XG5cdFx0fVxuXHRcdHRoaXMuZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcblx0XHR0aGlzLnNldHVwSGVscEJ1dHRvblJlcGxhY2VtZW50KCk7XG5cdFx0Ly8gQWx3YXlzIHVwZGF0ZSBzeW5jIGJ1dHRvbiBDU1MgdG8gZW5zdXJlIGl0IG1hdGNoZXMgY3VycmVudCBzZXR0aW5nc1xuXHRcdHRoaXMudXBkYXRlU3luY0J1dHRvbkNTUygpO1xuXHRcdGlmICh0aGlzLmlzTW9iaWxlKSB7XG5cdFx0XHR0aGlzLnNldHVwU3luY0J1dHRvblJlcGxhY2VtZW50KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIE1ha2Ugc3VyZSBjbGFzcyBpcyByZW1vdmVkIG9uIGRlc2t0b3Bcblx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgndWktdHdlYWtlci1oaWRlLXN5bmMtYnV0dG9uJyk7XG5cdFx0XHR0aGlzLnN5bmNCdXR0b25SZXBsYWNlcj8udW5pbnN0YWxsKCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzZXR1cEhlbHBCdXR0b25SZXBsYWNlbWVudCgpIHtcblx0XHQvLyBVcGRhdGUgQ1NTIGZpcnN0XG5cdFx0dGhpcy51cGRhdGVIZWxwQnV0dG9uQ1NTKCk7XG5cblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHR0aGlzLmhlbHBCdXR0b25SZXBsYWNlcj8udW5pbnN0YWxsKCk7XG5cdFx0XHR0aGlzLmhlbHBCdXR0b25SZXBsYWNlciA9IHVuZGVmaW5lZDtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMuaGVscEJ1dHRvblJlcGxhY2VyKSB7XG5cdFx0XHR0aGlzLmhlbHBCdXR0b25SZXBsYWNlciA9IG5ldyBCdXR0b25SZXBsYWNlcihcblx0XHRcdFx0Jy5jbGlja2FibGUtaWNvbiBzdmcuaGVscCcsXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Lmljb25JZCB8fCAnc2V0dGluZ3MtMicsXG5cdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjb21tYW5kSWQgPSB0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudD8uY29tbWFuZElkO1xuXHRcdFx0XHRcdGlmIChjb21tYW5kSWQpIHtcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBjb21tYW5kcyA9ICh0aGlzLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBleGVjdXRlQ29tbWFuZEJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPiB9IH0pLmNvbW1hbmRzO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChjb21tYW5kcz8uZXhlY3V0ZUNvbW1hbmRCeUlkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCBjb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoY29tbWFuZElkKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdDb21tYW5kIGV4ZWN1dGlvbiBub3QgYXZhaWxhYmxlJyk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBGYWlsZWQgdG8gZXhlY3V0ZSBjb21tYW5kOiAke2NvbW1hbmRJZH1gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzdXJ2aXZhbE9ic2VydmVyOiB0cnVlLFxuXHRcdFx0XHRcdHBhcmVudFNlbGVjdG9yOiAnLndvcmtzcGFjZS1kcmF3ZXItdmF1bHQtYWN0aW9ucycsXG5cdFx0XHRcdFx0dW5pcXVlSWQ6ICd1aS10d2Vha2VyLWhlbHAtcmVwbGFjZW1lbnQnLFxuXHRcdFx0XHRcdGNzc0NsYXNzOiAndWktdHdlYWtlci1oZWxwLXJlcGxhY2VtZW50Jyxcblx0XHRcdFx0XHRmaW5kQnV0dG9uOiAocGFyZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBjbGlja2FibGVJY29ucyA9IEFycmF5LmZyb20ocGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbGlja2FibGUtaWNvbicpKTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgaWNvbiBvZiBjbGlja2FibGVJY29ucykge1xuXHRcdFx0XHRcdFx0XHRpZiAoaWNvbi5xdWVyeVNlbGVjdG9yKCdzdmcuaGVscCcpKSByZXR1cm4gaWNvbiBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0KTtcblx0XHRcdHRoaXMuaGVscEJ1dHRvblJlcGxhY2VyLmluc3RhbGwoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5oZWxwQnV0dG9uUmVwbGFjZXIudW5pbnN0YWxsKCk7XG5cdFx0XHR0aGlzLmhlbHBCdXR0b25SZXBsYWNlciA9IHVuZGVmaW5lZDtcblx0XHRcdHRoaXMuc2V0dXBIZWxwQnV0dG9uUmVwbGFjZW1lbnQoKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgdXBkYXRlSGVscEJ1dHRvbkNTUygpIHtcblx0XHQvLyBIaWRlIGhlbHAgYnV0dG9uIGlmIGVpdGhlciBoZWxwQnV0dG9uIGlzIHNldCB0byBcImhpZGVcIiBPUiByZXBsYWNlbWVudCBpcyBlbmFibGVkXG5cdFx0Y29uc3Qgc2hvdWxkSGlkZUhlbHBCdXR0b24gPSB0aGlzLnNldHRpbmdzLmhlbHBCdXR0b24gPT09ICdoaWRlJyB8fCB0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZDtcblxuXHRcdC8vIFVzZSBDU1MgY2xhc3MgaW5zdGVhZCBvZiBzdHlsZSBlbGVtZW50XG5cdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCd1aS10d2Vha2VyLWhpZGUtaGVscC1idXR0b24nLCBzaG91bGRIaWRlSGVscEJ1dHRvbik7XG5cdH1cblxuXHRwcml2YXRlIHNldHVwU3luY0J1dHRvblJlcGxhY2VtZW50KCkge1xuXHRcdC8vIFVwZGF0ZSBDU1MgZmlyc3Rcblx0XHR0aGlzLnVwZGF0ZVN5bmNCdXR0b25DU1MoKTtcblxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQgfHwgIXRoaXMuaXNNb2JpbGUpIHtcblx0XHRcdHRoaXMuc3luY0J1dHRvblJlcGxhY2VyPy51bmluc3RhbGwoKTtcblx0XHRcdHRoaXMuc3luY0J1dHRvblJlcGxhY2VyID0gdW5kZWZpbmVkO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghdGhpcy5zeW5jQnV0dG9uUmVwbGFjZXIpIHtcblx0XHRcdHRoaXMuc3luY0J1dHRvblJlcGxhY2VyID0gbmV3IEJ1dHRvblJlcGxhY2VyKFxuXHRcdFx0XHQnLnN5bmMtc3RhdHVzLWljb24nLFxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5pY29uSWQgfHwgJ3dyZW5jaCcsXG5cdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjb21tYW5kSWQgPSB0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudD8uY29tbWFuZElkO1xuXHRcdFx0XHRcdGlmIChjb21tYW5kSWQpIHtcblx0XHRcdFx0XHRcdGlmIChjb21tYW5kSWQgPT09ICdvcGVuLXNldHRpbmdzJyB8fCBjb21tYW5kSWQgPT09ICd1aS10d2Vha2VyOm9wZW4tc2V0dGluZ3MnKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNldHRpbmdBcGkgPSAodGhpcy5hcHAgYXMgeyBzZXR0aW5nPzogeyBvcGVuPzogKCkgPT4gdm9pZDsgb3BlblRhYkJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gdm9pZCB9IH0pLnNldHRpbmc7XG5cdFx0XHRcdFx0XHRcdGlmIChzZXR0aW5nQXBpKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ0FwaS5vcGVuPy4oKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5nVGFiPy5pZCAmJiBzZXR0aW5nQXBpLm9wZW5UYWJCeUlkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5nQXBpLm9wZW5UYWJCeUlkKHRoaXMuc2V0dGluZ1RhYi5pZCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQoKHRoaXMuYXBwIGFzIHsgY29tbWFuZHM/OiB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0gfSkuY29tbWFuZHMgYXMgeyBleGVjdXRlQ29tbWFuZEJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPiB9KT8uZXhlY3V0ZUNvbW1hbmRCeUlkPy4oY29tbWFuZElkKS5jYXRjaCgoZXJyb3I6IHVua25vd24pID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ1tVSSBUd2Vha2VyXSBFcnJvciBleGVjdXRpbmcgY29tbWFuZDonLCBlcnJvcik7XG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRmFpbGVkIHRvIGV4ZWN1dGUgY29tbWFuZDogJHtjb21tYW5kSWR9YCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHN1cnZpdmFsT2JzZXJ2ZXI6IHRydWUsXG5cdFx0XHRcdFx0cGFyZW50U2VsZWN0b3I6ICcud29ya3NwYWNlLWRyYXdlci5tb2QtcmlnaHQnLFxuXHRcdFx0XHRcdHVuaXF1ZUlkOiAndWktdHdlYWtlci1zeW5jLXJlcGxhY2VtZW50Jyxcblx0XHRcdFx0XHRjc3NDbGFzczogJ3VpLXR3ZWFrZXItc3luYy1yZXBsYWNlbWVudCcsXG5cdFx0XHRcdFx0aGFuZGxlVG91Y2g6IHRydWUsXG5cdFx0XHRcdFx0b25BZnRlckluc3RhbGw6IChjdXN0b20sIG9yaWdpbmFsKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAob3JpZ2luYWwpIHtcblx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMob3JpZ2luYWwsIHsgZGlzcGxheTogJ25vbmUnIH0pO1xuXHRcdFx0XHRcdFx0XHRvcmlnaW5hbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1vcmlnaW5hbC1zeW5jLWhpZGRlbicsICd0cnVlJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRvbkJlZm9yZVVuaW5zdGFsbDogKGN1c3RvbSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3Qgb3JpZ2luYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdWktdHdlYWtlci1vcmlnaW5hbC1zeW5jLWhpZGRlbl0nKTtcblx0XHRcdFx0XHRcdG9yaWdpbmFscy5mb3JFYWNoKGVsID0+IHtcblx0XHRcdFx0XHRcdFx0KGVsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpO1xuXHRcdFx0XHRcdFx0XHRlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1vcmlnaW5hbC1zeW5jLWhpZGRlbicpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmaW5kQnV0dG9uOiAocGFyZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBkcmF3ZXJIZWFkZXIgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1kcmF3ZXItaGVhZGVyJyk7XG5cdFx0XHRcdFx0XHRpZiAoIWRyYXdlckhlYWRlcikgcmV0dXJuIG51bGw7XG5cblx0XHRcdFx0XHRcdGxldCBzeW5jQnV0dG9uID0gZHJhd2VySGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5zeW5jLXN0YXR1cy1pY29uJykgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRpZiAoIXN5bmNCdXR0b24pIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgY2xpY2thYmxlSWNvbnMgPSBBcnJheS5mcm9tKGRyYXdlckhlYWRlci5xdWVyeVNlbGVjdG9yQWxsKCcuY2xpY2thYmxlLWljb24nKSk7XG5cdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgaWNvbiBvZiBjbGlja2FibGVJY29ucykge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChpY29uLnF1ZXJ5U2VsZWN0b3IoJ3N2Zy5yZWZyZXNoLWN3LW9mZiwgc3ZnLnJlZnJlc2gtY3cnKSkgcmV0dXJuIGljb24gYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiBzeW5jQnV0dG9uO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0KTtcblx0XHRcdHRoaXMuc3luY0J1dHRvblJlcGxhY2VyLmluc3RhbGwoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5zeW5jQnV0dG9uUmVwbGFjZXIudW5pbnN0YWxsKCk7XG5cdFx0XHR0aGlzLnN5bmNCdXR0b25SZXBsYWNlciA9IHVuZGVmaW5lZDtcblx0XHRcdHRoaXMuc2V0dXBTeW5jQnV0dG9uUmVwbGFjZW1lbnQoKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgdXBkYXRlU3luY0J1dHRvbkNTUygpIHtcblx0XHQvLyBIaWRlIHN5bmMgYnV0dG9uIGlmIHJlcGxhY2VtZW50IGlzIGVuYWJsZWQgQU5EIHdlJ3JlIG9uIG1vYmlsZVxuXHRcdC8vIFVzZSBDU1MgY2xhc3MgaW5zdGVhZCBvZiBzdHlsZSBlbGVtZW50XG5cdFx0Y29uc3Qgc2hvdWxkSGlkZSA9ICh0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCA/PyBmYWxzZSkgJiYgdGhpcy5pc01vYmlsZTtcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ3VpLXR3ZWFrZXItaGlkZS1zeW5jLWJ1dHRvbicsIHNob3VsZEhpZGUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNldCB1cCBldmVudC1kcml2ZW4gb2JzZXJ2ZXJzIGZvciB0b2dnbGUgc3RhdGUgY2hhbmdlc1xuXHQgKiBXcmFwcyBpbmRpdmlkdWFsIGNvbW1hbmQgY2FsbGJhY2tzIHRvIGRldGVjdCBleGVjdXRpb24gcmVnYXJkbGVzcyBvZiB0cmlnZ2VyIG1ldGhvZFxuXHQgKi9cblx0cHJpdmF0ZSBzZXR1cFRvZ2dsZVN0YXRlT2JzZXJ2ZXJzKCk6IHZvaWQge1xuXHRcdGNvbnN0IHJlZnJlc2hUb2dnbGVTdGF0ZXMgPSAoKSA9PiB7XG5cdFx0XHRpZiAodGhpcy5leHBsb3Jlck1hbmFnZXIpIHtcblx0XHRcdFx0dGhpcy5leHBsb3Jlck1hbmFnZXIucmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMudGFiQmFyTWFuYWdlcikge1xuXHRcdFx0XHR0aGlzLnRhYkJhck1hbmFnZXIucmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBXYXRjaCBmb3IgdGhlbWUgY2hhbmdlcyBvbiBib2R5IGVsZW1lbnQgKGNsYXNzIGF0dHJpYnV0ZSBjaGFuZ2VzKVxuXHRcdGNvbnN0IGJvZHlPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHJlZnJlc2hUb2dnbGVTdGF0ZXMpO1xuXHRcdGJvZHlPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcblx0XHRcdGF0dHJpYnV0ZXM6IHRydWUsXG5cdFx0XHRhdHRyaWJ1dGVGaWx0ZXI6IFsnY2xhc3MnXVxuXHRcdH0pO1xuXG5cdFx0Ly8gV2F0Y2ggZm9yIGxheW91dCBjaGFuZ2VzIChzaWRlYmFyIHRvZ2dsZXMsIHBhbmVsIGNoYW5nZXMsIGV0Yy4pXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgcmVmcmVzaFRvZ2dsZVN0YXRlcylcblx0XHQpO1xuXG5cdFx0Ly8gV2F0Y2ggZm9yIENTUyBjbGFzcyBjaGFuZ2VzIG9uIHdvcmtzcGFjZSBjb250YWluZXIgKHJpYmJvbiwgc2lkZWJhcnMpXG5cdFx0Y29uc3Qgd29ya3NwYWNlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlJyk7XG5cdFx0aWYgKHdvcmtzcGFjZUVsKSB7XG5cdFx0XHRjb25zdCB3b3Jrc3BhY2VPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHJlZnJlc2hUb2dnbGVTdGF0ZXMpO1xuXHRcdFx0d29ya3NwYWNlT2JzZXJ2ZXIub2JzZXJ2ZSh3b3Jrc3BhY2VFbCwge1xuXHRcdFx0XHRhdHRyaWJ1dGVzOiB0cnVlLFxuXHRcdFx0XHRhdHRyaWJ1dGVGaWx0ZXI6IFsnY2xhc3MnXVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gVHJhY2sgd3JhcHBlZCBjb21tYW5kcyB0byBhdm9pZCBkb3VibGUtd3JhcHBpbmcgYW5kIGFsbG93IGNsZWFudXBcblx0cHJpdmF0ZSB3cmFwcGVkQ29tbWFuZHM6IE1hcDxzdHJpbmcsIHsgcmVzdG9yZTogKCkgPT4gdm9pZCB9PiA9IG5ldyBNYXAoKTtcblxuXHQvKipcblx0ICogV3JhcCBpbmRpdmlkdWFsIGNvbW1hbmQgY2FsbGJhY2tzIHRvIGludGVyY2VwdCBleGVjdXRpb25cblx0ICogVGhpcyBjYXRjaGVzIGNvbW1hbmRzIHRyaWdnZXJlZCB2aWEgaG90a2V5LCBwYWxldHRlLCBvciBwcm9ncmFtbWF0aWNhbGx5XG5cdCAqL1xuXHRwcml2YXRlIHNldHVwVG9nZ2xlU3RhdGVSZWZyZXNoKCk6IHZvaWQge1xuXHRcdC8vIEluaXRpYWwgd3JhcCBvZiBhbGwgdG9nZ2xlIGNvbW1hbmRzXG5cdFx0dGhpcy53cmFwVG9nZ2xlQ29tbWFuZHMoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBXcmFwIGNhbGxiYWNrcyBmb3IgYWxsIHRvZ2dsZSBjb21tYW5kc1xuXHQgKiBDYWxsIHRoaXMgd2hlbiB0b2dnbGUgY29tbWFuZHMgYXJlIGFkZGVkL3JlbW92ZWRcblx0ICovXG5cdHB1YmxpYyB3cmFwVG9nZ2xlQ29tbWFuZHMoKTogdm9pZCB7XG5cdFx0Y29uc3QgY29tbWFuZHNPYmogPSAodGhpcy5hcHAgYXMgeyBjb21tYW5kcz86IHsgY29tbWFuZHM/OiBSZWNvcmQ8c3RyaW5nLCBDb21tYW5kPiB9IH0pLmNvbW1hbmRzO1xuXHRcdGlmICghY29tbWFuZHNPYmo/LmNvbW1hbmRzKSByZXR1cm47XG5cblx0XHRjb25zdCByZWZyZXNoVG9nZ2xlU3RhdGVzID0gKCkgPT4ge1xuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLmV4cGxvcmVyTWFuYWdlcikge1xuXHRcdFx0XHRcdHRoaXMuZXhwbG9yZXJNYW5hZ2VyLnJlZnJlc2hUb2dnbGVTdGF0ZXMoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodGhpcy50YWJCYXJNYW5hZ2VyKSB7XG5cdFx0XHRcdFx0dGhpcy50YWJCYXJNYW5hZ2VyLnJlZnJlc2hUb2dnbGVTdGF0ZXMoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgNTApO1xuXHRcdH07XG5cblx0XHQvLyBHZXQgYWxsIHRvZ2dsZSBjb21tYW5kIElEc1xuXHRcdGNvbnN0IHRvZ2dsZUNvbW1hbmRJZHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblx0XHR0aGlzLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHM/LmZvckVhY2gocCA9PiB7XG5cdFx0XHRpZiAocC50b2dnbGVJY29uKSB0b2dnbGVDb21tYW5kSWRzLmFkZChwLmlkKTtcblx0XHR9KTtcblx0XHR0aGlzLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzPy5mb3JFYWNoKHAgPT4ge1xuXHRcdFx0aWYgKHAudG9nZ2xlSWNvbikgdG9nZ2xlQ29tbWFuZElkcy5hZGQocC5pZCk7XG5cdFx0fSk7XG5cblx0XHQvLyBVbndyYXAgY29tbWFuZHMgdGhhdCBhcmUgbm8gbG9uZ2VyIHRvZ2dsZSBjb21tYW5kc1xuXHRcdGZvciAoY29uc3QgW2lkLCB3cmFwcGVyXSBvZiB0aGlzLndyYXBwZWRDb21tYW5kcykge1xuXHRcdFx0aWYgKCF0b2dnbGVDb21tYW5kSWRzLmhhcyhpZCkpIHtcblx0XHRcdFx0d3JhcHBlci5yZXN0b3JlKCk7XG5cdFx0XHRcdHRoaXMud3JhcHBlZENvbW1hbmRzLmRlbGV0ZShpZCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gV3JhcCBuZXcgdG9nZ2xlIGNvbW1hbmRzXG5cdFx0Zm9yIChjb25zdCBpZCBvZiB0b2dnbGVDb21tYW5kSWRzKSB7XG5cdFx0XHRpZiAodGhpcy53cmFwcGVkQ29tbWFuZHMuaGFzKGlkKSkgY29udGludWU7IC8vIEFscmVhZHkgd3JhcHBlZFxuXG5cdFx0XHRjb25zdCBjb21tYW5kID0gY29tbWFuZHNPYmouY29tbWFuZHNbaWRdO1xuXHRcdFx0aWYgKCFjb21tYW5kKSBjb250aW51ZTtcblxuXHRcdFx0Ly8gV3JhcCB0aGUgYXBwcm9wcmlhdGUgY2FsbGJhY2tcblx0XHRcdGlmIChjb21tYW5kLmNoZWNrQ2FsbGJhY2spIHtcblx0XHRcdFx0Y29uc3Qgb3JpZ2luYWwgPSBjb21tYW5kLmNoZWNrQ2FsbGJhY2s7XG5cdFx0XHRcdGNvbW1hbmQuY2hlY2tDYWxsYmFjayA9IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IG9yaWdpbmFsKGNoZWNraW5nKTtcblx0XHRcdFx0XHRpZiAoIWNoZWNraW5nKSB7XG5cdFx0XHRcdFx0XHRyZWNvcmRDb21tYW5kRXhlY3V0aW9uKGlkKTtcblx0XHRcdFx0XHRcdHJlZnJlc2hUb2dnbGVTdGF0ZXMoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0fTtcblx0XHRcdFx0dGhpcy53cmFwcGVkQ29tbWFuZHMuc2V0KGlkLCB7XG5cdFx0XHRcdFx0cmVzdG9yZTogKCkgPT4geyBjb21tYW5kLmNoZWNrQ2FsbGJhY2sgPSBvcmlnaW5hbDsgfVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSBpZiAoY29tbWFuZC5jYWxsYmFjaykge1xuXHRcdFx0XHRjb25zdCBvcmlnaW5hbCA9IGNvbW1hbmQuY2FsbGJhY2s7XG5cdFx0XHRcdGNvbW1hbmQuY2FsbGJhY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gb3JpZ2luYWwoKTtcblx0XHRcdFx0XHRyZWNvcmRDb21tYW5kRXhlY3V0aW9uKGlkKTtcblx0XHRcdFx0XHRyZWZyZXNoVG9nZ2xlU3RhdGVzKCk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0fTtcblx0XHRcdFx0dGhpcy53cmFwcGVkQ29tbWFuZHMuc2V0KGlkLCB7XG5cdFx0XHRcdFx0cmVzdG9yZTogKCkgPT4geyBjb21tYW5kLmNhbGxiYWNrID0gb3JpZ2luYWw7IH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2UgaWYgKGNvbW1hbmQuZWRpdG9yQ2hlY2tDYWxsYmFjaykge1xuXHRcdFx0XHRjb25zdCBvcmlnaW5hbCA9IGNvbW1hbmQuZWRpdG9yQ2hlY2tDYWxsYmFjaztcblx0XHRcdFx0Y29tbWFuZC5lZGl0b3JDaGVja0NhbGxiYWNrID0gKGNoZWNraW5nLCBlZGl0b3IsIGN0eCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IG9yaWdpbmFsKGNoZWNraW5nLCBlZGl0b3IsIGN0eCk7XG5cdFx0XHRcdFx0aWYgKCFjaGVja2luZykge1xuXHRcdFx0XHRcdFx0cmVjb3JkQ29tbWFuZEV4ZWN1dGlvbihpZCk7XG5cdFx0XHRcdFx0XHRyZWZyZXNoVG9nZ2xlU3RhdGVzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdH07XG5cdFx0XHRcdHRoaXMud3JhcHBlZENvbW1hbmRzLnNldChpZCwge1xuXHRcdFx0XHRcdHJlc3RvcmU6ICgpID0+IHsgY29tbWFuZC5lZGl0b3JDaGVja0NhbGxiYWNrID0gb3JpZ2luYWw7IH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2UgaWYgKGNvbW1hbmQuZWRpdG9yQ2FsbGJhY2spIHtcblx0XHRcdFx0Y29uc3Qgb3JpZ2luYWwgPSBjb21tYW5kLmVkaXRvckNhbGxiYWNrO1xuXHRcdFx0XHRjb21tYW5kLmVkaXRvckNhbGxiYWNrID0gKGVkaXRvciwgY3R4KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gb3JpZ2luYWwoZWRpdG9yLCBjdHgpO1xuXHRcdFx0XHRcdHJlY29yZENvbW1hbmRFeGVjdXRpb24oaWQpO1xuXHRcdFx0XHRcdHJlZnJlc2hUb2dnbGVTdGF0ZXMoKTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR0aGlzLndyYXBwZWRDb21tYW5kcy5zZXQoaWQsIHtcblx0XHRcdFx0XHRyZXN0b3JlOiAoKSA9PiB7IGNvbW1hbmQuZWRpdG9yQ2FsbGJhY2sgPSBvcmlnaW5hbDsgfVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cbiIsICIvKipcbiAqIFNldHRpbmdzIGludGVyZmFjZSBhbmQgZGVmYXVsdHNcbiAqL1xuXG5pbXBvcnQgeyBVSVZpc2liaWxpdHlTdGF0ZSwgTW9iaWxlTmF2UG9zaXRpb24sIENvbW1hbmRJY29uUGFpciwgU3RhdHVzQmFySXRlbSwgRXhwbG9yZXJCdXR0b25JdGVtIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVUlTZXR0aW5ncyB7XG5cdC8vIEF1dG8taGlkZSBlbGVtZW50cyAoU2hvdy9IaWRlL1JldmVhbClcblx0dGl0bGVCYXI6IFVJVmlzaWJpbGl0eVN0YXRlO1xuXHRmaWxlRXhwbG9yZXJOYXZIZWFkZXI6IFVJVmlzaWJpbGl0eVN0YXRlO1xuXHRvdGhlck5hdkhlYWRlcnM6IFVJVmlzaWJpbGl0eVN0YXRlO1xuXHRsZWZ0VGFiSGVhZGVyczogVUlWaXNpYmlsaXR5U3RhdGU7XG5cdHJpZ2h0VGFiSGVhZGVyczogVUlWaXNpYmlsaXR5U3RhdGU7XG5cdHJpYmJvblJldmVhbE9uSG92ZXI6IGJvb2xlYW47IC8vIEJvb2xlYW4gdG9nZ2xlIGZvciBhdXRvLWNvbGxhcHNlIHJpYmJvblxuXHR2YXVsdFN3aXRjaGVyOiBVSVZpc2liaWxpdHlTdGF0ZTtcblx0aGVscEJ1dHRvbjogVUlWaXNpYmlsaXR5U3RhdGU7IC8vIENoYW5nZWQgdG8gc3VwcG9ydCBTaG93L0hpZGUvUmV2ZWFsXG5cdHNldHRpbmdzQnV0dG9uOiBVSVZpc2liaWxpdHlTdGF0ZTtcblxuXHQvLyBTaW1wbGUgdG9nZ2xlcyAoU2hvdy9IaWRlIG9ubHkpXG5cdHRhYkJhcjogYm9vbGVhbjtcblx0dGFiQmFySGlkZVdoZW5TaW5nbGU6IGJvb2xlYW47XG5cdGVuYWJsZVdpbmRvd0RyYWdnaW5nOiBib29sZWFuO1xuXHRuZXdOb3RlQnV0dG9uOiBib29sZWFuO1xuXHRuZXdGb2xkZXJCdXR0b246IGJvb2xlYW47XG5cdHNvcnRPcmRlckJ1dHRvbjogYm9vbGVhbjtcblx0YXV0b1JldmVhbEJ1dHRvbjogYm9vbGVhbjtcblx0Y29sbGFwc2VBbGxCdXR0b246IGJvb2xlYW47XG5cdHJlYWRpbmdNb2RlQnV0dG9uOiBib29sZWFuO1xuXHRib29rbWFya2VkQnV0dG9uOiBib29sZWFuO1xuXHRzZWFyY2hTZXR0aW5nc0J1dHRvbjogYm9vbGVhbjtcblx0dGFiTGlzdEljb246IFVJVmlzaWJpbGl0eVN0YXRlOyAvLyBDaGFuZ2VkIHRvIHN1cHBvcnQgUmV2ZWFsXG5cdG5ld1RhYkljb246IFVJVmlzaWJpbGl0eVN0YXRlOyAvLyBDaGFuZ2VkIHRvIHN1cHBvcnQgUmV2ZWFsXG5cdHRhYkNsb3NlQnV0dG9uOiBVSVZpc2liaWxpdHlTdGF0ZTsgLy8gQ2hhbmdlZCB0byBzdXBwb3J0IFJldmVhbFxuXHRzdGF0dXNCYXI6IGJvb2xlYW47XG5cdHNjcm9sbEJhcnM6IFVJVmlzaWJpbGl0eVN0YXRlOyAvLyBDaGFuZ2VkIHRvIHN1cHBvcnQgUmV2ZWFsXG5cdGxlZnRTaWRlYmFyVG9nZ2xlQnV0dG9uOiBVSVZpc2liaWxpdHlTdGF0ZTsgLy8gQ2hhbmdlZCB0byBzdXBwb3J0IFJldmVhbFxuXHRyaWdodFNpZGViYXJUb2dnbGVCdXR0b246IFVJVmlzaWJpbGl0eVN0YXRlOyAvLyBDaGFuZ2VkIHRvIHN1cHBvcnQgUmV2ZWFsXG5cdHRvb2x0aXBzOiBib29sZWFuO1xuXHRzZWFyY2hTdWdnZXN0aW9uczogYm9vbGVhbjtcblx0c2VhcmNoVGVybUNvdW50czogYm9vbGVhbjtcblx0cHJvcGVydGllc0luUmVhZGluZ1ZpZXc6IGJvb2xlYW47XG5cdHByb3BlcnRpZXNJbkhlYWRpbmc6IGJvb2xlYW47XG5cdGFkZFByb3BlcnR5QnV0dG9uOiBib29sZWFuO1xuXHRkZWVtcGhhc2l6ZVByb3BlcnRpZXM6IGJvb2xlYW47XG5cdGluc3RydWN0aW9uczogYm9vbGVhbjtcblxuXHQvLyBNb2JpbGUtc3BlY2lmaWMgc2V0dGluZ3MgKFNob3cvSGlkZSBvbmx5KVxuXHRtb2JpbGVDaGV2cm9uc0ljb246IGJvb2xlYW47XG5cdG5hdmlnYXRlQmFja0J1dHRvbjogYm9vbGVhbjtcblx0bmF2aWdhdGVGb3J3YXJkQnV0dG9uOiBib29sZWFuO1xuXHRxdWlja1N3aXRjaGVyQnV0dG9uOiBib29sZWFuO1xuXHRtb2JpbGVOZXdUYWJCdXR0b246IGJvb2xlYW47XG5cdG9wZW5UYWJCdXR0b246IGJvb2xlYW47XG5cdHJpYmJvbk1lbnVCdXR0b246IGJvb2xlYW47XG5cdHN3YXBNb2JpbGVOZXdUYWJJY29uOiBib29sZWFuO1xuXHRoaWRlTW9iaWxlVGl0bGU6IGJvb2xlYW47XG5cdGhpZGVNb2JpbGVTeW5jSWNvbjogYm9vbGVhbjtcblxuXHQvLyBNb2JpbGUgbmF2aWdhdGlvbiBtZW51IHBvc2l0aW9uc1xuXHRuYXZpZ2F0ZUJ1dHRvblBvc2l0aW9uOiBNb2JpbGVOYXZQb3NpdGlvbjtcblx0bmF2aWdhdGlvbkJ1dHRvblBvc2l0aW9uOiBNb2JpbGVOYXZQb3NpdGlvbjtcblx0cXVpY2tTd2l0Y2hlclBvc2l0aW9uOiBNb2JpbGVOYXZQb3NpdGlvbjtcblx0bmV3VGFiUG9zaXRpb246IE1vYmlsZU5hdlBvc2l0aW9uO1xuXHRvcGVuVGFic1Bvc2l0aW9uOiBNb2JpbGVOYXZQb3NpdGlvbjtcblx0cmliYm9uTWVudVBvc2l0aW9uOiBNb2JpbGVOYXZQb3NpdGlvbjtcblxuXHQvLyBBZHZhbmNlZCBzZXR0aW5nc1xuXHR2YXVsdFN3aXRjaGVyQmFja2dyb3VuZFRyYW5zcGFyZW5jeTogbnVtYmVyOyAvLyAwLTFcblx0aGVscEJ1dHRvblJlcGxhY2VtZW50OiB7XG5cdFx0ZW5hYmxlZDogYm9vbGVhbjtcblx0XHRjb21tYW5kSWQ6IHN0cmluZztcblx0XHRpY29uSWQ6IHN0cmluZztcblx0fTtcblx0c3luY0J1dHRvblJlcGxhY2VtZW50OiB7XG5cdFx0ZW5hYmxlZDogYm9vbGVhbjtcblx0XHRjb21tYW5kSWQ6IHN0cmluZztcblx0XHRpY29uSWQ6IHN0cmluZztcblx0fTtcblxuXHQvLyBUYWIgQmFyIGN1c3RvbSBjb21tYW5kc1xuXHR0YWJCYXJDb21tYW5kczogQ29tbWFuZEljb25QYWlyW107XG5cblx0Ly8gU3RhdHVzIEJhciBpdGVtcyAodW5pZmllZCBsaXN0IG9mIGV4aXN0aW5nICsgY3VzdG9tKVxuXHRzdGF0dXNCYXJJdGVtczogU3RhdHVzQmFySXRlbVtdO1xuXG5cdC8vIEV4cGxvcmVyIGN1c3RvbSBjb21tYW5kcyAobGVnYWN5IC0ga2VwdCBmb3IgbWlncmF0aW9uKVxuXHRleHBsb3JlckNvbW1hbmRzOiBDb21tYW5kSWNvblBhaXJbXTtcblxuXHQvLyBFeHBsb3JlciBidXR0b24gaXRlbXMgKHVuaWZpZWQgbGlzdCBvZiBuYXRpdmUgKyBleHRlcm5hbCArIGN1c3RvbSlcblx0ZXhwbG9yZXJCdXR0b25JdGVtczogRXhwbG9yZXJCdXR0b25JdGVtW107XG5cblx0Ly8gTmF0aXZlIGV4cGxvcmVyIGJ1dHRvbiBjb2xvcnMgKG9wdGlvbmFsKVxuXHRuYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycz86IHtcblx0XHRuZXdOb3RlPzogc3RyaW5nO1xuXHRcdG5ld0ZvbGRlcj86IHN0cmluZztcblx0XHRzb3J0T3JkZXI/OiBzdHJpbmc7XG5cdFx0YXV0b1JldmVhbD86IHN0cmluZztcblx0XHRjb2xsYXBzZUFsbD86IHN0cmluZztcblx0fTtcblxuXHQvLyBOYXRpdmUgZXhwbG9yZXIgYnV0dG9uIGljb24gb3ZlcnJpZGVzIChvcHRpb25hbClcblx0bmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucz86IHtcblx0XHRuZXdOb3RlPzogc3RyaW5nO1xuXHRcdG5ld0ZvbGRlcj86IHN0cmluZztcblx0XHRzb3J0T3JkZXI/OiBzdHJpbmc7XG5cdFx0YXV0b1JldmVhbD86IHN0cmluZztcblx0XHRjb2xsYXBzZUFsbD86IHN0cmluZztcblx0fTtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFVJU2V0dGluZ3MgPSB7XG5cdC8vIEF1dG8taGlkZSBlbGVtZW50c1xuXHR0aXRsZUJhcjogJ3Nob3cnLFxuXHRmaWxlRXhwbG9yZXJOYXZIZWFkZXI6ICdzaG93Jyxcblx0b3RoZXJOYXZIZWFkZXJzOiAnc2hvdycsXG5cdGxlZnRUYWJIZWFkZXJzOiAnc2hvdycsXG5cdHJpZ2h0VGFiSGVhZGVyczogJ3Nob3cnLFxuXHRyaWJib25SZXZlYWxPbkhvdmVyOiBmYWxzZSxcblx0dmF1bHRTd2l0Y2hlcjogJ3Nob3cnLFxuXHRoZWxwQnV0dG9uOiAnc2hvdycsXG5cdHNldHRpbmdzQnV0dG9uOiAnc2hvdycsXG5cblx0Ly8gU2ltcGxlIHRvZ2dsZXNcblx0dGFiQmFyOiBmYWxzZSxcblx0dGFiQmFySGlkZVdoZW5TaW5nbGU6IGZhbHNlLFxuXHRlbmFibGVXaW5kb3dEcmFnZ2luZzogZmFsc2UsXG5cdG5ld05vdGVCdXR0b246IGZhbHNlLFxuXHRuZXdGb2xkZXJCdXR0b246IGZhbHNlLFxuXHRzb3J0T3JkZXJCdXR0b246IGZhbHNlLFxuXHRhdXRvUmV2ZWFsQnV0dG9uOiBmYWxzZSxcblx0Y29sbGFwc2VBbGxCdXR0b246IGZhbHNlLFxuXHRyZWFkaW5nTW9kZUJ1dHRvbjogZmFsc2UsXG5cdGJvb2ttYXJrZWRCdXR0b246IGZhbHNlLFxuXHRzZWFyY2hTZXR0aW5nc0J1dHRvbjogZmFsc2UsXG5cdHRhYkxpc3RJY29uOiAnc2hvdycsXG5cdG5ld1RhYkljb246ICdzaG93Jyxcblx0dGFiQ2xvc2VCdXR0b246ICdzaG93Jyxcblx0c3RhdHVzQmFyOiBmYWxzZSxcblx0c2Nyb2xsQmFyczogJ3Nob3cnLFxuXHRsZWZ0U2lkZWJhclRvZ2dsZUJ1dHRvbjogJ3Nob3cnLFxuXHRyaWdodFNpZGViYXJUb2dnbGVCdXR0b246ICdzaG93Jyxcblx0dG9vbHRpcHM6IGZhbHNlLFxuXHRzZWFyY2hTdWdnZXN0aW9uczogZmFsc2UsXG5cdHNlYXJjaFRlcm1Db3VudHM6IGZhbHNlLFxuXHRwcm9wZXJ0aWVzSW5SZWFkaW5nVmlldzogZmFsc2UsXG5cdHByb3BlcnRpZXNJbkhlYWRpbmc6IGZhbHNlLFxuXHRhZGRQcm9wZXJ0eUJ1dHRvbjogZmFsc2UsXG5cdGRlZW1waGFzaXplUHJvcGVydGllczogZmFsc2UsXG5cdGluc3RydWN0aW9uczogZmFsc2UsXG5cblx0Ly8gTW9iaWxlLXNwZWNpZmljXG5cdG1vYmlsZUNoZXZyb25zSWNvbjogZmFsc2UsXG5cdG5hdmlnYXRlQmFja0J1dHRvbjogZmFsc2UsXG5cdG5hdmlnYXRlRm9yd2FyZEJ1dHRvbjogZmFsc2UsXG5cdHF1aWNrU3dpdGNoZXJCdXR0b246IGZhbHNlLFxuXHRtb2JpbGVOZXdUYWJCdXR0b246IGZhbHNlLFxuXHRvcGVuVGFiQnV0dG9uOiBmYWxzZSxcblx0cmliYm9uTWVudUJ1dHRvbjogZmFsc2UsXG5cdHN3YXBNb2JpbGVOZXdUYWJJY29uOiBmYWxzZSxcblx0aGlkZU1vYmlsZVRpdGxlOiBmYWxzZSxcblx0aGlkZU1vYmlsZVN5bmNJY29uOiBmYWxzZSxcblxuXHQvLyBNb2JpbGUgbmF2aWdhdGlvbiBtZW51IHBvc2l0aW9uc1xuXHRuYXZpZ2F0ZUJ1dHRvblBvc2l0aW9uOiAnMScsXG5cdG5hdmlnYXRpb25CdXR0b25Qb3NpdGlvbjogJzInLFxuXHRxdWlja1N3aXRjaGVyUG9zaXRpb246ICczJyxcblx0bmV3VGFiUG9zaXRpb246ICc0Jyxcblx0b3BlblRhYnNQb3NpdGlvbjogJzUnLFxuXHRyaWJib25NZW51UG9zaXRpb246ICc2JyxcblxuXHQvLyBBZHZhbmNlZFxuXHR2YXVsdFN3aXRjaGVyQmFja2dyb3VuZFRyYW5zcGFyZW5jeTogMC45OCxcblx0aGVscEJ1dHRvblJlcGxhY2VtZW50OiB7XG5cdFx0ZW5hYmxlZDogZmFsc2UsXG5cdFx0Y29tbWFuZElkOiAnJyxcblx0XHRpY29uSWQ6ICd3cmVuY2gnLFxuXHR9LFxuXHRzeW5jQnV0dG9uUmVwbGFjZW1lbnQ6IHtcblx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRjb21tYW5kSWQ6ICcnLFxuXHRcdGljb25JZDogJ3dyZW5jaCcsXG5cdH0sXG5cblx0Ly8gVGFiIEJhclxuXHR0YWJCYXJDb21tYW5kczogW10sXG5cblx0Ly8gU3RhdHVzIEJhclxuXHRzdGF0dXNCYXJJdGVtczogW10sXG5cblx0Ly8gRXhwbG9yZXJcblx0ZXhwbG9yZXJDb21tYW5kczogW10sXG5cdGV4cGxvcmVyQnV0dG9uSXRlbXM6IFtdLFxuXG5cdC8vIE5hdGl2ZSBleHBsb3JlciBidXR0b24gY29sb3JzXG5cdG5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzOiB7XG5cdFx0bmV3Tm90ZTogdW5kZWZpbmVkLFxuXHRcdG5ld0ZvbGRlcjogdW5kZWZpbmVkLFxuXHRcdHNvcnRPcmRlcjogdW5kZWZpbmVkLFxuXHRcdGF1dG9SZXZlYWw6IHVuZGVmaW5lZCxcblx0XHRjb2xsYXBzZUFsbDogdW5kZWZpbmVkLFxuXHR9LFxuXG5cdC8vIE5hdGl2ZSBleHBsb3JlciBidXR0b24gaWNvbiBvdmVycmlkZXNcblx0bmF0aXZlRXhwbG9yZXJCdXR0b25JY29uczoge1xuXHRcdG5ld05vdGU6IHVuZGVmaW5lZCxcblx0XHRuZXdGb2xkZXI6IHVuZGVmaW5lZCxcblx0XHRzb3J0T3JkZXI6IHVuZGVmaW5lZCxcblx0XHRhdXRvUmV2ZWFsOiB1bmRlZmluZWQsXG5cdFx0Y29sbGFwc2VBbGw6IHVuZGVmaW5lZCxcblx0fSxcbn07XG4iLCAiLyoqXG4gKiBVSSBNYW5hZ2VyIC0gaGFuZGxlcyBDU1MgY2xhc3MgaW5qZWN0aW9uIGFuZCByZXZlYWwtb24taG92ZXIgZnVuY3Rpb25hbGl0eVxuICovXG5cbmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IFVJVHdlYWtlclBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgVUlTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgVUlWaXNpYmlsaXR5U3RhdGUgfSBmcm9tICcuL3R5cGVzJztcblxuaW50ZXJmYWNlIENvbGxhcHNpYmxlU3BsaXQge1xuXHRjb2xsYXBzZWQ6IGJvb2xlYW47XG59XG5cbmltcG9ydCB7IGdldFZhdWx0U3dpdGNoZXJNYXNrLCBzZXRDc3NQcm9wcyB9IGZyb20gJy4vdXRpbHMvY3NzVXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgVUlNYW5hZ2VyIHtcblx0cHJpdmF0ZSBwbHVnaW46IFVJVHdlYWtlclBsdWdpbjtcblx0cHJpdmF0ZSBzZXR0aW5nczogVUlTZXR0aW5ncztcblx0cHJpdmF0ZSByZXZlYWxMaXN0ZW5lcnM6IE1hcDxzdHJpbmcsICgpID0+IHZvaWQ+ID0gbmV3IE1hcCgpO1xuXHRwcml2YXRlIHRhYk9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgc2lkZWJhck9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGw7XG5cblx0Y29uc3RydWN0b3IocGx1Z2luOiBVSVR3ZWFrZXJQbHVnaW4sIHNldHRpbmdzOiBVSVNldHRpbmdzKSB7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuXHR9XG5cblx0dXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFVJU2V0dGluZ3MpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG5cdFx0dGhpcy5hcHBseVN0eWxlcygpO1xuXHRcdC8vIEFwcGx5IG5hdGl2ZSBpY29uIG92ZXJyaWRlcyBhZnRlciBzdHlsZXMgYXJlIGFwcGxpZWRcblx0XHQvLyBOb3RlOiBleHBsb3Jlck1hbmFnZXIgaXMgYWNjZXNzZWQgdmlhIHBsdWdpbiBpbnN0YW5jZSwgbm90IHN0b3JlZCBoZXJlXG5cdH1cblxuXHRwcml2YXRlIGRldGVjdE9TKCk6ICd3aW5kb3dzJyB8ICdtYWNvcycgfCAnbmV1dHJhbCcge1xuXHRcdC8vIFVzZSBPYnNpZGlhbidzIFBsYXRmb3JtIEFQSVxuXHRcdGlmIChQbGF0Zm9ybS5pc01hY09TKSB7XG5cdFx0XHRyZXR1cm4gJ21hY29zJztcblx0XHR9XG5cdFx0aWYgKFBsYXRmb3JtLmlzV2luKSB7XG5cdFx0XHRyZXR1cm4gJ3dpbmRvd3MnO1xuXHRcdH1cblxuXHRcdC8vIERlZmF1bHQgdG8gbmV1dHJhbC9MaW51eFxuXHRcdHJldHVybiAnbmV1dHJhbCc7XG5cdH1cblxuXHRhcHBseVN0eWxlcygpIHtcblx0XHRjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keTtcblxuXHRcdC8vIEF1dG8taGlkZSBlbGVtZW50cyB3aXRoIFNob3cvSGlkZS9SZXZlYWxcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdhdXRvLWhpZGUtdGl0bGUtYmFyJywgdGhpcy5zZXR0aW5ncy50aXRsZUJhciwgdHJ1ZSk7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnYXV0by1oaWRlLWZpbGUtZXhwbG9yZXItbmF2LWhlYWRlcicsIHRoaXMuc2V0dGluZ3MuZmlsZUV4cGxvcmVyTmF2SGVhZGVyKTtcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdhdXRvLWhpZGUtb3RoZXItbmF2LWhlYWRlcnMnLCB0aGlzLnNldHRpbmdzLm90aGVyTmF2SGVhZGVycyk7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnYXV0by1oaWRlLWxlZnQtdGFiLWhlYWRlcnMnLCB0aGlzLnNldHRpbmdzLmxlZnRUYWJIZWFkZXJzKTtcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdhdXRvLWhpZGUtcmlnaHQtdGFiLWhlYWRlcnMnLCB0aGlzLnNldHRpbmdzLnJpZ2h0VGFiSGVhZGVycyk7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnYXV0by1oaWRlLXZhdWx0LXN3aXRjaGVyJywgdGhpcy5zZXR0aW5ncy52YXVsdFN3aXRjaGVyKTtcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdoaWRlci1oZWxwLWJ1dHRvbicsIHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvbik7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnYXV0by1oaWRlLXNldHRpbmdzLWJ1dHRvbicsIHRoaXMuc2V0dGluZ3Muc2V0dGluZ3NCdXR0b24pO1xuXG5cdFx0Ly8gUmliYm9uIC0gYm9vbGVhbiB0b2dnbGUgKGF1dG8tY29sbGFwc2UtcmliYm9uKVxuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnYXV0by1jb2xsYXBzZS1yaWJib24nLCB0aGlzLnNldHRpbmdzLnJpYmJvblJldmVhbE9uSG92ZXIpO1xuXG5cdFx0Ly8gR2xvYmFsIHJlcGxhY2VtZW50IHZpc2liaWxpdHlcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ3VpLXR3ZWFrZXItc3luYy1yZXBsYWNlbWVudC1lbmFibGVkJywgdGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpO1xuXG5cdFx0Ly8gU2ltcGxlIHRvZ2dsZXNcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGVyLXRhYnMnLCB0aGlzLnNldHRpbmdzLnRhYkJhcik7XG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MudGFiQmFyKSB7XG5cdFx0XHRjb25zdCBvcyA9IHRoaXMuZGV0ZWN0T1MoKTtcblx0XHRcdC8vIFJlbW92ZSBPUy1zcGVjaWZpYyBjbGFzc2VzIGZpcnN0XG5cdFx0XHRib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGVyLXRhYnMtd2luZG93cycsICdoaWRlci10YWJzLW1hY29zJywgJ2hpZGVyLXRhYnMtbmV1dHJhbCcpO1xuXHRcdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGBoaWRlci10YWJzLSR7b3N9YCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZXItdGFicy13aW5kb3dzJywgJ2hpZGVyLXRhYnMtbWFjb3MnLCAnaGlkZXItdGFicy1uZXV0cmFsJyk7XG5cdFx0fVxuXG5cdFx0Ly8gQXV0by1oaWRlIHRhYiBiYXIgd2hlbiBvbmx5IG9uZSB0YWJcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2F1dG8taGlkZS10YWItYmFyLXdoZW4tc2luZ2xlLXRhYicsIHRoaXMuc2V0dGluZ3MudGFiQmFySGlkZVdoZW5TaW5nbGUpO1xuXHRcdGlmICh0aGlzLnNldHRpbmdzLnRhYkJhckhpZGVXaGVuU2luZ2xlKSB7XG5cdFx0XHRjb25zdCBvcyA9IHRoaXMuZGV0ZWN0T1MoKTtcblx0XHRcdC8vIFJlbW92ZSBPUy1zcGVjaWZpYyBjbGFzc2VzIGZpcnN0XG5cdFx0XHRib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2F1dG8taGlkZS10YWItYmFyLXdpbmRvd3MnLCAnYXV0by1oaWRlLXRhYi1iYXItbWFjb3MnLCAnYXV0by1oaWRlLXRhYi1iYXItbmV1dHJhbCcpO1xuXHRcdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGBhdXRvLWhpZGUtdGFiLWJhci0ke29zfWApO1xuXHRcdFx0dGhpcy5zZXR1cFRhYk9ic2VydmVyKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuY2xlYW51cFRhYk9ic2VydmVyKCk7XG5cdFx0fVxuXG5cdFx0Ly8gV2luZG93IGRyYWdnaW5nIC0gb25seSBhcHBseSB3aGVuIHRhYiBiYXIgaXMgaGlkZGVuXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MudGFiQmFyICYmIHRoaXMuc2V0dGluZ3MuZW5hYmxlV2luZG93RHJhZ2dpbmcpIHtcblx0XHRcdGNvbnN0IG9zID0gdGhpcy5kZXRlY3RPUygpO1xuXHRcdFx0Ly8gUmVtb3ZlIGFsbCB3aW5kb3cgZHJhZ2dpbmcgY2xhc3NlcyBmaXJzdFxuXHRcdFx0Ym9keS5jbGFzc0xpc3QucmVtb3ZlKCdlbmFibGUtd2luZG93LWRyYWdnaW5nLXdpbmRvd3MnLCAnZW5hYmxlLXdpbmRvdy1kcmFnZ2luZy1tYWNvcycsICdlbmFibGUtd2luZG93LWRyYWdnaW5nLW5ldXRyYWwnKTtcblx0XHRcdC8vIEFwcGx5IE9TLXNwZWNpZmljIGNsYXNzXG5cdFx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYGVuYWJsZS13aW5kb3ctZHJhZ2dpbmctJHtvc31gKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gUmVtb3ZlIGFsbCB3aW5kb3cgZHJhZ2dpbmcgY2xhc3NlcyBpZiBub3QgZW5hYmxlZFxuXHRcdFx0Ym9keS5jbGFzc0xpc3QucmVtb3ZlKCdlbmFibGUtd2luZG93LWRyYWdnaW5nLXdpbmRvd3MnLCAnZW5hYmxlLXdpbmRvdy1kcmFnZ2luZy1tYWNvcycsICdlbmFibGUtd2luZG93LWRyYWdnaW5nLW5ldXRyYWwnKTtcblx0XHR9XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1uZXctbm90ZScsIHRoaXMuc2V0dGluZ3MubmV3Tm90ZUJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1uZXctZm9sZGVyJywgdGhpcy5zZXR0aW5ncy5uZXdGb2xkZXJCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tc29ydC1vcmRlcicsIHRoaXMuc2V0dGluZ3Muc29ydE9yZGVyQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLWF1dG8tcmV2ZWFsJywgdGhpcy5zZXR0aW5ncy5hdXRvUmV2ZWFsQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLWNvbGxhcHNlLWFsbCcsIHRoaXMuc2V0dGluZ3MuY29sbGFwc2VBbGxCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tcmVhZGluZy1tb2RlJywgdGhpcy5zZXR0aW5ncy5yZWFkaW5nTW9kZUJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1ib29rbWFya2VkJywgdGhpcy5zZXR0aW5ncy5ib29rbWFya2VkQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLXNlYXJjaC1zZXR0aW5ncycsIHRoaXMuc2V0dGluZ3Muc2VhcmNoU2V0dGluZ3NCdXR0b24pO1xuXG5cdFx0Ly8gVGFiIGljb25zIC0gbm93IHN1cHBvcnQgUmV2ZWFsXG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnaGlkZS10YWItbGlzdC1pY29uJywgdGhpcy5zZXR0aW5ncy50YWJMaXN0SWNvbik7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnaGlkZS1uZXctdGFiLWljb24nLCB0aGlzLnNldHRpbmdzLm5ld1RhYkljb24pO1xuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2hpZGUtdGFiLWNsb3NlLWJ1dHRvbicsIHRoaXMuc2V0dGluZ3MudGFiQ2xvc2VCdXR0b24pO1xuXG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlci1zdGF0dXMnLCB0aGlzLnNldHRpbmdzLnN0YXR1c0Jhcik7XG5cblx0XHQvLyBTY3JvbGxiYXJzIC0gbm93IHN1cHBvcnQgU2hvdy9IaWRlL1JldmVhbFxuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2hpZGVyLXNjcm9sbCcsIHRoaXMuc2V0dGluZ3Muc2Nyb2xsQmFycyk7XG5cblx0XHQvLyBTZXQgdXAgc2Nyb2xsYmFyIHJldmVhbCBob3ZlciBsaXN0ZW5lcnMgaWYgbmVlZGVkXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2Nyb2xsQmFycyA9PT0gJ3JldmVhbCcpIHtcblx0XHRcdHRoaXMuc2V0dXBTY3JvbGxiYXJSZXZlYWxMaXN0ZW5lcnMoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5yZW1vdmVTY3JvbGxiYXJSZXZlYWxMaXN0ZW5lcnMoKTtcblx0XHR9XG5cblx0XHQvLyBTaWRlYmFyIHRvZ2dsZSBidXR0b25zIC0gbm93IHN1cHBvcnQgUmV2ZWFsXG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnaGlkZXItbGVmdC1zaWRlYmFyLWJ1dHRvbicsIHRoaXMuc2V0dGluZ3MubGVmdFNpZGViYXJUb2dnbGVCdXR0b24pO1xuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2hpZGVyLXJpZ2h0LXNpZGViYXItYnV0dG9uJywgdGhpcy5zZXR0aW5ncy5yaWdodFNpZGViYXJUb2dnbGVCdXR0b24pO1xuXG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlci10b29sdGlwcycsIHRoaXMuc2V0dGluZ3MudG9vbHRpcHMpO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZXItc2VhcmNoLXN1Z2dlc3Rpb25zJywgdGhpcy5zZXR0aW5ncy5zZWFyY2hTdWdnZXN0aW9ucyk7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlci1zZWFyY2gtY291bnRzJywgdGhpcy5zZXR0aW5ncy5zZWFyY2hUZXJtQ291bnRzKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGVyLW1ldGEnLCB0aGlzLnNldHRpbmdzLnByb3BlcnRpZXNJblJlYWRpbmdWaWV3KTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ3VpLXR3ZWFrZXItZGVlbXBoYXNpemUtcHJvcGVydGllcycsIHRoaXMuc2V0dGluZ3MuZGVlbXBoYXNpemVQcm9wZXJ0aWVzKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ21ldGFkYXRhLWhlYWRpbmctb2ZmJywgdGhpcy5zZXR0aW5ncy5wcm9wZXJ0aWVzSW5IZWFkaW5nKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ21ldGFkYXRhLWFkZC1wcm9wZXJ0eS1vZmYnLCB0aGlzLnNldHRpbmdzLmFkZFByb3BlcnR5QnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGVyLWluc3RydWN0aW9ucycsIHRoaXMuc2V0dGluZ3MuaW5zdHJ1Y3Rpb25zKTtcblxuXHRcdC8vIE1vYmlsZS1zcGVjaWZpY1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1pY29uLW1vYmlsZS1jaGV2cm9ucycsIHRoaXMuc2V0dGluZ3MubW9iaWxlQ2hldnJvbnNJY29uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLW1vYmlsZS1uYXZiYXItYWN0aW9uLWJhY2snLCB0aGlzLnNldHRpbmdzLm5hdmlnYXRlQmFja0J1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1tb2JpbGUtbmF2YmFyLWFjdGlvbi1mb3J3YXJkJywgdGhpcy5zZXR0aW5ncy5uYXZpZ2F0ZUZvcndhcmRCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tbW9iaWxlLW5hdmJhci1hY3Rpb24tcXVpY2stc3dpdGNoZXInLCB0aGlzLnNldHRpbmdzLnF1aWNrU3dpdGNoZXJCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tbW9iaWxlLW5hdmJhci1hY3Rpb24tbmV3LXRhYicsIHRoaXMuc2V0dGluZ3MubW9iaWxlTmV3VGFiQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLW1vYmlsZS1uYXZiYXItYWN0aW9uLXRhYnMnLCB0aGlzLnNldHRpbmdzLm9wZW5UYWJCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tbW9iaWxlLW5hdmJhci1hY3Rpb24tbWVudScsIHRoaXMuc2V0dGluZ3MucmliYm9uTWVudUJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdzd2FwLW1vYmlsZS1uZXctdGFiLWljb24nLCB0aGlzLnNldHRpbmdzLnN3YXBNb2JpbGVOZXdUYWJJY29uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtbW9iaWxlLXRpdGxlJywgdGhpcy5zZXR0aW5ncy5oaWRlTW9iaWxlVGl0bGUpO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1tb2JpbGUtc3luYy1pY29uJywgdGhpcy5zZXR0aW5ncy5oaWRlTW9iaWxlU3luY0ljb24pO1xuXG5cdFx0Ly8gTW9iaWxlIG5hdmlnYXRpb24gbWVudSBwb3NpdGlvbnNcblx0XHQvLyBSZW1vdmUgYWxsIGV4aXN0aW5nIG9yZGVyIGNsYXNzZXMgZmlyc3Rcblx0XHRjb25zdCBvcmRlckNsYXNzZXMgPSBBcnJheS5mcm9tKGJvZHkuY2xhc3NMaXN0KS5maWx0ZXIoKGNscykgPT5cblx0XHRcdGNscy5zdGFydHNXaXRoKCdvcmRlci1uYXZiYXItYnV0dG9uLW50aC1jaGlsZC0nKVxuXHRcdCk7XG5cdFx0b3JkZXJDbGFzc2VzLmZvckVhY2goKGNscykgPT4gYm9keS5jbGFzc0xpc3QucmVtb3ZlKGNscykpO1xuXG5cdFx0Ly8gQWRkIHRoZSBzZWxlY3RlZCBvcmRlciBjbGFzc2VzXG5cdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGBvcmRlci1uYXZiYXItYnV0dG9uLW50aC1jaGlsZC0xLSR7dGhpcy5zZXR0aW5ncy5uYXZpZ2F0ZUJ1dHRvblBvc2l0aW9ufWApO1xuXHRcdGJvZHkuY2xhc3NMaXN0LmFkZChgb3JkZXItbmF2YmFyLWJ1dHRvbi1udGgtY2hpbGQtMi0ke3RoaXMuc2V0dGluZ3MubmF2aWdhdGlvbkJ1dHRvblBvc2l0aW9ufWApO1xuXHRcdGJvZHkuY2xhc3NMaXN0LmFkZChgb3JkZXItbmF2YmFyLWJ1dHRvbi1udGgtY2hpbGQtMy0ke3RoaXMuc2V0dGluZ3MucXVpY2tTd2l0Y2hlclBvc2l0aW9ufWApO1xuXHRcdGJvZHkuY2xhc3NMaXN0LmFkZChgb3JkZXItbmF2YmFyLWJ1dHRvbi1udGgtY2hpbGQtNC0ke3RoaXMuc2V0dGluZ3MubmV3VGFiUG9zaXRpb259YCk7XG5cdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGBvcmRlci1uYXZiYXItYnV0dG9uLW50aC1jaGlsZC01LSR7dGhpcy5zZXR0aW5ncy5vcGVuVGFic1Bvc2l0aW9ufWApO1xuXHRcdGJvZHkuY2xhc3NMaXN0LmFkZChgb3JkZXItbmF2YmFyLWJ1dHRvbi1udGgtY2hpbGQtNi0ke3RoaXMuc2V0dGluZ3MucmliYm9uTWVudVBvc2l0aW9ufWApO1xuXG5cdFx0Ly8gVXNlIGdldFZhdWx0U3dpdGNoZXJNYXNrIHV0aWxpdHlcblx0XHRjb25zdCBtYXNrVmFsdWUgPSBnZXRWYXVsdFN3aXRjaGVyTWFzayh0aGlzLnNldHRpbmdzLnZhdWx0U3dpdGNoZXJCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5KTtcblxuXHRcdHNldENzc1Byb3BzKGJvZHksIHtcblx0XHRcdCctLWF1dG8taGlkZS12YXVsdC1zd2l0Y2hlci1iZy10cmFuc3BhcmVuY3knOiBTdHJpbmcodGhpcy5zZXR0aW5ncy52YXVsdFN3aXRjaGVyQmFja2dyb3VuZFRyYW5zcGFyZW5jeSksXG5cdFx0XHQnLS1hdXRvLWhpZGUtdmF1bHQtc3dpdGNoZXItbWFzayc6IG1hc2tWYWx1ZSxcblx0XHR9KTtcblxuXHRcdC8vIE5hdGl2ZSBleHBsb3JlciBidXR0b24gY29sb3JzIGFyZSBub3cgYXBwbGllZCBkaXJlY3RseSB2aWEgRXhwbG9yZXJNYW5hZ2VyLmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpXG5cdFx0Ly8gTm8gQ1NTIHZhcmlhYmxlcyBuZWVkZWQgLSBjb2xvcnMgYXJlIGFwcGxpZWQgYXMgaW5saW5lIHN0eWxlcyBvbmx5IHdoZW4gc2V0XG5cdH1cblxuXHRwcml2YXRlIGFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHk6IEhUTUxFbGVtZW50LCBjbGFzc05hbWU6IHN0cmluZywgc3RhdGU6IFVJVmlzaWJpbGl0eVN0YXRlLCB1c2VBbHdheXNTaG93OiBib29sZWFuID0gZmFsc2UpIHtcblx0XHQvLyBSZW1vdmUgYWxsIHN0YXRlcyBmaXJzdFxuXHRcdGlmICh1c2VBbHdheXNTaG93KSB7XG5cdFx0XHRib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2Fsd2F5cy1zaG93LXRpdGxlLWJhcicsIGAke2NsYXNzTmFtZX0taGlkZWAsIGAke2NsYXNzTmFtZX0tcmV2ZWFsYCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGJvZHkuY2xhc3NMaXN0LnJlbW92ZShgJHtjbGFzc05hbWV9LXNob3dgLCBgJHtjbGFzc05hbWV9LWhpZGVgLCBgJHtjbGFzc05hbWV9LXJldmVhbGApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHRoZSBjdXJyZW50IHN0YXRlXG5cdFx0aWYgKHN0YXRlID09PSAnc2hvdycpIHtcblx0XHRcdGlmICh1c2VBbHdheXNTaG93KSB7XG5cdFx0XHRcdGJvZHkuY2xhc3NMaXN0LmFkZCgnYWx3YXlzLXNob3ctdGl0bGUtYmFyJyk7XG5cdFx0XHR9XG5cdFx0XHQvLyBObyBjbGFzcyBuZWVkZWQgZm9yIHNob3cgc3RhdGUgKG9yIHVzZSBhbHdheXMtc2hvdyBmb3IgdGl0bGUgYmFyKVxuXHRcdH0gZWxzZSBpZiAoc3RhdGUgPT09ICdoaWRlJykge1xuXHRcdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGAke2NsYXNzTmFtZX0taGlkZWApO1xuXHRcdH0gZWxzZSBpZiAoc3RhdGUgPT09ICdyZXZlYWwnKSB7XG5cdFx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYCR7Y2xhc3NOYW1lfS1yZXZlYWxgKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHNldHVwU2Nyb2xsYmFyUmV2ZWFsTGlzdGVuZXJzKCkge1xuXHRcdC8vIFJlbW92ZSBleGlzdGluZyBsaXN0ZW5lcnMgZmlyc3Rcblx0XHR0aGlzLnJlbW92ZVNjcm9sbGJhclJldmVhbExpc3RlbmVycygpO1xuXG5cdFx0Ly8gSGVscGVyIHRvIGNoZWNrIGlmIGFuIGVsZW1lbnQgaXMgc2Nyb2xsYWJsZVxuXHRcdGNvbnN0IGlzU2Nyb2xsYWJsZSA9IChlbGVtZW50OiBIVE1MRWxlbWVudCk6IGJvb2xlYW4gPT4ge1xuXHRcdFx0Y29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcblx0XHRcdGNvbnN0IG92ZXJmbG93ID0gc3R5bGUub3ZlcmZsb3cgKyBzdHlsZS5vdmVyZmxvd1kgKyBzdHlsZS5vdmVyZmxvd1g7XG5cdFx0XHRpZiAoIW92ZXJmbG93LmluY2x1ZGVzKCdzY3JvbGwnKSAmJiAhb3ZlcmZsb3cuaW5jbHVkZXMoJ2F1dG8nKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHQvLyBDaGVjayBpZiBlbGVtZW50IGFjdHVhbGx5IGhhcyBzY3JvbGxhYmxlIGNvbnRlbnRcblx0XHRcdHJldHVybiBlbGVtZW50LnNjcm9sbEhlaWdodCA+IGVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IGVsZW1lbnQuc2Nyb2xsV2lkdGggPiBlbGVtZW50LmNsaWVudFdpZHRoO1xuXHRcdH07XG5cblx0XHQvLyBUcmFjayB3aGljaCBzY3JvbGxhYmxlIGVsZW1lbnRzIHNob3VsZCBoYXZlIGhvdmVyIGNsYXNzXG5cdFx0Y29uc3QgaG92ZXJlZEVsZW1lbnRzID0gbmV3IFNldDxIVE1MRWxlbWVudD4oKTtcblxuXHRcdC8vIFVzZSBtb3VzZW1vdmUgdG8gdHJhY2sgbW91c2UgcG9zaXRpb24gYW5kIG9ubHkgYWRkIGhvdmVyIGNsYXNzIHdoZW4gbmVhciBzY3JvbGxiYXJcblx0XHRjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRpZiAoIXRhcmdldCkgcmV0dXJuO1xuXG5cdFx0XHQvLyBDbGVhciBhbGwgaG92ZXIgY2xhc3NlcyBmaXJzdFxuXHRcdFx0aG92ZXJlZEVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXR3ZWFrZXItc2Nyb2xsYmFyLWhvdmVyJyk7XG5cdFx0XHR9KTtcblx0XHRcdGhvdmVyZWRFbGVtZW50cy5jbGVhcigpO1xuXG5cdFx0XHQvLyBGaW5kIHNjcm9sbGFibGUgY29udGFpbmVycyBhbmQgY2hlY2sgaWYgbW91c2UgaXMgbmVhciB0aGUgc2Nyb2xsYmFyIGFyZWFcblx0XHRcdGxldCBlbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSB0YXJnZXQ7XG5cdFx0XHR3aGlsZSAoZWxlbWVudCAmJiBlbGVtZW50ICE9PSBkb2N1bWVudC5ib2R5ICYmIGVsZW1lbnQgIT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuXHRcdFx0XHRpZiAoaXNTY3JvbGxhYmxlKGVsZW1lbnQpKSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsYmFyQXJlYSA9IDI1OyAvLyBXaWR0aCBvZiBhcmVhIG5lYXIgZWRnZXMgd2hlcmUgc2Nyb2xsYmFyIHdvdWxkIGJlXG5cblx0XHRcdFx0XHQvLyBDaGVjayBpZiBtb3VzZSBpcyBpbiB0aGUgc2Nyb2xsYmFyIGFyZWEgKHJpZ2h0IGVkZ2UgZm9yIHZlcnRpY2FsLCBib3R0b20gZWRnZSBmb3IgaG9yaXpvbnRhbClcblx0XHRcdFx0XHRjb25zdCBpc0luVmVydGljYWxTY3JvbGxiYXJBcmVhID0gZS5jbGllbnRYID49IHJlY3QucmlnaHQgLSBzY3JvbGxiYXJBcmVhICYmIGUuY2xpZW50WCA8PSByZWN0LnJpZ2h0O1xuXHRcdFx0XHRcdGNvbnN0IGlzSW5Ib3Jpem9udGFsU2Nyb2xsYmFyQXJlYSA9IGUuY2xpZW50WSA+PSByZWN0LmJvdHRvbSAtIHNjcm9sbGJhckFyZWEgJiYgZS5jbGllbnRZIDw9IHJlY3QuYm90dG9tO1xuXG5cdFx0XHRcdFx0Ly8gT25seSBhZGQgaG92ZXIgY2xhc3MgaWYgbW91c2UgaXMgaW4gdGhlIHNjcm9sbGJhciBhcmVhXG5cdFx0XHRcdFx0aWYgKGlzSW5WZXJ0aWNhbFNjcm9sbGJhckFyZWEgfHwgaXNJbkhvcml6b250YWxTY3JvbGxiYXJBcmVhKSB7XG5cdFx0XHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3VpLXR3ZWFrZXItc2Nyb2xsYmFyLWhvdmVyJyk7XG5cdFx0XHRcdFx0XHRob3ZlcmVkRWxlbWVudHMuYWRkKGVsZW1lbnQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBDbGVhciBob3ZlciB3aGVuIG1vdXNlIGxlYXZlcyBkb2N1bWVudFxuXHRcdGNvbnN0IGhhbmRsZU1vdXNlTGVhdmUgPSAoKSA9PiB7XG5cdFx0XHRob3ZlcmVkRWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcblx0XHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZSgndWktdHdlYWtlci1zY3JvbGxiYXItaG92ZXInKTtcblx0XHRcdH0pO1xuXHRcdFx0aG92ZXJlZEVsZW1lbnRzLmNsZWFyKCk7XG5cdFx0fTtcblxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSwgdHJ1ZSk7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGhhbmRsZU1vdXNlTGVhdmUsIHRydWUpO1xuXG5cdFx0Ly8gU3RvcmUgY2xlYW51cCBmdW5jdGlvblxuXHRcdHRoaXMucmV2ZWFsTGlzdGVuZXJzLnNldCgnc2Nyb2xsYmFyLXJldmVhbCcsICgpID0+IHtcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSwgdHJ1ZSk7XG5cdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgaGFuZGxlTW91c2VMZWF2ZSwgdHJ1ZSk7XG5cdFx0XHQvLyBSZW1vdmUgYWxsIGhvdmVyIGNsYXNzZXNcblx0XHRcdGhvdmVyZWRFbGVtZW50cy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCd1aS10d2Vha2VyLXNjcm9sbGJhci1ob3ZlcicpO1xuXHRcdFx0fSk7XG5cdFx0XHRob3ZlcmVkRWxlbWVudHMuY2xlYXIoKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgcmVtb3ZlU2Nyb2xsYmFyUmV2ZWFsTGlzdGVuZXJzKCkge1xuXHRcdGNvbnN0IGNsZWFudXAgPSB0aGlzLnJldmVhbExpc3RlbmVycy5nZXQoJ3Njcm9sbGJhci1yZXZlYWwnKTtcblx0XHRpZiAoY2xlYW51cCkge1xuXHRcdFx0Y2xlYW51cCgpO1xuXHRcdFx0dGhpcy5yZXZlYWxMaXN0ZW5lcnMuZGVsZXRlKCdzY3JvbGxiYXItcmV2ZWFsJyk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFNldCB1cCBNdXRhdGlvbk9ic2VydmVyIHRvIGRldGVjdCBzaW5nbGUgdGFiIHN0YXRlIGFuZCBzaWRlYmFyIHN0YXRlXG5cdCAqIFBvcnRlZCBmcm9tIG9ic2lkaWFuLW94eWdlbi1zZXR0aW5nc1xuXHQgKi9cblx0cHJpdmF0ZSBzZXR1cFRhYk9ic2VydmVyKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLnRhYk9ic2VydmVyKSB7XG5cdFx0XHRyZXR1cm47IC8vIEFscmVhZHkgc2V0IHVwXG5cdFx0fVxuXG5cdFx0Y29uc3QgY2hlY2tTaWRlYmFycyA9ICgpID0+IHtcblx0XHRcdGNvbnN0IHdvcmtzcGFjZSA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2U7XG5cdFx0XHRjb25zdCByaWdodFNpZGViYXJDb2xsYXBzZWQgPSAod29ya3NwYWNlLnJpZ2h0U3BsaXQgYXMgdW5rbm93biBhcyBDb2xsYXBzaWJsZVNwbGl0KT8uY29sbGFwc2VkICE9PSBmYWxzZTtcblx0XHRcdGNvbnN0IGxlZnRTaWRlYmFyQ29sbGFwc2VkID0gKHdvcmtzcGFjZS5sZWZ0U3BsaXQgYXMgdW5rbm93biBhcyBDb2xsYXBzaWJsZVNwbGl0KT8uY29sbGFwc2VkICE9PSBmYWxzZTtcblxuXHRcdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdpcy1yaWdodC1zaWRlYmFyLWNvbGxhcHNlZCcsIHJpZ2h0U2lkZWJhckNvbGxhcHNlZCk7XG5cdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2lzLWxlZnQtc2lkZWJhci1jb2xsYXBzZWQnLCBsZWZ0U2lkZWJhckNvbGxhcHNlZCk7XG5cdFx0fTtcblxuXHRcdC8vIERlYm91bmNlIGZ1bmN0aW9uXG5cdFx0bGV0IGNoZWNrVGltZW91dDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cdFx0Y29uc3QgZGVib3VuY2VkQ2hlY2sgPSAoKSA9PiB7XG5cdFx0XHRpZiAoY2hlY2tUaW1lb3V0KSB7XG5cdFx0XHRcdGNsZWFyVGltZW91dChjaGVja1RpbWVvdXQpO1xuXHRcdFx0fVxuXHRcdFx0Y2hlY2tUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRjaGVja1NpZGViYXJzKCk7XG5cdFx0XHRcdGNoZWNrVGltZW91dCA9IG51bGw7XG5cdFx0XHR9LCAxNTApO1xuXHRcdH07XG5cblx0XHQvLyBJbml0aWFsIGNoZWNrXG5cdFx0c2V0VGltZW91dChjaGVja1NpZGViYXJzLCAxMDApO1xuXG5cdFx0Ly8gV2F0Y2ggZm9yIGNoYW5nZXMgaW4gd29ya3NwYWNlXG5cdFx0dGhpcy50YWJPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcblx0XHRcdGRlYm91bmNlZENoZWNrKCk7XG5cdFx0fSk7XG5cblx0XHRjb25zdCB3b3Jrc3BhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlJyk7XG5cdFx0aWYgKHdvcmtzcGFjZSkge1xuXHRcdFx0dGhpcy50YWJPYnNlcnZlci5vYnNlcnZlKHdvcmtzcGFjZSwge1xuXHRcdFx0XHRjaGlsZExpc3Q6IHRydWUsXG5cdFx0XHRcdHN1YnRyZWU6IHRydWVcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIExpc3RlbiB0byB3b3Jrc3BhY2UgbGF5b3V0IGFuZCByZXNpemUgZXZlbnRzXG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XG5cdFx0XHRcdGRlYm91bmNlZENoZWNrKCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ3Jlc2l6ZScsICgpID0+IHtcblx0XHRcdFx0ZGVib3VuY2VkQ2hlY2soKTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdC8vIFdhdGNoIGZvciBjbGFzcyBjaGFuZ2VzIG9uIHdvcmtzcGFjZSBlbGVtZW50IChzaWRlYmFyIHRvZ2dsZXMpXG5cdFx0Y29uc3Qgd29ya3NwYWNlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlJyk7XG5cdFx0aWYgKHdvcmtzcGFjZUVsKSB7XG5cdFx0XHR0aGlzLnNpZGViYXJPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcblx0XHRcdFx0bGV0IHNob3VsZENoZWNrID0gZmFsc2U7XG5cdFx0XHRcdG11dGF0aW9ucy5mb3JFYWNoKChtdXRhdGlvbikgPT4ge1xuXHRcdFx0XHRcdGlmIChtdXRhdGlvbi50eXBlID09PSAnYXR0cmlidXRlcycgJiYgbXV0YXRpb24uYXR0cmlidXRlTmFtZSA9PT0gJ2NsYXNzJykge1xuXHRcdFx0XHRcdFx0c2hvdWxkQ2hlY2sgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChzaG91bGRDaGVjaykge1xuXHRcdFx0XHRcdC8vIENoZWNrIGltbWVkaWF0ZWx5IGZvciBzaWRlYmFyIHRvZ2dsZXMgdG8gc3luYyBhbmltYXRpb25cblx0XHRcdFx0XHRjaGVja1NpZGViYXJzKCk7XG5cdFx0XHRcdFx0Ly8gU3RpbGwgcnVuIGRlYm91bmNlZCBjaGVjayBhcyBhIHNhZmV0eSBmYWxsYmFja1xuXHRcdFx0XHRcdGRlYm91bmNlZENoZWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLnNpZGViYXJPYnNlcnZlci5vYnNlcnZlKHdvcmtzcGFjZUVsLCB7XG5cdFx0XHRcdGF0dHJpYnV0ZXM6IHRydWUsXG5cdFx0XHRcdGF0dHJpYnV0ZUZpbHRlcjogWydjbGFzcyddXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ2xlYW51cCB0YWIgb2JzZXJ2ZXJcblx0ICovXG5cdHByaXZhdGUgY2xlYW51cFRhYk9ic2VydmVyKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLnRhYk9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLnRhYk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHRcdHRoaXMudGFiT2JzZXJ2ZXIgPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnNpZGViYXJPYnNlcnZlcikge1xuXHRcdFx0dGhpcy5zaWRlYmFyT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdFx0dGhpcy5zaWRlYmFyT2JzZXJ2ZXIgPSBudWxsO1xuXHRcdH1cblxuXHRcdC8vIFJlbW92ZSBhbGwgc2lkZWJhciByZWxhdGVkIGNsYXNzZXNcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXJpZ2h0LXNpZGViYXItY29sbGFwc2VkJywgJ2lzLWxlZnQtc2lkZWJhci1jb2xsYXBzZWQnKTtcblxuXHRcdC8vIFJlbW92ZSBPUy1zcGVjaWZpYyBjbGFzc2VzXG5cdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdhdXRvLWhpZGUtdGFiLWJhci13aW5kb3dzJywgJ2F1dG8taGlkZS10YWItYmFyLW1hY29zJywgJ2F1dG8taGlkZS10YWItYmFyLW5ldXRyYWwnKTtcblx0fVxuXG5cdGNsZWFudXAoKSB7XG5cdFx0dGhpcy5jbGVhbnVwVGFiT2JzZXJ2ZXIoKTtcblx0XHQvLyBSZW1vdmUgYWxsIGV2ZW50IGxpc3RlbmVyc1xuXHRcdHRoaXMucmV2ZWFsTGlzdGVuZXJzLmZvckVhY2goKGNsZWFudXApID0+IGNsZWFudXAoKSk7XG5cdFx0dGhpcy5yZXZlYWxMaXN0ZW5lcnMuY2xlYXIoKTtcblxuXHRcdC8vIFJlbW92ZSBhbGwgY2xhc3Nlc1xuXHRcdGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXHRcdGNvbnN0IGNsYXNzZXNUb1JlbW92ZTogc3RyaW5nW10gPSBbXTtcblx0XHRib2R5LmNsYXNzTGlzdC5mb3JFYWNoKChjbGFzc05hbWUpID0+IHtcblx0XHRcdGlmIChjbGFzc05hbWUuc3RhcnRzV2l0aCgndWktdHdlYWtlci0nKSB8fFxuXHRcdFx0XHRjbGFzc05hbWUuc3RhcnRzV2l0aCgnYXV0by1oaWRlLScpIHx8XG5cdFx0XHRcdGNsYXNzTmFtZS5zdGFydHNXaXRoKCdoaWRlci0nKSB8fFxuXHRcdFx0XHRjbGFzc05hbWUuc3RhcnRzV2l0aCgnaGlkZS0nKSB8fFxuXHRcdFx0XHRjbGFzc05hbWUuc3RhcnRzV2l0aCgnbWV0YWRhdGEtJykgfHxcblx0XHRcdFx0Y2xhc3NOYW1lLnN0YXJ0c1dpdGgoJ29yZGVyLW5hdmJhci1idXR0b24tJykgfHxcblx0XHRcdFx0Y2xhc3NOYW1lLnN0YXJ0c1dpdGgoJ2VuYWJsZS13aW5kb3ctZHJhZ2dpbmctJykgfHxcblx0XHRcdFx0Y2xhc3NOYW1lID09PSAnYXV0by1jb2xsYXBzZS1yaWJib24nIHx8XG5cdFx0XHRcdGNsYXNzTmFtZSA9PT0gJ3N3YXAtbW9iaWxlLW5ldy10YWItaWNvbicgfHxcblx0XHRcdFx0Y2xhc3NOYW1lID09PSAnYWx3YXlzLXNob3ctdGl0bGUtYmFyJykge1xuXHRcdFx0XHRjbGFzc2VzVG9SZW1vdmUucHVzaChjbGFzc05hbWUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGNsYXNzZXNUb1JlbW92ZS5mb3JFYWNoKChjbGFzc05hbWUpID0+IGJvZHkuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpKTtcblxuXHRcdC8vIFJlbW92ZSBDU1MgdmFyaWFibGVzXG5cdFx0Ym9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1hdXRvLWhpZGUtdmF1bHQtc3dpdGNoZXItYmctdHJhbnNwYXJlbmN5Jyk7XG5cdFx0Ym9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1hdXRvLWhpZGUtdmF1bHQtc3dpdGNoZXItbWFzaycpO1xuXHRcdGJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbmF0aXZlLWJ1dHRvbi1jb2xvci1uZXctbm90ZScpO1xuXHRcdGJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbmF0aXZlLWJ1dHRvbi1jb2xvci1uZXctZm9sZGVyJyk7XG5cdFx0Ym9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1uYXRpdmUtYnV0dG9uLWNvbG9yLXNvcnQtb3JkZXInKTtcblx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLW5hdGl2ZS1idXR0b24tY29sb3ItYXV0by1yZXZlYWwnKTtcblx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLW5hdGl2ZS1idXR0b24tY29sb3ItY29sbGFwc2UtYWxsJyk7XG5cdH1cbn1cbiIsICIvKipcclxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIENTUyBnZW5lcmF0aW9uXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIG1hc2staW1hZ2UgdmFsdWUgZm9yIHRoZSB2YXVsdCBzd2l0Y2hlciBiYXNlZCBvbiB0cmFuc3BhcmVuY3lcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRWYXVsdFN3aXRjaGVyTWFzayh0cmFuc3BhcmVuY3k6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICBpZiAodHJhbnNwYXJlbmN5ID49IDEpIHtcclxuICAgICAgICByZXR1cm4gJ25vbmUnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICdsaW5lYXItZ3JhZGllbnQodG8gdG9wLCBoc2woMCwgMCUsIDAlKSAwJSwgaHNsYSgwLCAwJSwgMCUsIDAuOTkpIDE4LjQlLCBoc2xhKDAsIDAlLCAwJSwgMC45NjMpIDMzLjclLCBoc2xhKDAsIDAlLCAwJSwgMC45MikgNDYuNCUsIGhzbGEoMCwgMCUsIDAlLCAwLjg2NCkgNTYuNyUsIGhzbGEoMCwgMCUsIDAlLCAwLjc5NikgNjQuOCUsIGhzbGEoMCwgMCUsIDAlLCAwLjcyKSA3MS4yJSwgaHNsYSgwLCAwJSwgMCUsIDAuNjM3KSA3Ni4xJSwgaHNsYSgwLCAwJSwgMCUsIDAuNTUpIDc5LjklLCBoc2xhKDAsIDAlLCAwJSwgMC40NikgODIuOCUsIGhzbGEoMCwgMCUsIDAlLCAwLjM3KSA4NS4yJSwgaHNsYSgwLCAwJSwgMCUsIDAuMjgzKSA4Ny4zJSwgaHNsYSgwLCAwJSwgMCUsIDAuMikgODkuNiUsIGhzbGEoMCwgMCUsIDAlLCAwLjEyNCkgOTIuMyUsIGhzbGEoMCwgMCUsIDAlLCAwLjA1NikgOTUuNiUsIGhzbGEoMCwgMCUsIDAlLCAwKSAxMDAlKSc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaWdodHdlaWdodCBoZWxwZXIgdGhhdCBtaXJyb3JzIE9ic2lkaWFuJ3Mgc2V0Q3NzUHJvcHMgQVBJIHdoZXJlIHVuYXZhaWxhYmxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0Q3NzUHJvcHMoZWw6IEhUTUxFbGVtZW50LCBwcm9wczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyPikge1xyXG4gICAgT2JqZWN0LmVudHJpZXMocHJvcHMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xyXG4gICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KGtleSwgU3RyaW5nKHZhbHVlKSk7XHJcbiAgICB9KTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIENvbW1hbmQgcmVnaXN0cmF0aW9uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBVSVNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncyc7XHJcbmltcG9ydCB7IFVJVmlzaWJpbGl0eVN0YXRlIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5pbnRlcmZhY2UgQ29tbWFuZENvbnRleHQge1xyXG5cdHBsdWdpbjogUGx1Z2luO1xyXG5cdHNldHRpbmdzOiBVSVNldHRpbmdzO1xyXG5cdHNhdmVTZXR0aW5nczogKCkgPT4gUHJvbWlzZTx2b2lkPjtcclxuXHRyZWZyZXNoOiAoKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhjb250ZXh0OiBDb21tYW5kQ29udGV4dCkge1xyXG5cdGNvbnN0IHsgcGx1Z2luLCBzZXR0aW5ncywgc2F2ZVNldHRpbmdzLCByZWZyZXNoIH0gPSBjb250ZXh0O1xyXG5cclxuXHQvLyBUb2dnbGUgY29tbWFuZHMgZm9yIGF1dG8taGlkZSBlbGVtZW50cyAoU2hvdy9IaWRlL1JldmVhbClcclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXRpdGxlLWJhcicsICdUb2dnbGUgdGl0bGUgYmFyJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MudGl0bGVCYXIgPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MudGl0bGVCYXIpO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtZmlsZS1leHBsb3Jlci1uYXYtaGVhZGVyJywgJ1RvZ2dsZSBmaWxlIGV4cGxvcmVyIG5hdmlnYXRpb24gaGVhZGVyJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MuZmlsZUV4cGxvcmVyTmF2SGVhZGVyID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLmZpbGVFeHBsb3Jlck5hdkhlYWRlcik7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1vdGhlci1uYXYtaGVhZGVycycsICdUb2dnbGUgb3RoZXIgbmF2aWdhdGlvbiBoZWFkZXJzJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3Mub3RoZXJOYXZIZWFkZXJzID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLm90aGVyTmF2SGVhZGVycyk7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1sZWZ0LXRhYi1oZWFkZXJzJywgJ1RvZ2dsZSBsZWZ0IHRhYiBoZWFkZXJzJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MubGVmdFRhYkhlYWRlcnMgPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MubGVmdFRhYkhlYWRlcnMpO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtcmlnaHQtdGFiLWhlYWRlcnMnLCAnVG9nZ2xlIHJpZ2h0IHRhYiBoZWFkZXJzJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MucmlnaHRUYWJIZWFkZXJzID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLnJpZ2h0VGFiSGVhZGVycyk7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0Ly8gTm90ZTogUmliYm9uIHRvZ2dsZSBleGNsdWRlZCAtIHVzZXMgYmFzZSBPYnNpZGlhbiBjb21tYW5kXHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtdmF1bHQtc3dpdGNoZXInLCAnVG9nZ2xlIHZhdWx0IHN3aXRjaGVyJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MudmF1bHRTd2l0Y2hlciA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy52YXVsdFN3aXRjaGVyKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLWhlbHAtYnV0dG9uJywgJ1RvZ2dsZSBoZWxwIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLmhlbHBCdXR0b24gPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MuaGVscEJ1dHRvbik7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1zZXR0aW5ncy1idXR0b24nLCAnVG9nZ2xlIHNldHRpbmdzIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnNldHRpbmdzQnV0dG9uID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLnNldHRpbmdzQnV0dG9uKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBPcGVuIHNldHRpbmdzIGNvbW1hbmRcclxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRpZDogJ29wZW4tc2V0dGluZ3MnLFxyXG5cdFx0bmFtZTogJ09wZW4gc2V0dGluZ3MnLFxyXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdFx0Ly8gQWNjZXNzIGFwcCB0aHJvdWdoIHBsdWdpbiBpbnN0YW5jZSAoUGx1Z2luIGNsYXNzIGhhcyBhcHAgcHJvcGVydHkpXHJcblx0XHRcdGNvbnN0IGFwcCA9IHBsdWdpbi5hcHA7XHJcblx0XHRcdC8vIFVzZSB0eXBlIGFzc2VydGlvbiBmb3Igc2V0dGluZyBBUEkgYXMgaXQncyBub3QgaW4gdGhlIHB1YmxpYyB0eXBlIGRlZmluaXRpb25zXHJcblx0XHRcdC8vIGJ1dCBpcyBhdmFpbGFibGUgaW4gdGhlIHJ1bnRpbWUgQVBJXHJcblx0XHRcdGNvbnN0IHNldHRpbmdBcGkgPSAoYXBwIGFzIHsgc2V0dGluZz86IHsgb3Blbj86ICgpID0+IHZvaWQ7IG9wZW5UYWJCeUlkPzogKGlkOiBzdHJpbmcpID0+IHZvaWQgfSB9KS5zZXR0aW5nO1xyXG5cdFx0XHRpZiAoc2V0dGluZ0FwaSkge1xyXG5cdFx0XHRcdHNldHRpbmdBcGkub3Blbj8uKCk7XHJcblx0XHRcdFx0Ly8gT3BlbiB0aGUgcGx1Z2luJ3Mgc2V0dGluZ3MgdGFiXHJcblx0XHRcdFx0Ly8gVXNlIHR5cGUgYXNzZXJ0aW9uIGZvciBzZXR0aW5nVGFiIGFzIGl0J3MgYSBwcml2YXRlIHByb3BlcnR5XHJcblx0XHRcdFx0Y29uc3QgcGx1Z2luSW5zdGFuY2UgPSBwbHVnaW4gYXMgeyBzZXR0aW5nVGFiPzogeyBpZD86IHN0cmluZyB9IH07XHJcblx0XHRcdFx0aWYgKHBsdWdpbkluc3RhbmNlLnNldHRpbmdUYWI/LmlkICYmIHNldHRpbmdBcGkub3BlblRhYkJ5SWQpIHtcclxuXHRcdFx0XHRcdHNldHRpbmdBcGkub3BlblRhYkJ5SWQocGx1Z2luSW5zdGFuY2Uuc2V0dGluZ1RhYi5pZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdH0pO1xyXG5cclxuXHQvLyBUb2dnbGUgY29tbWFuZHMgZm9yIHNpbXBsZSB0b2dnbGVzXHJcblxyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXRhYi1iYXInLCAnVG9nZ2xlIHRhYiBiYXInLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy50YWJCYXIgPSAhc2V0dGluZ3MudGFiQmFyO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtdGFiLWJhci1zaW5nbGUnLCAnVG9nZ2xlIGhpZGUgdGFiIGJhciB3aGVuIG9ubHkgb25lIHRhYicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnRhYkJhckhpZGVXaGVuU2luZ2xlID0gIXNldHRpbmdzLnRhYkJhckhpZGVXaGVuU2luZ2xlO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtbmV3LW5vdGUtYnV0dG9uJywgJ1RvZ2dsZSBuZXcgbm90ZSBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5uZXdOb3RlQnV0dG9uID0gIXNldHRpbmdzLm5ld05vdGVCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1uZXctZm9sZGVyLWJ1dHRvbicsICdUb2dnbGUgbmV3IGZvbGRlciBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5uZXdGb2xkZXJCdXR0b24gPSAhc2V0dGluZ3MubmV3Rm9sZGVyQnV0dG9uO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtc29ydC1vcmRlci1idXR0b24nLCAnVG9nZ2xlIHNvcnQgb3JkZXIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3Muc29ydE9yZGVyQnV0dG9uID0gIXNldHRpbmdzLnNvcnRPcmRlckJ1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLWF1dG8tcmV2ZWFsLWJ1dHRvbicsICdUb2dnbGUgYXV0byByZXZlYWwgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MuYXV0b1JldmVhbEJ1dHRvbiA9ICFzZXR0aW5ncy5hdXRvUmV2ZWFsQnV0dG9uO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtY29sbGFwc2UtYWxsLWJ1dHRvbicsICdUb2dnbGUgY29sbGFwc2UgYWxsIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLmNvbGxhcHNlQWxsQnV0dG9uID0gIXNldHRpbmdzLmNvbGxhcHNlQWxsQnV0dG9uO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtcmVhZGluZy1tb2RlLWJ1dHRvbicsICdUb2dnbGUgcmVhZGluZyBtb2RlIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnJlYWRpbmdNb2RlQnV0dG9uID0gIXNldHRpbmdzLnJlYWRpbmdNb2RlQnV0dG9uO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtc2VhcmNoLXNldHRpbmdzLWJ1dHRvbicsICdUb2dnbGUgc2VhcmNoIHNldHRpbmdzIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnNlYXJjaFNldHRpbmdzQnV0dG9uID0gIXNldHRpbmdzLnNlYXJjaFNldHRpbmdzQnV0dG9uO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdC8vIFRhYiBpY29ucyAtIG5vdyBzdXBwb3J0IFNob3cvSGlkZS9SZXZlYWxcclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXRhYi1saXN0LWljb24nLCAnVG9nZ2xlIHRhYiBsaXN0IGljb24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy50YWJMaXN0SWNvbiA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy50YWJMaXN0SWNvbik7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1uZXctdGFiLWljb24nLCAnVG9nZ2xlIG5ldyB0YWIgaWNvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLm5ld1RhYkljb24gPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MubmV3VGFiSWNvbik7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS10YWItY2xvc2UtYnV0dG9uJywgJ1RvZ2dsZSB0YWIgY2xvc2UgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MudGFiQ2xvc2VCdXR0b24gPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MudGFiQ2xvc2VCdXR0b24pO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtc3RhdHVzLWJhcicsICdUb2dnbGUgc3RhdHVzIGJhcicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnN0YXR1c0JhciA9ICFzZXR0aW5ncy5zdGF0dXNCYXI7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0Ly8gU2Nyb2xsIGJhcnMgLSBub3cgc3VwcG9ydCBTaG93L0hpZGUvUmV2ZWFsXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1zY3JvbGwtYmFycycsICdUb2dnbGUgc2Nyb2xsIGJhcnMnLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5zY3JvbGxCYXJzID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLnNjcm9sbEJhcnMpO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdC8vIFNpZGViYXIgdG9nZ2xlIGJ1dHRvbnMgLSBub3cgc3VwcG9ydCBTaG93L0hpZGUvUmV2ZWFsXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1sZWZ0LXNpZGViYXItdG9nZ2xlLWJ1dHRvbicsICdUb2dnbGUgbGVmdCBzaWRlYmFyIHRvZ2dsZSBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5sZWZ0U2lkZWJhclRvZ2dsZUJ1dHRvbiA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5sZWZ0U2lkZWJhclRvZ2dsZUJ1dHRvbik7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1yaWdodC1zaWRlYmFyLXRvZ2dsZS1idXR0b24nLCAnVG9nZ2xlIHJpZ2h0IHNpZGViYXIgdG9nZ2xlIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnJpZ2h0U2lkZWJhclRvZ2dsZUJ1dHRvbiA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5yaWdodFNpZGViYXJUb2dnbGVCdXR0b24pO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtdG9vbHRpcHMnLCAnVG9nZ2xlIHRvb2x0aXBzJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MudG9vbHRpcHMgPSAhc2V0dGluZ3MudG9vbHRpcHM7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1zZWFyY2gtc3VnZ2VzdGlvbnMnLCAnVG9nZ2xlIHNlYXJjaCBzdWdnZXN0aW9ucycsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnNlYXJjaFN1Z2dlc3Rpb25zID0gIXNldHRpbmdzLnNlYXJjaFN1Z2dlc3Rpb25zO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtc2VhcmNoLXRlcm0tY291bnRzJywgJ1RvZ2dsZSBzZWFyY2ggdGVybSBjb3VudHMnLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5zZWFyY2hUZXJtQ291bnRzID0gIXNldHRpbmdzLnNlYXJjaFRlcm1Db3VudHM7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1wcm9wZXJ0aWVzLXJlYWRpbmctdmlldycsICdUb2dnbGUgcHJvcGVydGllcyBpbiBSZWFkaW5nIHZpZXcnLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0aWVzSW5SZWFkaW5nVmlldyA9ICFzZXR0aW5ncy5wcm9wZXJ0aWVzSW5SZWFkaW5nVmlldztcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLWRlZW1waGFzaXplLXByb3BlcnRpZXMnLCAnVG9nZ2xlIGRlZW1waGFzaXplIHByb3BlcnRpZXMnLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5kZWVtcGhhc2l6ZVByb3BlcnRpZXMgPSAhc2V0dGluZ3MuZGVlbXBoYXNpemVQcm9wZXJ0aWVzO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtcHJvcGVydGllcy1oZWFkaW5nJywgJ1RvZ2dsZSBwcm9wZXJ0aWVzIGhlYWRpbmcnLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0aWVzSW5IZWFkaW5nID0gIXNldHRpbmdzLnByb3BlcnRpZXNJbkhlYWRpbmc7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1hZGQtcHJvcGVydHktYnV0dG9uJywgJ1RvZ2dsZSBhZGQgcHJvcGVydHkgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MuYWRkUHJvcGVydHlCdXR0b24gPSAhc2V0dGluZ3MuYWRkUHJvcGVydHlCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1pbnN0cnVjdGlvbnMnLCAnVG9nZ2xlIGluc3RydWN0aW9ucycsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLmluc3RydWN0aW9ucyA9ICFzZXR0aW5ncy5pbnN0cnVjdGlvbnM7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0Ly8gTW9iaWxlIHRvZ2dsZSBjb21tYW5kc1xyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtbW9iaWxlLWNoZXZyb25zLWljb24nLCAnVG9nZ2xlIG1vYmlsZSBjaGV2cm9ucyBpY29uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MubW9iaWxlQ2hldnJvbnNJY29uID0gIXNldHRpbmdzLm1vYmlsZUNoZXZyb25zSWNvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW5hdmlnYXRlLWJhY2stYnV0dG9uJywgJ1RvZ2dsZSBuYXZpZ2F0ZSBiYWNrIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLm5hdmlnYXRlQmFja0J1dHRvbiA9ICFzZXR0aW5ncy5uYXZpZ2F0ZUJhY2tCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1uYXZpZ2F0ZS1mb3J3YXJkLWJ1dHRvbicsICdUb2dnbGUgbmF2aWdhdGUgZm9yd2FyZCBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5uYXZpZ2F0ZUZvcndhcmRCdXR0b24gPSAhc2V0dGluZ3MubmF2aWdhdGVGb3J3YXJkQnV0dG9uO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtcXVpY2stc3dpdGNoZXItYnV0dG9uJywgJ1RvZ2dsZSBxdWljayBzd2l0Y2hlciBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5xdWlja1N3aXRjaGVyQnV0dG9uID0gIXNldHRpbmdzLnF1aWNrU3dpdGNoZXJCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1tb2JpbGUtbmV3LXRhYi1idXR0b24nLCAnVG9nZ2xlIG1vYmlsZSBuZXcgdGFiIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLm1vYmlsZU5ld1RhYkJ1dHRvbiA9ICFzZXR0aW5ncy5tb2JpbGVOZXdUYWJCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1vcGVuLXRhYi1idXR0b24nLCAnVG9nZ2xlIG9wZW4gdGFiIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLm9wZW5UYWJCdXR0b24gPSAhc2V0dGluZ3Mub3BlblRhYkJ1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXJpYmJvbi1tZW51LWJ1dHRvbicsICdUb2dnbGUgcmliYm9uIG1lbnUgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MucmliYm9uTWVudUJ1dHRvbiA9ICFzZXR0aW5ncy5yaWJib25NZW51QnV0dG9uO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW46IFBsdWdpbiwgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4pIHtcclxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRpZDogaWQsXHJcblx0XHRuYW1lOiBuYW1lLFxyXG5cdFx0Y2FsbGJhY2s6IGNhbGxiYWNrLFxyXG5cdH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoY3VycmVudFN0YXRlOiBVSVZpc2liaWxpdHlTdGF0ZSk6IFVJVmlzaWJpbGl0eVN0YXRlIHtcclxuXHQvLyBJZiBjdXJyZW50IHN0YXRlIGlzIFwicmV2ZWFsXCIsIHJlc2V0IHRvIFwic2hvd1wiIGZpcnN0XHJcblx0aWYgKGN1cnJlbnRTdGF0ZSA9PT0gJ3JldmVhbCcpIHtcclxuXHRcdHJldHVybiAnaGlkZSc7XHJcblx0fVxyXG5cdC8vIFRvZ2dsZSBiZXR3ZWVuIFwic2hvd1wiIGFuZCBcImhpZGVcIlxyXG5cdHJldHVybiBjdXJyZW50U3RhdGUgPT09ICdzaG93JyA/ICdoaWRlJyA6ICdzaG93JztcclxufVxyXG4iLCAiLyoqXHJcbiAqIE1haW4gU2V0dGluZ3MgVGFiIHdpdGggdGFiIG5hdmlnYXRpb25cclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFBsYXRmb3JtIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgVUlUd2Vha2VyUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBUYWJSZW5kZXJlciB9IGZyb20gJy4vY29tbW9uL1RhYlJlbmRlcmVyJztcclxuaW1wb3J0IHsgSGlkZXJUYWIgfSBmcm9tICcuL3RhYnMvSGlkZXJUYWInO1xyXG5pbXBvcnQgeyBUYWJCYXJUYWIgfSBmcm9tICcuL3RhYnMvVGFiQmFyVGFiJztcclxuaW1wb3J0IHsgU3RhdHVzQmFyVGFiIH0gZnJvbSAnLi90YWJzL1N0YXR1c0JhclRhYic7XHJcbmltcG9ydCB7IEV4cGxvcmVyVGFiIH0gZnJvbSAnLi90YWJzL0V4cGxvcmVyVGFiJztcclxuaW1wb3J0IHsgTW9iaWxlVGFiIH0gZnJvbSAnLi90YWJzL01vYmlsZVRhYic7XHJcblxyXG5leHBvcnQgY2xhc3MgVUlUd2Vha2VyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luO1xyXG5cdHB1YmxpYyBpY29uID0gJ2x1Y2lkZS13cmVuY2gnO1xyXG5cdHB1YmxpYyBpZCA9ICd1aS10d2Vha2VyJztcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0Ly8gT24gbW9iaWxlLCBzaW1wbGlmeToganVzdCBzaG93IHRoZSBNb2JpbGUgdGFiIGRpcmVjdGx5IChubyB0YWIgbmF2aWdhdGlvbilcclxuXHRcdC8vIFRoaXMgYXZvaWRzIENTUyBjb25mbGljdHMgd2l0aCBPYnNpZGlhbidzIGFwcC5jc3MgYW5kIHByb3ZpZGVzIGEgY2xlYW5lciBleHBlcmllbmNlXHJcblx0XHQvLyBET04nVCBhZGQgdWktdHdlYWtlci1zZXR0aW5ncyBjbGFzcyBvbiBtb2JpbGUgLSBsZXQgaXQgdXNlIG5hdGl2ZSBPYnNpZGlhbiBzdHlsaW5nXHJcblx0XHRpZiAoUGxhdGZvcm0uaXNNb2JpbGUgfHwgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLW1vYmlsZScpKSB7XHJcblx0XHRcdGNvbnN0IG1vYmlsZVRhYiA9IG5ldyBNb2JpbGVUYWIodGhpcy5hcHAsIHRoaXMucGx1Z2luKTtcclxuXHRcdFx0dm9pZCBtb2JpbGVUYWIucmVuZGVyKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERlc2t0b3A6IEFkZCB0aGUgY2xhc3MgZm9yIHRhYiBuYXZpZ2F0aW9uIHN0eWxpbmdcclxuXHRcdGNvbnRhaW5lckVsLmFkZENsYXNzKCd1aS10d2Vha2VyLXNldHRpbmdzJyk7XHJcblxyXG5cdFx0Ly8gRGVza3RvcDogVXNlIHRhYiBuYXZpZ2F0aW9uXHJcblx0XHRjb25zdCB0YWJDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3RhYi1jb250YWluZXInKTtcclxuXHRcdGNvbnN0IHRhYk5hdiA9IHRhYkNvbnRhaW5lci5jcmVhdGVEaXYoJ3RhYi1uYXYnKTtcclxuXHRcdGNvbnN0IHRhYkNvbnRlbnQgPSB0YWJDb250YWluZXIuY3JlYXRlRGl2KCd0YWItY29udGVudCcpO1xyXG5cclxuXHRcdC8vIFRhYiBkZWZpbml0aW9uc1xyXG5cdFx0Y29uc3QgdGFiczogQXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IHJlbmRlcmVyOiBUYWJSZW5kZXJlciB9PiA9IFtcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlkOiAnaGlkZXInLFxyXG5cdFx0XHRcdG5hbWU6ICdIaWRlcicsXHJcblx0XHRcdFx0cmVuZGVyZXI6IG5ldyBIaWRlclRhYih0aGlzLmFwcCwgdGhpcy5wbHVnaW4pXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZDogJ3N0YXR1cy1iYXInLFxyXG5cdFx0XHRcdG5hbWU6ICdTdGF0dXMgYmFyJyxcclxuXHRcdFx0XHRyZW5kZXJlcjogbmV3IFN0YXR1c0JhclRhYih0aGlzLmFwcCwgdGhpcy5wbHVnaW4pXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZDogJ3RhYi1iYXInLFxyXG5cdFx0XHRcdG5hbWU6ICdUYWIgYmFyJyxcclxuXHRcdFx0XHRyZW5kZXJlcjogbmV3IFRhYkJhclRhYih0aGlzLmFwcCwgdGhpcy5wbHVnaW4pXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZDogJ2V4cGxvcmVyJyxcclxuXHRcdFx0XHRuYW1lOiAnRXhwbG9yZXInLFxyXG5cdFx0XHRcdHJlbmRlcmVyOiBuZXcgRXhwbG9yZXJUYWIodGhpcy5hcHAsIHRoaXMucGx1Z2luKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWQ6ICdtb2JpbGUnLFxyXG5cdFx0XHRcdG5hbWU6ICdNb2JpbGUnLFxyXG5cdFx0XHRcdHJlbmRlcmVyOiBuZXcgTW9iaWxlVGFiKHRoaXMuYXBwLCB0aGlzLnBsdWdpbilcclxuXHRcdFx0fVxyXG5cdFx0XTtcclxuXHJcblx0XHQvLyBDcmVhdGUgdGFiIGJ1dHRvbnMgd2l0aCBjbGVhbiBzdHlsaW5nXHJcblx0XHR0YWJzLmZvckVhY2goKHRhYiwgaW5kZXgpID0+IHtcclxuXHRcdFx0Y29uc3QgYnV0dG9uID0gdGFiTmF2LmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcblx0XHRcdFx0dGV4dDogdGFiLm5hbWUsXHJcblx0XHRcdFx0Y2xzOiBgdGFiLWJ1dHRvbiAke2luZGV4ID09PSAwID8gJ2FjdGl2ZScgOiAnJ31gXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdC8vIFJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBhbGwgYnV0dG9uc1xyXG5cdFx0XHRcdHRhYk5hdi5xdWVyeVNlbGVjdG9yQWxsKCcudGFiLWJ1dHRvbicpLmZvckVhY2goYnRuID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XHJcblx0XHRcdFx0Ly8gQWRkIGFjdGl2ZSBjbGFzcyB0byBjbGlja2VkIGJ1dHRvblxyXG5cdFx0XHRcdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHRcdFx0XHQvLyBSZW5kZXIgdGFiIGNvbnRlbnQgaW1tZWRpYXRlbHlcclxuXHRcdFx0XHR0YWJDb250ZW50LmVtcHR5KCk7XHJcblx0XHRcdFx0dm9pZCB0YWIucmVuZGVyZXIucmVuZGVyKHRhYkNvbnRlbnQpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFJlbmRlciB0aGUgZmlyc3QgdGFiIGJ5IGRlZmF1bHRcclxuXHRcdHZvaWQgdGFic1swXS5yZW5kZXJlci5yZW5kZXIodGFiQ29udGVudCk7XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogQmFzZSBjbGFzcyBmb3IgYWxsIHNldHRpbmdzIHRhYnNcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XHJcbmltcG9ydCB7IFVJU2V0dGluZ3MgfSBmcm9tICcuLi8uLi9zZXR0aW5ncyc7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVGFiUmVuZGVyZXIge1xyXG5cdHByb3RlY3RlZCBhcHA6IEFwcDtcclxuXHRwcm90ZWN0ZWQgcGx1Z2luOiBVSVR3ZWFrZXJQbHVnaW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFVJVHdlYWtlclBsdWdpbikge1xyXG5cdFx0dGhpcy5hcHAgPSBhcHA7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGFic3RyYWN0IHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB8IFByb21pc2U8dm9pZD47XHJcblxyXG5cdHByb3RlY3RlZCBnZXRTZXR0aW5ncygpOiBVSVNldHRpbmdzIHtcclxuXHRcdHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBhc3luYyBzYXZlU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMucGx1Z2luLnJlZnJlc2goKTtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBjcmVhdGVEcm9wZG93blNldHRpbmcoXHJcblx0XHRjb250YWluZXI6IEhUTUxFbGVtZW50LFxyXG5cdFx0bmFtZTogc3RyaW5nLFxyXG5cdFx0ZGVzY3JpcHRpb246IHN0cmluZyxcclxuXHRcdHZhbHVlOiBzdHJpbmcsXHJcblx0XHRvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxyXG5cdFx0b25DaGFuZ2U6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkXHJcblx0KTogU2V0dGluZyB7XHJcblx0XHRyZXR1cm4gbmV3IFNldHRpbmcoY29udGFpbmVyKVxyXG5cdFx0XHQuc2V0TmFtZShuYW1lKVxyXG5cdFx0XHQuc2V0RGVzYyhkZXNjcmlwdGlvbilcclxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuXHRcdFx0XHRPYmplY3QuZW50cmllcyhvcHRpb25zKS5mb3JFYWNoKChba2V5LCBsYWJlbF0pID0+IHtcclxuXHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihrZXksIGxhYmVsKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRkcm9wZG93bi5zZXRWYWx1ZSh2YWx1ZSk7XHJcblx0XHRcdFx0ZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRvbkNoYW5nZSh2YWx1ZSk7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHJldHVybiBkcm9wZG93bjtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgY3JlYXRlVG9nZ2xlU2V0dGluZyhcclxuXHRcdGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcblx0XHRuYW1lOiBzdHJpbmcsXHJcblx0XHRkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG5cdFx0dmFsdWU6IGJvb2xlYW4sXHJcblx0XHRvbkNoYW5nZTogKHZhbHVlOiBib29sZWFuKSA9PiB2b2lkXHJcblx0KTogU2V0dGluZyB7XHJcblx0XHRyZXR1cm4gbmV3IFNldHRpbmcoY29udGFpbmVyKVxyXG5cdFx0XHQuc2V0TmFtZShuYW1lKVxyXG5cdFx0XHQuc2V0RGVzYyhkZXNjcmlwdGlvbilcclxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh2YWx1ZSk7XHJcblx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0b25DaGFuZ2UodmFsdWUpO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRyZXR1cm4gdG9nZ2xlO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBjcmVhdGVTbGlkZXJTZXR0aW5nKFxyXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdG5hbWU6IHN0cmluZyxcclxuXHRcdGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcblx0XHR2YWx1ZTogbnVtYmVyLFxyXG5cdFx0bWluOiBudW1iZXIsXHJcblx0XHRtYXg6IG51bWJlcixcclxuXHRcdHN0ZXA6IG51bWJlcixcclxuXHRcdG9uQ2hhbmdlOiAodmFsdWU6IG51bWJlcikgPT4gdm9pZFxyXG5cdCk6IFNldHRpbmcge1xyXG5cdFx0cmV0dXJuIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcclxuXHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0LnNldERlc2MoZGVzY3JpcHRpb24pXHJcblx0XHRcdC5hZGRTbGlkZXIoc2xpZGVyID0+IHtcclxuXHRcdFx0XHRzbGlkZXJcclxuXHRcdFx0XHRcdC5zZXRMaW1pdHMobWluLCBtYXgsIHN0ZXApXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodmFsdWUpXHJcblx0XHRcdFx0XHQuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRvbkNoYW5nZSh2YWx1ZSk7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRyZXR1cm4gc2xpZGVyO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcblxyXG59XHJcbiIsICIvKipcclxuICogQ29tcGF0aWJpbGl0eSB1dGlsaXRpZXMgZm9yIHNldHRpbmdzXHJcbiAqIFByb3ZpZGVzIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgZm9yIFNldHRpbmdHcm91cCAocmVxdWlyZXMgQVBJIDEuMTEuMCspXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgU2V0dGluZywgcmVxdWlyZUFwaVZlcnNpb24gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCAqIGFzIE9ic2lkaWFuTW9kdWxlIGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgdGhhdCB3b3JrcyB3aXRoIGJvdGggU2V0dGluZ0dyb3VwIGFuZCBmYWxsYmFjayBjb250YWluZXJcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3NDb250YWluZXIge1xyXG5cdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBzZXR0aW5ncyBjb250YWluZXIgdGhhdCB1c2VzIFNldHRpbmdHcm91cCBpZiBhdmFpbGFibGUgKEFQSSAxLjExLjArKSxcclxuICogb3RoZXJ3aXNlIGZhbGxzIGJhY2sgdG8gY3JlYXRpbmcgYSBoZWFkaW5nIGFuZCB1c2luZyB0aGUgY29udGFpbmVyIGRpcmVjdGx5LlxyXG4gKiBcclxuICogVXNlcyByZXF1aXJlQXBpVmVyc2lvbignMS4xMS4wJykgdG8gY2hlY2sgaWYgU2V0dGluZ0dyb3VwIGlzIGF2YWlsYWJsZS5cclxuICogVGhpcyBpcyB0aGUgb2ZmaWNpYWwgT2JzaWRpYW4gQVBJIG1ldGhvZCBmb3IgdmVyc2lvbiBjaGVja2luZy5cclxuICogXHJcbiAqIEBwYXJhbSBjb250YWluZXJFbCAtIFRoZSBjb250YWluZXIgZWxlbWVudCBmb3Igc2V0dGluZ3NcclxuICogQHBhcmFtIGhlYWRpbmcgLSBUaGUgaGVhZGluZyB0ZXh0IGZvciB0aGUgc2V0dGluZ3MgZ3JvdXAgKG9wdGlvbmFsKVxyXG4gKiBAcGFyYW0gbWFuaWZlc3RJZCAtIFRoZSBwbHVnaW4ncyBtYW5pZmVzdCBJRCBmb3IgQ1NTIHNjb3BpbmcgKHJlcXVpcmVkIGZvciBmYWxsYmFjayBtb2RlKVxyXG4gKiBAcmV0dXJucyBBIGNvbnRhaW5lciB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNldHRpbmdzR3JvdXAoXHJcblx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxyXG5cdGhlYWRpbmc/OiBzdHJpbmcsXHJcblx0bWFuaWZlc3RJZD86IHN0cmluZ1xyXG4pOiBTZXR0aW5nc0NvbnRhaW5lciB7XHJcblx0Ly8gQ2hlY2sgaWYgU2V0dGluZ0dyb3VwIGlzIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspXHJcblx0Ly8gcmVxdWlyZUFwaVZlcnNpb24gaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmdcclxuXHRpZiAocmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpKSB7XHJcblx0XHQvLyBVc2UgU2V0dGluZ0dyb3VwIC0gaXQncyBndWFyYW50ZWVkIHRvIGV4aXN0IGlmIHJlcXVpcmVBcGlWZXJzaW9uIHJldHVybnMgdHJ1ZVxyXG5cdFx0Ly8gQWNjZXNzIFNldHRpbmdHcm91cCB2aWEgdHlwZSBhc3NlcnRpb24gc2luY2UgaXQgbWF5IG5vdCBiZSBpbiB0eXBlIGRlZmluaXRpb25zXHJcblx0XHQvLyBmb3Igb2xkZXIgVHlwZVNjcmlwdCB2ZXJzaW9ucywgYnV0IGV4aXN0cyBhdCBydW50aW1lIGluIE9ic2lkaWFuIDEuMTEuMCtcclxuXHRcdC8vIFVzaW5nIHVua25vd24gaW5zdGVhZCBvZiBhbnkgdG8gc2F0aXNmeSBlc2xpbnQgd2hpbGUgbWFpbnRhaW5pbmcgdHlwZSBzYWZldHlcclxuXHRcdGNvbnN0IFNldHRpbmdHcm91cENsYXNzID0gKE9ic2lkaWFuTW9kdWxlIGFzIHVua25vd24gYXMgeyBTZXR0aW5nR3JvdXA/OiBuZXcgKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkgPT4ge1xyXG5cdFx0XHRzZXRIZWFkaW5nKGhlYWRpbmc6IHN0cmluZyk6IHtcclxuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcblx0XHRcdH07XHJcblx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxuXHRcdH0gfSkuU2V0dGluZ0dyb3VwO1xyXG5cdFx0XHJcblx0XHRpZiAoU2V0dGluZ0dyb3VwQ2xhc3MpIHtcclxuXHRcdFx0Y29uc3QgZ3JvdXAgPSBoZWFkaW5nIFxyXG5cdFx0XHRcdD8gbmV3IFNldHRpbmdHcm91cENsYXNzKGNvbnRhaW5lckVsKS5zZXRIZWFkaW5nKGhlYWRpbmcpXHJcblx0XHRcdFx0OiBuZXcgU2V0dGluZ0dyb3VwQ2xhc3MoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKSB7XHJcblx0XHRcdFx0XHRncm91cC5hZGRTZXR0aW5nKGNiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIEZhbGxiYWNrIHBhdGggKGVpdGhlciBBUEkgPCAxLjExLjAgb3IgU2V0dGluZ0dyb3VwIG5vdCBmb3VuZClcclxuXHQvLyBBZGQgc2NvcGluZyBjbGFzcyB0byBjb250YWluZXJFbCB0byBzY29wZSBDU1MgdG8gb25seSB0aGlzIHBsdWdpbidzIHNldHRpbmdzXHJcblx0aWYgKG1hbmlmZXN0SWQpIHtcclxuXHRcdGNvbnRhaW5lckVsLmFkZENsYXNzKGAke21hbmlmZXN0SWR9LXNldHRpbmdzLWNvbXBhdGApO1xyXG5cdH1cclxuXHRcclxuXHR7XHJcblx0XHQvLyBGYWxsYmFjazogQ3JlYXRlIGEgaGVhZGluZyBtYW51YWxseSBmb3Igb2xkZXIgQVBJIHZlcnNpb25zXHJcblx0XHQvLyBOb3RlOiBXaGlsZSBiZXN0IHByYWN0aWNlIHByZWZlcnMgU2V0dGluZy5zZXRIZWFkaW5nKCksIHRoZSBmYWxsYmFjayBwYXRoXHJcblx0XHQvLyBpcyBmb3IgdmVyc2lvbnMgdGhhdCBtYXkgbm90IHN1cHBvcnQgaXQsIHNvIG1hbnVhbCBoZWFkaW5nIGlzIGFwcHJvcHJpYXRlIGhlcmVcclxuXHRcdGlmIChoZWFkaW5nKSB7XHJcblx0XHRcdGNvbnN0IGhlYWRpbmdFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignc2V0dGluZy1ncm91cC1oZWFkaW5nJyk7XHJcblx0XHRcdGhlYWRpbmdFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGhlYWRpbmcgfSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKSB7XHJcblx0XHRcdFx0Y29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0XHRjYihzZXR0aW5nKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XHJcbn1cclxuXHJcbiIsICIvKipcclxuICogQ29tbWFuZCBQaWNrZXIgTW9kYWxcclxuICogU2VhcmNoYWJsZSBtb2RhbCBmb3Igc2VsZWN0aW5nIGFuIE9ic2lkaWFuIGNvbW1hbmRcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIEZ1enp5U3VnZ2VzdE1vZGFsIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW50ZXJmYWNlIENvbW1hbmRPcHRpb24ge1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0bmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tbWFuZFBpY2tlck1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8Q29tbWFuZE9wdGlvbj4ge1xyXG5cdHByaXZhdGUgb25TZWxlY3Q6IChjb21tYW5kSWQ6IHN0cmluZykgPT4gdm9pZDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU2VsZWN0OiAoY29tbWFuZElkOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLm9uU2VsZWN0ID0gb25TZWxlY3Q7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtcygpOiBDb21tYW5kT3B0aW9uW10ge1xyXG5cdFx0Y29uc3QgY29tbWFuZFJlZ2lzdHJ5ID0gKHRoaXMuYXBwIGFzIHsgY29tbWFuZHM/OiB7IGxpc3RDb21tYW5kcz86ICgpID0+IENvbW1hbmRPcHRpb25bXSB9IH0pLmNvbW1hbmRzO1xyXG5cdFx0Y29uc3QgY29tbWFuZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb21tYW5kT3B0aW9uPigpO1xyXG5cclxuXHRcdGlmIChjb21tYW5kUmVnaXN0cnkgJiYgdHlwZW9mIGNvbW1hbmRSZWdpc3RyeS5saXN0Q29tbWFuZHMgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBjb21tYW5kcyA9IGNvbW1hbmRSZWdpc3RyeS5saXN0Q29tbWFuZHMoKTtcclxuXHRcdFx0XHRmb3IgKGNvbnN0IGNvbW1hbmQgb2YgY29tbWFuZHMpIHtcclxuXHRcdFx0XHRcdGlmIChjb21tYW5kICYmIGNvbW1hbmQuaWQgJiYgY29tbWFuZC5uYW1lICYmICFjb21tYW5kTWFwLmhhcyhjb21tYW5kLmlkKSkge1xyXG5cdFx0XHRcdFx0XHRjb21tYW5kTWFwLnNldChjb21tYW5kLmlkLCB7XHJcblx0XHRcdFx0XHRcdFx0aWQ6IGNvbW1hbmQuaWQsXHJcblx0XHRcdFx0XHRcdFx0bmFtZTogY29tbWFuZC5uYW1lLFxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdC8vIEVycm9yIGdldHRpbmcgY29tbWFuZHMgLSBmYWxsIGJhY2sgdG8gZW1wdHkgbGlzdFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIEFycmF5LmZyb20oY29tbWFuZE1hcC52YWx1ZXMoKSkuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtVGV4dChpdGVtOiBDb21tYW5kT3B0aW9uKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBpdGVtLm5hbWU7XHJcblx0fVxyXG5cclxuXHRvbkNob29zZUl0ZW0oaXRlbTogQ29tbWFuZE9wdGlvbiwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy5vblNlbGVjdChpdGVtLmlkKTtcclxuXHRcdC8vIERvbid0IGNsb3NlIGhlcmUgLSBsZXQgdGhlIGNhbGxiYWNrIGhhbmRsZSBpdFxyXG5cdH1cclxufVxyXG5cclxuIiwgIi8qKlxyXG4gKiBJY29uIFBpY2tlciBNb2RhbFxyXG4gKiBTZWFyY2hhYmxlIG1vZGFsIGZvciBzZWxlY3RpbmcgYSBMdWNpZGUgaWNvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgRnV6enlTdWdnZXN0TW9kYWwsIHNldEljb24sIGdldEljb25JZHMsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW50ZXJmYWNlIEljb25PcHRpb24ge1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0bmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG4vLyBHZXQgaWNvbiBsaXN0IGZyb20gT2JzaWRpYW4gQVBJIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBmYWxsYmFjayBsaXN0XHJcbmNvbnN0IGdldEljb25MaXN0ID0gKCk6IHN0cmluZ1tdID0+IHtcclxuXHRpZiAocmVxdWlyZUFwaVZlcnNpb24gJiYgcmVxdWlyZUFwaVZlcnNpb24oJzEuNy4zJykgJiYgZ2V0SWNvbklkcykge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0cmV0dXJuIGdldEljb25JZHMoKTtcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHQvLyBFcnJvciBnZXR0aW5nIGljb24gSURzIC0gZmFsbCBiYWNrIHRvIGJhc2ljIGxpc3RcclxuXHRcdH1cclxuXHR9XHJcblx0Ly8gRmFsbGJhY2sgdG8gYSBiYXNpYyBsaXN0IGlmIEFQSSBpcyBub3QgYXZhaWxhYmxlXHJcblx0cmV0dXJuIFtcclxuXHRcdCdzZXR0aW5ncy0yJywgJ3NldHRpbmdzJywgJ2hlbHAtY2lyY2xlJywgJ2luZm8nLCAnc3RhcicsICdoZWFydCcsICdib29rbWFyaycsXHJcblx0XHQnaG9tZScsICdzZWFyY2gnLCAnYmVsbCcsICdtYWlsJywgJ3VzZXInLCAndXNlcnMnLCAnZm9sZGVyJywgJ2ZpbGUnLCAnZmlsZS10ZXh0JyxcclxuXHRcdCdpbWFnZScsICd2aWRlbycsICdtdXNpYycsICdjYWxlbmRhcicsICdjbG9jaycsICdlZGl0JywgJ3BlbmNpbCcsICd0cmFzaCcsXHJcblx0XHQnY29weScsICdjdXQnLCAncGFzdGUnLCAnZG93bmxvYWQnLCAndXBsb2FkJywgJ3NhdmUnLCAnc2hhcmUnLCAnbGluaycsXHJcblx0XHQnZXh0ZXJuYWwtbGluaycsICdsb2NrJywgJ3VubG9jaycsICdleWUnLCAnZXllLW9mZicsICdrZXknLCAnc2hpZWxkJyxcclxuXHRcdCdjaGVjaycsICd4JywgJ3BsdXMnLCAnbWludXMnLCAnYXJyb3ctbGVmdCcsICdhcnJvdy1yaWdodCcsICdhcnJvdy11cCcsXHJcblx0XHQnYXJyb3ctZG93bicsICdjaGV2cm9uLWxlZnQnLCAnY2hldnJvbi1yaWdodCcsICdjaGV2cm9uLXVwJywgJ2NoZXZyb24tZG93bicsXHJcblx0XHQnbWVudScsICdtb3JlLWhvcml6b250YWwnLCAnbW9yZS12ZXJ0aWNhbCcsICdncmlkJywgJ2xpc3QnLCAnbGF5b3V0JyxcclxuXHRcdCdjb2x1bW5zJywgJ3Jvd3MnLCAnbWF4aW1pemUnLCAnbWluaW1pemUnLCAnem9vbS1pbicsICd6b29tLW91dCcsXHJcblx0XHQncmVmcmVzaC1jdycsICdwbGF5JywgJ3BhdXNlJywgJ3N0b3AnLCAnc3VuJywgJ21vb24nLCAnY2xvdWQnLCAnemFwJyxcclxuXHRcdCd3YW5kLTInLCAnd2FuZCcsICd3YW5kLXNwYXJrbGVzJywgJ3BhbGV0dGUnLCAnYnJ1c2gnLCAnc2xpZGVycycsXHJcblx0XHQncG93ZXInLCAnd2lmaScsICdibHVldG9vdGgnLCAnbW9uaXRvcicsICdsYXB0b3AnLCAnc21hcnRwaG9uZScsXHJcblx0XHQnY2FtZXJhJywgJ21pYycsICdoZWFkcGhvbmVzJywgJ2NvZGUnLCAndGVybWluYWwnLCAndGVybWluYWwtc3F1YXJlJyxcclxuXHRcdCdnaXRodWInLCAnZ2l0bGFiJywgJ2dpdC1icmFuY2gnLCAnZ2l0LWNvbW1pdCcsICdkYXRhYmFzZScsICdzZXJ2ZXInLFxyXG5cdFx0J2Nsb3VkLWRvd25sb2FkJywgJ2Nsb3VkLXVwbG9hZCcsICd0YWcnLCAndGFncycsICdmbGFnJywgJ3BpbicsXHJcblx0XHQnbWFwLXBpbicsICdjb21wYXNzJywgJ2dsb2JlJywgJ3JvY2tldCcsICdjYXInLCAnYmlrZScsICdyb2JvdCcsXHJcblx0XHQnYXBwbGUnLCAnd2luZG93cycsICdsaW51eCcsICdjaHJvbWUnLCAnZmlyZWZveCcsICdzYWZhcmknLFxyXG5cdFx0J2NyZWRpdC1jYXJkJywgJ3dhbGxldCcsICdjb2lucycsICdib29rJywgJ2Jvb2stb3BlbicsICdhd2FyZCcsXHJcblx0XHQndHJvcGh5JywgJ2JhZGdlJywgJ3dyZW5jaCcsICd0b29sJywgJ3BhY2thZ2UnLCAnYm94JywgJ2FyY2hpdmUnLFxyXG5cdFx0J3NlbmQnLCAncmVwbHknLCAnZm9yd2FyZCcsICdtYWlsLW9wZW4nLCAndGFnLXBsdXMnLCAndGFnLW1pbnVzJyxcclxuXHRcdCdmbGFnLW9mZicsICdwaW4tb2ZmJywgJ21hcC1waW4tb2ZmJywgJ25hdmlnYXRpb24nLCAnbWFwJywgJ2VhcnRoJyxcclxuXHRcdCdwbGFuZScsICdzaGlwJywgJ2FuY2hvcicsICdoZWxpY29wdGVyJywgJ2Ryb25lJywgJ2FuZHJvaWQnLFxyXG5cdFx0J2tleWhvbGUnLCAna2V5cycsICdmaW5nZXJwcmludCcsICdzY2FuJywgJ3FyLWNvZGUnLCAnYmFyY29kZScsXHJcblx0XHQncmVjZWlwdCcsICdwaWdneS1iYW5rJywgJ2Jhbmtub3RlJ1xyXG5cdF07XHJcbn07XHJcblxyXG4vLyBDb252ZXJ0IGljb24gSURzIHRvIEljb25PcHRpb24gZm9ybWF0XHJcbmNvbnN0IExVQ0lERV9JQ09OUzogSWNvbk9wdGlvbltdID0gZ2V0SWNvbkxpc3QoKS5tYXAoaWQgPT4gKHtcclxuXHRpZDogaWQsXHJcblx0bmFtZTogaWRcclxuXHRcdC5yZXBsYWNlKC9ebHVjaWRlLS8sICcnKSAvLyBSZW1vdmUgbHVjaWRlLSBwcmVmaXggZm9yIGRpc3BsYXlcclxuXHRcdC5yZXBsYWNlKC8tL2csICcgJylcclxuXHRcdC5yZXBsYWNlKC8oXlxcd3sxfSl8KFxccytcXHd7MX0pL2csIChsZXR0ZXIpID0+IGxldHRlci50b1VwcGVyQ2FzZSgpKVxyXG59KSkuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7XHJcblxyXG5leHBvcnQgY2xhc3MgSWNvblBpY2tlck1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8SWNvbk9wdGlvbj4ge1xyXG5cdHByaXZhdGUgb25TZWxlY3Q6IChpY29uSWQ6IHN0cmluZykgPT4gdm9pZDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU2VsZWN0OiAoaWNvbklkOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLm9uU2VsZWN0ID0gb25TZWxlY3Q7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtcygpOiBJY29uT3B0aW9uW10ge1xyXG5cdFx0cmV0dXJuIExVQ0lERV9JQ09OUztcclxuXHR9XHJcblxyXG5cdGdldEl0ZW1UZXh0KGl0ZW06IEljb25PcHRpb24pOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIGl0ZW0ubmFtZTtcclxuXHR9XHJcblxyXG5cdG9uQ2hvb3NlSXRlbShpdGVtOiBJY29uT3B0aW9uLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLm9uU2VsZWN0KGl0ZW0uaWQpO1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxuXHJcblx0Ly8gT3ZlcnJpZGUgdG8gc2hvdyBpY29uIHByZXZpZXdcclxuXHRyZW5kZXJTdWdnZXN0aW9uKG1hdGNoOiB7IGl0ZW06IEljb25PcHRpb24gfSwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBpdGVtID0gbWF0Y2guaXRlbTtcclxuXHRcdGVsLmFkZENsYXNzKCdtb2QtY29tcGxleCcpO1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGVsLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24tY29udGVudCcgfSk7XHJcblx0XHRjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24tdGl0bGUnLCB0ZXh0OiBpdGVtLm5hbWUgfSk7XHJcblx0XHRcclxuXHRcdC8vIENyZWF0ZSBpY29uIHByZXZpZXcgdXNpbmcgT2JzaWRpYW4ncyBzZXRJY29uIC0gbm8gYmFja2dyb3VuZCBib3hcclxuXHRcdGNvbnN0IGF1eCA9IGVsLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24tYXV4JyB9KTtcclxuXHRcdGNvbnN0IGljb25TcGFuID0gYXV4LmNyZWF0ZVNwYW4oeyBjbHM6ICdzdWdnZXN0aW9uLWZsYWlyIHVpLXR3ZWFrZXItaWNvbi1uby1iZycgfSk7XHJcblx0XHRzZXRJY29uKGljb25TcGFuLCBpdGVtLmlkKTtcclxuXHR9XHJcbn1cclxuXHJcbiIsICIvKipcclxuICogSGlkZXIgVGFiIC0gQXV0by1oaWRlIGFuZCB2aXNpYmlsaXR5IHNldHRpbmdzIChleGNsdWRpbmcgbW9iaWxlIGFuZCBleHBsb3JlciBidXR0b25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFRhYlJlbmRlcmVyIH0gZnJvbSAnLi4vY29tbW9uL1RhYlJlbmRlcmVyJztcclxuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCwgU2V0dGluZ3NDb250YWluZXIgfSBmcm9tICcuLi8uLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xyXG5pbXBvcnQgeyBDb21tYW5kUGlja2VyTW9kYWwgfSBmcm9tICcuLi8uLi9tb2RhbHMvQ29tbWFuZFBpY2tlck1vZGFsJztcclxuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IFVJU2V0dGluZ3MgfSBmcm9tICcuLi8uLi9zZXR0aW5ncyc7XHJcbmltcG9ydCB7IFVJVmlzaWJpbGl0eVN0YXRlIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEhpZGVyVGFiIGV4dGVuZHMgVGFiUmVuZGVyZXIge1xyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRcdC8vIEF1dG8taGlkZSBlbGVtZW50c1xyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Y29uc3QgZ2VuZXJhbEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHRnZW5lcmFsR3JvdXAsXHJcblx0XHRcdCdUaXRsZSBiYXInLFxyXG5cdFx0XHQnSGlkZSB0aXRsZSBiYXIgdW50aWwgaG92ZXIuIFR1cm4gb2ZmIHRvIGFsd2F5cyBzaG93LicsXHJcblx0XHRcdCd0aXRsZUJhcidcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0Z2VuZXJhbEdyb3VwLFxyXG5cdFx0XHQnRmlsZSBleHBsb3JlciBuYXYgaGVhZGVyJyxcclxuXHRcdFx0J0hpZGUgZmlsZSBleHBsb3JlciBuYXZpZ2F0aW9uIGhlYWRlciB1bnRpbCBob3Zlci4gRWxlZ2FudGx5IHJldmVhbHMgb24gaG92ZXIuJyxcclxuXHRcdFx0J2ZpbGVFeHBsb3Jlck5hdkhlYWRlcidcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0Z2VuZXJhbEdyb3VwLFxyXG5cdFx0XHQnT3RoZXIgbmF2IGhlYWRlcnMnLFxyXG5cdFx0XHQnSGlkZSBuYXZpZ2F0aW9uIGhlYWRlcnMgZm9yIHRhZywgYmFja2xpbmtzLCBvdXRnb2luZyBsaW5rcywgb3V0bGluZSwgYW5kIGJvb2ttYXJrcyBwYW5lcyB1bnRpbCBob3Zlci4nLFxyXG5cdFx0XHQnb3RoZXJOYXZIZWFkZXJzJ1xyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHRnZW5lcmFsR3JvdXAsXHJcblx0XHRcdCdMZWZ0IHRhYiBoZWFkZXJzJyxcclxuXHRcdFx0J0hpZGUgbGVmdCBwYW5lbCB0YWIgaGVhZGVycyB1bnRpbCBob3Zlci4gRWxlZ2FudGx5IHJldmVhbHMgb24gaG92ZXIuJyxcclxuXHRcdFx0J2xlZnRUYWJIZWFkZXJzJ1xyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHRnZW5lcmFsR3JvdXAsXHJcblx0XHRcdCdSaWdodCB0YWIgaGVhZGVycycsXHJcblx0XHRcdCdIaWRlIHJpZ2h0IHBhbmVsIHRhYiBoZWFkZXJzIHVudGlsIGhvdmVyLiBFbGVnYW50bHkgcmV2ZWFscyBvbiBob3Zlci4nLFxyXG5cdFx0XHQncmlnaHRUYWJIZWFkZXJzJ1xyXG5cdFx0KTtcclxuXHJcblx0XHQvLyBSaWJib24gLSBib29sZWFuIHRvZ2dsZVxyXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdDb2xsYXBzZSByaWJib24nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdDb2xsYXBzZSB0aGUgbGVmdCByaWJib24gdG8gYSB0aGluIHN0cmlwIHVudGlsIGhvdmVyLiBFbGVnYW50bHkgZXhwYW5kcyBvbiBob3Zlci4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLmdldFNldHRpbmdzKCkucmliYm9uUmV2ZWFsT25Ib3Zlcikub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZ2V0U2V0dGluZ3MoKS5yaWJib25SZXZlYWxPbkhvdmVyID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRcdC8vIE5hdmlnYXRpb25cclxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRcdGNvbnN0IG5hdmlnYXRpb25Hcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCAnTmF2aWdhdGlvbicsICd1aS10d2Vha2VyJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG5hdmlnYXRpb25Hcm91cCwgJ0hpZGUgdGFiIGJhcicsICdIaWRlcyB0aGUgdGFiIGNvbnRhaW5lciBhdCB0aGUgdG9wIG9mIHRoZSB3aW5kb3cuJywgJ3RhYkJhcicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhuYXZpZ2F0aW9uR3JvdXAsICdNYWtlIHRvcCBvZiB3aW5kb3cgZHJhZ2dhYmxlIHdpdGhvdXQgdGFiIGJhcicsICdFbmFibGVzIHdpbmRvdyBkcmFnZ2luZyBmcm9tIHRoZSB0b3Agb2YgdGhlIHdpbmRvdyB3aGVuIHRoZSB0YWIgYmFyIGlzIGhpZGRlbi4gT25seSB3b3JrcyB3aGVuIFwiSGlkZSB0YWIgYmFyXCIgaXMgZW5hYmxlZC4nLCAnZW5hYmxlV2luZG93RHJhZ2dpbmcnKTtcclxuXHRcdFxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG5hdmlnYXRpb25Hcm91cCwgJ0hpZGUgdGFiIGhlYWRlciB3aGVuIG9ubHkgb25lIHRhYicsICdIaWRlIHRoZSB0YWIgYmFyIGF1dG9tYXRpY2FsbHkgd2hlbiBvbmx5IDEgdGFiIGlzIG9wZW4uJywgJ3RhYkJhckhpZGVXaGVuU2luZ2xlJyk7XHJcblxyXG5cdFx0Ly8gVmlldyBoZWFkZXIgYnV0dG9uc1xyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG5hdmlnYXRpb25Hcm91cCwgJ0hpZGUgXCJSZWFkaW5nIG1vZGVcIiBidXR0b24nLCAnSGlkZSBcIlJlYWRpbmcgbW9kZVwiIGJ1dHRvbiBpbiB2aWV3IGhlYWRlcnMuJywgJ3JlYWRpbmdNb2RlQnV0dG9uJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG5hdmlnYXRpb25Hcm91cCwgJ0hpZGUgXCJCb29rbWFya2VkXCIgYnV0dG9uJywgJ0hpZGUgXCJCb29rbWFya2VkXCIgYnV0dG9uIGluIHZpZXcgaGVhZGVycy4nLCAnYm9va21hcmtlZEJ1dHRvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhuYXZpZ2F0aW9uR3JvdXAsICdIaWRlIFwiU2VhcmNoIHNldHRpbmdzXCIgYnV0dG9uJywgJ0hpZGUgXCJTZWFyY2ggc2V0dGluZ3NcIiBidXR0b24gaW4gc2VhcmNoIHBhbmUuJywgJ3NlYXJjaFNldHRpbmdzQnV0dG9uJyk7XHJcblxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Ly8gVmF1bHQgcHJvZmlsZSBhcmVhXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHRjb25zdCB2YXVsdFByb2ZpbGVHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCAnVmF1bHQgcHJvZmlsZSBhcmVhJywgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHR2YXVsdFByb2ZpbGVHcm91cCxcclxuXHRcdFx0J1ZhdWx0IHN3aXRjaGVyJyxcclxuXHRcdFx0J0hpZGUgdmF1bHQgc3dpdGNoZXIgdW50aWwgaG92ZXIuIERvZXMgbm90IHdvcmsgd2hlbiB2YXVsdCBuYW1lIGlzIGhpZGRlbi4nLFxyXG5cdFx0XHQndmF1bHRTd2l0Y2hlcidcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0dmF1bHRQcm9maWxlR3JvdXAsXHJcblx0XHRcdCdIZWxwIGJ1dHRvbicsXHJcblx0XHRcdCdIaWRlIGhlbHAgYnV0dG9uIHVudGlsIGhvdmVyLiBFbGVnYW50bHkgcmV2ZWFscyBvbiBob3Zlci4nLFxyXG5cdFx0XHQnaGVscEJ1dHRvbidcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gUmVwbGFjZSBoZWxwIGJ1dHRvbiB3aXRoIGN1c3RvbSBhY3Rpb25cclxuXHRcdHRoaXMucmVuZGVySGVscEJ1dHRvblJlcGxhY2VtZW50KGNvbnRhaW5lciwgdmF1bHRQcm9maWxlR3JvdXApO1xyXG5cclxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXHJcblx0XHRcdHZhdWx0UHJvZmlsZUdyb3VwLFxyXG5cdFx0XHQnU2V0dGluZ3MgYnV0dG9uJyxcclxuXHRcdFx0J0hpZGUgc2V0dGluZ3MgYnV0dG9uIHVudGlsIGhvdmVyLiBFbGVnYW50bHkgcmV2ZWFscyBvbiBob3Zlci4nLFxyXG5cdFx0XHQnc2V0dGluZ3NCdXR0b24nXHJcblx0XHQpO1xyXG5cclxuXHRcdHZhdWx0UHJvZmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdWYXVsdCBzd2l0Y2hlciBiYWNrZ3JvdW5kIHRyYW5zcGFyZW5jeScpXHJcblx0XHRcdFx0LnNldERlc2MoJ0FkanVzdCB0aGUgdHJhbnNwYXJlbmN5IG9mIHRoZSB2YXVsdCBzd2l0Y2hlciBiYWNrZ3JvdW5kIHdoZW4gaGlkZGVuLiBSYW5nZTogMCAoZnVsbHkgdHJhbnNwYXJlbnQpIHRvIDEgKGZ1bGx5IG9wYXF1ZSkuJylcclxuXHRcdFx0XHQuYWRkU2xpZGVyKChzbGlkZXIpID0+XHJcblx0XHRcdFx0XHRzbGlkZXJcclxuXHRcdFx0XHRcdFx0LnNldExpbWl0cygwLCAxLCAwLjAxKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5nZXRTZXR0aW5ncygpLnZhdWx0U3dpdGNoZXJCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5KVxyXG5cdFx0XHRcdFx0XHQuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5nZXRTZXR0aW5ncygpLnZhdWx0U3dpdGNoZXJCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHQvLyBUYWIgaWNvbnNcclxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRcdGNvbnN0IHRhYkljb25zR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ1RhYiBpY29ucycsICd1aS10d2Vha2VyJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0dGFiSWNvbnNHcm91cCxcclxuXHRcdFx0J0hpZGUgdGFiIGxpc3QgaWNvbicsXHJcblx0XHRcdCdIaWRlcyB0aGUgdGFiIGxpc3QgaWNvbi4gWW91IGNhbiBzdGlsbCBhY2Nlc3MgdGFicyB2aWEgb3RoZXIgbWV0aG9kcy4nLFxyXG5cdFx0XHQndGFiTGlzdEljb24nXHJcblx0XHQpO1xyXG5cclxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXHJcblx0XHRcdHRhYkljb25zR3JvdXAsXHJcblx0XHRcdCdIaWRlIG5ldyB0YWIgaWNvbicsXHJcblx0XHRcdCdIaWRlcyB0aGUgbmV3IHRhYiBpY29uLiBZb3UgY2FuIHN0aWxsIGNyZWF0ZSBuZXcgdGFicyB3aXRoIEN0cmwrVCAoQ21kK1Qgb24gTWFjKS4nLFxyXG5cdFx0XHQnbmV3VGFiSWNvbidcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0dGFiSWNvbnNHcm91cCxcclxuXHRcdFx0J0hpZGUgdGFiIGNsb3NlIGJ1dHRvbicsXHJcblx0XHRcdCdIaWRlcyB0aGUgY2xvc2UgYnV0dG9uIG9uIHRhYnMuIFlvdSBjYW4gc3RpbGwgY2xvc2UgdGFicyB3aXRoIG1pZGRsZSBjbGljayBvciBvdGhlciBtZXRob2RzLicsXHJcblx0XHRcdCd0YWJDbG9zZUJ1dHRvbidcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Ly8gU3RhdHVzICYgVUkgZWxlbWVudHNcclxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRcdGNvbnN0IHN0YXR1c1VJR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ1N0YXR1cyAmIFVJIGVsZW1lbnRzJywgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcoc3RhdHVzVUlHcm91cCwgJ0hpZGUgc3RhdHVzIGJhcicsICdIaWRlcyB3b3JkIGNvdW50LCBjaGFyYWN0ZXIgY291bnQgYW5kIGJhY2tsaW5rIGNvdW50LicsICdzdGF0dXNCYXInKTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHRzdGF0dXNVSUdyb3VwLFxyXG5cdFx0XHQnU2Nyb2xsIGJhcnMnLFxyXG5cdFx0XHQnQ29udHJvbCBzY3JvbGxiYXIgdmlzaWJpbGl0eS4gUmV2ZWFsIG9wdGlvbiBoaWRlcyBzY3JvbGxiYXJzIHVudGlsIGhvdmVyLicsXHJcblx0XHRcdCdzY3JvbGxCYXJzJ1xyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHRzdGF0dXNVSUdyb3VwLFxyXG5cdFx0XHQnSGlkZSBsZWZ0IHNpZGViYXIgdG9nZ2xlIGJ1dHRvbicsXHJcblx0XHRcdCdIaWRlcyB0aGUgbGVmdCBzaWRlYmFyIHRvZ2dsZSBidXR0b24uJyxcclxuXHRcdFx0J2xlZnRTaWRlYmFyVG9nZ2xlQnV0dG9uJ1xyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHRzdGF0dXNVSUdyb3VwLFxyXG5cdFx0XHQnSGlkZSByaWdodCBzaWRlYmFyIHRvZ2dsZSBidXR0b24nLFxyXG5cdFx0XHQnSGlkZXMgdGhlIHJpZ2h0IHNpZGViYXIgdG9nZ2xlIGJ1dHRvbi4nLFxyXG5cdFx0XHQncmlnaHRTaWRlYmFyVG9nZ2xlQnV0dG9uJ1xyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcoc3RhdHVzVUlHcm91cCwgJ0hpZGUgdG9vbHRpcHMnLCAnSGlkZXMgYWxsIHRvb2x0aXBzLicsICd0b29sdGlwcycpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhzdGF0dXNVSUdyb3VwLCAnSGlkZSBpbnN0cnVjdGlvbnMnLCAnSGlkZXMgaW5zdHJ1Y3Rpb25hbCB0aXBzIGluIG1vZGFscy4nLCAnaW5zdHJ1Y3Rpb25zJyk7XHJcblxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Ly8gU2VhcmNoXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHRjb25zdCBzZWFyY2hHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCAnU2VhcmNoJywgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcoc2VhcmNoR3JvdXAsICdIaWRlIHNlYXJjaCBzdWdnZXN0aW9ucycsICdIaWRlcyBzdWdnZXN0aW9ucyBpbiBzZWFyY2ggcGFuZS4nLCAnc2VhcmNoU3VnZ2VzdGlvbnMnKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcoc2VhcmNoR3JvdXAsICdIaWRlIGNvdW50IG9mIHNlYXJjaCB0ZXJtIG1hdGNoZXMnLCAnSGlkZXMgdGhlIG51bWJlciBvZiBtYXRjaGVzIHdpdGhpbiBlYWNoIHNlYXJjaCByZXN1bHQuJywgJ3NlYXJjaFRlcm1Db3VudHMnKTtcclxuXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHQvLyBQcm9wZXJ0aWVzXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHRjb25zdCBwcm9wZXJ0aWVzR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ1Byb3BlcnRpZXMnLCAndWktdHdlYWtlcicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhwcm9wZXJ0aWVzR3JvdXAsICdIaWRlIHByb3BlcnRpZXMgaW4gUmVhZGluZyB2aWV3JywgJ0hpZGVzIHRoZSBwcm9wZXJ0aWVzIHNlY3Rpb24gaW4gUmVhZGluZyB2aWV3LicsICdwcm9wZXJ0aWVzSW5SZWFkaW5nVmlldycpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhwcm9wZXJ0aWVzR3JvdXAsICdEZWVtcGhhc2l6ZSBwcm9wZXJ0aWVzJywgJ1NvZnRlbnMgdmlzdWFsIHByb21pbmVuY2Ugb2YgZmlsZSBwcm9wZXJ0aWVzLiBUaGV5IGJlY29tZSBtb3JlIHZpc2libGUgb24gaG92ZXIuJywgJ2RlZW1waGFzaXplUHJvcGVydGllcycpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhwcm9wZXJ0aWVzR3JvdXAsICdIaWRlIHByb3BlcnRpZXMgaGVhZGluZycsICdIaWRlIFwiUHJvcGVydGllc1wiIGhlYWRpbmcgYWJvdmUgcHJvcGVydGllcy4nLCAncHJvcGVydGllc0luSGVhZGluZycpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhwcm9wZXJ0aWVzR3JvdXAsICdIaWRlIFwiQWRkIHByb3BlcnR5XCIgYnV0dG9uJywgJ0hpZGUgXCJBZGQgcHJvcGVydHlcIiBidXR0b24gYmVsb3cgcHJvcGVydGllcy4nLCAnYWRkUHJvcGVydHlCdXR0b24nKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkVmlzaWJpbGl0eVNldHRpbmcoZ3JvdXA6IFNldHRpbmdzQ29udGFpbmVyLCBuYW1lOiBzdHJpbmcsIGRlc2M6IHN0cmluZywga2V5OiBrZXlvZiBVSVNldHRpbmdzKSB7XHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZShuYW1lKVxyXG5cdFx0XHRcdC5zZXREZXNjKGRlc2MpXHJcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5nZXRTZXR0aW5ncygpW2tleV07XHJcblx0XHRcdFx0XHRjb25zdCBzdHJpbmdWYWx1ZSA9IHR5cGVvZiBjdXJyZW50VmFsdWUgPT09ICdzdHJpbmcnID8gY3VycmVudFZhbHVlIDogJ3Nob3cnO1xyXG5cdFx0XHRcdFx0ZHJvcGRvd25cclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbignc2hvdycsICdTaG93JylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbignaGlkZScsICdIaWRlJylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbigncmV2ZWFsJywgJ1JldmVhbCcpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzdHJpbmdWYWx1ZSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdCh0aGlzLmdldFNldHRpbmdzKClba2V5XSBhcyBVSVZpc2liaWxpdHlTdGF0ZSkgPSB2YWx1ZSBhcyBVSVZpc2liaWxpdHlTdGF0ZTtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZFRvZ2dsZVNldHRpbmcoZ3JvdXA6IFNldHRpbmdzQ29udGFpbmVyLCBuYW1lOiBzdHJpbmcsIGRlc2M6IHN0cmluZywga2V5OiBrZXlvZiBVSVNldHRpbmdzKSB7XHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZShuYW1lKVxyXG5cdFx0XHRcdC5zZXREZXNjKGRlc2MpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKEJvb2xlYW4odGhpcy5nZXRTZXR0aW5ncygpW2tleV0pKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0KHRoaXMuZ2V0U2V0dGluZ3MoKVtrZXldIGFzIGJvb2xlYW4pID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJIZWxwQnV0dG9uUmVwbGFjZW1lbnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZ3JvdXA6IFNldHRpbmdzQ29udGFpbmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcclxuXHRcdGlmICghc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50KSB7XHJcblx0XHRcdHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCA9IHtcclxuXHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcclxuXHRcdFx0XHRjb21tYW5kSWQ6ICcnLFxyXG5cdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1JlcGxhY2UgaGVscCBidXR0b24gd2l0aCBjdXN0b20gYWN0aW9uJylcclxuXHRcdFx0XHQuc2V0RGVzYygnUmVwbGFjZSB0aGUgaGVscCBidXR0b24gd2l0aCBhIGN1c3RvbSBpY29uIGFuZCBjb21tYW5kLiBUaGlzIHdpbGwgaGlkZSB0aGUgb3JpZ2luYWwgaGVscCBidXR0b24gYW5kIHNob3cgeW91ciBjdXN0b20gYnV0dG9uIGluc3RlYWQuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUoc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50LmVuYWJsZWQpLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCkge1xyXG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCA9IHtcclxuXHRcdFx0XHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXHJcblx0XHRcdFx0XHRcdFx0XHRjb21tYW5kSWQ6ICd1aS10d2Vha2VyOm9wZW4tc2V0dGluZ3MnLFxyXG5cdFx0XHRcdFx0XHRcdFx0aWNvbklkOiAnd3JlbmNoJyxcclxuXHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudC5lbmFibGVkID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBSZWZyZXNoIHRoZSBjdXJyZW50IHRhYiBjb250ZW50IHdoaWxlIHByZXNlcnZpbmcgc2Nyb2xsXHJcblx0XHRcdFx0XHRcdFx0Ly8gRGVmZXIgdGhlIHJlbmRlciB0byBwcmV2ZW50IHRoZSBVSSBmcm9tIGdldHRpbmcgXCJzdHVja1wiXHJcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBjb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyXHJcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU2hvdyBjb21tYW5kIGFuZCBpY29uIHBpY2tlcnMgb25seSBpZiByZXBsYWNlbWVudCBpcyBlbmFibGVkXHJcblx0XHRpZiAoc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50LmVuYWJsZWQpIHtcclxuXHRcdFx0Y29uc3QgZ2V0Q29tbWFuZE5hbWUgPSAoY29tbWFuZElkOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG5cdFx0XHRcdGlmICghY29tbWFuZElkKSByZXR1cm4gJ1NlbGVjdCBjb21tYW5kLi4uJztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Y29uc3QgY29tbWFuZFJlZ2lzdHJ5ID0gKHRoaXMuYXBwIGFzIHsgY29tbWFuZHM/OiB7IGxpc3RDb21tYW5kcz86ICgpID0+IEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+IH0gfSkuY29tbWFuZHM7XHJcblx0XHRcdFx0XHRpZiAoY29tbWFuZFJlZ2lzdHJ5ICYmIHR5cGVvZiBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGNvbW1hbmRzID0gY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcygpO1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjb21tYW5kID0gY29tbWFuZHMuZmluZCgoY21kKSA9PiBjbWQgJiYgY21kLmlkID09PSBjb21tYW5kSWQpO1xyXG5cdFx0XHRcdFx0XHRpZiAoY29tbWFuZD8ubmFtZSkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBjb21tYW5kLm5hbWU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdC8vIEVycm9yIGdldHRpbmcgY29tbWFuZCBuYW1lXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAnU2VsZWN0IGNvbW1hbmQuLi4nO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Y29uc3QgY29tbWFuZE5hbWUgPSBnZXRDb21tYW5kTmFtZShzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkKTtcclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdDb21tYW5kJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGNvbW1hbmQgdG8gZXhlY3V0ZSB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZCcpXHJcblx0XHRcdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGNvbW1hbmROYW1lIHx8ICdTZWxlY3QgY29tbWFuZC4uLicpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IENvbW1hbmRQaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGNvbW1hbmRJZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50ID0ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZElkOiAndWktdHdlYWtlcjpvcGVuLXNldHRpbmdzJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50LmNvbW1hbmRJZCA9IGNvbW1hbmRJZDtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlZnJlc2ggdGhlIGN1cnJlbnQgdGFiIGNvbnRlbnQgd2hpbGUgcHJlc2VydmluZyBzY3JvbGxcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gY29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCA1MCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Y29uc3QgZ2V0SWNvbk5hbWUgPSAoaWNvbklkOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG5cdFx0XHRcdGlmICghaWNvbklkKSByZXR1cm4gJyc7XHJcblx0XHRcdFx0cmV0dXJuIGljb25JZFxyXG5cdFx0XHRcdFx0LnJlcGxhY2UoL15sdWNpZGUtLywgJycpXHJcblx0XHRcdFx0XHQuc3BsaXQoJy0nKVxyXG5cdFx0XHRcdFx0Lm1hcCgod29yZCkgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkpXHJcblx0XHRcdFx0XHQuam9pbignICcpO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Y29uc3QgaWNvbk5hbWUgPSBnZXRJY29uTmFtZShzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkKTtcclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdJY29uJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGljb24gdG8gZGlzcGxheSBvbiB0aGUgYnV0dG9uJylcclxuXHRcdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoaWNvbk5hbWUgfHwgJ1NlbGVjdCBpY29uLi4uJykub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQgPSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZW5hYmxlZDogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb21tYW5kSWQ6ICd1aS10d2Vha2VyOm9wZW4tc2V0dGluZ3MnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXHJcblx0XHRcdFx0XHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVmcmVzaCB0aGUgY3VycmVudCB0YWIgY29udGVudCB3aGlsZSBwcmVzZXJ2aW5nIHNjcm9sbFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBjb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0sIDUwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogVGFiIEJhciBUYWIgLSBDdXN0b20gY29tbWFuZCBidXR0b25zIGZvciBwYWdlIGhlYWRlcnNcclxuICovXHJcblxyXG5pbXBvcnQgeyBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBUYWJSZW5kZXJlciB9IGZyb20gJy4uL2NvbW1vbi9UYWJSZW5kZXJlcic7XHJcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAgfSBmcm9tICcuLi8uLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xyXG5pbXBvcnQgeyBDb21tYW5kSWNvblBhaXIgfSBmcm9tICcuLi8uLi90eXBlcyc7XHJcbmltcG9ydCB7IGNob29zZU5ld0NvbW1hbmQgfSBmcm9tICcuLi8uLi91dGlscy9jaG9vc2VDb21tYW5kJztcclxuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vLi4vdXRpbHMvY3NzVXRpbHMnO1xyXG5cclxuLy8gU2ltcGxlIGFycmF5IG1vdmUgdXRpbGl0eVxyXG5mdW5jdGlvbiBhcnJheU1vdmVNdXRhYmxlPFQ+KGFycmF5OiBUW10sIGZyb206IG51bWJlciwgdG86IG51bWJlcik6IHZvaWQge1xyXG5cdGNvbnN0IGl0ZW0gPSBhcnJheVtmcm9tXTtcclxuXHRhcnJheS5zcGxpY2UoZnJvbSwgMSk7XHJcblx0YXJyYXkuc3BsaWNlKHRvLCAwLCBpdGVtKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRhYkJhclRhYiBleHRlbmRzIFRhYlJlbmRlcmVyIHtcclxuXHRwcml2YXRlIGV4cGFuZGVkU3RhdGVzID0gbmV3IE1hcDxzdHJpbmcsIGJvb2xlYW4+KCk7XHJcblxyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xyXG5cclxuXHRcdC8vIEVuc3VyZSB0YWJCYXJDb21tYW5kcyBleGlzdHNcclxuXHRcdGlmICghc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMpIHtcclxuXHRcdFx0c2V0dGluZ3MudGFiQmFyQ29tbWFuZHMgPSBbXTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBMaXN0IG9mIGNvbW1hbmRzIHVzaW5nIFNldHRpbmcgY29tcG9uZW50cyAobGlrZSBIaWRlclRhYilcclxuXHRcdHNldHRpbmdzLnRhYkJhckNvbW1hbmRzLmZvckVhY2goKHBhaXIsIGluZGV4KSA9PiB7XHJcblx0XHRcdHRoaXMucmVuZGVyQ29tbWFuZEl0ZW0oY29udGFpbmVyLCBwYWlyLCBpbmRleCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgY29tbWFuZCBidXR0b24gKGF0IHRoZSBlbmQpXHJcblx0XHRpZiAoc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyBBZGQgc2VwYXJhdG9yXHJcblx0XHRcdGNvbnRhaW5lci5jcmVhdGVFbCgnaHInKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBhZGRHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCB1bmRlZmluZWQsICd1aS10d2Vha2VyJyk7XHJcblx0XHRhZGRHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQWRkIGNvbW1hbmQnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdBZGQgYSBuZXcgY29tbWFuZCBidXR0b24gdG8gdGhlIHRhYiBiYXInKVxyXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gQWRkIGljb24gdG8gdGhlIGJ1dHRvblxyXG5cdFx0XHRcdFx0Y29uc3QgYnV0dG9uRWwgPSBidXR0b24uYnV0dG9uRWw7XHJcblx0XHRcdFx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gYnV0dG9uRWwuY3JlYXRlU3Bhbih7IGNsczogJ3VpLXR3ZWFrZXItYWRkLWljb24nIH0pO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihpY29uQ29udGFpbmVyLCAnbHVjaWRlLWltYWdlLXBsdXMnKTtcclxuXHRcdFx0XHRcdGJ1dHRvbkVsLmluc2VydEJlZm9yZShpY29uQ29udGFpbmVyLCBidXR0b25FbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdBZGQgY29tbWFuZCcpLnNldEN0YSgpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhaXIgPSBhd2FpdCBjaG9vc2VOZXdDb21tYW5kKHRoaXMucGx1Z2luKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIGFkZENvbW1hbmQgd2lsbCBwdXNoIHRvIHNldHRpbmdzLnRhYkJhckNvbW1hbmRzIGFuZCBzYXZlXHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5hZGRDb21tYW5kKHBhaXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFVzZXIgY2FuY2VsbGVkXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyQ29tbWFuZEl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGFpcjogQ29tbWFuZEljb25QYWlyLCBpbmRleDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcclxuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHQvLyBTdG9yZSByZWZlcmVuY2UgdG8gb3RoZXIgc2V0dGluZ3MgZm9yIGNvbGxhcHNpYmxlIGZ1bmN0aW9uYWxpdHlcclxuXHRcdGNvbnN0IG90aGVyU2V0dGluZ3M6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuXHJcblx0XHQvLyBDb21tYW5kIG5hbWUgd2l0aCBlZGl0YWJsZSBuYW1lIChsaWtlIFZhdWx0IENNUykgYW5kIGljb24gcHJldmlldyB3aXRoIGNvbG9yXHJcblx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IHBhaXIuZGlzcGxheU5hbWUgfHwgcGFpci5uYW1lO1xyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHQvLyBDb21wbGV0ZWx5IHByZXZlbnQgY29sbGFwc2Ugb24gc2V0dGluZyBlbGVtZW50IC0gT05MWSBjaGV2cm9uIGNhbiB0b2dnbGVcclxuXHRcdFx0Ly8gVXNlIGNhcHR1cmUgcGhhc2UgdG8gaW50ZXJjZXB0IEFMTCBjbGlja3MgYmVmb3JlIHRoZXkgcmVhY2ggT2JzaWRpYW4ncyBoYW5kbGVyc1xyXG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0Ly8gQWxsb3cgY29sbGFwc2UgaWYgY2xpY2tpbmcgb24gY2hldnJvbiBpY29uIE9SIG9uIGV4dHJhIGJ1dHRvbnMgKGRlbGV0ZSwgbW92ZSB1cC9kb3duLCBldGMuKVxyXG5cdFx0XHRcdC8vIE9SIG9uIG5hbWUgZGlzcGxheS9wZW5jaWwgaWNvbiBmb3IgcmVuYW1pbmdcclxuXHRcdFx0XHRjb25zdCBpc0NoZXZyb25DbGljayA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1jb2xsYXBzZS1pY29uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNFeHRyYUJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcuZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLmNsaWNrYWJsZS1pY29uLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNOYW1lRWRpdCA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1uYW1lLWRpc3BsYXknKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdC1pY29uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRpZiAoIWlzQ2hldnJvbkNsaWNrICYmICFpc0V4dHJhQnV0dG9uICYmICFpc05hbWVFZGl0KSB7XHJcblx0XHRcdFx0XHQvLyBCbG9jayBBTEwgb3RoZXIgY2xpY2tzIGZyb20gYWZmZWN0aW5nIGNvbGxhcHNlXHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRydWUpOyAvLyBDYXB0dXJlIHBoYXNlIC0gcnVucyBiZWZvcmUgb3RoZXIgaGFuZGxlcnNcclxuXHJcblx0XHRcdC8vIEFsc28gcHJldmVudCBvbiBidWJibGUgcGhhc2UgYXMgYmFja3VwXHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRjb25zdCBpc0NoZXZyb25DbGljayA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1jb2xsYXBzZS1pY29uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNFeHRyYUJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcuZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLmNsaWNrYWJsZS1pY29uLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNOYW1lRWRpdCA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1uYW1lLWRpc3BsYXknKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdC1pY29uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRpZiAoIWlzQ2hldnJvbkNsaWNrICYmICFpc0V4dHJhQnV0dG9uICYmICFpc05hbWVFZGl0KSB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIGZhbHNlKTsgLy8gQnViYmxlIHBoYXNlIC0gYmFja3VwXHJcblxyXG5cdFx0XHQvLyBNYWtlIG5hbWVFbCBhIGZsZXggY29udGFpbmVyIHNvIGNoZXZyb24gY2FuIGJlIHBvc2l0aW9uZWQgdG8gdGhlIGxlZnRcclxuXHRcdFx0Y29uc3QgbmFtZUVsID0gc2V0dGluZy5uYW1lRWw7XHJcblx0XHRcdHNldENzc1Byb3BzKG5hbWVFbCwgeyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcwLjVyZW0nLCB3aWR0aDogJzEwMCUnIH0pO1xyXG5cclxuXHRcdFx0Ly8gQWRkIGNoZXZyb25zLXVwLWRvd24gaWNvbiB0byB0aGUgTEVGVCBvZiB0aGUgbmFtZSAoYmVmb3JlIG5hbWUgY29udGFpbmVyKVxyXG5cdFx0XHRjb25zdCBjaGV2cm9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdGNoZXZyb25Db250YWluZXIuY2xhc3NOYW1lID0gJ3VpLXR3ZWFrZXItY29sbGFwc2UtaWNvbic7XHJcblx0XHRcdHNldENzc1Byb3BzKGNoZXZyb25Db250YWluZXIsIHtcclxuXHRcdFx0XHRjdXJzb3I6ICdkZWZhdWx0JyxcclxuXHRcdFx0XHRiYWNrZ3JvdW5kOiAndHJhbnNwYXJlbnQnLFxyXG5cdFx0XHRcdHBhZGRpbmc6ICcwJyxcclxuXHRcdFx0XHRtYXJnaW46ICcwJyxcclxuXHRcdFx0XHRkaXNwbGF5OiAnaW5saW5lLWZsZXgnLFxyXG5cdFx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxyXG5cdFx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly8gSW5zZXJ0IGFzIGZpcnN0IGNoaWxkIHRvIGVuc3VyZSBpdCdzIG9uIHRoZSBsZWZ0XHJcblx0XHRcdG5hbWVFbC5pbnNlcnRCZWZvcmUoY2hldnJvbkNvbnRhaW5lciwgbmFtZUVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHQvLyBSZXN0b3JlIGNvbGxhcHNlIHN0YXRlIGZyb20gTWFwLCBkZWZhdWx0IHRvIGZhbHNlIGlmIG5vdCBzZXRcclxuXHRcdFx0bGV0IGlzRXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkU3RhdGVzLmdldChwYWlyLmlkKSA/PyBmYWxzZTtcclxuXHRcdFx0c2V0SWNvbihjaGV2cm9uQ29udGFpbmVyLCBpc0V4cGFuZGVkID8gJ2NoZXZyb25zLWRvd24tdXAnIDogJ2NoZXZyb25zLXVwLWRvd24nKTtcclxuXHJcblx0XHRcdC8vIFRvZ2dsZSBvbiBjaGV2cm9uIGNsaWNrIC0gT05MWSB3YXkgdG8gY2hhbmdlIGNvbGxhcHNlIHN0YXRlXHJcblx0XHRcdGNoZXZyb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0aXNFeHBhbmRlZCA9ICFpc0V4cGFuZGVkO1xyXG5cdFx0XHRcdC8vIFN0b3JlIHN0YXRlIGluIE1hcCBmb3IgcGVyc2lzdGVuY2UgYWNyb3NzIHJlLXJlbmRlcnNcclxuXHRcdFx0XHR0aGlzLmV4cGFuZGVkU3RhdGVzLnNldChwYWlyLmlkLCBpc0V4cGFuZGVkKTtcclxuXHRcdFx0XHQvLyBTd2FwIGljb246IGNoZXZyb25zLXVwLWRvd24gKGNvbGxhcHNlZCkgPC0+IGNoZXZyb25zLWRvd24tdXAgKGV4cGFuZGVkKVxyXG5cdFx0XHRcdHNldEljb24oY2hldnJvbkNvbnRhaW5lciwgaXNFeHBhbmRlZCA/ICdjaGV2cm9ucy1kb3duLXVwJyA6ICdjaGV2cm9ucy11cC1kb3duJyk7XHJcblx0XHRcdFx0b3RoZXJTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmdFbCA9PiB7XHJcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhzZXR0aW5nRWwsIHsgZGlzcGxheTogaXNFeHBhbmRlZCA/ICcnIDogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIENyZWF0ZSBlZGl0YWJsZSBuYW1lIGNvbnRhaW5lciB3aXRoIHBlbmNpbCBpY29uXHJcblx0XHRcdGNvbnN0IG5hbWVDb250YWluZXIgPSBuYW1lRWwuY3JlYXRlRGl2KHsgY2xzOiAndWktdHdlYWtlci1lZGl0YWJsZS1uYW1lJyB9KTtcclxuXHRcdFx0c2V0Q3NzUHJvcHMobmFtZUNvbnRhaW5lciwgeyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcwLjVyZW0nIH0pO1xyXG5cclxuXHRcdFx0Ly8gRnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBkaXNwbGF5IGVsZW1lbnQgd2l0aCBjbGljayBoYW5kbGVyXHJcblx0XHRcdGNvbnN0IGNyZWF0ZU5hbWVEaXNwbGF5ID0gKG5hbWU6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdG5hbWVDb250YWluZXIuZW1wdHkoKTtcclxuXHJcblx0XHRcdFx0Y29uc3QgZGlzcGxheSA9IG5hbWVDb250YWluZXIuY3JlYXRlU3Bhbih7XHJcblx0XHRcdFx0XHR0ZXh0OiBuYW1lID09PSBkaXNwbGF5TmFtZSA/IG5hbWUgOiBgJHtuYW1lfSAoJHtkaXNwbGF5TmFtZX0pYCxcclxuXHRcdFx0XHRcdGNsczogJ3VpLXR3ZWFrZXItbmFtZS1kaXNwbGF5J1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQvLyBBZGQgcGVuY2lsIGljb25cclxuXHRcdFx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gbmFtZUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd1aS10d2Vha2VyLWVkaXQtaWNvbicgfSk7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkNvbnRhaW5lciwgeyBvcGFjaXR5OiAnMC42JyB9KTtcclxuXHRcdFx0XHRzZXRJY29uKGljb25Db250YWluZXIsICdsdWNpZGUtcGVuY2lsLWxpbmUnKTtcclxuXHJcblx0XHRcdFx0Ly8gTWFrZSBuYW1lIGFuZCBpY29uIGVkaXRhYmxlIG9uIGNsaWNrXHJcblx0XHRcdFx0Y29uc3Qgc3RhcnRFZGl0ID0gKCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudE5hbWUgPSBwYWlyLm5hbWU7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ2xlYXIgY29udGFpbmVyXHJcblx0XHRcdFx0XHRuYW1lQ29udGFpbmVyLmVtcHR5KCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGlucHV0IHVzaW5nIG5hdGl2ZSBPYnNpZGlhbiBzdHlsaW5nXHJcblx0XHRcdFx0XHRjb25zdCBuYW1lSW5wdXQgPSBuYW1lQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuXHRcdFx0XHRcdFx0dHlwZTogJ3RleHQnLFxyXG5cdFx0XHRcdFx0XHR2YWx1ZTogY3VycmVudE5hbWVcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmFkZENsYXNzKCdtb2QtdGV4dC1pbnB1dCcpO1xyXG5cclxuXHRcdFx0XHRcdC8vIEZvY3VzIGFuZCBzZWxlY3QgdGV4dFxyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmZvY3VzKCk7XHJcblx0XHRcdFx0XHRuYW1lSW5wdXQuc2VsZWN0KCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gU2F2ZSBvbiBibHVyXHJcblx0XHRcdFx0XHRjb25zdCBzYXZlTmFtZSA9ICgpID0+IHtcclxuXHRcdFx0XHRcdFx0bmFtZUlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XHJcblxyXG5cdFx0XHRcdFx0XHRsZXQgbmV3TmFtZSA9IG5hbWVJbnB1dC52YWx1ZS50cmltKCk7XHJcblx0XHRcdFx0XHRcdGlmICghbmV3TmFtZSkge1xyXG5cdFx0XHRcdFx0XHRcdG5ld05hbWUgPSBjdXJyZW50TmFtZTsgLy8gUmV2ZXJ0IHRvIG9yaWdpbmFsIGlmIGVtcHR5XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cGFpci5uYW1lID0gbmV3TmFtZTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBleGlzdGluZyBidXR0b25zIGltbWVkaWF0ZWx5IChkb24ndCB3YWl0IGZvciByZS1yZW5kZXIpXHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnVwZGF0ZUJ1dHRvbk5hbWVzKCk7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gdXBkYXRlIGRpc3BsYXkgYW5kIHNhdmVcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdFx0Ly8gU2F2ZSBvbiBFbnRlclxyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcclxuXHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0c2F2ZU5hbWUoKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcclxuXHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0Ly8gQ2FuY2VsOiByZXZlcnQgdG8gb3JpZ2luYWxcclxuXHRcdFx0XHRcdFx0XHRjcmVhdGVOYW1lRGlzcGxheShjdXJyZW50TmFtZSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdC8vIFNhdmUgb24gYmx1clxyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0Ly8gQWRkIGNsaWNrIGhhbmRsZXJzIHRvIGJvdGggbmFtZSBhbmQgaWNvblxyXG5cdFx0XHRcdGRpc3BsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdGFydEVkaXQpO1xyXG5cdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdGFydEVkaXQpO1xyXG5cclxuXHRcdFx0XHQvLyBBZGQgaG92ZXIgZWZmZWN0IHRvIGljb25cclxuXHRcdFx0XHRpY29uQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQ29udGFpbmVyLCB7IG9wYWNpdHk6ICcxJyB9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRpY29uQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQ29udGFpbmVyLCB7IG9wYWNpdHk6ICcwLjYnIH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Ly8gQ3JlYXRlIGluaXRpYWwgZGlzcGxheVxyXG5cdFx0XHRjcmVhdGVOYW1lRGlzcGxheShwYWlyLm5hbWUpO1xyXG5cclxuXHRcdFx0c2V0dGluZy5zZXREZXNjKCcnKVxyXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBDaGFuZ2UgaWNvbiAtIHByZXZpZXcgd2l0aCBjb2xvciAocmVhbC10aW1lIHVwZGF0ZXMpXHJcblx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBidXR0b24uZXh0cmFTZXR0aW5nc0VsO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihpY29uRWwsIHBhaXIuaWNvbik7XHJcblx0XHRcdFx0XHQvLyBTdG9yZSByZWZlcmVuY2UgZm9yIGNvbG9yIHVwZGF0ZXNcclxuXHRcdFx0XHRcdGljb25FbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29tbWFuZC1pZCcsIHBhaXIuaWQpO1xyXG5cdFx0XHRcdFx0aWYgKHBhaXIuY29sb3IgJiYgcGFpci5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25FbCwgeyBjb2xvcjogcGFpci5jb2xvciB9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGljb25FbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdDaGFuZ2UgaWNvbicpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5hcHAsIChpY29uSWQpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoaWNvbklkICYmIGljb25JZCAhPT0gcGFpci5pY29uKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuaWNvbiA9IGljb25JZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gTW92ZSB1cCAtIGFsd2F5cyBzaG93LCBidXQgZGlzYWJsZSB3aGVuIGF0IHRvcFxyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oJ2NoZXZyb24tdXAnKTtcclxuXHRcdFx0XHRcdGlmIChpbmRleCA+IDApIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ01vdmUgdXAnKTtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiB0byBwcmV2ZW50IGZsaWNrZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHxcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50LWNvbnRhaW5lcicpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXI7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRhcnJheU1vdmVNdXRhYmxlKHNldHRpbmdzLnRhYkJhckNvbW1hbmRzLCBpbmRleCwgaW5kZXggLSAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyIHdpdGggbXVsdGlwbGUgYXR0ZW1wdHNcclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFsc28gdHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgaW4gY2FzZSBET00gaXNuJ3QgcmVhZHlcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmUgbW9yZSBhdHRlbXB0IGFmdGVyIGEgbG9uZ2VyIGRlbGF5XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sIDUwKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdBbHJlYWR5IGF0IHRvcCcpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCd1aS10d2Vha2VyLWRpc2FibGVkLWJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0XHQvLyBQcmV2ZW50IGhvdmVyIGVmZmVjdHMgb24gZGlzYWJsZWQgYnV0dG9uc1xyXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24uZXh0cmFTZXR0aW5nc0VsLCB7IHBvaW50ZXJFdmVudHM6ICdub25lJyB9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gTW92ZSBkb3duIC0gYWx3YXlzIHNob3csIGJ1dCBkaXNhYmxlIHdoZW4gYXQgYm90dG9tXHJcblx0XHRcdFx0XHRidXR0b24uc2V0SWNvbignY2hldnJvbi1kb3duJyk7XHJcblx0XHRcdFx0XHRpZiAoaW5kZXggPCBzZXR0aW5ncy50YWJCYXJDb21tYW5kcy5sZW5ndGggLSAxKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdNb3ZlIGRvd24nKTtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiB0byBwcmV2ZW50IGZsaWNrZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHxcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50LWNvbnRhaW5lcicpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXI7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRhcnJheU1vdmVNdXRhYmxlKHNldHRpbmdzLnRhYkJhckNvbW1hbmRzLCBpbmRleCwgaW5kZXggKyAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyIHdpdGggbXVsdGlwbGUgYXR0ZW1wdHNcclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFsc28gdHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgaW4gY2FzZSBET00gaXNuJ3QgcmVhZHlcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmUgbW9yZSBhdHRlbXB0IGFmdGVyIGEgbG9uZ2VyIGRlbGF5XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sIDUwKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdBbHJlYWR5IGF0IGJvdHRvbScpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCd1aS10d2Vha2VyLWRpc2FibGVkLWJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0XHQvLyBQcmV2ZW50IGhvdmVyIGVmZmVjdHMgb24gZGlzYWJsZWQgYnV0dG9uc1xyXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24uZXh0cmFTZXR0aW5nc0VsLCB7IHBvaW50ZXJFdmVudHM6ICdub25lJyB9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gRGVsZXRlIC0gcmVkL3dhcm5pbmcgc3R5bGVcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCd0cmFzaCcpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0RlbGV0ZScpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcygnbW9kLXdhcm5pbmcnKTtcclxuXHRcdFx0XHRcdC8vIE1ha2UgaWNvbiByZWRcclxuXHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgY29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKScgfSk7XHJcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy50YWJCYXJDb21tYW5kcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVtb3ZlQ29tbWFuZChwYWlyKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gTW9kZSBzZWxlY3Rpb24gZHJvcGRvd25cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdEZXZpY2UgbW9kZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ0Nob29zZSB3aGljaCBkZXZpY2VzIHRoaXMgY29tbWFuZCBhcHBlYXJzIG9uJylcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBhcHBJZCA9ICh0aGlzLmFwcCBhcyB7IGFwcElkPzogc3RyaW5nIH0pLmFwcElkIHx8ICd0aGlzLWRldmljZSc7XHJcblx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdhbnknLCAnQWxsIGRldmljZXMnKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdkZXNrdG9wJywgJ0Rlc2t0b3Agb25seScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ21vYmlsZScsICdNb2JpbGUgb25seScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oYXBwSWQsICdUaGlzIGRldmljZScpO1xyXG5cclxuXHRcdFx0XHRcdC8vIFNldCBjdXJyZW50IHZhbHVlIC0gaWYgbW9kZSBpcyBub3Qgb25lIG9mIHRoZSBzdGFuZGFyZCBvbmVzLCBpdCdzIFwidGhpcyBkZXZpY2VcIlxyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlID0gKHBhaXIubW9kZSA9PT0gJ2FueScgfHwgcGFpci5tb2RlID09PSAnZGVza3RvcCcgfHwgcGFpci5tb2RlID09PSAnbW9iaWxlJylcclxuXHRcdFx0XHRcdFx0PyBwYWlyLm1vZGVcclxuXHRcdFx0XHRcdFx0OiBhcHBJZDtcclxuXHRcdFx0XHRcdGRyb3Bkb3duLnNldFZhbHVlKGN1cnJlbnRWYWx1ZSk7XHJcblxyXG5cdFx0XHRcdFx0ZHJvcGRvd24ub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRwYWlyLm1vZGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEN1c3RvbSBjb2xvciBwaWNrZXIgd2l0aCByZXNldCBidXR0b24gKGxpa2UgQ29tbWFuZGVyIC0gYWx3YXlzIHNob3cgY29sb3IgcGlja2VyKVxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRjb25zdCBoYXNDb2xvciA9IHBhaXIuY29sb3IgIT09IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ3VzdG9tIGNvbG9yJylcclxuXHRcdFx0XHQuc2V0RGVzYygnU2V0IGEgY3VzdG9tIGNvbG9yIGZvciB0aGlzIGljb24nKVxyXG5cdFx0XHRcdC5hZGRDb2xvclBpY2tlcigoY29sb3JQaWNrZXIpID0+IHtcclxuXHRcdFx0XHRcdC8vIFVzZSBDb21tYW5kZXIncyBhcHByb2FjaDogYWx3YXlzIHNob3cgY29sb3IgcGlja2VyLCBkZWZhdWx0IHRvICMwMDAgaWYgbm90IHNldFxyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudENvbG9yID0gcGFpci5jb2xvciA/PyAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRjb2xvclBpY2tlci5zZXRWYWx1ZShjdXJyZW50Q29sb3IpO1xyXG5cclxuXHRcdFx0XHRcdC8vIEdldCB0aGUgY29udHJvbCBlbGVtZW50IC0gY29sb3IgcGlja2VyIGlzIGFkZGVkIHRvIGl0XHJcblx0XHRcdFx0XHRjb25zdCBjb250cm9sRWwgPSBzZXR0aW5nLmNvbnRyb2xFbDtcclxuXHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNvbG9yIHBpY2tlciBjbGlja3NcclxuXHRcdFx0XHRcdGNvbnRyb2xFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHJcblx0XHRcdFx0XHQvLyBBZGQgZXZlbnQgaGFuZGxlciB0byB0aGUgYWN0dWFsIGNvbG9yIGlucHV0IGVsZW1lbnRcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjb2xvcklucHV0ID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjb2xvclwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdGlmIChjb2xvcklucHV0KSB7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3JJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgMCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQWRkIHJlc2V0IGJ1dHRvbiB0byB0aGUgbGVmdCBvZiBjb2xvciBwaWNrZXIgaWYgY29sb3IgaGFzIGJlZW4gc2V0XHJcblx0XHRcdFx0XHQvLyBVc2Ugc2V0VGltZW91dCB0byBlbnN1cmUgY29sb3IgcGlja2VyIGlzIGFkZGVkIGZpcnN0LCB0aGVuIGluc2VydCByZXNldCBidXR0b24gYmVmb3JlIGl0XHJcblx0XHRcdFx0XHRpZiAoaGFzQ29sb3IpIHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gRmluZCB0aGUgY29sb3IgcGlja2VyIGVsZW1lbnQgKGl0J3MgdHlwaWNhbGx5IHRoZSBsYXN0IGNoaWxkIG9yIGhhcyBhIHNwZWNpZmljIGNsYXNzKVxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvIGRlZmF1bHQgY29sb3InIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGNvbG9yIGVudGlyZWx5XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgaWNvbiBwcmV2aWV3IHRvIHJlbW92ZSBjb2xvclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBpY29uQnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNvbW1hbmQtaWQ9XCIke3BhaXIuaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpY29uQnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWNvbkJ1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gSW5zZXJ0IHJlc2V0IGJ1dHRvbiBiZWZvcmUgY29sb3IgcGlja2VyXHJcblx0XHRcdFx0XHRcdFx0aWYgKGNvbG9yUGlja2VyRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbG9yUGlja2VyRWwpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBGYWxsYmFjazogaW5zZXJ0IGF0IHN0YXJ0XHJcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb250cm9sRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRjb2xvclBpY2tlci5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0Ly8gSWYgc2V0IHRvIGJsYWNrICgjMDAwMDAwKSwgdHJlYXQgYXMgXCJubyBjdXN0b20gY29sb3JcIiBhbmQgcmVtb3ZlIGl0XHJcblx0XHRcdFx0XHRcdGlmICh2YWx1ZSA9PT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdFx0XHRcdFx0cGFpci5jb2xvciA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRwYWlyLmNvbG9yID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBpY29uIHByZXZpZXcgY29sb3IgaW4gcmVhbC10aW1lXHJcblx0XHRcdFx0XHRcdGNvbnN0IGljb25CdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtY29tbWFuZC1pZD1cIiR7cGFpci5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdFx0aWYgKGljb25CdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25CdXR0b24sIHsgY29sb3I6IHBhaXIuY29sb3IgfSk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdGljb25CdXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBTYXZlIGFuZCByZW9yZGVyLCB0aGVuIHJlLXJlbmRlciB0byBzaG93L2hpZGUgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUb2dnbGUgaWNvbiBjb25maWd1cmF0aW9uXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdGNvbnN0IGhhc1RvZ2dsZUljb24gPSBwYWlyLnRvZ2dsZUljb24gIT09IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnVG9nZ2xlIGljb24nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdJY29uIHRvIHNob3cgd2hlbiBjb21tYW5kIGlzIHRvZ2dsZWQgb24gKGxlYXZlIGVtcHR5IHRvIGRpc2FibGUgdG9nZ2xlKS4gQ29tbWFuZHMgd2l0aCBjaGVjayBjYWxsYmFjayB3b3JrIGF1dG9tYXRpY2FsbHkuIFNlZSByZWFkbWUgZm9yIHBsdWdpbiBkZXZlbG9wZXIgY29tcGF0aWJpbGl0eSBub3Rlcy4nKVxyXG5cdFx0XHRcdC5zZXRUb29sdGlwKCdGb3IgcGx1Z2luIGRldmVsb3BlcnM6IENvbW1hbmRzIHdpdGggY2hlY2tDYWxsYmFjayB3b3JrIGF1dG9tYXRpY2FsbHkuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZGF2aWR2a2ltYmFsbC9vYnNpZGlhbi11aS10d2Vha2VyI3RvZ2dsZS1pY29uLWZlYXR1cmUtY29tcGF0aWJpbGl0eSBmb3IgZGV0YWlscy4nKVxyXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFRvZ2dsZUljb24gPSBwYWlyLnRvZ2dsZUljb24gfHwgJ05vbmUnO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoY3VycmVudFRvZ2dsZUljb24gPT09ICdOb25lJyA/ICdTZXQgdG9nZ2xlIGljb24uLi4nIDogY3VycmVudFRvZ2dsZUljb24pLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5hcHAsIChpY29uSWQpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoaWNvbklkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIudG9nZ2xlSWNvbiA9IGljb25JZDtcclxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIudG9nZ2xlSWNvbiA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5idXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHJcblx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uIGlmIHRvZ2dsZSBpY29uIGlzIHNldFxyXG5cdFx0XHRcdFx0aWYgKGhhc1RvZ2dsZUljb24pIHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgYnV0dG9uRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignYnV0dG9uJykgfHwgY29udHJvbEVsLmxhc3RFbGVtZW50Q2hpbGQ7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gY29udHJvbEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiB1aS10d2Vha2VyLXRvZ2dsZS1pY29uLXJlc2V0JyxcclxuXHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG9nZ2xlIGljb24nIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiB0byBwcmV2ZW50IGp1bXBpbmdcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50LWNvbnRhaW5lcicpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcjtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSB0b2dnbGUgaWNvblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLnRvZ2dsZUljb24gPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlciB3aXRoIG11bHRpcGxlIGF0dGVtcHRzXHJcblx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBbHNvIHRyeSBhZnRlciBhIHNob3J0IGRlbGF5IGluIGNhc2UgRE9NIGlzbid0IHJlYWR5XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIEluc2VydCByZXNldCBidXR0b24gYmVmb3JlIHRoZSBtYWluIGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRcdGlmIChidXR0b25FbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgYnV0dG9uRWwpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb250cm9sRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNob3cgb25seSBvbiB0aGVzZSBmaWxlIHR5cGVzXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2hvdyBvbmx5IG9uIHRoZXNlIGZpbGUgdHlwZXMnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdTaG93IGJ1dHRvbiBvbmx5IG9uIHNwZWNpZmllZCBmaWxlIHR5cGVzIG9yIHZpZXdzLiBFbnRlciBjb21tYS1zZXBhcmF0ZWQgZmlsZSBleHRlbnNpb25zIChsaWtlIFwibWQsbWR4XCIpIG9yIHZpZXcgdHlwZXMgZm9yIHZpZXdzIHdpdGhvdXQgZmlsZXMgKGxpa2UgXCJ7e2dyYXBofX1cIikuIExlYXZlIGVtcHR5IHRvIHNob3cgb24gYWxsLiBVc2Uge3tncmFwaH19IGZvciBncmFwaCB2aWV3IGFuZCB7e2VtcHR5fX0gZm9yIGJsYW5rL25ldyB0YWJzLicpXHJcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIoJ0V4YW1wbGU6IG1kLCBtZHgnKTtcclxuXHRcdFx0XHRcdHRleHQuc2V0VmFsdWUocGFpci5zaG93T25GaWxlVHlwZXMgPz8gJycpO1xyXG5cdFx0XHRcdFx0dGV4dC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHBhaXIuc2hvd09uRmlsZVR5cGVzID0gdmFsdWUudHJpbSgpIHx8IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGljay9mb2N1c1xyXG5cdFx0XHRcdFx0dGV4dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0dGV4dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gTmV2ZXIgc2hvdyBvbiB0aGVzZSBmaWxlIHR5cGVzXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnTmV2ZXIgc2hvdyBvbiB0aGVzZSBmaWxlIHR5cGVzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnSGlkZSBidXR0b24gb24gc3BlY2lmaWVkIGZpbGUgdHlwZXMgb3Igdmlld3MuIEVudGVyIGNvbW1hLXNlcGFyYXRlZCBmaWxlIGV4dGVuc2lvbnMgKGxpa2UgXCJqcGcscG5nXCIpIG9yIHZpZXcgdHlwZXMgZm9yIHZpZXdzIHdpdGhvdXQgZmlsZXMgKGxpa2UgXCJ7e2dyYXBofX1cIikuIExlYXZlIGVtcHR5IHRvIGFsbG93IGFsbC4gVXNlIHt7Z3JhcGh9fSBmb3IgZ3JhcGggdmlldyBhbmQge3tlbXB0eX19IGZvciBibGFuay9uZXcgdGFicy4nKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKCd7e2dyYXBofX0se3tlbXB0eX19Jyk7XHJcblx0XHRcdFx0XHR0ZXh0LnNldFZhbHVlKHBhaXIuaGlkZU9uRmlsZVR5cGVzID8/ICcnKTtcclxuXHRcdFx0XHRcdHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRwYWlyLmhpZGVPbkZpbGVUeXBlcyA9IHZhbHVlLnRyaW0oKSB8fCB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2svZm9jdXNcclxuXHRcdFx0XHRcdHRleHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdHRleHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFmdGVyIGFsbCBzZXR0aW5ncyBhcmUgYWRkZWQsIGFwcGx5IGNvbGxhcHNlIHN0YXRlIGZyb20gTWFwXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0Y29uc3Qgc2F2ZWRFeHBhbmRlZCA9IHRoaXMuZXhwYW5kZWRTdGF0ZXMuZ2V0KHBhaXIuaWQpID8/IGZhbHNlO1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLmZvckVhY2goc2V0dGluZ0VsID0+IHtcclxuXHRcdFx0XHRzZXRDc3NQcm9wcyhzZXR0aW5nRWwsIHsgZGlzcGxheTogc2F2ZWRFeHBhbmRlZCA/ICcnIDogJ25vbmUnIH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sIDApO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIE5hbWUgUGlja2VyIE1vZGFsXHJcbiAqIFNpbXBsZSBtb2RhbCBmb3IgZW50ZXJpbmcgYSBjdXN0b20gbmFtZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgTW9kYWwsIFRleHRDb21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY2xhc3MgTmFtZVBpY2tlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgb25TdWJtaXQ6IChuYW1lOiBzdHJpbmcpID0+IHZvaWQ7XHJcblx0cHJpdmF0ZSBkZWZhdWx0TmFtZTogc3RyaW5nO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZGVmYXVsdE5hbWU6IHN0cmluZywgb25TdWJtaXQ6IChuYW1lOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLmRlZmF1bHROYW1lID0gZGVmYXVsdE5hbWU7XHJcblx0XHR0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdFbnRlciBuYW1lJyB9KTtcclxuXHJcblx0XHRjb25zdCBpbnB1dENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuXHRcdGNvbnN0IGlucHV0ID0gbmV3IFRleHRDb21wb25lbnQoaW5wdXRDb250YWluZXIpO1xyXG5cdFx0aW5wdXQuc2V0VmFsdWUodGhpcy5kZWZhdWx0TmFtZSk7XHJcblx0XHRpbnB1dC5zZXRQbGFjZWhvbGRlcignRW50ZXIgY3VzdG9tIG5hbWUuLi4nKTtcclxuXHRcdGlucHV0LmlucHV0RWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItbmFtZS1pbnB1dCcpO1xyXG5cdFx0aW5wdXQuaW5wdXRFbC5zZWxlY3QoKTtcclxuXHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XHJcblx0XHRjb25zdCBzdWJtaXRCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ09LJywgY2xzOiAnbW9kLWN0YScgfSk7XHJcblx0XHRjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XHJcblxyXG5cdFx0Y29uc3QgaGFuZGxlU3VibWl0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0XHRjb25zdCB2YWx1ZSA9IGlucHV0LmdldFZhbHVlKCkudHJpbSgpO1xyXG5cdFx0XHRpZiAodmFsdWUpIHtcclxuXHRcdFx0XHR0aGlzLm9uU3VibWl0KHZhbHVlKTtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0c3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlU3VibWl0KTtcclxuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblx0XHRpbnB1dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XHJcblx0XHRcdGlmIChldnQua2V5ID09PSAnRW50ZXInKSB7XHJcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0aGFuZGxlU3VibWl0KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjaG9vc2UgYSBuZXcgY29tbWFuZCAoc2ltaWxhciB0byBDb21tYW5kZXIncyBjaG9vc2VOZXdDb21tYW5kKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IENvbW1hbmRJY29uUGFpciB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgQ29tbWFuZFBpY2tlck1vZGFsIH0gZnJvbSAnLi4vbW9kYWxzL0NvbW1hbmRQaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IEljb25QaWNrZXJNb2RhbCB9IGZyb20gJy4uL21vZGFscy9JY29uUGlja2VyTW9kYWwnO1xyXG5pbXBvcnQgeyBOYW1lUGlja2VyTW9kYWwgfSBmcm9tICcuLi9tb2RhbHMvTmFtZVBpY2tlck1vZGFsJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaG9vc2VOZXdDb21tYW5kKHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKTogUHJvbWlzZTxDb21tYW5kSWNvblBhaXI+IHtcclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0bGV0IGNvbW1hbmRTZWxlY3RlZCA9IGZhbHNlO1xyXG5cdFx0bGV0IGljb25TZWxlY3RlZCA9IGZhbHNlO1xyXG5cdFx0XHJcblx0XHQvLyBTdGVwIDE6IENob29zZSBjb21tYW5kXHJcblx0XHRjb25zdCBjb21tYW5kTW9kYWwgPSBuZXcgQ29tbWFuZFBpY2tlck1vZGFsKHBsdWdpbi5hcHAsIChjb21tYW5kSWQpID0+IHtcclxuXHRcdFx0Y29tbWFuZFNlbGVjdGVkID0gdHJ1ZTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEdldCBjb21tYW5kIHRvIGNoZWNrIGlmIGl0IGhhcyBhbiBpY29uXHJcblx0XHRcdGNvbnN0IGNvbW1hbmRzID0gKHBsdWdpbi5hcHAgYXMgeyBjb21tYW5kcz86IHsgY29tbWFuZHM/OiB7IFtpZDogc3RyaW5nXTogQ29tbWFuZCB9IH0gfSkuY29tbWFuZHM7XHJcblx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kcz8uY29tbWFuZHM/Lltjb21tYW5kSWRdO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2xvc2UgY29tbWFuZCBtb2RhbCBmaXJzdFxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRjb21tYW5kTW9kYWwuY2xvc2UoKTtcclxuXHRcdFx0fSwgMCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBbHdheXMgc2hvdyBpY29uIHBpY2tlciAoZXZlbiBpZiBjb21tYW5kIGhhcyBhbiBpY29uLCBsZXQgdXNlciBjaG9vc2UpXHJcblx0XHRcdGNvbnN0IGRpc3BsYXlOYW1lID0gY29tbWFuZD8ubmFtZSB8fCAnQ3VzdG9tIENvbW1hbmQnO1xyXG5cdFx0XHRjb25zdCBpY29uTW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHBsdWdpbi5hcHAsIChpY29uSWQpID0+IHtcclxuXHRcdFx0XHRpY29uU2VsZWN0ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdGljb25Nb2RhbC5jbG9zZSgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFN0ZXAgMzogQ2hvb3NlIGN1c3RvbSBuYW1lXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRsZXQgbmFtZVNlbGVjdGVkID0gZmFsc2U7XHJcblx0XHRcdFx0XHRjb25zdCBuYW1lTW9kYWwgPSBuZXcgTmFtZVBpY2tlck1vZGFsKHBsdWdpbi5hcHAsIGRpc3BsYXlOYW1lLCAoY3VzdG9tTmFtZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRuYW1lU2VsZWN0ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRuYW1lTW9kYWwuY2xvc2UoKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHJlc29sdmUoe1xyXG5cdFx0XHRcdFx0XHRcdGlkOiBjb21tYW5kSWQsXHJcblx0XHRcdFx0XHRcdFx0aWNvbjogaWNvbklkLFxyXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGN1c3RvbU5hbWUsXHJcblx0XHRcdFx0XHRcdFx0ZGlzcGxheU5hbWU6IGRpc3BsYXlOYW1lLFxyXG5cdFx0XHRcdFx0XHRcdG1vZGU6ICdhbnknLFxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRuYW1lTW9kYWwub25DbG9zZSA9ICgpID0+IHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFuYW1lU2VsZWN0ZWQgJiYgaWNvblNlbGVjdGVkICYmIGNvbW1hbmRTZWxlY3RlZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVqZWN0KG5ldyBFcnJvcignTm8gbmFtZSBzZWxlY3RlZCcpKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0bmFtZU1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHR9LCAxMDApO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdGljb25Nb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xyXG5cdFx0XHRcdC8vIFVzZSBzZXRUaW1lb3V0IHRvIGFsbG93IG9uU2VsZWN0IHRvIHNldCBpY29uU2VsZWN0ZWQgZmlyc3RcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdGlmICghaWNvblNlbGVjdGVkICYmIGNvbW1hbmRTZWxlY3RlZCkge1xyXG5cdFx0XHRcdFx0XHRyZWplY3QobmV3IEVycm9yKCdObyBpY29uIHNlbGVjdGVkJykpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIDApO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0aWNvbk1vZGFsLm9wZW4oKTtcclxuXHRcdFx0fSwgMTAwKTtcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRjb21tYW5kTW9kYWwub25DbG9zZSA9ICgpID0+IHtcclxuXHRcdFx0Ly8gVXNlIHNldFRpbWVvdXQgdG8gYWxsb3cgb25DaG9vc2VJdGVtIHRvIHNldCBjb21tYW5kU2VsZWN0ZWQgZmlyc3RcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0aWYgKCFjb21tYW5kU2VsZWN0ZWQpIHtcclxuXHRcdFx0XHRcdHJlamVjdChuZXcgRXJyb3IoJ05vIGNvbW1hbmQgc2VsZWN0ZWQnKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCAwKTtcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdGNvbW1hbmRNb2RhbC5vcGVuKCk7XHJcblx0fSk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBTdGF0dXMgQmFyIFRhYiAtIFVuaWZpZWQgbGlzdCBvZiBleGlzdGluZyArIGN1c3RvbSBzdGF0dXMgYmFyIGl0ZW1zXHJcbiAqIEVYQUNUTFkgbWF0Y2hlcyBTdGF0dXMgQmFyIE9yZ2FuaXplcidzIGRlc2lnbiAxOjFcclxuICovXHJcblxyXG5pbXBvcnQgeyBzZXRJY29uLCBDb2xvckNvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVGFiUmVuZGVyZXIgfSBmcm9tICcuLi9jb21tb24vVGFiUmVuZGVyZXInO1xyXG5pbXBvcnQgeyBTdGF0dXNCYXJJdGVtIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBVSVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBjaG9vc2VOZXdDb21tYW5kIH0gZnJvbSAnLi4vLi4vdXRpbHMvY2hvb3NlQ29tbWFuZCc7XHJcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vLi4vdXRpbHMvY3NzVXRpbHMnO1xyXG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0JztcclxuXHJcbi8vIFNpbXBsZSBhcnJheSBtb3ZlIHV0aWxpdHlcclxuZnVuY3Rpb24gYXJyYXlNb3ZlTXV0YWJsZTxUPihhcnJheTogVFtdLCBmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpOiB2b2lkIHtcclxuXHRjb25zdCBpdGVtID0gYXJyYXlbZnJvbV07XHJcblx0YXJyYXkuc3BsaWNlKGZyb20sIDEpO1xyXG5cdGFycmF5LnNwbGljZSh0bywgMCwgaXRlbSk7XHJcbn1cclxuXHJcbmxldCBkcmFnZ2luZyA9IGZhbHNlO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0YXR1c0JhclRhYiBleHRlbmRzIFRhYlJlbmRlcmVyIHtcclxuXHRwcml2YXRlIGNvbnRhaW5lcj86IEhUTUxFbGVtZW50O1xyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xyXG5cdFx0Ly8gU3RvcmUgY29udGFpbmVyIHJlZmVyZW5jZSBmb3IgcmUtcmVuZGVyc1xyXG5cdFx0dGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcblxyXG5cdFx0Ly8gRW5zdXJlIHN0YXR1c0Jhckl0ZW1zIGV4aXN0c1xyXG5cdFx0aWYgKCFzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcykge1xyXG5cdFx0XHRzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcyA9IFtdO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENyZWF0ZSB3cmFwcGVyXHJcblx0XHRjb25zdCB3cmFwcGVyID0gY29udGFpbmVyLmNyZWF0ZURpdigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvd3Mtd3JhcHBlcicpO1xyXG5cclxuXHRcdC8vIENyZWF0ZSByb3dzIGNvbnRhaW5lclxyXG5cdFx0Y29uc3Qgcm93c0NvbnRhaW5lciA9IHdyYXBwZXIuY3JlYXRlRGl2KCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93cy1jb250YWluZXInKTtcclxuXHJcblx0XHQvLyBSZW5kZXIgYWxsIGl0ZW1zIGFzIHNpbXBsZSByb3dzIChleGFjdGx5IGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRpZiAoaXRlbS50eXBlID09PSAnZXhpc3RpbmcnKSB7XHJcblx0XHRcdFx0dGhpcy5yZW5kZXJFeGlzdGluZ1Jvdyhyb3dzQ29udGFpbmVyLCBpdGVtLCBzZXR0aW5ncywgaW5kZXgsIHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLmxlbmd0aCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5yZW5kZXJDdXN0b21Sb3cocm93c0NvbnRhaW5lciwgaXRlbSwgc2V0dGluZ3MsIGluZGV4LCBzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcy5sZW5ndGgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgY29tbWFuZCBidXR0b24gKGF0IHRoZSBlbmQpXHJcblx0XHRpZiAoc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoJ2hyJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgYWRkR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgdW5kZWZpbmVkLCAndWktdHdlYWtlcicpO1xyXG5cdFx0YWRkR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0FkZCBjb21tYW5kJylcclxuXHRcdFx0XHQuc2V0RGVzYygnQWRkIGEgbmV3IGNvbW1hbmQgYnV0dG9uIHRvIHRoZSBzdGF0dXMgYmFyJylcclxuXHRcdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdC8vIEFkZCBpY29uIHRvIHRoZSBidXR0b25cclxuXHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gYnV0dG9uLmJ1dHRvbkVsO1xyXG5cdFx0XHRcdFx0Y29uc3QgaWNvbkNvbnRhaW5lciA9IGJ1dHRvbkVsLmNyZWF0ZVNwYW4oeyBjbHM6ICd1aS10d2Vha2VyLWFkZC1pY29uJyB9KTtcclxuXHRcdFx0XHRcdHNldEljb24oaWNvbkNvbnRhaW5lciwgJ2x1Y2lkZS1pbWFnZS1wbHVzJyk7XHJcblx0XHRcdFx0XHRidXR0b25FbC5pbnNlcnRCZWZvcmUoaWNvbkNvbnRhaW5lciwgYnV0dG9uRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dCgnQWRkIGNvbW1hbmQnKS5zZXRDdGEoKS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYWlyID0gYXdhaXQgY2hvb3NlTmV3Q29tbWFuZCh0aGlzLnBsdWdpbik7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5hZGRDdXN0b21Db21tYW5kKHBhaXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU2F2ZSBzY3JvbGwgcG9zaXRpb24gYmVmb3JlIHJlLXJlbmRlclxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5wYXJlbnRFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgYW5kIHJlc3RvcmUgc2Nyb2xsXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXNlciBjYW5jZWxsZWRcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVuZGVyIGFuIGV4aXN0aW5nIHN0YXR1cyBiYXIgaXRlbSByb3cgKEVYQUNUTFkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcclxuXHQgKi9cclxuXHRwcml2YXRlIHJlbmRlckV4aXN0aW5nUm93KHJvd3NDb250YWluZXI6IEhUTUxFbGVtZW50LCBpdGVtOiBTdGF0dXNCYXJJdGVtLCBzZXR0aW5nczogVUlTZXR0aW5ncywgaW5kZXg6IG51bWJlciwgdG90YWxJdGVtczogbnVtYmVyKTogdm9pZCB7XHJcblx0XHQvLyBHZXQgdGhlIGFjdHVhbCBzdGF0dXMgYmFyIGVsZW1lbnQgZm9yIHByZXZpZXdcclxuXHRcdGNvbnN0IHN0YXR1c0JhckNvbnRhaW5lciA9ICh0aGlzLnBsdWdpbi5hcHAgYXMgeyBzdGF0dXNCYXI/OiB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfSB9KS5zdGF0dXNCYXI/LmNvbnRhaW5lckVsO1xyXG5cdFx0Y29uc3QgYWN0dWFsRWxlbWVudCA9IHN0YXR1c0JhckNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcihgW2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkPVwiJHtpdGVtLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0Y29uc3QgZXhpc3RzID0gISFhY3R1YWxFbGVtZW50O1xyXG5cclxuXHRcdC8vIENyZWF0ZSByb3dcclxuXHRcdGNvbnN0IGVudHJ5ID0gcm93c0NvbnRhaW5lci5jcmVhdGVEaXYoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3cnKTtcclxuXHRcdGVudHJ5LmFkZENsYXNzKCd1aS10d2Vha2VyLXJvdycpO1xyXG5cdFx0aWYgKCFleGlzdHMpIGVudHJ5LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWRpc2FibGVkJyk7XHJcblx0XHRpZiAoaXRlbS5oaWRkZW4pIGVudHJ5LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWhpZGRlbicpO1xyXG5cdFx0ZW50cnkuc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItaWQnLCBpdGVtLmlkKTtcclxuXHJcblx0XHQvLyBEcmFnIGhhbmRsZVxyXG5cdFx0Y29uc3QgaGFuZGxlID0gZW50cnkuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oYW5kbGUnKTtcclxuXHRcdGhhbmRsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+XHJcblx0XHRcdHRoaXMuaGFuZGxlTW91c2VEb3duKGV2ZW50LCByb3dzQ29udGFpbmVyLCBpdGVtLCBzZXR0aW5ncylcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gVGl0bGVcclxuXHRcdGNvbnN0IHRpdGxlU3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctdGl0bGUnKTtcclxuXHRcdHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IGl0ZW0ubmFtZTtcclxuXHJcblx0XHQvLyBQcmV2aWV3XHJcblx0XHRjb25zdCBwcmV2aWV3U3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctcHJldmlldycpO1xyXG5cdFx0aWYgKGV4aXN0cyAmJiBhY3R1YWxFbGVtZW50KSB7XHJcblx0XHRcdC8vIENsb25lIHRoZSBlbGVtZW50IGluc3RlYWQgb2YgdXNpbmcgaW5uZXJIVE1MXHJcblx0XHRcdGNvbnN0IGNsb25lZCA9IGFjdHVhbEVsZW1lbnQuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHQvLyBFbnN1cmUgY2xvbmVkIGVsZW1lbnQgYW5kIGFsbCBjaGlsZHJlbiBhcmUgdmlzaWJsZVxyXG5cdFx0XHRzZXRDc3NQcm9wcyhjbG9uZWQsIHsgZGlzcGxheTogJycsIHZpc2liaWxpdHk6ICcnLCBvcGFjaXR5OiAnJyB9KTtcclxuXHRcdFx0Ly8gTWFrZSBzdXJlIGFsbCBjaGlsZCBlbGVtZW50cyBhcmUgdmlzaWJsZVxyXG5cdFx0XHRjbG9uZWQucXVlcnlTZWxlY3RvckFsbCgnKicpLmZvckVhY2goKGNoaWxkKSA9PiB7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoY2hpbGQgYXMgSFRNTEVsZW1lbnQsIHsgZGlzcGxheTogJycsIHZpc2liaWxpdHk6ICcnLCBvcGFjaXR5OiAnJyB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHByZXZpZXdTcGFuLmFwcGVuZENoaWxkKGNsb25lZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRW1wdHkgc3BhbnMgZm9yIGN1c3RvbSBpdGVtIG9wdGlvbnMgKGV4aXN0aW5nIGl0ZW1zIGRvbid0IGhhdmUgdGhlc2UpXHJcblx0XHRlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXJlc2V0LWNvbG9yJyk7IC8vIEVtcHR5XHJcblx0XHRlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWNvbG9yLXBpY2tlcicpOyAvLyBFbXB0eVxyXG5cdFx0Ly8gRGV2aWNlIG1vZGUgaWNvbiByZW1vdmVkIC0gc3RhdHVzIGJhciBub3QgdmlzaWJsZSBvbiBtb2JpbGUsIHNvIG5vIG5lZWQgZm9yIGRldmljZSBpbmRpY2F0b3JzXHJcblx0XHRlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LW1kLW9ubHknKTsgLy8gRW1wdHlcclxuXHJcblx0XHQvLyBMb2NrIGljb24gKG5ldyBmZWF0dXJlKVxyXG5cdFx0Y29uc3QgbG9ja1NwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWxvY2snKTtcclxuXHRcdGNvbnN0IGxvY2tJY29uID0gaXRlbS5zdGlja3kgPT09ICdyaWdodCcgPyAnY29ybmVyLXJpZ2h0LWRvd24nIDogKGl0ZW0uc3RpY2t5ID09PSAnbGVmdCcgPyAnY29ybmVyLXJpZ2h0LXVwJyA6ICd1bmxvY2snKTtcclxuXHRcdGxvY2tTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGl0ZW0uc3RpY2t5ID8gYFBpbm5lZCB0byAke2l0ZW0uc3RpY2t5ID09PSAncmlnaHQnID8gJ0VuZCcgOiAnU3RhcnQnfWAgOiAnVW5sb2NrZWQgLSBjbGljayB0byBwaW4gdG8gZW5kJyk7XHJcblx0XHRsb2NrU3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdHRoaXMudG9nZ2xlTG9jayhpdGVtLCBsb2NrU3BhbiwgaW5kZXgsIHRvdGFsSXRlbXMsIHJvd3NDb250YWluZXIsIHNldHRpbmdzKTtcclxuXHRcdH0pO1xyXG5cdFx0c2V0SWNvbihsb2NrU3BhbiwgbG9ja0ljb24pO1xyXG5cdFx0aWYgKGl0ZW0uc3RpY2t5KSB7XHJcblx0XHRcdGxvY2tTcGFuLmFkZENsYXNzKCd1aS10d2Vha2VyLWxvY2tlZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERlbGV0ZSBpY29uIGZvciBjdXN0b20gaXRlbXMsIHZpc2liaWxpdHkgaWNvbiBmb3IgZXhpc3RpbmcgaXRlbXNcclxuXHRcdGNvbnN0IHZpc2liaWxpdHlTcGFuID0gZW50cnkuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy12aXNpYmlsaXR5Jyk7XHJcblx0XHRpZiAoaXRlbS50eXBlID09PSAnY3VzdG9tJykge1xyXG5cdFx0XHQvLyBDdXN0b20gaXRlbXM6IHNob3cgdHJhc2ggaWNvbiAocmVkL3dhcm5pbmcpXHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdEZWxldGUgaXRlbScpO1xyXG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5hZGRDbGFzcygnbW9kLXdhcm5pbmcnKTtcclxuXHRcdFx0c2V0Q3NzUHJvcHModmlzaWJpbGl0eVNwYW4sIHsgY29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKScgfSk7XHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdHZvaWQgdGhpcy5yZW1vdmVJdGVtKHJvd3NDb250YWluZXIsIGl0ZW0sIHNldHRpbmdzKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHNldEljb24odmlzaWJpbGl0eVNwYW4sICd0cmFzaC0yJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBFeGlzdGluZyBpdGVtczogc2hvdyB2aXNpYmlsaXR5IHRvZ2dsZVxyXG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBpdGVtLmhpZGRlbiA/ICdIaWRkZW4gLSBjbGljayB0byBzaG93JyA6ICdWaXNpYmxlIC0gY2xpY2sgdG8gaGlkZScpO1xyXG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLnRvZ2dsZVZpc2liaWxpdHkoaXRlbSwgdmlzaWJpbGl0eVNwYW4sIGVudHJ5KTtcclxuXHRcdFx0XHQvLyB0b2dnbGVWaXNpYmlsaXR5IGFscmVhZHkgY2FsbHMgc2F2ZVNldHRpbmdzKClcclxuXHRcdFx0fSk7XHJcblx0XHRcdHNldEljb24odmlzaWJpbGl0eVNwYW4sIGl0ZW0uaGlkZGVuID8gJ2V5ZS1vZmYnIDogJ2V5ZScpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVuZGVyIGEgY3VzdG9tIHN0YXR1cyBiYXIgaXRlbSByb3cgKEVYQUNUTFkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplciwgYnV0IHdpdGggZWRpdGFibGUgbmFtZSlcclxuXHQgKi9cclxuXHRwcml2YXRlIHJlbmRlckN1c3RvbVJvdyhyb3dzQ29udGFpbmVyOiBIVE1MRWxlbWVudCwgaXRlbTogU3RhdHVzQmFySXRlbSwgc2V0dGluZ3M6IFVJU2V0dGluZ3MsIGluZGV4OiBudW1iZXIsIHRvdGFsSXRlbXM6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0Ly8gQ3JlYXRlIHJvd1xyXG5cdFx0Y29uc3QgZW50cnkgPSByb3dzQ29udGFpbmVyLmNyZWF0ZURpdigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdycpO1xyXG5cdFx0ZW50cnkuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItcm93Jyk7XHJcblx0XHRpZiAoaXRlbS5oaWRkZW4pIGVudHJ5LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWhpZGRlbicpO1xyXG5cdFx0ZW50cnkuc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItaWQnLCBpdGVtLmlkKTtcclxuXHJcblx0XHQvLyBEcmFnIGhhbmRsZVxyXG5cdFx0Y29uc3QgaGFuZGxlID0gZW50cnkuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oYW5kbGUnKTtcclxuXHRcdGhhbmRsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+XHJcblx0XHRcdHRoaXMuaGFuZGxlTW91c2VEb3duKGV2ZW50LCByb3dzQ29udGFpbmVyLCBpdGVtLCBzZXR0aW5ncylcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gVGl0bGUgd2l0aCBlZGl0YWJsZSBuYW1lXHJcblx0XHRjb25zdCB0aXRsZVNwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXRpdGxlJyk7XHJcblx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IGl0ZW0uZGlzcGxheU5hbWUgfHwgaXRlbS5uYW1lO1xyXG5cdFx0Y29uc3QgbmFtZVRleHQgPSBpdGVtLm5hbWUgPT09IGRpc3BsYXlOYW1lID8gaXRlbS5uYW1lIDogYCR7aXRlbS5uYW1lfSAoJHtkaXNwbGF5TmFtZX0pYDtcclxuXHRcdHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IG5hbWVUZXh0O1xyXG5cclxuXHRcdC8vIE1ha2UgdGl0bGUgZWRpdGFibGUgb24gY2xpY2tcclxuXHRcdHRpdGxlU3Bhbi5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsICgpID0+IHtcclxuXHRcdFx0Y29uc3QgY3VycmVudE5hbWUgPSBpdGVtLm5hbWU7XHJcblx0XHRcdGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuXHRcdFx0aW5wdXQudHlwZSA9ICd0ZXh0JztcclxuXHRcdFx0aW5wdXQudmFsdWUgPSBjdXJyZW50TmFtZTtcclxuXHRcdFx0aW5wdXQuYWRkQ2xhc3MoJ21vZC10ZXh0LWlucHV0Jyk7XHJcblx0XHRcdHNldENzc1Byb3BzKGlucHV0LCB7IHdpZHRoOiAnMTAwJScgfSk7XHJcblx0XHRcdHRpdGxlU3Bhbi5lbXB0eSgpO1xyXG5cdFx0XHR0aXRsZVNwYW4uYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG5cdFx0XHRpbnB1dC5mb2N1cygpO1xyXG5cdFx0XHRpbnB1dC5zZWxlY3QoKTtcclxuXHJcblx0XHRcdGNvbnN0IHNhdmVOYW1lID0gKCkgPT4ge1xyXG5cdFx0XHRcdGxldCBuZXdOYW1lID0gaW5wdXQudmFsdWUudHJpbSgpO1xyXG5cdFx0XHRcdGlmICghbmV3TmFtZSkgbmV3TmFtZSA9IGN1cnJlbnROYW1lO1xyXG5cdFx0XHRcdGl0ZW0ubmFtZSA9IG5ld05hbWU7XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc3RhdHVzQmFyTWFuYWdlcj8udXBkYXRlQnV0dG9uTmFtZXMoKTtcclxuXHRcdFx0XHR0aXRsZVNwYW4udGV4dENvbnRlbnQgPSBuZXdOYW1lID09PSBkaXNwbGF5TmFtZSA/IG5ld05hbWUgOiBgJHtuZXdOYW1lfSAoJHtkaXNwbGF5TmFtZX0pYDtcclxuXHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuXHRcdFx0XHRpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHNhdmVOYW1lKCk7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IG5hbWVUZXh0O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBQcmV2aWV3XHJcblx0XHRjb25zdCBwcmV2aWV3U3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctcHJldmlldycpO1xyXG5cdFx0aWYgKGl0ZW0uaWNvbikge1xyXG5cdFx0XHRjb25zdCBwcmV2aWV3SWNvbiA9IHByZXZpZXdTcGFuLmNyZWF0ZVNwYW4oJ3N0YXR1cy1iYXItaXRlbSBtb2QtY2xpY2thYmxlJyk7XHJcblx0XHRcdHNldEljb24ocHJldmlld0ljb24sIGl0ZW0uaWNvbik7XHJcblx0XHRcdGlmIChpdGVtLmNvbG9yICYmIGl0ZW0uY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdHNldENzc1Byb3BzKHByZXZpZXdJY29uLCB7IGNvbG9yOiBpdGVtLmNvbG9yIH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVzZXQgY29sb3IgYnV0dG9uIChvbmx5IHNob3cgaWYgY29sb3IgaXMgc2V0KVxyXG5cdFx0Y29uc3QgcmVzZXRDb2xvckNvbnRhaW5lciA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctcmVzZXQtY29sb3InKTtcclxuXHRcdGlmIChpdGVtLmNvbG9yKSB7XHJcblx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gcmVzZXRDb2xvckNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxyXG5cdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG8gZGVmYXVsdCBjb2xvcicgfVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ3JvdGF0ZS1jdycpO1xyXG5cdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRpdGVtLmNvbG9yID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSBwcmV2aWV3IGljb25cclxuXHRcdFx0XHRjb25zdCBwcmV2aWV3SWNvbiA9IHByZXZpZXdTcGFuLnF1ZXJ5U2VsZWN0b3IoJy5jbGlja2FibGUtaWNvbicpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdGlmIChwcmV2aWV3SWNvbikge1xyXG5cdFx0XHRcdFx0cHJldmlld0ljb24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnN0YXR1c0Jhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHVwZGF0ZSBVSVxyXG5cdFx0XHRcdGlmICh0aGlzLmNvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXIodGhpcy5jb250YWluZXIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ29sb3IgcGlja2VyIChPYnNpZGlhbidzIG5hdGl2ZSBjb21wb25lbnQpXHJcblx0XHRjb25zdCBjb2xvclBpY2tlckNvbnRhaW5lciA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctY29sb3ItcGlja2VyJyk7XHJcblx0XHRjb25zdCBjb2xvclBpY2tlckVsID0gY29sb3JQaWNrZXJDb250YWluZXIuY3JlYXRlRGl2KCk7XHJcblx0XHRjb25zdCBjb2xvclBpY2tlciA9IG5ldyBDb2xvckNvbXBvbmVudChjb2xvclBpY2tlckVsKTtcclxuXHRcdGNvbG9yUGlja2VyLnNldFZhbHVlKGl0ZW0uY29sb3IgfHwgJyMwMDAwMDAnKTtcclxuXHRcdGNvbG9yUGlja2VyLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRpZiAodmFsdWUgPT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdGl0ZW0uY29sb3IgPSB1bmRlZmluZWQ7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aXRlbS5jb2xvciA9IHZhbHVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIFVwZGF0ZSBwcmV2aWV3IGljb24gY29sb3IgaW4gcmVhbC10aW1lXHJcblx0XHRcdGNvbnN0IHByZXZpZXdJY29uID0gcHJldmlld1NwYW4ucXVlcnlTZWxlY3RvcignLmNsaWNrYWJsZS1pY29uJykgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmIChwcmV2aWV3SWNvbikge1xyXG5cdFx0XHRcdGlmIChpdGVtLmNvbG9yICYmIGl0ZW0uY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMocHJldmlld0ljb24sIHsgY29sb3I6IGl0ZW0uY29sb3IgfSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHByZXZpZXdJY29uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSByZXNldCBidXR0b25cclxuXHRcdFx0aWYgKHRoaXMuY29udGFpbmVyKSB7XHJcblx0XHRcdFx0dGhpcy5yZW5kZXIodGhpcy5jb250YWluZXIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBEZXZpY2UgbW9kZSBpY29uIC0gcmVtb3ZlZCAoc3RhdHVzIGJhciBub3QgdmlzaWJsZSBvbiBtb2JpbGUsIHNvIG5vIG5lZWQgZm9yIGRldmljZSBpbmRpY2F0b3JzKVxyXG5cclxuXHRcdC8vIE1ELW9ubHkgaWNvblxyXG5cdFx0Y29uc3QgbWRPbmx5U3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctbWQtb25seScpO1xyXG5cdFx0bWRPbmx5U3Bhbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBpdGVtLm1kT25seSA/ICdPbmx5IHNob3cgb24gTWFya2Rvd24gZmlsZXMgKGVuYWJsZWQpJyA6ICdPbmx5IHNob3cgb24gTWFya2Rvd24gZmlsZXMgKGRpc2FibGVkKScpO1xyXG5cdFx0bWRPbmx5U3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdGl0ZW0ubWRPbmx5ID0gIWl0ZW0ubWRPbmx5O1xyXG5cdFx0XHRzZXRJY29uKG1kT25seVNwYW4sIGl0ZW0ubWRPbmx5ID8gJ2ZpbGUtY2hlY2snIDogJ2ZpbGUteCcpO1xyXG5cdFx0XHRtZE9ubHlTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGl0ZW0ubWRPbmx5ID8gJ09ubHkgc2hvdyBvbiBNYXJrZG93biBmaWxlcyAoZW5hYmxlZCknIDogJ09ubHkgc2hvdyBvbiBNYXJrZG93biBmaWxlcyAoZGlzYWJsZWQpJyk7XHJcblx0XHRcdGlmIChpdGVtLm1kT25seSkge1xyXG5cdFx0XHRcdG1kT25seVNwYW4uYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItYWN0aXZlJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bWRPbmx5U3Bhbi5yZW1vdmVDbGFzcygndWktdHdlYWtlci1hY3RpdmUnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdH0pO1xyXG5cdFx0c2V0SWNvbihtZE9ubHlTcGFuLCBpdGVtLm1kT25seSA/ICdmaWxlLWNoZWNrJyA6ICdmaWxlLXgnKTtcclxuXHRcdGlmIChpdGVtLm1kT25seSkge1xyXG5cdFx0XHRtZE9ubHlTcGFuLmFkZENsYXNzKCd1aS10d2Vha2VyLWFjdGl2ZScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIExvY2sgaWNvbiAobmV3IGZlYXR1cmUpXHJcblx0XHRjb25zdCBsb2NrU3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctbG9jaycpO1xyXG5cdFx0Y29uc3QgbG9ja0ljb24gPSBpdGVtLnN0aWNreSA9PT0gJ3JpZ2h0JyA/ICdjb3JuZXItcmlnaHQtZG93bicgOiAoaXRlbS5zdGlja3kgPT09ICdsZWZ0JyA/ICdjb3JuZXItcmlnaHQtdXAnIDogJ3VubG9jaycpO1xyXG5cdFx0bG9ja1NwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgaXRlbS5zdGlja3kgPyBgUGlubmVkIHRvICR7aXRlbS5zdGlja3kgPT09ICdyaWdodCcgPyAnRW5kJyA6ICdTdGFydCd9YCA6ICdVbmxvY2tlZCAtIGNsaWNrIHRvIHBpbiB0byBlbmQnKTtcclxuXHRcdGxvY2tTcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0dGhpcy50b2dnbGVMb2NrKGl0ZW0sIGxvY2tTcGFuLCBpbmRleCwgdG90YWxJdGVtcywgcm93c0NvbnRhaW5lciwgc2V0dGluZ3MpO1xyXG5cdFx0fSk7XHJcblx0XHRzZXRJY29uKGxvY2tTcGFuLCBsb2NrSWNvbik7XHJcblx0XHRpZiAoaXRlbS5zdGlja3kpIHtcclxuXHRcdFx0bG9ja1NwYW4uYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItbG9ja2VkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRGVsZXRlIGljb24gZm9yIGN1c3RvbSBpdGVtcywgdmlzaWJpbGl0eSBpY29uIGZvciBleGlzdGluZyBpdGVtc1xyXG5cdFx0Y29uc3QgdmlzaWJpbGl0eVNwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXZpc2liaWxpdHknKTtcclxuXHRcdGlmIChpdGVtLnR5cGUgPT09ICdjdXN0b20nKSB7XHJcblx0XHRcdC8vIEN1c3RvbSBpdGVtczogc2hvdyB0cmFzaCBpY29uIChyZWQvd2FybmluZylcclxuXHRcdFx0dmlzaWJpbGl0eVNwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0RlbGV0ZSBpdGVtJyk7XHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLmFkZENsYXNzKCdtb2Qtd2FybmluZycpO1xyXG5cdFx0XHRzZXRDc3NQcm9wcyh2aXNpYmlsaXR5U3BhbiwgeyBjb2xvcjogJ3ZhcigtLXRleHQtZXJyb3IpJyB9KTtcclxuXHRcdFx0dmlzaWJpbGl0eVNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0dm9pZCB0aGlzLnJlbW92ZUl0ZW0ocm93c0NvbnRhaW5lciwgaXRlbSwgc2V0dGluZ3MpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0c2V0SWNvbih2aXNpYmlsaXR5U3BhbiwgJ3RyYXNoLTInKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIEV4aXN0aW5nIGl0ZW1zOiBzaG93IHZpc2liaWxpdHkgdG9nZ2xlXHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGl0ZW0uaGlkZGVuID8gJ0hpZGRlbiAtIGNsaWNrIHRvIHNob3cnIDogJ1Zpc2libGUgLSBjbGljayB0byBoaWRlJyk7XHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMudG9nZ2xlVmlzaWJpbGl0eShpdGVtLCB2aXNpYmlsaXR5U3BhbiwgZW50cnkpO1xyXG5cdFx0XHRcdC8vIHRvZ2dsZVZpc2liaWxpdHkgYWxyZWFkeSBjYWxscyBzYXZlU2V0dGluZ3MoKVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0c2V0SWNvbih2aXNpYmlsaXR5U3BhbiwgaXRlbS5oaWRkZW4gPyAnZXllLW9mZicgOiAnZXllJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUb2dnbGUgbG9jayBwb3NpdGlvbiBiYXNlZCBvbiBjdXJyZW50IHBvc2l0aW9uXHJcblx0ICovXHJcblx0cHJpdmF0ZSB0b2dnbGVMb2NrKFxyXG5cdFx0aXRlbTogU3RhdHVzQmFySXRlbSxcclxuXHRcdGxvY2tTcGFuOiBIVE1MRWxlbWVudCxcclxuXHRcdGN1cnJlbnRJbmRleDogbnVtYmVyLFxyXG5cdFx0dG90YWxJdGVtczogbnVtYmVyLFxyXG5cdFx0cm93c0NvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcblx0XHRzZXR0aW5nczogVUlTZXR0aW5nc1xyXG5cdCk6IHZvaWQge1xyXG5cdFx0Ly8gQ3ljbGU6IGZhbHNlIC0+ICdyaWdodCcgKEVuZCkgLT4gJ2xlZnQnIChTdGFydCkgLT4gZmFsc2UgKFVubG9jaylcclxuXHRcdGlmICghaXRlbS5zdGlja3kpIHtcclxuXHRcdFx0aXRlbS5zdGlja3kgPSAncmlnaHQnO1xyXG5cdFx0XHQvLyBNb3ZlIHRvIGVuZCBvZiBhcnJheVxyXG5cdFx0XHRjb25zdCBvbGRJbmRleCA9IHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLmZpbmRJbmRleChpID0+IGkuaWQgPT09IGl0ZW0uaWQpO1xyXG5cdFx0XHRpZiAob2xkSW5kZXggIT09IC0xKSB7XHJcblx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcywgb2xkSW5kZXgsIHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLmxlbmd0aCAtIDEpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKGl0ZW0uc3RpY2t5ID09PSAncmlnaHQnKSB7XHJcblx0XHRcdGl0ZW0uc3RpY2t5ID0gJ2xlZnQnO1xyXG5cdFx0XHQvLyBNb3ZlIHRvIHN0YXJ0IG9mIGFycmF5XHJcblx0XHRcdGNvbnN0IG9sZEluZGV4ID0gc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMuZmluZEluZGV4KGkgPT4gaS5pZCA9PT0gaXRlbS5pZCk7XHJcblx0XHRcdGlmIChvbGRJbmRleCAhPT0gLTEpIHtcclxuXHRcdFx0XHRhcnJheU1vdmVNdXRhYmxlKHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLCBvbGRJbmRleCwgMCk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGl0ZW0uc3RpY2t5ID0gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVXBkYXRlIHN0YXR1cyBiYXIgb3JkZXJcclxuXHRcdHRoaXMucGx1Z2luLnN0YXR1c0Jhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHJcblx0XHQvLyBGdWxsIHJlLXJlbmRlciBvZiB0aGUgc2V0dGluZ3MgdGFiIHRvIHJlZmxlY3QgbmV3IG9yZGVyIGluIHRoZSBVSSBsaXN0XHJcblx0XHRpZiAodGhpcy5jb250YWluZXIpIHtcclxuXHRcdFx0dGhpcy5yZW5kZXIodGhpcy5jb250YWluZXIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVG9nZ2xlIHZpc2liaWxpdHkgKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcclxuXHQgKi9cclxuXHRwcml2YXRlIHRvZ2dsZVZpc2liaWxpdHkoaXRlbTogU3RhdHVzQmFySXRlbSwgdmlzaWJpbGl0eVNwYW46IEhUTUxFbGVtZW50LCBlbnRyeTogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGl0ZW0uaGlkZGVuID0gIWl0ZW0uaGlkZGVuO1xyXG5cclxuXHRcdGlmIChpdGVtLmhpZGRlbikge1xyXG5cdFx0XHRlbnRyeS5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oaWRkZW4nKTtcclxuXHRcdFx0c2V0SWNvbih2aXNpYmlsaXR5U3BhbiwgJ2V5ZS1vZmYnKTtcclxuXHRcdFx0dmlzaWJpbGl0eVNwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0hpZGRlbiAtIGNsaWNrIHRvIHNob3cnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGVudHJ5LnJlbW92ZUNsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWhpZGRlbicpO1xyXG5cdFx0XHRzZXRJY29uKHZpc2liaWxpdHlTcGFuLCAnZXllJyk7XHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdWaXNpYmxlIC0gY2xpY2sgdG8gaGlkZScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMucGx1Z2luLnN0YXR1c0Jhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTsgLy8gU2F2ZSB0aGUgaGlkZGVuIHN0YXRlXHJcblx0fVxyXG5cclxuXHJcblx0LyoqXHJcblx0ICogUmVtb3ZlIGl0ZW0gKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIHJlbW92ZUl0ZW0ocm93c0NvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGl0ZW06IFN0YXR1c0Jhckl0ZW0sIHNldHRpbmdzOiBVSVNldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBlbnRyeSA9IHJvd3NDb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtdWktdHdlYWtlci1pZD1cIiR7aXRlbS5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGlmIChlbnRyeSkge1xyXG5cdFx0XHRyb3dzQ29udGFpbmVyLnJlbW92ZUNoaWxkKGVudHJ5KTtcclxuXHRcdH1cclxuXHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW1vdmVJdGVtKGl0ZW0pO1xyXG5cclxuXHRcdC8vIFBvc2l0aW9uIGlzIGltcGxpY2l0IGluIGFycmF5IG9yZGVyIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cclxuXHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZSBtb3VzZSBkb3duIGZvciBkcmFnZ2luZyAoZXhhY3RseSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaGFuZGxlTW91c2VEb3duKFxyXG5cdFx0ZXZlbnQ6IE1vdXNlRXZlbnQsXHJcblx0XHRyb3dzQ29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdGl0ZW06IFN0YXR1c0Jhckl0ZW0sXHJcblx0XHRzZXR0aW5nczogVUlTZXR0aW5nc1xyXG5cdCk6IHZvaWQge1xyXG5cdFx0aWYgKGRyYWdnaW5nKSByZXR1cm47XHJcblx0XHRkcmFnZ2luZyA9IHRydWU7XHJcblxyXG5cdFx0Y29uc3QgZW50cnkgPSByb3dzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXVpLXR3ZWFrZXItaWQ9XCIke2l0ZW0uaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRpZiAoIWVudHJ5KSByZXR1cm47XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGNsb25lXHJcblx0XHRjb25zdCBzdGF0aW9uYXJ5Um93ID0gZW50cnk7XHJcblx0XHRzdGF0aW9uYXJ5Um93LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWNsb25lJyk7XHJcblxyXG5cdFx0Y29uc3QgbW92YWJsZVJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0bW92YWJsZVJvdy5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdycpO1xyXG5cdFx0bW92YWJsZVJvdy5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1kcmFnJyk7XHJcblx0XHQvLyBFbnN1cmUgZ3JpZCBzdHJ1Y3R1cmUgaXMgbWFpbnRhaW5lZFxyXG5cdFx0c2V0Q3NzUHJvcHMobW92YWJsZVJvdywge1xyXG5cdFx0XHRkaXNwbGF5OiAnZ3JpZCcsXHJcblx0XHRcdGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICcxLjI1ZW0gMC41ZnIgMC44ZnIgMmVtIDJlbSAyZW0gMmVtIDJlbSAyZW0nXHJcblx0XHR9KTtcclxuXHRcdGlmIChpdGVtLmhpZGRlbikgbW92YWJsZVJvdy5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oaWRkZW4nKTtcclxuXHRcdGlmIChpdGVtLnR5cGUgPT09ICdleGlzdGluZycpIHtcclxuXHRcdFx0Y29uc3Qgc3RhdHVzQmFyQ29udGFpbmVyID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IHN0YXR1c0Jhcj86IHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9IH0pLnN0YXR1c0Jhcj8uY29udGFpbmVyRWw7XHJcblx0XHRcdGNvbnN0IGFjdHVhbEVsZW1lbnQgPSBzdGF0dXNCYXJDb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXVpLXR3ZWFrZXItaWQ9XCIke2l0ZW0uaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmICghYWN0dWFsRWxlbWVudCkgbW92YWJsZVJvdy5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1kaXNhYmxlZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEdldCB0aGUgd3JhcHBlciBjb250YWluZXJcclxuXHRcdGNvbnN0IHdyYXBwZXIgPSByb3dzQ29udGFpbmVyLmNsb3Nlc3QoJy51aS10d2Vha2VyLXN0YXR1cy1iYXItcm93cy13cmFwcGVyJykgfHxcclxuXHRcdFx0cm93c0NvbnRhaW5lci5wYXJlbnRFbGVtZW50IHx8XHJcblx0XHRcdHJvd3NDb250YWluZXI7XHJcblx0XHR3cmFwcGVyLmFwcGVuZENoaWxkKG1vdmFibGVSb3cpO1xyXG5cclxuXHRcdC8vIEdldCBwb3NpdGlvbiByZWxhdGl2ZSB0byB3cmFwcGVyIChleGFjdGx5IGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRjb25zdCBjb250YWluZXJYID0gd3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG5cdFx0Y29uc3QgY29udGFpbmVyWSA9IHdyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG5cclxuXHRcdC8vIFBvc2l0aW9uIG1vdmFibGUgcm93IChleGFjdGx5IGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRjb25zdCBzdGF0aW9uYXJ5UmVjdCA9IHN0YXRpb25hcnlSb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHRzZXRDc3NQcm9wcyhtb3ZhYmxlUm93LCB7XHJcblx0XHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG5cdFx0XHRsZWZ0OiAoc3RhdGlvbmFyeVJlY3QubGVmdCAtIGNvbnRhaW5lclgpICsgJ3B4JyxcclxuXHRcdFx0dG9wOiAoc3RhdGlvbmFyeVJlY3QudG9wIC0gY29udGFpbmVyWSkgKyAncHgnLFxyXG5cdFx0XHR3aWR0aDogc3RhdGlvbmFyeVJvdy5vZmZzZXRXaWR0aCArICdweCdcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBzaW1wbGlmaWVkIGRyYWcgcHJldmlldyAoZG9uJ3QgY2xvbmUgY29tcGxleCBlbGVtZW50cyB0byBhdm9pZCBicmVha2luZylcclxuXHRcdC8vIEp1c3Qgc2hvdyB0aXRsZSBhbmQgcHJldmlldywgc2tpcCBpbnRlcmFjdGl2ZSBlbGVtZW50c1xyXG5cdFx0bW92YWJsZVJvdy5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWhhbmRsZScpO1xyXG5cdFx0Y29uc3QgZHJhZ1RpdGxlID0gbW92YWJsZVJvdy5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXRpdGxlJyk7XHJcblx0XHRkcmFnVGl0bGUudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7XHJcblx0XHRjb25zdCBkcmFnUHJldmlldyA9IG1vdmFibGVSb3cuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1wcmV2aWV3Jyk7XHJcblx0XHQvLyBGb3IgZXhpc3RpbmcgaXRlbXMsIHRyeSB0byBjbG9uZSBwcmV2aWV3IGlmIGF2YWlsYWJsZVxyXG5cdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2V4aXN0aW5nJykge1xyXG5cdFx0XHRjb25zdCBzdGF0dXNCYXJDb250YWluZXIgPSAodGhpcy5wbHVnaW4uYXBwIGFzIHsgc3RhdHVzQmFyPzogeyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH0gfSkuc3RhdHVzQmFyPy5jb250YWluZXJFbDtcclxuXHRcdFx0Y29uc3QgYWN0dWFsRWxlbWVudCA9IHN0YXR1c0JhckNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcihgW2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkPVwiJHtpdGVtLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRpZiAoYWN0dWFsRWxlbWVudCkge1xyXG5cdFx0XHRcdGNvbnN0IGNsb25lZCA9IGFjdHVhbEVsZW1lbnQuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdC8vIFJlbW92ZSB0b29sdGlwIGF0dHJpYnV0ZXMgZnJvbSBjbG9uZWQgZWxlbWVudFxyXG5cdFx0XHRcdGNsb25lZC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTtcclxuXHRcdFx0XHRjbG9uZWQucmVtb3ZlQXR0cmlidXRlKCd0aXRsZScpO1xyXG5cdFx0XHRcdC8vIEFsc28gcmVtb3ZlIGZyb20gYW55IGNoaWxkcmVuXHJcblx0XHRcdFx0Y2xvbmVkLnF1ZXJ5U2VsZWN0b3JBbGwoJ1thcmlhLWxhYmVsXSwgW3RpdGxlXScpLmZvckVhY2goZWwgPT4ge1xyXG5cdFx0XHRcdFx0ZWwucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XHJcblx0XHRcdFx0XHRlbC5yZW1vdmVBdHRyaWJ1dGUoJ3RpdGxlJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0ZHJhZ1ByZXZpZXcuYXBwZW5kQ2hpbGQoY2xvbmVkKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmIChpdGVtLmljb24pIHtcclxuXHRcdFx0Y29uc3QgcHJldmlld0ljb24gPSBkcmFnUHJldmlldy5jcmVhdGVTcGFuKCdzdGF0dXMtYmFyLWl0ZW0gY2xpY2thYmxlLWljb24nKTtcclxuXHRcdFx0c2V0SWNvbihwcmV2aWV3SWNvbiwgaXRlbS5pY29uKTtcclxuXHRcdFx0Ly8gUmVtb3ZlIGFueSB0b29sdGlwIGF0dHJpYnV0ZXMgZnJvbSBkcmFnIHByZXZpZXdcclxuXHRcdFx0cHJldmlld0ljb24ucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XHJcblx0XHRcdHByZXZpZXdJY29uLnJlbW92ZUF0dHJpYnV0ZSgndGl0bGUnKTtcclxuXHRcdFx0aWYgKGl0ZW0uY29sb3IgJiYgaXRlbS5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMocHJldmlld0ljb24sIHsgY29sb3I6IGl0ZW0uY29sb3IgfSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdC8vIEFkZCBlbXB0eSBzcGFucyBmb3IgdGhlIGljb24gY29sdW1ucyB0byBtYWludGFpbiBncmlkIHN0cnVjdHVyZVxyXG5cdFx0bW92YWJsZVJvdy5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXJlc2V0LWNvbG9yJyk7XHJcblx0XHRtb3ZhYmxlUm93LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctY29sb3ItcGlja2VyJyk7XHJcblx0XHQvLyBEZXZpY2UgbW9kZSBpY29uIHJlbW92ZWQgLSBzdGF0dXMgYmFyIG5vdCB2aXNpYmxlIG9uIG1vYmlsZSwgc28gbm8gbmVlZCBmb3IgZGV2aWNlIGluZGljYXRvcnNcclxuXHRcdG1vdmFibGVSb3cuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1tZC1vbmx5Jyk7XHJcblx0XHRjb25zdCBkcmFnTG9jayA9IG1vdmFibGVSb3cuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1sb2NrJyk7XHJcblx0XHRjb25zdCBsb2NrSWNvbiA9IGl0ZW0uc3RpY2t5ID09PSAncmlnaHQnID8gJ2Nvcm5lci1yaWdodC1kb3duJyA6IChpdGVtLnN0aWNreSA9PT0gJ2xlZnQnID8gJ2Nvcm5lci1yaWdodC11cCcgOiAndW5sb2NrJyk7XHJcblx0XHRzZXRJY29uKGRyYWdMb2NrLCBsb2NrSWNvbik7XHJcblx0XHRjb25zdCBkcmFnVmlzaWJpbGl0eSA9IG1vdmFibGVSb3cuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy12aXNpYmlsaXR5Jyk7XHJcblx0XHRzZXRJY29uKGRyYWdWaXNpYmlsaXR5LCBpdGVtLmhpZGRlbiA/ICdleWUtb2ZmJyA6ICdleWUnKTtcclxuXHJcblx0XHQvLyBDYWxjdWxhdGUgb2Zmc2V0cyAoZXhhY3RseSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdFx0Ly8gRmlyc3QgZ2V0IHRoZSBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgbW92YWJsZVJvd1xyXG5cdFx0bGV0IG9mZnNldFggPSBldmVudC5jbGllbnRYIC0gbW92YWJsZVJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG5cdFx0bGV0IG9mZnNldFkgPSBldmVudC5jbGllbnRZIC0gbW92YWJsZVJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcblx0XHQvLyBUaGVuIGFkZCBjb250YWluZXIgb2Zmc2V0IChleGFjdGx5IGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRvZmZzZXRYID0gb2Zmc2V0WCArIGNvbnRhaW5lclg7XHJcblx0XHRvZmZzZXRZID0gb2Zmc2V0WSArIGNvbnRhaW5lclk7XHJcblx0XHRsZXQgaW5kZXggPSBBcnJheS5mcm9tKHJvd3NDb250YWluZXIuY2hpbGRyZW4pLmluZGV4T2Yoc3RhdGlvbmFyeVJvdyk7XHJcblxyXG5cdFx0Ly8gSGFuZGxlIG1vdXNlIG1vdmUgKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcclxuXHRcdGNvbnN0IGhhbmRsZU1vdXNlTW92ZSA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdC8vIFVwZGF0ZSBwb3NpdGlvbiAoZXhhY3RseSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdFx0XHQvLyBvZmZzZXRYL29mZnNldFkgYWxyZWFkeSBpbmNsdWRlIGNvbnRhaW5lclgvY29udGFpbmVyWVxyXG5cdFx0XHRzZXRDc3NQcm9wcyhtb3ZhYmxlUm93LCB7XHJcblx0XHRcdFx0bGVmdDogKGUuY2xpZW50WCAtIG9mZnNldFgpICsgJ3B4JyxcclxuXHRcdFx0XHR0b3A6IChlLmNsaWVudFkgLSBvZmZzZXRZKSArICdweCdcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBDYWxjdWxhdGUgZGlzdGFuY2UgKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRcdGNvbnN0IGRpc3QgPSBtb3ZhYmxlUm93LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIHN0YXRpb25hcnlSb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG5cclxuXHRcdFx0Ly8gSWYgbW92ZWQgZmFyIGVub3VnaCwgY2hhbmdlIHBvc2l0aW9uIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdFx0XHRpZiAoTWF0aC5hYnMoZGlzdCkgPiBzdGF0aW9uYXJ5Um93Lm9mZnNldEhlaWdodCAqIDAuNzUpIHtcclxuXHRcdFx0XHRjb25zdCBkaXIgPSBkaXN0IC8gTWF0aC5hYnMoZGlzdCk7XHJcblx0XHRcdFx0Y29uc3QgbmV3SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihpbmRleCArIGRpciwgcm93c0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggLSAxKSk7XHJcblx0XHRcdFx0aWYgKG5ld0luZGV4ICE9PSBpbmRleCkge1xyXG5cdFx0XHRcdFx0Ly8gTW92ZSBpbiBET00gKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRcdFx0XHRyb3dzQ29udGFpbmVyLnJlbW92ZUNoaWxkKHN0YXRpb25hcnlSb3cpO1xyXG5cdFx0XHRcdFx0aWYgKG5ld0luZGV4IDwgcm93c0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0cm93c0NvbnRhaW5lci5pbnNlcnRCZWZvcmUoc3RhdGlvbmFyeVJvdywgcm93c0NvbnRhaW5lci5jaGlsZHJlbltuZXdJbmRleF0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0cm93c0NvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0aW9uYXJ5Um93KTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBVcGRhdGUgYXJyYXkgb3JkZXIgKGRvbid0IHNhdmUgZHVyaW5nIGRyYWcgLSB3YWl0IGZvciBtb3VzZSB1cClcclxuXHRcdFx0XHRcdGlmIChzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcykge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBvbGRJbmRleCA9IHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLmZpbmRJbmRleCgoaTogU3RhdHVzQmFySXRlbSkgPT4gaS5pZCA9PT0gaXRlbS5pZCk7XHJcblx0XHRcdFx0XHRcdGlmIChvbGRJbmRleCAhPT0gLTEgJiYgb2xkSW5kZXggIT09IG5ld0luZGV4KSB7XHJcblx0XHRcdFx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcywgb2xkSW5kZXgsIG5ld0luZGV4KTtcclxuXHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIGFjdHVhbCBzdGF0dXMgYmFyIG9yZGVyIGltbWVkaWF0ZWx5ICh2aXN1YWwgZmVlZGJhY2spXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc3RhdHVzQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdC8vIERvbid0IHNhdmVTZXR0aW5ncyBkdXJpbmcgZHJhZyAtIHdhaXQgZm9yIG1vdXNlIHVwIHRvIHNhdmUgcG9zaXRpb25cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGluZGV4ID0gbmV3SW5kZXg7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIEhhbmRsZSBtb3VzZSB1cFxyXG5cdFx0Y29uc3QgaGFuZGxlTW91c2VVcCA9ICgpID0+IHtcclxuXHRcdFx0Ly8gQ2xlYW4gdXAgZHJhZyB2aXN1YWxzXHJcblx0XHRcdHN0YXRpb25hcnlSb3cucmVtb3ZlQ2xhc3MoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctY2xvbmUnKTtcclxuXHRcdFx0aWYgKG1vdmFibGVSb3cucGFyZW50RWxlbWVudCA9PT0gd3JhcHBlcikge1xyXG5cdFx0XHRcdHdyYXBwZXIucmVtb3ZlQ2hpbGQobW92YWJsZVJvdyk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZHJhZ2dpbmcgPSBmYWxzZTtcclxuXHRcdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XHJcblx0XHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlTW91c2VVcCk7XHJcblxyXG5cdFx0XHQvLyBVcGRhdGUgc3RhdHVzIGJhciBvcmRlciBhbmQgc2F2ZSBwb3NpdGlvbiBhZnRlciBkcmFnIGNvbXBsZXRlc1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdH07XHJcblxyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZU1vdXNlVXApO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEV4cGxvcmVyIFRhYiAtIEN1c3RvbSBjb21tYW5kIGJ1dHRvbnMgZm9yIGZpbGUgZXhwbG9yZXIgbmF2aWdhdGlvbiBhcmVhXHJcbiAqIEJhc2VkIG9uIFRhYkJhclRhYiwgYnV0IGZvciBleHBsb3JlciBidXR0b25zIHdpdGggbmF0aXZlIENTUyBjbGFzc2VzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVGFiUmVuZGVyZXIgfSBmcm9tICcuLi9jb21tb24vVGFiUmVuZGVyZXInO1xyXG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0JztcclxuaW1wb3J0IHsgQ29tbWFuZEljb25QYWlyLCBFeHBsb3JlckJ1dHRvbkl0ZW0gfSBmcm9tICcuLi8uLi90eXBlcyc7XHJcbmltcG9ydCB7IGNob29zZU5ld0NvbW1hbmQgfSBmcm9tICcuLi8uLi91dGlscy9jaG9vc2VDb21tYW5kJztcclxuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vLi4vdXRpbHMvY3NzVXRpbHMnO1xyXG5cclxuLy8gU2ltcGxlIGFycmF5IG1vdmUgdXRpbGl0eVxyXG5mdW5jdGlvbiBhcnJheU1vdmVNdXRhYmxlPFQ+KGFycmF5OiBUW10sIGZyb206IG51bWJlciwgdG86IG51bWJlcik6IHZvaWQge1xyXG5cdGNvbnN0IGl0ZW0gPSBhcnJheVtmcm9tXTtcclxuXHRhcnJheS5zcGxpY2UoZnJvbSwgMSk7XHJcblx0YXJyYXkuc3BsaWNlKHRvLCAwLCBpdGVtKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEV4cGxvcmVyVGFiIGV4dGVuZHMgVGFiUmVuZGVyZXIge1xyXG5cdHByaXZhdGUgZXhwYW5kZWRTdGF0ZXMgPSBuZXcgTWFwPHN0cmluZywgYm9vbGVhbj4oKTtcclxuXHJcblx0cmVuZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLmdldFNldHRpbmdzKCk7XHJcblxyXG5cdFx0Ly8gRW5zdXJlIGV4cGxvcmVyQ29tbWFuZHMgZXhpc3RzXHJcblx0XHRpZiAoIXNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMpIHtcclxuXHRcdFx0c2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcyA9IFtdO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEVuc3VyZSBleHBsb3JlckJ1dHRvbkl0ZW1zIGV4aXN0c1xyXG5cdFx0aWYgKCFzZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zKSB7XHJcblx0XHRcdHNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMgPSBbXTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBFbnN1cmUgbmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnMgZXhpc3RzXHJcblx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzKSB7XHJcblx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzID0ge1xyXG5cdFx0XHRcdG5ld05vdGU6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRuZXdGb2xkZXI6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRzb3J0T3JkZXI6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRhdXRvUmV2ZWFsOiB1bmRlZmluZWQsXHJcblx0XHRcdFx0Y29sbGFwc2VBbGw6IHVuZGVmaW5lZCxcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBFbnN1cmUgbmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucyBleGlzdHNcclxuXHRcdGlmICghc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucykge1xyXG5cdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zID0ge1xyXG5cdFx0XHRcdG5ld05vdGU6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRuZXdGb2xkZXI6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRzb3J0T3JkZXI6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRhdXRvUmV2ZWFsOiB1bmRlZmluZWQsXHJcblx0XHRcdFx0Y29sbGFwc2VBbGw6IHVuZGVmaW5lZCxcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEb24ndCB0cmlnZ2VyIGNvbnNvbGlkYXRpb24gb24gcmVuZGVyIC0gb25seSB3aGVuIHNldHRpbmdzIGFjdHVhbGx5IGNoYW5nZVxyXG5cdFx0Ly8gVGhpcyBwcmV2ZW50cyBmbGlja2VyaW5nIHdoZW4gb3BlbmluZyBzZXR0aW5nc1xyXG5cclxuXHRcdC8vIFVuaWZpZWQgbGlzdCBvZiBhbGwgYnV0dG9ucyAobmF0aXZlLCBleHRlcm5hbCwgY3VzdG9tKVxyXG5cdFx0c2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG5cdFx0XHR0aGlzLnJlbmRlckJ1dHRvbkl0ZW0oY29udGFpbmVyLCBpdGVtLCBpbmRleCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgY29tbWFuZCBidXR0b24gKGF0IHRoZSBlbmQpXHJcblx0XHRpZiAoc2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdC8vIEFkZCBzZXBhcmF0b3JcclxuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdocicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGFkZEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcclxuXHRcdGFkZEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdBZGQgY29tbWFuZCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ0FkZCBhIG5ldyBjb21tYW5kIGJ1dHRvbiB0byB0aGUgZmlsZSBleHBsb3JlciBuYXZpZ2F0aW9uIGFyZWEnKVxyXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gQWRkIGljb24gdG8gdGhlIGJ1dHRvblxyXG5cdFx0XHRcdFx0Y29uc3QgYnV0dG9uRWwgPSBidXR0b24uYnV0dG9uRWw7XHJcblx0XHRcdFx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gYnV0dG9uRWwuY3JlYXRlU3Bhbih7IGNsczogJ3VpLXR3ZWFrZXItYWRkLWljb24nIH0pO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihpY29uQ29udGFpbmVyLCAnbHVjaWRlLWltYWdlLXBsdXMnKTtcclxuXHRcdFx0XHRcdGJ1dHRvbkVsLmluc2VydEJlZm9yZShpY29uQ29udGFpbmVyLCBidXR0b25FbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdBZGQgY29tbWFuZCcpLnNldEN0YSgpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhaXIgPSBhd2FpdCBjaG9vc2VOZXdDb21tYW5kKHRoaXMucGx1Z2luKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFB1c2ggdG8gZXhwbG9yZXJDb21tYW5kc1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcy5wdXNoKHBhaXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIGNvcnJlc3BvbmRpbmcgRXhwbG9yZXJCdXR0b25JdGVtXHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBpdGVtOiBFeHBsb3JlckJ1dHRvbkl0ZW0gPSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBgY3VzdG9tLSR7cGFpci5pZH1gLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiBwYWlyLm5hbWUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdGFyaWFMYWJlbDogcGFpci5uYW1lLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnY3VzdG9tJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZElkOiBwYWlyLmlkLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpY29uOiBwYWlyLmljb24sXHJcblx0XHRcdFx0XHRcdFx0XHRcdGRpc3BsYXlOYW1lOiBwYWlyLmRpc3BsYXlOYW1lLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRtb2RlOiBwYWlyLm1vZGUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbG9yOiBwYWlyLmNvbG9yLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzaG93T25GaWxlVHlwZXM6IHBhaXIuc2hvd09uRmlsZVR5cGVzLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRoaWRlT25GaWxlVHlwZXM6IHBhaXIuaGlkZU9uRmlsZVR5cGVzLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0b2dnbGVJY29uOiBwYWlyLnRvZ2dsZUljb24sXHJcblx0XHRcdFx0XHRcdFx0XHRcdHVzZUFjdGl2ZUNsYXNzOiBwYWlyLnVzZUFjdGl2ZUNsYXNzLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRoaWRkZW46IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMucHVzaChpdGVtKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBVc2VyIGNhbmNlbGxlZFxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQWRkIHdhcm5pbmcgbWVzc2FnZSAobGlrZSBDb21tYW5kZXIgcGx1Z2luKVxyXG5cdFx0Y29uc3Qgd2FybmluZ0RpdiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xyXG5cdFx0XHRjbHM6ICdjYWxsb3V0JyxcclxuXHRcdFx0YXR0cjogeyAnZGF0YS1jYWxsb3V0JzogJ3dhcm5pbmcnIH1cclxuXHRcdH0pO1xyXG5cdFx0d2FybmluZ0Rpdi5jcmVhdGVFbCgncCcsIHtcclxuXHRcdFx0dGV4dDogJ1doZW4gY2xpY2tpbmcgb24gYSBjb21tYW5kIGluIHRoZSBleHBsb3JlciwgdGhlIGV4cGxvcmVyIHZpZXcgd2lsbCBiZWNvbWUgZm9jdXNlZC4gVGhpcyBtaWdodCBpbnRlcmZlcmUgd2l0aCBjb21tYW5kcyB0aGF0IGFyZSBzdXBwb3NlZCB0byBiZSBleGVjdXRlZCBvbiBhbiBhY3RpdmUgZmlsZSBvciBleHBsb3Jlci4nXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyTmF0aXZlQnV0dG9uQ29udHJvbHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgbWFpbkNvbnRhaW5lcj86IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHQvLyBDbGVhciBjb250YWluZXIgaWYgcmUtcmVuZGVyaW5nXHJcblx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xyXG5cdFx0Y29uc3QgZ3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ05hdGl2ZSBleHBsb3JlciBidXR0b25zJywgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHQvLyBVc2UgbWFpbkNvbnRhaW5lciBmb3Igc2Nyb2xsIHBvc2l0aW9uIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UgdXNlIGNvbnRhaW5lclxyXG5cdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gbWFpbkNvbnRhaW5lciB8fCBjb250YWluZXI7XHJcblxyXG5cdFx0Ly8gSGVscGVyIHRvIHJlbmRlciBhIG5hdGl2ZSBidXR0b24gY29udHJvbFxyXG5cdFx0Y29uc3QgcmVuZGVyTmF0aXZlQnV0dG9uID0gKFxyXG5cdFx0XHRuYW1lOiBzdHJpbmcsXHJcblx0XHRcdHNldHRpbmdLZXk6ICduZXdOb3RlQnV0dG9uJyB8ICduZXdGb2xkZXJCdXR0b24nIHwgJ3NvcnRPcmRlckJ1dHRvbicgfCAnYXV0b1JldmVhbEJ1dHRvbicgfCAnY29sbGFwc2VBbGxCdXR0b24nLFxyXG5cdFx0XHRjb2xvcktleTogJ25ld05vdGUnIHwgJ25ld0ZvbGRlcicgfCAnc29ydE9yZGVyJyB8ICdhdXRvUmV2ZWFsJyB8ICdjb2xsYXBzZUFsbCdcclxuXHRcdCkgPT4ge1xyXG5cdFx0XHRjb25zdCBpc0hpZGRlbiA9IHNldHRpbmdzW3NldHRpbmdLZXldO1xyXG5cdFx0XHRjb25zdCBjb2xvciA9IHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzPy5bY29sb3JLZXldO1xyXG5cdFx0XHRjb25zdCBpY29uT3ZlcnJpZGUgPSBzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zPy5bY29sb3JLZXldO1xyXG5cclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKG5hbWUpXHJcblx0XHRcdFx0XHQuc2V0RGVzYygnJylcclxuXHRcdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHRcdC8vIEV5ZWJhbGwgdG9nZ2xlIC0gZXllIHdoZW4gdmlzaWJsZSwgZXllLW9mZiB3aGVuIGhpZGRlblxyXG5cdFx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBidXR0b24uZXh0cmFTZXR0aW5nc0VsO1xyXG5cdFx0XHRcdFx0XHRzZXRJY29uKGljb25FbCwgaXNIaWRkZW4gPyAnZXllLW9mZicgOiAnZXllJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKGlzSGlkZGVuID8gJ1Nob3cgYnV0dG9uJyA6ICdIaWRlIGJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVhZCBjdXJyZW50IHZhbHVlIGZyb20gc2V0dGluZ3MgaW5zdGVhZCBvZiB1c2luZyBjYXB0dXJlZCBpc0hpZGRlblxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlID0gc2V0dGluZ3Nbc2V0dGluZ0tleV07XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5nc1tzZXR0aW5nS2V5XSA9ICFjdXJyZW50VmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGljb24gYW5kIHRvb2x0aXAgaW4gcGxhY2UgaW5zdGVhZCBvZiBmdWxsIHJlLXJlbmRlclxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3SXNIaWRkZW4gPSBzZXR0aW5nc1tzZXR0aW5nS2V5XTtcclxuXHRcdFx0XHRcdFx0XHRcdHNldEljb24oaWNvbkVsLCBuZXdJc0hpZGRlbiA/ICdleWUtb2ZmJyA6ICdleWUnKTtcclxuXHRcdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKG5ld0lzSGlkZGVuID8gJ1Nob3cgYnV0dG9uJyA6ICdIaWRlIGJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gQ29sb3IgcGlja2VyIChvbmx5IHNob3cgaWYgY29sb3IgaXMgc2V0LCB3aXRoIHJlc2V0IGJ1dHRvbilcclxuXHRcdFx0XHRpZiAoY29sb3IpIHtcclxuXHRcdFx0XHRcdHNldHRpbmcuYWRkQ29sb3JQaWNrZXIoKGNvbG9yUGlja2VyKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbG9yUGlja2VyLnNldFZhbHVlKGNvbG9yKTtcclxuXHJcblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xFbCA9IHNldHRpbmcuY29udHJvbEVsO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBhbmQgc2Nyb2xsIGp1bXBpbmcgb24gY29sb3IgcGlja2VyIGNsaWNrc1xyXG5cdFx0XHRcdFx0XHRjb250cm9sRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBBZGQgZXZlbnQgaGFuZGxlciB0byB0aGUgYWN0dWFsIGNvbG9yIGlucHV0IGVsZW1lbnRcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29sb3JJbnB1dCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiY29sb3JcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdGlmIChjb2xvcklucHV0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb2xvcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSwgMCk7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvIGRlZmF1bHQgY29sb3InIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFByZXZlbnQgc2Nyb2xsIGp1bXBpbmdcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycyA9IHt9O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzW2NvbG9yS2V5XSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQXBwbHkgY29sb3JzIHRvIG5hdGl2ZSBidXR0b25zIChyZW1vdmUgY29sb3IpXHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8uYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciBqdXN0IHRoZSBuYXRpdmUgYnV0dG9ucyBzZWN0aW9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyTmF0aXZlQnV0dG9uQ29udHJvbHMoY29udGFpbmVyLCBtYWluQ29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyXHJcblx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoY29sb3JQaWNrZXJFbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29sb3JQaWNrZXJFbCk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbnRyb2xFbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIDApO1xyXG5cclxuXHRcdFx0XHRcdFx0Y29sb3JQaWNrZXIub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycyA9IHt9O1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnNbY29sb3JLZXldID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQXBwbHkgY29sb3JzIHRvIG5hdGl2ZSBidXR0b25zXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFNob3cgYnV0dG9uIHRvIGFkZCBjb2xvciBwaWNrZXJcclxuXHRcdFx0XHRcdHNldHRpbmcuYWRkQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoJ1NldCBjb2xvci4uLicpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFByZXZlbnQgc2Nyb2xsIGp1bXBpbmdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdC8vIEluaXRpYWxpemUgY29sb3IgdG8gYmxhY2sgdG8gc2hvdyBwaWNrZXJcclxuXHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycyA9IHt9O1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9yc1tjb2xvcktleV0gPSAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEFwcGx5IGNvbG9ycyB0byBuYXRpdmUgYnV0dG9uc1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciBqdXN0IHRoZSBuYXRpdmUgYnV0dG9ucyBzZWN0aW9uXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlck5hdGl2ZUJ1dHRvbkNvbnRyb2xzKGNvbnRhaW5lciwgbWFpbkNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJcclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBidXR0b24gY2xpY2tcclxuXHRcdFx0XHRcdFx0YnV0dG9uLmJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBJY29uIG92ZXJyaWRlIChhbHdheXMgc2hvdyBpY29uIHBpY2tlciBidXR0b24pXHJcblx0XHRcdFx0c2V0dGluZy5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudEljb24gPSBpY29uT3ZlcnJpZGUgfHwgJ0RlZmF1bHQnO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoY3VycmVudEljb24gPT09ICdEZWZhdWx0JyA/ICdTZXQgaWNvbi4uLicgOiBjdXJyZW50SWNvbikub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFByZXZlbnQgc2Nyb2xsIGp1bXBpbmdcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucyA9IHt9O1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zW2NvbG9yS2V5XSA9IGljb25JZDtcclxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbY29sb3JLZXldID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEFwcGx5IGljb24gb3ZlcnJpZGUgdG8gbmF0aXZlIGJ1dHRvbnNcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8uYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIganVzdCB0aGUgbmF0aXZlIGJ1dHRvbnMgc2VjdGlvblxyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJOYXRpdmVCdXR0b25Db250cm9scyhjb250YWluZXIsIG1haW5Db250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyXHJcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBidXR0b24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5idXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHJcblx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uIGlmIGljb24gaXMgc2V0XHJcblx0XHRcdFx0XHRpZiAoaWNvbk92ZXJyaWRlKSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xFbCA9IHNldHRpbmcuY29udHJvbEVsO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1pY29uLXJlc2V0JyxcclxuXHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG8gZGVmYXVsdCBpY29uJyB9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhyZXNldEJ1dHRvbiwgeyBtYXJnaW5SaWdodDogJzAuNXJlbScgfSk7XHJcblx0XHRcdFx0XHRcdFx0cmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBQcmV2ZW50IHNjcm9sbCBqdW1waW5nXHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29uc1tjb2xvcktleV0gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFwcGx5IGljb24gb3ZlcnJpZGUgdG8gbmF0aXZlIGJ1dHRvbnMgKHJlbW92ZSBvdmVycmlkZSlcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIGp1c3QgdGhlIG5hdGl2ZSBidXR0b25zIHNlY3Rpb25cclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJOYXRpdmVCdXR0b25Db250cm9scyhjb250YWluZXIsIG1haW5Db250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJcclxuXHRcdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIEluc2VydCByZXNldCBidXR0b24gYmVmb3JlIHRoZSBtYWluIGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRcdGlmIChidXR0b25FbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgYnV0dG9uRWwpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb250cm9sRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFJlbmRlciBhbGwgNSBuYXRpdmUgYnV0dG9uc1xyXG5cdFx0cmVuZGVyTmF0aXZlQnV0dG9uKCdOZXcgbm90ZScsICduZXdOb3RlQnV0dG9uJywgJ25ld05vdGUnKTtcclxuXHRcdHJlbmRlck5hdGl2ZUJ1dHRvbignTmV3IGZvbGRlcicsICduZXdGb2xkZXJCdXR0b24nLCAnbmV3Rm9sZGVyJyk7XHJcblx0XHRyZW5kZXJOYXRpdmVCdXR0b24oJ1NvcnQgb3JkZXInLCAnc29ydE9yZGVyQnV0dG9uJywgJ3NvcnRPcmRlcicpO1xyXG5cdFx0cmVuZGVyTmF0aXZlQnV0dG9uKCdBdXRvLXJldmVhbCcsICdhdXRvUmV2ZWFsQnV0dG9uJywgJ2F1dG9SZXZlYWwnKTtcclxuXHRcdHJlbmRlck5hdGl2ZUJ1dHRvbignQ29sbGFwc2UgYWxsJywgJ2NvbGxhcHNlQWxsQnV0dG9uJywgJ2NvbGxhcHNlQWxsJyk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlckJ1dHRvbkl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgaXRlbTogRXhwbG9yZXJCdXR0b25JdGVtLCBpbmRleDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcclxuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHQvLyBTdG9yZSByZWZlcmVuY2UgdG8gb3RoZXIgc2V0dGluZ3MgZm9yIGNvbGxhcHNpYmxlIGZ1bmN0aW9uYWxpdHlcclxuXHRcdGNvbnN0IG90aGVyU2V0dGluZ3M6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuXHJcblx0XHQvLyBHZXQgdGhlIGNvbW1hbmQgcGFpciBmb3IgY3VzdG9tIGNvbW1hbmRzXHJcblx0XHRjb25zdCBwYWlyID0gaXRlbS50eXBlID09PSAnY3VzdG9tJyAmJiBpdGVtLmNvbW1hbmRJZFxyXG5cdFx0XHQ/IHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuZmluZChjID0+IGMuaWQgPT09IGl0ZW0uY29tbWFuZElkKVxyXG5cdFx0XHQ6IG51bGw7XHJcblxyXG5cdFx0Ly8gRGV0ZXJtaW5lIGRpc3BsYXkgbmFtZVxyXG5cdFx0Y29uc3QgZGlzcGxheU5hbWUgPSBpdGVtLnR5cGUgPT09ICdjdXN0b20nICYmIHBhaXJcclxuXHRcdFx0PyAocGFpci5kaXNwbGF5TmFtZSB8fCBwYWlyLm5hbWUpXHJcblx0XHRcdDogaXRlbS5uYW1lO1xyXG5cclxuXHRcdC8vIE1hcCBuYXRpdmUgYnV0dG9uIElEcyB0byBzZXR0aW5nIGtleXNcclxuXHRcdGNvbnN0IG5hdGl2ZUJ1dHRvbk1hcDogUmVjb3JkPHN0cmluZywgeyBzZXR0aW5nS2V5OiAnbmV3Tm90ZUJ1dHRvbicgfCAnbmV3Rm9sZGVyQnV0dG9uJyB8ICdzb3J0T3JkZXJCdXR0b24nIHwgJ2F1dG9SZXZlYWxCdXR0b24nIHwgJ2NvbGxhcHNlQWxsQnV0dG9uJywgY29sb3JLZXk6ICduZXdOb3RlJyB8ICduZXdGb2xkZXInIHwgJ3NvcnRPcmRlcicgfCAnYXV0b1JldmVhbCcgfCAnY29sbGFwc2VBbGwnIH0+ID0ge1xyXG5cdFx0XHQnbmF0aXZlLW5ld05vdGUnOiB7IHNldHRpbmdLZXk6ICduZXdOb3RlQnV0dG9uJywgY29sb3JLZXk6ICduZXdOb3RlJyB9LFxyXG5cdFx0XHQnbmF0aXZlLW5ld0ZvbGRlcic6IHsgc2V0dGluZ0tleTogJ25ld0ZvbGRlckJ1dHRvbicsIGNvbG9yS2V5OiAnbmV3Rm9sZGVyJyB9LFxyXG5cdFx0XHQnbmF0aXZlLXNvcnRPcmRlcic6IHsgc2V0dGluZ0tleTogJ3NvcnRPcmRlckJ1dHRvbicsIGNvbG9yS2V5OiAnc29ydE9yZGVyJyB9LFxyXG5cdFx0XHQnbmF0aXZlLWF1dG9SZXZlYWwnOiB7IHNldHRpbmdLZXk6ICdhdXRvUmV2ZWFsQnV0dG9uJywgY29sb3JLZXk6ICdhdXRvUmV2ZWFsJyB9LFxyXG5cdFx0XHQnbmF0aXZlLWNvbGxhcHNlQWxsJzogeyBzZXR0aW5nS2V5OiAnY29sbGFwc2VBbGxCdXR0b24nLCBjb2xvcktleTogJ2NvbGxhcHNlQWxsJyB9LFxyXG5cdFx0fTtcclxuXHJcblx0XHRjb25zdCBuYXRpdmVCdXR0b25JbmZvID0gaXRlbS50eXBlID09PSAnbmF0aXZlJyA/IG5hdGl2ZUJ1dHRvbk1hcFtpdGVtLmlkXSA6IG51bGw7XHJcblx0XHRjb25zdCBpc0hpZGRlbiA9IG5hdGl2ZUJ1dHRvbkluZm8gPyBzZXR0aW5nc1tuYXRpdmVCdXR0b25JbmZvLnNldHRpbmdLZXldIDogaXRlbS5oaWRkZW47XHJcblx0XHRjb25zdCBjb2xvciA9IG5hdGl2ZUJ1dHRvbkluZm9cclxuXHRcdFx0PyBzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycz8uW25hdGl2ZUJ1dHRvbkluZm8uY29sb3JLZXldXHJcblx0XHRcdDogKGl0ZW0uY29sb3IgJiYgaXRlbS5jb2xvciAhPT0gJyMwMDAwMDAnID8gaXRlbS5jb2xvciA6IHVuZGVmaW5lZCk7XHJcblx0XHRjb25zdCBpY29uT3ZlcnJpZGUgPSBuYXRpdmVCdXR0b25JbmZvXHJcblx0XHRcdD8gc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucz8uW25hdGl2ZUJ1dHRvbkluZm8uY29sb3JLZXldXHJcblx0XHRcdDogKGl0ZW0uaWNvbiB8fCB1bmRlZmluZWQpO1xyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0Ly8gQ29tcGxldGVseSBwcmV2ZW50IGNvbGxhcHNlIG9uIHNldHRpbmcgZWxlbWVudCAtIE9OTFkgY2hldnJvbiBjYW4gdG9nZ2xlIChpZiBwcmVzZW50KVxyXG5cdFx0XHQvLyBGb3IgZXh0ZXJuYWwgYnV0dG9ucywgcHJldmVudCBhbGwgY29sbGFwc2Ugc2luY2UgdGhlcmUncyBubyBjaGV2cm9uXHJcblx0XHRcdGlmIChpdGVtLnR5cGUgPT09ICdleHRlcm5hbCcpIHtcclxuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdGNvbnN0IGlzRXh0cmFCdXR0b24gPSB0YXJnZXQuY2xvc2VzdCgnLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy5jbGlja2FibGUtaWNvbi5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsO1xyXG5cdFx0XHRcdFx0aWYgKCFpc0V4dHJhQnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIHRydWUpO1xyXG5cclxuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdGNvbnN0IGlzRXh0cmFCdXR0b24gPSB0YXJnZXQuY2xvc2VzdCgnLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy5jbGlja2FibGUtaWNvbi5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsO1xyXG5cdFx0XHRcdFx0aWYgKCFpc0V4dHJhQnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIGZhbHNlKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBGb3IgbmF0aXZlIGFuZCBjdXN0b20gYnV0dG9ucywgYWxsb3cgY2hldnJvbiB0byB0b2dnbGVcclxuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdGNvbnN0IGlzQ2hldnJvbkNsaWNrID0gdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWNvbGxhcHNlLWljb24nKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRcdGNvbnN0IGlzRXh0cmFCdXR0b24gPSB0YXJnZXQuY2xvc2VzdCgnLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy5jbGlja2FibGUtaWNvbi5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsO1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNOYW1lRWRpdCA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1uYW1lLWRpc3BsYXknKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdC1pY29uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRcdGlmICghaXNDaGV2cm9uQ2xpY2sgJiYgIWlzRXh0cmFCdXR0b24gJiYgIWlzTmFtZUVkaXQpIHtcclxuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSwgdHJ1ZSk7XHJcblxyXG5cdFx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNDaGV2cm9uQ2xpY2sgPSB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItY29sbGFwc2UtaWNvbicpICE9PSBudWxsO1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNFeHRyYUJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcuZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLmNsaWNrYWJsZS1pY29uLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGw7XHJcblx0XHRcdFx0XHRjb25zdCBpc05hbWVFZGl0ID0gdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLW5hbWUtZGlzcGxheScpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1lZGl0LWljb24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdGFibGUtbmFtZScpICE9PSBudWxsO1xyXG5cdFx0XHRcdFx0aWYgKCFpc0NoZXZyb25DbGljayAmJiAhaXNFeHRyYUJ1dHRvbiAmJiAhaXNOYW1lRWRpdCkge1xyXG5cdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LCBmYWxzZSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE1ha2UgbmFtZUVsIGEgZmxleCBjb250YWluZXIgc28gY2hldnJvbiBjYW4gYmUgcG9zaXRpb25lZCB0byB0aGUgbGVmdFxyXG5cdFx0XHRjb25zdCBuYW1lRWwgPSBzZXR0aW5nLm5hbWVFbDtcclxuXHRcdFx0c2V0Q3NzUHJvcHMobmFtZUVsLCB7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzAuNXJlbScsIHdpZHRoOiAnMTAwJScgfSk7XHJcblxyXG5cdFx0XHQvLyBBZGQgY2hldnJvbnMtdXAtZG93biBpY29uIHRvIHRoZSBMRUZUIG9mIHRoZSBuYW1lIChvbmx5IGZvciBuYXRpdmUgYW5kIGN1c3RvbSBidXR0b25zKVxyXG5cdFx0XHRsZXQgY2hldnJvbkNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRcdFx0bGV0IGlzRXhwYW5kZWQgPSBmYWxzZTtcclxuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ25hdGl2ZScgfHwgaXRlbS50eXBlID09PSAnY3VzdG9tJykge1xyXG5cdFx0XHRcdGNoZXZyb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRjaGV2cm9uQ29udGFpbmVyLmNsYXNzTmFtZSA9ICd1aS10d2Vha2VyLWNvbGxhcHNlLWljb24nO1xyXG5cdFx0XHRcdHNldENzc1Byb3BzKGNoZXZyb25Db250YWluZXIsIHtcclxuXHRcdFx0XHRcdGN1cnNvcjogJ2RlZmF1bHQnLFxyXG5cdFx0XHRcdFx0YmFja2dyb3VuZDogJ3RyYW5zcGFyZW50JyxcclxuXHRcdFx0XHRcdHBhZGRpbmc6ICcwJyxcclxuXHRcdFx0XHRcdG1hcmdpbjogJzAnLFxyXG5cdFx0XHRcdFx0ZGlzcGxheTogJ2lubGluZS1mbGV4JyxcclxuXHRcdFx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxyXG5cdFx0XHRcdFx0anVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0bmFtZUVsLmluc2VydEJlZm9yZShjaGV2cm9uQ29udGFpbmVyLCBuYW1lRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0aXNFeHBhbmRlZCA9IHRoaXMuZXhwYW5kZWRTdGF0ZXMuZ2V0KGl0ZW0uaWQpID8/IGZhbHNlO1xyXG5cdFx0XHRcdHNldEljb24oY2hldnJvbkNvbnRhaW5lciwgaXNFeHBhbmRlZCA/ICdjaGV2cm9ucy1kb3duLXVwJyA6ICdjaGV2cm9ucy11cC1kb3duJyk7XHJcblxyXG5cdFx0XHRcdC8vIFRvZ2dsZSBvbiBjaGV2cm9uIGNsaWNrXHJcblx0XHRcdFx0Y2hldnJvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGlzRXhwYW5kZWQgPSAhaXNFeHBhbmRlZDtcclxuXHRcdFx0XHRcdHRoaXMuZXhwYW5kZWRTdGF0ZXMuc2V0KGl0ZW0uaWQsIGlzRXhwYW5kZWQpO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihjaGV2cm9uQ29udGFpbmVyISwgaXNFeHBhbmRlZCA/ICdjaGV2cm9ucy1kb3duLXVwJyA6ICdjaGV2cm9ucy11cC1kb3duJyk7XHJcblx0XHRcdFx0XHRvdGhlclNldHRpbmdzLmZvckVhY2goc2V0dGluZ0VsID0+IHtcclxuXHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoc2V0dGluZ0VsLCB7IGRpc3BsYXk6IGlzRXhwYW5kZWQgPyAnJyA6ICdub25lJyB9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDcmVhdGUgbmFtZSBjb250YWluZXIgKGVkaXRhYmxlIG9ubHkgZm9yIGN1c3RvbSBidXR0b25zKVxyXG5cdFx0XHRjb25zdCBuYW1lQ29udGFpbmVyID0gbmFtZUVsLmNyZWF0ZURpdih7IGNsczogJ3VpLXR3ZWFrZXItZWRpdGFibGUtbmFtZScgfSk7XHJcblx0XHRcdHNldENzc1Byb3BzKG5hbWVDb250YWluZXIsIHsgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMC41cmVtJyB9KTtcclxuXHJcblx0XHRcdC8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgZGlzcGxheSBlbGVtZW50IHdpdGggY2xpY2sgaGFuZGxlclxyXG5cdFx0XHRjb25zdCBjcmVhdGVOYW1lRGlzcGxheSA9IChuYW1lOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRuYW1lQ29udGFpbmVyLmVtcHR5KCk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGRpc3BsYXkgPSBuYW1lQ29udGFpbmVyLmNyZWF0ZVNwYW4oe1xyXG5cdFx0XHRcdFx0dGV4dDogbmFtZSA9PT0gZGlzcGxheU5hbWUgPyBuYW1lIDogYCR7bmFtZX0gKCR7ZGlzcGxheU5hbWV9KWAsXHJcblx0XHRcdFx0XHRjbHM6ICd1aS10d2Vha2VyLW5hbWUtZGlzcGxheSdcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gQWRkIHBlbmNpbCBpY29uIChvbmx5IGZvciBjdXN0b20gYnV0dG9ucywgbm90IGV4dGVybmFsKVxyXG5cdFx0XHRcdGlmIChpdGVtLnR5cGUgPT09ICdjdXN0b20nKSB7XHJcblx0XHRcdFx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gbmFtZUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd1aS10d2Vha2VyLWVkaXQtaWNvbicgfSk7XHJcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQ29udGFpbmVyLCB7IG9wYWNpdHk6ICcwLjYnIH0pO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihpY29uQ29udGFpbmVyLCAnbHVjaWRlLXBlbmNpbC1saW5lJyk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gTWFrZSBuYW1lIGFuZCBpY29uIGVkaXRhYmxlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRjb25zdCBzdGFydEVkaXQgPSAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGN1cnJlbnROYW1lID0gaXRlbS5uYW1lO1xyXG5cclxuXHRcdFx0XHRcdFx0bmFtZUNvbnRhaW5lci5lbXB0eSgpO1xyXG5cclxuXHRcdFx0XHRcdFx0Y29uc3QgbmFtZUlucHV0ID0gbmFtZUNvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcblx0XHRcdFx0XHRcdFx0dHlwZTogJ3RleHQnLFxyXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiBjdXJyZW50TmFtZVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0bmFtZUlucHV0LmFkZENsYXNzKCdtb2QtdGV4dC1pbnB1dCcpO1xyXG5cclxuXHRcdFx0XHRcdFx0bmFtZUlucHV0LmZvY3VzKCk7XHJcblx0XHRcdFx0XHRcdG5hbWVJbnB1dC5zZWxlY3QoKTtcclxuXHJcblx0XHRcdFx0XHRcdGNvbnN0IHNhdmVOYW1lID0gKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdG5hbWVJbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgc2F2ZU5hbWUpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRsZXQgbmV3TmFtZSA9IG5hbWVJbnB1dC52YWx1ZS50cmltKCk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFuZXdOYW1lKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRuZXdOYW1lID0gY3VycmVudE5hbWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGl0ZW0ubmFtZSA9IG5ld05hbWU7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBjb21tYW5kIHBhaXIgbmFtZSBpZiBjdXN0b21cclxuXHRcdFx0XHRcdFx0XHRpZiAocGFpcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0cGFpci5uYW1lID0gbmV3TmFtZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBidXR0b24gbmFtZXNcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnVwZGF0ZUJ1dHRvbk5hbWVzKCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdFx0XHRuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHRzYXZlTmFtZSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHRjcmVhdGVOYW1lRGlzcGxheShjdXJyZW50TmFtZSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0XHRcdG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgc2F2ZU5hbWUpO1xyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0XHRkaXNwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RhcnRFZGl0KTtcclxuXHRcdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdGFydEVkaXQpO1xyXG5cclxuXHRcdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcclxuXHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkNvbnRhaW5lciwgeyBvcGFjaXR5OiAnMScgfSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcclxuXHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkNvbnRhaW5lciwgeyBvcGFjaXR5OiAnMC42JyB9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdC8vIENyZWF0ZSBpbml0aWFsIGRpc3BsYXlcclxuXHRcdFx0Y3JlYXRlTmFtZURpc3BsYXkoaXRlbS5uYW1lKTtcclxuXHJcblx0XHRcdHNldHRpbmcuc2V0RGVzYygnJylcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gSWNvbiBwcmV2aWV3IChmb3IgY3VzdG9tIGNvbW1hbmRzIGFuZCBuYXRpdmUgd2l0aCBvdmVycmlkZXMpXHJcblx0XHRcdFx0XHRpZiAoaXRlbS50eXBlID09PSAnY3VzdG9tJyAmJiBwYWlyKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGljb25FbCA9IGJ1dHRvbi5leHRyYVNldHRpbmdzRWw7XHJcblx0XHRcdFx0XHRcdHNldEljb24oaWNvbkVsLCBwYWlyLmljb24pO1xyXG5cdFx0XHRcdFx0XHRpY29uRWwuc2V0QXR0cmlidXRlKCdkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQnLCBwYWlyLmlkKTtcclxuXHRcdFx0XHRcdFx0aWYgKHBhaXIuY29sb3IgJiYgcGFpci5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkVsLCB7IGNvbG9yOiBwYWlyLmNvbG9yIH0pO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGljb25FbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnQ2hhbmdlIGljb24nKTtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaWNvbklkICYmIGljb25JZCAhPT0gcGFpci5pY29uKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cGFpci5pY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGl0ZW0uaWNvbiA9IGljb25JZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnbmF0aXZlJyAmJiBpY29uT3ZlcnJpZGUpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbkVsID0gYnV0dG9uLmV4dHJhU2V0dGluZ3NFbDtcclxuXHRcdFx0XHRcdFx0c2V0SWNvbihpY29uRWwsIGljb25PdmVycmlkZSk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdDaGFuZ2UgaWNvbicpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghbmF0aXZlQnV0dG9uSW5mbykgcmV0dXJuO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29uc1tuYXRpdmVCdXR0b25JbmZvLmNvbG9yS2V5XSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gTm8gaWNvbiBwcmV2aWV3IGZvciBleHRlcm5hbCBidXR0b25zIG9yIG5hdGl2ZSB3aXRob3V0IG92ZXJyaWRlXHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgZGlzcGxheTogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBpY29uIGZsaWNrZXJpbmcgb24gaG92ZXIgYnkgbm90IHVwZGF0aW5nIG9uIGhvdmVyXHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdC8vIE1vdmUgdXBcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCdjaGV2cm9uLXVwJyk7XHJcblx0XHRcdFx0XHRpZiAoaW5kZXggPiAwKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdNb3ZlIHVwJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zLCBpbmRleCwgaW5kZXggLSAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXIgd2l0aCBtdWx0aXBsZSBhdHRlbXB0c1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbyB0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpbiBjYXNlIERPTSBpc24ndCByZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9uZSBtb3JlIGF0dGVtcHQgYWZ0ZXIgYSBsb25nZXIgZGVsYXlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0FscmVhZHkgYXQgdG9wJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItZGlzYWJsZWQtYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgcG9pbnRlckV2ZW50czogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBNb3ZlIGRvd25cclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCdjaGV2cm9uLWRvd24nKTtcclxuXHRcdFx0XHRcdGlmIChpbmRleCA8IHNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMubGVuZ3RoIC0gMSkge1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnTW92ZSBkb3duJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zLCBpbmRleCwgaW5kZXggKyAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXIgd2l0aCBtdWx0aXBsZSBhdHRlbXB0c1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbyB0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpbiBjYXNlIERPTSBpc24ndCByZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9uZSBtb3JlIGF0dGVtcHQgYWZ0ZXIgYSBsb25nZXIgZGVsYXlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0FscmVhZHkgYXQgYm90dG9tJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItZGlzYWJsZWQtYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgcG9pbnRlckV2ZW50czogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIERlbGV0ZSBidXR0b24gKG9ubHkgZm9yIGN1c3RvbSBjb21tYW5kcylcclxuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2N1c3RvbScpIHtcclxuXHRcdFx0XHRzZXR0aW5nLmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCd0cmFzaCcpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0RlbGV0ZScpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcygnbW9kLXdhcm5pbmcnKTtcclxuXHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgY29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKScgfSk7XHJcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBSZW1vdmUgZnJvbSBib3RoIGFycmF5c1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGl0ZW1JZHggPSBzZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zLmluZGV4T2YoaXRlbSk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGl0ZW1JZHggPiAtMSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcy5zcGxpY2UoaXRlbUlkeCwgMSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGlmIChwYWlyKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBjbWRJZHggPSBzZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLmluZGV4T2YocGFpcik7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoY21kSWR4ID4gLTEpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcy5zcGxpY2UoY21kSWR4LCAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBIaWRlL1Nob3cgdG9nZ2xlIChmb3IgbmF0aXZlIGFuZCBleHRlcm5hbCBidXR0b25zKVxyXG5cdFx0XHRpZiAoKGl0ZW0udHlwZSA9PT0gJ25hdGl2ZScgJiYgbmF0aXZlQnV0dG9uSW5mbykgfHwgaXRlbS50eXBlID09PSAnZXh0ZXJuYWwnKSB7XHJcblx0XHRcdFx0c2V0dGluZy5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBidXR0b24uZXh0cmFTZXR0aW5nc0VsO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihpY29uRWwsIGlzSGlkZGVuID8gJ2V5ZS1vZmYnIDogJ2V5ZScpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoaXNIaWRkZW4gPyAnU2hvdyBidXR0b24nIDogJ0hpZGUgYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoaXRlbS50eXBlID09PSAnbmF0aXZlJyAmJiBuYXRpdmVCdXR0b25JbmZvKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5nc1tuYXRpdmVCdXR0b25JbmZvLnNldHRpbmdLZXldID0gIXNldHRpbmdzW25hdGl2ZUJ1dHRvbkluZm8uc2V0dGluZ0tleV07XHJcblx0XHRcdFx0XHRcdFx0XHRpdGVtLmhpZGRlbiA9IHNldHRpbmdzW25hdGl2ZUJ1dHRvbkluZm8uc2V0dGluZ0tleV07XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdleHRlcm5hbCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGl0ZW0uaGlkZGVuID0gIWl0ZW0uaGlkZGVuO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld0lzSGlkZGVuID0gaXRlbS5oaWRkZW47XHJcblx0XHRcdFx0XHRcdFx0c2V0SWNvbihpY29uRWwsIG5ld0lzSGlkZGVuID8gJ2V5ZS1vZmYnIDogJ2V5ZScpO1xyXG5cdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKG5ld0lzSGlkZGVuID8gJ1Nob3cgYnV0dG9uJyA6ICdIaWRlIGJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDb2xsYXBzaWJsZSBzZXR0aW5ncyBzZWN0aW9uIChvbmx5IGZvciBuYXRpdmUgYW5kIGN1c3RvbSlcclxuXHRcdGlmIChpdGVtLnR5cGUgPT09ICduYXRpdmUnIHx8IGl0ZW0udHlwZSA9PT0gJ2N1c3RvbScpIHtcclxuXHRcdFx0Ly8gQ29sb3IgcGlja2VyXHJcblx0XHRcdGlmIChpdGVtLnR5cGUgPT09ICduYXRpdmUnICYmIG5hdGl2ZUJ1dHRvbkluZm8pIHtcclxuXHRcdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRcdFx0Y29uc3QgaGFzQ29sb3IgPSBjb2xvciAhPT0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdFx0LnNldE5hbWUoJ0N1c3RvbSBjb2xvcicpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdTZXQgYSBjdXN0b20gY29sb3IgZm9yIHRoaXMgaWNvbicpXHJcblx0XHRcdFx0XHRcdC5hZGRDb2xvclBpY2tlcigoY29sb3JQaWNrZXIpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBjdXJyZW50Q29sb3IgPSBjb2xvciA/PyAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3JQaWNrZXIuc2V0VmFsdWUoY3VycmVudENvbG9yKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XHJcblx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9ySW5wdXQgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNvbG9yXCJdJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChjb2xvcklucHV0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmIChoYXNDb2xvcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG8gZGVmYXVsdCBjb2xvcicgfVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMocmVzZXRCdXR0b24sIHsgbWFyZ2luUmlnaHQ6ICcwLjVyZW0nIH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9yc1tuYXRpdmVCdXR0b25JbmZvLmNvbG9yS2V5XSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNvbG9yUGlja2VyRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb2xvclBpY2tlckVsKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHRjb2xvclBpY2tlci5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3Q29sb3IgPSB2YWx1ZSA9PT0gJyMwMDAwMDAnID8gdW5kZWZpbmVkIDogdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzW25hdGl2ZUJ1dHRvbkluZm8uY29sb3JLZXldID0gbmV3Q29sb3I7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8uYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgcmVzZXQgYnV0dG9uIHZpc2liaWxpdHkgd2l0aG91dCBmdWxsIHJlLXJlbmRlclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBleGlzdGluZ1Jlc2V0ID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJy51aS10d2Vha2VyLWNvbG9yLXJlc2V0Jyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChuZXdDb2xvciAmJiAhZXhpc3RpbmdSZXNldCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCByZXNldCBidXR0b25cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBjb2xvclBpY2tlckVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJy5jb2xvci1waWNrZXInKSB8fCBjb250cm9sRWwubGFzdEVsZW1lbnRDaGlsZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvIGRlZmF1bHQgY29sb3InIH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8uYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjb2xvclBpY2tlckVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb2xvclBpY2tlckVsKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIW5ld0NvbG9yICYmIGV4aXN0aW5nUmVzZXQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBSZW1vdmUgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZXhpc3RpbmdSZXNldC5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdC8vIEljb24gb3ZlcnJpZGVcclxuXHRcdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRcdFx0Y29uc3QgaGFzSWNvbk92ZXJyaWRlID0gaWNvbk92ZXJyaWRlICE9PSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0XHQuc2V0TmFtZSgnSWNvbiBvdmVycmlkZScpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdPdmVycmlkZSB0aGUgZGVmYXVsdCBpY29uIGZvciB0aGlzIGJ1dHRvbicpXHJcblx0XHRcdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRJY29uID0gaWNvbk92ZXJyaWRlIHx8ICdEZWZhdWx0JztcclxuXHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChjdXJyZW50SWNvbiA9PT0gJ0RlZmF1bHQnID8gJ1NldCBpY29uLi4uJyA6IGN1cnJlbnRJY29uKS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0YnV0dG9uLmJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uIGlmIGljb24gb3ZlcnJpZGUgaXMgc2V0XHJcblx0XHRcdFx0XHRcdFx0aWYgKGhhc0ljb25PdmVycmlkZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xFbCA9IHNldHRpbmcuY29udHJvbEVsO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBidXR0b25FbCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKSB8fCBjb250cm9sRWwubGFzdEVsZW1lbnRDaGlsZDtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gY29udHJvbEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1pY29uLW92ZXJyaWRlLXJlc2V0JyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IGljb24gb3ZlcnJpZGUnIH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldEljb24ocmVzZXRCdXR0b24sICdsdWNpZGUtcm90YXRlLWN3Jyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMgPSB7fTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJbnNlcnQgcmVzZXQgYnV0dG9uIGJlZm9yZSB0aGUgbWFpbiBidXR0b25cclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGJ1dHRvbkVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgYnV0dG9uRWwpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbnRyb2xFbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdjdXN0b20nICYmIHBhaXIpIHtcclxuXHRcdFx0XHQvLyBDdXN0b20gY29tbWFuZCBzZXR0aW5ncyAoZGV2aWNlIG1vZGUsIGNvbG9yLCB0b2dnbGUgaWNvbiwgZXRjLilcclxuXHRcdFx0XHQvLyBEZXZpY2UgbW9kZVxyXG5cdFx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHRcdC5zZXROYW1lKCdEZXZpY2UgbW9kZScpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdDaG9vc2Ugd2hpY2ggZGV2aWNlcyB0aGlzIGJ1dHRvbiBhcHBlYXJzIG9uJylcclxuXHRcdFx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFwcElkID0gKHRoaXMuYXBwIGFzIHsgYXBwSWQ/OiBzdHJpbmcgfSkuYXBwSWQgfHwgJ3RoaXMtZGV2aWNlJztcclxuXHRcdFx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHRcdFx0LmFkZE9wdGlvbignYW55JywgJ0FsbCBkZXZpY2VzJylcclxuXHRcdFx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ2Rlc2t0b3AnLCAnRGVza3RvcCBvbmx5JylcclxuXHRcdFx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ21vYmlsZScsICdNb2JpbGUgb25seScpXHJcblx0XHRcdFx0XHRcdFx0XHQuYWRkT3B0aW9uKGFwcElkLCAnVGhpcyBkZXZpY2UnKVxyXG5cdFx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHBhaXIubW9kZSB8fCAnYW55JylcclxuXHRcdFx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBhaXIubW9kZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGl0ZW0ubW9kZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdGRyb3Bkb3duLnNlbGVjdEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gQ3VzdG9tIGNvbG9yIHBpY2tlclxyXG5cdFx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdFx0XHRjb25zdCBoYXNDb2xvciA9IHBhaXIuY29sb3IgIT09IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHRcdC5zZXROYW1lKCdDdXN0b20gY29sb3InKVxyXG5cdFx0XHRcdFx0XHQuc2V0RGVzYygnU2V0IGEgY3VzdG9tIGNvbG9yIGZvciB0aGlzIGljb24nKVxyXG5cdFx0XHRcdFx0XHQuYWRkQ29sb3JQaWNrZXIoKGNvbG9yUGlja2VyKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY3VycmVudENvbG9yID0gcGFpci5jb2xvciA/PyAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3JQaWNrZXIuc2V0VmFsdWUoY3VycmVudENvbG9yKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XHJcblx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9ySW5wdXQgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNvbG9yXCJdJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChjb2xvcklucHV0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmIChoYXNDb2xvcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG8gZGVmYXVsdCBjb2xvcicgfVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMocmVzZXRCdXR0b24sIHsgbWFyZ2luUmlnaHQ6ICcwLjVyZW0nIH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwYWlyLmNvbG9yID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aXRlbS5jb2xvciA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChjb2xvclBpY2tlckVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29sb3JQaWNrZXJFbCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0Y29sb3JQaWNrZXIub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBuZXdDb2xvciA9IHZhbHVlID09PSAnIzAwMDAwMCcgPyB1bmRlZmluZWQgOiB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSBuZXdDb2xvcjtcclxuXHRcdFx0XHRcdFx0XHRcdGl0ZW0uY29sb3IgPSBuZXdDb2xvcjtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgaWNvbiBwcmV2aWV3IGNvbG9yIGluIHJlYWwtdGltZVxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgaWNvbkJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkPVwiJHtwYWlyLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25CdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG5ld0NvbG9yICYmIG5ld0NvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQnV0dG9uLCB7IGNvbG9yOiBuZXdDb2xvciB9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpY29uQnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHJlc2V0IGJ1dHRvbiB2aXNpYmlsaXR5IHdpdGhvdXQgZnVsbCByZS1yZW5kZXJcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xFbCA9IHNldHRpbmcuY29udHJvbEVsO1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdSZXNldCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCcudWktdHdlYWtlci1jb2xvci1yZXNldCcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKG5ld0NvbG9yICYmICFleGlzdGluZ1Jlc2V0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCByZXNldCBidXR0b25cclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgY29sb3JQaWNrZXJFbCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCcuY29sb3ItcGlja2VyJykgfHwgY29udHJvbEVsLmxhc3RFbGVtZW50Q2hpbGQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gY29udHJvbEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0cjogeyAnYXJpYS1sYWJlbCc6ICdSZXNldCB0byBkZWZhdWx0IGNvbG9yJyB9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhyZXNldEJ1dHRvbiwgeyBtYXJnaW5SaWdodDogJzAuNXJlbScgfSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHJlc2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtLmNvbG9yID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNvbG9yUGlja2VyRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb2xvclBpY2tlckVsKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICghbmV3Q29sb3IgJiYgZXhpc3RpbmdSZXNldCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZW1vdmUgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdGV4aXN0aW5nUmVzZXQucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQvLyBUb2dnbGUgaWNvbiBjb25maWd1cmF0aW9uXHJcblx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcclxuXHJcblx0XHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHRcdC5zZXROYW1lKCdUb2dnbGUgaWNvbicpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdJY29uIHRvIHNob3cgd2hlbiBjb21tYW5kIGlzIHRvZ2dsZWQgb24gKGxlYXZlIGVtcHR5IHRvIGRpc2FibGUgdG9nZ2xlKS4gQ29tbWFuZHMgd2l0aCBjaGVjayBjYWxsYmFjayB3b3JrIGF1dG9tYXRpY2FsbHkuIFNlZSByZWFkbWUgZm9yIHBsdWdpbiBkZXZlbG9wZXIgY29tcGF0aWJpbGl0eSBub3Rlcy4nKVxyXG5cdFx0XHRcdFx0XHQuc2V0VG9vbHRpcCgnRm9yIHBsdWdpbiBkZXZlbG9wZXJzOiBDb21tYW5kcyB3aXRoIGNoZWNrQ2FsbGJhY2sgd29yayBhdXRvbWF0aWNhbGx5LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2RhdmlkdmtpbWJhbGwvb2JzaWRpYW4tdWktdHdlYWtlciN0b2dnbGUtaWNvbi1mZWF0dXJlLWNvbXBhdGliaWxpdHkgZm9yIGRldGFpbHMuJylcclxuXHRcdFx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY3VycmVudFRvZ2dsZUljb24gPSBwYWlyLnRvZ2dsZUljb24gfHwgJ05vbmUnO1xyXG5cdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGN1cnJlbnRUb2dnbGVJY29uID09PSAnTm9uZScgPyAnU2V0IHRvZ2dsZSBpY29uLi4uJyA6IGN1cnJlbnRUb2dnbGVJY29uKS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGFpci50b2dnbGVJY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aXRlbS50b2dnbGVJY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwYWlyLnRvZ2dsZUljb24gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtLnRvZ2dsZUljb24gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdGJ1dHRvbi5idXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdC8vIFVzZSBhY3RpdmUgY2xhc3Mgb3B0aW9uXHJcblx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcclxuXHRcdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdFx0LnNldE5hbWUoJ1VzZSBhY3RpdmUgY2xhc3MgaW5zdGVhZCBvZiBpY29uIHN3YXAnKVxyXG5cdFx0XHRcdFx0XHQuc2V0RGVzYygnV2hlbiB0b2dnbGVkIG9uLCBhZGQgaXMtYWN0aXZlIGNsYXNzIGluc3RlYWQgb2Ygc3dhcHBpbmcgaWNvbiAoZXhwbG9yZXIgb25seSknKVxyXG5cdFx0XHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUocGFpci51c2VBY3RpdmVDbGFzcyA/PyBmYWxzZSk7XHJcblx0XHRcdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLnVzZUFjdGl2ZUNsYXNzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGl0ZW0udXNlQWN0aXZlQ2xhc3MgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdHRvZ2dsZS50b2dnbGVFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBBcHBseSBjb2xsYXBzZSBzdGF0ZVxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHNhdmVkRXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkU3RhdGVzLmdldChpdGVtLmlkKSA/PyBmYWxzZTtcclxuXHRcdFx0b3RoZXJTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmdFbCA9PiB7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoc2V0dGluZ0VsLCB7IGRpc3BsYXk6IHNhdmVkRXhwYW5kZWQgPyAnJyA6ICdub25lJyB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LCAwKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyQ29tbWFuZEl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGFpcjogQ29tbWFuZEljb25QYWlyLCBpbmRleDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcclxuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHQvLyBTdG9yZSByZWZlcmVuY2UgdG8gb3RoZXIgc2V0dGluZ3MgZm9yIGNvbGxhcHNpYmxlIGZ1bmN0aW9uYWxpdHlcclxuXHRcdGNvbnN0IG90aGVyU2V0dGluZ3M6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuXHJcblx0XHQvLyBDb21tYW5kIG5hbWUgd2l0aCBlZGl0YWJsZSBuYW1lIChsaWtlIFZhdWx0IENNUykgYW5kIGljb24gcHJldmlldyB3aXRoIGNvbG9yXHJcblx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IHBhaXIuZGlzcGxheU5hbWUgfHwgcGFpci5uYW1lO1xyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHQvLyBDb21wbGV0ZWx5IHByZXZlbnQgY29sbGFwc2Ugb24gc2V0dGluZyBlbGVtZW50IC0gT05MWSBjaGV2cm9uIGNhbiB0b2dnbGVcclxuXHRcdFx0Ly8gVXNlIGNhcHR1cmUgcGhhc2UgdG8gaW50ZXJjZXB0IEFMTCBjbGlja3MgYmVmb3JlIHRoZXkgcmVhY2ggT2JzaWRpYW4ncyBoYW5kbGVyc1xyXG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0Ly8gQWxsb3cgY29sbGFwc2UgaWYgY2xpY2tpbmcgb24gY2hldnJvbiBpY29uIE9SIG9uIGV4dHJhIGJ1dHRvbnMgKGRlbGV0ZSwgbW92ZSB1cC9kb3duLCBldGMuKVxyXG5cdFx0XHRcdC8vIE9SIG9uIG5hbWUgZGlzcGxheS9wZW5jaWwgaWNvbiBmb3IgcmVuYW1pbmdcclxuXHRcdFx0XHRjb25zdCBpc0NoZXZyb25DbGljayA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1jb2xsYXBzZS1pY29uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNFeHRyYUJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcuZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLmNsaWNrYWJsZS1pY29uLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNOYW1lRWRpdCA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1uYW1lLWRpc3BsYXknKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdC1pY29uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRpZiAoIWlzQ2hldnJvbkNsaWNrICYmICFpc0V4dHJhQnV0dG9uICYmICFpc05hbWVFZGl0KSB7XHJcblx0XHRcdFx0XHQvLyBCbG9jayBBTEwgb3RoZXIgY2xpY2tzIGZyb20gYWZmZWN0aW5nIGNvbGxhcHNlXHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRydWUpOyAvLyBDYXB0dXJlIHBoYXNlIC0gcnVucyBiZWZvcmUgb3RoZXIgaGFuZGxlcnNcclxuXHJcblx0XHRcdC8vIEFsc28gcHJldmVudCBvbiBidWJibGUgcGhhc2UgYXMgYmFja3VwXHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRjb25zdCBpc0NoZXZyb25DbGljayA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1jb2xsYXBzZS1pY29uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNFeHRyYUJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcuZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLmNsaWNrYWJsZS1pY29uLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNOYW1lRWRpdCA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1uYW1lLWRpc3BsYXknKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdC1pY29uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRpZiAoIWlzQ2hldnJvbkNsaWNrICYmICFpc0V4dHJhQnV0dG9uICYmICFpc05hbWVFZGl0KSB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIGZhbHNlKTsgLy8gQnViYmxlIHBoYXNlIC0gYmFja3VwXHJcblxyXG5cdFx0XHQvLyBNYWtlIG5hbWVFbCBhIGZsZXggY29udGFpbmVyIHNvIGNoZXZyb24gY2FuIGJlIHBvc2l0aW9uZWQgdG8gdGhlIGxlZnRcclxuXHRcdFx0Y29uc3QgbmFtZUVsID0gc2V0dGluZy5uYW1lRWw7XHJcblx0XHRcdHNldENzc1Byb3BzKG5hbWVFbCwgeyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcwLjVyZW0nLCB3aWR0aDogJzEwMCUnIH0pO1xyXG5cclxuXHRcdFx0Ly8gQWRkIGNoZXZyb25zLXVwLWRvd24gaWNvbiB0byB0aGUgTEVGVCBvZiB0aGUgbmFtZSAoYmVmb3JlIG5hbWUgY29udGFpbmVyKVxyXG5cdFx0XHRjb25zdCBjaGV2cm9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdGNoZXZyb25Db250YWluZXIuY2xhc3NOYW1lID0gJ3VpLXR3ZWFrZXItY29sbGFwc2UtaWNvbic7XHJcblx0XHRcdHNldENzc1Byb3BzKGNoZXZyb25Db250YWluZXIsIHtcclxuXHRcdFx0XHRjdXJzb3I6ICdkZWZhdWx0JyxcclxuXHRcdFx0XHRiYWNrZ3JvdW5kOiAndHJhbnNwYXJlbnQnLFxyXG5cdFx0XHRcdHBhZGRpbmc6ICcwJyxcclxuXHRcdFx0XHRtYXJnaW46ICcwJyxcclxuXHRcdFx0XHRkaXNwbGF5OiAnaW5saW5lLWZsZXgnLFxyXG5cdFx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxyXG5cdFx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly8gSW5zZXJ0IGFzIGZpcnN0IGNoaWxkIHRvIGVuc3VyZSBpdCdzIG9uIHRoZSBsZWZ0XHJcblx0XHRcdG5hbWVFbC5pbnNlcnRCZWZvcmUoY2hldnJvbkNvbnRhaW5lciwgbmFtZUVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHQvLyBSZXN0b3JlIGNvbGxhcHNlIHN0YXRlIGZyb20gTWFwLCBkZWZhdWx0IHRvIGZhbHNlIGlmIG5vdCBzZXRcclxuXHRcdFx0bGV0IGlzRXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkU3RhdGVzLmdldChwYWlyLmlkKSA/PyBmYWxzZTtcclxuXHRcdFx0c2V0SWNvbihjaGV2cm9uQ29udGFpbmVyLCBpc0V4cGFuZGVkID8gJ2NoZXZyb25zLWRvd24tdXAnIDogJ2NoZXZyb25zLXVwLWRvd24nKTtcclxuXHJcblx0XHRcdC8vIFRvZ2dsZSBvbiBjaGV2cm9uIGNsaWNrIC0gT05MWSB3YXkgdG8gY2hhbmdlIGNvbGxhcHNlIHN0YXRlXHJcblx0XHRcdGNoZXZyb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0aXNFeHBhbmRlZCA9ICFpc0V4cGFuZGVkO1xyXG5cdFx0XHRcdC8vIFN0b3JlIHN0YXRlIGluIE1hcCBmb3IgcGVyc2lzdGVuY2UgYWNyb3NzIHJlLXJlbmRlcnNcclxuXHRcdFx0XHR0aGlzLmV4cGFuZGVkU3RhdGVzLnNldChwYWlyLmlkLCBpc0V4cGFuZGVkKTtcclxuXHRcdFx0XHQvLyBTd2FwIGljb246IGNoZXZyb25zLXVwLWRvd24gKGNvbGxhcHNlZCkgPC0+IGNoZXZyb25zLWRvd24tdXAgKGV4cGFuZGVkKVxyXG5cdFx0XHRcdHNldEljb24oY2hldnJvbkNvbnRhaW5lciwgaXNFeHBhbmRlZCA/ICdjaGV2cm9ucy1kb3duLXVwJyA6ICdjaGV2cm9ucy11cC1kb3duJyk7XHJcblx0XHRcdFx0b3RoZXJTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmdFbCA9PiB7XHJcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhzZXR0aW5nRWwsIHsgZGlzcGxheTogaXNFeHBhbmRlZCA/ICcnIDogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIENyZWF0ZSBlZGl0YWJsZSBuYW1lIGNvbnRhaW5lciB3aXRoIHBlbmNpbCBpY29uXHJcblx0XHRcdGNvbnN0IG5hbWVDb250YWluZXIgPSBuYW1lRWwuY3JlYXRlRGl2KHsgY2xzOiAndWktdHdlYWtlci1lZGl0YWJsZS1uYW1lJyB9KTtcclxuXHRcdFx0c2V0Q3NzUHJvcHMobmFtZUNvbnRhaW5lciwgeyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcwLjVyZW0nIH0pO1xyXG5cclxuXHRcdFx0Ly8gRnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBkaXNwbGF5IGVsZW1lbnQgd2l0aCBjbGljayBoYW5kbGVyXHJcblx0XHRcdGNvbnN0IGNyZWF0ZU5hbWVEaXNwbGF5ID0gKG5hbWU6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdG5hbWVDb250YWluZXIuZW1wdHkoKTtcclxuXHJcblx0XHRcdFx0Y29uc3QgZGlzcGxheSA9IG5hbWVDb250YWluZXIuY3JlYXRlU3Bhbih7XHJcblx0XHRcdFx0XHR0ZXh0OiBuYW1lID09PSBkaXNwbGF5TmFtZSA/IG5hbWUgOiBgJHtuYW1lfSAoJHtkaXNwbGF5TmFtZX0pYCxcclxuXHRcdFx0XHRcdGNsczogJ3VpLXR3ZWFrZXItbmFtZS1kaXNwbGF5J1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQvLyBBZGQgcGVuY2lsIGljb25cclxuXHRcdFx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gbmFtZUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd1aS10d2Vha2VyLWVkaXQtaWNvbicgfSk7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkNvbnRhaW5lciwgeyBvcGFjaXR5OiAnMC42JyB9KTtcclxuXHRcdFx0XHRzZXRJY29uKGljb25Db250YWluZXIsICdsdWNpZGUtcGVuY2lsLWxpbmUnKTtcclxuXHJcblx0XHRcdFx0Ly8gTWFrZSBuYW1lIGFuZCBpY29uIGVkaXRhYmxlIG9uIGNsaWNrXHJcblx0XHRcdFx0Y29uc3Qgc3RhcnRFZGl0ID0gKCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudE5hbWUgPSBwYWlyLm5hbWU7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ2xlYXIgY29udGFpbmVyXHJcblx0XHRcdFx0XHRuYW1lQ29udGFpbmVyLmVtcHR5KCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGlucHV0IHVzaW5nIG5hdGl2ZSBPYnNpZGlhbiBzdHlsaW5nXHJcblx0XHRcdFx0XHRjb25zdCBuYW1lSW5wdXQgPSBuYW1lQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuXHRcdFx0XHRcdFx0dHlwZTogJ3RleHQnLFxyXG5cdFx0XHRcdFx0XHR2YWx1ZTogY3VycmVudE5hbWVcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmFkZENsYXNzKCdtb2QtdGV4dC1pbnB1dCcpO1xyXG5cclxuXHRcdFx0XHRcdC8vIEZvY3VzIGFuZCBzZWxlY3QgdGV4dFxyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmZvY3VzKCk7XHJcblx0XHRcdFx0XHRuYW1lSW5wdXQuc2VsZWN0KCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gU2F2ZSBvbiBibHVyXHJcblx0XHRcdFx0XHRjb25zdCBzYXZlTmFtZSA9ICgpID0+IHtcclxuXHRcdFx0XHRcdFx0bmFtZUlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XHJcblxyXG5cdFx0XHRcdFx0XHRsZXQgbmV3TmFtZSA9IG5hbWVJbnB1dC52YWx1ZS50cmltKCk7XHJcblx0XHRcdFx0XHRcdGlmICghbmV3TmFtZSkge1xyXG5cdFx0XHRcdFx0XHRcdG5ld05hbWUgPSBjdXJyZW50TmFtZTsgLy8gUmV2ZXJ0IHRvIG9yaWdpbmFsIGlmIGVtcHR5XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cGFpci5uYW1lID0gbmV3TmFtZTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBleGlzdGluZyBidXR0b25zIGltbWVkaWF0ZWx5IChkb24ndCB3YWl0IGZvciByZS1yZW5kZXIpXHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8udXBkYXRlQnV0dG9uTmFtZXMoKTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byB1cGRhdGUgZGlzcGxheSBhbmQgc2F2ZVxyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0XHQvLyBTYXZlIG9uIEVudGVyXHJcblx0XHRcdFx0XHRuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xyXG5cdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRzYXZlTmFtZSgpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xyXG5cdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHQvLyBDYW5jZWw6IHJldmVydCB0byBvcmlnaW5hbFxyXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZU5hbWVEaXNwbGF5KGN1cnJlbnROYW1lKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gU2F2ZSBvbiBibHVyXHJcblx0XHRcdFx0XHRuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHNhdmVOYW1lKTtcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHQvLyBBZGQgY2xpY2sgaGFuZGxlcnMgdG8gYm90aCBuYW1lIGFuZCBpY29uXHJcblx0XHRcdFx0ZGlzcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0RWRpdCk7XHJcblx0XHRcdFx0aWNvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0RWRpdCk7XHJcblxyXG5cdFx0XHRcdC8vIEFkZCBob3ZlciBlZmZlY3QgdG8gaWNvblxyXG5cdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcclxuXHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25Db250YWluZXIsIHsgb3BhY2l0eTogJzEnIH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcclxuXHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25Db250YWluZXIsIHsgb3BhY2l0eTogJzAuNicgfSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHQvLyBDcmVhdGUgaW5pdGlhbCBkaXNwbGF5XHJcblx0XHRcdGNyZWF0ZU5hbWVEaXNwbGF5KHBhaXIubmFtZSk7XHJcblxyXG5cdFx0XHRzZXR0aW5nLnNldERlc2MoJycpXHJcblx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdC8vIENoYW5nZSBpY29uIC0gcHJldmlldyB3aXRoIGNvbG9yIChyZWFsLXRpbWUgdXBkYXRlcylcclxuXHRcdFx0XHRcdGNvbnN0IGljb25FbCA9IGJ1dHRvbi5leHRyYVNldHRpbmdzRWw7XHJcblx0XHRcdFx0XHRzZXRJY29uKGljb25FbCwgcGFpci5pY29uKTtcclxuXHRcdFx0XHRcdC8vIFN0b3JlIHJlZmVyZW5jZSBmb3IgY29sb3IgdXBkYXRlc1xyXG5cdFx0XHRcdFx0aWNvbkVsLnNldEF0dHJpYnV0ZSgnZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkJywgcGFpci5pZCk7XHJcblx0XHRcdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkVsLCB7IGNvbG9yOiBwYWlyLmNvbG9yIH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0aWNvbkVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0NoYW5nZSBpY29uJyk7XHJcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQgJiYgaWNvbklkICE9PSBwYWlyLmljb24pIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci5pY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdC8vIE1vdmUgdXAgLSBhbHdheXMgc2hvdywgYnV0IGRpc2FibGUgd2hlbiBhdCB0b3BcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCdjaGV2cm9uLXVwJyk7XHJcblx0XHRcdFx0XHRpZiAoaW5kZXggPiAwKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdNb3ZlIHVwJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLCBpbmRleCwgaW5kZXggLSAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXIgd2l0aCBtdWx0aXBsZSBhdHRlbXB0c1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbyB0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpbiBjYXNlIERPTSBpc24ndCByZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9uZSBtb3JlIGF0dGVtcHQgYWZ0ZXIgYSBsb25nZXIgZGVsYXlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0FscmVhZHkgYXQgdG9wJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItZGlzYWJsZWQtYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRcdC8vIFByZXZlbnQgaG92ZXIgZWZmZWN0cyBvbiBkaXNhYmxlZCBidXR0b25zXHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgcG9pbnRlckV2ZW50czogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBNb3ZlIGRvd24gLSBhbHdheXMgc2hvdywgYnV0IGRpc2FibGUgd2hlbiBhdCBib3R0b21cclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCdjaGV2cm9uLWRvd24nKTtcclxuXHRcdFx0XHRcdGlmIChpbmRleCA8IHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMubGVuZ3RoIC0gMSkge1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnTW92ZSBkb3duJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLCBpbmRleCwgaW5kZXggKyAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXIgd2l0aCBtdWx0aXBsZSBhdHRlbXB0c1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbyB0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpbiBjYXNlIERPTSBpc24ndCByZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9uZSBtb3JlIGF0dGVtcHQgYWZ0ZXIgYSBsb25nZXIgZGVsYXlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0FscmVhZHkgYXQgYm90dG9tJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItZGlzYWJsZWQtYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRcdC8vIFByZXZlbnQgaG92ZXIgZWZmZWN0cyBvbiBkaXNhYmxlZCBidXR0b25zXHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgcG9pbnRlckV2ZW50czogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBEZWxldGUgLSByZWQvd2FybmluZyBzdHlsZVxyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oJ3RyYXNoJyk7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnRGVsZXRlJyk7XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCdtb2Qtd2FybmluZycpO1xyXG5cdFx0XHRcdFx0Ly8gTWFrZSBpY29uIHJlZFxyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMoYnV0dG9uLmV4dHJhU2V0dGluZ3NFbCwgeyBjb2xvcjogJ3ZhcigtLXRleHQtZXJyb3IpJyB9KTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGlkeCA9IHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuaW5kZXhPZihwYWlyKTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoaWR4ID4gLTEpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuc3BsaWNlKGlkeCwgMSk7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIERldmljZSBtb2RlIGRyb3Bkb3duXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRGV2aWNlIG1vZGUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdDaG9vc2Ugd2hpY2ggZGV2aWNlcyB0aGlzIGJ1dHRvbiBhcHBlYXJzIG9uJylcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBhcHBJZCA9ICh0aGlzLmFwcCBhcyB7IGFwcElkPzogc3RyaW5nIH0pLmFwcElkIHx8ICd0aGlzLWRldmljZSc7XHJcblx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdhbnknLCAnQWxsIGRldmljZXMnKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdkZXNrdG9wJywgJ0Rlc2t0b3Agb25seScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ21vYmlsZScsICdNb2JpbGUgb25seScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oYXBwSWQsICdUaGlzIGRldmljZScpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShwYWlyLm1vZGUgfHwgJ2FueScpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRwYWlyLm1vZGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEN1c3RvbSBjb2xvciBwaWNrZXIgd2l0aCByZXNldCBidXR0b24gKGxpa2UgQ29tbWFuZGVyIC0gYWx3YXlzIHNob3cgY29sb3IgcGlja2VyKVxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRjb25zdCBoYXNDb2xvciA9IHBhaXIuY29sb3IgIT09IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ3VzdG9tIGNvbG9yJylcclxuXHRcdFx0XHQuc2V0RGVzYygnU2V0IGEgY3VzdG9tIGNvbG9yIGZvciB0aGlzIGljb24nKVxyXG5cdFx0XHRcdC5hZGRDb2xvclBpY2tlcigoY29sb3JQaWNrZXIpID0+IHtcclxuXHRcdFx0XHRcdC8vIFVzZSBDb21tYW5kZXIncyBhcHByb2FjaDogYWx3YXlzIHNob3cgY29sb3IgcGlja2VyLCBkZWZhdWx0IHRvICMwMDAgaWYgbm90IHNldFxyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudENvbG9yID0gcGFpci5jb2xvciA/PyAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRjb2xvclBpY2tlci5zZXRWYWx1ZShjdXJyZW50Q29sb3IpO1xyXG5cclxuXHRcdFx0XHRcdC8vIEdldCB0aGUgY29udHJvbCBlbGVtZW50IC0gY29sb3IgcGlja2VyIGlzIGFkZGVkIHRvIGl0XHJcblx0XHRcdFx0XHRjb25zdCBjb250cm9sRWwgPSBzZXR0aW5nLmNvbnRyb2xFbDtcclxuXHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNvbG9yIHBpY2tlciBjbGlja3NcclxuXHRcdFx0XHRcdGNvbnRyb2xFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHJcblx0XHRcdFx0XHQvLyBBZGQgZXZlbnQgaGFuZGxlciB0byB0aGUgYWN0dWFsIGNvbG9yIGlucHV0IGVsZW1lbnRcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjb2xvcklucHV0ID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjb2xvclwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdGlmIChjb2xvcklucHV0KSB7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3JJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgMCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQWRkIHJlc2V0IGJ1dHRvbiB0byB0aGUgbGVmdCBvZiBjb2xvciBwaWNrZXIgaWYgY29sb3IgaGFzIGJlZW4gc2V0XHJcblx0XHRcdFx0XHQvLyBVc2Ugc2V0VGltZW91dCB0byBlbnN1cmUgY29sb3IgcGlja2VyIGlzIGFkZGVkIGZpcnN0LCB0aGVuIGluc2VydCByZXNldCBidXR0b24gYmVmb3JlIGl0XHJcblx0XHRcdFx0XHRpZiAoaGFzQ29sb3IpIHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gRmluZCB0aGUgY29sb3IgcGlja2VyIGVsZW1lbnQgKGl0J3MgdHlwaWNhbGx5IHRoZSBsYXN0IGNoaWxkIG9yIGhhcyBhIHNwZWNpZmljIGNsYXNzKVxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvIGRlZmF1bHQgY29sb3InIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGNvbG9yIGVudGlyZWx5XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgaWNvbiBwcmV2aWV3IHRvIHJlbW92ZSBjb2xvclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBpY29uQnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQ9XCIke3BhaXIuaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpY29uQnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWNvbkJ1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBJbnNlcnQgcmVzZXQgYnV0dG9uIGJlZm9yZSBjb2xvciBwaWNrZXJcclxuXHRcdFx0XHRcdFx0XHRpZiAoY29sb3JQaWNrZXJFbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29sb3JQaWNrZXJFbCk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrOiBpbnNlcnQgYXQgc3RhcnRcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbnRyb2xFbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGNvbG9yUGlja2VyLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHQvLyBJZiBzZXQgdG8gYmxhY2sgKCMwMDAwMDApLCB0cmVhdCBhcyBcIm5vIGN1c3RvbSBjb2xvclwiIGFuZCByZW1vdmUgaXRcclxuXHRcdFx0XHRcdFx0Y29uc3QgbmV3Q29sb3IgPSB2YWx1ZSA9PT0gJyMwMDAwMDAnID8gdW5kZWZpbmVkIDogdmFsdWU7XHJcblx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSBuZXdDb2xvcjtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBpY29uIHByZXZpZXcgY29sb3IgaW4gcmVhbC10aW1lXHJcblx0XHRcdFx0XHRcdGNvbnN0IGljb25CdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZD1cIiR7cGFpci5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdFx0aWYgKGljb25CdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAobmV3Q29sb3IgJiYgbmV3Q29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkJ1dHRvbiwgeyBjb2xvcjogbmV3Q29sb3IgfSk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdGljb25CdXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgcmVzZXQgYnV0dG9uIHZpc2liaWxpdHkgd2l0aG91dCBmdWxsIHJlLXJlbmRlclxyXG5cdFx0XHRcdFx0XHRjb25zdCBjb250cm9sRWwgPSBzZXR0aW5nLmNvbnRyb2xFbDtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdSZXNldCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCcudWktdHdlYWtlci1jb2xvci1yZXNldCcpO1xyXG5cdFx0XHRcdFx0XHRpZiAobmV3Q29sb3IgJiYgIWV4aXN0aW5nUmVzZXQpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29sb3JQaWNrZXJFbCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCcuY29sb3ItcGlja2VyJykgfHwgY29udHJvbEVsLmxhc3RFbGVtZW50Q2hpbGQ7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzZXRCdXR0b24gPSBjb250cm9sRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxyXG5cdFx0XHRcdFx0XHRcdFx0YXR0cjogeyAnYXJpYS1sYWJlbCc6ICdSZXNldCB0byBkZWZhdWx0IGNvbG9yJyB9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhyZXNldEJ1dHRvbiwgeyBtYXJnaW5SaWdodDogJzAuNXJlbScgfSk7XHJcblx0XHRcdFx0XHRcdFx0cmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSBjb2xvciBlbnRpcmVseVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLmNvbG9yID0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGljb24gcHJldmlldyB0byByZW1vdmUgY29sb3JcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgaWNvbkJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkPVwiJHtwYWlyLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaWNvbkJ1dHRvbikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGljb25CdXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gSW5zZXJ0IHJlc2V0IGJ1dHRvbiBiZWZvcmUgY29sb3IgcGlja2VyXHJcblx0XHRcdFx0XHRcdFx0aWYgKGNvbG9yUGlja2VyRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbG9yUGlja2VyRWwpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBGYWxsYmFjazogaW5zZXJ0IGF0IHN0YXJ0XHJcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb250cm9sRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCFuZXdDb2xvciAmJiBleGlzdGluZ1Jlc2V0KSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIHJlc2V0IGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRcdGV4aXN0aW5nUmVzZXQucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdC8vIFNhdmUgYW5kIHJlb3JkZXIgKG5vIGZ1bGwgcmUtcmVuZGVyIHRvIHByZXZlbnQgZmxpY2tlcmluZylcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFRvZ2dsZSBpY29uIGNvbmZpZ3VyYXRpb25cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcclxuXHRcdFx0Y29uc3QgaGFzVG9nZ2xlSWNvbiA9IHBhaXIudG9nZ2xlSWNvbiAhPT0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdUb2dnbGUgaWNvbicpXHJcblx0XHRcdFx0LnNldERlc2MoJ0ljb24gdG8gc2hvdyB3aGVuIGNvbW1hbmQgaXMgdG9nZ2xlZCBvbiAobGVhdmUgZW1wdHkgdG8gZGlzYWJsZSB0b2dnbGUpLiBDb21tYW5kcyB3aXRoIGNoZWNrIGNhbGxiYWNrIHdvcmsgYXV0b21hdGljYWxseS4gU2VlIHJlYWRtZSBmb3IgcGx1Z2luIGRldmVsb3BlciBjb21wYXRpYmlsaXR5IG5vdGVzLicpXHJcblx0XHRcdFx0LnNldFRvb2x0aXAoJ0ZvciBwbHVnaW4gZGV2ZWxvcGVyczogQ29tbWFuZHMgd2l0aCBjaGVja0NhbGxiYWNrIHdvcmsgYXV0b21hdGljYWxseS4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXZpZHZraW1iYWxsL29ic2lkaWFuLXVpLXR3ZWFrZXIjdG9nZ2xlLWljb24tZmVhdHVyZS1jb21wYXRpYmlsaXR5IGZvciBkZXRhaWxzLicpXHJcblx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50VG9nZ2xlSWNvbiA9IHBhaXIudG9nZ2xlSWNvbiB8fCAnTm9uZSc7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChjdXJyZW50VG9nZ2xlSWNvbiA9PT0gJ05vbmUnID8gJ1NldCB0b2dnbGUgaWNvbi4uLicgOiBjdXJyZW50VG9nZ2xlSWNvbikub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci50b2dnbGVJY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci50b2dnbGVJY29uID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRidXR0b24uYnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQWRkIHJlc2V0IGJ1dHRvbiBpZiB0b2dnbGUgaWNvbiBpcyBzZXRcclxuXHRcdFx0XHRcdGlmIChoYXNUb2dnbGVJY29uKSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xFbCA9IHNldHRpbmcuY29udHJvbEVsO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci10b2dnbGUtaWNvbi1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvZ2dsZSBpY29uJyB9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhyZXNldEJ1dHRvbiwgeyBtYXJnaW5SaWdodDogJzAuNXJlbScgfSk7XHJcblx0XHRcdFx0XHRcdFx0cmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gdG8gcHJldmVudCBqdW1waW5nXHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXI7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZW1vdmUgdG9nZ2xlIGljb25cclxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci50b2dnbGVJY29uID0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlciB3aXRoIG11bHRpcGxlIGF0dGVtcHRzXHJcblx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBbHNvIHRyeSBhZnRlciBhIHNob3J0IGRlbGF5IGluIGNhc2UgRE9NIGlzbid0IHJlYWR5XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIEluc2VydCByZXNldCBidXR0b24gYmVmb3JlIHRoZSBtYWluIGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRcdGlmIChidXR0b25FbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgYnV0dG9uRWwpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb250cm9sRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFVzZSBhY3RpdmUgY2xhc3Mgb3B0aW9uIChleHBsb3JlciBvbmx5KVxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1VzZSBhY3RpdmUgY2xhc3MgaW5zdGVhZCBvZiBpY29uIHN3YXAnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIHRvZ2dsZWQgb24sIGFkZCBpcy1hY3RpdmUgY2xhc3MgaW5zdGVhZCBvZiBzd2FwcGluZyBpY29uIChleHBsb3JlciBvbmx5KScpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUocGFpci51c2VBY3RpdmVDbGFzcyA/PyBmYWxzZSk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRwYWlyLnVzZUFjdGl2ZUNsYXNzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHR0b2dnbGUudG9nZ2xlRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZnRlciBhbGwgc2V0dGluZ3MgYXJlIGFkZGVkLCBhcHBseSBjb2xsYXBzZSBzdGF0ZSBmcm9tIE1hcFxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHNhdmVkRXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkU3RhdGVzLmdldChwYWlyLmlkKSA/PyBmYWxzZTtcclxuXHRcdFx0b3RoZXJTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmdFbCA9PiB7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoc2V0dGluZ0VsLCB7IGRpc3BsYXk6IHNhdmVkRXhwYW5kZWQgPyAnJyA6ICdub25lJyB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LCAwKTtcclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBNb2JpbGUgVGFiIC0gQWxsIG1vYmlsZS1zcGVjaWZpYyBzZXR0aW5nc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IFRhYlJlbmRlcmVyIH0gZnJvbSAnLi4vY29tbW9uL1RhYlJlbmRlcmVyJztcclxuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCwgU2V0dGluZ3NDb250YWluZXIgfSBmcm9tICcuLi8uLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xyXG5pbXBvcnQgeyBDb21tYW5kUGlja2VyTW9kYWwgfSBmcm9tICcuLi8uLi9tb2RhbHMvQ29tbWFuZFBpY2tlck1vZGFsJztcclxuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IFVJU2V0dGluZ3MgfSBmcm9tICcuLi8uLi9zZXR0aW5ncyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTW9iaWxlVGFiIGV4dGVuZHMgVGFiUmVuZGVyZXIge1xyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRcdC8vIE1vYmlsZVxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Y29uc3QgbW9iaWxlR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ01vYmlsZScsICd1aS10d2Vha2VyJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG1vYmlsZUdyb3VwLCAnSGlkZSBcIk1vYmlsZSBjaGV2cm9uc1wiIGljb24nLCAnSGlkZSBcIk1vYmlsZSBjaGV2cm9uc1wiIGljb24gKGxvbmctcHJlc3MgZmxhaXIpIGluIG1vYmlsZSBuYXZiYXIuJywgJ21vYmlsZUNoZXZyb25zSWNvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJOYXZpZ2F0ZSBiYWNrXCIgYnV0dG9uJywgJ0hpZGUgXCJOYXZpZ2F0ZSBiYWNrXCIgYnV0dG9uIGluIG1vYmlsZSBuYXZiYXIuJywgJ25hdmlnYXRlQmFja0J1dHRvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJOYXZpZ2F0ZSBmb3J3YXJkXCIgYnV0dG9uJywgJ0hpZGUgXCJOYXZpZ2F0ZSBmb3J3YXJkXCIgYnV0dG9uIGluIG1vYmlsZSBuYXZiYXIuJywgJ25hdmlnYXRlRm9yd2FyZEJ1dHRvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJRdWljayBzd2l0Y2hlclwiIGJ1dHRvbicsICdIaWRlIFwiUXVpY2sgc3dpdGNoZXJcIiBidXR0b24gaW4gbW9iaWxlIG5hdmJhci4nLCAncXVpY2tTd2l0Y2hlckJ1dHRvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJOZXcgdGFiXCIgYnV0dG9uJywgJ0hpZGUgXCJOZXcgdGFiXCIgYnV0dG9uIGluIG1vYmlsZSBuYXZiYXIuJywgJ21vYmlsZU5ld1RhYkJ1dHRvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJPcGVuIHRhYnNcIiBidXR0b24nLCAnSGlkZSBcIk9wZW4gdGFic1wiIGJ1dHRvbiBpbiBtb2JpbGUgbmF2YmFyLicsICdvcGVuVGFiQnV0dG9uJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG1vYmlsZUdyb3VwLCAnSGlkZSBcIlJpYmJvbiBtZW51XCIgYnV0dG9uJywgJ0hpZGUgXCJSaWJib24gbWVudVwiIGJ1dHRvbiBpbiBtb2JpbGUgbmF2YmFyLicsICdyaWJib25NZW51QnV0dG9uJyk7XHJcblxyXG5cdFx0Ly8gU3dhcCBidXR0b24gaWNvblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG1vYmlsZUdyb3VwLCAnU3dhcCBtb2JpbGUgbmV3IHRhYiBpY29uJywgJ1JlcGxhY2UgdGhlIG5ldyB0YWIgcGx1cyBpY29uIHdpdGggYSBob21lIGJ1dHRvbiBpY29uIGluIG1vYmlsZSBuYXZiYXIuJywgJ3N3YXBNb2JpbGVOZXdUYWJJY29uJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG1vYmlsZUdyb3VwLCAnSGlkZSB0aXRsZScsICdIaWRlIHRoZSB0aXRsZSBpbiBtb2JpbGUgdmlldyBoZWFkZXJzLicsICdoaWRlTW9iaWxlVGl0bGUnKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcobW9iaWxlR3JvdXAsICdIaWRlIHN5bmMgaWNvbicsICdIaWRlIHN5bmMgc3RhdHVzIGljb25zIGluIG1vYmlsZSBpbnRlcmZhY2UuJywgJ2hpZGVNb2JpbGVTeW5jSWNvbicpO1xyXG5cclxuXHRcdC8vIFJlcGxhY2Ugc3luYyBidXR0b24gd2l0aCBjdXN0b20gYWN0aW9uXHJcblx0XHR0aGlzLnJlbmRlclN5bmNCdXR0b25SZXBsYWNlbWVudChjb250YWluZXIsIG1vYmlsZUdyb3VwKTtcclxuXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHQvLyBNb2JpbGUgbmF2aWdhdGlvbiBtZW51XHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHRjb25zdCBtb2JpbGVOYXZHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCAnTW9iaWxlIG5hdmlnYXRpb24gbWVudScsICd1aS10d2Vha2VyJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRQb3NpdGlvblNldHRpbmcobW9iaWxlTmF2R3JvdXAsICdcIk5hdmlnYXRlIGJhY2tcIiBidXR0b24gcG9zaXRpb24nLCAnU2VsZWN0IHRoZSBwb3NpdGlvbiBmb3IgdGhlIFwiTmF2aWdhdGUgYmFja1wiIGJ1dHRvbiAoZGVmYXVsdCAxKS4nLCAnbmF2aWdhdGVCdXR0b25Qb3NpdGlvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkUG9zaXRpb25TZXR0aW5nKG1vYmlsZU5hdkdyb3VwLCAnXCJOYXZpZ2F0ZSBmb3J3YXJkXCIgYnV0dG9uIHBvc2l0aW9uJywgJ1NlbGVjdCB0aGUgcG9zaXRpb24gZm9yIHRoZSBcIk5hdmlnYXRlIGZvcndhcmRcIiBidXR0b24gKGRlZmF1bHQgMikuJywgJ25hdmlnYXRpb25CdXR0b25Qb3NpdGlvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkUG9zaXRpb25TZXR0aW5nKG1vYmlsZU5hdkdyb3VwLCAnXCJRdWljayBzd2l0Y2hlclwiIGJ1dHRvbiBwb3NpdGlvbicsICdTZWxlY3QgdGhlIHBvc2l0aW9uIGZvciB0aGUgXCJRdWljayBzd2l0Y2hlclwiIGJ1dHRvbiAoZGVmYXVsdCAzKS4nLCAncXVpY2tTd2l0Y2hlclBvc2l0aW9uJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRQb3NpdGlvblNldHRpbmcobW9iaWxlTmF2R3JvdXAsICdcIk5ldyB0YWJcIiBidXR0b24gcG9zaXRpb24nLCAnU2VsZWN0IHRoZSBwb3NpdGlvbiBmb3IgdGhlIFwiTmV3IHRhYlwiIGJ1dHRvbiAoZGVmYXVsdCA0KS4nLCAnbmV3VGFiUG9zaXRpb24nKTtcclxuXHJcblx0XHR0aGlzLmFkZFBvc2l0aW9uU2V0dGluZyhtb2JpbGVOYXZHcm91cCwgJ1wiT3BlbiB0YWJzXCIgYnV0dG9uIHBvc2l0aW9uJywgJ1NlbGVjdCB0aGUgcG9zaXRpb24gZm9yIHRoZSBcIk9wZW4gdGFic1wiIGJ1dHRvbiAoZGVmYXVsdCA1KS4nLCAnb3BlblRhYnNQb3NpdGlvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkUG9zaXRpb25TZXR0aW5nKG1vYmlsZU5hdkdyb3VwLCAnXCJSaWJib24gbWVudVwiIGJ1dHRvbiBwb3NpdGlvbicsICdTZWxlY3QgdGhlIHBvc2l0aW9uIGZvciB0aGUgXCJSaWJib24gbWVudVwiIGJ1dHRvbiAoZGVmYXVsdCA2KS4nLCAncmliYm9uTWVudVBvc2l0aW9uJyk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZFRvZ2dsZVNldHRpbmcoZ3JvdXA6IFNldHRpbmdzQ29udGFpbmVyLCBuYW1lOiBzdHJpbmcsIGRlc2M6IHN0cmluZywga2V5OiBrZXlvZiBVSVNldHRpbmdzKSB7XHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZShuYW1lKVxyXG5cdFx0XHRcdC5zZXREZXNjKGRlc2MpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKEJvb2xlYW4odGhpcy5nZXRTZXR0aW5ncygpW2tleV0pKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0KHRoaXMuZ2V0U2V0dGluZ3MoKVtrZXldIGFzIGJvb2xlYW4pID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhZGRQb3NpdGlvblNldHRpbmcoZ3JvdXA6IFNldHRpbmdzQ29udGFpbmVyLCBuYW1lOiBzdHJpbmcsIGRlc2M6IHN0cmluZywga2V5OiBrZXlvZiBVSVNldHRpbmdzKSB7XHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZShuYW1lKVxyXG5cdFx0XHRcdC5zZXREZXNjKGRlc2MpXHJcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG5cdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gNjsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihTdHJpbmcoaSksIFN0cmluZyhpKSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLmdldFNldHRpbmdzKClba2V5XTtcclxuXHRcdFx0XHRcdGNvbnN0IHN0cmluZ1ZhbHVlID0gdHlwZW9mIGN1cnJlbnRWYWx1ZSA9PT0gJ3N0cmluZycgPyBjdXJyZW50VmFsdWUgOiAnMSc7XHJcblx0XHRcdFx0XHRkcm9wZG93bi5zZXRWYWx1ZShzdHJpbmdWYWx1ZSkub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdCh0aGlzLmdldFNldHRpbmdzKClba2V5XSBhcyBzdHJpbmcpID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlclN5bmNCdXR0b25SZXBsYWNlbWVudChjb250YWluZXI6IEhUTUxFbGVtZW50LCBncm91cDogU2V0dGluZ3NDb250YWluZXIpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xyXG5cdFx0aWYgKCFzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQpIHtcclxuXHRcdFx0c2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50ID0ge1xyXG5cdFx0XHRcdGVuYWJsZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdGNvbW1hbmRJZDogJ3VpLXR3ZWFrZXI6b3Blbi1zZXR0aW5ncycsXHJcblx0XHRcdFx0aWNvbklkOiAnd3JlbmNoJyxcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnUmVwbGFjZSBzeW5jIGJ1dHRvbiB3aXRoIGN1c3RvbSBhY3Rpb24nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdSZXBsYWNlIHRoZSBzeW5jIGJ1dHRvbiBpbiB0aGUgbW9iaWxlIHNpZGViYXIgd2l0aCBhIGN1c3RvbSBpY29uIGFuZCBjb21tYW5kLiBUaGlzIHdpbGwgaGlkZSB0aGUgb3JpZ2luYWwgc3luYyBidXR0b24gYW5kIHNob3cgeW91ciBjdXN0b20gYnV0dG9uIGluc3RlYWQuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUoc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50LmVuYWJsZWQpLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudCkge1xyXG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudCA9IHtcclxuXHRcdFx0XHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXHJcblx0XHRcdFx0XHRcdFx0XHRjb21tYW5kSWQ6ICd1aS10d2Vha2VyOm9wZW4tc2V0dGluZ3MnLFxyXG5cdFx0XHRcdFx0XHRcdFx0aWNvbklkOiAnd3JlbmNoJyxcclxuXHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5lbmFibGVkID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBSZWZyZXNoIHRoZSBjdXJyZW50IHRhYiBjb250ZW50IHdoaWxlIHByZXNlcnZpbmcgc2Nyb2xsXHJcblx0XHRcdFx0XHRcdFx0Ly8gRGVmZXIgdGhlIHJlbmRlciB0byBwcmV2ZW50IHRoZSBVSSBmcm9tIGdldHRpbmcgXCJzdHVja1wiXHJcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBjb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyXHJcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU2hvdyBjb21tYW5kIGFuZCBpY29uIHBpY2tlcnMgb25seSBpZiByZXBsYWNlbWVudCBpcyBlbmFibGVkXHJcblx0XHRpZiAoc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50LmVuYWJsZWQpIHtcclxuXHRcdFx0Y29uc3QgZ2V0Q29tbWFuZE5hbWUgPSAoY29tbWFuZElkOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG5cdFx0XHRcdGlmICghY29tbWFuZElkKSByZXR1cm4gJ1NlbGVjdCBjb21tYW5kLi4uJztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Y29uc3QgY29tbWFuZFJlZ2lzdHJ5ID0gKHRoaXMuYXBwIGFzIHsgY29tbWFuZHM/OiB7IGxpc3RDb21tYW5kcz86ICgpID0+IEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+IH0gfSkuY29tbWFuZHM7XHJcblx0XHRcdFx0XHRpZiAoY29tbWFuZFJlZ2lzdHJ5ICYmIHR5cGVvZiBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGNvbW1hbmRzID0gY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcygpO1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjb21tYW5kID0gY29tbWFuZHMuZmluZCgoY21kKSA9PiBjbWQgJiYgY21kLmlkID09PSBjb21tYW5kSWQpO1xyXG5cdFx0XHRcdFx0XHRpZiAoY29tbWFuZD8ubmFtZSkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBjb21tYW5kLm5hbWU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdC8vIEVycm9yIGdldHRpbmcgY29tbWFuZCBuYW1lXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAnU2VsZWN0IGNvbW1hbmQuLi4nO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Y29uc3QgY29tbWFuZE5hbWUgPSBnZXRDb21tYW5kTmFtZShzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkKTtcclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdDb21tYW5kJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGNvbW1hbmQgdG8gZXhlY3V0ZSB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZCcpXHJcblx0XHRcdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGNvbW1hbmROYW1lIHx8ICdTZWxlY3QgY29tbWFuZC4uLicpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IENvbW1hbmRQaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGNvbW1hbmRJZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50ID0ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZElkOiAndWktdHdlYWtlcjpvcGVuLXNldHRpbmdzJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50LmNvbW1hbmRJZCA9IGNvbW1hbmRJZDtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlZnJlc2ggdGhlIGN1cnJlbnQgdGFiIGNvbnRlbnQgd2hpbGUgcHJlc2VydmluZyBzY3JvbGxcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gY29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCA1MCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Y29uc3QgZ2V0SWNvbk5hbWUgPSAoaWNvbklkOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG5cdFx0XHRcdGlmICghaWNvbklkKSByZXR1cm4gJyc7XHJcblx0XHRcdFx0cmV0dXJuIGljb25JZFxyXG5cdFx0XHRcdFx0LnJlcGxhY2UoL15sdWNpZGUtLywgJycpXHJcblx0XHRcdFx0XHQuc3BsaXQoJy0nKVxyXG5cdFx0XHRcdFx0Lm1hcCgod29yZCkgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkpXHJcblx0XHRcdFx0XHQuam9pbignICcpO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Y29uc3QgaWNvbk5hbWUgPSBnZXRJY29uTmFtZShzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkKTtcclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdJY29uJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGljb24gdG8gZGlzcGxheSBvbiB0aGUgYnV0dG9uJylcclxuXHRcdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoaWNvbk5hbWUgfHwgJ1NlbGVjdCBpY29uLi4uJykub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQgPSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZW5hYmxlZDogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb21tYW5kSWQ6ICd1aS10d2Vha2VyOm9wZW4tc2V0dGluZ3MnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXHJcblx0XHRcdFx0XHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVmcmVzaCB0aGUgY3VycmVudCB0YWIgY29udGVudCB3aGlsZSBwcmVzZXJ2aW5nIHNjcm9sbFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBjb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0sIDUwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogVGFiIEJhciBNYW5hZ2VyIC0gTWFuYWdlcyBjdXN0b20gY29tbWFuZCBidXR0b25zIGluIHBhZ2UgaGVhZGVycyAodGFiIGJhcilcclxuICogQmFzZWQgb24gQ29tbWFuZGVyJ3MgUGFnZUhlYWRlck1hbmFnZXIgd2l0aCBtZC9tZHgtb25seSBmaWx0ZXJpbmdcclxuICovXHJcblxyXG5pbXBvcnQgeyBJdGVtVmlldywgTWVudSwgV29ya3NwYWNlTGVhZiwgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IFVJVHdlYWtlclBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHsgQ29tbWFuZEljb25QYWlyIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBtYXRjaGVzRmlsZVR5cGVGaWx0ZXIsIGlzTW9kZUFjdGl2ZSwgaXNDb21tYW5kQ2hlY2tlZCB9IGZyb20gJy4uL3V0aWxzL2NvbW1hbmRVdGlscyc7XHJcbmltcG9ydCB7IEljb25QaWNrZXJNb2RhbCB9IGZyb20gJy4uL21vZGFscy9JY29uUGlja2VyTW9kYWwnO1xyXG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4uL3V0aWxzL2Nzc1V0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUYWJCYXJNYW5hZ2VyIHtcclxuXHRwcml2YXRlIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luO1xyXG5cdHByaXZhdGUgYnV0dG9ucyA9IG5ldyBXZWFrTWFwPEl0ZW1WaWV3LCBNYXA8c3RyaW5nLCBIVE1MRWxlbWVudD4+KCk7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKSB7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuaW5pdCgpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXQgcGFpcnMoKTogQ29tbWFuZEljb25QYWlyW10ge1xyXG5cdFx0cmV0dXJuIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzIHx8IFtdO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBpbml0KCk6IHZvaWQge1xyXG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXIoKCkgPT4ge1xyXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGJ1dHRvbnMgb24gcGx1Z2luIHVubG9hZFxyXG5cdFx0XHR0aGlzLnJlbW92ZUJ1dHRvbnNGcm9tQWxsTGVhdmVzKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuYWRkQnV0dG9uc1RvQWxsTGVhdmVzKCk7XHJcblx0XHRcdH0pXHJcblx0XHQpO1xyXG5cclxuXHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PlxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHRoaXMuYWRkQnV0dG9uc1RvQWxsTGVhdmVzKCksIDEwMClcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZFBhZ2VIZWFkZXJCdXR0b24obGVhZjogV29ya3NwYWNlTGVhZiwgcGFpcjogQ29tbWFuZEljb25QYWlyKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGlkIH0gPSBwYWlyO1xyXG5cdFx0Ly8gVXNlIHVzZXItc2V0IG5hbWUgZm9yIHRoZSBidXR0b24gdG9vbHRpcFxyXG5cdFx0Y29uc3QgbmFtZSA9IHBhaXIubmFtZTtcclxuXHRcdGNvbnN0IHsgdmlldyB9ID0gbGVhZjtcclxuXHRcdGlmICghKHZpZXcgaW5zdGFuY2VvZiBJdGVtVmlldykpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGJ1dHRvbnMgPSB0aGlzLmJ1dHRvbnNGb3IobGVhZiwgdHJ1ZSk7XHJcblx0XHRpZiAoIWJ1dHRvbnMpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIGJ1dHRvbiBhbHJlYWR5IGV4aXN0cywgdXBkYXRlIGl0cyBuYW1lIGFuZCBjb2xvciBpbnN0ZWFkIG9mIGNyZWF0aW5nIG5ldyBvbmVcclxuXHRcdGlmIChidXR0b25zLmhhcyhpZCkpIHtcclxuXHRcdFx0Y29uc3QgZXhpc3RpbmdCdXR0b24gPSBidXR0b25zLmdldChpZCk7XHJcblx0XHRcdGlmIChleGlzdGluZ0J1dHRvbikge1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSB0b29sdGlwL2FyaWEtbGFiZWwgd2l0aCBuZXcgbmFtZVxyXG5cdFx0XHRcdGV4aXN0aW5nQnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIG5hbWUpO1xyXG5cdFx0XHRcdGV4aXN0aW5nQnV0dG9uLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBuYW1lKTtcclxuXHRcdFx0XHQvLyBVcGRhdGUgY29sb3IgaWYgbmVlZGVkIChvbmx5IGlmIG5vdCBibGFjayAtIGJsYWNrID0gZGVmYXVsdClcclxuXHRcdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRcdHNldENzc1Byb3BzKGV4aXN0aW5nQnV0dG9uLCB7IGNvbG9yOiBwYWlyLmNvbG9yIH0pO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRleGlzdGluZ0J1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gVXBkYXRlIHRvZ2dsZSBzdGF0ZVxyXG5cdFx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoZXhpc3RpbmdCdXR0b24sIHBhaXIpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGZpbGUgdHlwZSBmaWx0ZXJzXHJcblx0XHRpZiAoIW1hdGNoZXNGaWxlVHlwZUZpbHRlcihsZWFmLCBwYWlyLnNob3dPbkZpbGVUeXBlcywgcGFpci5oaWRlT25GaWxlVHlwZXMpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEZXRlcm1pbmUgaW5pdGlhbCBpY29uIGJhc2VkIG9uIHRvZ2dsZSBzdGF0ZVxyXG5cdFx0Y29uc3QgaW5pdGlhbEljb24gPSB0aGlzLmdldEljb25Gb3JUb2dnbGVTdGF0ZShwYWlyKTtcclxuXHJcblx0XHRjb25zdCBidXR0b25JY29uID0gdmlldy5hZGRBY3Rpb24oaW5pdGlhbEljb24sIG5hbWUsICgpID0+IHtcclxuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGxlYWYsIHsgZm9jdXM6IHRydWUgfSk7XHJcblx0XHRcdGNvbnN0IGNvbW1hbmRzID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBleGVjdXRlQ29tbWFuZEJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPiB9IH0pLmNvbW1hbmRzO1xyXG5cdFx0XHRpZiAoY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZCkge1xyXG5cdFx0XHRcdC8vIENvbW1hbmQgZXhlY3V0aW9uIGlzIHRyYWNrZWQgYnkgdGhlIGludGVyY2VwdG9yIGluIG1haW4udHNcclxuXHRcdFx0XHQvLyBKdXN0IGV4ZWN1dGUgdGhlIGNvbW1hbmQgLSB0aGUgaW50ZXJjZXB0b3Igd2lsbCBoYW5kbGUgdG9nZ2xlIHRyYWNraW5nXHJcblx0XHRcdFx0dm9pZCBjb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoaWQpO1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSB0b2dnbGUgc3RhdGUgYWZ0ZXIgY29tbWFuZCBleGVjdXRpb25cclxuXHRcdFx0XHQvLyBUaGUgaW50ZXJjZXB0b3Igd2lsbCBhbHNvIHJlZnJlc2gsIGJ1dCB3ZSB1cGRhdGUgdGhpcyBidXR0b24gaW1tZWRpYXRlbHkgZm9yIHJlc3BvbnNpdmVuZXNzXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbkljb24sIHBhaXIpO1xyXG5cdFx0XHRcdFx0Ly8gQWxzbyB1cGRhdGUgYWxsIG90aGVyIGJ1dHRvbnMgZm9yIHRoaXMgY29tbWFuZFxyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGVBbGxCdXR0b25zRm9yQ29tbWFuZChpZCk7XHJcblx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRidXR0b25zLnNldChpZCwgYnV0dG9uSWNvbik7XHJcblxyXG5cdFx0YnV0dG9uSWNvbi5hZGRDbGFzc2VzKFsndWktdHdlYWtlci10YWItYmFyLWJ1dHRvbicsIGlkXSk7XHJcblx0XHQvLyBPbmx5IGFwcGx5IGNvbG9yIGlmIGl0J3Mgc2V0IGFuZCBub3QgYmxhY2sgKGJsYWNrID0gZGVmYXVsdClcclxuXHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRzZXRDc3NQcm9wcyhidXR0b25JY29uLCB7IGNvbG9yOiBwYWlyLmNvbG9yIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFVwZGF0ZSB0b2dnbGUgc3RhdGUgYWZ0ZXIgY3JlYXRpb25cclxuXHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uSWNvbiwgcGFpcik7XHJcblxyXG5cdFx0YnV0dG9uSWNvbi5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChldmVudCkgPT4ge1xyXG5cdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0bmV3IE1lbnUoKVxyXG5cdFx0XHRcdC5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKCdDaGFuZ2UgaWNvbicpXHJcblx0XHRcdFx0XHRcdC5zZXRJY29uKCdsdWNpZGUtaW1hZ2UtcGx1cycpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5wbHVnaW4uYXBwLCAoaWNvbklkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoaWNvbklkICYmIGljb25JZCAhPT0gcGFpci5pY29uKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuaWNvbiA9IGljb25JZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKCdEZWxldGUnKVxyXG5cdFx0XHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLXRyYXNoJylcclxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5yZW1vdmVDb21tYW5kKHBhaXIpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdC8vIEFkZCB3YXJuaW5nIGNsYXNzIHRvIG1ha2UgdGV4dCBhbmQgaWNvbiByZWRcclxuXHRcdFx0XHRcdGNvbnN0IGRvbSA9IChpdGVtIGFzIHVua25vd24gYXMgeyBkb206IEhUTUxFbGVtZW50IH0pLmRvbTtcclxuXHRcdFx0XHRcdGlmIChkb20pIHtcclxuXHRcdFx0XHRcdFx0ZG9tLmNsYXNzTGlzdC5hZGQoJ21vZC13YXJuaW5nJyk7XHJcblx0XHRcdFx0XHRcdC8vIEFsc28gbWFrZSB0aGUgaWNvbiByZWRcclxuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbkVsID0gZG9tLnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWl0ZW0taWNvbiBzdmcnKTtcclxuXHRcdFx0XHRcdFx0aWYgKGljb25FbCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFVzZSBzZXRDc3NQcm9wcyB0byBzZXQgY29sb3IgKGFscmVhZHkgaW1wb3J0ZWQgZnJvbSB1aU1hbmFnZXIpXHJcblx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkVsIGFzIEhUTUxFbGVtZW50LCB7IGNvbG9yOiAndmFyKC0tdGV4dC1lcnJvciknIH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYnV0dG9uc0ZvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBjcmVhdGUgPSBmYWxzZSkge1xyXG5cdFx0aWYgKCEobGVhZi52aWV3IGluc3RhbmNlb2YgSXRlbVZpZXcpKSByZXR1cm47XHJcblx0XHRpZiAoY3JlYXRlICYmICF0aGlzLmJ1dHRvbnMuaGFzKGxlYWYudmlldykpXHJcblx0XHRcdHRoaXMuYnV0dG9ucy5zZXQobGVhZi52aWV3LCBuZXcgTWFwKCkpO1xyXG5cdFx0cmV0dXJuIHRoaXMuYnV0dG9ucy5nZXQobGVhZi52aWV3KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkQnV0dG9uc1RvQWxsTGVhdmVzKHJlZnJlc2ggPSBmYWxzZSk6IHZvaWQge1xyXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5hZGRCdXR0b25zVG9MZWFmKGxlYWYsIHJlZnJlc2gpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW1vdmVCdXR0b25zRnJvbUFsbExlYXZlcygpOiB2b2lkIHtcclxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PlxyXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+XHJcblx0XHRcdFx0dGhpcy5yZW1vdmVCdXR0b25zRnJvbUxlYWYobGVhZilcclxuXHRcdFx0KVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkQnV0dG9uc1RvTGVhZihsZWFmOiBXb3Jrc3BhY2VMZWFmLCByZWZyZXNoID0gZmFsc2UpOiB2b2lkIHtcclxuXHRcdGlmICghKGxlYWYudmlldyBpbnN0YW5jZW9mIEl0ZW1WaWV3KSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZiAocmVmcmVzaCkge1xyXG5cdFx0XHR0aGlzLnJlbW92ZUJ1dHRvbnNGcm9tTGVhZihsZWFmKTtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5idXR0b25zRm9yKGxlYWYpPy5zaXplKSB7XHJcblx0XHRcdC8vIFZpZXcgYWxyZWFkeSBoYXMgYnV0dG9ucyBhbmQgd2UncmUgbm90IGRvaW5nIGEgZnVsbCByZWZyZXNoXHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGZvciAobGV0IGkgPSB0aGlzLnBhaXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblx0XHRcdGNvbnN0IHBhaXIgPSB0aGlzLnBhaXJzW2ldO1xyXG5cdFx0XHRpZiAoaXNNb2RlQWN0aXZlKHBhaXIubW9kZSwgdGhpcy5wbHVnaW4pKSB7XHJcblx0XHRcdFx0dGhpcy5hZGRQYWdlSGVhZGVyQnV0dG9uKGxlYWYsIHBhaXIpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbW92ZUJ1dHRvbnNGcm9tTGVhZihsZWFmOiBXb3Jrc3BhY2VMZWFmKSB7XHJcblx0XHRjb25zdCBidXR0b25zID0gdGhpcy5idXR0b25zRm9yKGxlYWYpO1xyXG5cdFx0aWYgKGJ1dHRvbnMpIHtcclxuXHRcdFx0Zm9yIChjb25zdCBidXR0b24gb2YgYnV0dG9ucy52YWx1ZXMoKSkgYnV0dG9uLmRldGFjaCgpO1xyXG5cdFx0XHRidXR0b25zPy5jbGVhcigpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIHJlb3JkZXIoKTogdm9pZCB7XHJcblx0XHR0aGlzLmFkZEJ1dHRvbnNUb0FsbExlYXZlcyh0cnVlKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBidXR0b24gbmFtZXMvdG9vbHRpcHMgZm9yIGFsbCBleGlzdGluZyBidXR0b25zXHJcblx0ICovXHJcblx0cHVibGljIHVwZGF0ZUJ1dHRvbk5hbWVzKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdGlmICghKGxlYWYudmlldyBpbnN0YW5jZW9mIEl0ZW1WaWV3KSkgcmV0dXJuO1xyXG5cdFx0XHRjb25zdCBidXR0b25zID0gdGhpcy5idXR0b25zRm9yKGxlYWYpO1xyXG5cdFx0XHRpZiAoIWJ1dHRvbnMpIHJldHVybjtcclxuXHJcblx0XHRcdGZvciAoY29uc3QgW2lkLCBidXR0b25dIG9mIGJ1dHRvbnMuZW50cmllcygpKSB7XHJcblx0XHRcdFx0Y29uc3QgcGFpciA9IHRoaXMucGFpcnMuZmluZChwID0+IHAuaWQgPT09IGlkKTtcclxuXHRcdFx0XHRpZiAocGFpcikge1xyXG5cdFx0XHRcdFx0Ly8gVXBkYXRlIHRvb2x0aXAvYXJpYS1sYWJlbCB3aXRoIGN1cnJlbnQgbmFtZVxyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHBhaXIubmFtZSk7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0QXR0cmlidXRlKCd0aXRsZScsIHBhaXIubmFtZSk7XHJcblx0XHRcdFx0XHQvLyBVcGRhdGUgY29sb3IgaWYgbmVlZGVkXHJcblx0XHRcdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoYnV0dG9uLCB7IGNvbG9yOiBwYWlyLmNvbG9yIH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gVXBkYXRlIHRvZ2dsZSBzdGF0ZVxyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShidXR0b24sIHBhaXIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgaWNvbiBmb3IgY3VycmVudCB0b2dnbGUgc3RhdGVcclxuXHQgKi9cclxuXHRwcml2YXRlIGdldEljb25Gb3JUb2dnbGVTdGF0ZShwYWlyOiBDb21tYW5kSWNvblBhaXIpOiBzdHJpbmcge1xyXG5cdFx0aWYgKCFwYWlyLnRvZ2dsZUljb24pIHtcclxuXHRcdFx0cmV0dXJuIHBhaXIuaWNvbjtcclxuXHRcdH1cclxuXHRcdGNvbnN0IGlzQ2hlY2tlZCA9IGlzQ29tbWFuZENoZWNrZWQocGFpci5pZCwgdGhpcy5wbHVnaW4pO1xyXG5cdFx0cmV0dXJuIGlzQ2hlY2tlZCA/IHBhaXIudG9nZ2xlSWNvbiA6IHBhaXIuaWNvbjtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBidXR0b24gdG9nZ2xlIHN0YXRlIChpY29uIHN3YXAgb25seSBmb3IgdGFiIGJhcilcclxuXHQgKi9cclxuXHRwcml2YXRlIHVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbjogSFRNTEVsZW1lbnQsIHBhaXI6IENvbW1hbmRJY29uUGFpcik6IHZvaWQge1xyXG5cdFx0aWYgKCFwYWlyLnRvZ2dsZUljb24pIHtcclxuXHRcdFx0Ly8gTm8gdG9nZ2xlIGNvbmZpZ3VyZWQgLSB1c2UgZGVmYXVsdCBpY29uXHJcblx0XHRcdHNldEljb24oYnV0dG9uLCBwYWlyLmljb24pO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgY29tbWFuZCBpcyBjdXJyZW50bHkgdG9nZ2xlZCBvblxyXG5cdFx0Y29uc3QgaXNDaGVja2VkID0gaXNDb21tYW5kQ2hlY2tlZChwYWlyLmlkLCB0aGlzLnBsdWdpbik7XHJcblxyXG5cdFx0Ly8gU3dhcCBpY29uIGJhc2VkIG9uIHRvZ2dsZSBzdGF0ZVxyXG5cdFx0c2V0SWNvbihidXR0b24sIGlzQ2hlY2tlZCA/IHBhaXIudG9nZ2xlSWNvbiA6IHBhaXIuaWNvbik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgYWxsIGJ1dHRvbnMgZm9yIGEgc3BlY2lmaWMgY29tbWFuZCBJRCBhY3Jvc3MgYWxsIGxlYXZlc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgdXBkYXRlQWxsQnV0dG9uc0ZvckNvbW1hbmQoY29tbWFuZElkOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHBhaXIgPSB0aGlzLnBhaXJzLmZpbmQocCA9PiBwLmlkID09PSBjb21tYW5kSWQpO1xyXG5cdFx0aWYgKCFwYWlyKSByZXR1cm47XHJcblxyXG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdGlmICghKGxlYWYudmlldyBpbnN0YW5jZW9mIEl0ZW1WaWV3KSkgcmV0dXJuO1xyXG5cdFx0XHRjb25zdCBidXR0b25zID0gdGhpcy5idXR0b25zRm9yKGxlYWYpO1xyXG5cdFx0XHRpZiAoIWJ1dHRvbnMpIHJldHVybjtcclxuXHJcblx0XHRcdGNvbnN0IGJ1dHRvbiA9IGJ1dHRvbnMuZ2V0KGNvbW1hbmRJZCk7XHJcblx0XHRcdGlmIChidXR0b24pIHtcclxuXHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVmcmVzaCB0b2dnbGUgc3RhdGVzIGZvciBhbGwgYnV0dG9uc1xyXG5cdCAqL1xyXG5cdHB1YmxpYyByZWZyZXNoVG9nZ2xlU3RhdGVzKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdGlmICghKGxlYWYudmlldyBpbnN0YW5jZW9mIEl0ZW1WaWV3KSkgcmV0dXJuO1xyXG5cdFx0XHRjb25zdCBidXR0b25zID0gdGhpcy5idXR0b25zRm9yKGxlYWYpO1xyXG5cdFx0XHRpZiAoIWJ1dHRvbnMpIHJldHVybjtcclxuXHJcblx0XHRcdGZvciAoY29uc3QgW2lkLCBidXR0b25dIG9mIGJ1dHRvbnMuZW50cmllcygpKSB7XHJcblx0XHRcdFx0Y29uc3QgcGFpciA9IHRoaXMucGFpcnMuZmluZChwID0+IHAuaWQgPT09IGlkKTtcclxuXHRcdFx0XHRpZiAocGFpciAmJiBwYWlyLnRvZ2dsZUljb24pIHtcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uLCBwYWlyKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGFzeW5jIGFkZENvbW1hbmQocGFpcjogQ29tbWFuZEljb25QYWlyKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzKSB7XHJcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzID0gW107XHJcblx0XHR9XHJcblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kcy5wdXNoKHBhaXIpO1xyXG5cdFx0dGhpcy5hZGRCdXR0b25zVG9BbGxMZWF2ZXModHJ1ZSk7XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBhc3luYyByZW1vdmVDb21tYW5kKHBhaXI6IENvbW1hbmRJY29uUGFpcik6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kcykgcmV0dXJuO1xyXG5cdFx0Y29uc3QgaW5kZXggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kcy5pbmRleE9mKHBhaXIpO1xyXG5cdFx0aWYgKGluZGV4ID4gLTEpIHtcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuYWRkQnV0dG9uc1RvQWxsTGVhdmVzKHRydWUpO1xyXG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYXN5bmMgdXBkYXRlQ29tbWFuZChvbGRQYWlyOiBDb21tYW5kSWNvblBhaXIsIG5ld1BhaXI6IENvbW1hbmRJY29uUGFpcik6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kcykgcmV0dXJuO1xyXG5cdFx0Y29uc3QgaW5kZXggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kcy5pbmRleE9mKG9sZFBhaXIpO1xyXG5cdFx0aWYgKGluZGV4ID4gLTEpIHtcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiQmFyQ29tbWFuZHNbaW5kZXhdID0gbmV3UGFpcjtcclxuXHRcdFx0dGhpcy5hZGRCdXR0b25zVG9BbGxMZWF2ZXModHJ1ZSk7XHJcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBjb21tYW5kIG1hbmFnZW1lbnRcclxuICovXHJcblxyXG5pbXBvcnQgeyBDb21tYW5kLCBNYXJrZG93blZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgVUlUd2Vha2VyUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBNb2RlIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgdmlldyBpcyBhIG1hcmtkb3duIG9yIG1hcmtkb3dueCBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNNYXJrZG93blZpZXcobGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwpOiBib29sZWFuIHtcclxuXHRpZiAoIWxlYWY/LnZpZXcpIHJldHVybiBmYWxzZTtcclxuXHJcblx0aWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykge1xyXG5cdFx0Y29uc3QgZmlsZSA9IGxlYWYudmlldy5maWxlO1xyXG5cdFx0aWYgKCFmaWxlKSByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgZmlsZSBleHRlbnNpb24gaXMgLm1kIG9yIC5tZHhcclxuXHRcdGNvbnN0IGV4dCA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRyZXR1cm4gZXh0ID09PSAnbWQnIHx8IGV4dCA9PT0gJ21keCc7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgZmlsZSBleHRlbnNpb24gZnJvbSBhIHdvcmtzcGFjZSBsZWFmXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRGaWxlRXh0ZW5zaW9uKGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsKTogc3RyaW5nIHwgbnVsbCB7XHJcblx0aWYgKCFsZWFmPy52aWV3KSByZXR1cm4gbnVsbDtcclxuXHJcblx0Ly8gVHJ5IHRvIGdldCBmaWxlIGZyb20gdmlldyAod29ya3MgZm9yIEl0ZW1WaWV3IGFuZCBNYXJrZG93blZpZXcpXHJcblx0Y29uc3QgdmlldyA9IGxlYWYudmlldyBhcyB7IGZpbGU/OiBURmlsZSB8IG51bGwgfTtcclxuXHRjb25zdCBmaWxlID0gdmlldy5maWxlO1xyXG5cdGlmICghZmlsZSkgcmV0dXJuIG51bGw7XHJcblxyXG5cdHJldHVybiBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHZpZXcgdHlwZSBmcm9tIGEgd29ya3NwYWNlIGxlYWZcclxuICogUmV0dXJucyB0aGUgdmlldyB0eXBlIChlLmcuLCBcIm1hcmtkb3duXCIsIFwiY2FudmFzXCIsIFwiZ3JhcGhcIiwgXCJlbXB0eVwiKSBvciBudWxsXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRWaWV3VHlwZShsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCk6IHN0cmluZyB8IG51bGwge1xyXG5cdGlmICghbGVhZj8udmlldykgcmV0dXJuIG51bGw7XHJcblxyXG5cdC8vIFRyeSB0byBnZXQgdmlldyB0eXBlIGZyb20gdmlldyAoSXRlbVZpZXcgaGFzIGdldFZpZXdUeXBlIG1ldGhvZClcclxuXHRjb25zdCB2aWV3ID0gbGVhZi52aWV3IGFzIHsgZ2V0Vmlld1R5cGU/OiAoKSA9PiBzdHJpbmcgfTtcclxuXHRpZiAodmlldy5nZXRWaWV3VHlwZSAmJiB0eXBlb2Ygdmlldy5nZXRWaWV3VHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0cmV0dXJuIHZpZXcuZ2V0Vmlld1R5cGUoKS50b0xvd2VyQ2FzZSgpO1xyXG5cdH1cclxuXHJcblx0Ly8gRmFsbGJhY2s6IGNoZWNrIGlmIGl0J3MgYSBtYXJrZG93biB2aWV3XHJcblx0aWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykge1xyXG5cdFx0cmV0dXJuICdtYXJrZG93bic7XHJcblx0fVxyXG5cclxuXHQvLyBJZiBubyBmaWxlIGFuZCBubyB2aWV3IHR5cGUsIGl0J3MgbGlrZWx5IGFuIGVtcHR5IHRhYlxyXG5cdGNvbnN0IGZpbGVFeHQgPSBnZXRGaWxlRXh0ZW5zaW9uKGxlYWYpO1xyXG5cdGlmICghZmlsZUV4dCkge1xyXG5cdFx0cmV0dXJuICdlbXB0eSc7IC8vIEVtcHR5IHRhYiAobmV3IHRhYilcclxuXHR9XHJcblxyXG5cdHJldHVybiBudWxsO1xyXG59XHJcblxyXG5pbXBvcnQgeyBwYXJzZUZpbGVBbmRWaWV3VHlwZXMsIENvbW1hbmRUb2dnbGVUcmFja2VyIH0gZnJvbSAnLi9jb21tYW5kLWxvZ2ljJztcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgb3IgdmlldyBtYXRjaGVzIHRoZSBmaWxlIHR5cGUgYW5kIHZpZXcgdHlwZSBmaWx0ZXJzXHJcbiAqIHNob3dPbkZpbGVUeXBlczogU2hvdyBvbmx5IG9uIHRoZXNlIGZpbGUgdHlwZXMgKGUuZy4sIFwibWQsY2FudmFzXCIpIG9yIHZpZXcgdHlwZXMgZm9yIHZpZXdzIHdpdGhvdXQgZmlsZXMgKGUuZy4sIFwie3tncmFwaH19LHt7dGFifX1cIilcclxuICogaGlkZU9uRmlsZVR5cGVzOiBOZXZlciBzaG93IG9uIHRoZXNlIGZpbGUgdHlwZXMgKGUuZy4sIFwianBnLHBuZ1wiKSBvciB2aWV3IHR5cGVzIGZvciB2aWV3cyB3aXRob3V0IGZpbGVzIChlLmcuLCBcInt7Z3JhcGh9fVwiKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoZXNGaWxlVHlwZUZpbHRlcihcclxuXHRsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCxcclxuXHRzaG93T25GaWxlVHlwZXM6IHN0cmluZyB8IHVuZGVmaW5lZCxcclxuXHRoaWRlT25GaWxlVHlwZXM6IHN0cmluZyB8IHVuZGVmaW5lZFxyXG4pOiBib29sZWFuIHtcclxuXHRpZiAoIWxlYWY/LnZpZXcpIHJldHVybiBmYWxzZTtcclxuXHJcblx0Y29uc3Qgc2hvd0ZpbHRlcnMgPSBwYXJzZUZpbGVBbmRWaWV3VHlwZXMoc2hvd09uRmlsZVR5cGVzKTtcclxuXHRjb25zdCBoaWRlRmlsdGVycyA9IHBhcnNlRmlsZUFuZFZpZXdUeXBlcyhoaWRlT25GaWxlVHlwZXMpO1xyXG5cclxuXHRjb25zdCBmaWxlRXh0ID0gZ2V0RmlsZUV4dGVuc2lvbihsZWFmKTtcclxuXHRjb25zdCB2aWV3VHlwZSA9IGdldFZpZXdUeXBlKGxlYWYpO1xyXG5cclxuXHRpZiAoaGlkZUZpbHRlcnMuZmlsZVR5cGVzLmxlbmd0aCA+IDAgJiYgZmlsZUV4dCAmJiBoaWRlRmlsdGVycy5maWxlVHlwZXMuaW5jbHVkZXMoZmlsZUV4dCkpIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblx0aWYgKGhpZGVGaWx0ZXJzLnZpZXdUeXBlcy5sZW5ndGggPiAwICYmIHZpZXdUeXBlICYmIGhpZGVGaWx0ZXJzLnZpZXdUeXBlcy5pbmNsdWRlcyh2aWV3VHlwZSkpIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGlmIChzaG93RmlsdGVycy5maWxlVHlwZXMubGVuZ3RoID4gMCB8fCBzaG93RmlsdGVycy52aWV3VHlwZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0Y29uc3QgbWF0Y2hlc0ZpbGVUeXBlID0gZmlsZUV4dCA/IHNob3dGaWx0ZXJzLmZpbGVUeXBlcy5pbmNsdWRlcyhmaWxlRXh0KSA6IGZhbHNlO1xyXG5cdFx0Y29uc3QgbWF0Y2hlc1ZpZXdUeXBlID0gdmlld1R5cGUgPyBzaG93RmlsdGVycy52aWV3VHlwZXMuaW5jbHVkZXModmlld1R5cGUpIDogZmFsc2U7XHJcblx0XHRyZXR1cm4gbWF0Y2hlc0ZpbGVUeXBlIHx8IG1hdGNoZXNWaWV3VHlwZTtcclxuXHR9XHJcblxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgbW9kZSBpcyBhY3RpdmUgKGRlc2t0b3AvbW9iaWxlL2FueS90aGlzIGRldmljZSlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc01vZGVBY3RpdmUobW9kZTogTW9kZSwgcGx1Z2luOiBVSVR3ZWFrZXJQbHVnaW4pOiBib29sZWFuIHtcclxuXHRjb25zdCBhcHAgPSBwbHVnaW4uYXBwIGFzIHsgaXNNb2JpbGU/OiBib29sZWFuOyBhcHBJZD86IHN0cmluZyB9O1xyXG5cdGNvbnN0IGlzTW9iaWxlID0gYXBwLmlzTW9iaWxlID8/IGZhbHNlO1xyXG5cdGNvbnN0IGFwcElkID0gYXBwLmFwcElkO1xyXG5cclxuXHQvLyBIYW5kbGUgXCJ0aGlzIGRldmljZVwiIG1vZGUgKGFwcC5hcHBJZClcclxuXHRpZiAobW9kZSAhPT0gJ2FueScgJiYgbW9kZSAhPT0gJ2Rlc2t0b3AnICYmIG1vZGUgIT09ICdtb2JpbGUnKSB7XHJcblx0XHRyZXR1cm4gbW9kZSA9PT0gYXBwSWQ7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gKFxyXG5cdFx0bW9kZSA9PT0gJ2FueScgfHxcclxuXHRcdChtb2RlID09PSAnbW9iaWxlJyAmJiBpc01vYmlsZSkgfHxcclxuXHRcdChtb2RlID09PSAnZGVza3RvcCcgJiYgIWlzTW9iaWxlKVxyXG5cdCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgY29tbWFuZCBmcm9tIElEXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tbWFuZEZyb21JZChpZDogc3RyaW5nLCBwbHVnaW46IFVJVHdlYWtlclBsdWdpbik6IENvbW1hbmQgfCBudWxsIHtcclxuXHRjb25zdCBjb21tYW5kcyA9IChwbHVnaW4uYXBwIGFzIHsgY29tbWFuZHM/OiB7IGNvbW1hbmRzPzogeyBbaWQ6IHN0cmluZ106IENvbW1hbmQgfSB9IH0pLmNvbW1hbmRzO1xyXG5cdHJldHVybiBjb21tYW5kcz8uY29tbWFuZHM/LltpZF0gPz8gbnVsbDtcclxufVxyXG5cclxuLy8gR2xvYmFsIHRyYWNrZXIgaW5zdGFuY2VcclxuY29uc3QgY29tbWFuZFRvZ2dsZVRyYWNrZXIgPSBuZXcgQ29tbWFuZFRvZ2dsZVRyYWNrZXIoKTtcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGNvbW1hbmQgaXMgY3VycmVudGx5IGNoZWNrZWQvdG9nZ2xlZCBvblxyXG4gKiBGaXJzdCB0cmllcyBjaGVja0NhbGxiYWNrIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZXMgdHJhY2tlZCBzdGF0ZVxyXG4gKiBGb3Igc3BlY2lmaWMgY29tbWFuZHMgKGxpa2UgdGhlbWUgdG9nZ2xlKSwgY2hlY2tzIGFjdHVhbCBzdGF0ZSBkaXJlY3RseVxyXG4gKiBcclxuICogVGhpcyBmdW5jdGlvbiBhbHdheXMgY2hlY2tzIHRoZSBhY3R1YWwgc3RhdGUgKHZpYSBjaGVja0NhbGxiYWNrIG9yIGRpcmVjdCBkZXRlY3Rpb24pXHJcbiAqIGFuZCBzeW5jcyBpdCB3aXRoIHRyYWNrZWQgc3RhdGUsIGVuc3VyaW5nIGJ1dHRvbnMgc3RheSBpbiBzeW5jIGV2ZW4gd2hlbiBjb21tYW5kc1xyXG4gKiBhcmUgZXhlY3V0ZWQgZXh0ZXJuYWxseSAoa2V5Ym9hcmQgc2hvcnRjdXRzLCBjb21tYW5kIHBhbGV0dGUsIGV0Yy4pXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNDb21tYW5kQ2hlY2tlZChpZDogc3RyaW5nLCBwbHVnaW46IFVJVHdlYWtlclBsdWdpbik6IGJvb2xlYW4ge1xyXG5cdC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIGNvbW1hbmRzIHRoYXQgbmVlZCBkaXJlY3Qgc3RhdGUgZGV0ZWN0aW9uXHJcblx0Ly8gVGhlc2UgY29tbWFuZHMgZG9uJ3QgaGF2ZSByZWxpYWJsZSBjaGVja0NhbGxiYWNrLCBzbyB3ZSBjaGVjayBET00vYXBwIHN0YXRlIGRpcmVjdGx5XHJcblxyXG5cdC8vIFRoZW1lIHRvZ2dsZSAtIGNoZWNrIERPTSBjbGFzc1xyXG5cdGlmIChpZCA9PT0gJ3RoZW1lOnRvZ2dsZS1saWdodC1kYXJrJykge1xyXG5cdFx0Ly8gQ2hlY2sgdGhlbWUgc3RhdGUgZGlyZWN0bHkgZnJvbSBET01cclxuXHRcdC8vIE9ic2lkaWFuIHVzZXMgJ3RoZW1lLWRhcmsnIGNsYXNzIG9uIGJvZHkgZm9yIGRhcmsgbW9kZVxyXG5cdFx0Y29uc3QgaXNEYXJrID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWRhcmsnKTtcclxuXHRcdC8vIFN5bmMgdHJhY2tlZCBzdGF0ZSB3aXRoIGFjdHVhbCBzdGF0ZVxyXG5cdFx0Y29tbWFuZFRvZ2dsZVRyYWNrZXIuc3luY1N0YXRlKGlkLCBpc0RhcmspO1xyXG5cdFx0cmV0dXJuIGlzRGFyaztcclxuXHR9XHJcblxyXG5cdC8vIEVkaXRpbmcgVG9vbGJhciBoaWRlL3Nob3cgLSBjaGVjayBwbHVnaW4gc2V0dGluZ3NcclxuXHQvLyBUaGUgY29tbWFuZCBJRCBpcyAnaGlkZS1zaG93LW1lbnUnIGJ1dCBpdCdzIHJlZ2lzdGVyZWQgdW5kZXIgJ2VkaXRpbmctdG9vbGJhcjpoaWRlLXNob3ctbWVudSdcclxuXHRpZiAoaWQgPT09ICdlZGl0aW5nLXRvb2xiYXI6aGlkZS1zaG93LW1lbnUnIHx8IGlkID09PSAnaGlkZS1zaG93LW1lbnUnKSB7XHJcblx0XHQvLyBUcnkgdG8gYWNjZXNzIHRoZSBlZGl0aW5nIHRvb2xiYXIgcGx1Z2luJ3Mgc2V0dGluZ3NcclxuXHRcdGNvbnN0IHBsdWdpbnMgPSAocGx1Z2luLmFwcCBhcyB7IHBsdWdpbnM/OiB7IHBsdWdpbnM/OiB7IFtpZDogc3RyaW5nXTogeyBzZXR0aW5ncz86IHsgY01lbnVWaXNpYmlsaXR5PzogYm9vbGVhbiB9IH0gfSB9IH0pLnBsdWdpbnM7XHJcblx0XHRjb25zdCBlZGl0aW5nVG9vbGJhclBsdWdpbiA9IHBsdWdpbnM/LnBsdWdpbnM/LlsnZWRpdGluZy10b29sYmFyJ107XHJcblx0XHRpZiAoZWRpdGluZ1Rvb2xiYXJQbHVnaW4/LnNldHRpbmdzPy5jTWVudVZpc2liaWxpdHkgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRjb25zdCBpc1Zpc2libGUgPSBlZGl0aW5nVG9vbGJhclBsdWdpbi5zZXR0aW5ncy5jTWVudVZpc2liaWxpdHk7XHJcblx0XHRcdC8vIFN5bmMgdHJhY2tlZCBzdGF0ZSB3aXRoIGFjdHVhbCBzdGF0ZVxyXG5cdFx0XHRjb21tYW5kVG9nZ2xlVHJhY2tlci5zeW5jU3RhdGUoaWQsIGlzVmlzaWJsZSk7XHJcblx0XHRcdHJldHVybiBpc1Zpc2libGU7XHJcblx0XHR9XHJcblx0XHQvLyBGYWxsYmFjayB0byB0cmFja2VkIHN0YXRlIGlmIHBsdWdpbiBub3QgZm91bmRcclxuXHRcdHJldHVybiBjb21tYW5kVG9nZ2xlVHJhY2tlci5nZXRUcmFja2VkU3RhdGUoaWQpID8/IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgY29tbWFuZCA9IGdldENvbW1hbmRGcm9tSWQoaWQsIHBsdWdpbik7XHJcblx0aWYgKCFjb21tYW5kKSB7XHJcblx0XHQvLyBDb21tYW5kIG5vdCBmb3VuZCAtIGZhbGxiYWNrIHRvIHRyYWNrZWQgc3RhdGVcclxuXHRcdC8vIFRoaXMgY2FuIGhhcHBlbiB3aXRoIGN1c3RvbSBwbHVnaW4gY29tbWFuZHMgdGhhdCBoYXZlbid0IHJlZ2lzdGVyZWQgeWV0XHJcblx0XHRyZXR1cm4gY29tbWFuZFRvZ2dsZVRyYWNrZXIuZ2V0VHJhY2tlZFN0YXRlKGlkKSA/PyBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8vIENoZWNrIGlmIGNvbW1hbmQgaGFzIGEgY2hlY2tDYWxsYmFjayAocHJlZmVycmVkIG1ldGhvZCBmb3IgYWxsIGNvbW1hbmRzKVxyXG5cdGlmICh0eXBlb2YgY29tbWFuZC5jaGVja0NhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBDYWxsIGNoZWNrQ2FsbGJhY2sgd2l0aCBjaGVja2luZz10cnVlIHRvIHNlZSBpZiBpdCByZXR1cm5zIHRydWUgKGNoZWNrZWQgc3RhdGUpXHJcblx0XHRcdC8vIE5vdGU6IGNoZWNrQ2FsbGJhY2sgc2hvdWxkIHJldHVybiB0cnVlIGlmIGNoZWNrZWQsIGZhbHNlIGlmIHVuY2hlY2tlZFxyXG5cdFx0XHRjb25zdCByZXN1bHQgPSBjb21tYW5kLmNoZWNrQ2FsbGJhY2sodHJ1ZSk7XHJcblx0XHRcdGNvbnN0IGlzQ2hlY2tlZCA9IHJlc3VsdCA9PT0gdHJ1ZTtcclxuXHJcblx0XHRcdC8vIEFsd2F5cyBzeW5jIHRyYWNrZWQgc3RhdGUgd2l0aCBjaGVja0NhbGxiYWNrIHJlc3VsdFxyXG5cdFx0XHQvLyBUaGlzIGVuc3VyZXMgYnV0dG9ucyBzdGF5IGluIHN5bmMgZXZlbiB3aGVuIGNvbW1hbmRzIGFyZSBleGVjdXRlZCBleHRlcm5hbGx5XHJcblx0XHRcdC8vIChrZXlib2FyZCBzaG9ydGN1dHMsIGNvbW1hbmQgcGFsZXR0ZSwgb3RoZXIgcGx1Z2lucywgZXRjLilcclxuXHRcdFx0Y29tbWFuZFRvZ2dsZVRyYWNrZXIuc3luY1N0YXRlKGlkLCBpc0NoZWNrZWQpO1xyXG5cclxuXHRcdFx0Ly8gQWx3YXlzIHRydXN0IGNoZWNrQ2FsbGJhY2sgb3ZlciB0cmFja2VkIHN0YXRlIHdoZW4gYXZhaWxhYmxlXHJcblx0XHRcdHJldHVybiBpc0NoZWNrZWQ7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0Ly8gSWYgY2hlY2tDYWxsYmFjayB0aHJvd3MsIGZhbGwgYmFjayB0byB0cmFja2VkIHN0YXRlXHJcblx0XHRcdC8vIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgY29tbWFuZCdzIGNoZWNrQ2FsbGJhY2sgaGFzIGJ1Z3Mgb3IgaXNuJ3QgcmVhZHkgeWV0XHJcblx0XHRcdHJldHVybiBjb21tYW5kVG9nZ2xlVHJhY2tlci5nZXRUcmFja2VkU3RhdGUoaWQpID8/IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gTm8gY2hlY2tDYWxsYmFjayAtIHVzZSB0cmFja2VkIHN0YXRlXHJcblx0Ly8gVGhpcyBpcyBhIGZhbGxiYWNrIGZvciBjb21tYW5kcyB0aGF0IGRvbid0IHByb3ZpZGUgY2hlY2tDYWxsYmFja1xyXG5cdC8vIFRoZSBwZXJpb2RpYyByZWZyZXNoIHdpbGwga2VlcCB0cnlpbmcgdG8gZGV0ZWN0IHN0YXRlIGNoYW5nZXNcclxuXHRyZXR1cm4gY29tbWFuZFRvZ2dsZVRyYWNrZXIuZ2V0VHJhY2tlZFN0YXRlKGlkKSA/PyBmYWxzZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlY29yZCB0aGF0IGEgY29tbWFuZCB3YXMgZXhlY3V0ZWQgKGZvciB0b2dnbGUgdHJhY2tpbmcpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVjb3JkQ29tbWFuZEV4ZWN1dGlvbihpZDogc3RyaW5nKTogdm9pZCB7XHJcblx0Y29tbWFuZFRvZ2dsZVRyYWNrZXIucmVjb3JkRXhlY3V0aW9uKGlkKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlc2V0IHRyYWNrZWQgc3RhdGUgZm9yIGEgY29tbWFuZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q29tbWFuZFN0YXRlKGlkOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRjb21tYW5kVG9nZ2xlVHJhY2tlci5yZXNldFN0YXRlKGlkKTtcclxufSIsICIvKipcclxuICogTG9naWMtb25seSBmdW5jdGlvbnMgZm9yIGNvbW1hbmQgbWFuYWdlbWVudCwgaXNvbGF0ZWQgZnJvbSBPYnNpZGlhbiBBUElcclxuICovXHJcblxyXG4vKipcclxuICogUGFyc2UgY29tbWEtc2VwYXJhdGVkIGZpbGUgZXh0ZW5zaW9ucyBhbmQgdmlldyB0eXBlcyBpbnRvIGFycmF5c1xyXG4gKiBTdXBwb3J0cyBib3RoIGZpbGUgZXh0ZW5zaW9ucyAoZS5nLiwgXCJtZCxtZHhcIikgYW5kIHZpZXcgdHlwZXMgKGUuZy4sIFwie3tncmFwaH19LHt7Y2FudmFzfX1cIilcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUZpbGVBbmRWaWV3VHlwZXModHlwZXM6IHN0cmluZyB8IHVuZGVmaW5lZCk6IHsgZmlsZVR5cGVzOiBzdHJpbmdbXTsgdmlld1R5cGVzOiBzdHJpbmdbXSB9IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHsgZmlsZVR5cGVzOiBbXSBhcyBzdHJpbmdbXSwgdmlld1R5cGVzOiBbXSBhcyBzdHJpbmdbXSB9O1xyXG5cclxuICAgIGlmICghdHlwZXMgfHwgIXR5cGVzLnRyaW0oKSkgcmV0dXJuIHJlc3VsdDtcclxuXHJcbiAgICBjb25zdCBwYXJ0cyA9IHR5cGVzLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpLmZpbHRlcihwID0+IHApO1xyXG5cclxuICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSB2aWV3IHR5cGUgKHdyYXBwZWQgaW4ge3t9fSlcclxuICAgICAgICBjb25zdCB2aWV3VHlwZU1hdGNoID0gcGFydC5tYXRjaCgvXlxce1xceyhcXHcrKVxcfVxcfSQvKTtcclxuICAgICAgICBpZiAodmlld1R5cGVNYXRjaCkge1xyXG4gICAgICAgICAgICByZXN1bHQudmlld1R5cGVzLnB1c2godmlld1R5cGVNYXRjaFsxXS50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJdCdzIGEgZmlsZSBleHRlbnNpb25cclxuICAgICAgICAgICAgY29uc3QgZXh0ID0gcGFydC5yZXBsYWNlKC9eXFwuLywgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGlmIChleHQpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5maWxlVHlwZXMucHVzaChleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb21tYW5kIHRvZ2dsZSBzdGF0ZSB0cmFja2VyIGxvZ2ljXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tbWFuZFRvZ2dsZVRyYWNrZXIge1xyXG4gICAgcHJpdmF0ZSB0b2dnbGVTdGF0ZXMgPSBuZXcgTWFwPHN0cmluZywgYm9vbGVhbj4oKTtcclxuICAgIHByaXZhdGUgcHJldmlvdXNTdGF0ZXMgPSBuZXcgTWFwPHN0cmluZywgYm9vbGVhbj4oKTtcclxuICAgIHByaXZhdGUgZXhlY3V0aW9uQ291bnRzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcclxuXHJcbiAgICByZWNvcmRFeGVjdXRpb24oaWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IHRoaXMuZXhlY3V0aW9uQ291bnRzLmdldChpZCkgfHwgMDtcclxuICAgICAgICB0aGlzLmV4ZWN1dGlvbkNvdW50cy5zZXQoaWQsIGN1cnJlbnRDb3VudCArIDEpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlU3RhdGVzLnNldChpZCwgKGN1cnJlbnRDb3VudCArIDEpICUgMiA9PT0gMSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VHJhY2tlZFN0YXRlKGlkOiBzdHJpbmcpOiBib29sZWFuIHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9nZ2xlU3RhdGVzLmdldChpZCkgPz8gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcmV2aW91c1N0YXRlKGlkOiBzdHJpbmcpOiBib29sZWFuIHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldmlvdXNTdGF0ZXMuZ2V0KGlkKSA/PyBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0U3RhdGUoaWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlU3RhdGVzLmRlbGV0ZShpZCk7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1N0YXRlcy5kZWxldGUoaWQpO1xyXG4gICAgICAgIHRoaXMuZXhlY3V0aW9uQ291bnRzLmRlbGV0ZShpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3luY1N0YXRlKGlkOiBzdHJpbmcsIGFjdHVhbFN0YXRlOiBib29sZWFuKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFRyYWNrZWRTdGF0ZSA9IHRoaXMudG9nZ2xlU3RhdGVzLmdldChpZCk7XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50VHJhY2tlZFN0YXRlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1N0YXRlcy5zZXQoaWQsIGN1cnJlbnRUcmFja2VkU3RhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRUcmFja2VkU3RhdGUgIT09IGFjdHVhbFN0YXRlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IHRoaXMuZXhlY3V0aW9uQ291bnRzLmdldChpZCkgfHwgMDtcclxuICAgICAgICAgICAgdGhpcy5leGVjdXRpb25Db3VudHMuc2V0KGlkLCBjdXJyZW50Q291bnQgKyAxKTtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVTdGF0ZXMuc2V0KGlkLCBhY3R1YWxTdGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGhhc1N0YXRlQ2hhbmdlZChpZDogc3RyaW5nLCBjdXJyZW50U3RhdGU6IGJvb2xlYW4pOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBwcmV2aW91c1N0YXRlID0gdGhpcy5wcmV2aW91c1N0YXRlcy5nZXQoaWQpO1xyXG4gICAgICAgIHJldHVybiBwcmV2aW91c1N0YXRlICE9PSB1bmRlZmluZWQgJiYgcHJldmlvdXNTdGF0ZSAhPT0gY3VycmVudFN0YXRlO1xyXG4gICAgfVxyXG59XHJcbiIsICIvKipcbiAqIFN0YXR1cyBCYXIgTWFuYWdlciAtIFVuaWZpZWQgbWFuYWdlciBmb3IgZXhpc3RpbmcgKyBjdXN0b20gc3RhdHVzIGJhciBpdGVtc1xuICogQ29tYmluZXMgZnVuY3Rpb25hbGl0eSBmcm9tIFN0YXR1cyBCYXIgT3JnYW5pemVyIChyZW9yZGVyaW5nL2hpZGluZyBleGlzdGluZyBpdGVtcylcbiAqIGFuZCBDb21tYW5kZXIgKGFkZGluZyBjdXN0b20gY29tbWFuZHMpXG4gKi9cblxuaW1wb3J0IHsgTWVudSwgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBTdGF0dXNCYXJJdGVtLCBDb21tYW5kSWNvblBhaXIgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBpc01hcmtkb3duVmlldywgaXNNb2RlQWN0aXZlIH0gZnJvbSAnLi4vdXRpbHMvY29tbWFuZFV0aWxzJztcbmltcG9ydCB7IEljb25QaWNrZXJNb2RhbCB9IGZyb20gJy4uL21vZGFscy9JY29uUGlja2VyTW9kYWwnO1xuaW1wb3J0IHsgc2V0Q3NzUHJvcHMgfSBmcm9tICcuLi91dGlscy9jc3NVdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBTdGF0dXNCYXJNYW5hZ2VyIHtcblx0cHJpdmF0ZSBwbHVnaW46IFVJVHdlYWtlclBsdWdpbjtcblx0cHJpdmF0ZSBjdXN0b21BY3Rpb25zID0gbmV3IE1hcDxTdGF0dXNCYXJJdGVtLCBIVE1MRWxlbWVudD4oKTtcblx0cHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgb2JzZXJ2ZXI/OiBNdXRhdGlvbk9ic2VydmVyO1xuXHRwcml2YXRlIGlzUmVvcmRlcmluZyA9IGZhbHNlOyAvLyBGbGFnIHRvIHByZXZlbnQgb2JzZXJ2ZXIgZnJvbSB0cmlnZ2VyaW5nIGR1cmluZyByZW9yZGVyXG5cblx0cHJpdmF0ZSBnZXQgaXRlbXMoKTogU3RhdHVzQmFySXRlbVtdIHtcblx0XHRyZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMgfHwgW107XG5cdH1cblxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFVJVHdlYWtlclBsdWdpbikge1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMuaW5pdCgpO1xuXHR9XG5cblx0cHJpdmF0ZSBpbml0KCk6IHZvaWQge1xuXHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG5cdFx0XHR0aGlzLmNvbnRhaW5lciA9ICh0aGlzLnBsdWdpbi5hcHAgYXMgeyBzdGF0dXNCYXI/OiB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfSB9KS5zdGF0dXNCYXI/LmNvbnRhaW5lckVsID8/IG51bGw7XG5cdFx0XHRpZiAoIXRoaXMuY29udGFpbmVyKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSW5pdGlhbGl6ZSBpdGVtcyBhcnJheSBpZiBuZWVkZWRcblx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMpIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMgPSBbXTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29uc29saWRhdGUgc2V0dGluZ3MgYW5kIGVsZW1lbnRzIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHRcdFx0Ly8gVGhpcyBtZXJnZXMgc2F2ZWQgaXRlbXMgd2l0aCBjdXJyZW50IERPTSBlbGVtZW50cyBhbmQgc2F2ZXMgaW1tZWRpYXRlbHlcblx0XHRcdHRoaXMuY29uc29saWRhdGVTZXR0aW5nc0FuZEVsZW1lbnRzKCk7XG5cblx0XHRcdC8vIEFwcGx5IG9yZGVyaW5nIGFuZCB2aXNpYmlsaXR5XG5cdFx0XHR0aGlzLnJlb3JkZXIoKTtcblxuXHRcdFx0Ly8gV2F0Y2ggZm9yIG5ldyBzdGF0dXMgYmFyIGl0ZW1zIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyIGRvZXMpXG5cdFx0XHQvLyBVc2UgYSBkZWJvdW5jZSB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSByZS1yZW5kZXJzIGR1cmluZyBzZXR0aW5ncyBjaGFuZ2VzXG5cdFx0XHRsZXQgb2JzZXJ2ZXJUaW1lb3V0OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsO1xuXHRcdFx0dGhpcy5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcblx0XHRcdFx0Ly8gRG9uJ3QgdHJpZ2dlciBpZiB3ZSdyZSBjdXJyZW50bHkgcmVvcmRlcmluZyAocHJldmVudHMgaW5maW5pdGUgbG9vcHMpXG5cdFx0XHRcdGlmICh0aGlzLmlzUmVvcmRlcmluZykge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIERlYm91bmNlIG9ic2VydmVyIGNhbGxiYWNrcyB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSB1cGRhdGVzXG5cdFx0XHRcdGlmIChvYnNlcnZlclRpbWVvdXQpIHtcblx0XHRcdFx0XHRjbGVhclRpbWVvdXQob2JzZXJ2ZXJUaW1lb3V0KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRvYnNlcnZlclRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHQvLyBPbmx5IGRldGVjdCBhbmQgcmVvcmRlciBpZiB3ZSdyZSBub3QgaW4gdGhlIG1pZGRsZSBvZiBhIHJlb3JkZXIgb3BlcmF0aW9uXG5cdFx0XHRcdFx0aWYgKCF0aGlzLmlzUmVvcmRlcmluZykge1xuXHRcdFx0XHRcdFx0dGhpcy5jb25zb2xpZGF0ZVNldHRpbmdzQW5kRWxlbWVudHMoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgMjAwKTtcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMuY29udGFpbmVyLCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogZmFsc2UgfSk7XG5cblx0XHRcdC8vIFJlZ2lzdGVyIGNsZWFudXBcblx0XHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyKCgpID0+IHtcblx0XHRcdFx0dGhpcy5jbGVhbnVwKCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW1vdmUgYWxsIGJ1dHRvbnMgY3JlYXRlZCBieSB0aGlzIG1hbmFnZXIgZnJvbSB0aGUgRE9NXG5cdCAqL1xuXHRwdWJsaWMgY2xlYW51cCgpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5vYnNlcnZlcikge1xuXHRcdFx0dGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0fVxuXHRcdHRoaXMuY3VzdG9tQWN0aW9ucy5mb3JFYWNoKChhY3Rpb24pID0+IGFjdGlvbi5yZW1vdmUoKSk7XG5cdFx0dGhpcy5jdXN0b21BY3Rpb25zLmNsZWFyKCk7XG5cblx0XHQvLyBBbHNvIGNsZWFuIHVwIGFueSBidXR0b25zIHRoYXQgbWlnaHQgaGF2ZSBiZWVuIGxlZnQgYmVoaW5kIChvcnBoYW5lZClcblx0XHRpZiAodGhpcy5jb250YWluZXIpIHtcblx0XHRcdGNvbnN0IG1hbmFnZWRCdXR0b25zID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdWktdHdlYWtlci1tYW5hZ2VkPVwidHJ1ZVwiXScpO1xuXHRcdFx0bWFuYWdlZEJ1dHRvbnMuZm9yRWFjaChidG4gPT4gYnRuLnJlbW92ZSgpKTtcblxuXHRcdFx0Ly8gUmVzdG9yZSB2aXNpYmlsaXR5IG9mIGFueSBoaWRkZW4gbmF0aXZlIGl0ZW1zXG5cdFx0XHRjb25zdCBoaWRkZW5JdGVtcyA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy51aS10d2Vha2VyLXN0YXR1cy1iYXItaGlkZGVuJyk7XG5cdFx0XHRoaWRkZW5JdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5yZW1vdmVDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLWhpZGRlbicpKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBjbGFzcyBpcyBhIGR5bmFtaWMgc3RhdGUgY2xhc3MgdGhhdCBzaG91bGQgYmUgZmlsdGVyZWQgb3V0XG5cdCAqIER5bmFtaWMgc3RhdGUgY2xhc3NlcyBjaGFuZ2UgYmFzZWQgb24gcGx1Z2luIHN0YXRlIChlLmcuLCBvYnNpZGlhbi1naXQgc3RhdHVzYmFyIHN0YXRlcylcblx0ICovXG5cdHByaXZhdGUgaXNEeW5hbWljU3RhdGVDbGFzcyhjbGFzc05hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRcdC8vIEZpbHRlciBvdXQga25vd24gZHluYW1pYyBzdGF0ZSBjbGFzcyBwYXR0ZXJuc1xuXHRcdGNvbnN0IGR5bmFtaWNQYXR0ZXJucyA9IFtcblx0XHRcdC8tc3RhdHVzYmFyLShpZGxlfHB1bGx8cHVzaHxjb21taXR8bWVzc2FnZXxzdGF0dXN8YWRkfGNvbmZsaWN0fHBhdXNlZHxmYWlsZWQtaW5pdCkkLyxcblx0XHRcdC8vIENvbW1vbiBzdGF0ZSBjbGFzc2VzIHRoYXQgc2hvdWxkbid0IGJlIHBhcnQgb2YgYW4gZWxlbWVudCdzIGlkZW50aXR5XG5cdFx0XHQvXihpcy1hY3RpdmV8aXMtbG9hZGluZ3xpcy1oaWRkZW58aXMtY29sbGFwc2VkfGlzLXNlbGVjdGVkfGlzLWZsYXNoaW5nfG1vZC1hY3RpdmV8bW9kLWxvYWRpbmcpJC8sXG5cdFx0XHQvLyBvYnNpZGlhbi1naXQgc3BlY2lmaWMgZHluYW1pYyBjbGFzc2VzXG5cdFx0XHQvXm9ic2lkaWFuLWdpdC1zdGF0dXNiYXItLyxcblx0XHRdO1xuXHRcdHJldHVybiBkeW5hbWljUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChjbGFzc05hbWUpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZW5lcmF0ZSBhIGNhbm9uaWNhbCBuYW1lIGZyb20gYW4gZWxlbWVudCdzIGNsYXNzZXNcblx0ICogRmlsdGVycyBvdXQgZHluYW1pYyBzdGF0ZSBjbGFzc2VzIGFuZCB1c2VzIG9ubHkgc3RhYmxlIHBsdWdpbiBpZGVudGlmaWVyc1xuXHQgKi9cblx0cHJpdmF0ZSBnZW5lcmF0ZUNhbm9uaWNhbE5hbWUoZWxlbWVudDogSFRNTEVsZW1lbnQsIGFsbENsYXNzZXM6IHN0cmluZ1tdKTogc3RyaW5nIHtcblx0XHRjb25zdCBpZ25vcmVkQ2xhc3NlcyA9IFsnbW9kLWNsaWNrYWJsZScsICdzdGF0dXMtYmFyLWl0ZW0nLCAndWktdHdlYWtlci1zdGF0dXMtYmFyLWl0ZW0nLCAndWktdHdlYWtlci1zdGF0dXMtYmFyLWhpZGRlbiddO1xuXG5cdFx0Ly8gRXh0cmFjdCBwbHVnaW4gaWRlbnRpZmllciAoc3RhYmxlKVxuXHRcdGNvbnN0IHBsdWdpbkNsYXNzID0gYWxsQ2xhc3Nlcy5maW5kKGNscyA9PlxuXHRcdFx0Y2xzLmluY2x1ZGVzKCdwbHVnaW4tJykgfHxcblx0XHRcdGNscy5pbmNsdWRlcygnb2JzaWRpYW4tZ2l0JykgfHxcblx0XHRcdGNscy5pbmNsdWRlcygnLWdpdCcpIHx8XG5cdFx0XHQoY2xzLnN0YXJ0c1dpdGgoJ2dpdC0nKSAmJiBjbHMgIT09ICdnaXQtY2hhbmdlcy1zdGF0dXMtYmFyJylcblx0XHQpO1xuXG5cdFx0aWYgKHBsdWdpbkNsYXNzKSB7XG5cdFx0XHQvLyBGb3Igb2JzaWRpYW4tZ2l0LCB1c2Ugc2ltcGxpZmllZCBpZGVudGlmaWVycyB0byBoYW5kbGUgZHluYW1pYyBjbGFzcyBjaGFuZ2VzXG5cdFx0XHRpZiAocGx1Z2luQ2xhc3MuaW5jbHVkZXMoJ29ic2lkaWFuLWdpdCcpIHx8IHBsdWdpbkNsYXNzLnN0YXJ0c1dpdGgoJ2dpdC0nKSkge1xuXHRcdFx0XHRpZiAoYWxsQ2xhc3Nlcy5zb21lKGNscyA9PiBjbHMuc3RhcnRzV2l0aCgnb2JzaWRpYW4tZ2l0LXN0YXR1c2Jhci0nKSkpIHJldHVybiAncGx1Z2luLW9ic2lkaWFuLWdpdC1zdGF0dXMnO1xuXHRcdFx0XHRpZiAoYWxsQ2xhc3Nlcy5pbmNsdWRlcygnZ2l0LWNoYW5nZXMtc3RhdHVzLWJhcicpKSByZXR1cm4gJ3BsdWdpbi1vYnNpZGlhbi1naXQtY2hhbmdlcyc7XG5cblx0XHRcdFx0Ly8gQnJhbmNoIGRldGVjdGlvbiAoZm9yIGluaXRpYWwgSUQgZ2VuZXJhdGlvbilcblx0XHRcdFx0Y29uc3QgdGV4dENvbnRlbnQgPSBlbGVtZW50LnRleHRDb250ZW50Py50cmltKCk7XG5cdFx0XHRcdC8vIFJvYnVzdCBicmFuY2ggZGV0ZWN0aW9uOiBzaG9ydCwgYWxwaGFudW1lcmljIHdpdGggZGFzaGVzL3VuZGVyc2NvcmVzLCBubyBjb2xvbnNcblx0XHRcdFx0Y29uc3QgbG9va3NMaWtlQnJhbmNoID0gdGV4dENvbnRlbnQgJiYgdGV4dENvbnRlbnQubGVuZ3RoID4gMCAmJlxuXHRcdFx0XHRcdC9eW2EtejAtOV1bYS16MC05Ll9cXC0vXSokL2kudGVzdCh0ZXh0Q29udGVudCkgJiZcblx0XHRcdFx0XHR0ZXh0Q29udGVudC5sZW5ndGggPCAzMCAmJlxuXHRcdFx0XHRcdCF0ZXh0Q29udGVudC5pbmNsdWRlcygnOicpICYmXG5cdFx0XHRcdFx0IS9eWzAtOV0vLnRlc3QodGV4dENvbnRlbnQpICYmXG5cdFx0XHRcdFx0IWVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItbWFuYWdlZCcpO1xuXG5cdFx0XHRcdGlmIChsb29rc0xpa2VCcmFuY2gpIHJldHVybiAncGx1Z2luLW9ic2lkaWFuLWdpdC1icmFuY2gnO1xuXG5cdFx0XHRcdHJldHVybiAncGx1Z2luLW9ic2lkaWFuLWdpdCc7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZpbHRlciBvdXQgZHluYW1pYyBzdGF0ZSBjbGFzc2VzIGFuZCBpZ25vcmVkIGNsYXNzZXNcblx0XHRcdGNvbnN0IHN0YWJsZUNsYXNzZXMgPSBhbGxDbGFzc2VzLmZpbHRlcihjbHMgPT5cblx0XHRcdFx0IXRoaXMuaXNEeW5hbWljU3RhdGVDbGFzcyhjbHMpICYmXG5cdFx0XHRcdCFpZ25vcmVkQ2xhc3Nlcy5pbmNsdWRlcyhjbHMpICYmXG5cdFx0XHRcdGNscyAhPT0gcGx1Z2luQ2xhc3Ncblx0XHRcdCk7XG5cblx0XHRcdGlmIChzdGFibGVDbGFzc2VzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0cmV0dXJuIGAke3BsdWdpbkNsYXNzfS0ke3N0YWJsZUNsYXNzZXMuam9pbignLScpfWA7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcGx1Z2luQ2xhc3M7XG5cdFx0fVxuXG5cdFx0Ly8gTm8gcGx1Z2luIGlkZW50aWZpZXIgZm91bmQgLSB1c2UgZmlsdGVyZWQgY2xhc3Nlc1xuXHRcdGNvbnN0IHN0YWJsZUNsYXNzZXMgPSBhbGxDbGFzc2VzLmZpbHRlcihjbHMgPT5cblx0XHRcdCF0aGlzLmlzRHluYW1pY1N0YXRlQ2xhc3MoY2xzKSAmJlxuXHRcdFx0IWlnbm9yZWRDbGFzc2VzLmluY2x1ZGVzKGNscylcblx0XHQpO1xuXG5cdFx0aWYgKHN0YWJsZUNsYXNzZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0cmV0dXJuIHN0YWJsZUNsYXNzZXMuam9pbignLScpO1xuXHRcdH1cblxuXHRcdHJldHVybiAnc3RhdHVzLWJhci1pdGVtJztcblx0fVxuXG5cdC8qKlxuXHQgKiBFeHRyYWN0IGNhbm9uaWNhbCBuYW1lIGZyb20gYSBzYXZlZCBJRFxuXHQgKiBSZW1vdmVzIHRoZSBpbmRleCBzdWZmaXggYW5kIGZpbHRlcnMgb3V0IGR5bmFtaWMgc3RhdGUgY2xhc3Nlc1xuXHQgKiBUaGlzIGhhbmRsZXMgbGVnYWN5IElEcyB0aGF0IG1pZ2h0IGhhdmUgYmVlbiBjcmVhdGVkIHdpdGggZHluYW1pYyBjbGFzc2VzXG5cdCAqL1xuXHRwcml2YXRlIGdldENhbm9uaWNhbE5hbWVGcm9tSWQoaWQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3QgcGFydHMgPSBpZC5zcGxpdCgnOycpO1xuXHRcdHBhcnRzLnBvcCgpOyAvLyBSZW1vdmUgaW5kZXhcblx0XHRjb25zdCBmdWxsTmFtZSA9IHBhcnRzLmpvaW4oJzsnKTtcblxuXHRcdC8vIEZvciBvYnNpZGlhbi1naXQsIG1pZ3JhdGlvbiB0byBuZXcgc3RhYmxlIElEc1xuXHRcdGlmIChmdWxsTmFtZS5pbmNsdWRlcygnb2JzaWRpYW4tZ2l0LXN0YXR1c2Jhci0nKSB8fCBmdWxsTmFtZSA9PT0gJ3BsdWdpbi1vYnNpZGlhbi1naXQnKSB7XG5cdFx0XHQvLyBTbWFydGVyIG1pZ3JhdGlvbjogY2hlY2sgdGhlIHNhdmVkIGl0ZW0ncyBuYW1lIHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gc3RhdHVzIGFuZCBicmFuY2hcblx0XHRcdC8vIFRoaXMgaGFuZGxlcyBjYXNlcyB3aGVyZSBvbGQgSURzIGxpa2UgJ3BsdWdpbi1vYnNpZGlhbi1naXQ7Micgd2VyZSB1c2VkIGZvciBicmFuY2hlc1xuXHRcdFx0Y29uc3Qgc2F2ZWRJdGVtID0gdGhpcy5pdGVtcy5maW5kKGkgPT4gaS5pZCA9PT0gaWQpO1xuXHRcdFx0aWYgKHNhdmVkSXRlbSAmJiBzYXZlZEl0ZW0ubmFtZSAmJlxuXHRcdFx0XHQvXlthLXowLTldW2EtejAtOS5fXFwtL10qJC9pLnRlc3Qoc2F2ZWRJdGVtLm5hbWUpICYmXG5cdFx0XHRcdHNhdmVkSXRlbS5uYW1lLmxlbmd0aCA8IDMwICYmXG5cdFx0XHRcdCFzYXZlZEl0ZW0ubmFtZS5pbmNsdWRlcygncGx1Z2luLScpKSB7XG5cdFx0XHRcdHJldHVybiAncGx1Z2luLW9ic2lkaWFuLWdpdC1icmFuY2gnO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuICdwbHVnaW4tb2JzaWRpYW4tZ2l0LXN0YXR1cyc7XG5cdFx0fVxuXG5cdFx0Ly8gRm9yIG90aGVyIGNhc2VzLCB0cnkgdG8gZmluZCBwbHVnaW4gaWRlbnRpZmllciBpbiB0aGUgbmFtZVxuXHRcdC8vIExvb2sgZm9yIFwicGx1Z2luLSpcIiBwYXR0ZXJuXG5cdFx0Y29uc3QgcGx1Z2luTWF0Y2ggPSBmdWxsTmFtZS5tYXRjaCgvXihwbHVnaW4tW2EtejAtOS1dKykvaSk7XG5cdFx0aWYgKHBsdWdpbk1hdGNoKSB7XG5cdFx0XHRyZXR1cm4gcGx1Z2luTWF0Y2hbMV07XG5cdFx0fVxuXG5cdFx0Ly8gSWYgbm8gcGx1Z2luIGlkZW50aWZpZXIgZm91bmQsIGZpbHRlciBvdXQgZHluYW1pYyBzdGF0ZSBjbGFzc2VzXG5cdFx0Ly8gVGhpcyBpcyBhIGZhbGxiYWNrIGZvciBlZGdlIGNhc2VzXG5cdFx0Y29uc3QgbmFtZVBhcnRzID0gZnVsbE5hbWUuc3BsaXQoJy0nKTtcblx0XHRjb25zdCBmaWx0ZXJlZFBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGxldCBza2lwTmV4dCA9IGZhbHNlO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lUGFydHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChza2lwTmV4dCkge1xuXHRcdFx0XHRza2lwTmV4dCA9IGZhbHNlO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBwYXJ0IG9mIGEgc3RhdHVzYmFyLSogZHluYW1pYyBzdGF0ZSBjbGFzc1xuXHRcdFx0aWYgKG5hbWVQYXJ0c1tpXSA9PT0gJ3N0YXR1c2JhcicgJiYgaSA8IG5hbWVQYXJ0cy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdGNvbnN0IG5leHRQYXJ0ID0gbmFtZVBhcnRzW2kgKyAxXTtcblx0XHRcdFx0aWYgKFsnaWRsZScsICdwdWxsJywgJ3B1c2gnLCAnY29tbWl0JywgJ21lc3NhZ2UnLCAnc3RhdHVzJywgJ2FkZCcsICdjb25mbGljdCcsICdwYXVzZWQnXS5pbmNsdWRlcyhuZXh0UGFydCkpIHtcblx0XHRcdFx0XHRza2lwTmV4dCA9IHRydWU7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5leHRQYXJ0ID09PSAnZmFpbGVkJyAmJiBpIDwgbmFtZVBhcnRzLmxlbmd0aCAtIDIgJiYgbmFtZVBhcnRzW2kgKyAyXSA9PT0gJ2luaXQnKSB7XG5cdFx0XHRcdFx0aSArPSAyOyAvLyBTa2lwIFwiZmFpbGVkLWluaXRcIlxuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZpbHRlciBvdXQgb3RoZXIgZ2VuZXJpYyBkeW5hbWljIGNsYXNzZXNcblx0XHRcdGlmICh0aGlzLmlzRHluYW1pY1N0YXRlQ2xhc3MobmFtZVBhcnRzW2ldKSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0ZmlsdGVyZWRQYXJ0cy5wdXNoKG5hbWVQYXJ0c1tpXSk7XG5cdFx0fVxuXG5cdFx0Ly8gUmV0dXJuIGZpbHRlcmVkIG5hbWUgb3Igb3JpZ2luYWwgaWYgZmlsdGVyaW5nIHJlbW92ZWQgZXZlcnl0aGluZ1xuXHRcdHJldHVybiBmaWx0ZXJlZFBhcnRzLmxlbmd0aCA+IDAgPyBmaWx0ZXJlZFBhcnRzLmpvaW4oJy0nKSA6IGZ1bGxOYW1lO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnNvbGlkYXRlIHNldHRpbmdzIGFuZCBlbGVtZW50cyAoRVhBQ1RMWSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHQgKiBNZXJnZXMgc2F2ZWQgaXRlbXMgd2l0aCBjdXJyZW50IERPTSBlbGVtZW50cywgcHJlc2VydmVzIG9yZGVyIGFuZCBzZXR0aW5nc1xuXHQgKiBTYXZlcyBpbW1lZGlhdGVseSB0byBwcmV2ZW50IGR1cGxpY2F0ZXNcblx0ICovXG5cdHByaXZhdGUgY29uc29saWRhdGVTZXR0aW5nc0FuZEVsZW1lbnRzKCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5jb250YWluZXIpIHJldHVybjtcblxuXHRcdC8vIEdldCBhbGwgZXhpc3Rpbmcgc3RhdHVzIGJhciBlbGVtZW50cyBmcm9tIERPTSAoaW4gRE9NIG9yZGVyKVxuXHRcdGNvbnN0IGV4aXN0aW5nRWxlbWVudHMgPSBBcnJheS5mcm9tKHRoaXMuY29udGFpbmVyLmNoaWxkcmVuKS5maWx0ZXIoXG5cdFx0XHRlbCA9PiB7XG5cdFx0XHRcdGNvbnN0IGVsZW1lbnQgPSBlbCBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0Ly8gSWdub3JlIG91ciBvd24gY3VzdG9tIGl0ZW1zICh0aGV5IGFyZSBtYW5hZ2VkIHNlcGFyYXRlbHkpXG5cdFx0XHRcdGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygndWktdHdlYWtlci1zdGF0dXMtYmFyLWl0ZW0nKSkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0XHRcdC8vIENSSVRJQ0FMIEZJWDogSWdub3JlIG9ycGhhbmVkIG1hbmFnZWQgYnV0dG9ucyAoZS5nLiwgZnJvbSBkZWxldGVkIGRhdGEpXG5cdFx0XHRcdGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLW1hbmFnZWQnKSA9PT0gJ3RydWUnKSB7XG5cdFx0XHRcdFx0Y29uc3QgaWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLXN0YXR1cy1iYXItaWQnKTtcblx0XHRcdFx0XHQvLyBJZiBpdCdzIGEgbWFuYWdlZCBidXR0b24gYnV0IG5vdCBpbiBvdXIgY3VycmVudCBpdGVtcyBsaXN0LCBpZ25vcmUgaXQgZm9yIGRpc2NvdmVyeVxuXHRcdFx0XHRcdGlmICghaWQgfHwgIXRoaXMuaXRlbXMuc29tZShpdGVtID0+IGl0ZW0uaWQgPT09IGlkKSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFByb2Nlc3MgRVZFUlkgY2hpbGQgb2YgdGhlIHN0YXR1cyBiYXIgKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXG5cdFx0XHRcdC8vIE1hbnkgcGx1Z2lucyBhZGQgY2xpY2thYmxlIGljb25zIHdpdGhvdXQgdGhlICdzdGF0dXMtYmFyLWl0ZW0nIGNsYXNzXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdCkgYXMgSFRNTEVsZW1lbnRbXTtcblxuXHRcdC8vIEdldCBzYXZlZCBpdGVtcyBmcm9tIHNldHRpbmdzIChwcmVzZXJ2ZSBBTEwgc2F2ZWQgaXRlbXMsIGV2ZW4gaWYgbm90IGN1cnJlbnRseSB2aXNpYmxlKVxuXHRcdGNvbnN0IHNhdmVkSXRlbXMgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ2V4aXN0aW5nJyk7XG5cdFx0Y29uc3Qgc2F2ZWRJdGVtc01hcCA9IG5ldyBNYXAoc2F2ZWRJdGVtcy5tYXAoaXRlbSA9PiBbaXRlbS5pZCwgaXRlbV0pKTtcblxuXHRcdC8vIFRyYWNrIGVsZW1lbnQgY291bnRzIHBlciBuYW1lIHBhdHRlcm4gKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIgZG9lcylcblx0XHRjb25zdCBwbHVnaW5FbGVtZW50Q291bnQ6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcblx0XHRjb25zdCBtYXRjaGVkU2F2ZWRJZHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblx0XHRjb25zdCBuZXdJdGVtczogU3RhdHVzQmFySXRlbVtdID0gW107XG5cblx0XHQvLyBQcm9jZXNzIGVsZW1lbnRzIGluIERPTSBvcmRlciAoc2luZ2xlIHBhc3MsIEVYQUNUTFkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcblx0XHRleGlzdGluZ0VsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcblx0XHRcdGxldCBpZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItc3RhdHVzLWJhci1pZCcpO1xuXHRcdFx0bGV0IGNhbm9uaWNhbE5hbWU6IHN0cmluZztcblx0XHRcdGxldCBpbmRleDogbnVtYmVyO1xuXG5cdFx0XHRpZiAoaWQpIHtcblx0XHRcdFx0Ly8gRWxlbWVudCBhbHJlYWR5IHRhZ2dlZCAtIFRSVVNUIFRIRSBUQUcgKGxpa2UgU0JPKVxuXHRcdFx0XHRjb25zdCBwYXJzZWQgPSB0aGlzLnBhcnNlRWxlbWVudElkKGlkKTtcblx0XHRcdFx0Y2Fub25pY2FsTmFtZSA9IHBhcnNlZC5uYW1lO1xuXHRcdFx0XHRpbmRleCA9IHBhcnNlZC5pbmRleDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIE5ldyBlbGVtZW50IC0gZ2VuZXJhdGUgSUQgZnJvbSBjbGFzc2VzIGFuZCBjdXJyZW50IERPTSBvcmRlciBjb3VudFxuXHRcdFx0XHRjb25zdCBhbGxDbGFzc2VzID0gQXJyYXkuZnJvbShlbGVtZW50LmNsYXNzTGlzdCk7XG5cdFx0XHRcdGNhbm9uaWNhbE5hbWUgPSB0aGlzLmdlbmVyYXRlQ2Fub25pY2FsTmFtZShlbGVtZW50LCBhbGxDbGFzc2VzKTtcblx0XHRcdFx0aW5kZXggPSAoY2Fub25pY2FsTmFtZSBpbiBwbHVnaW5FbGVtZW50Q291bnQpID8gcGx1Z2luRWxlbWVudENvdW50W2Nhbm9uaWNhbE5hbWVdICsgMSA6IDE7XG5cdFx0XHRcdGlkID0gYCR7Y2Fub25pY2FsTmFtZX07JHtpbmRleH1gO1xuXHRcdFx0XHRlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLXN0YXR1cy1iYXItaWQnLCBpZCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVwZGF0ZSBnbG9iYWwgY291bnQgdHJhY2tpbmcgZm9yIHRoaXMgc2NhblxuXHRcdFx0cGx1Z2luRWxlbWVudENvdW50W2Nhbm9uaWNhbE5hbWVdID0gTWF0aC5tYXgoaW5kZXgsIHBsdWdpbkVsZW1lbnRDb3VudFtjYW5vbmljYWxOYW1lXSB8fCAwKTtcblxuXHRcdFx0Ly8gQ2hlY2sgaWYgd2UgaGF2ZSBhIHNhdmVkIGl0ZW0gZm9yIHRoaXMgSURcblx0XHRcdGNvbnN0IHNhdmVkSXRlbSA9IHNhdmVkSXRlbXNNYXAuZ2V0KGlkKTtcblx0XHRcdGlmIChzYXZlZEl0ZW0pIHtcblx0XHRcdFx0bWF0Y2hlZFNhdmVkSWRzLmFkZChpZCk7XG5cblx0XHRcdFx0Ly8gVXBkYXRlIGRpc3BsYXkgbmFtZSBpZiBpdCdzIGdlbmVyaWMgb3IgaWYgaXQncyBhIGJyYW5jaCAod2hpY2ggY2hhbmdlcylcblx0XHRcdFx0bGV0IGVsZW1lbnROYW1lID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKSB8fCBlbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKSB8fCBlbGVtZW50LnRleHRDb250ZW50Py50cmltKCk7XG5cdFx0XHRcdGNvbnN0IGlzQnJhbmNoID0gY2Fub25pY2FsTmFtZSA9PT0gJ3BsdWdpbi1vYnNpZGlhbi1naXQtYnJhbmNoJztcblx0XHRcdFx0Y29uc3QgaGFzR2VuZXJpY05hbWUgPSAhc2F2ZWRJdGVtLm5hbWUgfHwgc2F2ZWRJdGVtLm5hbWUgPT09IGNhbm9uaWNhbE5hbWUgfHwgc2F2ZWRJdGVtLm5hbWUgPT09ICdTdGF0dXMgYmFyIGl0ZW0nIHx8IHNhdmVkSXRlbS5uYW1lLnN0YXJ0c1dpdGgoJ3BsdWdpbi0nKTtcblxuXHRcdFx0XHRpZiAoZWxlbWVudE5hbWUgJiYgKGlzQnJhbmNoIHx8IGhhc0dlbmVyaWNOYW1lKSkge1xuXHRcdFx0XHRcdHNhdmVkSXRlbS5uYW1lID0gZWxlbWVudE5hbWUuc3Vic3RyaW5nKDAsIDUwKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gTmV3IGl0ZW0gZm91bmQgLSBhZGQgdG8gc2V0dGluZ3Ncblx0XHRcdFx0bGV0IGVsZW1lbnROYW1lID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKSB8fCBlbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKSB8fCBlbGVtZW50LnRleHRDb250ZW50Py50cmltKCkgfHwgY2Fub25pY2FsTmFtZTtcblx0XHRcdFx0bmV3SXRlbXMucHVzaCh7XG5cdFx0XHRcdFx0aWQ6IGlkLFxuXHRcdFx0XHRcdG5hbWU6IGVsZW1lbnROYW1lLnN1YnN0cmluZygwLCA1MCksXG5cdFx0XHRcdFx0dHlwZTogJ2V4aXN0aW5nJyxcblx0XHRcdFx0XHRoaWRkZW46IGZhbHNlLFxuXHRcdFx0XHRcdG1kT25seTogZmFsc2UsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gQWRkIG5ldyBpdGVtcyB0byBzZXR0aW5nc1xuXHRcdGlmIChuZXdJdGVtcy5sZW5ndGggPiAwKSB7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcy5wdXNoKC4uLm5ld0l0ZW1zKTtcblx0XHRcdHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEhlbHBlciB0byBwYXJzZSBpbnRlcm5hbCBJRCBpbnRvIG5hbWUgYW5kIGluZGV4XG5cdCAqL1xuXHRwcml2YXRlIHBhcnNlRWxlbWVudElkKGlkOiBzdHJpbmcpOiB7IG5hbWU6IHN0cmluZywgaW5kZXg6IG51bWJlciB9IHtcblx0XHRjb25zdCBwYXJ0cyA9IGlkLnNwbGl0KCc7Jyk7XG5cdFx0Y29uc3QgaW5kZXhTdHIgPSBwYXJ0cy5wb3AoKTtcblx0XHRjb25zdCBpbmRleCA9IHBhcnNlSW50KGluZGV4U3RyIHx8ICcxJywgMTApO1xuXHRcdGNvbnN0IG5hbWUgPSBwYXJ0cy5qb2luKCc7Jyk7XG5cdFx0cmV0dXJuIHsgbmFtZSwgaW5kZXggfTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW9yZGVyIGFuZCBhcHBseSB2aXNpYmlsaXR5IHRvIGFsbCBzdGF0dXMgYmFyIGl0ZW1zIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHQgKiBIYW5kbGVzIHN0aWNreSBpdGVtcyAobGVmdC9yaWdodCkgYW5kIGl0ZW1zIHRoYXQgYXJlbid0IGN1cnJlbnRseSB2aXNpYmxlXG5cdCAqIFxuXHQgKiBOb3RlOiBJdGVtcyB3aXRoIHRoZSBzYW1lIHN0aWNreSBwb3NpdGlvbiBtYWludGFpbiB0aGVpciByZWxhdGl2ZSBvcmRlclxuXHQgKiAoZS5nLiwgaWYgMyBpdGVtcyBhcmUgc3RpY2t5LWxlZnQsIHRoZXkgYXBwZWFyIGluIHRoZSBvcmRlciB0aGV5J3JlIGluIHNldHRpbmdzKVxuXHQgKi9cblx0cHVibGljIHJlb3JkZXIoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuXG5cdFx0Ly8gU2V0IGZsYWcgdG8gcHJldmVudCBvYnNlcnZlciBmcm9tIHRyaWdnZXJpbmcgZHVyaW5nIHJlb3JkZXJcblx0XHR0aGlzLmlzUmVvcmRlcmluZyA9IHRydWU7XG5cblx0XHQvLyBSZW1vdmUgYWxsIGN1c3RvbSBhY3Rpb25zIGZpcnN0XG5cdFx0dGhpcy5jdXN0b21BY3Rpb25zLmZvckVhY2goKGFjdGlvbikgPT4gYWN0aW9uLnJlbW92ZSgpKTtcblx0XHR0aGlzLmN1c3RvbUFjdGlvbnMuY2xlYXIoKTtcblxuXHRcdC8vIEdldCBhbGwgZXhpc3Rpbmcgc3RhdHVzIGJhciBpdGVtcyAoZXhjbHVkaW5nIG91ciBjdXN0b20gb25lcylcblx0XHRjb25zdCBhbGxFeGlzdGluZ0VsZW1lbnRzID0gQXJyYXkuZnJvbSh0aGlzLmNvbnRhaW5lci5jaGlsZHJlbikuZmlsdGVyKFxuXHRcdFx0ZWwgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzdGF0dXMtYmFyLWl0ZW0nKSAmJiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItaXRlbScpXG5cdFx0KSBhcyBIVE1MRWxlbWVudFtdO1xuXG5cdFx0Ly8gU2VwYXJhdGUgaXRlbXMgYnkgc3RpY2t5IHBvc2l0aW9uXG5cdFx0Y29uc3QgbGVmdFN0aWNreTogSFRNTEVsZW1lbnRbXSA9IFtdO1xuXHRcdGNvbnN0IHJpZ2h0U3RpY2t5OiBIVE1MRWxlbWVudFtdID0gW107XG5cdFx0Y29uc3QgcmVndWxhcjogSFRNTEVsZW1lbnRbXSA9IFtdO1xuXHRcdGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldE1vc3RSZWNlbnRMZWFmKCk7XG5cblx0XHQvLyBQcm9jZXNzIGl0ZW1zIGluIG9yZGVyIGZyb20gc2V0dGluZ3Ncblx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5pdGVtcykge1xuXHRcdFx0Ly8gQ2hlY2sgdmlzaWJpbGl0eVxuXHRcdFx0aWYgKGl0ZW0uaGlkZGVuKSB7XG5cdFx0XHRcdC8vIEhpZGUgZXhpc3RpbmcgaXRlbXNcblx0XHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2V4aXN0aW5nJykge1xuXHRcdFx0XHRcdGNvbnN0IGVsZW1lbnQgPSBhbGxFeGlzdGluZ0VsZW1lbnRzLmZpbmQoKGVsKSA9PlxuXHRcdFx0XHRcdFx0ZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItc3RhdHVzLWJhci1pZCcpID09PSBpdGVtLmlkXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRpZiAoZWxlbWVudCkge1xuXHRcdFx0XHRcdFx0ZWxlbWVudC5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLWhpZGRlbicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2hlY2sgbWQvbWR4LW9ubHkgZmlsdGVyXG5cdFx0XHRpZiAoaXRlbS5tZE9ubHkgJiYgIWlzTWFya2Rvd25WaWV3KGFjdGl2ZUxlYWYpKSB7XG5cdFx0XHRcdC8vIEhpZGUgaWYgbm90IG1hcmtkb3duIHZpZXdcblx0XHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2V4aXN0aW5nJykge1xuXHRcdFx0XHRcdGNvbnN0IGVsZW1lbnQgPSBhbGxFeGlzdGluZ0VsZW1lbnRzLmZpbmQoKGVsKSA9PlxuXHRcdFx0XHRcdFx0ZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItc3RhdHVzLWJhci1pZCcpID09PSBpdGVtLmlkXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRpZiAoZWxlbWVudCkge1xuXHRcdFx0XHRcdFx0ZWxlbWVudC5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLWhpZGRlbicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2N1c3RvbScpIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgY29tbWFuZCBleGlzdHMgYW5kIG1vZGUgaXMgYWN0aXZlXG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRzID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBjb21tYW5kcz86IHsgW2lkOiBzdHJpbmddOiB7IGlkOiBzdHJpbmcgfSB9IH0gfSkuY29tbWFuZHM7XG5cdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kcz8uY29tbWFuZHM/LltpdGVtLmNvbW1hbmRJZCB8fCAnJ107XG5cdFx0XHRcdGNvbnN0IG1vZGUgPSBpdGVtLm1vZGUgfHwgJ2FueSc7XG5cdFx0XHRcdGlmIChjb21tYW5kICYmIGlzTW9kZUFjdGl2ZShtb2RlLCB0aGlzLnBsdWdpbikpIHtcblx0XHRcdFx0XHR0aGlzLmFkZEN1c3RvbUFjdGlvbihpdGVtKTtcblx0XHRcdFx0XHRjb25zdCBhY3Rpb24gPSB0aGlzLmN1c3RvbUFjdGlvbnMuZ2V0KGl0ZW0pO1xuXHRcdFx0XHRcdGlmIChhY3Rpb24pIHtcblx0XHRcdFx0XHRcdC8vIEFkZCB0byBhcHByb3ByaWF0ZSBsaXN0IGJhc2VkIG9uIHN0aWNreSBwb3NpdGlvblxuXHRcdFx0XHRcdFx0aWYgKGl0ZW0uc3RpY2t5ID09PSAnbGVmdCcpIHtcblx0XHRcdFx0XHRcdFx0bGVmdFN0aWNreS5wdXNoKGFjdGlvbik7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGl0ZW0uc3RpY2t5ID09PSAncmlnaHQnKSB7XG5cdFx0XHRcdFx0XHRcdHJpZ2h0U3RpY2t5LnB1c2goYWN0aW9uKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJlZ3VsYXIucHVzaChhY3Rpb24pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRmluZCBleGlzdGluZyBlbGVtZW50IChtYXkgbm90IGV4aXN0IGlmIHBsdWdpbiBpc24ndCBsb2FkZWQpXG5cdFx0XHRcdGNvbnN0IGVsZW1lbnQgPSBhbGxFeGlzdGluZ0VsZW1lbnRzLmZpbmQoKGVsKSA9PlxuXHRcdFx0XHRcdGVsLmdldEF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLXN0YXR1cy1iYXItaWQnKSA9PT0gaXRlbS5pZFxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGlmIChlbGVtZW50KSB7XG5cdFx0XHRcdFx0ZWxlbWVudC5yZW1vdmVDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLWhpZGRlbicpO1xuXHRcdFx0XHRcdC8vIEFkZCB0byBhcHByb3ByaWF0ZSBsaXN0IGJhc2VkIG9uIHN0aWNreSBwb3NpdGlvblxuXHRcdFx0XHRcdGlmIChpdGVtLnN0aWNreSA9PT0gJ2xlZnQnKSB7XG5cdFx0XHRcdFx0XHRsZWZ0U3RpY2t5LnB1c2goZWxlbWVudCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpdGVtLnN0aWNreSA9PT0gJ3JpZ2h0Jykge1xuXHRcdFx0XHRcdFx0cmlnaHRTdGlja3kucHVzaChlbGVtZW50KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVndWxhci5wdXNoKGVsZW1lbnQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBJZiBlbGVtZW50IGRvZXNuJ3QgZXhpc3QsIGl0ZW0gaXMga2VwdCBpbiBzZXR0aW5ncyBidXQgbm90IGRpc3BsYXllZCAobGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDb21iaW5lOiBsZWZ0IHN0aWNreSBpdGVtcyBmaXJzdCwgdGhlbiByZWd1bGFyIGl0ZW1zLCB0aGVuIHJpZ2h0IHN0aWNreSBpdGVtc1xuXHRcdGNvbnN0IG9yZGVyZWRFbGVtZW50cyA9IFsuLi5sZWZ0U3RpY2t5LCAuLi5yZWd1bGFyLCAuLi5yaWdodFN0aWNreV07XG5cblx0XHQvLyBQaHlzaWNhbGx5IHJlb3JkZXIgRE9NIGVsZW1lbnRzIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyIGRvZXMpXG5cdFx0Ly8gVGhpcyBpcyBtb3JlIHJlbGlhYmxlIHRoYW4gQ1NTIG9yZGVyIHByb3BlcnR5XG5cdFx0b3JkZXJlZEVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcblx0XHRcdGlmICh0aGlzLmNvbnRhaW5lciAmJiBlbGVtZW50LnBhcmVudEVsZW1lbnQgPT09IHRoaXMuY29udGFpbmVyKSB7XG5cdFx0XHRcdHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gQWxzbyBzZXQgQ1NTIG9yZGVyIGFzIGJhY2t1cCAoaW4gY2FzZSBjb250YWluZXIgdXNlcyBmbGV4Ym94KVxuXHRcdG9yZGVyZWRFbGVtZW50cy5mb3JFYWNoKChlbGVtZW50LCBpbmRleCkgPT4ge1xuXHRcdFx0c2V0Q3NzUHJvcHMoZWxlbWVudCwgeyBvcmRlcjogKGluZGV4ICsgMSkudG9TdHJpbmcoKSB9KTtcblx0XHR9KTtcblxuXHRcdC8vIENsZWFyIGZsYWcgYWZ0ZXIgYSBzaG9ydCBkZWxheSB0byBhbGxvdyBET00gdG8gc2V0dGxlXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLmlzUmVvcmRlcmluZyA9IGZhbHNlO1xuXHRcdH0sIDUwKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBZGQgYSBjdXN0b20gY29tbWFuZCBhY3Rpb24gdG8gdGhlIHN0YXR1cyBiYXIgKGxpa2UgQ29tbWFuZGVyKVxuXHQgKi9cblx0cHJpdmF0ZSBhZGRDdXN0b21BY3Rpb24oaXRlbTogU3RhdHVzQmFySXRlbSk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5jb250YWluZXIgfHwgIWl0ZW0uY29tbWFuZElkKSByZXR1cm47XG5cblx0XHQvLyBEb24ndCBjcmVhdGUgZHVwbGljYXRlIGlmIGFscmVhZHkgZXhpc3RzXG5cdFx0aWYgKHRoaXMuY3VzdG9tQWN0aW9ucy5oYXMoaXRlbSkpIHJldHVybjtcblxuXHRcdGNvbnN0IGJ0biA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6ICd1aS10d2Vha2VyLXN0YXR1cy1iYXItaXRlbSBzdGF0dXMtYmFyLWl0ZW0gbW9kLWNsaWNrYWJsZScsXG5cdFx0XHRhdHRyOiB7XG5cdFx0XHRcdCdhcmlhLWxhYmVsJzogaXRlbS5uYW1lLFxuXHRcdFx0XHQnZGF0YS10b29sdGlwLXBvc2l0aW9uJzogJ3RvcCcsXG5cdFx0XHRcdCdkYXRhLXVpLXR3ZWFrZXItc3RhdHVzLWJhci1pZCc6IGl0ZW0uaWQsXG5cdFx0XHRcdCdkYXRhLXVpLXR3ZWFrZXItbWFuYWdlZCc6ICd0cnVlJyxcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHRpZiAoaXRlbS5pY29uKSB7XG5cdFx0XHRzZXRJY29uKGJ0biwgaXRlbS5pY29uKTtcblx0XHR9XG5cblx0XHQvLyBBcHBseSBjb2xvciBpZiBzZXRcblx0XHRpZiAoaXRlbS5jb2xvciAmJiBpdGVtLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcblx0XHRcdHNldENzc1Byb3BzKGJ0biwgeyBjb2xvcjogaXRlbS5jb2xvciB9KTtcblx0XHR9XG5cblx0XHRidG4ub25jbGljayA9ICgpOiB2b2lkID0+IHtcblx0XHRcdGNvbnN0IGNvbW1hbmRzID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBleGVjdXRlQ29tbWFuZEJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPiB9IH0pLmNvbW1hbmRzO1xuXHRcdFx0aWYgKGNvbW1hbmRzPy5leGVjdXRlQ29tbWFuZEJ5SWQgJiYgaXRlbS5jb21tYW5kSWQpIHtcblx0XHRcdFx0dm9pZCBjb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoaXRlbS5jb21tYW5kSWQpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRidG4uYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZXZlbnQpID0+IHtcblx0XHRcdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0bmV3IE1lbnUoKVxuXHRcdFx0XHQuYWRkSXRlbSgobWVudUl0ZW0pID0+IHtcblx0XHRcdFx0XHRtZW51SXRlbS5zZXRUaXRsZSgnQ2hhbmdlIGljb24nKVxuXHRcdFx0XHRcdFx0LnNldEljb24oJ2x1Y2lkZS1pbWFnZS1wbHVzJylcblx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMucGx1Z2luLmFwcCwgKGljb25JZCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQgJiYgaWNvbklkICE9PSBpdGVtLmljb24pIHtcblx0XHRcdFx0XHRcdFx0XHRcdGl0ZW0uaWNvbiA9IGljb25JZDtcblx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlb3JkZXIoKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmFkZEl0ZW0oKG1lbnVJdGVtKSA9PiB7XG5cdFx0XHRcdFx0bWVudUl0ZW0uc2V0VGl0bGUoJ0RlbGV0ZScpXG5cdFx0XHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLXRyYXNoJylcblx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnJlbW92ZUl0ZW0oaXRlbSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvLyBBZGQgd2FybmluZyBjbGFzcyB0byBtYWtlIHRleHQgYW5kIGljb24gcmVkXG5cdFx0XHRcdFx0Y29uc3QgZG9tID0gKG1lbnVJdGVtIGFzIHVua25vd24gYXMgeyBkb206IEhUTUxFbGVtZW50IH0pLmRvbTtcblx0XHRcdFx0XHRpZiAoZG9tKSB7XG5cdFx0XHRcdFx0XHRkb20uY2xhc3NMaXN0LmFkZCgnbW9kLXdhcm5pbmcnKTtcblx0XHRcdFx0XHRcdC8vIEFsc28gbWFrZSB0aGUgaWNvbiByZWRcblx0XHRcdFx0XHRcdGNvbnN0IGljb25FbCA9IGRvbS5xdWVyeVNlbGVjdG9yKCcubWVudS1pdGVtLWljb24gc3ZnJyk7XG5cdFx0XHRcdFx0XHRpZiAoaWNvbkVsKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFVzZSBzZXRDc3NQcm9wcyB0byBzZXQgY29sb3IgKGFscmVhZHkgaW1wb3J0ZWQgZnJvbSB1aU1hbmFnZXIpXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25FbCBhcyBIVE1MRWxlbWVudCwgeyBjb2xvcjogJ3ZhcigtLXRleHQtZXJyb3IpJyB9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcblx0XHR9KTtcblxuXHRcdHRoaXMuY3VzdG9tQWN0aW9ucy5zZXQoaXRlbSwgYnRuKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBZGQgYSBuZXcgY3VzdG9tIGNvbW1hbmQgaXRlbVxuXHQgKi9cblx0cHVibGljIGFzeW5jIGFkZEN1c3RvbUNvbW1hbmQocGFpcjogQ29tbWFuZEljb25QYWlyKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcykge1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMgPSBbXTtcblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IHNob3dPbkZpbGVUeXBlcyB0byBtZE9ubHkgZm9yIFN0YXR1c0Jhckl0ZW0gKFN0YXR1c0Jhckl0ZW0gc3RpbGwgdXNlcyBtZE9ubHkpXG5cdFx0Ly8gSWYgc2hvd09uRmlsZVR5cGVzIGluY2x1ZGVzIFwibWRcIiBvciBcIm1keFwiLCBzZXQgbWRPbmx5IHRvIHRydWVcblx0XHRjb25zdCBoYXNNYXJrZG93bkZpbHRlciA9IHBhaXIuc2hvd09uRmlsZVR5cGVzICYmXG5cdFx0XHQocGFpci5zaG93T25GaWxlVHlwZXMuaW5jbHVkZXMoJ21kJykgfHwgcGFpci5zaG93T25GaWxlVHlwZXMuaW5jbHVkZXMoJ21keCcpKTtcblx0XHRjb25zdCBtZE9ubHkgPSBoYXNNYXJrZG93bkZpbHRlciA/IHRydWUgOiBmYWxzZTtcblxuXHRcdGNvbnN0IGl0ZW06IFN0YXR1c0Jhckl0ZW0gPSB7XG5cdFx0XHRpZDogYGN1c3RvbS0ke3BhaXIuaWR9YCxcblx0XHRcdG5hbWU6IHBhaXIubmFtZSxcblx0XHRcdGRpc3BsYXlOYW1lOiBwYWlyLmRpc3BsYXlOYW1lLFxuXHRcdFx0aWNvbjogcGFpci5pY29uLFxuXHRcdFx0dHlwZTogJ2N1c3RvbScsXG5cdFx0XHRoaWRkZW46IGZhbHNlLFxuXHRcdFx0bWRPbmx5OiBtZE9ubHksXG5cdFx0XHRjb21tYW5kSWQ6IHBhaXIuaWQsXG5cdFx0XHRjb2xvcjogcGFpci5jb2xvcixcblx0XHRcdG1vZGU6IHBhaXIubW9kZSxcblx0XHR9O1xuXG5cdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMucHVzaChpdGVtKTtcblx0XHR0aGlzLnJlb3JkZXIoKTtcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW1vdmUgYW4gaXRlbVxuXHQgKi9cblx0cHVibGljIGFzeW5jIHJlbW92ZUl0ZW0oaXRlbTogU3RhdHVzQmFySXRlbSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMpIHJldHVybjtcblx0XHRjb25zdCBpbmRleCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLmluZGV4T2YoaXRlbSk7XG5cdFx0aWYgKGluZGV4ID4gLTEpIHtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLnNwbGljZShpbmRleCwgMSk7XG5cdFx0fVxuXHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBpdGVtIHZpc2liaWxpdHlcblx0ICovXG5cdHB1YmxpYyBhc3luYyB1cGRhdGVJdGVtVmlzaWJpbGl0eShpdGVtOiBTdGF0dXNCYXJJdGVtLCBoaWRkZW46IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpdGVtLmhpZGRlbiA9IGhpZGRlbjtcblx0XHR0aGlzLnJlb3JkZXIoKTtcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgaXRlbSBtZC9tZHgtb25seSBzZXR0aW5nXG5cdCAqL1xuXHRwdWJsaWMgYXN5bmMgdXBkYXRlSXRlbU1kT25seShpdGVtOiBTdGF0dXNCYXJJdGVtLCBtZE9ubHk6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpdGVtLm1kT25seSA9IG1kT25seTtcblx0XHR0aGlzLnJlb3JkZXIoKTtcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgYnV0dG9uIG5hbWVzL3Rvb2x0aXBzIGZvciBhbGwgZXhpc3RpbmcgY3VzdG9tIGJ1dHRvbnNcblx0ICovXG5cdHB1YmxpYyB1cGRhdGVCdXR0b25OYW1lcygpOiB2b2lkIHtcblx0XHR0aGlzLmN1c3RvbUFjdGlvbnMuZm9yRWFjaCgoYnV0dG9uLCBpdGVtKSA9PiB7XG5cdFx0XHRidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgaXRlbS5uYW1lKTtcblx0XHRcdC8vIFVwZGF0ZSBjb2xvciBpZiBuZWVkZWRcblx0XHRcdGlmIChpdGVtLmNvbG9yICYmIGl0ZW0uY29sb3IgIT09ICcjMDAwMDAwJykge1xuXHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24sIHsgY29sb3I6IGl0ZW0uY29sb3IgfSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRidXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn1cbiIsICIvKipcclxuICogRXhwbG9yZXIgTWFuYWdlciAtIE1hbmFnZXMgY3VzdG9tIGNvbW1hbmQgYnV0dG9ucyBpbiB0aGUgZmlsZSBleHBsb3JlciBuYXZpZ2F0aW9uIGFyZWFcclxuICogQmFzZWQgb24gQ29tbWFuZGVyJ3MgRXhwbG9yZXJNYW5hZ2VyLCBidXQgd2l0aCBuYXRpdmUgQ1NTIGNsYXNzZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBXb3Jrc3BhY2VMZWFmLCBzZXRJY29uLCBNZW51IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgVUlUd2Vha2VyUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBDb21tYW5kSWNvblBhaXIsIEV4cGxvcmVyQnV0dG9uSXRlbSB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgaXNNb2RlQWN0aXZlLCBpc0NvbW1hbmRDaGVja2VkIH0gZnJvbSAnLi4vdXRpbHMvY29tbWFuZFV0aWxzJztcclxuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vdXRpbHMvY3NzVXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEV4cGxvcmVyTWFuYWdlciB7XHJcblx0cHJpdmF0ZSBwbHVnaW46IFVJVHdlYWtlclBsdWdpbjtcclxuXHRwcml2YXRlIGJ1dHRvbnM6IE1hcDxzdHJpbmcsIEhUTUxFbGVtZW50PiA9IG5ldyBNYXAoKTtcclxuXHRwcml2YXRlIG9ic2VydmVyczogTXV0YXRpb25PYnNlcnZlcltdID0gW107XHJcblx0cHJpdmF0ZSBpc1Jlb3JkZXJpbmcgPSBmYWxzZTsgLy8gRmxhZyB0byBwcmV2ZW50IG9ic2VydmVyIGZyb20gdHJpZ2dlcmluZyBkdXJpbmcgcmVvcmRlclxyXG5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFVJVHdlYWtlclBsdWdpbikge1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLmluaXQoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcclxuXHRcdC8vIFdhaXQgZm9yIHdvcmtzcGFjZSB0byBiZSByZWFkeVxyXG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcclxuXHRcdFx0Ly8gSW5pdGlhbGl6ZSBpdGVtcyBhcnJheSBpZiBuZWVkZWRcclxuXHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zKSB7XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcyA9IFtdO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBNaWdyYXRlIGV4aXN0aW5nIGV4cGxvcmVyQ29tbWFuZHMgaWYgbmVlZGVkXHJcblx0XHRcdHRoaXMubWlncmF0ZUV4cGxvcmVyQ29tbWFuZHMoKTtcclxuXHJcblx0XHRcdC8vIENvbnNvbGlkYXRlIHNldHRpbmdzIGFuZCBlbGVtZW50cyAoZGV0ZWN0IGFsbCBidXR0b25zKVxyXG5cdFx0XHR0aGlzLmNvbnNvbGlkYXRlU2V0dGluZ3NBbmRFbGVtZW50cygpO1xyXG5cclxuXHRcdFx0Ly8gU2V0IHVwIGxheW91dCBjaGFuZ2UgbGlzdGVuZXIgb25jZSAobGlrZSBDb21tYW5kZXIgZG9lcylcclxuXHRcdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5jb25zb2xpZGF0ZVNldHRpbmdzQW5kRWxlbWVudHMoKTtcclxuXHRcdFx0XHRcdHRoaXMucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0Ly8gQXBwbHkgbmF0aXZlIGljb24gb3ZlcnJpZGVzIGFmdGVyIGxheW91dCBjaGFuZ2VzXHJcblx0XHRcdFx0XHR0aGlzLmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHQvLyBBZGQgYnV0dG9ucyB0byBhbGwgZXhpc3RpbmcgZXhwbG9yZXJzXHJcblx0XHRcdHRoaXMuYWRkQnV0dG9uc1RvQWxsTGVhdmVzKCk7XHJcblxyXG5cdFx0XHQvLyBSZW9yZGVyIGltbWVkaWF0ZWx5IHRvIGVuc3VyZSBjb3JyZWN0IG9yZGVyIG9uIHN0YXJ0dXBcclxuXHRcdFx0dGhpcy5yZW9yZGVyKCk7XHJcblxyXG5cdFx0XHQvLyBTZXQgdXAgbXV0YXRpb24gb2JzZXJ2ZXIgZm9yIGV4dGVybmFsIGJ1dHRvbiBkZXRlY3Rpb24gKGFmdGVyIGV4cGxvcmVycyBhcmUgcmVhZHkpXHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuc2V0dXBNdXRhdGlvbk9ic2VydmVyKCk7XHJcblx0XHRcdH0sIDEwMCk7XHJcblxyXG5cdFx0XHQvLyBSZWdpc3RlciBjbGVhbnVwXHJcblx0XHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyKCgpID0+IHtcclxuXHRcdFx0XHR0aGlzLmNsZWFudXAoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZSBhbGwgYnV0dG9ucyBjcmVhdGVkIGJ5IHRoaXMgbWFuYWdlciBmcm9tIHRoZSBET01cclxuXHQgKi9cclxuXHRwdWJsaWMgY2xlYW51cCgpOiB2b2lkIHtcclxuXHRcdHRoaXMub2JzZXJ2ZXJzLmZvckVhY2gob2JzZXJ2ZXIgPT4gb2JzZXJ2ZXIuZGlzY29ubmVjdCgpKTtcclxuXHRcdHRoaXMub2JzZXJ2ZXJzID0gW107XHJcblxyXG5cdFx0Y29uc3QgZXhwbG9yZXJzID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2ZpbGUtZXhwbG9yZXInKTtcclxuXHRcdGV4cGxvcmVycy5mb3JFYWNoKChsZWFmKSA9PiB7XHJcblx0XHRcdGNvbnN0IG5hdkJ1dHRvbnNDb250YWluZXIgPSBsZWFmLnZpZXc/LmNvbnRhaW5lckVsPy5xdWVyeVNlbGVjdG9yKCdkaXYubmF2LWJ1dHRvbnMtY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmIChuYXZCdXR0b25zQ29udGFpbmVyKSB7XHJcblx0XHRcdFx0Y29uc3QgbWFuYWdlZEJ1dHRvbnMgPSBuYXZCdXR0b25zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXVpLXR3ZWFrZXItbWFuYWdlZD1cInRydWVcIl0nKTtcclxuXHRcdFx0XHRtYW5hZ2VkQnV0dG9ucy5mb3JFYWNoKGJ0biA9PiBidG4ucmVtb3ZlKCkpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHRoaXMuYnV0dG9ucy5jbGVhcigpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhZGRCdXR0b25zVG9BbGxMZWF2ZXMoKTogdm9pZCB7XHJcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0ZXhwbG9yZXJzLmZvckVhY2goKGxlYWYpID0+IHtcclxuXHRcdFx0dGhpcy5hZGRCdXR0b25zVG9FeHBsb3JlcihsZWFmKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhZGRCdXR0b25zVG9FeHBsb3JlcihsZWFmOiBXb3Jrc3BhY2VMZWFmKTogdm9pZCB7XHJcblx0XHQvLyBKdXN0IHJlb3JkZXIgLSBpdCB3aWxsIGNyZWF0ZSBtaXNzaW5nIGN1c3RvbSBidXR0b25zIGFuZCBwb3NpdGlvbiBldmVyeXRoaW5nIGNvcnJlY3RseVxyXG5cdFx0dGhpcy5yZW9yZGVyKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBNaWdyYXRlIGV4aXN0aW5nIGV4cGxvcmVyQ29tbWFuZHMgdG8gZXhwbG9yZXJCdXR0b25JdGVtc1xyXG5cdCAqL1xyXG5cdHB1YmxpYyBtaWdyYXRlRXhwbG9yZXJDb21tYW5kcygpOiB2b2lkIHtcclxuXHRcdC8vIC4uLiBleGlzdGluZyBjb2RlIC4uLlxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjcmVhdGVPclVwZGF0ZUV4cGxvcmVyQnV0dG9uKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHBhaXI6IENvbW1hbmRJY29uUGFpciwgbGVhZjogV29ya3NwYWNlTGVhZik6IEhUTUxFbGVtZW50IHwgbnVsbCB7XHJcblx0XHQvLyBDaGVjayBpZiBidXR0b24gYWxyZWFkeSBleGlzdHMgKGxpa2UgQ29tbWFuZGVyKVxyXG5cdFx0Y29uc3QgZXhpc3RpbmdCdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZD1cIiR7cGFpci5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGlmIChleGlzdGluZ0J1dHRvbikge1xyXG5cdFx0XHQvLyBVcGRhdGUgZXhpc3RpbmcgYnV0dG9uXHJcblx0XHRcdGV4aXN0aW5nQnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHBhaXIubmFtZSk7XHJcblx0XHRcdC8vIEFwcGx5IGNvbG9yIG9ubHkgaWYgY3VzdG9tIGNvbG9yIGlzIHNldCAobm90IGJsYWNrL2RlZmF1bHQpXHJcblx0XHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdGV4aXN0aW5nQnV0dG9uLnN0eWxlLmNvbG9yID0gcGFpci5jb2xvcjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRleGlzdGluZ0J1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBVcGRhdGUgdG9nZ2xlIHN0YXRlXHJcblx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoZXhpc3RpbmdCdXR0b24sIHBhaXIpO1xyXG5cdFx0XHRyZXR1cm4gZXhpc3RpbmdCdXR0b247XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZGV2aWNlIG1vZGVcclxuXHRcdGlmICghaXNNb2RlQWN0aXZlKHBhaXIubW9kZSwgdGhpcy5wbHVnaW4pKSB7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENyZWF0ZSBidXR0b24gd2l0aCBuYXRpdmUgQ1NTIGNsYXNzZXMgKGV4YWN0bHkgbGlrZSBDb21tYW5kZXIpXHJcblx0XHRjb25zdCBidXR0b24gPSBjcmVhdGVEaXYoe1xyXG5cdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiBuYXYtYWN0aW9uLWJ1dHRvbicsXHJcblx0XHRcdGF0dHI6IHtcclxuXHRcdFx0XHQnZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkJzogcGFpci5pZCxcclxuXHRcdFx0XHQnYXJpYS1sYWJlbCc6IHBhaXIubmFtZSxcclxuXHRcdFx0XHQnYXJpYS1sYWJlbC1wb3NpdGlvbic6ICd0b3AnLFxyXG5cdFx0XHRcdCdkYXRhLXVpLXR3ZWFrZXItbWFuYWdlZCc6ICd0cnVlJyxcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIENoZWNrIHRvZ2dsZSBzdGF0ZSBhbmQgYXBwbHkgaWNvbi9jbGFzc1xyXG5cdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShidXR0b24sIHBhaXIpO1xyXG5cclxuXHRcdC8vIENsaWNrIGhhbmRsZXJcclxuXHRcdGJ1dHRvbi5vbmNsaWNrID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0XHRjb25zdCBjb21tYW5kcyA9ICh0aGlzLnBsdWdpbi5hcHAgYXMgeyBjb21tYW5kcz86IHsgZXhlY3V0ZUNvbW1hbmRCeUlkPzogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4gfSB9KS5jb21tYW5kcztcclxuXHRcdFx0aWYgKGNvbW1hbmRzPy5leGVjdXRlQ29tbWFuZEJ5SWQpIHtcclxuXHRcdFx0XHQvLyBDb21tYW5kIGV4ZWN1dGlvbiBpcyB0cmFja2VkIGJ5IHRoZSBpbnRlcmNlcHRvciBpbiBtYWluLnRzXHJcblx0XHRcdFx0Ly8gSnVzdCBleGVjdXRlIHRoZSBjb21tYW5kIC0gdGhlIGludGVyY2VwdG9yIHdpbGwgaGFuZGxlIHRvZ2dsZSB0cmFja2luZ1xyXG5cdFx0XHRcdHZvaWQgY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKHBhaXIuaWQpO1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSB0b2dnbGUgc3RhdGUgYWZ0ZXIgY29tbWFuZCBleGVjdXRpb25cclxuXHRcdFx0XHQvLyBUaGUgaW50ZXJjZXB0b3Igd2lsbCBhbHNvIHJlZnJlc2gsIGJ1dCB3ZSB1cGRhdGUgdGhpcyBidXR0b24gaW1tZWRpYXRlbHkgZm9yIHJlc3BvbnNpdmVuZXNzXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XHJcblx0XHRcdFx0XHQvLyBBbHNvIHVwZGF0ZSBhbGwgb3RoZXIgYnV0dG9ucyBmb3IgdGhpcyBjb21tYW5kXHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUFsbEJ1dHRvbnNGb3JDb21tYW5kKHBhaXIuaWQpO1xyXG5cdFx0XHRcdH0sIDEwMCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0dGhpcy5idXR0b25zLnNldChwYWlyLmlkLCBidXR0b24pO1xyXG5cclxuXHRcdC8vIEFkZCBjb250ZXh0IG1lbnUgKHJpZ2h0LWNsaWNrKVxyXG5cdFx0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRuZXcgTWVudSgpXHJcblx0XHRcdFx0LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ0NoYW5nZSBpY29uJylcclxuXHRcdFx0XHRcdFx0LnNldEljb24oJ2x1Y2lkZS1pbWFnZS1wbHVzJylcclxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIChpY29uSWQpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQgJiYgaWNvbklkICE9PSBwYWlyLmljb24pIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci5pY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ0RlbGV0ZScpXHJcblx0XHRcdFx0XHRcdC5zZXRJY29uKCdsdWNpZGUtdHJhc2gnKVxyXG5cdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnJlbW92ZUNvbW1hbmQocGFpcik7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0Ly8gQWRkIHdhcm5pbmcgY2xhc3MgdG8gbWFrZSB0ZXh0IGFuZCBpY29uIHJlZFxyXG5cdFx0XHRcdFx0Y29uc3QgZG9tID0gKGl0ZW0gYXMgdW5rbm93biBhcyB7IGRvbTogSFRNTEVsZW1lbnQgfSkuZG9tO1xyXG5cdFx0XHRcdFx0aWYgKGRvbSkge1xyXG5cdFx0XHRcdFx0XHRkb20uY2xhc3NMaXN0LmFkZCgnbW9kLXdhcm5pbmcnKTtcclxuXHRcdFx0XHRcdFx0Ly8gQWxzbyBtYWtlIHRoZSBpY29uIHJlZFxyXG5cdFx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBkb20ucXVlcnlTZWxlY3RvcignLm1lbnUtaXRlbS1pY29uIHN2ZycpO1xyXG5cdFx0XHRcdFx0XHRpZiAoaWNvbkVsKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIHNldENzc1Byb3BzIHRvIHNldCBjb2xvciAoYWxyZWFkeSBpbXBvcnRlZCBmcm9tIHVpTWFuYWdlcilcclxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uRWwgYXMgSFRNTEVsZW1lbnQsIHsgY29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKScgfSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFwcGVuZCBidXR0b24gdG8gY29udGFpbmVyIChleGFjdGx5IGxpa2UgQ29tbWFuZGVyKVxyXG5cdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcblx0XHRyZXR1cm4gYnV0dG9uO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2VuZXJhdGUgY2Fub25pY2FsIG5hbWUgZnJvbSBidXR0b24gZWxlbWVudFxyXG5cdCAqL1xyXG5cdHByaXZhdGUgZ2VuZXJhdGVDYW5vbmljYWxOYW1lKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBhcmlhTGFiZWw6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHQvLyBGb3IgbmF0aXZlIGJ1dHRvbnMsIHVzZSB0aGUgYXJpYS1sYWJlbCBkaXJlY3RseVxyXG5cdFx0Y29uc3QgbmF0aXZlQnV0dG9uTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG5cdFx0XHQnTmV3IG5vdGUnOiAnbmV3Tm90ZScsXHJcblx0XHRcdCdOZXcgZm9sZGVyJzogJ25ld0ZvbGRlcicsXHJcblx0XHRcdCdDaGFuZ2Ugc29ydCBvcmRlcic6ICdzb3J0T3JkZXInLFxyXG5cdFx0XHQnQXV0by1yZXZlYWwgY3VycmVudCBmaWxlJzogJ2F1dG9SZXZlYWwnLFxyXG5cdFx0XHQnQ29sbGFwc2UgYWxsJzogJ2NvbGxhcHNlQWxsJyxcclxuXHRcdFx0J0V4cGFuZCBhbGwnOiAnY29sbGFwc2VBbGwnLCAvLyBCb3RoIG1hcCB0byBzYW1lIGtleVxyXG5cdFx0fTtcclxuXHJcblx0XHRpZiAobmF0aXZlQnV0dG9uTWFwW2FyaWFMYWJlbF0pIHtcclxuXHRcdFx0cmV0dXJuIGBuYXRpdmUtJHtuYXRpdmVCdXR0b25NYXBbYXJpYUxhYmVsXX1gO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZvciBjdXN0b20gY29tbWFuZHMsIHVzZSBjb21tYW5kIElEXHJcblx0XHRjb25zdCBjb21tYW5kSWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkJyk7XHJcblx0XHRpZiAoY29tbWFuZElkKSB7XHJcblx0XHRcdHJldHVybiBgY3VzdG9tLSR7Y29tbWFuZElkfWA7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRm9yIGV4dGVybmFsIGJ1dHRvbnMsIHVzZSBhcmlhLWxhYmVsICsgY2xhc3MgbmFtZXMgdG8gZ2VuZXJhdGUgc3RhYmxlIElEXHJcblx0XHRjb25zdCBhbGxDbGFzc2VzID0gQXJyYXkuZnJvbShlbGVtZW50LmNsYXNzTGlzdCk7XHJcblx0XHRjb25zdCBpZ25vcmVkQ2xhc3NlcyA9IFsnY2xpY2thYmxlLWljb24nLCAnbmF2LWFjdGlvbi1idXR0b24nXTtcclxuXHRcdGNvbnN0IHN0YWJsZUNsYXNzZXMgPSBhbGxDbGFzc2VzLmZpbHRlcihjbHMgPT4gIWlnbm9yZWRDbGFzc2VzLmluY2x1ZGVzKGNscykpO1xyXG5cclxuXHRcdC8vIFRyeSB0byBmaW5kIHBsdWdpbiBpZGVudGlmaWVyIGluIGNsYXNzZXNcclxuXHRcdGNvbnN0IHBsdWdpbkNsYXNzID0gc3RhYmxlQ2xhc3Nlcy5maW5kKGNscyA9PlxyXG5cdFx0XHRjbHMuaW5jbHVkZXMoJ3BsdWdpbi0nKSB8fFxyXG5cdFx0XHRjbHMuaW5jbHVkZXMoJ2NvbW1hbmRlcicpIHx8XHJcblx0XHRcdGNscy5pbmNsdWRlcygnZXhwbG9yZXItZm9jdXMnKVxyXG5cdFx0KTtcclxuXHJcblx0XHRpZiAocGx1Z2luQ2xhc3MpIHtcclxuXHRcdFx0Ly8gVXNlIHBsdWdpbiBjbGFzcyBhcyBiYXNlXHJcblx0XHRcdGNvbnN0IHNhbml0aXplZEFyaWFMYWJlbCA9IGFyaWFMYWJlbC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teYS16MC05XSsvZywgJy0nKTtcclxuXHRcdFx0cmV0dXJuIGBleHRlcm5hbC0ke3BsdWdpbkNsYXNzfS0ke3Nhbml0aXplZEFyaWFMYWJlbH1gO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZhbGxiYWNrOiB1c2UgYXJpYS1sYWJlbFxyXG5cdFx0Y29uc3Qgc2FuaXRpemVkID0gYXJpYUxhYmVsLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15hLXowLTldKy9nLCAnLScpO1xyXG5cdFx0cmV0dXJuIGBleHRlcm5hbC0ke3Nhbml0aXplZH1gO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ29uc29saWRhdGUgc2V0dGluZ3MgYW5kIGVsZW1lbnRzIC0gZGV0ZWN0IGFsbCBidXR0b25zIGFuZCBtZXJnZSB3aXRoIHNhdmVkIGl0ZW1zXHJcblx0ICovXHJcblx0cHVibGljIGNvbnNvbGlkYXRlU2V0dGluZ3NBbmRFbGVtZW50cygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGV4cGxvcmVycyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdmaWxlLWV4cGxvcmVyJyk7XHJcblx0XHRpZiAoZXhwbG9yZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuXHRcdC8vIFVzZSBmaXJzdCBleHBsb3JlciBhcyByZWZlcmVuY2UgKGFsbCBleHBsb3JlcnMgc2hvdWxkIGhhdmUgc2FtZSBidXR0b25zKVxyXG5cdFx0Y29uc3QgZmlyc3RFeHBsb3JlciA9IGV4cGxvcmVyc1swXTtcclxuXHRcdGNvbnN0IG5hdkJ1dHRvbnNDb250YWluZXIgPSBmaXJzdEV4cGxvcmVyLnZpZXc/LmNvbnRhaW5lckVsPy5xdWVyeVNlbGVjdG9yKCdkaXYubmF2LWJ1dHRvbnMtY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRpZiAoIW5hdkJ1dHRvbnNDb250YWluZXIpIHJldHVybjtcclxuXHJcblx0XHQvLyBHZXQgYWxsIGJ1dHRvbnMgZnJvbSBET00gKGluIERPTSBvcmRlcilcclxuXHRcdGNvbnN0IGV4aXN0aW5nQnV0dG9ucyA9IEFycmF5LmZyb20obmF2QnV0dG9uc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PignLm5hdi1hY3Rpb24tYnV0dG9uJykpLmZpbHRlcihcclxuXHRcdFx0ZWxlbWVudCA9PiB7XHJcblx0XHRcdFx0Ly8gQ1JJVElDQUwgRklYOiBJZ25vcmUgb3JwaGFuZWQgbWFuYWdlZCBidXR0b25zIChlLmcuLCBmcm9tIGRlbGV0ZWQgZGF0YSlcclxuXHRcdFx0XHRpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1tYW5hZ2VkJykgPT09ICd0cnVlJykge1xyXG5cdFx0XHRcdFx0Y29uc3QgY29tbWFuZElkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZCcpO1xyXG5cdFx0XHRcdFx0Ly8gSWYgaXQncyBhIG1hbmFnZWQgYnV0dG9uIGJ1dCBub3QgaW4gb3VyIGN1cnJlbnQgaXRlbXMgbGlzdCwgaWdub3JlIGl0IGZvciBkaXNjb3ZlcnlcclxuXHRcdFx0XHRcdGlmICghY29tbWFuZElkIHx8ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zLnNvbWUoaXRlbSA9PiBpdGVtLmNvbW1hbmRJZCA9PT0gY29tbWFuZElkKSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHQpO1xyXG5cclxuXHRcdC8vIEdldCBzYXZlZCBpdGVtcyBmcm9tIHNldHRpbmdzXHJcblx0XHRjb25zdCBzYXZlZEl0ZW1zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcyB8fCBbXTtcclxuXHRcdGNvbnN0IHNhdmVkSXRlbXNNYXAgPSBuZXcgTWFwKHNhdmVkSXRlbXMubWFwKGl0ZW0gPT4gW2l0ZW0uaWQsIGl0ZW1dKSk7XHJcblx0XHRjb25zdCBtYXRjaGVkU2F2ZWRJZHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHRcdGNvbnN0IG5ld0l0ZW1zOiBFeHBsb3JlckJ1dHRvbkl0ZW1bXSA9IFtdO1xyXG5cclxuXHRcdC8vIFRyYWNrIGVsZW1lbnQgY291bnRzIHBlciBuYW1lIHBhdHRlcm5cclxuXHRcdGNvbnN0IGVsZW1lbnRDb3VudDogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xyXG5cclxuXHRcdC8vIFByb2Nlc3MgZWxlbWVudHMgaW4gRE9NIG9yZGVyXHJcblx0XHRleGlzdGluZ0J1dHRvbnMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG5cdFx0XHRjb25zdCBhcmlhTGFiZWwgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpIHx8ICcnO1xyXG5cdFx0XHRjb25zdCBjb21tYW5kSWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkJyk7XHJcblxyXG5cdFx0XHQvLyBHZW5lcmF0ZSBjYW5vbmljYWwgbmFtZSBhbmQgSURcclxuXHRcdFx0Y29uc3QgY2Fub25pY2FsTmFtZSA9IHRoaXMuZ2VuZXJhdGVDYW5vbmljYWxOYW1lKGVsZW1lbnQsIGFyaWFMYWJlbCk7XHJcblx0XHRcdGxldCBpZCA9IGNhbm9uaWNhbE5hbWU7XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIGEgbmF0aXZlIGJ1dHRvbiAodGhleSBkb24ndCBoYXZlIGluZGljZXMpXHJcblx0XHRcdGlmIChjYW5vbmljYWxOYW1lLnN0YXJ0c1dpdGgoJ25hdGl2ZS0nKSkge1xyXG5cdFx0XHRcdC8vIE5hdGl2ZSBidXR0b25zIGhhdmUgZml4ZWQgSURzXHJcblx0XHRcdFx0aWQgPSBjYW5vbmljYWxOYW1lO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGNhbm9uaWNhbE5hbWUuc3RhcnRzV2l0aCgnY3VzdG9tLScpKSB7XHJcblx0XHRcdFx0Ly8gQ3VzdG9tIGNvbW1hbmRzIGhhdmUgZml4ZWQgSURzIGJhc2VkIG9uIGNvbW1hbmQgSURcclxuXHRcdFx0XHRpZCA9IGNhbm9uaWNhbE5hbWU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gRXh0ZXJuYWwgYnV0dG9ucyBtaWdodCBoYXZlIG11bHRpcGxlIGluc3RhbmNlcyAtIGFkZCBpbmRleFxyXG5cdFx0XHRcdGNvbnN0IGJhc2VOYW1lID0gY2Fub25pY2FsTmFtZTtcclxuXHRcdFx0XHRjb25zdCBjb3VudCA9IChiYXNlTmFtZSBpbiBlbGVtZW50Q291bnQpID8gZWxlbWVudENvdW50W2Jhc2VOYW1lXSArIDEgOiAxO1xyXG5cdFx0XHRcdGVsZW1lbnRDb3VudFtiYXNlTmFtZV0gPSBjb3VudDtcclxuXHRcdFx0XHRpZCA9IGNvdW50ID4gMSA/IGAke2Jhc2VOYW1lfTske2NvdW50fWAgOiBiYXNlTmFtZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgd2UgaGF2ZSBhIHNhdmVkIGl0ZW0gZm9yIHRoaXMgSURcclxuXHRcdFx0aWYgKHNhdmVkSXRlbXNNYXAuaGFzKGlkKSkge1xyXG5cdFx0XHRcdG1hdGNoZWRTYXZlZElkcy5hZGQoaWQpO1xyXG5cdFx0XHRcdGNvbnN0IHNhdmVkSXRlbSA9IHNhdmVkSXRlbXNNYXAuZ2V0KGlkKSE7XHJcblx0XHRcdFx0Ly8gVXBkYXRlIG5hbWUgZnJvbSBET00gaWYgaXQncyBnZW5lcmljXHJcblx0XHRcdFx0aWYgKCFzYXZlZEl0ZW0ubmFtZSB8fCBzYXZlZEl0ZW0ubmFtZSA9PT0gaWQgfHwgc2F2ZWRJdGVtLm5hbWUuc3RhcnRzV2l0aCgnZXh0ZXJuYWwtJykpIHtcclxuXHRcdFx0XHRcdHNhdmVkSXRlbS5uYW1lID0gYXJpYUxhYmVsIHx8IHNhdmVkSXRlbS5uYW1lIHx8IGlkO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBVcGRhdGUgYXJpYUxhYmVsIGlmIGl0IGNoYW5nZWRcclxuXHRcdFx0XHRpZiAoYXJpYUxhYmVsKSB7XHJcblx0XHRcdFx0XHRzYXZlZEl0ZW0uYXJpYUxhYmVsID0gYXJpYUxhYmVsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBOZXcgaXRlbSAtIGRldGVybWluZSB0eXBlXHJcblx0XHRcdFx0bGV0IHR5cGU6ICduYXRpdmUnIHwgJ2V4dGVybmFsJyB8ICdjdXN0b20nO1xyXG5cdFx0XHRcdGlmIChjYW5vbmljYWxOYW1lLnN0YXJ0c1dpdGgoJ25hdGl2ZS0nKSkge1xyXG5cdFx0XHRcdFx0dHlwZSA9ICduYXRpdmUnO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoY2Fub25pY2FsTmFtZS5zdGFydHNXaXRoKCdjdXN0b20tJykpIHtcclxuXHRcdFx0XHRcdHR5cGUgPSAnY3VzdG9tJztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dHlwZSA9ICdleHRlcm5hbCc7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBDcmVhdGUgbmV3IGl0ZW1cclxuXHRcdFx0XHRjb25zdCBuZXdJdGVtOiBFeHBsb3JlckJ1dHRvbkl0ZW0gPSB7XHJcblx0XHRcdFx0XHRpZDogaWQsXHJcblx0XHRcdFx0XHRuYW1lOiBhcmlhTGFiZWwgfHwgaWQsXHJcblx0XHRcdFx0XHRhcmlhTGFiZWw6IGFyaWFMYWJlbCxcclxuXHRcdFx0XHRcdHR5cGU6IHR5cGUsXHJcblx0XHRcdFx0XHRjb21tYW5kSWQ6IGNvbW1hbmRJZCB8fCB1bmRlZmluZWQsXHJcblx0XHRcdFx0XHRoaWRkZW46IGZhbHNlLFxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdC8vIEZvciBjdXN0b20gY29tbWFuZHMsIGNvcHkgcHJvcGVydGllcyBmcm9tIGV4cGxvcmVyQ29tbWFuZHNcclxuXHRcdFx0XHRpZiAodHlwZSA9PT0gJ2N1c3RvbScgJiYgY29tbWFuZElkKSB7XHJcblx0XHRcdFx0XHRjb25zdCBleGlzdGluZ0NvbW1hbmQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLmZpbmQoYyA9PiBjLmlkID09PSBjb21tYW5kSWQpO1xyXG5cdFx0XHRcdFx0aWYgKGV4aXN0aW5nQ29tbWFuZCkge1xyXG5cdFx0XHRcdFx0XHRuZXdJdGVtLmljb24gPSBleGlzdGluZ0NvbW1hbmQuaWNvbjtcclxuXHRcdFx0XHRcdFx0bmV3SXRlbS5kaXNwbGF5TmFtZSA9IGV4aXN0aW5nQ29tbWFuZC5kaXNwbGF5TmFtZTtcclxuXHRcdFx0XHRcdFx0bmV3SXRlbS5tb2RlID0gZXhpc3RpbmdDb21tYW5kLm1vZGU7XHJcblx0XHRcdFx0XHRcdG5ld0l0ZW0uY29sb3IgPSBleGlzdGluZ0NvbW1hbmQuY29sb3I7XHJcblx0XHRcdFx0XHRcdG5ld0l0ZW0uc2hvd09uRmlsZVR5cGVzID0gZXhpc3RpbmdDb21tYW5kLnNob3dPbkZpbGVUeXBlcztcclxuXHRcdFx0XHRcdFx0bmV3SXRlbS5oaWRlT25GaWxlVHlwZXMgPSBleGlzdGluZ0NvbW1hbmQuaGlkZU9uRmlsZVR5cGVzO1xyXG5cdFx0XHRcdFx0XHRuZXdJdGVtLnRvZ2dsZUljb24gPSBleGlzdGluZ0NvbW1hbmQudG9nZ2xlSWNvbjtcclxuXHRcdFx0XHRcdFx0bmV3SXRlbS51c2VBY3RpdmVDbGFzcyA9IGV4aXN0aW5nQ29tbWFuZC51c2VBY3RpdmVDbGFzcztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdG5ld0l0ZW1zLnB1c2gobmV3SXRlbSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFkZCBuZXcgaXRlbXMgdG8gc2V0dGluZ3NcclxuXHRcdGlmIChuZXdJdGVtcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMucHVzaCguLi5uZXdJdGVtcyk7XHJcblx0XHRcdHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgdXAgbXV0YXRpb24gb2JzZXJ2ZXIgdG8gZGV0ZWN0IG5ldyBleHRlcm5hbCBidXR0b25zXHJcblx0ICovXHJcblx0cHJpdmF0ZSBzZXR1cE11dGF0aW9uT2JzZXJ2ZXIoKTogdm9pZCB7XHJcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0aWYgKGV4cGxvcmVycy5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcblx0XHQvLyBTZXQgdXAgb2JzZXJ2ZXIgZm9yIGVhY2ggZXhwbG9yZXJcclxuXHRcdGV4cGxvcmVycy5mb3JFYWNoKChleHBsb3JlcikgPT4ge1xyXG5cdFx0XHRjb25zdCBuYXZCdXR0b25zQ29udGFpbmVyID0gZXhwbG9yZXIudmlldz8uY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKCFuYXZCdXR0b25zQ29udGFpbmVyKSByZXR1cm47XHJcblxyXG5cdFx0XHRsZXQgb2JzZXJ2ZXJUaW1lb3V0OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHRjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcclxuXHRcdFx0XHRpZiAodGhpcy5pc1Jlb3JkZXJpbmcpIHJldHVybjtcclxuXHJcblx0XHRcdFx0Ly8gT25seSB0cmlnZ2VyIGlmIHRoZXJlIGFyZSBhY3R1YWxseSBuZXcgbm9kZXMgYWRkZWQgKG5vdCBqdXN0IHJlb3JkZXJlZClcclxuXHRcdFx0XHRjb25zdCBoYXNOZXdOb2RlcyA9IG11dGF0aW9ucy5zb21lKG11dGF0aW9uID0+XHJcblx0XHRcdFx0XHRtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aCA+IDAgJiZcclxuXHRcdFx0XHRcdEFycmF5LmZyb20obXV0YXRpb24uYWRkZWROb2Rlcykuc29tZShub2RlID0+XHJcblx0XHRcdFx0XHRcdG5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJlxyXG5cdFx0XHRcdFx0XHRub2RlLmNsYXNzTGlzdC5jb250YWlucygnbmF2LWFjdGlvbi1idXR0b24nKSAmJlxyXG5cdFx0XHRcdFx0XHQhbm9kZS5oYXNBdHRyaWJ1dGUoJ2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZCcpIC8vIE9ubHkgZXh0ZXJuYWwgYnV0dG9ucyAobm90IG91ciBjdXN0b20gb25lcylcclxuXHRcdFx0XHRcdClcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHRpZiAoIWhhc05ld05vZGVzKSByZXR1cm47IC8vIFNraXAgaWYgbm8gbmV3IGV4dGVybmFsIGJ1dHRvbnNcclxuXHJcblx0XHRcdFx0aWYgKG9ic2VydmVyVGltZW91dCkge1xyXG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KG9ic2VydmVyVGltZW91dCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG9ic2VydmVyVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKCF0aGlzLmlzUmVvcmRlcmluZykge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmNvbnNvbGlkYXRlU2V0dGluZ3NBbmRFbGVtZW50cygpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LCAxMDAwKTsgLy8gTG9uZ2VyIGRlYm91bmNlIHRvIHByZXZlbnQgZmxpY2tlcmluZ1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdG9ic2VydmVyLm9ic2VydmUobmF2QnV0dG9uc0NvbnRhaW5lciwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IGZhbHNlIH0pO1xyXG5cdFx0XHR0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVvcmRlciBidXR0b25zIGJhc2VkIG9uIHNldHRpbmdzIG9yZGVyXHJcblx0ICovXHJcblx0cHVibGljIHJlb3JkZXIoKTogdm9pZCB7XHJcblx0XHR0aGlzLmlzUmVvcmRlcmluZyA9IHRydWU7XHJcblxyXG5cdFx0Ly8gRGlzY29ubmVjdCBvYnNlcnZlcnMgdGVtcG9yYXJpbHkgdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHR0aGlzLm9ic2VydmVycy5mb3JFYWNoKG9ic2VydmVyID0+IG9ic2VydmVyLmRpc2Nvbm5lY3QoKSk7XHJcblxyXG5cdFx0Y29uc3QgZXhwbG9yZXJzID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2ZpbGUtZXhwbG9yZXInKTtcclxuXHRcdGV4cGxvcmVycy5mb3JFYWNoKChsZWFmKSA9PiB7XHJcblx0XHRcdGNvbnN0IG5hdkJ1dHRvbnNDb250YWluZXIgPSBsZWFmLnZpZXc/LmNvbnRhaW5lckVsPy5xdWVyeVNlbGVjdG9yKCdkaXYubmF2LWJ1dHRvbnMtY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmICghbmF2QnV0dG9uc0NvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuXHRcdFx0Ly8gR2V0IGFsbCBidXR0b25zXHJcblx0XHRcdGNvbnN0IGFsbEJ1dHRvbnMgPSBBcnJheS5mcm9tKG5hdkJ1dHRvbnNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oJy5uYXYtYWN0aW9uLWJ1dHRvbicpKTtcclxuXHRcdFx0Y29uc3QgYnV0dG9uTWFwID0gbmV3IE1hcDxzdHJpbmcsIEhUTUxFbGVtZW50PigpO1xyXG5cclxuXHRcdFx0Ly8gTWFwIGJ1dHRvbnMgYnkgSURcclxuXHRcdFx0YWxsQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRjb25zdCBhcmlhTGFiZWwgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJykgfHwgJyc7XHJcblx0XHRcdFx0Y29uc3QgY2Fub25pY2FsTmFtZSA9IHRoaXMuZ2VuZXJhdGVDYW5vbmljYWxOYW1lKGJ1dHRvbiwgYXJpYUxhYmVsKTtcclxuXHJcblx0XHRcdFx0Ly8gRm9yIG5hdGl2ZSBidXR0b25zLCB1c2UgY2Fub25pY2FsIG5hbWUgZGlyZWN0bHlcclxuXHRcdFx0XHRpZiAoY2Fub25pY2FsTmFtZS5zdGFydHNXaXRoKCduYXRpdmUtJykpIHtcclxuXHRcdFx0XHRcdGJ1dHRvbk1hcC5zZXQoY2Fub25pY2FsTmFtZSwgYnV0dG9uKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGNhbm9uaWNhbE5hbWUuc3RhcnRzV2l0aCgnY3VzdG9tLScpKSB7XHJcblx0XHRcdFx0XHRidXR0b25NYXAuc2V0KGNhbm9uaWNhbE5hbWUsIGJ1dHRvbik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIEZvciBleHRlcm5hbCBidXR0b25zLCB0cnkgdG8gbWF0Y2ggYnkgSURcclxuXHRcdFx0XHRcdGNvbnN0IHNhdmVkSXRlbXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zIHx8IFtdO1xyXG5cdFx0XHRcdFx0Y29uc3QgbWF0Y2hpbmdJdGVtID0gc2F2ZWRJdGVtcy5maW5kKGl0ZW0gPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAoaXRlbS5pZCA9PT0gY2Fub25pY2FsTmFtZSkgcmV0dXJuIHRydWU7XHJcblx0XHRcdFx0XHRcdGlmIChpdGVtLmlkLnN0YXJ0c1dpdGgoY2Fub25pY2FsTmFtZSArICc7JykpIHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdFx0XHQvLyBNYXRjaCBieSBhcmlhLWxhYmVsIGlmIElEIGRvZXNuJ3QgbWF0Y2hcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGl0ZW0uYXJpYUxhYmVsID09PSBhcmlhTGFiZWwgJiYgaXRlbS50eXBlID09PSAnZXh0ZXJuYWwnO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRpZiAobWF0Y2hpbmdJdGVtKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbk1hcC5zZXQobWF0Y2hpbmdJdGVtLmlkLCBidXR0b24pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBSZW9yZGVyIGJhc2VkIG9uIHNldHRpbmdzXHJcblx0XHRcdGNvbnN0IG9yZGVyZWRCdXR0b25zOiBIVE1MRWxlbWVudFtdID0gW107XHJcblx0XHRcdGNvbnN0IGl0ZW1zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcyB8fCBbXTtcclxuXHJcblx0XHRcdC8vIEZpcnN0LCBoYW5kbGUgaGlkZGVuIGJ1dHRvbnMgKGhpZGUgdGhlbSB3aXRoIENTUylcclxuXHRcdFx0aXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdGlmIChpdGVtLmhpZGRlbikge1xyXG5cdFx0XHRcdFx0Y29uc3QgYnV0dG9uID0gYnV0dG9uTWFwLmdldChpdGVtLmlkKTtcclxuXHRcdFx0XHRcdGlmIChidXR0b24pIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3VpLXR3ZWFrZXItZXhwbG9yZXItYnV0dG9uLWhpZGRlbicpO1xyXG5cdFx0XHRcdFx0XHRidXR0b25NYXAuZGVsZXRlKGl0ZW0uaWQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBUaGVuIGhhbmRsZSB2aXNpYmxlIGJ1dHRvbnNcclxuXHRcdFx0Zm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XHJcblx0XHRcdFx0aWYgKGl0ZW0uaGlkZGVuKSBjb250aW51ZTtcclxuXHJcblx0XHRcdFx0Y29uc3QgYnV0dG9uID0gYnV0dG9uTWFwLmdldChpdGVtLmlkKTtcclxuXHRcdFx0XHRpZiAoYnV0dG9uKSB7XHJcblx0XHRcdFx0XHQvLyBSZW1vdmUgaGlkZGVuIGNsYXNzIGlmIGl0IHdhcyBwcmV2aW91c2x5IGhpZGRlblxyXG5cdFx0XHRcdFx0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXR3ZWFrZXItZXhwbG9yZXItYnV0dG9uLWhpZGRlbicpO1xyXG5cdFx0XHRcdFx0b3JkZXJlZEJ1dHRvbnMucHVzaChidXR0b24pO1xyXG5cdFx0XHRcdFx0YnV0dG9uTWFwLmRlbGV0ZShpdGVtLmlkKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2N1c3RvbScpIHtcclxuXHRcdFx0XHRcdC8vIFJlY3JlYXRlIGN1c3RvbSBjb21tYW5kIGJ1dHRvblxyXG5cdFx0XHRcdFx0Y29uc3QgY29tbWFuZFBhaXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLmZpbmQoYyA9PiBjLmlkID09PSBpdGVtLmNvbW1hbmRJZCk7XHJcblx0XHRcdFx0XHRpZiAoY29tbWFuZFBhaXIpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbmV3QnV0dG9uID0gdGhpcy5jcmVhdGVPclVwZGF0ZUV4cGxvcmVyQnV0dG9uKG5hdkJ1dHRvbnNDb250YWluZXIsIGNvbW1hbmRQYWlyLCBsZWFmKTtcclxuXHRcdFx0XHRcdFx0aWYgKG5ld0J1dHRvbikge1xyXG5cdFx0XHRcdFx0XHRcdG9yZGVyZWRCdXR0b25zLnB1c2gobmV3QnV0dG9uKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIGJ1dHRvbnMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHNldHRpbmdzIChleGNlcHQgbmF0aXZlIGFuZCBleHRlcm5hbClcclxuXHRcdFx0YnV0dG9uTWFwLmZvckVhY2goKGJ1dHRvbiwgaWQpID0+IHtcclxuXHRcdFx0XHRjb25zdCBpdGVtID0gaXRlbXMuZmluZChpID0+IGkuaWQgPT09IGlkKTtcclxuXHRcdFx0XHRpZiAoIWl0ZW0gJiYgIWlkLnN0YXJ0c1dpdGgoJ25hdGl2ZS0nKSAmJiAhaWQuc3RhcnRzV2l0aCgnZXh0ZXJuYWwtJykpIHtcclxuXHRcdFx0XHRcdGJ1dHRvbi5yZW1vdmUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gUGh5c2ljYWxseSByZW9yZGVyIERPTSBlbGVtZW50c1xyXG5cdFx0XHRvcmRlcmVkQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRpZiAoYnV0dG9uLnBhcmVudEVsZW1lbnQgPT09IG5hdkJ1dHRvbnNDb250YWluZXIpIHtcclxuXHRcdFx0XHRcdG5hdkJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gQXBwbHkgbmF0aXZlIGljb24gb3ZlcnJpZGVzXHJcblx0XHRcdHRoaXMuYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBSZWNvbm5lY3Qgb2JzZXJ2ZXJzIGFmdGVyIGEgZGVsYXkgdG8gYWxsb3cgRE9NIHRvIHNldHRsZVxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdHRoaXMuaXNSZW9yZGVyaW5nID0gZmFsc2U7XHJcblx0XHRcdC8vIENsZWFyIG9sZCBvYnNlcnZlcnMgYXJyYXkgKHRoZXkncmUgYWxyZWFkeSBkaXNjb25uZWN0ZWQpXHJcblx0XHRcdHRoaXMub2JzZXJ2ZXJzID0gW107XHJcblx0XHRcdC8vIFJlY29ubmVjdCBvYnNlcnZlcnNcclxuXHRcdFx0dGhpcy5zZXR1cE11dGF0aW9uT2JzZXJ2ZXIoKTtcclxuXHRcdH0sIDIwMCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgYnV0dG9uIHRvZ2dsZSBzdGF0ZSAoaWNvbiBvciBpcy1hY3RpdmUgY2xhc3MpXHJcblx0ICovXHJcblx0cHJpdmF0ZSB1cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShidXR0b246IEhUTUxFbGVtZW50LCBwYWlyOiBDb21tYW5kSWNvblBhaXIpOiB2b2lkIHtcclxuXHRcdC8vIENoZWNrIGlmIHRvZ2dsZSBpcyBjb25maWd1cmVkXHJcblx0XHQvLyBJZiB1c2VBY3RpdmVDbGFzcyBpcyB0cnVlLCB3ZSBzdGlsbCBuZWVkIHRvIGNoZWNrIHRvZ2dsZSBzdGF0ZSBldmVuIHdpdGhvdXQgdG9nZ2xlSWNvblxyXG5cdFx0aWYgKCFwYWlyLnRvZ2dsZUljb24gJiYgIXBhaXIudXNlQWN0aXZlQ2xhc3MpIHtcclxuXHRcdFx0Ly8gTm8gdG9nZ2xlIGNvbmZpZ3VyZWQgLSB1c2UgZGVmYXVsdCBpY29uXHJcblx0XHRcdGJ1dHRvbi5lbXB0eSgpO1xyXG5cdFx0XHRzZXRJY29uKGJ1dHRvbiwgcGFpci5pY29uKTtcclxuXHRcdFx0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xyXG5cdFx0XHQvLyBBcHBseSBjb2xvciBvbmx5IGlmIGN1c3RvbSBjb2xvciBpcyBzZXQgKG5vdCBibGFjay9kZWZhdWx0KVxyXG5cdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRidXR0b24uc3R5bGUuY29sb3IgPSBwYWlyLmNvbG9yO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGJ1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgY29tbWFuZCBpcyBjdXJyZW50bHkgdG9nZ2xlZCBvblxyXG5cdFx0Y29uc3QgaXNDaGVja2VkID0gaXNDb21tYW5kQ2hlY2tlZChwYWlyLmlkLCB0aGlzLnBsdWdpbik7XHJcblxyXG5cdFx0aWYgKHBhaXIudXNlQWN0aXZlQ2xhc3MpIHtcclxuXHRcdFx0Ly8gVXNlIGlzLWFjdGl2ZSBjbGFzcyBpbnN0ZWFkIG9mIGljb24gc3dhcFxyXG5cdFx0XHQvLyBPbmx5IHVwZGF0ZSBpY29uIGlmIGl0J3MgZGlmZmVyZW50ICh0byBhdm9pZCB1bm5lY2Vzc2FyeSBET00gbWFuaXB1bGF0aW9uKVxyXG5cdFx0XHRjb25zdCBjdXJyZW50SWNvbiA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcuc3ZnLWljb24nKTtcclxuXHRcdFx0Y29uc3QgaWNvbk5hbWUgPSBwYWlyLmljb24ucmVwbGFjZSgnbHVjaWRlLScsICcnKTtcclxuXHRcdFx0aWYgKCFjdXJyZW50SWNvbiB8fCAhY3VycmVudEljb24uY2xhc3NMaXN0LmNvbnRhaW5zKGljb25OYW1lKSkge1xyXG5cdFx0XHRcdGJ1dHRvbi5lbXB0eSgpO1xyXG5cdFx0XHRcdHNldEljb24oYnV0dG9uLCBwYWlyLmljb24pO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIEFsd2F5cyB1cGRhdGUgaXMtYWN0aXZlIGNsYXNzIGJhc2VkIG9uIHRvZ2dsZSBzdGF0ZVxyXG5cdFx0XHRpZiAoaXNDaGVja2VkKSB7XHJcblx0XHRcdFx0YnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmIChwYWlyLnRvZ2dsZUljb24pIHtcclxuXHRcdFx0Ly8gU3dhcCBpY29uIGJhc2VkIG9uIHRvZ2dsZSBzdGF0ZSAob25seSBpZiB0b2dnbGVJY29uIGlzIHNldClcclxuXHRcdFx0YnV0dG9uLmVtcHR5KCk7XHJcblx0XHRcdHNldEljb24oYnV0dG9uLCBpc0NoZWNrZWQgPyBwYWlyLnRvZ2dsZUljb24gOiBwYWlyLmljb24pO1xyXG5cdFx0XHRidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQXBwbHkgY29sb3Igb25seSBpZiBjdXN0b20gY29sb3IgaXMgc2V0IChub3QgYmxhY2svZGVmYXVsdClcclxuXHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRidXR0b24uc3R5bGUuY29sb3IgPSBwYWlyLmNvbG9yO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0YnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIGJ1dHRvbiBuYW1lcy90b29sdGlwcyBmb3IgYWxsIGV4aXN0aW5nIGJ1dHRvbnNcclxuXHQgKi9cclxuXHRwdWJsaWMgdXBkYXRlQnV0dG9uTmFtZXMoKTogdm9pZCB7XHJcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0ZXhwbG9yZXJzLmZvckVhY2goKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKCFuYXZCdXR0b25zQ29udGFpbmVyKSByZXR1cm47XHJcblxyXG5cdFx0XHRmb3IgKGNvbnN0IHBhaXIgb2YgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcykge1xyXG5cdFx0XHRcdGNvbnN0IGJ1dHRvbiA9IG5hdkJ1dHRvbnNDb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZD1cIiR7cGFpci5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRpZiAoYnV0dG9uKSB7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgcGFpci5uYW1lKTtcclxuXHRcdFx0XHRcdC8vIFVwZGF0ZSB0b2dnbGUgc3RhdGUgYXMgd2VsbFxyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShidXR0b24sIHBhaXIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgYWxsIGJ1dHRvbnMgZm9yIGEgc3BlY2lmaWMgY29tbWFuZCBJRCBhY3Jvc3MgYWxsIGV4cGxvcmVyc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgdXBkYXRlQWxsQnV0dG9uc0ZvckNvbW1hbmQoY29tbWFuZElkOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHBhaXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLmZpbmQocCA9PiBwLmlkID09PSBjb21tYW5kSWQpO1xyXG5cdFx0aWYgKCFwYWlyKSByZXR1cm47XHJcblxyXG5cdFx0Y29uc3QgZXhwbG9yZXJzID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2ZpbGUtZXhwbG9yZXInKTtcclxuXHRcdGV4cGxvcmVycy5mb3JFYWNoKChsZWFmKSA9PiB7XHJcblx0XHRcdGNvbnN0IG5hdkJ1dHRvbnNDb250YWluZXIgPSBsZWFmLnZpZXc/LmNvbnRhaW5lckVsPy5xdWVyeVNlbGVjdG9yKCdkaXYubmF2LWJ1dHRvbnMtY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmICghbmF2QnV0dG9uc0NvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuXHRcdFx0Y29uc3QgYnV0dG9uID0gbmF2QnV0dG9uc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkPVwiJHtjb21tYW5kSWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmIChidXR0b24pIHtcclxuXHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVmcmVzaCB0b2dnbGUgc3RhdGVzIGZvciBhbGwgYnV0dG9uc1xyXG5cdCAqL1xyXG5cdHB1YmxpYyByZWZyZXNoVG9nZ2xlU3RhdGVzKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgZXhwbG9yZXJzID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2ZpbGUtZXhwbG9yZXInKTtcclxuXHRcdGV4cGxvcmVycy5mb3JFYWNoKChsZWFmKSA9PiB7XHJcblx0XHRcdGNvbnN0IG5hdkJ1dHRvbnNDb250YWluZXIgPSBsZWFmLnZpZXc/LmNvbnRhaW5lckVsPy5xdWVyeVNlbGVjdG9yKCdkaXYubmF2LWJ1dHRvbnMtY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmICghbmF2QnV0dG9uc0NvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuXHRcdFx0Zm9yIChjb25zdCBwYWlyIG9mIHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMpIHtcclxuXHRcdFx0XHRjb25zdCBidXR0b24gPSBuYXZCdXR0b25zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQ9XCIke3BhaXIuaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0Ly8gUmVmcmVzaCBpZiB0b2dnbGVJY29uIGlzIHNldCBPUiBpZiB1c2VBY3RpdmVDbGFzcyBpcyB0cnVlIChib3RoIG5lZWQgc3RhdGUgdXBkYXRlcylcclxuXHRcdFx0XHRpZiAoYnV0dG9uICYmIChwYWlyLnRvZ2dsZUljb24gfHwgcGFpci51c2VBY3RpdmVDbGFzcykpIHtcclxuXHRcdFx0XHRcdC8vIEFsd2F5cyB1cGRhdGUgYnV0dG9uIHN0YXRlIC0gdGhpcyB3aWxsIGNoZWNrIHRoZSBhY3R1YWwgY29tbWFuZCBzdGF0ZVxyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShidXR0b24sIHBhaXIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBBcHBseSBpY29uIG92ZXJyaWRlcyB0byBuYXRpdmUgZXhwbG9yZXIgYnV0dG9uc1xyXG5cdCAqL1xyXG5cdHB1YmxpYyBhcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTogdm9pZCB7XHJcblx0XHQvLyBPYnNlcnZlcnMgYXJlIGFscmVhZHkgZGlzY29ubmVjdGVkIGR1cmluZyByZW9yZGVyLCBzbyBubyBuZWVkIHRvIHNldCBmbGFnIGhlcmVcclxuXHJcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0Y29uc3QgaWNvbk92ZXJyaWRlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnM7XHJcblxyXG5cdFx0Ly8gTWFwIG9mIGFyaWEtbGFiZWxzIHRvIGRlZmF1bHQgaWNvbnMgYW5kIGljb24ga2V5c1xyXG5cdFx0Y29uc3QgZGVmYXVsdEljb25zOiBSZWNvcmQ8c3RyaW5nLCB7IGljb246IHN0cmluZywga2V5OiAnbmV3Tm90ZScgfCAnbmV3Rm9sZGVyJyB8ICdzb3J0T3JkZXInIHwgJ2F1dG9SZXZlYWwnIHwgJ2NvbGxhcHNlQWxsJyB9PiA9IHtcclxuXHRcdFx0J05ldyBub3RlJzogeyBpY29uOiAnbHVjaWRlLWVkaXQnLCBrZXk6ICduZXdOb3RlJyB9LFxyXG5cdFx0XHQnTmV3IGZvbGRlcic6IHsgaWNvbjogJ2x1Y2lkZS1mb2xkZXItcGx1cycsIGtleTogJ25ld0ZvbGRlcicgfSxcclxuXHRcdFx0J0NoYW5nZSBzb3J0IG9yZGVyJzogeyBpY29uOiAnbHVjaWRlLXNvcnQtYXNjJywga2V5OiAnc29ydE9yZGVyJyB9LFxyXG5cdFx0XHQnQXV0by1yZXZlYWwgY3VycmVudCBmaWxlJzogeyBpY29uOiAnbHVjaWRlLWdhbGxlcnktdmVydGljYWwnLCBrZXk6ICdhdXRvUmV2ZWFsJyB9LFxyXG5cdFx0XHQnQ29sbGFwc2UgYWxsJzogeyBpY29uOiAnbHVjaWRlLWNoZXZyb25zLXVwLWRvd24nLCBrZXk6ICdjb2xsYXBzZUFsbCcgfSxcclxuXHRcdH07XHJcblxyXG5cdFx0ZXhwbG9yZXJzLmZvckVhY2goKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKCFuYXZCdXR0b25zQ29udGFpbmVyKSByZXR1cm47XHJcblxyXG5cdFx0XHQvLyBGaW5kIGFsbCBuYXRpdmUgYnV0dG9ucyAodGhvc2Ugd2l0aG91dCBkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQpXHJcblx0XHRcdGNvbnN0IG5hdGl2ZUJ1dHRvbnMgPSBuYXZCdXR0b25zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYtYWN0aW9uLWJ1dHRvbjpub3QoW2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZF0pJyk7XHJcblx0XHRcdG5hdGl2ZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgYXJpYUxhYmVsID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpO1xyXG5cdFx0XHRcdGlmICghYXJpYUxhYmVsKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdGNvbnN0IGJ1dHRvbkluZm8gPSBkZWZhdWx0SWNvbnNbYXJpYUxhYmVsXTtcclxuXHRcdFx0XHRpZiAoIWJ1dHRvbkluZm8pIHJldHVybjtcclxuXHJcblx0XHRcdFx0Y29uc3QgaWNvbktleSA9IGJ1dHRvbkluZm8ua2V5O1xyXG5cdFx0XHRcdGNvbnN0IGljb25PdmVycmlkZSA9IGljb25PdmVycmlkZXM/LltpY29uS2V5XTtcclxuXHRcdFx0XHRjb25zdCBjb2xvck92ZXJyaWRlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzO1xyXG5cdFx0XHRcdGNvbnN0IGNvbG9yID0gY29sb3JPdmVycmlkZXM/LltpY29uS2V5XTtcclxuXHJcblx0XHRcdFx0Ly8gQWx3YXlzIHVwZGF0ZSB0aGUgaWNvbiAoZWl0aGVyIG92ZXJyaWRlIG9yIGRlZmF1bHQpXHJcblx0XHRcdFx0YnV0dG9uLmVtcHR5KCk7XHJcblx0XHRcdFx0aWYgKGljb25PdmVycmlkZSkge1xyXG5cdFx0XHRcdFx0Ly8gQXBwbHkgaWNvbiBvdmVycmlkZVxyXG5cdFx0XHRcdFx0c2V0SWNvbihidXR0b24gYXMgSFRNTEVsZW1lbnQsIGljb25PdmVycmlkZSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIE5vIGljb24gb3ZlcnJpZGUgLSByZXN0b3JlIGRlZmF1bHQgaWNvblxyXG5cdFx0XHRcdFx0c2V0SWNvbihidXR0b24gYXMgSFRNTEVsZW1lbnQsIGJ1dHRvbkluZm8uaWNvbik7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBBcHBseSBjb2xvciBpZiBzZXRcclxuXHRcdFx0XHRpZiAoY29sb3IpIHtcclxuXHRcdFx0XHRcdChidXR0b24gYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmNvbG9yID0gY29sb3I7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFJlbW92ZSBpbmxpbmUgY29sb3IgLSBsZXQgZGVmYXVsdCBDU1MgaGFuZGxlIGl0XHJcblx0XHRcdFx0XHQoYnV0dG9uIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZW1vdmUgYSBjb21tYW5kIGZyb20gZXhwbG9yZXJcclxuXHQgKi9cclxuXHRwdWJsaWMgYXN5bmMgcmVtb3ZlQ29tbWFuZChwYWlyOiBDb21tYW5kSWNvblBhaXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcykgcmV0dXJuO1xyXG5cdFx0Y29uc3QgaW5kZXggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLmluZGV4T2YocGFpcik7XHJcblx0XHRpZiAoaW5kZXggPiAtMSkge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLnNwbGljZShpbmRleCwgMSk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnJlb3JkZXIoKTtcclxuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnV0dG9uUmVwbGFjZXJPcHRpb25zIHtcclxuICAgIHN1cnZpdmFsT2JzZXJ2ZXI/OiBib29sZWFuO1xyXG4gICAgcGFyZW50U2VsZWN0b3I/OiBzdHJpbmc7XHJcbiAgICBpY29uU2VsZWN0b3I/OiBzdHJpbmc7XHJcbiAgICB1bmlxdWVJZDogc3RyaW5nO1xyXG4gICAgY3NzQ2xhc3M6IHN0cmluZztcclxuICAgIG9uQWZ0ZXJJbnN0YWxsPzogKGN1c3RvbUJ1dHRvbjogSFRNTEVsZW1lbnQsIG9yaWdpbmFsQnV0dG9uOiBIVE1MRWxlbWVudCB8IG51bGwpID0+IHZvaWQ7XHJcbiAgICBvbkJlZm9yZVVuaW5zdGFsbD86IChjdXN0b21CdXR0b246IEhUTUxFbGVtZW50IHwgbnVsbCkgPT4gdm9pZDtcclxuICAgIHVzZUNhcHR1cmU/OiBib29sZWFuO1xyXG4gICAgaGFuZGxlVG91Y2g/OiBib29sZWFuO1xyXG4gICAgLy8gRnVuY3Rpb24gdG8gZmluZCB0aGUgb3JpZ2luYWwgYnV0dG9uIGlmIHNlbGVjdG9yIGlzIG5vdCBlbm91Z2hcclxuICAgIGZpbmRCdXR0b24/OiAocGFyZW50OiBFbGVtZW50KSA9PiBIVE1MRWxlbWVudCB8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCdXR0b25SZXBsYWNlciB7XHJcbiAgICBwcml2YXRlIGN1c3RvbUJ1dHRvbjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgb3JpZ2luYWxCdXR0b246IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIG9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGluc3RhbGxUaW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHNlbGVjdG9yOiBzdHJpbmcsXHJcbiAgICAgICAgcHJpdmF0ZSByZXBsYWNlbWVudEljb246IHN0cmluZyxcclxuICAgICAgICBwcml2YXRlIGNhbGxiYWNrOiAoKSA9PiB2b2lkLFxyXG4gICAgICAgIHByaXZhdGUgb3B0aW9uczogQnV0dG9uUmVwbGFjZXJPcHRpb25zXHJcbiAgICApIHsgfVxyXG5cclxuICAgIGluc3RhbGwoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50cnlJbnN0YWxsKCk7XHJcblxyXG4gICAgICAgIC8vIEFsc28gdHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgdG8gZW5zdXJlIERPTSBpcyByZWFkeVxyXG4gICAgICAgIHRoaXMuaW5zdGFsbFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLnRyeUluc3RhbGwoKSwgNTAwKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zdXJ2aXZhbE9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBPYnNlcnZlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRyeUluc3RhbGwoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5vcHRpb25zLnBhcmVudFNlbGVjdG9yXHJcbiAgICAgICAgICAgID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMucGFyZW50U2VsZWN0b3IpXHJcbiAgICAgICAgICAgIDogZG9jdW1lbnQuYm9keTtcclxuXHJcbiAgICAgICAgaWYgKCFwYXJlbnQpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IG9yaWdpbmFsQnRuOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZmluZEJ1dHRvbikge1xyXG4gICAgICAgICAgICBvcmlnaW5hbEJ0biA9IHRoaXMub3B0aW9ucy5maW5kQnV0dG9uKHBhcmVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb3JpZ2luYWxCdG4gPSBwYXJlbnQucXVlcnlTZWxlY3Rvcih0aGlzLnNlbGVjdG9yKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghb3JpZ2luYWxCdG4pIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gU2tpcCBpZiBhbHJlYWR5IHJlcGxhY2VkIGFuZCBidXR0b24gaXMgc3RpbGwgdmFsaWRcclxuICAgICAgICBpZiAodGhpcy5jdXN0b21CdXR0b24gJiYgdGhpcy5jdXN0b21CdXR0b24ucGFyZW50RWxlbWVudCAmJiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuY3VzdG9tQnV0dG9uKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZW1vdmUgb2xkIGN1c3RvbSBidXR0b24gaWYgaXQgZXhpc3RzIGJ1dCBpcyBzdGFsZVxyXG4gICAgICAgIHRoaXMucmVtb3ZlQ3VzdG9tQnV0dG9uKCk7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSByZXBsYWNlbWVudFxyXG4gICAgICAgIGNvbnN0IGN1c3RvbUJ1dHRvbiA9IG9yaWdpbmFsQnRuLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBjdXN0b21CdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XHJcbiAgICAgICAgY3VzdG9tQnV0dG9uLnNldEF0dHJpYnV0ZShgZGF0YS0ke3RoaXMub3B0aW9ucy51bmlxdWVJZH1gLCAndHJ1ZScpO1xyXG4gICAgICAgIGN1c3RvbUJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMub3B0aW9ucy5jc3NDbGFzcyk7XHJcblxyXG4gICAgICAgIC8vIENsZWFyIGV4aXN0aW5nIGhhbmRsZXJzXHJcbiAgICAgICAgY3VzdG9tQnV0dG9uLm9uY2xpY2sgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyBTZXQgaWNvblxyXG4gICAgICAgIGNvbnN0IGljb25Db250YWluZXIgPSBjdXN0b21CdXR0b24ucXVlcnlTZWxlY3Rvcignc3ZnJyk/LnBhcmVudEVsZW1lbnQgfHwgY3VzdG9tQnV0dG9uO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIENsZWFyIG9sZCBzdmdcclxuICAgICAgICAgICAgY29uc3Qgb2xkU3ZnID0gY3VzdG9tQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xyXG4gICAgICAgICAgICBpZiAob2xkU3ZnKSBvbGRTdmcucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICBzZXRJY29uKGljb25Db250YWluZXIsIHRoaXMucmVwbGFjZW1lbnRJY29uKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtVSSBUd2Vha2VyXSBGYWlsZWQgdG8gc2V0IGljb24gJHt0aGlzLnJlcGxhY2VtZW50SWNvbn06YCwgZSk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBzZXRJY29uKGljb25Db250YWluZXIsICd3cmVuY2gnKTtcclxuICAgICAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayBmYWlsZWQgdG9vXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENsaWNrIGhhbmRsZXJcclxuICAgICAgICBjb25zdCBoYW5kbGVyID0gKGV2dDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5jYWxsYmFjaygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGN1c3RvbUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIsIHRoaXMub3B0aW9ucy51c2VDYXB0dXJlID8/IHRydWUpO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGFuZGxlVG91Y2gpIHtcclxuICAgICAgICAgICAgY3VzdG9tQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBoYW5kbGVyLCB0aGlzLm9wdGlvbnMudXNlQ2FwdHVyZSA/PyB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEluc2VydFxyXG4gICAgICAgIG9yaWdpbmFsQnRuLnBhcmVudEVsZW1lbnQ/Lmluc2VydEJlZm9yZShjdXN0b21CdXR0b24sIG9yaWdpbmFsQnRuKTtcclxuXHJcbiAgICAgICAgdGhpcy5jdXN0b21CdXR0b24gPSBjdXN0b21CdXR0b247XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbEJ1dHRvbiA9IG9yaWdpbmFsQnRuO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLm9uQWZ0ZXJJbnN0YWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkFmdGVySW5zdGFsbChjdXN0b21CdXR0b24sIG9yaWdpbmFsQnRuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdW5pbnN0YWxsKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbGxUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmluc3RhbGxUaW1lb3V0KTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YWxsVGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcikge1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLm9uQmVmb3JlVW5pbnN0YWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkJlZm9yZVVuaW5zdGFsbCh0aGlzLmN1c3RvbUJ1dHRvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlbW92ZUN1c3RvbUJ1dHRvbigpO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxCdXR0b24gPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVtb3ZlQ3VzdG9tQnV0dG9uKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUJ1dHRvbikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXN0b21CdXR0b24ucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21CdXR0b24ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21CdXR0b24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2xlYW4gdXAgYW55IHN0cmF5IG9uZXNcclxuICAgICAgICBjb25zdCBzdHJheXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHt0aGlzLm9wdGlvbnMuY3NzQ2xhc3N9YCk7XHJcbiAgICAgICAgc3RyYXlzLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0dXBPYnNlcnZlcigpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcikgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XHJcblxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0cyA9IHRoaXMuY3VzdG9tQnV0dG9uICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbUJ1dHRvbi5wYXJlbnRFbGVtZW50ICYmXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuY3VzdG9tQnV0dG9uKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghZXhpc3RzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyeUluc3RhbGwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLm9wdGlvbnMucGFyZW50U2VsZWN0b3JcclxuICAgICAgICAgICAgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5wYXJlbnRTZWxlY3RvcilcclxuICAgICAgICAgICAgOiBkb2N1bWVudC5ib2R5O1xyXG5cclxuICAgICAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZSh0YXJnZXQsIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHN1YnRyZWU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gYm9keVxyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xyXG4gICAgICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc3VidHJlZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQSxJQUFBQSxvQkFBMEY7OztBQzBHbkYsSUFBTSxtQkFBK0I7QUFBQTtBQUFBLEVBRTNDLFVBQVU7QUFBQSxFQUNWLHVCQUF1QjtBQUFBLEVBQ3ZCLGlCQUFpQjtBQUFBLEVBQ2pCLGdCQUFnQjtBQUFBLEVBQ2hCLGlCQUFpQjtBQUFBLEVBQ2pCLHFCQUFxQjtBQUFBLEVBQ3JCLGVBQWU7QUFBQSxFQUNmLFlBQVk7QUFBQSxFQUNaLGdCQUFnQjtBQUFBO0FBQUEsRUFHaEIsUUFBUTtBQUFBLEVBQ1Isc0JBQXNCO0FBQUEsRUFDdEIsc0JBQXNCO0FBQUEsRUFDdEIsZUFB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QUFJO0FBQUEsVUFDNUIsU0FBUyxNQUFNO0FBQUUsb0JBQVEsaUJBQWlCO0FBQUEsVUFBVTtBQUFBLFFBQ3JELENBQUM7QUFBQSxNQUNGO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFDRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgIndvcmtzcGFjZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInZhbHVlIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFycmF5TW92ZU11dGFibGUiLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFycmF5TW92ZU11dGFibGUiLCAiX2EiLCAiY29udHJvbEVsIiwgImljb25CdXR0b24iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAic3RhYmxlQ2xhc3NlcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImUiLCAiX2EiLCAiX2IiXQp9Cg==
